generator client {
  provider = "prisma-client"
}

datasource db {
  provider = "sqlite"
}

model Product {
  id          String    @id
  locator     String    @unique
  displayName String?   @map("display_name")
  variants    Variant[]
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")

  @@index([locator])
  @@map("products")
}

model Variant {
  id        String   @id
  productId String   @map("product_id")
  name      String   @default("default")
  locator   String   @unique
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@unique([productId, name])
  @@index([productId])
  @@index([locator])
  @@map("variants")
}
