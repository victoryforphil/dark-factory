{
  "info": {
    "id": "ses_39b807128ffeskZYgLLXdO7p7M",
    "slug": "quick-falcon",
    "projectID": "51ce91990cdb80fb62489f7028ffc023d69077fd",
    "directory": "/Users/alex/repos/vfp/dark-factory",
    "title": "Proto install script for Bun-based repo setup",
    "version": "1.2.5",
    "summary": {
      "additions": 24112,
      "deletions": 36,
      "files": 188
    },
    "time": {
      "created": 1771212607191,
      "updated": 1771214884598
    }
  },
  "messages": [
    {
      "info": {
        "role": "user",
        "time": {
          "created": 1771212607208
        },
        "summary": {
          "title": "Script authoring: Bun .sh.ts from input to install script creation",
          "diffs": [
            {
              "file": ".opencode/commands/make_script.md",
              "before": "---\ndescription: Create a new Bun shebang script from prompt/example/bash/context\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Create a reusable script under `scripts/` based on one of these input types:\n  - user prompt\n  - provided example script\n  - provided bash script/command sequence\n  - agent-summarized successful context from the current conversation\n\nProcess:\n\n1. Identify the source input type and extract required behavior.\n2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.\n4. Keep scripts explicit, readable, and safe (no embedded secrets).\n5. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n\nReturn:\n\n- New/updated script paths\n- Helper paths (if any)\n- What source input was used (prompt/example/bash/context)\n- Verification command(s) run or exact manual verify steps\n",
              "after": "---\ndescription: Create a new Bun shebang script from prompt/example/bash/context\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Create a reusable script under `scripts/` based on one of these input types:\n  - user prompt\n  - provided example script\n  - provided bash script/command sequence\n  - agent-summarized successful context from the current conversation\n\nProcess:\n\n1. Identify the source input type and extract required behavior.\n2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.\n4. If input includes troubleshooting history, filter out failed/diagnostic steps and keep only confirmed working steps.\n5. Keep scripts explicit, readable, and safe (no embedded secrets).\n6. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n\nReturn:\n\n- New/updated script paths\n- Helper paths (if any)\n- What source input was used (prompt/example/bash/context)\n- Any excluded failed/diagnostic steps (if applicable)\n- Verification command(s) run or exact manual verify steps\n",
              "additions": 4,
              "deletions": 2,
              "status": "modified"
            },
            {
              "file": "AGENTS.md",
              "before": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
              "after": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
              "additions": 2,
              "deletions": 0,
              "status": "modified"
            },
            {
              "file": "README.md",
              "before": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
              "after": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
              "additions": 1,
              "deletions": 0,
              "status": "modified"
            },
            {
              "file": "scripts/helpers/run_steps.sh.ts",
              "before": "",
              "after": "#!/usr/bin/env bun\n\nexport type CommandStep = {\n  name: string;\n  command: string;\n  args?: string[];\n  cwd?: string;\n};\n\nexport async function runCommandSteps(steps: CommandStep[]): Promise<void> {\n  for (const [index, step] of steps.entries()) {\n    const stepNumber = index + 1;\n    console.log(`Install // Step // ${stepNumber}/${steps.length} ${step.name}`);\n\n    const process = Bun.spawn([step.command, ...(step.args ?? [])], {\n      cwd: step.cwd,\n      stdin: \"inherit\",\n      stdout: \"inherit\",\n      stderr: \"inherit\",\n    });\n\n    const exitCode = await process.exited;\n    if (exitCode !== 0) {\n      throw new Error(\n        `Install // Step // Failed (${step.name},exit=${exitCode})`,\n      );\n    }\n  }\n}\n",
              "additions": 29,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "scripts/install.sh.ts",
              "before": "",
              "after": "#!/usr/bin/env bun\n\nimport { join } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\nimport { runCommandSteps } from \"./helpers/run_steps.sh.ts\";\n\nconst repoRoot = findRepoRoot(import.meta.dir);\n\nawait runCommandSteps([\n  {\n    name: \"Proto install\",\n    command: \"bun\",\n    args: [join(repoRoot, \"scripts\", \"proto_install.sh.ts\")],\n    cwd: repoRoot,\n  },\n]);\n",
              "additions": 16,
              "deletions": 0,
              "status": "added"
            }
          ]
        },
        "agent": "build",
        "model": {
          "providerID": "openai",
          "modelID": "gpt-5.3-codex"
        },
        "variant": "medium",
        "id": "msg_c647f8eda001ekGklh5kR8QJsK",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "file",
          "mime": "text/plain",
          "filename": "scripts/proto_install.sh.ts",
          "url": "file:///Users/alex/repos/vfp/dark-factory/scripts/proto_install.sh.ts",
          "source": {
            "text": {
              "value": "@scripts/proto_install.sh.ts",
              "start": 96,
              "end": 124
            },
            "type": "file",
            "path": "scripts/proto_install.sh.ts"
          },
          "id": "prt_c647f8edb001piyeHid4GJtcqu",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8eda001ekGklh5kR8QJsK"
        },
        {
          "type": "text",
          "text": "Use the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Create a reusable script under `scripts/` based on one of these input types:\n  - user prompt\n  - provided example script\n  - provided bash script/command sequence\n  - agent-summarized successful context from the current conversation\n\nProcess:\n\n1. Identify the source input type and extract required behavior.\n2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.\n4. Keep scripts explicit, readable, and safe (no embedded secrets).\n5. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n\nReturn:\n\n- New/updated script paths\n- Helper paths (if any)\n- What source input was used (prompt/example/bash/context)\n- Verification command(s) run or exact manual verify steps\n\n\"install\" script that will run a an array of command \"steps\" - first one being our @scripts/proto_install.sh.ts - make sure to chmodd it once done",
          "id": "prt_c647f8ee9001iFLOcStfrJR21t",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8eda001ekGklh5kR8QJsK"
        },
        {
          "type": "text",
          "text": "Called the Read tool with the following input: {\"filePath\":\"/Users/alex/repos/vfp/dark-factory/scripts/proto_install.sh.ts\"}",
          "synthetic": true,
          "id": "prt_c647f8ee9002vSS9vR0muFnTe0",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8eda001ekGklh5kR8QJsK"
        },
        {
          "type": "text",
          "text": "Called the Read tool with the following input: {\"filePath\":\"/Users/alex/repos/vfp/dark-factory/scripts/proto_install.sh.ts\"}",
          "synthetic": true,
          "id": "prt_c647f8eea001pGH6pU93L2RoUv",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8eda001ekGklh5kR8QJsK"
        },
        {
          "type": "text",
          "text": "<path>/Users/alex/repos/vfp/dark-factory/scripts/proto_install.sh.ts</path>\n<type>file</type>\n<content>1: #!/usr/bin/env bun\n2: import { $ } from \"bun\";\n3: import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n4: \n5: const repoRoot = findRepoRoot(import.meta.dir);\n6: await $`proto install`.cwd(repoRoot);\n7: \n\n(End of file - total 7 lines)\n</content>",
          "synthetic": true,
          "id": "prt_c647f8eed001HKDsv15lw68ZMo",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8eda001ekGklh5kR8QJsK"
        },
        {
          "type": "text",
          "text": "<path>/Users/alex/repos/vfp/dark-factory/scripts/proto_install.sh.ts</path>\n<type>file</type>\n<content>1: #!/usr/bin/env bun\n2: import { $ } from \"bun\";\n3: import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n4: \n5: const repoRoot = findRepoRoot(import.meta.dir);\n6: await $`proto install`.cwd(repoRoot);\n7: \n\n(End of file - total 7 lines)\n</content>",
          "synthetic": true,
          "id": "prt_c647f8eed002yaTfW4y444ULvi",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8eda001ekGklh5kR8QJsK"
        },
        {
          "type": "file",
          "mime": "text/plain",
          "filename": "scripts/proto_install.sh.ts",
          "url": "file:///Users/alex/repos/vfp/dark-factory/scripts/proto_install.sh.ts",
          "id": "prt_c647f8eed003h5fE6lob0FejeI",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8eda001ekGklh5kR8QJsK"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212607224,
          "completed": 1771212618066
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 16401,
          "input": 15913,
          "output": 488,
          "reasoning": 467,
          "cache": {
            "read": 0,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "tool-calls",
        "id": "msg_c647f8ef8001E1LTI7c27lxR5j",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9f03102d1dced7a638140c0cb439db49def8c2d3",
          "id": "prt_c647f9703001fhZ713wiWNiNSH",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8ef8001E1LTI7c27lxR5j"
        },
        {
          "type": "reasoning",
          "text": "**Creating reusable install script**",
          "metadata": {
            "openai": {
              "itemId": "rs_05d183210b658d360169928f41a58c8195b11d22a6586ca186",
              "reasoningEncryptedContent": "gAAAAABpko9JoGmWn9jMuY1jGTlz6g7JVacPU94xDxe2qPEmsjPmKRECPL5OB7plSNoNSS0nE03uzl01Ts7I9jSEMhfkEhkEfodBT50wckn07CL6I8P7GFSq1eiwngKs7k-iYETov0tSUU7GUkPLkjmXfcNY-Uuw90eHou_bJtwhroo0DASxfHFuq-C3NunB7H92qlfdjzWY3Qe684eiPfP9KkMEP2ZSLDpNE5BBg2qzo2FDQL-dtebhu-49PB1ftpj7Lgrzr4-zK3nwXsfrwQfCta9bw7vPVk1UTFlcikkPbEefui-zlVvdL2LSo_sM-WK18buipPJUWKrpFdC3X1Ox3noMCejZGCn3YBgkiVt_lwWGdzFLyNeeL5t8xqFjqzjUFUT0Ednft3f93ZwfRNYNueXjdnIxt1d4RTMwrwkus2kAxANPpmTTY8yE4WST2OX0p--GcDPWYEFUphXsAjvqlxU0fiqmrZbV-xaCK4kMwJiJ2YLhe2f050qB1sSTr2iVg_7majiqh2NkE8gAtb6wAPvpZXh88wQ_hFnaka8SFwm6sCZVU5nHJwe0bU8z66C36t2j4GlA3qpJF1AJhMIE2XlTu9gUKr5IfND_CWvLcUj5oI4yXRzRaYcVjdrQEogy4cIRU6UPa1aYMgxzkPr8ezVSgZouUavVZ4KxDmRojFGokk8T3WP2jtnrCxchfGlmCY8FF_ZPLCLWWk_ZVPUKaI2hxWIj_9O4kd9m7aZuQt14nv5zCPV6P1DcBUybNko5ulCkmmvlIUR-qVzC6PJUkqXb5ITcHUDhDHGsvc5l6Ytx2vBWMfpfjYR5AUr5RgJ84vHbjihZPQEkYj6clUBUljBbUfS6fGwBK5udsx1R52_f40CXVYNG-X894UiKx3dGYaqQJ_KaMPIdQG0Ht_sOkqESyGJVBxDW5l39H0nP-j0qDV5okcaaQ_TvufWWbLnNBrjg1Imi91QNyYYEYvJ7QeUIzJ-J6CNFvs5ToECwHqoXzfQe5hzhArK1GvmsWapucB9lqTF27ZqEnz0-0ZUSQu5MXi3mWK3GXlpfy7zwBqyiYSzWOmvGpr_iemAk5klJDQ82beNMlDVMrQ6HLZ47GYevA8rsGy0XgCGy_e545qC6wzhvxhHoag47JHFVuMNPMD9FrZLtzgtMpu-VNeDNOtqJMqrgdCUmh6ZLLik8b2T8wiFp_ogNvwW2kf56PMz3S4cw7z1eptX4pMv0e6ErA1WBFjRwV416QVixVNZgXsQjw4G73pT4eLNjHDC6wInyJt_zqSaLOMqrnvu3p-1sbx3gOmRchIWjmf4x52dcMctAn6U8rQ11GbOCI6bE5PLMaFon7uiqD78TlX-F9wSnPlNy5qa86HPOVEyBEuw9i6vel-O0eRRW9rg1vRK0FVjM-h8pRc-S1b2GNpAuBSO-IkqiY7z-IluRUb5uclLXBo_5nF_9ngLKdo-1o7QlbTLJoiaNYez9DAgneYa5AMOPGVZvYjWTy2yh8Ahx-x39z0VabOeCeyWfqwFwFuKWQ3X5hN48LUm_RARaCA6djHxzu8Q2csb-E0N5JnHBZvnrLB38zuqlh1EVcl9d2oYCT3N5S89bcI5KXwM0-S105zHrRM0WAHD8ix2HsUmuorjqFPOY6_DBkr0dCqX6SrucuzxPkH6bRS7KQdpSdolJx2SOKXrsCVUEo3-jU-1GJx6K4FBzfm1mu8BQiyOWoVfe1l9QoHVaVfkSSKSGgY_ZAe81B3VOMsJHm6gbRziA0KKPScGpht-e8e8_Aj5ad5wVwljTgYkbeARwxc7goT2WQl3JpDbNW0LOCqdgRq3q9h0CDEpqIPa2p4CgmWPGJJrIZxCg0b9WwSqapW10mCEw1dN8X_tQkDckdn0zr-Each03WyAxaoBtPd1rkZjCu9Sppkz3-flM3T5JU1zYf5_XZ8uhdPh3wgLkxxO6NlyqadZnafo3SXMqwjEgrjVolyJsXlt2SlGhojrDK59aZJXeZn4PfDsmNYCq-QHy1mqNl-UmpYsOaxKhd4aLOhgmgqNJxnbDyGS9w8gBQjMKHzGtEQFQixfMeHm2OUkkS28WhcIkyPECqi_syAG7nDbuqqlv2JIlPsk0Sa5nLoUENAMJ0kPyJb-SPGDpR-VBLgKWS2iNOB7cDUGQdnhSAD_ByL93p2PA4V9cxUPXnf-n4eYQ-TwnMd67VPGL_UvYhLxBJ-8K-4RxVQtA2QMhXqix4cjeCi9jc6vF6QCJtYjrt3AKrvfRtR8w43_eqDvO_nSvKfEBC1rqK3PfowDMo9DvTaMA-tZU-_2cUv-7lYoZz-Z8eIIu1ZspwT2obKoEoL8AMeX3wFl0lmBRvBX2hOPe9wyy8Qr6KPbyCCU4XdDaq9Jh883StEthWko7IZqExPEv4AQr39RE2IS4hClHsg5XsRmE3lAJI-FpSUETODrE8J84xXNMS9vHoqTOigem4_IrM5hXH_gDU3XNdsraZUzL-54UMGRYx9AFIVucftGXp4Fars7cBeB2losF3_sQxD9d56P9jRSlZrglOqgDx5Fh0WRWcrd9TRfOkrZP8bqZzLUnbuurKg8kWvelXQJtdMb-PCnA6j81Lz9OhiCr9RSJTOu1YAAkq8LB2lNp_rUl8OhGoOEq1xLULfckUKge6T7n4i28hvMH3x9RErc8y36RJutvFUqd8W-6wv2bABbXF_PCagckgN_Y0NPyx5mtX64jSCex525rl0hOzjmK7Ih5aDQT0df85NMCOUyxVdeNdItUoMKRX6PyzVpN6cbXTRcqK1kGtyv7RONScdyQkA_2jAEpJzjHQ6LHIvc-m__JrVpxgsNsP9rpB2PXiD0AYqExWfbStAhZON7RAzAfzV-om6T8tn9lZSZuKunOxTlno06-ONmXeQi7xy8ehC7Hwlx0ybslNw8xmUusED_el_3gPcwaFfLO-s8N63s2sRWCzEoCSpJHinF0y6UHWp1Zp1XHKmIoPnhocHoUtZxRo2png0qwWinQgBUvy5tK1qA-jRz0jtaIx9jdRVDnYaeJrSoJu0gsq6MEy8C_oJKjRC3feqJkedMWzwk_Vwxrf82K3BBW6hXRNMc9O6fkca7AcHg-TTQHkcQVL5cD7DywIVIky77Y8Jd2QeczbgBRR_jxKWKIy8CoSla22sON60KBu0JALJjyrenrBEHxlofPncdT0CYavEGY7fqqbXjgzGfhO2zuCr2dfIZNwwN5q-VTkHgdJDoWOFFTSf1bYHpocKGbZcf4LE_nXwtpd8cIAVe5IiOyeg5x30WzofUvMeddKbAGkhM-Av_ZlHZ7UqTRC4rATERbB8ncZpjXdmnyxbl097sRAvWeALkMq-aQLrxpT6xbF6NS-chvbjCweB0eZylJt3d9hr5mEw4otMhorNjTXB8d8slaBttkPIXaI2jq0x5wb07k_JTKCcoBaQNlXfP62fXYKrvLnbu8er0KNUQ0vKuWiRTC-2mnHv3Ms1DkE36ep4lHmblu997euOI53BXoWsKNQBTlfSoQCmbAWTFmQwGPoRYSVSeRGDzfQST0jRn60mhy_3ZGIVXoRlE8soKx627iq9Hu-nonAwWyKxCLq7qu6Hf_zDh3slhlQnASx2-0k_iORxh5_LsZiCQ2vdB38Ap8qcOyOhDEWs0xjQd46q-zSuJkqKeLJN-XZGHvBRCgy22dibKkyq_Xu9GhEZWqBEdwyOaiOmFzCVWNBFEtsvRnMNck6MKD8XLitoyt6ZUyn70xUZ2AIKPfiQlOnpyPvwnm2Kvq0GiZPwL5c9_hOE7rcOlNz4_YdYoDqRHWy-2jb0V5ntsaYMobtz1Ic0ZWkB_2SQRI7S6W9GthD0mWV8b7rt8S-10HO-09rg1qbB13xEkxUcaRBE3kaL_TtW_e_g1joj3XxyI4KJkxNMhtR8NfFEZiBIIgJjo7x6IANa-uY5V-2v8tRois8nUbp4YD9Xiv2sYQh_7SgC6QFroYzOuUFVkPuMVncuPkCw=="
            }
          },
          "time": {
            "start": 1771212609683,
            "end": 1771212617869
          },
          "id": "prt_c647f9893001m5hRm2IBq72DJZ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8ef8001E1LTI7c27lxR5j"
        },
        {
          "type": "tool",
          "callID": "call_kdr6EE6Dc244z8LiOTmamf8u",
          "tool": "skill",
          "state": {
            "status": "completed",
            "input": {
              "name": "script-authoring"
            },
            "output": "<skill_content name=\"script-authoring\">\n# Skill: script-authoring\n\n## What I do\n\n- Turn requested workflows into reusable scripts under `scripts/`.\n- Normalize script implementation to project conventions (`*.sh.ts` + shebang + helpers).\n- Capture successful ad-hoc command sequences as reusable script entrypoints.\n\n## Accepted inputs\n\nUse this skill when script requirements come from any of these sources:\n\n- User prompt only (goal and constraints)\n- Provided example script\n- Provided bash script or shell command sequence\n- Agent-summarized conversation context (for example, previously successful setup steps)\n\n## Output conventions\n\n- Primary scripts go in `scripts/` and use `*.sh.ts` naming.\n- Include shebang: `#!/usr/bin/env bun`.\n- Prefer shared helpers from `scripts/helpers/` instead of duplicating utility logic.\n- Default to explicit, readable command flow and fail fast on command errors.\n\n## Implementation workflow\n\n1. Identify script intent, inputs, and expected outputs from provided context.\n2. Choose script name and location under `scripts/`.\n3. Reuse or add helper utilities in `scripts/helpers/` when needed.\n4. Implement Bun-based script and run it once when safe to verify behavior.\n5. Update docs (`README.md` or `AGENTS.md`) when conventions or entrypoints change.\n\n## Notes\n\n- Keep scripts idempotent where practical.\n- Avoid embedding secrets or environment-specific absolute paths.\n- If verification cannot be run safely, state exactly what should be executed by the user.\n\nBase directory for this skill: file:///Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring\nRelative paths in this skill (e.g., scripts/, reference/) are relative to this base directory.\nNote: file list is sampled.\n\n<skill_files>\n\n</skill_files>\n</skill_content>",
            "title": "Loaded skill: script-authoring",
            "metadata": {
              "name": "script-authoring",
              "dir": "/Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring",
              "truncated": false
            },
            "time": {
              "start": 1771212617936,
              "end": 1771212617948
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_05d183210b658d360169928f49d4cc8195a89ea3be11b5b003"
            }
          },
          "id": "prt_c647fb88e0016XQyVOr1LOJvN3",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8ef8001E1LTI7c27lxR5j"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "ae4fe4ffbe53fabe2ab61e37f9f00a4a7550a05e",
          "cost": 0,
          "tokens": {
            "total": 16401,
            "input": 15913,
            "output": 488,
            "reasoning": 467,
            "cache": {
              "read": 0,
              "write": 0
            }
          },
          "id": "prt_c647fb9200014NzhLHKxORjwLV",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8ef8001E1LTI7c27lxR5j"
        },
        {
          "type": "patch",
          "hash": "9f03102d1dced7a638140c0cb439db49def8c2d3",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md",
            "/Users/alex/repos/vfp/dark-factory/AGENTS.md"
          ],
          "id": "prt_c647fb94f0011JDu8bdx1wdsAN",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647f8ef8001E1LTI7c27lxR5j"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212618067,
          "completed": 1771212622113
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 16944,
          "input": 1588,
          "output": 124,
          "reasoning": 18,
          "cache": {
            "read": 15232,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "tool-calls",
        "id": "msg_c647fb95300117O9fsXmluuQjF",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "ae4fe4ffbe53fabe2ab61e37f9f00a4a7550a05e",
          "id": "prt_c647fc0df001Q6JlBRdj50Rrg2",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fb95300117O9fsXmluuQjF"
        },
        {
          "type": "reasoning",
          "text": "**Planning script inspection**",
          "metadata": {
            "openai": {
              "itemId": "rs_0bd7fc6449050c960169928f4c33408195bb8f7bf018e72385",
              "reasoningEncryptedContent": "gAAAAABpko9N75ooy0NOqCYIVPY4SgoE8Rwz1YaB1s5D0WAdzOrQbDoJKKDGwyzubW_eYvbYzvXZEwCI7tZrCJfeyJoHBPmPBcAbXLeAfYor4-DtUzS8MBnwkSIqpRYq3sUJkRragWWKDTuJ-2QiCKC8xXmTIZHrObSAlWx97Qh4bnMdliW12tS9nX-DYLLO_c8iqvtjjF6EI_OAXf1edZIrj06zwScNLn71ddsD_vqYIxPV5RlsU1f8F11A7RI9HWud32irVFJyDZpqQVCdaBOS8cxOxRZKAFDOgFEB8s_jTaQIPEzkaDzgWX20d8dtSnfE1goYz4z9hdPHahvydFeLsyX37DogNmStf-q7aMCe_CwfwZmZjsPsf29_sjt_ebyAWcA8_Lsx0aE66_865wkHGbh2XOSY76uKBQBbVqKCX2z-doel3VkBTtNLZoFf_CjS608_7KnNCfKfj9VNVRR2MFq1oCYtmoLjOqkcq7kNffrRXUY-rXQerLLtNCbzO5iZskjFawwCkTptyKeCl8Iyt1WNd8WI974L9wrCFu66rj2MdF1ayDjQK_TAcbsy0Fj2mYPTvWUXhiU1M4Ly2BjL7DMRtfxHbNw12mldmi2wz5P2uqYKcrrFRnXdRtpDlEpFHQNhLD25ADnu1LC0z0qHg_-fArwtQQPqUKNTVZSO72nvuJehbnb02aQo6iL8oD04MRlAPdeYIci8PMa14020aDMeGI3aKNAsFqSF5Iuh4Nl-BYAD_El2VD8tQcGKIYs-y4Ho4oVt7L0xhzzCiq1AJji4BAT5TC6nYN8olq-MUvcMEbNy_uicxQO52zsxbBW69pyIgXbu6w1vw3_7ngJ_CHmTosPdqCCB75TrqeAhd_B1b0qrs6hOvoIGf9H3lqfeASXhg6gTvb1VS28J-Ef1B4ERKJdpzTKwfOKXiKcmnHB7FpbW3VY="
            }
          },
          "time": {
            "start": 1771212620258,
            "end": 1771212622049
          },
          "id": "prt_c647fc1e2001pYyAILKKSUtF9l",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fb95300117O9fsXmluuQjF"
        },
        {
          "type": "tool",
          "callID": "call_uno8uANIR08OIK9RCGb0RlSu",
          "tool": "glob",
          "state": {
            "status": "completed",
            "input": {
              "pattern": "scripts/**/*.ts",
              "path": "/Users/alex/repos/vfp/dark-factory"
            },
            "output": "/Users/alex/repos/vfp/dark-factory/scripts/proto_install.sh.ts\n/Users/alex/repos/vfp/dark-factory/scripts/helpers/run_root.sh.ts",
            "title": "",
            "metadata": {
              "count": 2,
              "truncated": false
            },
            "time": {
              "start": 1771212622051,
              "end": 1771212622069
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0bd7fc6449050c960169928f4df0f88195ae1e96cdd0cf62b2"
            }
          },
          "id": "prt_c647fc8e2001jMYSpucTKyeQUr",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fb95300117O9fsXmluuQjF"
        },
        {
          "type": "tool",
          "callID": "call_tjqQaJ7iNN5cUsWSVNRhaWXj",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/README.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/README.md</path>\n<type>file</type>\n<content>1: # Dark Factory - Autonomous Agentic Development At Scale\n2: \n3: # Concept\n4: \n5: - A central `dark-factory` \"core\" is used to track `worlds`\n6: - A `world` is an `env` + `actor`(s)\n7: - `env` is like a project and represents where an `actor` is spawned.\n8:   - Similar to `projets` in OpenCode or other agent orchestrators\n9:   - `env` may be a directory on host (simplest and most common) or later expanded to:\n10:     - Remote directory on a SSH-connected machine\n11:     - Dockershell w/ virutal FS\n12:     - Git Worktree\n13: - `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n14:   - we call this concept `dimensions`\n15:   - Examples:\n16:     - Multiple cloned directories of the same root project\n17:     - Git worktree supportds\n18:     - Instanced Docker shells\n19: - When an agent is spawned - it is linked to a given env\n20:   - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n21:   - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n22: - `actor` is a spawned agent that operates on an env.\n23:   - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n24:   - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n25: \n26: # Stack + Tools\n27: \n28: - Agentic Coding: `opencode`\n29: - Main languages: `rust` and `bun` / `typscript`\n30: - Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n31: - Optional build system: `moon` / `proto`\n32: - Common Schema Defintion: `prisma`\n33:   - [ ] TODO: Investigate use of protobuff\n34: \n35: # Scripts\n36: \n37: - Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n38: - Shared helpers live in `scripts/helpers/`.\n39: - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n40: - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n41: - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n42: \n43: # Components\n44: \n45: ## Core\n46: \n47: - Central service that manages tracking of all worlds/envs/settigns etc.\n48:   - TBD: will either be stateless w/ DB and route all commands just to the agents\n49:     - OR: a background API service (Rest even) we can query from frontends\n50: - Currently looking lile will be Bun + Elysia JS\n51: \n52: ## Frontends\n53: \n54: - Various frontends that invoke / connect to Core\n55: - Main way of iterating with the system\n56: - Uses the Core API to communicate (REST / WS or GRPC in the future)\n57: - Some Frontends:\n58:   - Rust TUI (Ratatui.rs) - First One\n59:   - Web Client (Bun + Vite + Shadcn + React)\n60:   - Pure CLI (Rust)\n61: \n62: ## Agents\n63: \n64: - Abstracted communication with actual agents doing work\n65: - First is OpenCode\n66: \n\n(End of file - total 66 lines)\n</content>",
            "title": "README.md",
            "metadata": {
              "preview": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771212622053,
              "end": 1771212622056
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0bd7fc6449050c960169928f4df10881958a776d78b69364dc"
            }
          },
          "id": "prt_c647fc8e40013k0YQYkMZ2wuM4",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fb95300117O9fsXmluuQjF"
        },
        {
          "type": "tool",
          "callID": "call_vKU8RQ5wcIWXfttYvkOe14Sm",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/AGENTS.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/AGENTS.md</path>\n<type>file</type>\n<content>1: # Dark Factory - Agent Operating Guide\n2: \n3: This file is for coding agents working in `dark-factory`.\n4: It reflects only what is currently true in this repository.\n5: \n6: ## 1) Current Repository Context\n7: \n8: - The repo is early-stage and mostly docs/config right now.\n9: - Tracked project files currently include:\n10:   - `README.md`\n11:   - `TODO.md`\n12:   - `AGENTS.md`\n13:   - `opencode.jsonc`\n14:   - `.opencode/agents/gitter.md`\n15:   - `.opencode/skills/gitter-commit/SKILL.md`\n16: - No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n17: \n18: ## 2) Build/Lint/Test Status (Current Truth)\n19: \n20: - There are no validated build, lint, typecheck, or test commands yet.\n21: - Do not invent or assume project commands in commits or PR notes.\n22: - If new tooling is added, document only commands that are verified in this repo.\n23: \n24: ## 3) Cursor and Copilot Rules\n25: \n26: - Checked and currently absent:\n27:   - `.cursor/rules/`\n28:   - `.cursorrules`\n29:   - `.github/copilot-instructions.md`\n30: - If any of these files appear later, treat them as authoritative and update this guide.\n31: \n32: ## 4) Coding Style (Minimal Baseline)\n33: \n34: Until language/tool-specific configs exist, follow pragmatic defaults:\n35: \n36: - Favor readable, explicit code over clever shortcuts.\n37: - Keep functions focused and avoid hidden side effects.\n38: - Avoid dead code, unused imports, and speculative abstractions.\n39: - Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n40: - Handle errors with context; do not swallow exceptions silently.\n41: - Never log secrets or credentials.\n42: - Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n43:   - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n44: \n45: ## 5) Git Workflow\n46: \n47: - Commit meaningful units of work; avoid giant mixed commits.\n48: - Do not push unless the user explicitly requests it.\n49: - Commit message format:\n50:   - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n51: - Examples:\n52:   - `Docs // Added converted PDF docs`\n53:   - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n54: - In commit body, add a short rationale and signature when possible:\n55:   - `// Chappie/Model (your model if known)`\n56: \n57: ## 6) OpenCode Integration\n58: \n59: - `.opencode/agents/gitter.md` is the git-focused subagent.\n60: - `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n61: - `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n62: - `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n63: - Use `@gitter` when the user asks for commit support or cleanup.\n64: \n65: ## 7) Local Fork Workflow (`elysia-protobuf`)\n66: \n67: - `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n68: - If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n69: - Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n70: \n71: ## 8) Script Conventions\n72: \n73: - Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n74: - Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n75: - Shared script helpers live under `scripts/helpers/`.\n76: - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n77: - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n78: \n79: ## 9) Keep This File Updated\n80: \n81: - Update this file when real code, tooling, or CI is added.\n82: - Keep instructions tied to verified repository behavior.\n83: - Prefer short, accurate guidance over aspirational process docs.\n84: \n\n(End of file - total 84 lines)\n</content>",
            "title": "AGENTS.md",
            "metadata": {
              "preview": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771212622054,
              "end": 1771212622057
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0bd7fc6449050c960169928f4df1148195b6f2ac958be548c3"
            }
          },
          "id": "prt_c647fc8e5001WcEXACnAKYZBLN",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fb95300117O9fsXmluuQjF"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "ae4fe4ffbe53fabe2ab61e37f9f00a4a7550a05e",
          "cost": 0,
          "tokens": {
            "total": 16944,
            "input": 1588,
            "output": 124,
            "reasoning": 18,
            "cache": {
              "read": 15232,
              "write": 0
            }
          },
          "id": "prt_c647fc8f60017ayFORbSXcPPX0",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fb95300117O9fsXmluuQjF"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212622114,
          "completed": 1771212626619
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 19081,
          "input": 3164,
          "output": 45,
          "reasoning": 9,
          "cache": {
            "read": 15872,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "tool-calls",
        "id": "msg_c647fc922001NpHCkCpzJ915pY",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "ae4fe4ffbe53fabe2ab61e37f9f00a4a7550a05e",
          "id": "prt_c647fd19a001JyyBoK0kKDeApq",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fc922001NpHCkCpzJ915pY"
        },
        {
          "type": "reasoning",
          "text": "",
          "metadata": {
            "openai": {
              "itemId": "rs_0f2c48648b43fa380169928f507b7c81939ba08db5bb7a596c",
              "reasoningEncryptedContent": "gAAAAABpko9Q3pV50C5gJQp7NXf-Yo_8CXPYoqwWRCi9-uUrS7y2Rye1oIuJRP-DMRjY-jXHE98Fj5j9EsouCCtNbGrNuXNm82Mda8KeGn775070ZBpg5JefnKxLJ-qHLhapqfrCSyaO_UnAOUZAZmEQmmiUS1ZojE-xlMkfujqCfv28Ydd4VHiRUTGDU5AxtdATq_4b1nGb64Fm-tqoqnwnXHjoyrOHPKUJY1dEvR-QizMKmAa0cKEZ92HbDGwaoVgp9T4DuyZ17DmdAqUNCQ0aNPQQanMUhEKKqEv8yRvJFqg5kxCUrtdSibKEY14u88S7ME0MM6X-No5U6xREGGPP-Pb8f__zLrvqqAM_hcYPa1dX9CIZ64EGd-oDCYKcWWuzuqPhF4gIM4XLirU599Zep1GtEHQ4OCeQQzg27cNgUo8OfvXZQTC1jMXuhIr-v6i9bJGgesSjfY3dlAzprH9N6-KKUJ2aQs0B1AZFI9apUhOupnSouTeq76Gontmg_6ZLZKOVHSn4FbivCwx3-rPpsq7uoATvCbSq8AQjRgUbqe4t3Noi5ef3laAgfZfx8-6GvL1S_mOcBCp8UZG-PjXyfVZeAZJ0NoLUqTjO-tl5GFucCyodBhO0UJ7_Y_TvP2XOWeEts7sH4Xdql0qk3BrlsOfWre3djHCuqAt6KYK-OeRZ7XcvfOub0xTMDXT8evjhL_SS_yR5GPlsf8y7lYbdvJ19ZFdZeZMbGmJ3vjYmYF9VVT9mnY3ifhcf7mBcgtRcpLPzdBJEbEeQU1p7ib8WmAO9sVu4W8CtjiD929nXDgs9QNcGAFQqPQlxrAc7GGWKjG48f6hJNLL_2uPOeO-qYBgAd1nMVy7DnYGYl8nw5D_OYwnwyao="
            }
          },
          "time": {
            "start": 1771212624507,
            "end": 1771212624875
          },
          "id": "prt_c647fd27b001aoD7PydBEF9UnT",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fc922001NpHCkCpzJ915pY"
        },
        {
          "type": "tool",
          "callID": "call_YF6krhtiYxAYkdicvSYQNeBY",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/scripts/helpers/run_root.sh.ts"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/scripts/helpers/run_root.sh.ts</path>\n<type>file</type>\n<content>1: #!/usr/bin/env bun\n2: import { dirname, join, resolve } from \"node:path\";\n3: import { existsSync } from \"node:fs\";\n4: \n5: export function findRepoRoot(startDir: string = import.meta.dir): string {\n6:   let current = resolve(startDir);\n7: \n8:   while (true) {\n9:     if (existsSync(join(current, \".git\"))) {\n10:       return current;\n11:     }\n12: \n13:     const parent = dirname(current);\n14:     if (parent === current) {\n15:       throw new Error(`Could not find repository root from: ${startDir}`);\n16:     }\n17: \n18:     current = parent;\n19:   }\n20: }\n21: \n\n(End of file - total 21 lines)\n</content>",
            "title": "scripts/helpers/run_root.sh.ts",
            "metadata": {
              "preview": "#!/usr/bin/env bun\nimport { dirname, join, resolve } from \"node:path\";\nimport { existsSync } from \"node:fs\";\n\nexport function findRepoRoot(startDir: string = import.meta.dir): string {\n  let current = resolve(startDir);\n\n  while (true) {\n    if (existsSync(join(current, \".git\"))) {\n      return current;\n    }\n\n    const parent = dirname(current);\n    if (parent === current) {\n      throw new Error(`Could not find repository root from: ${startDir}`);\n    }\n\n    current = parent;\n  }\n}",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771212626556,
              "end": 1771212626559
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0f2c48648b43fa380169928f50d6ac819389cf046336d09d7b"
            }
          },
          "id": "prt_c647fd3eb001B0wqar8O9mLnal",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fc922001NpHCkCpzJ915pY"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "ae4fe4ffbe53fabe2ab61e37f9f00a4a7550a05e",
          "cost": 0,
          "tokens": {
            "total": 19081,
            "input": 3164,
            "output": 45,
            "reasoning": 9,
            "cache": {
              "read": 15872,
              "write": 0
            }
          },
          "id": "prt_c647fda8f0011FG3wGJCG26NLD",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fc922001NpHCkCpzJ915pY"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212626620,
          "completed": 1771212639478
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 19975,
          "input": 359,
          "output": 672,
          "reasoning": 636,
          "cache": {
            "read": 18944,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "tool-calls",
        "id": "msg_c647fdabc0012FRb4Dt4l7lkRV",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "ae4fe4ffbe53fabe2ab61e37f9f00a4a7550a05e",
          "id": "prt_c647fe0b80010YTPSVGKhur043",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fdabc0012FRb4Dt4l7lkRV"
        },
        {
          "type": "reasoning",
          "text": "**Designing reusable command runner helper**",
          "metadata": {
            "openai": {
              "itemId": "rs_0015904f8e9e6d530169928f545bd481978e9cf25f261861f9",
              "reasoningEncryptedContent": "gAAAAABpko9fUwV_x0-5NbeqWIkvhzNLmNFf9p1sW6Uqc7860G6tj3Sv6lYB66pTkpJ9NnH05wn_faBsP1UmNQaN6lnZ3B4DXEA_uApgD_O6nLwiwQbaEPg-mwW-B5X0On0MDssYNUfbgbyT-isAG3WMhyF0jwfs2l0ViEtI34ZaxHmurfmw3iC6PzQRAtTeNoa06W2Q5qUogU5qu63bkz6d021K-bbix8hV8CeZr3chxL82rd5LFQN2ccz0GMfUIVgCaL7oYi8VqWywRWi-rwKeJKDpu6bcxNC43E9bfbla9LXv3cwbam3bNNBstCuawmAuVpJOu9lxE4ddFyp65zAbxcSZb5pdlz4c2iYd0greWBF3CSMaWOzM7LnywJVgvPum4LsAotcvNhHuLJ9keGc-jE3-YGP8L9uz-zME0fMlc7ZVjBUJrkZvIC3W_aG-WReaFRIQZrfKpLt6fXhebXkL1SLHMbInnrlEov3kCHQPyMixMwhV3MFIGbRdcg1smMcTy1qhzC-YnN67huMGUJe3gjpza5lGa0DMgk_CEr9MFmQFGKUJ0k_-e65tt3KzVgZnxHPZEreSDXoysN8TqbuTWUGNtB51rN97oS12tVq8j3CLEcbG-zfW2DHcHq-nsZ1ZgnZTWk_OYN7Yr4673VZ-otK6F4pfg_hgExW8mgjtWqxn_Ta-qRwUVhT2Cw8QrkM2QeXvTQj1nm41umhXE5lR9QI0XCrtgt8xHHBe75qGm6XS437gwLYoJcEHdvfTx8Z3_JVIstRGVXe--W1TKDFwLM3w3oSpnLr0ley_EzOWGxR1bOENOAM5OVtRQYpsgxow9QcVPAet_oWJEKtLdGjKnWAt-KBfwaStx_LiDtUe51-pe4q-zEt6OcmTDE41KHy_v2tjOt6zUZq6WBzI0ZA2qj9BC76Qo6bt_rPEG4aq3zbmhQPcXOk0cvvsIl-RfXfjqo9rRimsBj3ZMgrVqPfl8zKVwSKTXEuTCWqTIWQCGqcVUF5sUHZ6reejc5lPGMjqfMnpVlgNz3uh0zyg0zJlHCB3R6Fizp7QQSs_0TMp_rUEv5tKzyl9iuraRjCB7v5RmzjcIs30beo8I8bQVpHNZQrQXGXCxrRN3X_mTGNtXsZVDqVfnV2MtPG6CqsYkpfeByFaNWlSVUYD2AFbXga5izCeff_SRei0BnaFv-GRasIqg65iXmfQbJMceQwABogiROWOPamscONnvNhhrTJOnfk6HpKCfzvIoxtZCztJR3ZfWF15nR3tSolKAVR3hzcOCKHgPV0JNljh6LCzSk4wrKenlschcVGJiv38WbxCmZ17KOQNR8nv1cWSbW_MpLTJYHuDKLU0SEcTALfwiCoQQBWRC5vhYwACOV6AbQ4O3E3fvk0rQp3tHmJodkIagCk_DfISM4fG0LzJEjJ0sdZhYNJsDhhNOJ9Eti0n5BVSz54Xy5wkNiCOZZNKDShA6BZAHftIa5_jEcD5P86l99Ae-XISx8v33dUbUHPuXhuQd3rwcfAf_7WHzMKfKZkO1pQw5aYB4WN4F8AQkd47KT6BVmwXzfjSb9pGvuLPGw1yJsEJJ5MYEMvYUB2Pkl9MHtlt_Zpebu28p2x8bm-39iTDEbTHo9mcDs7BViBBaEV0QSj4I0LdoAv0IXuZ4DcY8IsYTixWp-0EFqu5I5DjohtYUNWlk9MQ_WumMI3WJp-y3VMABFVx4owZSkv7_b175D8AXnwSVfb9a-cejEgqIJdNSnAlng-Zfe6epH2SVYt5ww-hzZqoLRzABd-7WXNicWis9I-Ej142H48U7ACbCIjRLW6Ht2pSWzzJhROrS8HjxzRFAtjoOqQ-VcF5eYvH16s4DC3d4z3Mg0GMDGb4K3xi88aGUKB2vVqpSwU67CfFr8zi7AtOEcAEUTvDuQ7cnfjdg4CWf4ktmgvkv77w7LC57e46dioH55pd24W-79QZ91-5XOWC5GFQ0rf2HbNueUMUK6JYVSAxzTWcXpGfYppIrCVoc_TPbJlaGGsMTsXJdpmgA_Y4eqm25VuKMpdOMk1wdutkkXfVPJ2YLQc7W28co8Ayw19J_Th92iPE4GC2AaIlUoQQK85eWhPeKNo6OOfRfNZzqgqbb4fGInQqyDvU7Fb_PSVhCnsHrlXNlk_MSRp6Mot-tL-z7BSPl-ujtF59hoRtPnnoXqTb9cjB7zo6j3kEW-wVsf2Bh18bSA3tg3DVxTWChNWfRcqRr563SV-4RC0iBozMlmkei6JM7Hu-ExZvzKDm0vVEcnQVF3nd7icKtqJ-HncvmVDBhjBIHVZTlBPIVBxF6dH6xAlNJCXnSKd69f3Nde9YmgPxjWkt_jwERhfVlk72LxEKyniwosJPz-1OjlHTP8LUjNY1v6fw1nGG5PGATLFUk6SniSXii6C6WnM_cZ1WIDfGZzAc2FfUmcIPPFIdCA_Owfo2QKEUdejBffL5yS7fOAL93qQXZ7lUS6hVZ2RGT1QEV8mZ79K1vbsyCn93SIfJmWujlvba3Ub8CBT8FXjPXqChUplSk2EQtGoEobIN-wVD5dCMGeD-_3-zJwxYhpWj1Z3IKkzh37GTNImWFbK0S7eMe3Ko9Cq0z34fyxKRfterugU_1hk4PlHtOOrI8RDFDgjPTPOEd7uF1dzrE9KygpXsTK0DiABTEiTd7ilMVUKTxoHyS7ZRsia5i1lwNOQGSSmsS3GkB0VypqNUbvSo2kxibXTfQIaIdwRuJ0EJQGSNJ9JP-h4VjrnmolyoSdBM4EX72tCk1PfPpxLYwhELyf9NF6FWOQy_jE0NeJ2taW66GtbXtvxUIjFkAnrGEwzxQHg6rmv5-Ng0gmu22VSKK0r8gPgyLnlQ5_gOvowOJwn8RfJlc7TfV05WGdgLXDi6QnguhIl-TZUjL2gOhl9Vw1GdGAvcqZDMEGsltpqrVZ9THrubEyzYAfkrZTEPC-iTlNp874aQgfw199N2tb5lmkwwig4eZoukogjoFroIo8nOXgZcm7DTBYAJ8XReMiovNl8U2qkxgIVMCOr4ksaOW2hyYINIrH-DJb2aRZtaaq4L3NutfggsUEEBf-ux71vDQ6OI7_SyKt3i-whNT7yp2-7aHq9tMAYzygbNeGTMbN2h70H1DLVE46rhfybRN3LCwwrQmBYka6KQ_8BQXDG4gAoSmU9vRMxAFjr1iNLHYpeGGo6WF7Mvj4jXJeJNhUrjq1fNTtxhZFTRoR6AttZXKRraapuVCogP9_j0dH5OeZIi6Zpi5NlWPJ0KFVjxAQsayY68FbP5mkNvEvUIpx6eB70AIgyeKtdLeCVtTUEGjdHR5EpWQVZbPcoGT3WzllSBQ8HdHJoklPDRn11vz5U63GSn9jLLj9riqNiYdkT0egI2ZB4Tl09ll7RjRSjcFgIskJI4Vkb9U4WqzIlh_e26eP2McNq4cPaT-O3pIe05PD0iGe525vnQwlnPb-eDPSpy3FlLW61UUyBkSdV8mGFs0hoNx0UuEPcwfkuXsH1voNdaJeQ7nfSlNgrskR-cG_8mPcjUFL-7ccd4NFoasbsJQOQRcUfsYkKI0EFKb_AOQC7CK3arl-1Ym9tnHkZ-BdBHjAvEEorjS4Yej0cO3INVF3qCfXh8s7B_pPIc4mmnpBQdLgBulYgm0YCLCI1WH5_5iOrqwZhCyLnQ3s1eDG4h3Z_Yvl2ouUeO45ojKn7Gzdcnq-AAzRF46OmiyyGEzAUjP2YQjDE_aglQfaP2Xkh_E7ifWDyAUGTDVmgxob286hUFYqqLa2lqIsbtNzGAC6hU_XR8hhil1GjJB29_Zx39hQ0OSytKWC5dlFX8Uqb1sMgs__tM5pwzsed4I0Wiw3aLWNU4Ph67zA8JutlCPVEmyEm7z9sH4qppZpD7hzatO4h_ZEDcAFphoMHmktmgefpGWSELd2UbWBxx-ElSMvXxHU7rwY9s9rV_NoTYKcOprnpmx4Ab4xJSSXUUuqdcrUTPFNdlSuacnJVPyHRTlmjjdffyR8_rYPeFam5ri06amvTWRcpHHai8dWcxyIA9VPp_lwo-b8OLbOAVjanHIbi0Sb3tMr5yzAINmZs3DzHWpaMIe5Qps5yOUO937NlD7SySbCwNjR4XNEVfaTkyKf3kViaBnj_qrcb22GzKrdmPkF_jdNSVWOfDhgv1U9Cz3tGCxtRjQuupzohPiSK-sJFH4t6xSP7V6tZMFYqybi4l5i3Vlgs_paROPEA6EnUn7aU0_lvFckVrzqqrkbOuEaTFsG-mORx-fpR_SZ4hrzpJs1ssdJ-qwxzL28JzDaKGgahmJHCH6cmIEgty1JjX6iyA63fR3wcrFXMtAKZc5i6aOJJUYSURfFzoa6HzpMO830CKdS09lbJR3l8yqkcuJMiiYo2wuOsFi1a-cD-DTE6I2WplfmpHaEJ3HqmyJV4YyMMPukMvTwJR9_0ZI0mhYdaOb4G_Hg7nSoEo3yxP0bkqFDgOMMBRTQOQYr6MjIlS2tDoKv4LnzPWWuw1bxsYLDOgkOEsEm0V_z2BJN6EcFpDl4uvaVHl7sbrfP8IE77_wMeIgI9LJtBsdYGCIrvJMi8dUykuxwMI6sYOZc1B5rDdyC7tGXbP5KkptA2-B1lCpKIQZvrb8xvqfDQ_yUbS6fygnIMztGLzosQJHTqoEritGH48AveIinKMZFuSYPuFi1gXe1BY6jhPlR9GwEo8fW8_8q4VU0nwv9U10LhUD1baK-AhvqZWYK7HIrMpgWe_St30rBRlkIzDJhVY1v3_GKi0dcakEsGUvBovtF6l_ag10Iqs4gRS9b1sqSkCBopDe4mv8m-w1F6r4-FBeFFRYw=="
            }
          },
          "time": {
            "start": 1771212628385,
            "end": 1771212639288
          },
          "id": "prt_c647fe1a1001vuQtYtyx2PebWJ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fdabc0012FRb4Dt4l7lkRV"
        },
        {
          "type": "tool",
          "callID": "call_pzUamMd1L0X2EhUlWZHaprOL",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "ls \"scripts\" && ls \"scripts/helpers\"",
              "description": "Verify scripts directories exist"
            },
            "output": "helpers\nproto_install.sh.ts\nrun_root.sh.ts\n",
            "title": "Verify scripts directories exist",
            "metadata": {
              "output": "helpers\nproto_install.sh.ts\nrun_root.sh.ts\n",
              "exit": 0,
              "description": "Verify scripts directories exist",
              "truncated": false
            },
            "time": {
              "start": 1771212639390,
              "end": 1771212639434
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0015904f8e9e6d530169928f5f39888197938c139a4f19d4b7"
            }
          },
          "id": "prt_c64800c3e001c6PN5CXvMKFXpX",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fdabc0012FRb4Dt4l7lkRV"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "ae4fe4ffbe53fabe2ab61e37f9f00a4a7550a05e",
          "cost": 0,
          "tokens": {
            "total": 19975,
            "input": 359,
            "output": 672,
            "reasoning": 636,
            "cache": {
              "read": 18944,
              "write": 0
            }
          },
          "id": "prt_c64800ccb001TAj749BhkMpG7v",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c647fdabc0012FRb4Dt4l7lkRV"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212639479,
          "completed": 1771212645571
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 20309,
          "input": 158,
          "output": 311,
          "reasoning": 15,
          "cache": {
            "read": 19840,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "tool-calls",
        "id": "msg_c64800cf7001Hy89JbbCJRdTza",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "ae4fe4ffbe53fabe2ab61e37f9f00a4a7550a05e",
          "id": "prt_c648012a6001RJK1F4VTSqLfvx",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64800cf7001Hy89JbbCJRdTza"
        },
        {
          "type": "reasoning",
          "text": "**Creating patch helper and docs**",
          "metadata": {
            "openai": {
              "itemId": "rs_0b02b8287af795fc0169928f6117b8819491e74c8bc56d01be",
              "reasoningEncryptedContent": "gAAAAABpko9hR6myMMBo9BfK0uNi5IYE17NFrU3w8SgKIOR7SIy4O14GmhTpTRArtVxTCJcr16viBj-Of3is1PK-gsp-bsbcdXGMfVR3PHRhrgKS1wRB5jD8-EFWAEeI6-SBlsFkk3ra2PzhFdsHqDYdZDyLl4k7B3O1d8emK8YKv9CIaFvvm0GGxbwwHpDWWqIXUA5-o9Z0FJBd2f__wDo1NR3PFySQxf-ulnoISjw-F2zbkU93sErdWLqlhNOC9k7_BIEUYLRZcS0Z9kF8beig0NNLPa_D_yLVmxYkTVsmf6K3XkHvDjWgUlekp-j2LqRsRaSjXrabCeMYplbQ-mWputbBccCG8UtxwGOH11gpR8c1bgoalaJNGFGqgzIchuK8NXXsH_YjZTTP7w1DwbpjXn0hE9fyH_0K03W3Dpu3KL1DqnHN4FTEURNSBcj_NfUDg3zhanjS5P6FLGw6Hg0G4veFfQhcVMo4Wn50vrtyAssVtnzvKWkp5EbUQNeDRC9YbAkzVJzZvULEEi4c0jg9OKsx5DwanfW65ifomhKwOnWM_F2aD2gfMBokHEHNwu69AiTn2bt0u_MaobBDsck01Q_Lq6OmmsvJkHJjBWjDu0CbSH-L0LhbnQXFNm82c8nEqPDdxVYV5XhpXcb6Q62RmzAlyBa5XW6m3-WWCEs0zlCGeysO2eQ_5sqc1AX9E5P2rItusHlNlIUKauCz69XGSnz_9e62H8Hh4Rn0D-i8iMBPYFF68YdfQ03dx5l9AcEWusSIIpGgEfd0ghIgA-cjaEwVZK2iDnD1_Zjq6E4Vjcos2tVuXvXAxfbkAnnmeZo3eS2BIEieHKz7cVTtM3wm_KP5XZEY_tkiHsouE9z8YVJgplaACiVG0Mwgp5OAw8OEm9SA80HC8cyx2mmGaO9bUxwjYsENbw=="
            }
          },
          "time": {
            "start": 1771212641117,
            "end": 1771212641818
          },
          "id": "prt_c6480135d001honLcVsLKT82tz",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64800cf7001Hy89JbbCJRdTza"
        },
        {
          "type": "tool",
          "callID": "call_m59yZpq4uDPnO7eV6HTJnvXk",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Add File: /Users/alex/repos/vfp/dark-factory/scripts/helpers/run_steps.sh.ts\n+#!/usr/bin/env bun\n+\n+export type CommandStep = {\n+  name: string;\n+  command: string;\n+  args?: string[];\n+  cwd?: string;\n+};\n+\n+export async function runCommandSteps(steps: CommandStep[]): Promise<void> {\n+  for (const [index, step] of steps.entries()) {\n+    const stepNumber = index + 1;\n+    console.log(`Install // Step // ${stepNumber}/${steps.length} ${step.name}`);\n+\n+    const process = Bun.spawn([step.command, ...(step.args ?? [])], {\n+      cwd: step.cwd,\n+      stdin: \"inherit\",\n+      stdout: \"inherit\",\n+      stderr: \"inherit\",\n+    });\n+\n+    const exitCode = await process.exited;\n+    if (exitCode !== 0) {\n+      throw new Error(\n+        `Install // Step // Failed (${step.name},exit=${exitCode})`,\n+      );\n+    }\n+  }\n+}\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nA scripts/helpers/run_steps.sh.ts",
            "title": "Success. Updated the following files:\nA scripts/helpers/run_steps.sh.ts",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/helpers/run_steps.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/helpers/run_steps.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/helpers/run_steps.sh.ts\n@@ -0,0 +1,29 @@\n+#!/usr/bin/env bun\n+\n+export type CommandStep = {\n+  name: string;\n+  command: string;\n+  args?: string[];\n+  cwd?: string;\n+};\n+\n+export async function runCommandSteps(steps: CommandStep[]): Promise<void> {\n+  for (const [index, step] of steps.entries()) {\n+    const stepNumber = index + 1;\n+    console.log(`Install // Step // ${stepNumber}/${steps.length} ${step.name}`);\n+\n+    const process = Bun.spawn([step.command, ...(step.args ?? [])], {\n+      cwd: step.cwd,\n+      stdin: \"inherit\",\n+      stdout: \"inherit\",\n+      stderr: \"inherit\",\n+    });\n+\n+    const exitCode = await process.exited;\n+    if (exitCode !== 0) {\n+      throw new Error(\n+        `Install // Step // Failed (${step.name},exit=${exitCode})`,\n+      );\n+    }\n+  }\n+}\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/scripts/helpers/run_steps.sh.ts",
                  "relativePath": "scripts/helpers/run_steps.sh.ts",
                  "type": "add",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/helpers/run_steps.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/helpers/run_steps.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/helpers/run_steps.sh.ts\n@@ -0,0 +1,29 @@\n+#!/usr/bin/env bun\n+\n+export type CommandStep = {\n+  name: string;\n+  command: string;\n+  args?: string[];\n+  cwd?: string;\n+};\n+\n+export async function runCommandSteps(steps: CommandStep[]): Promise<void> {\n+  for (const [index, step] of steps.entries()) {\n+    const stepNumber = index + 1;\n+    console.log(`Install // Step // ${stepNumber}/${steps.length} ${step.name}`);\n+\n+    const process = Bun.spawn([step.command, ...(step.args ?? [])], {\n+      cwd: step.cwd,\n+      stdin: \"inherit\",\n+      stdout: \"inherit\",\n+      stderr: \"inherit\",\n+    });\n+\n+    const exitCode = await process.exited;\n+    if (exitCode !== 0) {\n+      throw new Error(\n+        `Install // Step // Failed (${step.name},exit=${exitCode})`,\n+      );\n+    }\n+  }\n+}\n",
                  "before": "",
                  "after": "#!/usr/bin/env bun\n\nexport type CommandStep = {\n  name: string;\n  command: string;\n  args?: string[];\n  cwd?: string;\n};\n\nexport async function runCommandSteps(steps: CommandStep[]): Promise<void> {\n  for (const [index, step] of steps.entries()) {\n    const stepNumber = index + 1;\n    console.log(`Install // Step // ${stepNumber}/${steps.length} ${step.name}`);\n\n    const process = Bun.spawn([step.command, ...(step.args ?? [])], {\n      cwd: step.cwd,\n      stdin: \"inherit\",\n      stdout: \"inherit\",\n      stderr: \"inherit\",\n    });\n\n    const exitCode = await process.exited;\n    if (exitCode !== 0) {\n      throw new Error(\n        `Install // Step // Failed (${step.name},exit=${exitCode})`,\n      );\n    }\n  }\n}\n",
                  "additions": 29,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771212645507,
              "end": 1771212645524
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0b02b8287af795fc0169928f61b9d48194adc9e3ff04fdc0be"
            }
          },
          "id": "prt_c6480161b001TU6NxMtnUM84Ee",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64800cf7001Hy89JbbCJRdTza"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "8bfb84288d5102a87faf729bd6a12b73d4b4dc96",
          "cost": 0,
          "tokens": {
            "total": 20309,
            "input": 158,
            "output": 311,
            "reasoning": 15,
            "cache": {
              "read": 19840,
              "write": 0
            }
          },
          "id": "prt_c64802495001eF4uCIaO7bb7M1",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64800cf7001Hy89JbbCJRdTza"
        },
        {
          "type": "patch",
          "hash": "ae4fe4ffbe53fabe2ab61e37f9f00a4a7550a05e",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/scripts/helpers/run_steps.sh.ts"
          ],
          "id": "prt_c648024c0001YEo79FkCeV0ppd",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64800cf7001Hy89JbbCJRdTza"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212645572,
          "completed": 1771212650741
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 20530,
          "input": 110,
          "output": 196,
          "reasoning": 9,
          "cache": {
            "read": 20224,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "tool-calls",
        "id": "msg_c648024c4001SjKjrjfyo3rKgF",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "8bfb84288d5102a87faf729bd6a12b73d4b4dc96",
          "id": "prt_c64802cae001fcKq0w8WUBC8nW",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648024c4001SjKjrjfyo3rKgF"
        },
        {
          "type": "reasoning",
          "text": "**Adding install script**",
          "metadata": {
            "openai": {
              "itemId": "rs_0812e38027e0fc6b0169928f67c76c8195a41341b3a53c8da7",
              "reasoningEncryptedContent": "gAAAAABpko9oCifzWr2zijoifvzwow9dPFyErJdIk3ZAVL0Nh0r5njgg0I6WcFFHKrl4INgpu2SsDwy5fewH3Nccnx7DUauEIPQv1JcVqkS1_F32lIUFN31xGk8lWPfzUbwLBshbAZbcww5hZzgFkceukMBgrhu-9TU9GU_haZSxRcGbcMz3nA39KzUDlo8h58c_hjNKFvwlNlFVPvC_9jCUlWut5XSLYhm0tMAxsTBConQu6EmnznvZXwj6pguPiYK-FqiMTZwTOnkNrG2ft4FZrUTLjA17LbSRly2LIxyl1p9jsTYhKvGfRsFVNHhnGnar9dWxMroBbmNivYOxgHKSGYH3VAXO_hSsIBCl4ADBOvAHbq8jd1-nIsWzmv6V-cTTH19QTDyRWTIKW7abGeOf1s3mD3mxc6JoSPvMtTWbtMCqVP7Km_w4RfbHdVrklv9ggZLhudjsbPVP6KUCakopY76OXRybN6RZ3RHodd4VIx_LT6zIFexBf6RvbiT5WZqsyIuMESfpFbL5fzVQWdC1sKbonMVtghuGUnJQRqdq89swJ2QDjsNJMvclDNFsPJIYraybPmAw2G35y-gcEJlTnJQbAXhFBq2CJCyzGi8mKlECRbQPv_Vbd_Ej6LuRl49TKPSO7q_ElALKKdk18mFWykxvbl62gA4lJsQ8TqQ56ivRAOeZX9miK_UcZa2Iui6BEinzbKa3Ft2NzLT-q69fJOnl1kaxENX7XL5eLsVZMWbWEb3w2f0SnksBG9Ua6oQdfn9CNfxJFWqakpOVbVQmO35nY_JPEnYTiP_zBu-8MhDxXqo27zeA4W3iFi8x4fwt0Da9DXaSj74v2OFudWVxeRCZJqxPshWDKoDawKdetFFaqC8WbPw="
            }
          },
          "time": {
            "start": 1771212647804,
            "end": 1771212648268
          },
          "id": "prt_c64802d7c001TYAr61EZ5TE3uV",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648024c4001SjKjrjfyo3rKgF"
        },
        {
          "type": "tool",
          "callID": "call_s69xSN3Fm8FpOYgHGiPMidmj",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Add File: /Users/alex/repos/vfp/dark-factory/scripts/install.sh.ts\n+#!/usr/bin/env bun\n+\n+import { join } from \"node:path\";\n+import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n+import { runCommandSteps } from \"./helpers/run_steps.sh.ts\";\n+\n+const repoRoot = findRepoRoot(import.meta.dir);\n+\n+await runCommandSteps([\n+  {\n+    name: \"Proto install\",\n+    command: \"bun\",\n+    args: [join(repoRoot, \"scripts\", \"proto_install.sh.ts\")],\n+    cwd: repoRoot,\n+  },\n+]);\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nA scripts/install.sh.ts",
            "title": "Success. Updated the following files:\nA scripts/install.sh.ts",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/install.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/install.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/install.sh.ts\n@@ -0,0 +1,16 @@\n+#!/usr/bin/env bun\n+\n+import { join } from \"node:path\";\n+import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n+import { runCommandSteps } from \"./helpers/run_steps.sh.ts\";\n+\n+const repoRoot = findRepoRoot(import.meta.dir);\n+\n+await runCommandSteps([\n+  {\n+    name: \"Proto install\",\n+    command: \"bun\",\n+    args: [join(repoRoot, \"scripts\", \"proto_install.sh.ts\")],\n+    cwd: repoRoot,\n+  },\n+]);\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/scripts/install.sh.ts",
                  "relativePath": "scripts/install.sh.ts",
                  "type": "add",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/install.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/install.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/install.sh.ts\n@@ -0,0 +1,16 @@\n+#!/usr/bin/env bun\n+\n+import { join } from \"node:path\";\n+import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n+import { runCommandSteps } from \"./helpers/run_steps.sh.ts\";\n+\n+const repoRoot = findRepoRoot(import.meta.dir);\n+\n+await runCommandSteps([\n+  {\n+    name: \"Proto install\",\n+    command: \"bun\",\n+    args: [join(repoRoot, \"scripts\", \"proto_install.sh.ts\")],\n+    cwd: repoRoot,\n+  },\n+]);\n",
                  "before": "",
                  "after": "#!/usr/bin/env bun\n\nimport { join } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\nimport { runCommandSteps } from \"./helpers/run_steps.sh.ts\";\n\nconst repoRoot = findRepoRoot(import.meta.dir);\n\nawait runCommandSteps([\n  {\n    name: \"Proto install\",\n    command: \"bun\",\n    args: [join(repoRoot, \"scripts\", \"proto_install.sh.ts\")],\n    cwd: repoRoot,\n  },\n]);\n",
                  "additions": 16,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771212650669,
              "end": 1771212650690
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0812e38027e0fc6b0169928f6838688195bbec7a6df52585bb"
            }
          },
          "id": "prt_c64802f4d001HNKr4SnpjgdsIB",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648024c4001SjKjrjfyo3rKgF"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "028fcd218f0fcf5e5f81cab7254436143086e1b1",
          "cost": 0,
          "tokens": {
            "total": 20530,
            "input": 110,
            "output": 196,
            "reasoning": 9,
            "cache": {
              "read": 20224,
              "write": 0
            }
          },
          "id": "prt_c648038c3001iu97JxE1a8z59i",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648024c4001SjKjrjfyo3rKgF"
        },
        {
          "type": "patch",
          "hash": "8bfb84288d5102a87faf729bd6a12b73d4b4dc96",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/scripts/install.sh.ts"
          ],
          "id": "prt_c648038f3001JKKvrkBwfzC1eo",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648024c4001SjKjrjfyo3rKgF"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212650743,
          "completed": 1771212655294
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 20706,
          "input": 201,
          "output": 153,
          "reasoning": 12,
          "cache": {
            "read": 20352,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "tool-calls",
        "id": "msg_c648038f7001HSn3dM63Nnx12Z",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "028fcd218f0fcf5e5f81cab7254436143086e1b1",
          "id": "prt_c64804115001Vl6lExMtORxguO",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648038f7001HSn3dM63Nnx12Z"
        },
        {
          "type": "reasoning",
          "text": "**Updating README and scripts**",
          "metadata": {
            "openai": {
              "itemId": "rs_01b2d87ba7723c580169928f6cfac481908f271675e398d877",
              "reasoningEncryptedContent": "gAAAAABpko9u8EaWxMTANBIl8IGQBl8MAI0-54yr0Cc6bz_ZXzO_PaqjA5WGIrcfNx-gsI81ZoRyETZFTv2I6WPYosYS-2Zipid4yQQQMvo1DJYGlfFgn9I97ULt6J5SYt2nS_xAEQ-QX1tyKng2D8QkzUk8DN-ZFFHy8MdQXVw4XpbVpNdwuYHNMOczgPlTRSZV0jbgd2xz8En35R4jIvBDRLCrTeJdvMs2qsKhJpJTv8wMUysWJn_Sb-oCMzUQhJq37mBf3qcslKbBFEwGlC6CQY8cQxy74yvJly0YpGNTgBksIN1mrsB6lAfnk4PVSiVadimJNSWMtb6Iu0kb8kKyQh2X1Pgn0c5PVSrJHhfIzI9cQF3H9H7GOejZjF-b3Nmv3TrbTTiQGG0K9inJPTXRTbouFO7pKULPvzXXPZGNWp9yhtP8WjrEmUie6-EgvqK0YjREpAL-WZlJ-wsv_vGcpgG8nj1CihCUxdskMx4rTXrFOa3-Xml2ti68jUKbC2lreUtzz5CRKSqCmcwoB7ZXjxVpGcF5J-Kp8tA5j1dmbqS92Cs0XGepRdxS8kPBc9DU9uVYhDCPzyS7aFqfLkJ2AKHMgL10IF4mk4WkOcEtlQEwVUgEjFncXGEvyRswJPs0M3ZS4noW6dfTg94EKrib4viPSGnB3bjELLhDOyKBpz2D1Uo9LVETU6Rq4oRqKdvt03xMDsRN4YNpiGeinHa7RRVjZYsiU66tU9nG0iMdbYojgFJIBZDnOAcETtjI7BDIjxRmv_lOFlt8T6SGGj3KKKZYcACcViUKT7lCCrAQU7-_sFW8U5UmXxr_Uwe07Ao0yJDe50e94zERkS94BaSl4MlB3FjkHN4XGHhwlNM0_StffPivWYaqvGnSZCPtTrstFjX8dsFd"
            }
          },
          "time": {
            "start": 1771212653072,
            "end": 1771212654122
          },
          "id": "prt_c648042100015W8L9gIl6Z8FVB",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648038f7001HSn3dM63Nnx12Z"
        },
        {
          "type": "tool",
          "callID": "call_EEXqnuYDefkNaepFutmeuSbr",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/README.md\n@@\n - Shared helpers live in `scripts/helpers/`.\n+- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM README.md",
            "title": "Success. Updated the following files:\nM README.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/README.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/README.md\n+++ /Users/alex/repos/vfp/dark-factory/README.md\n@@ -35,8 +35,9 @@\n # Scripts\n \n - Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n - Shared helpers live in `scripts/helpers/`.\n+- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n \n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/README.md",
                  "relativePath": "README.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/README.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/README.md\n+++ /Users/alex/repos/vfp/dark-factory/README.md\n@@ -35,8 +35,9 @@\n # Scripts\n \n - Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n - Shared helpers live in `scripts/helpers/`.\n+- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n \n",
                  "before": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
                  "after": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
                  "additions": 1,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771212655185,
              "end": 1771212655214
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_01b2d87ba7723c580169928f6e16a88190bb0817037db1b7b1"
            }
          },
          "id": "prt_c6480462c0013MKM4a4UGJCREN",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648038f7001HSn3dM63Nnx12Z"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "ad0343eade85e467bab8e43ec3faca30a75a8037",
          "cost": 0,
          "tokens": {
            "total": 20706,
            "input": 201,
            "output": 153,
            "reasoning": 12,
            "cache": {
              "read": 20352,
              "write": 0
            }
          },
          "id": "prt_c64804a6f001xe686vD247Mz4v",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648038f7001HSn3dM63Nnx12Z"
        },
        {
          "type": "patch",
          "hash": "028fcd218f0fcf5e5f81cab7254436143086e1b1",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/README.md"
          ],
          "id": "prt_c64804abc001g551rG0TATsF8R",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648038f7001HSn3dM63Nnx12Z"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212655297,
          "completed": 1771212659506
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 20857,
          "input": 119,
          "output": 130,
          "reasoning": 0,
          "cache": {
            "read": 20608,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "tool-calls",
        "id": "msg_c64804ac10016maE2PTgnM9uW0",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "ad0343eade85e467bab8e43ec3faca30a75a8037",
          "id": "prt_c648052b3001f3UwAafbr1p5HC",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64804ac10016maE2PTgnM9uW0"
        },
        {
          "type": "tool",
          "callID": "call_1JZT9zKR22t7aOHKDdsG2FdT",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@\n - Shared script helpers live under `scripts/helpers/`.\n+- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM AGENTS.md",
            "title": "Success. Updated the following files:\nM AGENTS.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/AGENTS.md\n+++ /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@ -72,8 +72,9 @@\n \n - Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n - Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n - Shared script helpers live under `scripts/helpers/`.\n+- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n \n ## 9) Keep This File Updated\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/AGENTS.md",
                  "relativePath": "AGENTS.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/AGENTS.md\n+++ /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@ -72,8 +72,9 @@\n \n - Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n - Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n - Shared script helpers live under `scripts/helpers/`.\n+- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n \n ## 9) Keep This File Updated\n",
                  "before": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
                  "after": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
                  "additions": 1,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771212659422,
              "end": 1771212659446
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_022a71887e1a006c0169928f71a31c81949696b7a81f2e0c3d"
            }
          },
          "id": "prt_c64805417001dthcqt72Jdwapj",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64804ac10016maE2PTgnM9uW0"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "a3a3b3e9329d498d56674e83b1e28f2701c051c9",
          "cost": 0,
          "tokens": {
            "total": 20857,
            "input": 119,
            "output": 130,
            "reasoning": 0,
            "cache": {
              "read": 20608,
              "write": 0
            }
          },
          "id": "prt_c64805b00001k9Yd7Rb2VIfNrh",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64804ac10016maE2PTgnM9uW0"
        },
        {
          "type": "patch",
          "hash": "ad0343eade85e467bab8e43ec3faca30a75a8037",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/AGENTS.md"
          ],
          "id": "prt_c64805b300013sfcO3oo6Yqscp",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64804ac10016maE2PTgnM9uW0"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212659508,
          "completed": 1771212667644
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 21214,
          "input": 5663,
          "output": 319,
          "reasoning": 256,
          "cache": {
            "read": 15232,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "tool-calls",
        "id": "msg_c64805b34001k62PDSKYmqhe3g",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "a3a3b3e9329d498d56674e83b1e28f2701c051c9",
          "id": "prt_c648062a0001DZODV2YxaJDqaY",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64805b34001k62PDSKYmqhe3g"
        },
        {
          "type": "reasoning",
          "text": "**Planning install script execution**",
          "metadata": {
            "openai": {
              "itemId": "rs_0f77495e9fcfb0f80169928f75be4881959100fcb4e576ef16",
              "reasoningEncryptedContent": "gAAAAABpko974n0JqyMggUpZUagZz-2HBpG4X4TQt9mM_7xOdwP7Ksc-jkXNW4VlLZLZz429MTZQ3C8uMuCo3ZXKRHTQEYGF22pCwxJDe4lW1qFzzxHKNJ5F6K5lzh6zHtBDkGyc00V17OhQSNH9co-yaLXpdbSLWPP3mtL8cBePyvkPzny7_l1-9woZOKz1j5b-T-CAA1jphANDodEwPqaXubipLmmr4KUi6Y2BWtkHv2g6zrOYlyKvfwhOr23g4LZ1OveP4GMD_9T3c500SvyQ3NnrEwBkuyJSlYFYgzXajBHeCdmlBxirajUfmL6b1aAxfv19QBq3eTfyk-vMw8FY2BSun5FoNrCimh8Zh_ZQz_oERgIZcTWmPYR-yI0puRGG5o1yqn-L4i8-73Sd07josKUBmJQKfdckc2Y5UBi-RFIXX9kOLmJevOCaKPUDlHGYueu73754PW3t-rdigl4BEDAj_AP1rYl--7fqrawU3lQYnKob7VQ7tqpb-4CUj5mH7exI1ilh3sVAEJ7zrqHYKfADQCkqY-_hf8lHqJfaDI7ew0YRiE0ifJKu6zqkqu0yUhlh6j3hW-vF1ACx1VXeF6IVI1mLS7Gl4dQNgkaE6wwLesoJ5Wq1cXSDMIA1MJC8X3kx_Kn3xea03OMKXWHTYYRomJD-nniaDjYgSv4a6fN08XDDfcyYiFJ29WObeEmDBsHVtrkOstufg3fbRKsODOqIUrh5U3pMSkat1TsVsbLhS6zza8tTItIRf6gM509UQ7sjzWkrEvkIEbEdXDo29ebCy9Ioz87ihGUpoYjtvhdiCJIVB0zhV6pogTN0vujs0SZAlmGJQ-P632KnxlOrDIjQSg5DmzB40f07UZIMWtZ-fAMU0LE1X5a-OhGiHDRADQtP6IKX80KSrwR265gfS2IZbBVqWH-CgrrFYWWnWfDcj734NO9nvEJUijCh0b1PAX8vDo9v0jJZIBTuYkXDJcit5b2hzOiJ8DKAYNFYWFcKUZqyMGgq6PvQsS126ddz5Cg9UjHe8JXtyse_TNzB4-AxI1gN6E9VZ3wqIsOr3XnsoY9iusEH4sRQxbY9Xn7pSKAsIcYRAUKBmzsiP1MIL7ufSYjPXe4lXv1N1RyHC89OOW_2uia_Hqv4A-XLw3wgbEvJpCdCEBNr7WFfkFMaBoX6qWWTGlcQUH7NTTP4sGV1UWpTEPq6LmsUe_vaFB5_7_dN_Zow0NkPk03fYfU3MRgS9CUK2heHcyYKMyl8zM-fy71syKNcwozXUgbWUNhS__E137KNR_nInGNvdCTKv1GcVNa5_yHHEygLYx8GrmMdO_LyX1QSgGuf0qOMXYja3GFZETrqdWEaUrOn_1n4P3zEovom1kDb25LpkVGYlqOuaT0BmTWKEMI1yZG2JwFxd5RQcKo01qjixo-Z_1Cwdnf9xLz6U6QJB-PyjNxLxKd11__Afx5wseaVpD3GwRjb5be93VhUvF1HmywRrBpO6qHjIoDU3x03z5aJlfYLvGUR-NBT5dMzSEUP8vqg7utPn4qHu4DAL_ex_YQNHmDllGULAUvQpgcl_-KxAfZYjGr1EB506coERlSx-GdIdq3fnakzH5DUwBn9awmN5f16QSj5Xi70lLMqiK4l46jeFao8sFhwwwLMlZoWrPX8F_AWODmTlIzRy6mjWi7uX04xuZ69oo78E5AkGbpLI3NicWD5-V9ZyV0h8VvCSi1omEDdkH1QUMQz1gOe7QYFLRn0tEbvirsQFmkFQw4paobs_frmqVYnP73AdemorxUxbKyopxMgePCGLYMom_ky049EcotqZ4CHuZC0ofDN3cK6u0p5aeFuUvuPrKH1MRtanu-WcAdHGJZUP4eaTMQbO4GOdwPbVFU3rO-r8BnIQCKUaUg39oLAyrzuaFx5R-khUh_xOYlS-fT-zZIAOpPoZ7WITkUGeHpBKPkKCMdyfd9uDEw2waYaHMTct068zur5xBYPv--gY40tPW_9bTevYE5sqt_MiPYKzdfEvUYn2hiscHvXmepVRvyDOahwKIDZ3nx-q9oKUNaCsdRp5aUatiTfdUo8v0z2kV1AySteYwugoafl8vcqkShSSLw2OVoby6ITx4VgE9CAmN8fmx0Na-uT5eC2xVUcosPec0q_WiGh_Cw6bfcW_P-XtJ8ZjIA2mLsedVi6Ggh9Tvy_7AGTylHEV4zSgyduQV_-i2E6WyytN9qJb2xMvmPT7EUd1Iu-dpEvDyPQCiqxYvKqQd1Rsla9ao6EsnhQoMtMK6os0OHnpE9v-yCSBJ_ugOpqm6KyvHEUEHOHb0GPa_aD9BPMhSzn3eEkV9i4cUs8FFQKDvzFO9Z8VjTNMnvyLHj0hFZlcluP6Xt-5vLdkGi3J29KlvIpse-Yv5I_Qun0_eMIt73CdNJb5C1DOqILFLnrZMQo0JCx00rO7rdNwQkUegf7Kutv31EG6RvEAJj29mKcnuP1WzxpEc5xyx4Ld4toZS2UW_YZxW2N2ghkVccdrYZxkl3A9ims74EpEQErBVJeas_Xrc_d8Q0fSJQ="
            }
          },
          "time": {
            "start": 1771212661770,
            "end": 1771212667446
          },
          "id": "prt_c6480640a001VV25O5k4wOIlvn",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64805b34001k62PDSKYmqhe3g"
        },
        {
          "type": "tool",
          "callID": "call_FO7lq58q8Q2QnmfcKNWYEN7y",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "chmod +x \"scripts/install.sh.ts\" \"scripts/proto_install.sh.ts\" && ls -l \"scripts/install.sh.ts\" \"scripts/proto_install.sh.ts\"",
              "description": "Set executable bits on install scripts"
            },
            "output": "-rwxr-xr-x  1 alex  staff  387 Feb 15 19:30 scripts/install.sh.ts\n-rwxr-xr-x  1 alex  staff  188 Feb 15 19:25 scripts/proto_install.sh.ts\n",
            "title": "Set executable bits on install scripts",
            "metadata": {
              "output": "-rwxr-xr-x  1 alex  staff  387 Feb 15 19:30 scripts/install.sh.ts\n-rwxr-xr-x  1 alex  staff  188 Feb 15 19:25 scripts/proto_install.sh.ts\n",
              "exit": 0,
              "description": "Set executable bits on install scripts",
              "truncated": false
            },
            "time": {
              "start": 1771212667568,
              "end": 1771212667602
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0f77495e9fcfb0f80169928f7b5a3c8195acc3892ddd26af83"
            }
          },
          "id": "prt_c64807a360011hdWotFKOQijvd",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64805b34001k62PDSKYmqhe3g"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 21214,
            "input": 5663,
            "output": 319,
            "reasoning": 256,
            "cache": {
              "read": 15232,
              "write": 0
            }
          },
          "id": "prt_c64807ad2001Q2EfftMLNZh2EU",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64805b34001k62PDSKYmqhe3g"
        },
        {
          "type": "patch",
          "hash": "a3a3b3e9329d498d56674e83b1e28f2701c051c9",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/scripts/install.sh.ts"
          ],
          "id": "prt_c64807af9001zsWPUcAAamtyVz",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64805b34001k62PDSKYmqhe3g"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212667646,
          "completed": 1771212672779
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 21343,
          "input": 289,
          "output": 62,
          "reasoning": 21,
          "cache": {
            "read": 20992,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "tool-calls",
        "id": "msg_c64807afe001Zyt9oeW6tNUTjQ",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c648083020015L1WShVLG3dIpY",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64807afe001Zyt9oeW6tNUTjQ"
        },
        {
          "type": "reasoning",
          "text": "**Running install script verification**",
          "metadata": {
            "openai": {
              "itemId": "rs_047c1b297a4673c30169928f7df5cc8190b8679319aacf3a59",
              "reasoningEncryptedContent": "gAAAAABpko9-ytD6kxD0AxVcuDax7v9KAQh9GNU6Ssl_eXY5Y6JG54osOk-HRexFoZl3F43WVqKqqhK2wCWDEkFlQvbLKPFK3akZ5sr1TWG0QM2ymBS4a31IM5b-5_koM-W5EAbolTXv-Dv6sLbSqpArU107zkOFPg0CAma8x8PfEsTtFBWpNt9vtnrRhEn6DlDCd8rwQpX_9D_FDaUsQOI_Rs90etKWeBiRas4jkun1jkcJkxwGwd8fn5ushII89Q7YlYY7F2907Ou16KP9TB3Bk1jdWA6jl2XQecWzgbmqJvoUUa14gNSQKhKY5__BnvpkE_BAubt35ZSTQOZC-9FIVRGX-9H5MD3LHJnyKyuQeXWizdWJDLzNT7GXj8iC3PMAptah23QqMcRTaVLVxRjwnEaqTrx5bRAd8GbcIN80SIcBxwZg8dBc4ByTvG6CRzZsQ-bhrrC2Kv1ByNUjKK_ur2DdG4S-Es9dURZMOH4vOb9xFafcEC9ZKAx4E_GIeIJA7wXxeV80qSL64xEB607T_gdZMbXCBfCGc01Hkppjc9P9rPskczEdxmuNIXoERWI0KaJpsWdy89xvsRJbUXR_P0HUk94tjUyZvxuuBCHHzHyBkA0uM-aHR22JjsDrEYm8-ayD7t3N3P5BkbVZTp2N-gdtX-s8vyW_p1IZmo9QJMMf3v9bDlIoG_b7RUqh5ekD8NvjqNNDIDmdL127dMOhJ-Vs75faNLQRwLujtS6FkRt_CMzNYedF_Z3rDFfFrAMfPJhQs96H7t0JnSicjhT7UBS1CaDAH9cwNa8ZmnF_PGEmo4zlJyc482Noakn3kKsHGWUhMRLLV_3D8NAgjEQLynvWM6xzlSm_Kt2G-Xe4tvoH7d2uj3UmO_ZyEnvo0dFJ2ZdqUmrBauX8Sd0HCJ9Q31Hy7QwNb-gROawxeDWfz4LAGGzvgOGjLENyBdY5U6UELIEz9iNJ"
            }
          },
          "time": {
            "start": 1771212670064,
            "end": 1771212670619
          },
          "id": "prt_c64808470001mbNvxcWjbTLZdy",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64807afe001Zyt9oeW6tNUTjQ"
        },
        {
          "type": "tool",
          "callID": "call_Tbw9BTxpCBM17FA2491hR8hQ",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "bun \"scripts/install.sh.ts\"",
              "description": "Run install script to verify step execution",
              "timeout": 120000
            },
            "output": "Install // Step // 1/1 Proto install\n[moon] Installing moon with specification latest\n[rust] Installing Rust with specification stable\n[bun] Installing Bun with specification 1.3.9\n[node] Installing Node.js with specification 22.19.0\n[bun] Bun 1.3.9 installed\n[node] Node.js 22.19.0 installed\n[rust] Installing Rust stable\n[rust] Installing natively\n[rust] Rust stable installed\n[moon] moon 1.41.8 installed\n\n SUCCESS\n Installed bun, node, moon, and rust in 0s!\n\n",
            "title": "Run install script to verify step execution",
            "metadata": {
              "output": "Install // Step // 1/1 Proto install\n[moon] Installing moon with specification latest\n[rust] Installing Rust with specification stable\n[bun] Installing Bun with specification 1.3.9\n[node] Installing Node.js with specification 22.19.0\n[bun] Bun 1.3.9 installed\n[node] Node.js 22.19.0 installed\n[rust] Installing Rust stable\n[rust] Installing natively\n[rust] Rust stable installed\n[moon] moon 1.41.8 installed\n\n SUCCESS\n Installed bun, node, moon, and rust in 0s!\n\n",
              "exit": 0,
              "description": "Run install script to verify step execution",
              "truncated": false
            },
            "time": {
              "start": 1771212670901,
              "end": 1771212672730
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_047c1b297a4673c30169928f7e951c8190953539f7051f68b1"
            }
          },
          "id": "prt_c6480869c001J6t9TUxSe4Iklc",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64807afe001Zyt9oeW6tNUTjQ"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 21343,
            "input": 289,
            "output": 62,
            "reasoning": 21,
            "cache": {
              "read": 20992,
              "write": 0
            }
          },
          "id": "prt_c64808edb001CFYTPOny7vx5Yp",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64807afe001Zyt9oeW6tNUTjQ"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212672781,
          "completed": 1771212681809
        },
        "parentID": "msg_c647f8eda001ekGklh5kR8QJsK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 21887,
          "input": 494,
          "output": 401,
          "reasoning": 199,
          "cache": {
            "read": 20992,
            "write": 0
          }
        },
        "variant": "medium",
        "finish": "stop",
        "id": "msg_c64808f0d0010MXLxvGe5RIjPQ",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c64809706001qJz3FZ6BNOA1x5",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64808f0d0010MXLxvGe5RIjPQ"
        },
        {
          "type": "reasoning",
          "text": "**Specifying output fields and content**",
          "metadata": {
            "openai": {
              "itemId": "rs_0f88deb475a06e380169928f82e8c8819096e0bc0a2ec35dcc",
              "reasoningEncryptedContent": "gAAAAABpko-H5Rj9TKwxE04sEOpgBKX1cGrQ8x5pkWvGJsu4S4Ly1od2yHCRnxiVvGKMg-Z-zQ0UrYTYbUnCIJAlWfMPR0Nxn3-PvK9cK5Fax70iSX12-5Wc4aRvipL-D_gX4SsiugnsLSGQ-hVXTSM-Fmuij8oO5reMYlgaKVioAShOXhvlacKo8dOJjp1K0XIShBXeOIkuRCCT_zREGtyLa3qJ0vO_l8nQP8O00Lyk6EDryM8wteDuK2pDit-cd3gB9sQ57F9LgU84OUThUfkZZQUBAn3o_5Ryd8Q6xb_sx_yPknB47l4TmIPoee_2zjvSKrzwxPuuvQq6CrRChukVxpVI0j2F1m5_Twn_QTHexZCNiog3PnK2sv4jBAWeOXWFxFrqwDXWV9-yOQ0HepWOXd5X2LMIT200pm9tGb0P3TwgfKbKwikSiDcvKiZJLhh5ogWSrNvX1oxP4nSeWzfeflB86BpueLXqgBT0FJp38QFR2xH7QvBd_HvYJniINc5E3pNfD5Xxx4l4Uo24mgIQr42_OSrBg6cohfBNQeLbLIBO3X-F3kFDqd42YYwcQJE81MVleAru2RhQxrRzrEqrzqKVawZvhO7Ma9blbZUK2ErtZlYTVnl_IUxFOJl5fN9DYVgzU_oNUyGdK5Jq6tiNTc5y7twsvEFK6dysR3pYb1t8ruKSYOrsGFCTrAqR-upEA-_MTSpVriO-dfzwDf1_trXQtg6T4pRnnO0Tnh4bkxANUcMdjQoMTKjkHMRg4Q53QyTXoEqHDE4KaKdZE_8H3CsIfHoQM1zBZNfZwSgJvayFgQbn7qsBqgWI7dMWO073zca98nJnt4aq98jMCOiyzi5l-d4kne8zZhq5SxJO0E_JSUIsLhMjqpoYSLIpibTpu9q6eLRIGzEZUADv3rtVw4zTRpany9ePZm6-Y2WpHJ2web9s_Lvym5TzkjloTG_Iog_KANCG0A7hB_vE0mW37k8xVlmhaxy6clCMmhW0LVh4UKY4GKwQs-z3STJYVJge-MlXDP3haBg70OZtjGR5yAnqW_Bfo1Sud9u-NMlv1U_95uRKfv1myYXhK3ZIL8awYwWhCLtLgwkvUlhBkAH_6x2GMuRpvCOTgD6ctJqC_Xh2hPs6cp98GALL4_3eB-WJSuon1l2PMdLcbuZeER5xdSw9t7cwc-Jr1FvmOj6qBYwrx-9AAinSrTbP09YQnNOca-GEEeBHKEmQFK7G0mphOTSSPeGjQLcB-BexC9ATp7pp4u9LoSbVuyFjKhycYeoT2v3_xOW-W6oAlkRRuXrKzgT62rQaaJ8fPP8TsOsVQ61K25IYWXUBfK1jF0l7yD_Sb4GtVgOiZgip-bcWZosL7kdHaNk74k9F4tiyFgEywws7AedgQJVXdJtxFS_RqYiBkDIp6jHxP6cRxuYlVeRZf8tJ6hcvy8KxNnUWTB9WCOlbizpO4NpC65Sst_LvO6gq9hOIoxBJQBWUh_cxC9p75s_TGliy9tl1dkqowNRJ6mAelgZw89EuCWnUbkFHIkAuVquMYW0zjfLiKd8lXTji8rXoDWWR3EXNtpcGHG_hs1ceqoTV1UkpKibAafoy7-O-3NrpUfHEY6t4q25e-kibZjom9j50xj1KzD6POhYmAwAov2D2eyN2PALtCBI6w59oF8QRD6S9O0tQjkxnyDgJJwgTwnlH7Yo7YbxyhfksSeP8pCHqU5clGCemoog2e7emiUfphdlNS7OSntULXIBhCemnPc2MktqJlEjpKv1ISOhf-aWB6naQ3t4uF6h7trPOM4eFLTIvJX8RA3h3rlRw5zobd0gpc2xAgZ3eUizxnKZ_4XIN9KfYEPYMl9OiKr-mphdj5p9jqlz5NPjOw60cXzAsGMnkYs-xJhEwGScryBW5g2F5Hjsjdq1exIUZMg0W6s7fcqG_e9tF3c-714KTkvBPE5X8OxhfEXMEHi-ymk_wgj2tNkE8QdSxLULxHn5bdoyK2ir2gjDjaScMcNh9FkBKPKheCJKFvJ5Qh6ZWbSUJqc2UAdId6LI9OomEX1fxPitxuvXw7I-YzMMHtqgxYLT3l7dofYuCnjAh7ACsN7DlpzkJ18NOq0emUPz3zC8djnYNRu_6AowRZf_Yu8Fb7nmBXeMTvGYcAl-_pFNEiV0X-rgBPUksTgCt1AxCJnwBZSRiuS1RKs3IqfS4vaFyPdXIwVpgEGlya4v86Un6E8gh1ezP_PI="
            }
          },
          "time": {
            "start": 1771212674960,
            "end": 1771212679248
          },
          "id": "prt_c64809790001yIOeXiTZ2dc4G6",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64808f0d0010MXLxvGe5RIjPQ"
        },
        {
          "type": "text",
          "text": "Implemented a reusable Bun install entrypoint that runs an ordered step array, with `proto_install` as step 1, and set executable permissions as requested.\n\n- New script path: `scripts/install.sh.ts`\n- New helper path: `scripts/helpers/run_steps.sh.ts`\n- Updated docs: `README.md`, `AGENTS.md`\n- Chmod applied: `scripts/install.sh.ts`, `scripts/proto_install.sh.ts`\n\nSource input used:\n- `prompt` (your requirements) + existing script context from `scripts/proto_install.sh.ts` (used as the first install step target)\n\nVerification run:\n- `chmod +x \"scripts/install.sh.ts\" \"scripts/proto_install.sh.ts\" && ls -l \"scripts/install.sh.ts\" \"scripts/proto_install.sh.ts\"`\n- `bun \"scripts/install.sh.ts\"`\n\nResult:\n- Install script executed successfully and ran step `1/1 Proto install` (which completed `proto install` successfully).",
          "time": {
            "start": 1771212681722,
            "end": 1771212681722
          },
          "metadata": {
            "openai": {
              "itemId": "msg_0f88deb475a06e380169928f872f98819084c09ee7f435177d"
            }
          },
          "id": "prt_c6480a8510013tJBUbbCd2xYUb",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64808f0d0010MXLxvGe5RIjPQ"
        },
        {
          "type": "step-finish",
          "reason": "stop",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 21887,
            "input": 494,
            "output": 401,
            "reasoning": 199,
            "cache": {
              "read": 20992,
              "write": 0
            }
          },
          "id": "prt_c6480b222001DjRryqVoz8wEOA",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64808f0d0010MXLxvGe5RIjPQ"
        }
      ]
    },
    {
      "info": {
        "role": "user",
        "time": {
          "created": 1771212810468
        },
        "summary": {
          "title": "Moonrepo docs: scrape to docs/external/moonrepo with markdown notes",
          "diffs": [
            {
              "file": ".opencode/skills/protobuf-schema-authoring/SKILL.md",
              "before": "",
              "after": "---\nname: protobuf-schema-authoring\ndescription: Author proto2/proto3 schemas and provide protoc generation workflows for Rust and TypeScript.\n---\n\n## What I do\n\n- Turn user requirements into clear, evolvable `.proto` schemas.\n- Support both `proto2` and `proto3` syntax.\n- Ask for syntax preference when not explicitly provided, and explain version-specific constraints.\n- Provide practical `protoc` workflows for Rust and TypeScript.\n\n## When to use me\n\nUse this when the task includes any of the following:\n\n- Create a new protobuf schema from product or API requirements.\n- Update an existing `.proto` safely.\n- Explain if a feature is `proto2`-only or `proto3`-only.\n- Generate Rust or TypeScript artifacts from `.proto` files.\n\n## Required clarification flow\n\nIf not already specified, ask these in order:\n\n1. Which schema syntax should be used: `proto2` or `proto3`?\n   - Recommended default: `proto3` with explicit `optional` on scalar fields when presence matters.\n2. For TypeScript generation, which plugin should be targeted: `ts-proto` or `@protobuf-ts/plugin`?\n   - Recommended default: `ts-proto`.\n\nWhen answering, always note version-specific features involved in the request.\n\n## Proto2 vs proto3 guardrails\n\n- `required` fields are proto2-only and should be avoided for new design.\n- Explicit scalar defaults (`[default = ...]`) are proto2-only.\n- Extensions are proto2-oriented; not a general proto3 field pattern.\n- Groups are deprecated legacy proto2 and should not be introduced.\n- Proto3 enums must start with a zero-valued first entry.\n- Proto3 scalar presence should use `optional` when presence semantics are needed.\n- Repeated scalar numerics are packed-by-default in proto3; in proto2, use `[packed = true]` for new fields.\n\n## Schema authoring workflow\n\n1. Confirm syntax version and target language outputs.\n2. Propose package and file layout.\n3. Define messages/enums/services with stable field numbering.\n4. Add comments only where semantics are non-obvious.\n5. Reserve removed field numbers and names.\n6. Validate with `protoc` descriptor output when possible.\n7. Provide generation commands for Rust and TypeScript.\n\n## Command templates\n\n- Validate schema and emit descriptor:\n\n```bash\nprotoc -I proto --include_imports --descriptor_set_out=gen/schema.pb proto/path/to/file.proto\n```\n\n- Rust via `prost-build` (`build.rs`):\n\n```rust\nfn main() -> std::io::Result<()> {\n    prost_build::compile_protos(&[\"proto/service.proto\"], &[\"proto\"])?;\n    Ok(())\n}\n```\n\n- Rust via `tonic-prost-build` (`build.rs`):\n\n```rust\nfn main() {\n    tonic_prost_build::configure()\n        .compile_protos(&[\"proto/service.proto\"], &[\"proto\"])\n        .unwrap();\n}\n```\n\n- TypeScript via `ts-proto`:\n\n```bash\nprotoc \\\n  --plugin=./node_modules/.bin/protoc-gen-ts_proto \\\n  --ts_proto_out=gen/ts \\\n  --ts_proto_opt=esModuleInterop=true \\\n  -I proto \\\n  proto/path/to/file.proto\n```\n\n- TypeScript via `@protobuf-ts/plugin`:\n\n```bash\nnpx protoc --ts_out gen/ts --proto_path proto proto/path/to/file.proto\n```\n\n## Output expectations\n\n- Deliver the requested `.proto` file(s) and a short note on compatibility choices.\n- Explicitly call out any use of proto2-only/proto3-only features.\n- Include exact generation commands for the selected Rust and TypeScript toolchains.\n",
              "additions": 101,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "AGENTS.md",
              "before": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
              "after": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
              "additions": 2,
              "deletions": 0,
              "status": "modified"
            },
            {
              "file": "README.md",
              "before": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
              "after": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
              "additions": 1,
              "deletions": 0,
              "status": "modified"
            },
            {
              "file": "docs/designs/core_gen1.design.md",
              "before": "",
              "after": "# Notes\n\n- Use moon and proto to manage tools and deps\n- Use a shared schemas language to define our types / API's\n    - This will allow us to port to a new language eaier\n    - Prisma was first choice but lacks solid rust support\n    - Protobuf using elysia-protobuf seems like a good option\n        - Libray is a bit immature - so we forked it to allow patches\n- Bun + Elysia JS based server for Gen 1 API for the following reasons:\n    - Faster iteration\n    - Nice OpenAPI support which will is nice for testing and open source development\n    - Out of the box plugins for stuff like llms.txt - userful for the spirit\n    - In theroy - can do ProtoBuff -> OpenAPI -> Routes / Docs all out of the box.\n- High level architecture is a core service that handles world / env / actor tracking and provides an API for agentic comms. The core service will be used by the agents to interact with the world and each other. The core service will also handle logging and other helpers.",
              "additions": 14,
              "deletions": 0,
              "status": "modified"
            },
            {
              "file": "docs/external/moonrepo/moonrepo_docs.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:38:46.200Z\n- Source root: https://moonrepo.dev/docs\n- Scope: 171 pages under /docs (excluding /docs/tags)\n- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\n- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\n----\n\n## /docs\n\nSource: https://moonrepo.dev/docs\n\nmoonrepo is a productivity platform that aims to eliminate pain points for both developers and companies, by automating tiresome and complex workflows, and improving the overall developer experience.\n\nWe currently achieve this through the following tools and services:\n\nmoon[](http://moonrepo.dev/docs#moon \"Direct link to moon\")\n------------------------------------------------------------\n\n[moon](https://moonrepo.dev/moon) is a repository _m_ anagement, _o_ rganization, _o_ rchestration, and _n_ otification tool for the web ecosystem, written in Rust. Many of the concepts within moon are heavily inspired from Bazel and other popular build systems, but tailored for our [supported languages](http://moonrepo.dev/docs#supported-languages).\n\nYou can think of a moon as a tool that sits firmly in the middle between Bazel (high complexity, full structure), and make/just/etc scripts (low complexity, no structure).\n\n### Why use moon?[](http://moonrepo.dev/docs#why-use-moon \"Direct link to Why use moon?\")\n\nWorking in a language's ecosystem can be very involved, especially when it comes to managing a repository effectively. Which language version to use? Which dependency manager to use? How to use packages? Or how to build packages? So on and so forth. moon aims to streamline this entire process and provide a first-class developer experience.\n\n*   **Increased productivity** - With [Rust](https://www.rust-lang.org/) as our foundation, we can ensure robust speeds, high performance, and low memory usage. Instead of long builds blocking you, focus on your work.\n*   **Exceptional developer experience** - As veterans of developer tooling, we're well aware of the pain points and frustrations. Our goal is to mitigate and overcome these obstacles.\n*   **Incremental adoption** - At its core, moon has been designed to be adopted incrementally and is _not_ an \"all at once adoption\". Migrate project-by-project, or task-by-task, it's up to you!\n*   **Reduced tasks confusion** - Tasks (for example, `package.json` scripts) can become unwieldy, very quickly. No more duplicating the same task into every project, or reverse-engineering which root scripts to use. With moon, all you need to know is the project name, and a task name.\n*   **Ensure correct versions** - Whether it's a programming language or dependency manager, ensure the same version of each tool is the same across _every_ developer's environment. No more wasted hours of debugging.\n*   **Automation built-in** - When applicable, moon will automatically install dependencies (`node_modules`), or [sync project dependencies](https://moonrepo.dev/docs/config/toolchain#syncprojectworkspacedependencies), or even [sync TypeScript project references](https://moonrepo.dev/docs/config/toolchain#syncprojectreferences).\n*   And of course, the amazing list of [features](http://moonrepo.dev/docs#features) below!\n\n### Supported languages[](http://moonrepo.dev/docs#supported-languages \"Direct link to Supported languages\")\n\nmoon's long-term vision is to robustly support multiple programming languages (and dependency managers) so that a repository composed of projects with differing languages and tools can all work in unison. This is a lofty vision that requires a massive amount of time and resources to achieve, and as such, is not available on initial release, but will gradually be supported over time.\n\nTo help achieve this vision, language support is broken down into 4 tiers, allowing us to incrementally integrate and improve them over time. The 4 tiers are as follows:\n\n*   Tier 0**No direct integration** - Tool is not directly supported in moon, but can still be run using the [\"system\" task toolchain](https://moonrepo.dev/docs/faq#can-we-run-other-languages), which expects the tool to exist in the current environment.\n*   Tier 1**Project categorization** - Projects can configure their primary [language in `moon.yml`](https://moonrepo.dev/docs/config/project#language), and have a dedicated Rust crate for metadata.\n*   Tier 2**Ecosystem platformization** - moon deeply integrates with the language's ecosystem by parsing manifests, lockfiles, and other semantic files to infer dependencies, tasks, and other necessary information.\n*   Tier 3**Toolchain integration** - Language is directly supported in the toolchain, configured in [`.moon/toolchains.yml`](https://moonrepo.dev/docs/config/toolchain), and will automatically be downloaded and installed.\n\n|  | Tier 0 | Tier 1 | Tier 2 | Tier 3 |\n| --- | --- | --- | --- | --- |\n| Bash/Batch |  |  |  |  |\n| Bun (JavaScript, TypeScript) |  |  |  |  |\n| Deno (JavaScript, TypeScript) |  |  |  |  |\n| Go |  |  |  |  |\n| Node (JavaScript, TypeScript) |  |  |  |  |\n|  npm, pnpm, yarn |  |  |  |  |\n| PHP |  |  |  |  |\n|  Composer |  |  |  |  |\n| Python |  |  |  |  |\n|  Pip |  |  |  |  |\n| Ruby |  |  |  |  |\n|  Gems, Bundler |  |  |  |  |\n| Rust |  |  |  |  |\n|  Cargo |  |  |  |  |\n| Other (Kotlin, Java, C#, ...) |  |  |  |  |\n\n*    Not applicable\n*    Partially supported (experimental)\n*    Fully Supported\n\n### Supported targets[](http://moonrepo.dev/docs#supported-targets \"Direct link to Supported targets\")\n\nBecause moon is written in Rust, we only support targets that are explicitly compiled for, which are currently:\n\n| Operating system | Architecture | Target |\n| --- | --- | --- |\n| macOS 64-bit | Intel | `x86_64-apple-darwin` |\n| macOS 64-bit | ARM | `aarch64-apple-darwin` |\n| Linux 64-bit | Intel GNU | `x86_64-unknown-linux-gnu` |\n| Linux 64-bit | Intel musl | `x86_64-unknown-linux-musl` |\n| Linux 64-bit | ARM GNU | `aarch64-unknown-linux-gnu` |\n| Linux 64-bit | ARM musl | `aarch64-unknown-linux-musl` |\n| Windows 64-bit | Intel | `x86_64-pc-windows-msvc` |\n\n### Features[](http://moonrepo.dev/docs#features \"Direct link to Features\")\n\n#### Management[](http://moonrepo.dev/docs#management \"Direct link to Management\")\n\n*   **Smart hashing** - Collects inputs from multiple sources to ensure builds are deterministic and reproducible.\n*   **Remote caching** - Persists builds, hashes, and caches between teammates and CI/CD environments.\n*   **Integrated toolchain** - Automatically downloads and installs explicit versions of Node.js and other tools for consistency across the entire workspace or per project.\n*   **Multi-platform** - Runs on common development platforms: Linux, macOS, and Windows.\n\n#### Organization[](http://moonrepo.dev/docs#organization \"Direct link to Organization\")\n\n*   **Project graph** - Generates a project graph for dependency and dependent relationships.\n*   **Code generation** - Easily scaffold new applications, libraries, tooling, and more!\n*   **Dependency workspaces** - Works alongside package manager workspaces so that projects have distinct dependency trees.\n*   **Code ownership** - Declare owners, maintainers, support channels, and more. Generate CODEOWNERS.\n\n#### Orchestration[](http://moonrepo.dev/docs#orchestration \"Direct link to Orchestration\")\n\n*   **Dependency graph** - Generates a dependency graph to increase performance and reduce workloads.\n*   **Action pipeline** - Executes actions in parallel and in order using a thread pool and our dependency graph.\n*   **Action distribution**Coming soon - Distributes actions across multiple machines to increase throughput.\n*   **Incremental builds** - With our smart hashing, only rebuild projects that have been touched since the last build.\n\n#### Notification[](http://moonrepo.dev/docs#notification \"Direct link to Notification\")\n\n*   **Flakiness detection** - Reduce flaky builds with automatic retries and passthrough settings.\n*   **Webhook events**Experimental - Receive a webhook for every event in the pipeline. Useful for metrics gathering and insights.\n*   **Terminal notifications**Experimental - Receives notifications in your chosen terminal when builds are successful... or are not.\n*   **Git hooks** - Manage Git hooks to enforce workflows and requirements for contributors.\n\nproto[](http://moonrepo.dev/docs#proto \"Direct link to proto\")\n---------------------------------------------------------------\n\n[proto](https://moonrepo.dev/proto) is a version manager for your favorite programming languages. [View proto documentation](https://moonrepo.dev/docs/proto).\n\n## /docs/cheat-sheet\n\nSource: https://moonrepo.dev/docs/cheat-sheet\n\nDon't have time to read the docs? Here's a quick cheat sheet to get you started.\n\nTasks[](http://moonrepo.dev/docs/cheat-sheet#tasks \"Direct link to Tasks\")\n---------------------------------------------------------------------------\n\nLearn more about [tasks](https://moonrepo.dev/docs/concepts/task) and [targets](https://moonrepo.dev/docs/concepts/target).\n\n#### Run all build and test tasks for all projects[](http://moonrepo.dev/docs/cheat-sheet#run-all-build-and-test-tasks-for-all-projects \"Direct link to Run all build and test tasks for all projects\")\n\n`moon check --all`\n\n#### Run all build and test tasks in a project[](http://moonrepo.dev/docs/cheat-sheet#run-all-build-and-test-tasks-in-a-project \"Direct link to Run all build and test tasks in a project\")\n\n`moon check project`\n\n#### Run all build and test tasks for closest project based on working directory[](http://moonrepo.dev/docs/cheat-sheet#run-all-build-and-test-tasks-for-closest-project-based-on-working-directory \"Direct link to Run all build and test tasks for closest project based on working directory\")\n\n`moon check`\n\n#### Run a task in all projects[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-all-projects \"Direct link to Run a task in all projects\")\n\n`moon run :task`\n\n#### Run a task in all projects with a tag[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-all-projects-with-a-tag \"Direct link to Run a task in all projects with a tag\")\n\n`moon run '#tag:task'# ORmoon run \\#tag:task# ORmoon run :task --query \"tag=tag\"`\n\n#### Run a task in a project[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-a-project \"Direct link to Run a task in a project\")\n\n`moon run project:task`\n\n#### Run multiple tasks in all projects[](http://moonrepo.dev/docs/cheat-sheet#run-multiple-tasks-in-all-projects \"Direct link to Run multiple tasks in all projects\")\n\n`moon run :task1 :task2`\n\n#### Run multiple tasks in any project[](http://moonrepo.dev/docs/cheat-sheet#run-multiple-tasks-in-any-project \"Direct link to Run multiple tasks in any project\")\n\n`moon run projecta:task1 projectb:task2`\n\n#### Run a task in applications, libraries, or tools[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-applications-libraries-or-tools \"Direct link to Run a task in applications, libraries, or tools\")\n\n`moon run :task --query \"projectLayer=application\"`\n\n#### Run a task in projects of a specific language[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-projects-of-a-specific-language \"Direct link to Run a task in projects of a specific language\")\n\n`moon run :task --query \"language=typescript\"`\n\n#### Run a task in projects matching a keyword[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-projects-matching-a-keyword \"Direct link to Run a task in projects matching a keyword\")\n\n`moon run :task --query \"project~react-*\"`\n\n#### Run a task in projects based on file path[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-projects-based-on-file-path \"Direct link to Run a task in projects based on file path\")\n\n`moon run :task --query \"projectSource~packages/*\"`\n\nTask configuration[](http://moonrepo.dev/docs/cheat-sheet#task-configuration \"Direct link to Task configuration\")\n------------------------------------------------------------------------------------------------------------------\n\nLearn more about [available options](https://moonrepo.dev/docs/config/project#tasks).\n\n#### Disable caching[](http://moonrepo.dev/docs/cheat-sheet#disable-caching \"Direct link to Disable caching\")\n\nmoon.yml\n\n`tasks:  example:    # ...    options:      cache: false`\n\n#### Re-run flaky tasks[](http://moonrepo.dev/docs/cheat-sheet#re-run-flaky-tasks \"Direct link to Re-run flaky tasks\")\n\nmoon.yml\n\n`tasks:  example:    # ...    options:      retryCount: 3`\n\n#### Depend on tasks from parent project's dependencies[](http://moonrepo.dev/docs/cheat-sheet#depend-on-tasks-from-parent-projects-dependencies \"Direct link to Depend on tasks from parent project's dependencies\")\n\nmoon.yml\n\n`# Also inferred from the languagedependsOn:  - 'project-a'  - 'project-b'tasks:  example:    # ...    deps:      - '^:build'`\n\n#### Depend on tasks from arbitrary projects[](http://moonrepo.dev/docs/cheat-sheet#depend-on-tasks-from-arbitrary-projects \"Direct link to Depend on tasks from arbitrary projects\")\n\nmoon.yml\n\n`tasks:  example:    # ...    deps:      - 'other-project:task'`\n\n#### Run dependencies serially[](http://moonrepo.dev/docs/cheat-sheet#run-dependencies-serially \"Direct link to Run dependencies serially\")\n\nmoon.yml\n\n`tasks:  example:    # ...    deps:      - 'first'      - 'second'      - 'third'    options:      runDepsInParallel: false`\n\nmoon.yml\n\n`tasks:  example:    command: 'noop'    deps:      - 'app:watch'      - 'backend:start'      - 'tailwind:watch'    preset: 'server'`\n\n> The `local` or `persistent` settings are required for this to work.\n\nLanguages[](http://moonrepo.dev/docs/cheat-sheet#languages \"Direct link to Languages\")\n---------------------------------------------------------------------------------------\n\n#### Run system binaries available on `PATH`[](http://moonrepo.dev/docs/cheat-sheet#run-system-binaries-available-on-path \"Direct link to run-system-binaries-available-on-path\")\n\nmoon.yml\n\n`language: 'bash' # batch, etctasks:  example:    command: 'printenv'`\n\nmoon.yml\n\n`tasks:  example:    command: 'printenv'    toolchain: 'system'`\n\n#### Run language binaries not supported in moon's toolchain[](http://moonrepo.dev/docs/cheat-sheet#run-language-binaries-not-supported-in-moons-toolchain \"Direct link to Run language binaries not supported in moon's toolchain\")\n\nmoon.yml\n\n`language: 'ruby'tasks:  example:    command: 'rubocop'    toolchain: 'system'`\n\n#### Run npm binaries (Node.js)[](http://moonrepo.dev/docs/cheat-sheet#run-npm-binaries-nodejs \"Direct link to Run npm binaries (Node.js)\")\n\nmoon.yml\n\n`language: 'javascript' # typescripttasks:  example:    command: 'eslint'`\n\nmoon.yml\n\n`tasks:  example:    command: 'eslint'    toolchain: 'node'`\n\n## /docs/commands\n\nSource: https://moonrepo.dev/docs/commands\n\n[Skip to main content](http://moonrepo.dev/docs/commands#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](https://moonrepo.dev/img/logo.svg)](https://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands#)\n\n*   [**moon** Build system for managing codebases](https://moonrepo.dev/moon)\n*   [**proto** Multi-language version manager](https://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands#)\n\n*   [**moon**](https://moonrepo.dev/docs)\n*   [**proto**](https://moonrepo.dev/docs/proto)\n\n[Guides](https://moonrepo.dev/docs/guides/ci)[Blog](https://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\n1.   [Home](https://moonrepo.dev/)\n2.   [Commands](https://moonrepo.dev/docs/commands) \n\nwarning\n\nDocumentation is currently for [moon v2](https://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\n[Overview ----------- The following options are available for all moon commands.](https://moonrepo.dev/docs/commands/overview)[action-graph --------------- The moon action-graph [target] (or moon ag) command will generate and serve a visual graph of](https://moonrepo.dev/docs/commands/action-graph)[bin ------ The moon bin command will return an absolute path to a tool's binary within the](https://moonrepo.dev/docs/commands/bin)[check -------- The moon check [...projects] (or moon c) command will run all](https://moonrepo.dev/docs/commands/check)[ci ----- The moon ci command is a special command that should be ran in a continuous integration (CI)](https://moonrepo.dev/docs/commands/ci)[clean -------- The moon clean command will clean the current workspace by deleting stale cache. For the most](https://moonrepo.dev/docs/commands/clean)[completions -------------- The moon completions command will generate moon command and argument completions for your current](https://moonrepo.dev/docs/commands/completions)[docker --------- 4 items](https://moonrepo.dev/docs/commands/docker)[exec ------- The moon exec (or moon x, or moonx) command is a low-level command for executing tasks in the](https://moonrepo.dev/docs/commands/exec)[ext ------ The moon ext command will execute an extension (a WASM plugin) that has been configured with](https://moonrepo.dev/docs/commands/ext)[extension ------------ 2 items](https://moonrepo.dev/docs/commands/extension)[generate ----------- The moon generate (or moon g) command will generate code (files and folders) from a](https://moonrepo.dev/docs/commands/generate)[hash ------- Use the moon hash command to inspect the contents and sources of a generated hash, also known as](https://moonrepo.dev/docs/commands/hash)[init ------- The moon init command will initialize moon into a repository and scaffold necessary config files](https://moonrepo.dev/docs/commands/init)[mcp ------ The moon mcp command will start an MCP server that listens for](https://moonrepo.dev/docs/commands/mcp)[project ---------- The moon project [id] (or moon p) command will display all available information about a project](https://moonrepo.dev/docs/commands/project)[projects ----------- The moon projects command will list all projects configured in the workspace as a table of](https://moonrepo.dev/docs/commands/projects)[project-graph ---------------- The moon project-graph [id] (or moon pg) command will generate and serve a visual graph of all](https://moonrepo.dev/docs/commands/project-graph)[query -------- 4 items](https://moonrepo.dev/docs/commands/query)[run ------ The moon run (or moon r) command will run one or many targets and all of](https://moonrepo.dev/docs/commands/run)[setup -------- The moon setup command can be used to setup the developer and pipeline environments. It achieves](https://moonrepo.dev/docs/commands/setup)[sync ------- 4 items](https://moonrepo.dev/docs/commands/sync)[task ------- The moon task [target] (or moon t) command will display information about a task that has been](https://moonrepo.dev/docs/commands/task)[tasks -------- The moon tasks command will list all tasks available in the workspace as a table of information.](https://moonrepo.dev/docs/commands/tasks)[task-graph ------------- The moon task-graph [target] (or moon tg) command will generate and serve a visual graph of all](https://moonrepo.dev/docs/commands/task-graph)[teardown ----------- The moon teardown command, as its name infers, will teardown and clean the current environment,](https://moonrepo.dev/docs/commands/teardown)[template ----------- The moon template [id] command will display information about a template, its files, and](https://moonrepo.dev/docs/commands/template)[templates ------------ The moon templates command will list all templates available for code generation.](https://moonrepo.dev/docs/commands/templates)[toolchain ------------ 2 items](https://moonrepo.dev/docs/commands/toolchain)[upgrade ---------- The moon upgrade command can be used to upgrade your current moon binary (if installed globally)](https://moonrepo.dev/docs/commands/upgrade)\n\n## /docs/commands/action-graph\n\nSource: https://moonrepo.dev/docs/commands/action-graph\n\naction-graph | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/action-graph#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/action-graph#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/action-graph#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/action-graph#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/action-graph#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [action-graph](http://moonrepo.dev/docs/commands/action-graph) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\naction-graph\n============\n\nv1.15.0\nThe `moon action-graph [target]` (or `moon ag`) command will generate and serve a visual graph of all actions and tasks within the workspace, known as the [action graph](http://moonrepo.dev/docs/how-it-works/action-graph). In other tools, this is sometimes referred to as a dependency graph or task graph.\n\n`# Run the visualizer locally$ moon action-graph# Export to DOT format$ moon action-graph --dot > graph.dot`\n\n> A target can be passed to focus the graph, including dependencies _and_ dependents. For example, `moon action-graph app:build`.\n\n### Arguments[](http://moonrepo.dev/docs/commands/action-graph#arguments \"Direct link to Arguments\")\n\n*   `[target]` - Optional target to focus.\n\n### Options[](http://moonrepo.dev/docs/commands/action-graph#options \"Direct link to Options\")\n\n*   `--dependents` - Include dependents of the focused target.\n*   `--dot` - Print the graph in DOT format.\n*   `--host` - The host address. Defaults to `127.0.0.1`. v1.36.0\n*   `--json` - Print the graph in JSON format.\n*   `--port` - The port to bind to. Defaults to a random port. v1.36.0\n\n### Configuration[](http://moonrepo.dev/docs/commands/action-graph#configuration \"Direct link to Configuration\")\n\n*   [`runner`](http://moonrepo.dev/docs/config/workspace#runner) in `.moon/workspace.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/project#tasks) in `moon.yml`\n\nExample output[](http://moonrepo.dev/docs/commands/action-graph#example-output \"Direct link to Example output\")\n----------------------------------------------------------------------------------------------------------------\n\nThe following output is an example of the graph in DOT format.\n\n`digraph {    0 [ label=\"SetupToolchain(node)\" style=filled, shape=oval, fillcolor=black, fontcolor=white]    1 [ label=\"InstallWorkspaceDeps(node)\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    2 [ label=\"SyncProject(node, node)\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    3 [ label=\"RunTask(node:standard)\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    1 -> 0 [ arrowhead=box, arrowtail=box]    2 -> 0 [ arrowhead=box, arrowtail=box]    3 -> 1 [ arrowhead=box, arrowtail=box]    3 -> 2 [ arrowhead=box, arrowtail=box]}`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/action-graph.mdx)\n\n[Overview](http://moonrepo.dev/docs/commands/overview)\n\n[bin](http://moonrepo.dev/docs/commands/bin)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/action-graph#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/action-graph#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/action-graph#configuration)\n*   [Example output](http://moonrepo.dev/docs/commands/action-graph#example-output)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/bin\n\nSource: https://moonrepo.dev/docs/commands/bin\n\nbin | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/bin#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/bin#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/bin#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/bin#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/bin#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [bin](http://moonrepo.dev/docs/commands/bin) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nbin\n===\n\nThe `moon bin <toolchain>` command will return an absolute path to a tool's binary within the toolchain. If a tool has not been configured or installed, this will return a 1 or 2 exit code with no value respectively.\n\n`$ moon bin node/Users/example/.proto/tools/node/x.x.x/bin/node`\n\n> A tool is considered \"not configured\" when not in use, for example, querying yarn/pnpm when the package manager is configured for \"npm\". A tool is considered \"not installed\", when it has not been downloaded and installed into the tools directory.\n\n### Arguments[](http://moonrepo.dev/docs/commands/bin#arguments \"Direct link to Arguments\")\n\n*   `<toolchain>` - Name of the toolchain to query.\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/bin.mdx)\n\n[action-graph](http://moonrepo.dev/docs/commands/action-graph)\n\n[check](http://moonrepo.dev/docs/commands/check)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/bin#arguments)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/check\n\nSource: https://moonrepo.dev/docs/commands/check\n\ncheck | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/check#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/check#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/check#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/check#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/check#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [check](http://moonrepo.dev/docs/commands/check) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ncheck\n=====\n\nThe `moon check [...projects]` (or `moon c`) command will run _all_[build and test tasks](http://moonrepo.dev/docs/concepts/task#types) for one or many projects. This is a convenience command for verifying the current state of a project, instead of running multiple [`moon run`](http://moonrepo.dev/docs/commands/run) commands.\n\n`# Check project by name$ moon check app# Check multiple projects by name$ moon check client server# Check project at current working directory$ moon check --closest# Check ALL projects (may be costly)$ moon check --all`\n\n### Arguments[](http://moonrepo.dev/docs/commands/check#arguments \"Direct link to Arguments\")\n\n*   `[...id]` - List of project IDs or aliases to explicitly check, as defined in [`projects`](http://moonrepo.dev/docs/config/workspace#projects).\n\n### Options[](http://moonrepo.dev/docs/commands/check#options \"Direct link to Options\")\n\nInherits all options from [`moon exec`](http://moonrepo.dev/docs/commands/exec) except for `--on-failure`.\n\n*   `--all` - Run check for all projects in the workspace.\n*   `--closest` - Run check for the closest project starting from the current working directory.\n\n### Configuration[](http://moonrepo.dev/docs/commands/check#configuration \"Direct link to Configuration\")\n\n*   [`projects`](http://moonrepo.dev/docs/config/workspace#projects) in `.moon/workspace.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/project#tasks) in `moon.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/check.mdx)\n\n[bin](http://moonrepo.dev/docs/commands/bin)\n\n[ci](http://moonrepo.dev/docs/commands/ci)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/check#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/check#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/check#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/ci\n\nSource: https://moonrepo.dev/docs/commands/ci\n\nci | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/ci#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/ci#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/ci#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/ci#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/ci#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [ci](http://moonrepo.dev/docs/commands/ci) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nci\n==\n\nThe `moon ci` command is a special command that should be ran in a continuous integration (CI) environment, as it does all the heavy lifting necessary for effectively running tasks.\n\nBy default this will run all tasks that are affected by touched files and have the [`runInCI`](http://moonrepo.dev/docs/config/project#runinci) task option enabled.\n\n`$ moon ci`\n\nHowever, you can also provide a list of targets to explicitly run, which will still be filtered down by `runInCI`.\n\n`$ moon ci :build :lint`\n\n> View the official [continuous integration guide](http://moonrepo.dev/docs/guides/ci) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/ci#arguments \"Direct link to Arguments\")\n\n*   `...[target]` - [Targets](http://moonrepo.dev/docs/concepts/target) to run.\n\n### Options[](http://moonrepo.dev/docs/commands/ci#options \"Direct link to Options\")\n\nInherits all options from [`moon exec`](http://moonrepo.dev/docs/commands/exec) except for `--affected`, `--on-failure`, and `--only-ci-tasks`.\n\n### Configuration[](http://moonrepo.dev/docs/commands/ci#configuration \"Direct link to Configuration\")\n\n*   [`tasks`](http://moonrepo.dev/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/project#tasks) in `moon.yml`\n*   [`tasks.*.options.runInCI`](http://moonrepo.dev/docs/config/project#runinci) in `moon.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/ci.mdx)\n\n[check](http://moonrepo.dev/docs/commands/check)\n\n[clean](http://moonrepo.dev/docs/commands/clean)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/ci#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/ci#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/ci#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/clean\n\nSource: https://moonrepo.dev/docs/commands/clean\n\nclean | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/clean#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/clean#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/clean#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/clean#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/clean#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [clean](http://moonrepo.dev/docs/commands/clean) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nclean\n=====\n\nThe `moon clean` command will clean the current workspace by deleting stale cache. For the most part, the action pipeline will clean automatically, but this command can be used to reset the workspace entirely.\n\n`$ moon clean# Delete cache with a custom lifetime$ moon clean --lifetime '24 hours'`\n\n### Options[](http://moonrepo.dev/docs/commands/clean#options \"Direct link to Options\")\n\n*   `--lifetime` - The maximum lifetime of cached artifacts before being marked as stale. Defaults to \"7 days\".\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/clean.mdx)\n\n[ci](http://moonrepo.dev/docs/commands/ci)\n\n[completions](http://moonrepo.dev/docs/commands/completions)\n\n*   [Options](http://moonrepo.dev/docs/commands/clean#options)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/completions\n\nSource: https://moonrepo.dev/docs/commands/completions\n\ncompletions | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/completions#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/completions#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/completions#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/completions#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/completions#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [completions](http://moonrepo.dev/docs/commands/completions) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ncompletions\n===========\n\nThe `moon completions` command will generate moon command and argument completions for your current shell. This command will write to stdout, which can then be redirected to a file of your choice.\n\n`$ moon completions > ./path/to/write/to`\n\n### Options[](http://moonrepo.dev/docs/commands/completions#options \"Direct link to Options\")\n\n*   `--shell` - Shell to explicitly generate for.\n\n### Examples[](http://moonrepo.dev/docs/commands/completions#examples \"Direct link to Examples\")\n\n*   Bash\n*   Fish\n*   Zsh\n\nIf using [bash-completion](https://github.com/scop/bash-completion).\n\n`mkdir -p ~/.bash_completion.dmoon completions > ~/.bash_completion.d/moon.sh`\n\nOtherwise write the file to a common location, and source it in your profile.\n\n`mkdir -p ~/.bash_completionsmoon completions > ~/.bash_completions/moon.sh# In your profilesource ~/.bash_completions/moon.sh`\n\nWrite the file to Fish's completions directory.\n\n`mkdir -p ~/.config/fish/completionsmoon completions > ~/.config/fish/completions/moon.fish`\n\nIf using [oh-my-zsh](https://ohmyz.sh/) (the `_` prefix is required).\n\n`mkdir -p ~/.oh-my-zsh/completionsmoon completions > ~/.oh-my-zsh/completions/_moon# Reload shell (or restart terminal)omz reload`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/completions.mdx)\n\n[clean](http://moonrepo.dev/docs/commands/clean)\n\n[docker](http://moonrepo.dev/docs/commands/docker)\n\n*   [Options](http://moonrepo.dev/docs/commands/completions#options)\n*   [Examples](http://moonrepo.dev/docs/commands/completions#examples)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/docker\n\nSource: https://moonrepo.dev/docs/commands/docker\n\ndocker | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/docker#__docusaurus_skipToContent_fallback)\n\n[![Image 2: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/docker#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/docker#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/docker#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n        *   [file](http://moonrepo.dev/docs/commands/docker/file)\n        *   [prune](http://moonrepo.dev/docs/commands/docker/prune)\n        *   [scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n        *   [setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/docker#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [docker](http://moonrepo.dev/docs/commands/docker) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\ndocker\n======\n\nOperations for integrating with Docker and Dockerfiles.\n\n[file ------- The moon docker file command can be used to generate a multi-staged Dockerfile for a](http://moonrepo.dev/docs/commands/docker/file)[prune -------- The moon docker prune command will reduce the overall filesize of the Docker environment by](http://moonrepo.dev/docs/commands/docker/prune)[scaffold ----------- The moon docker scaffold command creates multiple repository skeletons for use](http://moonrepo.dev/docs/commands/docker/scaffold)[setup -------- The moon docker setup command will efficiently install dependencies for focused projects. This is](http://moonrepo.dev/docs/commands/docker/setup)\n\n[completions](http://moonrepo.dev/docs/commands/completions)\n\n[file](http://moonrepo.dev/docs/commands/docker/file)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/docker/file\n\nSource: https://moonrepo.dev/docs/commands/docker/file\n\n1.   [Home](https://moonrepo.dev/)\n\nwarning\n\nDocumentation is currently for [moon v2](https://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nv1.27.0\n\nThe `moon docker file <project>` command can be used to generate a multi-staged `Dockerfile` for a project, that takes full advantage of Docker's layer caching, and is primarily for production deploys (this should not be used for development).\n\n`$ moon docker file <project>`\n\nAs mentioned above, the generated `Dockerfile` uses a multi-stage approach, where each stage is broken up into the following:\n\n*   `base` - The base stage, which simply installs moon for a chosen Docker image. This stage requires Bash.\n*   `skeleton` - Scaffolds workspace and sources repository skeletons using [`moon docker scaffold`](https://moonrepo.dev/docs/commands/docker/scaffold).\n*   `build` - Copies required sources, installs the toolchain using [`moon docker setup`](https://moonrepo.dev/docs/commands/docker/setup), optionally builds the project, and optionally prunes the image using [`moon docker prune`](https://moonrepo.dev/docs/commands/docker/prune).\n*   `start` - Runs the project after it has been built. This is typically starting an HTTP server, or executing a binary.\n\ninfo\n\nView the official [Docker usage guide](https://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/docker/file#arguments \"Direct link to Arguments\")\n\n*   `<name>` - Name or alias of a project, as defined in [`projects`](https://moonrepo.dev/docs/config/workspace#projects).\n*   `[dest]` - Destination to write the file, relative from the project root. Defaults to `Dockerfile`.\n\n### Options[](http://moonrepo.dev/docs/commands/docker/file#options \"Direct link to Options\")\n\n*   `--defaults` - Use default options instead of prompting in the terminal.\n*   `--build-task` - Name of a task to build the project. Defaults to the [`docker.file.buildTask`](https://moonrepo.dev/docs/config/project#buildtask) setting, or prompts in the terminal.\n*   `--image` - Base Docker image to use. Defaults to an image derived from the toolchain, or prompts in the terminal.\n*   `--no-prune` - Do not prune the workspace in the build stage.\n*   `--no-toolchain` - Do not use the toolchain and instead use system binaries.\n*   `--start-task` - Name of a task to start the project. Defaults to the [`docker.file.startTask`](https://moonrepo.dev/docs/config/project#starttask) setting, or prompts in the terminal.\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/file#configuration \"Direct link to Configuration\")\n\n*   [`docker.file`](https://moonrepo.dev/docs/config/project#file) in `moon.yml`\n\n## /docs/commands/docker/prune\n\nSource: https://moonrepo.dev/docs/commands/docker/prune\n\ndocker prune | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/docker/prune#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/docker/prune#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/docker/prune#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/docker/prune#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n        *   [file](http://moonrepo.dev/docs/commands/docker/file)\n        *   [prune](http://moonrepo.dev/docs/commands/docker/prune)\n        *   [scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n        *   [setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/docker/prune#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [docker](http://moonrepo.dev/docs/commands/docker) \n4.   [prune](http://moonrepo.dev/docs/commands/docker/prune) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ndocker prune\n============\n\nThe `moon docker prune` command will reduce the overall filesize of the Docker environment by installing production only dependencies for projects that were scaffolded, and removing any applicable extraneous files.\n\n`$ moon docker prune`\n\ninfo\n\nView the official [Docker usage guide](http://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\ncaution\n\nThis command _must be_ ran after [`moon docker scaffold`](http://moonrepo.dev/docs/commands/docker/scaffold) and is typically ran within a `Dockerfile`! The [`moon docker file`](http://moonrepo.dev/docs/commands/docker/file) command can be used to generate a `Dockerfile`.\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/prune#configuration \"Direct link to Configuration\")\n\n*   [`docker.prune`](http://moonrepo.dev/docs/config/workspace#prune) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/docker/prune.mdx)\n\n[file](http://moonrepo.dev/docs/commands/docker/file)\n\n[scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n\n*   [Configuration](http://moonrepo.dev/docs/commands/docker/prune#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/docker/scaffold\n\nSource: https://moonrepo.dev/docs/commands/docker/scaffold\n\nThe `moon docker scaffold <...projects>` command creates multiple repository skeletons for use within `Dockerfile`s, to effectively take advantage of Docker's layer caching. It utilizes the [project graph](https://moonrepo.dev/docs/config/workspace#projects) to copy only critical files, like manifests, lockfiles, and configuration.\n\n`# Scaffold a skeleton to .moon/docker$ moon docker scaffold <project>`\n\ninfo\n\nView the official [Docker usage guide](https://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/docker/scaffold#arguments \"Direct link to Arguments\")\n\n*   `<...projects>` - List of project names or aliases to scaffold sources for, as defined in [`projects`](https://moonrepo.dev/docs/config/workspace#projects).\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/scaffold#configuration \"Direct link to Configuration\")\n\n*   [`docker.scaffold`](https://moonrepo.dev/docs/config/workspace#scaffold) in `.moon/workspace.yml` (entire workspace)\n*   [`docker.scaffold`](https://moonrepo.dev/docs/config/project#scaffold) in `moon.yml` (per project)\n\nHow it works[](http://moonrepo.dev/docs/commands/docker/scaffold#how-it-works \"Direct link to How it works\")\n-------------------------------------------------------------------------------------------------------------\n\nThis command may seem like magic, but it's relative simple thanks to moon's infrastructure and its project graph. When the command is ran, we generate 2 skeleton structures in `.moon/docker` (be sure to gitignore this). One for the workspace, and the other for sources.\n\nwarning\n\nBecause scaffolding uses the project graph, it requires all projects with a `package.json` to be [configured in moon](https://moonrepo.dev/docs/config/workspace#projects). Otherwise, moon will fail to copy all required files and builds may fail.\n\n### Workspace[](http://moonrepo.dev/docs/commands/docker/scaffold#workspace \"Direct link to Workspace\")\n\nThe workspace skeleton mirrors the project folder structure of the repository 1:1, and only copies files required for dependencies to install. This is typically manifests (`package.json`), lockfiles (`yarn.lock`, etc), other critical configs, and `.moon` itself. This is necessary for package managers to install dependencies (otherwise they will fail), and for dependencies to be layer cached in Docker.\n\nAn example of this skeleton using Yarn may look like the following:\n\n`.moon/docker/workspace/ .moon/ .yarn/ apps/    client/       package.json    server/        package.json packages/    foo/       package.json    bar/       package.json    baz/        package.json .yarnrc.yml package.json yarn.lock`\n\n### Sources[](http://moonrepo.dev/docs/commands/docker/scaffold#sources \"Direct link to Sources\")\n\nThe sources skeleton is not a 1:1 mirror of the repository, and instead is the source files of a project (passed as an argument to the command), and all of its dependencies. This allows [`moon run`](https://moonrepo.dev/docs/commands/run) and other commands to work within the `Dockerfile`, and avoid having to `COPY . .` the entire repository.\n\nUsing our example workspace above, our sources skeleton would look like the following, assuming our `client` project is passed as an argument, and this project depends on the `foo` and `baz` projects.\n\n`.moon/docker/sources/ apps/    client/|        src/|        tests/|        public/|        package.json|        tsconfig.json        (anything else) packages/     foo/        lib/        src/        package.json        tsconfig.json        (anything else)     baz/         lib/         src/         package.json         tsconfig.json         (anything else)`\n\n## /docs/commands/docker/setup\n\nSource: https://moonrepo.dev/docs/commands/docker/setup\n\ndocker setup | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/docker/setup#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/docker/setup#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/docker/setup#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/docker/setup#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n        *   [file](http://moonrepo.dev/docs/commands/docker/file)\n        *   [prune](http://moonrepo.dev/docs/commands/docker/prune)\n        *   [scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n        *   [setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/docker/setup#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [docker](http://moonrepo.dev/docs/commands/docker) \n4.   [setup](http://moonrepo.dev/docs/commands/docker/setup) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ndocker setup\n============\n\nThe `moon docker setup` command will efficiently install dependencies for focused projects. This is an all-in-one command for tool and dependency installations, and should replace `npm install` and other commands.\n\n`$ moon docker setup`\n\ninfo\n\nView the official [Docker usage guide](http://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\ncaution\n\nThis command _must be_ ran after [`moon docker scaffold`](http://moonrepo.dev/docs/commands/docker/scaffold) and is typically ran within a `Dockerfile`! The [`moon docker file`](http://moonrepo.dev/docs/commands/docker/file) command can be used to generate a `Dockerfile`.\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/setup#configuration \"Direct link to Configuration\")\n\n*   [`*`](http://moonrepo.dev/docs/config/toolchain) in `.moon/toolchains.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/docker/setup.mdx)\n\n[scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n\n[exec](http://moonrepo.dev/docs/commands/exec)\n\n*   [Configuration](http://moonrepo.dev/docs/commands/docker/setup#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/exec\n\nSource: https://moonrepo.dev/docs/commands/exec\n\nexec | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/exec#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/exec#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/exec#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/exec#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/exec#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [exec](http://moonrepo.dev/docs/commands/exec) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nexec\n====\n\nv2.0.0\nThe `moon exec` (or `moon x`, or `moonx`) command is a low-level command for executing tasks in the action pipeline. It provides fine-grained control over how tasks are selected and executed, through command line options, making it ideal for custom workflows and advanced use cases.\n\nThe [`moon check`](http://moonrepo.dev/docs/commands/check), [`moon ci`](http://moonrepo.dev/docs/commands/ci), and [`moon run`](http://moonrepo.dev/docs/commands/run) commands are all built on top of `moon exec`, so be sure to check those out for more user-friendly abstractions!\n\n`# Run `lint` in project `app`$ moon exec app:lint$ moonx app:lint# Run `dev` in project `client` and `server`$ moon exec client:dev server:dev$ moonx client:dev server:dev# Run `test` in all projects$ moon exec :test$ moonx :test# Run `test` in all projects with tag `frontend`$ moon exec '#frontend:test'$ moonx '#frontend:test'# Run `format` in the default project$ moon exec format$ moonx format# Run `build` in projects matching the query$ moon exec :build --query \"language=javascript && projectLayer=library\"`\n\nArguments[](http://moonrepo.dev/docs/commands/exec#arguments \"Direct link to Arguments\")\n-----------------------------------------------------------------------------------------\n\n*   `...<target>` - [Targets](http://moonrepo.dev/docs/concepts/target) or project relative tasks to run.\n*   `[-- <args>]` - Additional arguments to [pass to the underlying command](http://moonrepo.dev/docs/run-task#passing-arguments-to-the-underlying-command).\n\nOptions[](http://moonrepo.dev/docs/commands/exec#options \"Direct link to Options\")\n-----------------------------------------------------------------------------------\n\n*   `-f`, `--force` - Force run and bypass cache, ignore changed files, and skip affected checks.\n*   `-i`, `--interactive` - Run the pipeline and tasks interactively.\n*   `-s`, `--summary [LEVEL]` - Print a summary of all actions that were ran in the pipeline.\n\n### Workflow[](http://moonrepo.dev/docs/commands/exec#workflow \"Direct link to Workflow\")\n\n*   `--on-failure <ON>` - When a task fails, either bail the pipeline, or continue executing.\n*   `--only-ci-tasks` - Filter tasks to those that only run in CI.\n*   `--query <QUERY>` - Filter tasks based on the result of a query.\n*   `--no-actions` - Run the pipeline without sync and setup related actions.\n\n### Affected[](http://moonrepo.dev/docs/commands/exec#affected \"Direct link to Affected\")\n\n*   `--affected [BY]` - Only run tasks if affected by changed files. Optionally accepts \"local\" or \"remote\".\n*   `--base <BASE>` - Base branch, commit, or revision to compare against.\n*   `--head <HEAD>` - Current branch, commit, or revision to compare with.\n*   `--status <STATUS>` - Filter changed files based on a changed status.\n*   `--stdin` - Accept changed files from stdin for affected checks.\n\n### Graph[](http://moonrepo.dev/docs/commands/exec#graph \"Direct link to Graph\")\n\n*   `--downstream <DEPTH>`, `--dependents <DEPTH>` - Control the depth of downstream dependents.\n*   `--upstream <DEPTH>`, `--dependencies <DEPTH>` - Control the depth of upstream dependencies.\n\n### Parallelism[](http://moonrepo.dev/docs/commands/exec#parallelism \"Direct link to Parallelism\")\n\n*   `--job <INDEX>` - Index of the current job (0 based).\n*   `--job-total <TOTAL>` - Total amount of jobs to run.\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/exec.mdx)\n\n[setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n[ext](http://moonrepo.dev/docs/commands/ext)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/exec#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/exec#options)\n    *   [Workflow](http://moonrepo.dev/docs/commands/exec#workflow)\n    *   [Affected](http://moonrepo.dev/docs/commands/exec#affected)\n    *   [Graph](http://moonrepo.dev/docs/commands/exec#graph)\n    *   [Parallelism](http://moonrepo.dev/docs/commands/exec#parallelism)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/ext\n\nSource: https://moonrepo.dev/docs/commands/ext\n\next | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/ext#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/ext#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/ext#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/ext#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/ext#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [ext](http://moonrepo.dev/docs/commands/ext) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\next\n===\n\nv1.20.0\nThe `moon ext <id>` command will execute an extension (a WASM plugin) that has been configured with the [`extensions`](http://moonrepo.dev/docs/config/workspace#extensions) setting in [`.moon/workspace.yml`](http://moonrepo.dev/docs/config). View our official [extensions guide](http://moonrepo.dev/docs/guides/extensions) for more information.\n\n`$ moon ext download -- --url https://github.com/moonrepo/moon/archive/refs/tags/v1.19.3.zip`\n\nExtensions typically support command line arguments, which _must_ be passed after a `--` separator (as seen above). Any arguments before the separator will be passed to the `moon ext` command itself.\n\ncaution\n\nThis command requires an internet connection if the extension's `.wasm` file must be downloaded from a URL, and it hasn't been cached locally.\n\n### Arguments[](http://moonrepo.dev/docs/commands/ext#arguments \"Direct link to Arguments\")\n\n*   `<id>` - Name of the extension to execute.\n*   `[-- <args>]` - Arguments to pass to the extension.\n\n### Configuration[](http://moonrepo.dev/docs/commands/ext#configuration \"Direct link to Configuration\")\n\n*   [`extensions`](http://moonrepo.dev/docs/config/workspace#extensions) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/ext.mdx)\n\n[exec](http://moonrepo.dev/docs/commands/exec)\n\n[extension](http://moonrepo.dev/docs/commands/extension)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/ext#arguments)\n*   [Configuration](http://moonrepo.dev/docs/commands/ext#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/extension\n\nSource: https://moonrepo.dev/docs/commands/extension\n\nextension | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/extension#__docusaurus_skipToContent_fallback)\n\n[![Image 2: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/extension#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/extension#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/extension#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n        *   [add](http://moonrepo.dev/docs/commands/extension/add)\n        *   [info](http://moonrepo.dev/docs/commands/extension/info)\n\n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/extension#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [extension](http://moonrepo.dev/docs/commands/extension) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nextension\n=========\n\nManage extension plugins.\n\n[add ------ The moon extension add [plugin] command will add a extension to the workspace by injecting a](http://moonrepo.dev/docs/commands/extension/add)[info ------- The moon extension info [plugin] command will display detailed information about a extension.](http://moonrepo.dev/docs/commands/extension/info)\n\n[ext](http://moonrepo.dev/docs/commands/ext)\n\n[add](http://moonrepo.dev/docs/commands/extension/add)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/extension/add\n\nSource: https://moonrepo.dev/docs/commands/extension/add\n\nextension add | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/extension/add#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/extension/add#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/extension/add#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/extension/add#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n        *   [add](http://moonrepo.dev/docs/commands/extension/add)\n        *   [info](http://moonrepo.dev/docs/commands/extension/info)\n\n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/extension/add#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [extension](http://moonrepo.dev/docs/commands/extension) \n4.   [add](http://moonrepo.dev/docs/commands/extension/add) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nextension add\n=============\n\nv2.0.0\nThe `moon extension add <id> [plugin]` command will add a extension to the workspace by injecting a configuration block into `.moon/extensions.yml`. To do this, the command will download the WASM plugin, extract information, and call initialize functions.\n\nFor built-in extensions, the [plugin locator](http://moonrepo.dev/docs/guides/wasm-plugins#configuring-plugin-locations) argument is optional, and will be derived from the identifier.\n\n`$ moon extension add download`\n\nFor third-party extensions, the [plugin locator](http://moonrepo.dev/docs/guides/wasm-plugins#configuring-plugin-locations) argument is required, and must point to the WASM plugin.\n\n`$ moon extension add custom https://example.com/path/to/plugin.wasm`\n\n### Arguments[](http://moonrepo.dev/docs/commands/extension/add#arguments \"Direct link to Arguments\")\n\n*   `<id>` - ID of the extension to use.\n*   `[plugin]` - Optional [plugin locator](http://moonrepo.dev/docs/guides/wasm-plugins#configuring-plugin-locations) for third-party extensions.\n\n### Options[](http://moonrepo.dev/docs/commands/extension/add#options \"Direct link to Options\")\n\n*   `--minimal` - Generate minimal configurations and sane defaults.\n*   `--yes` - Skip all prompts and enables tools based on file detection.\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/extension/add.mdx)\n\n[extension](http://moonrepo.dev/docs/commands/extension)\n\n[info](http://moonrepo.dev/docs/commands/extension/info)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/extension/add#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/extension/add#options)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/extension/info\n\nSource: https://moonrepo.dev/docs/commands/extension/info\n\nextension info | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/extension/info#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/extension/info#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/extension/info#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/extension/info#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n        *   [add](http://moonrepo.dev/docs/commands/extension/add)\n        *   [info](http://moonrepo.dev/docs/commands/extension/info)\n\n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/extension/info#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [extension](http://moonrepo.dev/docs/commands/extension) \n4.   [info](http://moonrepo.dev/docs/commands/extension/info) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nextension info\n==============\n\nv2.0.0\nThe `moon extension info <id> [plugin]` command will display detailed information about a extension. To do this, the command will download the WASM plugin, extract information, and call specific functions.\n\nFor built-in extensions, the [plugin locator][locator] argument is optional, and will be derived from the identifier.\n\n`$ moon extension info download`\n\nFor third-party extensions, the [plugin locator][locator] argument is required, and must point to the WASM plugin.\n\n`$ moon extension info custom https://example.com/path/to/plugin.wasm`\n\n### Arguments[](http://moonrepo.dev/docs/commands/extension/info#arguments \"Direct link to Arguments\")\n\n*   `<id>` - ID of the extension to view.\n*   `[plugin]` - Optional [plugin locator][locator] for third-party extensions.\n\nExample output[](http://moonrepo.dev/docs/commands/extension/info#example-output \"Direct link to Example output\")\n------------------------------------------------------------------------------------------------------------------\n\n`Extension   Download a file from a URL into the current working directory.  ID: download  Title: Download  Version: 1.0.0APIs    define_extension_config   execute_extension   extend_command   extend_project_graph   extend_task_command   extend_task_script   initialize_extension   register_extension (required)   sync_project   sync_workspace`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/extension/info.mdx)\n\n[add](http://moonrepo.dev/docs/commands/extension/add)\n\n[generate](http://moonrepo.dev/docs/commands/generate)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/extension/info#arguments)\n*   [Example output](http://moonrepo.dev/docs/commands/extension/info#example-output)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/generate\n\nSource: https://moonrepo.dev/docs/commands/generate\n\ngenerate | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/generate#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/generate#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/generate#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/generate#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/generate#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [generate](http://moonrepo.dev/docs/commands/generate) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ngenerate\n========\n\nThe `moon generate <id>` (or `moon g`) command will generate code (files and folders) from a pre-defined template of the same name, using an interactive series of prompts. Templates are located based on the [`generator.templates`](http://moonrepo.dev/docs/config/workspace#templates) setting.\n\n`# Generate code from a template$ moon generate npm-package# Generate code from a template to a target directory$ moon generate npm-package --to ./packages/example# Generate code while declaring custom variable values$ moon generate npm-package --to ./packages/example -- --name \"@company/example\"# Create a new template$ moon generate react-app --template`\n\n> View the official [code generation guide](http://moonrepo.dev/docs/guides/codegen) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/generate#arguments \"Direct link to Arguments\")\n\n*   `<id>` - ID of the template to generate.\n*   `[-- <vars>]` - Additional arguments to override default variable values.\n\n### Options[](http://moonrepo.dev/docs/commands/generate#options \"Direct link to Options\")\n\n*   `--defaults` - Use the default value of all variables instead of prompting the user.\n*   `--dry-run` - Run entire generator process without writing files.\n*   `--force` - Force overwrite any existing files at the destination.\n*   `--template` - Create a new template with the provided name.\n*   `--to` - Destination to write files to, relative from the current working directory. If not defined, will be prompted during generation.\n\n### Configuration[](http://moonrepo.dev/docs/commands/generate#configuration \"Direct link to Configuration\")\n\n*   [`generator`](http://moonrepo.dev/docs/config/workspace#generator) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/generate.mdx)\n\n[info](http://moonrepo.dev/docs/commands/extension/info)\n\n[hash](http://moonrepo.dev/docs/commands/hash)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/generate#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/generate#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/generate#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/hash\n\nSource: https://moonrepo.dev/docs/commands/hash\n\nhash | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/hash#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/hash#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/hash#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/hash#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/hash#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [hash](http://moonrepo.dev/docs/commands/hash) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nhash\n====\n\nv2.0.0\nUse the `moon hash` command to inspect the contents and sources of a generated hash, also known as the hash manifest. This is extremely useful in debugging task inputs.\n\n`$ moon hash 0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fdde# Query hash using short form$ moon hash 0b55b234`\n\nBy default, this will output the contents of the hash manifest (which is JSON), and the fully qualified resolved hash.\n\n`Hash: 0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fdde{  \"command\": \"build\",  \"args\": [\"./build\"]  // ...}`\n\nThe command can also be output raw JSON by passing the `--json` flag.\n\n### Comparing hashes[](http://moonrepo.dev/docs/commands/hash#comparing-hashes \"Direct link to Comparing hashes\")\n\nThe command can also be used to compare two hashes by diffing their contents. Simply pass two hashes as arguments.\n\n`# Diff between 2 hashes$ moon hash 0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fdde 2388552fee5a02062d0ef402bdc7232f0a447458b058c80ce9c3d0d4d7cfe171# Diff between 2 hashes using short form$ moon hash 0b55b234 2388552f`\n\nBy default, this will output the contents of a hash file (which is JSON), highlighting the differences between the left and right hashes. Lines that match will be printed in white, while the left differences printed in green, and right differences printed in red. If you use `git diff`, this will feel familiar to you.\n\n`Left:  0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fddeRight: 2388552fee5a02062d0ef402bdc7232f0a447458b058c80ce9c3d0d4d7cfe171{\t\"command\": \"build\",\t\"args\": [+\t\t\"./dist\"-\t\t\"./build\"\t],\t...}`\n\nThe differences can also be output in JSON by passing the `--json` flag. The output has the following structure:\n\n`{\tleft: string,\tleft_hash: string,\tleft_diffs: string[],\tright: string,\tright_hash: string,\tright_diffs: string[],}`\n\n### Options[](http://moonrepo.dev/docs/commands/hash#options \"Direct link to Options\")\n\n*   `--json` - Display the diff in JSON format.\n\n### Configuration[](http://moonrepo.dev/docs/commands/hash#configuration \"Direct link to Configuration\")\n\n*   [`hasher`](http://moonrepo.dev/docs/config/workspace#hasher) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/hash.mdx)\n\n[generate](http://moonrepo.dev/docs/commands/generate)\n\n[init](http://moonrepo.dev/docs/commands/init)\n\n*   [Comparing hashes](http://moonrepo.dev/docs/commands/hash#comparing-hashes)\n*   [Options](http://moonrepo.dev/docs/commands/hash#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/hash#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/init\n\nSource: https://moonrepo.dev/docs/commands/init\n\n# init\n\nThe `moon init` command will initialize moon into a repository and scaffold necessary config files\nby creating a `.moon` folder.\n\n```\n$ moon init# In another directory$ moon init ./app\n```\n\n### Arguments\n\n- `[dest]` - Destination to initialize and scaffold into. Defaults to `.` (current working directory).\n\n### Options\n\n- `--force` - Overwrite existing config files if they exist.\n\n- `--minimal` - Generate minimal configurations and sane defaults.\n\n- `--yes` - Skip all prompts and enables tools based on file detection.\n\n## /docs/commands/mcp\n\nSource: https://moonrepo.dev/docs/commands/mcp\n\n# mcp\n\nv1.37.0\n\nThe `moon mcp` command will start an [MCP](https://modelcontextprotocol.io) server that listens for\nrequests from AI assistants. This allows for agentic workflows in your favorite editor.\n\n```\n$ moon mcp\n```\n\ninfo\n\nThis command should not be ran manually and instead should be integrated into your editor. View the\n[MCP guide](/docs/guides/mcp) for more information.\n\n## /docs/commands/overview\n\nSource: https://moonrepo.dev/docs/commands/overview\n\n# Overview\n\nThe following options are available for all moon commands.\n\n- `--cache ` - The mode for [cache operations](#caching).\n\n- `--color` - Force [colored output](#colors) for moon (not tasks).\n\n- `--concurrency`, `-c` - Maximum number of threads to utilize.\n\n- `--dump` - Dump a [trace profile](#profiling) to the working directory.\n\n- `--help` - Display the help menu for the current command.\n\n- `--log ` - The lowest [log level to output](#logging).\n\n- `--log-file ` - Write logs to the defined file.\n\n- `--quiet`, `-q` - Hide all non-important moon specific terminal output.\n\n- `--theme` - Terminal theme to write output in. v1.35.0\n\n- `--version` - Display the version of the CLI.\n\n## Caching\n\nWe provide a powerful [caching layer](/docs/concepts/cache), but sometimes you need to debug failing or\nbroken tasks, and this cache may get in the way. To circumvent this, we support the `--cache` global\noption, or the `MOON_CACHE` environment variable, both of which accept one of the following values.\n\n- `off` - Turn off caching entirely. Every task will run fresh, including dependency installs.\n\n- `read` - Read existing items from the cache, but do not write to them.\n\n- `read-write` (default) - Read and write items to the cache.\n\n- `write` - Do not read existing cache items, but write new items to the cache.\n\n```\n$ moon run app:build --cache off# Or$ MOON_CACHE=off moon run app:build\n```\n\n## Colors\n\nColored output is a complicated subject, with differing implementations and standards across tooling\nand operating systems. moon aims to normalize this as much as possible, by doing the following:\n\n- By default, moon colors are inherited from your terminal settings (`TERM` and `COLORTERM` environment variables).\n\n- Colors can be force enabled by passing the `--color` option (preferred), or `MOON_COLOR` or `FORCE_COLOR` environment variables.\n\n```\n$ moon app:build --color run# Or$ MOON_COLOR=2 moon run app:build\n```\n\nWhen forcing colors with `MOON_COLOR` or `FORCE_COLOR`, you may set it to one of the following\nnumerical values for the desired level of color support. This is automatically inferred if you use\n`--color`.\n\n- `0` - No colors\n\n- `1` - 16 colors (standard terminal colors)\n\n- `2` - 256 colors\n\n- `3` - 16 million colors (truecolor)\n\n### Themesv1.35.0\n\nBy default, moon assumes a dark themed terminal is being used, and will output colors accordingly.\nHowever, if you use a light theme, these colors are hard to read. To mitigate this, we support\nchanging the theme with the `--theme` global option, or the `MOON_THEME` environment variable.\n\n```\n$ moon run app:build --theme light# Or$ MOON_THEME=light moon run app:build\n```\n\n### Piped output\n\nWhen tasks (child processes) are piped, colors and ANSI escape sequences are lost, since the target\nis not a TTY and we do not implement a PTY. This is a common pattern this is quite annoying.\nHowever, many tools and CLIs support a `--color` option to work around this limitation and to always\nforce colors, even when not a TTY.\n\nTo mitigate this problem as a whole, and to avoid requiring `--color` for every task, moon supports\nthe [`pipeline.inheritColorsForPipedTasks`](/docs/config/workspace#inheritcolorsforpipedtasks)\nconfiguration setting. When enabled, all piped child processes will inherit the color settings of\nthe currently running terminal.\n\n## Concurrency\n\nThe `--concurrency` option or `MOON_CONCURRENCY` environment variable can be used to control the\nmaximum amount of threads to utilize in our thread pool. If not defined, defaults to the number of\noperating system cores.\n\n```\n$ moon run app:build --concurrency 1# Or$ MOON_CONCURRENCY=1 moon run app:build\n```\n\n## Debugging\n\nAt minimum, most debugging can be done by passing [`--log trace`](#logging) on the command line and\nsifting through the logs. We also provide the following environment variables to toggle output.\n\n- `MOON_DEBUG_PROCESS_ENV` - By default moon hides the environment variables (except for `MOON_`) passed to processes to avoid leaking sensitive information. However, knowing what environment variables are passed around is helpful in debugging. Declare this variable to reveal the entire environment.\n\n- `MOON_DEBUG_PROCESS_INPUT` - By default moon truncates the stdin passed to processes to avoid thrashing the console with a large input string. However, knowing what input is passed around is helpful in debugging. Declare this variable to reveal the entire input.\n\n- `MOON_DEBUG_PROTO_INSTALL` - Debug the proto installation process.\n\n- `MOON_DEBUG_REMOTE` - Debug our remote caching implementation by including additional logging output, and printing internal connection errors.\n\n- `MOON_DEBUG_WASM` - Debug our WASM plugins by including additional logging output, and optionally dumping memory/core profiles.\n\n## Logging\n\nBy default, moon aims to output as little as possible, as we want to preserve the original output of\nthe command's being ran, excluding warnings and errors. This is managed through log levels, which\ncan be defined with the `--log` global option, or the `MOON_LOG` environment variable. The following\nlevels are supported, in priority order.\n\n- `off` - Turn off logging entirely.\n\n- `error` - Only show error logs.\n\n- `warn` - Only show warning logs and above.\n\n- `info` (default) - Only show info logs and above.\n\n- `debug` - Only show debug logs and above.\n\n- `trace` - Show all logs, including network requests and child processes.\n\n- `verbose` - Like `trace` but also includes span information. v1.35.0\n\n```\n$ moon run app:build --log trace# Or$ MOON_LOG=trace moon run app:build\n```\n\n### Writing logs to a file\n\nmoon can dump the logs from a command to a file using the `--logFile` option, or the `MOON_LOG_FILE`\nenvironment variable. The dumped logs will respect the `--log` option and filter the logs piped to\nthe output file.\n\n```\n$ moon run app:build --logFile=output.log# Or$ MOON_LOG_FILE=output.log moon run app:build\n```\n\n## Profilingv1.26.0\n\nWhen the `--dump` option or `MOON_DUMP` environment variable is set, moon will generate a trace\nprofile and dump it to the current working directory. This profile can be opened with Chrome (via\n`chrome://tracing`) or [Perfetto](https://ui.perfetto.dev/).\n\nThis profile will display many of the operations within moon as a flame chart, allowing you to\ninspect and debug slow operations.\n\n## /docs/commands/project\n\nSource: https://moonrepo.dev/docs/commands/project\n\n# project\n\nThe `moon project [id]` (or `moon p`) command will display all available information about a project\nthat has been configured and exists within the graph. If a project does not exist, the program will\nreturn with a 1 exit code.\n\n```\n$ moon project web\n```\n\n### Arguments\n\n- `[id]` - ID or alias of a project, as defined in [`projects`](/docs/config/workspace#projects).\n\n### Options\n\n- `--json` - Print the project and its configuration as JSON.\n\n- `--no-tasks` - Do not list tasks for the project.\n\n## Example output\n\nThe following output is an example of what this command prints, using our very own\n`@moonrepo/runtime` package.\n\n```\nRUNTIMEProject: runtimeAlias: @moonrepo/runtimeSource: packages/runtimeRoot: ~/Projects/moon/packages/runtimeToolchain: nodeLanguage: typescriptStack: unknownType: libraryDEPENDS ON  - types (implicit, production)INHERITS FROM  - .moon/tasks/node.ymlTASKSbuild:   packemon build --addFiles --addExports --declarationformat:   prettier --check --config ../../prettier.config.js --ignore-path ../../.prettierignore --no-error-on-unmatched-pattern .lint:   eslint --cache --cache-location ./.eslintcache --color --ext .js,.ts,.tsx --ignore-path ../../.eslintignore --exit-on-fatal-error --no-error-on-unmatched-pattern --report-unused-disable-directives .lint-fix:   eslint --cache --cache-location ./.eslintcache --color --ext .js,.ts,.tsx --ignore-path ../../.eslintignore --exit-on-fatal-error --no-error-on-unmatched-pattern --report-unused-disable-directives . --fixtest:   jest --cache --color --preset jest-preset-moon --passWithNoTeststypecheck:   tsc --buildFILE GROUPSconfigs:  - packages/runtime/*.{js,json}sources:  - packages/runtime/src/**/*  - packages/runtime/types/**/*tests:  - packages/runtime/tests/**/*\n```\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n- [`project`](/docs/config/project#project) in `moon.yml`\n\n## /docs/commands/project-graph\n\nSource: https://moonrepo.dev/docs/commands/project-graph\n\n# project-graph\n\nThe `moon project-graph [id]` (or `moon pg`) command will generate and serve a visual graph of all\nconfigured projects as nodes, with dependencies between as edges, and can also output the graph in\n[Graphviz DOT format](https://graphviz.org/doc/info/lang.html).\n\n```\n# Run the visualizer locally$ moon project-graph# Export to DOT format$ moon project-graph --dot > graph.dot\n```\n\nA project name can be passed to focus the graph to only that project and its dependencies. For\nexample, `moon project-graph app`.\n\n### Arguments\n\n- `[id]` - Optional ID or alias of a project to focus, as defined in [`projects`](/docs/config/workspace#projects).\n\n### Options\n\n- `--dependents` - Include direct dependents of the focused project.\n\n- `--dot` - Print the graph in DOT format.\n\n- `--host` - The host address. Defaults to `127.0.0.1`. v1.36.0\n\n- `--json` - Print the graph in JSON format.\n\n- `--port` - The port to bind to. Defaults to a random port. v1.36.0\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n## Example output\n\nThe following output is an example of the graph in DOT format.\n\n```\ndigraph {    0 [ label=\"(workspace)\" style=filled, shape=circle, fillcolor=black, fontcolor=white]    1 [ label=\"runtime\" style=filled, shape=circle, fillcolor=gray, fontcolor=black]    2 [ label=\"website\" style=filled, shape=circle, fillcolor=gray, fontcolor=black]    0 -> 1 [ arrowhead=none]    0 -> 2 [ arrowhead=none]}\n```\n\n## /docs/commands/projects\n\nSource: https://moonrepo.dev/docs/commands/projects\n\n# projects\n\nv2.0.0\n\nThe `moon projects` command will list all projects configured in the workspace as a table of\ninformation.\n\n```\nProject          Source                    Stack             Layer             Toolchains                                Description                                                   types            packages/types            frontend          library           javascript, node, typescript, yarn                                                                      website          website                   frontend          application       javascript, node, typescript, yarn        A static website powered by Docusaurus.                       \n```\n\ninfo\n\nUse [`moon query projects`](/docs/commands/query/projects) for advanced querying and filtering of projects.\n\n### Options\n\n- `--json` - Print the projects as JSON.\n\n## /docs/commands/query\n\nSource: https://moonrepo.dev/docs/commands/query\n\n- [Home](/)\n- [Commands](/docs/commands)\n- [query](/docs/commands/query)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# query\n\nQuery information about moon, its projects, their tasks, the environment, the pipeline, and many other aspects of the workspace.\n\n[ affectedUse the moon query affected sub-command to query for all affected projects and tasks based on the](/docs/commands/query/affected)\n\n[ changed-filesUse the moon query changed-files sub-command to query for a list of changed files (added,](/docs/commands/query/changed-files)\n\n[ projectsUse the moon query projects sub-command to query information about all projects in the project](/docs/commands/query/projects)\n\n[ tasksUse the moon query tasks sub-command to query task information for all projects in the project](/docs/commands/query/tasks)\n\n[project-graph](/docs/commands/project-graph)\n\n[affected](/docs/commands/query/affected)\n\n## /docs/commands/query/affected\n\nSource: https://moonrepo.dev/docs/commands/query/affected\n\n# query affected\n\nv2.0.0\n\nUse the `moon query affected` sub-command to query for all affected projects and tasks based on the\nstate of the workspace and VCS.\n\n```\n# Return affected$ moon query affected# Return affected including dependency relationships$ moon query affected --upstream deep\n```\n\nThis will output a map of projects and tasks as JSON. The output has the following structure:\n\n```\n{\tprojects: Record,\ttasks: Record,}\n```\n\n### Options\n\n- `--downstream` - Include downstream dependents. Supports \"none\" (default), \"direct\", \"deep\".\n\n- `--upstream` - Include upstream dependencies. Supports \"none\", \"direct\", \"deep\" (default).\n\n## /docs/commands/query/changed-files\n\nSource: https://moonrepo.dev/docs/commands/query/changed-files\n\n# query changed-files\n\nUse the `moon query changed-files` sub-command to query for a list of changed files (added,\nmodified, deleted, etc) using the current VCS state. These are the same queries that\n[`moon ci`](/docs/commands/ci) and [`moon run`](/docs/commands/run) use under the hood.\n\nTouches files are determined using the following logic:\n\n- If `--defaultBranch` is provided, and the current branch is the [`vcs.defaultBranch`](/docs/config/workspace#defaultbranch), then compare against the previous revision of the default branch (`HEAD~1`). This is what [continuous integration](/docs/guides/ci) uses.\n\n- If `--local` is provided, changed files are based on your local index only (`git status`).\n\n- Otherwise, then compare the defined base (`--base`) against head (`--head`).\n\n```\n# Return all files$ moon query changed-files# Return deleted files$ moon query changed-files --status deleted# Return all files between 2 revisions$ moon query changed-files --base  --head\n```\n\nThis will output a list of workspace relative files as JSON. The output has the following structure:\n\n```\n{\tfiles: string[],\toptions: QueryOptions,}\n```\n\n### Options\n\n- `--default-branch` - When on the default branch, compare against the previous revision.\n\n- `--base ` - Base branch, commit, or revision to compare against. Defaults to [`vcs.defaultBranch`](/docs/config/workspace#defaultbranch).\n\n- `--head ` - Current branch, commit, or revision to compare with. Defaults to `HEAD`.\n\n- `--local` - Gather files from the local state instead of remote.\n\n- `--remote` - Gather files from the remote state instead of local.\n\n- `--status ` - Filter files based on a changed status. Can be passed multiple times. Types: `all` (default), `added`, `deleted`, `modified`, `staged`, `unstaged`, `untracked`\n\n### Configuration\n\n- [`vcs`](/docs/config/workspace#vcs) in `.moon/workspace.yml`\n\n## /docs/commands/query/projects\n\nSource: https://moonrepo.dev/docs/commands/query/projects\n\n# query projects\n\nUse the `moon query projects` sub-command to query information about all projects in the project\ngraph. The project list can be filtered by passing a [query statement](/docs/concepts/query-lang) as\nan argument, or by using [options](#options) arguments.\n\n```\n# Find all projects$ moon query projects# Find all projects with an id that matches \"react\"$ moon query projects --id react$ moon query projects \"project~react\"# Find all projects with a `lint` or `build` task$ moon query projects --tasks \"lint|build\"$ moon query projects \"task=[lint,build]\"\n```\n\nThis will output a list of projects as JSON. The output has the following structure:\n\n```\n{\tprojects: Project[],\toptions: QueryOptions,}\n```\n\n### Affected projects\n\nThis command can also be used to query for affected projects, based on the state of the VCS working\ntree. For advanced control, you can also pass the results of `moon query changed-files` to stdin.\n\n```\n# Find all affected projects$ moon query projects --affected# Find all affected projects using the results of another query$ moon query changed-files | moon query projects --affected\n```\n\n### Arguments\n\n- `[query]` - An optional [query statement](/docs/concepts/query-lang) to filter projects with. When provided, all [filter options](#filters) are ignored. v1.4.0\n\n### Options\n\n#### Affected\n\n- `--affected` - Filter projects that have been affected by touched files.\n\n- `--downstream` - Include downstream dependents of queried projects. Supports \"none\" (default), \"direct\", \"deep\". v1.29.0\n\n- `--upstream` - Include upstream dependencies of queried projects. Supports \"none\", \"direct\", \"deep\" (default). v1.29.0\n\n#### Filters\n\nAll option values are case-insensitive regex patterns.\n\n- `--alias ` - Filter projects that match this alias.\n\n- `--id ` - Filter projects that match this ID/name.\n\n- `--language ` - Filter projects of this programming language.\n\n- `--layer ` - Filter project of this layer.\n\n- `--source ` - Filter projects that match this source path.\n\n- `--stack ` - Filter projects of the tech stack.\n\n- `--tags ` - Filter projects that have the following tags.\n\n- `--tasks ` - Filter projects that have the following tasks.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n## /docs/commands/query/tasks\n\nSource: https://moonrepo.dev/docs/commands/query/tasks\n\n# query tasks\n\nUse the `moon query tasks` sub-command to query task information for all projects in the project\ngraph. The tasks list can be filtered by passing a [query statement](/docs/concepts/query-lang) as\nan argument, or by using [options](#options) arguments.\n\n```\n# Find all tasks grouped by project$ moon query tasks# Find all tasks from projects with an id that matches \"react\"$ moon query tasks --id react$ moon query tasks \"task~react\"\n```\n\nThis will output a list of projects as JSON. The output has the following structure:\n\n```\n{\ttasks: Record>,\toptions: QueryOptions,}\n```\n\n### Arguments\n\n- `[query]` - An optional [query statement](/docs/concepts/query-lang) to filter projects with. When provided, all [filter options](#filters) are ignored. v1.4.0\n\n### Options\n\n#### Affected\n\n- `--affected` - Filter tasks that have been affected by touched files.\n\n- `--downstream` - Include downstream dependents of queried tasks. Supports \"none\" (default), \"direct\", \"deep\". v1.30.0\n\n- `--upstream` - Include upstream dependencies of queried tasks. Supports \"none\", \"direct\", \"deep\" (default). v1.30.0\n\n#### Filtersv1.30.0\n\nAll option values are case-insensitive regex patterns.\n\n- `--command ` - Filter tasks that match this command.\n\n- `--id ` - Filter tasks that match this ID.\n\n- `--project ` - Filter tasks that belong to this project.\n\n- `--script ` - Filter tasks that match this script.\n\n- `--toolchain ` - Filter tasks of this toolchain. v1.31.0\n\n- `--type ` - Filter tasks of this type.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n- [`tasks`](/docs/config/project#tasks) in `moon.yml`\n\n## /docs/commands/run\n\nSource: https://moonrepo.dev/docs/commands/run\n\n# run\n\nThe `moon run` (or `moon r`) command will run one or many [targets](/docs/concepts/target) and all of\nits dependencies in topological order. Each run will incrementally cache each task, improving speed\nand development times... over time. View the official [Run a task](/docs/run-task) and\n[Cheat sheet](/docs/cheat-sheet#tasks) articles for more information!\n\n```\n# Run `lint` in project `app`$ moon run app:lint# Run `dev` in project `client` and `server`$ moon run client:dev server:dev# Run `test` in all projects$ moon run :test# Run `test` in all projects with tag `frontend`$ moon run '#frontend:test'# Run `format` in default project$ moon run format# Run `build` in projects matching the query$ moon run :build --query \"language=javascript && projectLayer=library\"\n```\n\ninfo\n\nThe default behavior for `moon run` is to \"fail fast\", meaning that any failed task will immediately\nabort execution of the entire action graph. Use `moon exec --on-failure continue` for alternative\nbehavior.\n\n### Arguments\n\n- `...` - [Targets](/docs/concepts/target) or project relative tasks to run.\n\n- `[-- ]` - Additional arguments to [pass to the underlying command](/docs/run-task#passing-arguments-to-the-underlying-command).\n\n### Options\n\nInherits all options from [`moon exec`](/docs/commands/exec) except for `--on-failure`.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n- [`tasks`](/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n\n- [`tasks`](/docs/config/project#tasks) in `moon.yml`\n\n## /docs/commands/setup\n\nSource: https://moonrepo.dev/docs/commands/setup\n\n# setup\n\nThe `moon setup` command can be used to setup the developer and pipeline environments. It achieves\nthis by downloading and installing all configured tools into the toolchain.\n\n```\n$ moon setup\n```\n\ninfo\n\nThis command should rarely be used, as the environment is automatically setup when running other\ncommands, like detecting affected projects, running a task, or generating a build artifact.\n\n### Configuration\n\n- [`*`](/docs/config/toolchain) in `.moon/toolchains.yml`\n\n## /docs/commands/sync\n\nSource: https://moonrepo.dev/docs/commands/sync\n\n- [Home](/)\n- [Commands](/docs/commands)\n- [sync](/docs/commands/sync)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# sync\n\nOperations for syncing the workspace to a healthy state.\n\n[ code-ownersThe moon sync code-owners command will manually sync code owners, by aggregating all owners from](/docs/commands/sync/code-owners)\n\n[ config-schemasThe moon sync config-schemas command will manually generate JSON schemas to .moon/cache/schemas](/docs/commands/sync/config-schemas)\n\n[ projectsThe moon sync projects command will force sync all projects in the workspace to help achieve a](/docs/commands/sync/projects)\n\n[ vcs-hooksThe moon sync vcs-hooks command will manually sync hooks for the configured](/docs/commands/sync/vcs-hooks)\n\n[setup](/docs/commands/setup)\n\n[code-owners](/docs/commands/sync/code-owners)\n\n## /docs/commands/sync/code-owners\n\nSource: https://moonrepo.dev/docs/commands/sync/code-owners\n\n# sync code-owners\n\nv1.8.0\n\nThe `moon sync code-owners` command will manually sync code owners, by aggregating all owners from\nprojects, and generating a single `CODEOWNERS` file. Refer to the official\n[code owners](/docs/guides/codeowners) guide for more information.\n\n```\n$ moon sync code-owners\n```\n\n### Options\n\n- `--clean` - Clean and remove previously generated file.\n\n- `--force` - Bypass cache and force create file.\n\n### Configuration\n\n- [`codeowners`](/docs/config/workspace#codeowners) in `.moon/workspace.yml`\n\n- [`owners`](/docs/config/project#owners) in `moon.yml`\n\n## /docs/commands/sync/config-schemas\n\nSource: https://moonrepo.dev/docs/commands/sync/config-schemas\n\n# sync config-schemas\n\nv1.27.0\n\nThe `moon sync config-schemas` command will manually generate JSON schemas to `.moon/cache/schemas`\nfor all our different configuration files.\n\n```\n$ moon sync config-schemas\n```\n\n### Options\n\n- `--force` - Bypass cache and force create files.\n\n## /docs/commands/sync/projects\n\nSource: https://moonrepo.dev/docs/commands/sync/projects\n\n# sync projects\n\nv1.8.0\n\nThe `moon sync projects` command will force sync all projects in the workspace to help achieve a\n[healthy repository state](/docs/faq#what-should-be-considered-the-source-of-truth). This applies\nthe following:\n\n- Ensures cross-project dependencies are linked based on [`dependsOn`](/docs/config/project#dependson).\n\n- Ensures language specific configuration files are present and accurate (`package.json`, `tsconfig.json`, etc).\n\n- Ensures root configuration and project configuration are in sync.\n\n- Any additional language specific semantics that may be required.\n\n```\n$ moon sync projects\n```\n\nThis command should rarely be ran, as [`moon run`](/docs/commands/run) will sync affected projects\nautomatically! However, when migrating or refactoring, manual syncing may be necessary.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n## /docs/commands/sync/vcs-hooks\n\nSource: https://moonrepo.dev/docs/commands/sync/vcs-hooks\n\n# sync vcs-hooks\n\nv1.9.0\n\nThe `moon sync vcs-hooks` command will manually sync hooks for the configured\n[VCS](/docs/config/workspace#vcs), by generating and referencing hook scripts from the\n[`vcs.hooks`](/docs/config/workspace#hooks) setting. Refer to the official\n[VCS hooks](/docs/guides/vcs-hooks) guide for more information.\n\n```\n$ moon sync vcs-hooks\n```\n\n### Options\n\n- `--clean` - Clean and remove previously generated hooks.\n\n- `--force` - Bypass cache and force create hooks.\n\n### Configuration\n\n- [`vcs.hooks`](/docs/config/workspace#hooks) in `.moon/workspace.yml`\n\n## /docs/commands/task\n\nSource: https://moonrepo.dev/docs/commands/task\n\n# task\n\nv1.1.0\n\nThe `moon task [target]` (or `moon t`) command will display information about a task that has been\nconfigured and exists within a project. If a task does not exist, the program will return with a 1\nexit code.\n\n```\n$ moon task web:build\n```\n\n### Arguments\n\n- `[target]` - Fully qualified project + task target.\n\n### Options\n\n- `--json` - Print the task and its configuration as JSON.\n\n## Example output\n\nThe following output is an example of what this command prints, using our very own\n`@moonrepo/runtime` package.\n\n```\nRUNTIME:BUILDTask: buildProject: runtimeToolchain: nodeType: buildPROCESSCommand: packemon build --addFiles --addExports --declarationEnvironment variables:  - NODE_ENV = productionWorking directory: ~/Projects/moon/packages/runtimeRuns dependencies: ConcurrentlyRuns in CI: YesDEPENDS ON  - types:buildINHERITS FROM  - .moon/tasks/node.ymlINPUTS  - .moon/*.yml  - .moon/tasks/node.yml  - packages/runtime/package.json  - packages/runtime/src/**/*  - packages/runtime/tsconfig.*.json  - packages/runtime/tsconfig.json  - packages/runtime/types/**/*  - tsconfig.options.jsonOUTPUTS  - packages/runtime/cjs\n```\n\n### Configuration\n\n- [`tasks`](/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n\n- [`tasks`](/docs/config/project#tasks) in `moon.yml`\n\n## /docs/commands/task-graph\n\nSource: https://moonrepo.dev/docs/commands/task-graph\n\n# task-graph\n\nv1.30.0\n\nThe `moon task-graph [target]` (or `moon tg`) command will generate and serve a visual graph of all\nconfigured tasks as nodes, with dependencies between as edges, and can also output the graph in\n[Graphviz DOT format](https://graphviz.org/doc/info/lang.html).\n\n```\n# Run the visualizer locally$ moon task-graph# Export to DOT format$ moon task-graph --dot > graph.dot\n```\n\nA task target can be passed to focus the graph to only that task and its dependencies. For\nexample, `moon task-graph app:build`.\n\n### Arguments\n\n- `[target]` - Optional target of task to focus.\n\n### Options\n\n- `--dependents` - Include direct dependents of the focused task.\n\n- `--dot` - Print the graph in DOT format.\n\n- `--host` - The host address. Defaults to `127.0.0.1`. v1.36.0\n\n- `--json` - Print the graph in JSON format.\n\n- `--port` - The port to bind to. Defaults to a random port. v1.36.0\n\n## Example output\n\nThe following output is an example of the graph in DOT format.\n\n```\ndigraph {    0 [ label=\"types:build\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    1 [ label=\"runtime:build\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    2 [ label=\"website:build\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    1 -> 0 [ label=\"required\" arrowhead=box, arrowtail=box]    2 -> 1 [ label=\"required\" arrowhead=box, arrowtail=box]    2 -> 0 [ label=\"required\" arrowhead=box, arrowtail=box]}\n```\n\n## /docs/commands/tasks\n\nSource: https://moonrepo.dev/docs/commands/tasks\n\n# tasks\n\nv2.0.0\n\nThe `moon tasks` command will list all tasks available in the workspace as a table of information.\n\n```\nTask                          Command          Type        Preset      Toolchains                                Description                                                           website:build                 docusaurus       build                   typescript, javascript, node, yarn        Builds the Docusaurus app.                                            website:format                prettier         test                    javascript, node, yarn                                                                                          website:format-write          prettier         test                    javascript, node, yarn                                                                                          website:lint                  eslint           test                    javascript, node, yarn                                                                                          website:lint-fix              eslint           test                    javascript, node, yarn                                                                                          website:start                 docusaurus       run         server      typescript, javascript, node, yarn                                                                              website:test                  jest             test                    javascript, node, yarn                                                                                          website:typecheck             tsc              test                    typescript, javascript, node, yarn                                                                              \n```\n\ninfo\n\nUse [`moon query tasks`](/docs/commands/query/tasks) for advanced querying and filtering of tasks.\n\n### Arguments\n\n- `[id]` - Filter tasks to a specific project ID.\n\n### Options\n\n- `--json` - Print the projects as JSON.\n\n## /docs/commands/teardown\n\nSource: https://moonrepo.dev/docs/commands/teardown\n\n# teardown\n\nThe `moon teardown` command, as its name infers, will teardown and clean the current environment,\nopposite the [`setup`](/docs/commands/setup) command. It achieves this by doing the following:\n\n- Uninstalling all configured tools in the toolchain.\n\n- Removing any download or temporary files/folders.\n\n```\n$ moon teardown\n```\n\n### Configuration\n\n- [`*`](/docs/config/toolchain) in `.moon/toolchains.yml`\n\n## /docs/commands/template\n\nSource: https://moonrepo.dev/docs/commands/template\n\n# template\n\nv2.0.0\n\nThe `moon template [id]` command will display information about a template, its files, and\nvariables.\n\n```\nTemplate title   Some description of the template and its files.About   Template: package  Location: /templates/package  Destination: packages/[name | kebab_case]  Extends:   Assets:   Files:    - package.jsonVariables   name: string\n```\n\n### Arguments\n\n- `[id]` - The template ID.\n\n### Options\n\n- `--json` - Print the template as JSON.\n\n## /docs/commands/templates\n\nSource: https://moonrepo.dev/docs/commands/templates\n\n# templates\n\nv1.24.0\n\nThe `moon templates` command will list all templates available for [code generation](/docs/commands/generate).\nThis list will include the template title, description, default destination, where it's source files\nare located, and more.\n\n```\n$ moon templates\n```\n\n### Options\n\n- `--filter` - Filter templates by a search term.\n\n- `--json` - Print templates in JSON format.\n\n### Configuration\n\n- [`generator`](/docs/config/workspace#generator) in `.moon/workspace.yml`\n\n## /docs/commands/toolchain\n\nSource: https://moonrepo.dev/docs/commands/toolchain\n\n- [Home](/)\n- [Commands](/docs/commands)\n- [toolchain](/docs/commands/toolchain)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# toolchain\n\nManage toolchain plugins.\n\n[ addThe moon toolchain add [plugin] command will add a toolchain to the workspace by injecting a](/docs/commands/toolchain/add)\n\n[ infoThe moon toolchain info [plugin] command will display detailed information about a toolchain,](/docs/commands/toolchain/info)\n\n[templates](/docs/commands/templates)\n\n[add](/docs/commands/toolchain/add)\n\n## /docs/commands/toolchain/add\n\nSource: https://moonrepo.dev/docs/commands/toolchain/add\n\n# toolchain add\n\nv1.38.0\n\nThe `moon toolchain add  [plugin]` command will add a toolchain to the workspace by injecting a\nconfiguration block into `.moon/toolchains.yml`. To do this, the command will download the WASM\nplugin, extract information, and call initialize functions.\n\nFor built-in toolchains, the [plugin locator](/docs/guides/wasm-plugins#configuring-plugin-locations) argument is optional, and will be derived\nfrom the identifier.\n\n```\n$ moon toolchain add typescript\n```\n\nFor third-party toolchains, the [plugin locator](/docs/guides/wasm-plugins#configuring-plugin-locations) argument is required, and must point to\nthe WASM plugin.\n\n```\n$ moon toolchain add custom https://example.com/path/to/plugin.wasm\n```\n\n### Arguments\n\n- `` - ID of the toolchain to use.\n\n- `[plugin]` - Optional [plugin locator](/docs/guides/wasm-plugins#configuring-plugin-locations) for third-party toolchains.\n\n### Options\n\n- `--minimal` - Generate minimal configurations and sane defaults.\n\n- `--yes` - Skip all prompts and enables tools based on file detection.\n\n## /docs/commands/toolchain/info\n\nSource: https://moonrepo.dev/docs/commands/toolchain/info\n\n# toolchain info\n\nv1.38.0\n\nThe `moon toolchain info  [plugin]` command will display detailed information about a toolchain,\nlike what files are scanned, what configuration settings are available, and what tier APIs are\nsupported. To do this, the command will download the WASM plugin, extract information, and call\nspecific functions.\n\nFor built-in toolchains, the [plugin locator][locator] argument is optional, and will be derived\nfrom the identifier.\n\n```\n$ moon toolchain info typescript\n```\n\nFor third-party toolchains, the [plugin locator][locator] argument is required, and must point to\nthe WASM plugin.\n\n```\n$ moon toolchain info custom https://example.com/path/to/plugin.wasm\n```\n\n### Arguments\n\n- `` - ID of the toolchain to view.\n\n- `[plugin]` - Optional [plugin locator][locator] for third-party toolchains.\n\n## Example output\n\n```\nToolchain   Provides sync operations that keep tsconfig.json's in a healthy state.  ID: typescript  Name: TypeScript  Version: 0.2.0Configuration   createMissingConfig: bool  When `syncProjectReferences` is enabled, will create a `tsconfig.json`  in referenced projects if it does not exist.  includeProjectReferenceSources: bool  Appends sources of project reference to `include` in `tsconfig.json`,  for each project.  includeSharedTypes: bool  Appends shared types to `include` in `tsconfig.json`, for each project.  projectConfigFileName: string  Name of the `tsconfig.json` file within each project.  root: string  The relative root to the TypeScript root. Primarily used for  resolving project references.  rootConfigFileName: string  Name of the `tsconfig.json` file at the workspace root.  rootOptionsConfigFileName: string  Name of the shared compiler options `tsconfig.json` file  at the workspace root.  routeOutDirToCache: bool  Updates and routes `outDir` in `tsconfig.json` to moon's cache,  for each project.  syncProjectReferences: bool  Syncs all project dependencies as `references` in `tsconfig.json`,  for each project.  syncProjectReferencesToPaths: bool  Syncs all project dependencies as `paths` in `tsconfig.json`,  for each project.Tier 1 - Usage detection   Config files: tsconfig.json, tsconfig.*.json, *.tsconfig.json, .tsbuildinfo, *.tsbuildinfo  Executable names: tsc, tsserver  APIs:     register_toolchain (required)     define_toolchain_config     initialize_toolchain     detect_version_files     parse_version_file     define_docker_metadata     scaffold_docker     prune_docker     sync_project     sync_workspaceTier 2 - Ecosystem integration   APIs:     extend_project_graph     extend_task_command     extend_task_script     locate_dependencies_root     install_dependencies     hash_task_contents     parse_lock     parse_manifest     setup_environmentTier 3 - Tool management   APIs:     register_tool (required)     load_versions     resolve_version     download_prebuilt (required)     unpack_archive     locate_executables (required)     setup_toolchain     teardown_toolchain\n```\n\n## /docs/commands/upgrade\n\nSource: https://moonrepo.dev/docs/commands/upgrade\n\n# upgrade\n\nThe `moon upgrade` command can be used to upgrade your current moon binary (if installed globally)\nto the latest version.\n\n```\n$ moon upgrade\n```\n\ncaution\n\nThis command will only work if moon was installed in the `~/.moon` directory, using our official\n[installation script](/docs/install). If installed through Node.js, you'll need to upgrade manually.\n\n## /docs/comparison\n\nSource: https://moonrepo.dev/docs/comparison\n\n# Feature comparison\n\nThe following comparisons are not an exhaustive list of features, and may be inaccurate or out of\ndate, but represent a good starting point for investigation. If something is not correct, please\n[create an issue](https://github.com/moonrepo/moon/issues) or\n[submit a patch](https://github.com/moonrepo/moon/blob/master/website/src/components/ComparisonTable.tsx).\n\nBefore diving into our comparisons below, we highly suggest reading\n[monorepo.tools](https://monorepo.tools/) for a deeper insight into monorepos and available tooling.\nIt's a great resource for learning about the current state of things and the ecosystem.\n\ninfo\n\nLooking to migrate from Nx or Turborepo to moon? Use our\n[`moon ext migrate-nx`](/docs/guides/extensions#migrate-nx) or\n[`moon ext migrate-turborepo`](/docs/guides/extensions#migrate-turborepo) commands for a (somewhat)\nseamless migration!\n\n## Unique features\n\nAlthough moon is still in its infancy, we provide an array of powerful features that other frontend\ncentric task runners do not, such as...\n\n- [Integrated toolchain](/docs/concepts/toolchain) - moon manages its own version of programming languages and dependency managers behind the scenes, so that every task is executed with the exact same version, across all machines.\n\n- [Task inheritance](/docs/concepts/task-inheritance) - Instead of defining the same tasks (lint, test, etc) over and over again for every project in the monorepo, moon supports a task inheritance model where it only needs to be defined once at the top-level. Projects can then merge with, exclude, or override if need be.\n\n- [Continuous integration](/docs/guides/ci) - By default, all moon tasks will run in CI, as we want to encourage every facet of a project or repository to be continually tested and verified. This can be turned off on a per-task basis.\n\nCurious to learn more? Check out the \"[Why use moon?](/docs/)\" or \"[Features](/docs/)\" sections for more\ninformation, or these wonderful articles provided by the community:\n\n- [A review of moon + Packemon](https://azu.github.io/slide/2022/moa/moon-packemon.html) by [azu](https://twitter.com/azu_re)\n\n- [Improve repo management with moon](https://blog.logrocket.com/improve-repo-management-moon/) by [James Sinkala](https://jamesinkala.com/)\n\n## Comparison\n\n### Turborepo\n\nAt a high-level, Turborepo and moon seem very similar as they both claim to be task runners. They\nboth support incremental builds, content/smart hashing, local and remote caching1,\nparallel execution, and everything else you'd expect from a task runner. But that's where the\nsimilarities stop, because in the end, Turborepo is nothing more than a `package.json` scripts\norchestrator with a caching layer. While moon also supports this, it\n[aims to be far more](#unique-features) with a heavy focus on the developer experience.\n\nIn the next section, we'll be talking about a few key areas that we deem important to consumers. If\nyou'd prefer a more granular comparison, jump down to the [comparison tables](#comparison-tables).\n\n#### Configuration\n\nTurborepo only supports the Node.js ecosystem, so implicitly uses a conventions based approach. It provides very little to no configuration for customizing Turborepo to your needs.\n\nmoon is language agnostic, with initial support for Node.js and its ecosystem. Because of this, moon provides a ton of configuration for customizing moon to your needs. It prefers a configuration over conventions approach, as every repository is different.\n\n#### Projects\n\nTurborepo infers projects from `package.json` workspaces, and does not support non-JavaScript based projects.\n\nmoon requires projects to be defined in `.moon/workspace.yml`, and supports any programming language2.\n\n#### Tasks\n\nTurborepo requires `package.json` scripts to be defined for every project. This results in the same scripts being repeated constantly.\n\nmoon avoids this overhead by using [task inheritance](#unique-features). No more repetition.\n\n#### CI\n\nEach pipeline in `turbo.json` must be individually ran as a step in CI. Scripts not configured as pipeline tasks are never ran.\n\nmoon runs every task automatically using `moon ci`, which also supports parallelism/sharding.\n\n#### Long-term\n\nTurborepo is in the process of being rewritten in Rust, with its codebase being shared and coupled with the new Turbopack library, a Rust based bundler. Outside of this, there are no publicly available plans for Turborepo's future.\n\nmoon plans to be so much more than a task runner, with one such facet being a repository management tool. This includes code ownership, dependency management and auditing, repository linting, in-repo secrets, and anything else we deem viable. We also plan to support additional languages as first-class citizens within our toolchain.\n\n- Turborepo remote caching is powered by Vercel. moon provides its own paid service.\n\n- moon projects may run commands for any language, but not all languages are supported in the toolchain.\n\n### Lerna\n\nLerna was a fantastic tool that helped the JavaScript ecosystem grow and excelled at package\nversioning and publishing (and still does), but it offered a very rudimentary task runner. While\nLerna was able to run scripts in parallel, it wasn't the most efficient, as it did not support\ncaching, hashing, or performant scheduling.\n\nHowever, the reason Lerna is not compared in-depth, is that Lerna was unowned and unmaintained for\nquite some time, and has recently fallen under the Nx umbrella. Lerna is basically Nx lite now.\n\n## Comparison tables\n\n Supported  Partially supported  Similarly supported  Not supported\n\n### Workspace\n\nmoon (11) nx (11) turborepo (8)\n\nCore/CLI written in Rust Node.js & Rust (for hot paths) Rust / Go\n\nPlugins written in WASM (any compatible language) TypeScript \n\nWorkspace configured with `.moon/workspace.yml` `nx.json` `turbo.json`\n\nProject list configured in `.moon/workspace.yml` `workspace.json` / `package.json` workspaces `package.json` workspaces\n\nRepo / folder structure loose loose loose\n\nIgnore file support  via `hasher.ignorePatterns`  .nxignore  via `--ignore`\n\nSupports dependencies inherited by all tasks  via `implicitDeps`  via `targetDefaults` \n\nSupports inputs inherited by all tasks  via `implicitInputs`  via `implicitDependencies`  via `globalDependencies`\n\nSupports tasks inherited by all projects   via `plugins` \n\nIntegrates with a version control system  git  git  git\n\nSupports scaffolding / generators   \n\n### Toolchain\n\nmoon (6) nx (2) turborepo (2)\n\nSupported languages in task runner All languages available on `PATH` All languages via plugins. OOTB TS/JS, existing plugins for Rust, Go, Dotnet and more JavaScriptTypeScript via `package.json` scripts\n\nSupported dependency managers npm, pnpm, yarn, bun npm, pnpm, yarn npm, pnpm, yarn\n\nSupported toolchain languages (automatic dev envs) Bun, Deno, Node.js, Rust  \n\nHas a built-in toolchain   \n\nDownloads and installs languages (when applicable)   \n\nConfigures explicit language/dependency manager versions   \n\n### Projects\n\nmoon (8) nx (5) turborepo (2)\n\nDependencies on other projects  implicit from `package.json` or explicit in `moon.yml`  implicit from `package.json` or explicit in `project.json` and code imports/exports  implicit from `package.json`\n\nOwnership metadata   \n\nPrimary programming language   \n\nProject type (app, lib, etc)  app, lib, tool, automation, config, scaffold  app, lib \n\nProject tech stack  frontend, backend, infra, systems  \n\nProject-level file groups   via `namedInputs` \n\nProject-level tasks   \n\nTags and scopes (boundaries)  native for all languages  boundaries via ESLint (TS and JS), tags for filtering for all languages \n\n### Tasks\n\nmoon (24) nx (24) turborepo (17)\n\nKnown as tasks targets tasks\n\nDefines tasks in `moon.yml` or `package.json` scripts `nx.json`, `project.json` or `package.json` scripts `package.json` scripts\n\nRun a single task with `moon run project:task` `nx target project` or `nx run project:target` `turbo run task --filter=project`\n\nRun multiple tasks with `moon run :task` or `moon run a:task b:task` or `moon check` `nx run-many -t task1 task2 task3` `turbo run task` or `turbo run a b c`\n\nRun tasks based on a query/filter `moon run :task --query \"...\"` `nx run-many -t task -p \"tag:..\" -p \"dir/*\" -p \"name*\" -p \"!negation\"` \n\nCan define tasks globally  with `.moon/tasks/all.yml`  with `targetDefaults` \n\nMerges or overrides global tasks   \n\nRuns a command with args    within the script\n\nRuns commands from project or workspace root current working directory, or wherever desired via config project root\n\nSupports pipes, redirects, etc, in configured tasks  encapsulated in a file  within the executor or script  within the script\n\nDependencies on other tasks  via `deps`  via `dependsOn`  via `dependsOn`\n\nCan provide extra params for task dependencies   \n\nCan mark a task dependency as optional  via `optional`  \n\nCan depend on arbitrary or unrelated tasks    dependent projects only\n\nRuns task dependencies in parallel   \n\nCan run task dependencies in serial   via `parallel=1`  via `concurrency=1`\n\nFile groups   via `namedInputs` \n\nEnvironment variables  via `env`, `envFile`  automatically via `.env` files and/or inherited from shell  within the script\n\nInputs  files, globs, env vars  files, globs, env vars, runtime  files, globs\n\nOutputs  files, globs  files, globs  files, globs\n\nOutput logging style  via `outputStyle`  via `--output-style`  via `outputMode`\n\nCustom hash inputs   via `runtime` inputs  via `globalDependencies`\n\nToken substitution  token functions and variable syntax  `{workspaceRoot}`, `{projectRoot}`, `{projectName}`, arbitrary patterns `namedInputs` \n\nConfiguration presets  via task `extends`  via `configurations` \n\nConfigurable options   \n\n### Task runner\n\nmoon (9) nx (11) turborepo (7)\n\nKnown as action pipeline task runner pipeline\n\nGenerates a dependency graph   \n\nRuns in topological order   \n\nAutomatically retries failed tasks   when flakiness detected on Nx Cloud \n\nCaches task outputs via a unique hash   \n\nCan customize the underlying runner   \n\nCan profile running tasks  cpu, heap  cpu  cpu\n\nCan generate run reports   free in Nx Cloud & GitHub App Comment \n\nContinuous integration (CI) support   \n\nContinuous deployment (CD) support   via `nx release` \n\nRemote / cloud caching and syncing  with Bazel REAPI (free / paid)  with nx.app Nx Cloud (free / paid)  requires a Vercel account (free)\n\n### Generator\n\nmoon (14) nx (14) turborepo (11)\n\nKnown as generator generator generator\n\nTemplates are configured with a schema  via `template.yml`  \n\nTemplate file extensions (optional)  .tera, .twig  fully under user control, built in utility for .ejs templates  .hbs\n\nTemplate files support frontmatter   fully under user control \n\nCreates/copies files to destination   \n\nUpdates/merges with existing files  JSON/YAML only  via TypeScript/JavaScript plugins \n\nRenders with a template engine  via Tera  fully under user control, built in utility for .ejs templates  via Handlebars\n\nVariable interpolation in file content   \n\nVariable interpolation in file paths   \n\nCan define variable values via interactive prompts   using JSON schema \n\nCan define variable values via command line args   using JSON schema \n\nSupports dry runs   \n\nSupports render helpers, filters, and built-ins   \n\nGenerators can compose other generators  via `extends`  fully under user control, author in TypeScript/JavaScript  using JavaScript\n\n### Other systems\n\nmoon (6) nx (0) turborepo (1)\n\nCan send webhooks for critical pipeline events   \n\nGenerates run reports with granular stats/metrics   \n\nCan define and manage code owners   \n\nCan generate a `CODEOWNERS` file   \n\nCan define and manage VCS (git) hooks   \n\nSupports git worktrees   \n\n### JavaScript ecosystem\n\nmoon (10) nx (1) turborepo (0)\n\nWill automatically install node modules when lockfile changes   \n\nCan automatically dedupe when lockfile changes   \n\nCan alias `package.json` names for projects   \n\nCan add `engines` constraint to root `package.json`   \n\nCan sync version manager configs (`.nvmrc`, etc)   \n\nCan sync cross-project dependencies to `package.json`   \n\nCan sync project references to applicable `tsconfig.json`   \n\nCan auto-create missing `tsconfig.json`   \n\nCan sync dependencies as `paths` to `tsconfig.json`   \n\nCan route `outDir` to a shared cached in `tsconfig.json`   \n\n### Docker integration\n\nmoon (3) nx (2) turborepo (2)\n\nEfficient scaffolding for Dockerfile layer caching   via custom generator \n\nAutomatic production-only dependency installation   generated automatically by first party plugin \n\nEnvironment pruning to reduce image/container sizes   \n\n## /docs/concepts\n\nSource: https://moonrepo.dev/docs/concepts\n\n- [Home](/)\n- [Concepts](/docs/concepts)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Concepts\n\n[ Cachemoon's able to achieve high performance and blazing speeds by implementing a cache that's powered by](/docs/concepts/cache)\n\n[ File groupsFile groups are a mechanism for grouping similar types of files and environment variables within a](/docs/concepts/file-group)\n\n[ File patternsGlobs](/docs/concepts/file-pattern)\n\n[ Query languagemoon supports an integrated query language, known as MQL, that can be used to filter and select](/docs/concepts/query-lang)\n\n[ ProjectsA project is a library, application, package, binary, tool, etc, that contains source files, test](/docs/concepts/project)\n\n[ TargetsA target is a compound identifier that pairs a scope to a task,](/docs/concepts/target)\n\n[ TasksTasks are commands that are ran in the context of a project. Underneath the hood, a](/docs/concepts/task)\n\n[ Task inheritanceUnlike other task runners that require the same tasks to be repeatedly defined for every project,](/docs/concepts/task-inheritance)\n\n[ TokensTokens are variables and functions that can be used by command,](/docs/concepts/token)\n\n[ ToolchainThe toolchain is an internal layer for downloading, installing, and managing tools (languages,](/docs/concepts/toolchain)\n\n[ WorkspaceA workspace is a directory that contains projects, manages a toolchain,](/docs/concepts/workspace)\n\n[Migrate to moon](/docs/migrate-to-moon)\n\n[Cache](/docs/concepts/cache)\n\n## /docs/concepts/cache\n\nSource: https://moonrepo.dev/docs/concepts/cache\n\n# Cache\n\nmoon's able to achieve high performance and blazing speeds by implementing a cache that's powered by\nour own unique smart hashing layer. All cache is stored in `.moon/cache`, relative from the\nworkspace root (be sure to git ignore this folder).\n\n## Hashing\n\nIncremental builds are possible through a concept known as hashing, where in multiple sources are\naggregated to generate a unique hash. In the context of moon, each time a target is ran we generate\na hash, and if this hash already exists we abort early (cache hit), otherwise we continue the run\n(cache miss).\n\nThe tiniest change may trigger a different hash, for example, changing a line of code (when an\ninput), or updating a package version, so don't worry if you see a lot of hashes.\n\nOur smart hashing currently takes the following sources into account:\n\n- Command (`command`) being ran and its arguments (`args`).\n\n- Input sources (`inputs`).\n\n- Output targets (`outputs`).\n\n- Environment variables (`env`).\n\n- Dependencies between projects (`dependsOn`) and tasks (`deps`).\n\n- For Deno tasks: Deno version.\n\n- `deno.json`/`deps.ts` imports, import maps, and scopes.\n\n- `tsconfig.json` compiler options (when applicable).\n\n- For Bun and Node.js tasks: Bun/Node.js version.\n\n- `package.json` dependencies (including development and peer).\n\n- `tsconfig.json` compiler options (when applicable).\n\ncaution\n\nBe aware that greedy inputs (`**/*`, the default) will include everything in the target directory\nas a source. We do our best to filter out VCS ignored files, and `outputs` for the current task, but\nfiles may slip through that you don't expect. We suggest using explicit `inputs` and routinely\nauditing the hash files for accuracy!\n\n## Archiving & hydration\n\nOn top of our hashing layer, we have another concept known as archiving, where in we create a\ntarball archive of a task's outputs and store it in `.moon/cache/outputs`. These are akin to build\nartifacts.\n\nWhen we encounter a cache hit on a hash, we trigger a mechanism known as hydration, where we\nefficiently unpack an existing tarball archive into a task's outputs. This can be understood as a\ntimeline, where every point in time will have its own hash + archive that moon can play back.\n\nFurthermore, if we receive a cache hit on the hash, and the hash is the same as the last run, and\noutputs exist, we exit early without hydrating and assume the project is already hydrated. In the\nterminal, you'll see a message for \"cached\".\n\n## File structure\n\nThe following diagram outlines our cache folder structure and why each piece exists.\n\n```\n.moon/cache/\t# Stores hash manifests of every ran task. Exists purely for debugging purposes.\thashes/\t\t# Contents includes all sources used to generate the hash.\t\t.json\t# Stores `tar.gz` archives of a task's outputs based on its generated hash.\toutputs/\t\t.tar.gz\t# State information about anything and everything within moon. Toolchain,\t# dependencies, projects, running targets, etc.\tstates/\t\t# Files at the root pertain to the entire workspace.\t\t.json\t\t# Files for a project are nested within a folder by the project name.\n/\t\t\t# Informational snapshot of the project, its tasks, and its configs.\t\t\t# Can be used at runtime by tasks that require this information.\t\t\tsnapshot.json\t\t\t/\t\t\t\t# Contents of the child process, including the exit code and\t\t\t\t# unique hash that is referenced above.\t\t\t\tlastRun.json\t\t\t\t# Outputs of last run target.\t\t\t\tstderr.log\t\t\t\tstdout.log\n```\n\n## /docs/concepts/file-group\n\nSource: https://moonrepo.dev/docs/concepts/file-group\n\n# File groups\n\nFile groups are a mechanism for grouping similar types of files and environment variables within a\nproject using [file glob patterns or literal file paths](/docs/concepts/file-pattern). These groups are then used\nby [tasks](/docs/concepts/task) to calculate functionality like cache computation, affected files since last\nchange, deterministic builds, and more.\n\n## Configuration\n\nFile groups can be configured per project through [`moon.yml`](/docs/config/project), or for many\nprojects through [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n### Token functions\n\nFile groups can be referenced in [tasks](/docs/concepts/task) using [token functions](/docs/concepts/token). For example, the\n`@group(name)` token will expand to all paths configured in the `sources` file group.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'vite build'    inputs:      - '@group(sources)'\n```\n\n## Inheritance and merging\n\nWhen a file group of the same name exists in both [configuration files](#configuration), the\nproject-level group will override the workspace-level group, and all other workspace-level groups\nwill be inherited as-is.\n\nA primary scenario in which to define file groups at the project-level is when you want to\noverride file groups defined at the workspace-level. For example, say we want to override the\n`sources` file group because our source folder is named \"lib\" and not \"src\", we would define our\nfile groups as followed.\n\n.moon/tasks/all.yml\n\n```\nfileGroups:  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*.test.*'    - '**/__tests__/**/*'\n```\n\nmoon.yml\n\n```\nfileGroups:  # Overrides global  sources:    - 'lib/**/*'    - 'types/**/*'  # Inherited as-is  tests:    - 'tests/**/*.test.*'    - '**/__tests__/**/*'\n```\n\n## /docs/concepts/file-pattern\n\nSource: https://moonrepo.dev/docs/concepts/file-pattern\n\n# File patterns\n\n## Globs\n\nGlobs in moon are [Rust-based globs](https://github.com/olson-sean-k/wax), not JavaScript-based.\nThis may result in different or unexpected results. The following guidelines must be met when using\nglobs:\n\n- Must use forward slashes (`/`) for path separators, even on Windows.\n\n- Must not start with or use any relative path parts, `.` or `..`.\n\n### Supported syntax\n\n- `*` - Matches zero or more characters, but does not match the `/` character. Will attempt to match the longest possible text (eager).\n\n- `$` - Like `*`, but will attempt to match the shortest possible text (lazy).\n\n- `**` - Matches zero or more directories.\n\n- `?` - Matches exactly one character, but not `/`.\n\n- `[abc]` - Matches one case-sensitive character listed in the brackets.\n\n- `[!xyz]` - Like the above, but will match any character not listed.\n\n- `[a-z]` - Matches one case-sensitive character in range in the brackets.\n\n- `[!x-z]` - Like the above, but will match any character not in range.\n\n- `{glob,glob}` - Matches one or more comma separated list of sub-glob patterns.\n\n- `` - Matches a sub-glob within a defined bounds.\n\n- `!` - At the start of a pattern, will negate previous positive patterns.\n\n### Examples\n\n```\nREADME.{md,mdx,txt}src/**/*tests/**/*.?js!**/__tests__/**/*logs/--.log\n```\n\n## Project relative\n\nWhen configuring [`fileGroups`](/docs/config/project#filegroups), [`inputs`](/docs/config/project#inputs),\nand [`outputs`](/docs/config/project#outputs), all listed file paths and globs are relative from the\nproject root they will be ran in. They must not traverse upwards with `..`.\n\n```\n# Validsrc/**/*./src/**/*package.json# Invalid../utils\n```\n\n## Workspace relative\n\nWhen configuring [`fileGroups`](/docs/config/project#filegroups), [`inputs`](/docs/config/project#inputs),\nand [`outputs`](/docs/config/project#outputs), a listed file path or glob can be prefixed with `/` to\nresolve relative from the workspace root, and not the project root.\n\n```\n# In projectpackage.json# In workspace/package.json\n```\n\n## /docs/concepts/project\n\nSource: https://moonrepo.dev/docs/concepts/project\n\n# Projects\n\nA project is a library, application, package, binary, tool, etc, that contains source files, test\nfiles, assets, resources, and more. A project must exist and be configured within a\n[workspace](/docs/concepts/workspace).\n\n## IDs\n\nA project identifier (or name) is a unique resource for locating a project. The ID is explicitly\nconfigured within [`.moon/workspace.yml`](/docs/config/workspace), as a key within the\n[`projects`](/docs/config/workspace#projects) setting, and can be written in camel/kebab/snake case.\nIDs support alphabetic unicode characters, `0-9`, `_`, `-`, `/`, `.`, and must start with a\ncharacter.\n\nIDs are used heavily by configuration and the command line to link and reference everything. They're\nalso a much easier concept for remembering projects than file system paths, and they typically can\nbe written with less key strokes.\n\nLastly, a project ID can be paired with a task ID to create a [target](/docs/concepts/target).\n\n## Aliases\n\nAliases are a secondary approach for naming projects, and can be used as a drop-in replacement for\nstandard names. What this means is that an alias can also be used when configuring dependencies, or\ndefining [targets](/docs/concepts/target).\n\nHowever, the difference between aliases and names is that aliases can not be explicit configured\nin moon. Instead, they are specific to a project's primary programming language, and are inferred\nbased on that context (when enabled in settings). For example, a JavaScript or TypeScript project\nwill use the `name` field from its `package.json` as the alias.\n\nBecause of this, a project can either be referenced by its name or alias, or both. Choose the\npattern that makes the most sense for your company or team!\n\n## Dependencies\n\nProjects can depend on other projects within the [workspace](/docs/concepts/workspace) to build a\n[project graph](/docs/how-it-works/action-graph), and in turn, an action graph for executing\n[tasks](/docs/concepts/task). Project dependencies are divided into 2 categories:\n\n- Explicit dependencies - These are dependencies that are explicitly defined in a project's [`moon.yml`](/docs/config/project) config file, using the [`dependsOn`](/docs/config/project#dependson) setting.\n\n- Implicit dependencies - These are dependencies that are implicitly discovered by moon when scanning the repository. How an implicit dependency is discovered is based on the project's [`language`](/docs/config/project#language) setting, and how that language's ecosystem functions.\n\n## Configuration\n\nProjects can be configured with an optional [`moon.yml`](/docs/config/project) in the project root, or\nthrough the optional workspace-level [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n## /docs/concepts/query-lang\n\nSource: https://moonrepo.dev/docs/concepts/query-lang\n\n# Query language\n\nv1.3.0\n\nmoon supports an integrated query language, known as MQL, that can be used to filter and select\nprojects from the project graph, using an SQL-like syntax. MQL is primarily used by\n[`moon run`](/docs/commands/run) with the `--query` option.\n\n## Syntax\n\n### Comparisons\n\nA comparison (also known as an assignment) is an expression that defines a piece of criteria, and is\na building block of a query. This criteria maps a [field](#fields) to a value, with an explicit\ncomparison operator.\n\n#### Equals, Not equals\n\nThe equals (`=`) and not equals (`!=`) comparison operators can be used for exact value matching.\n\n```\nprojectLayer=library && language!=javascript\n```\n\nYou can also define a list of values using square bracket syntax, that will match against one of the\nvalues.\n\n```\nlanguage=[javascript, typescript]\n```\n\n#### Like, Not like\n\nThe like (`~`) and not like (`!~`) comparison operators can be used for wildcard value matching,\nusing [glob syntax](/docs/concepts/file-pattern#globs).\n\n```\nprojectSource~packages/* && tag!~*-app\n```\n\nLike comparisons can only be used on non-enum fields.\n\n### Conditions\n\nThe `&&` and `||` logical operators can be used to combine multiple comparisons into a condition.\nThe `&&` operator is used to combine comparisons into a logical AND, and the `||` operator is used\nfor logical OR.\n\n```\ntaskToolchain=system || taskToolchain=node\n```\n\nFor readability concerns, you can also use `AND` or `OR`.\n\n```\ntaskToolchain=system OR taskToolchain=node\n```\n\nMixing both operators in the same condition is not supported.\n\n### Grouping\n\nFor advanced queries and complex conditions, you can group comparisons using parentheses to create\nlogical groupings. Groups can also be nested within other groups.\n\n```\nlanguage=javascript && (taskType=test || taskType=build)\n```\n\n## Fields\n\nThe following fields can be used as criteria, and are related to [task tokens](/docs/concepts/token#variables).\n\n### `language`\n\nProgramming language the project is written in, as defined in\n[`moon.yml`](/docs/config/project#language).\n\n```\nlanguage=rust\n```\n\n### `project`\n\nName OR alias of the project.\n\n```\nproject=server\n```\n\n### `projectAlias`\n\nAlias of the project. For example, the `package.json` name.\n\n```\nprojectAlias~@scope/*\n```\n\n### `projectLayer`v1.39.0\n\nThe project layer, as defined in [`moon.yml`](/docs/config/project#layer).\n\n```\nprojectLayer=application\n```\n\n### `projectId`\n\nName of the project, as defined in [`.moon/workspace.yml`](/docs/config/workspace), or `id` in\n[`moon.yml`](/docs/config/project#id).\n\n```\nprojectId=server\n```\n\n### `projectSource`\n\nRelative file path from the workspace root to the project root, as defined in\n[`.moon/workspace.yml`](/docs/config/workspace).\n\n```\nprojectSource~packages/*\n```\n\n### `projectStack`v1.22.0\n\nThe project stack, as defined in [`moon.yml`](/docs/config/project#stack).\n\n```\nprojectStack=frontend\n```\n\n### `tag`\n\nA tag within the project, as defined in [`moon.yml`](/docs/config/project#tags).\n\n```\ntag~react-*\n```\n\n### `task`\n\nID/name of a task within the project.\n\n```\ntask=[build,test]\n```\n\n### `taskToolchain`v1.31.0\n\nThe toolchain a task will run against, as defined in [`moon.yml`](/docs/config/project).\n\n```\ntaskToolchain=node\n```\n\n### `taskType`\n\nThe [type of task](/docs/concepts/task#types), based on its configured settings.\n\n```\ntaskType=build\n```\n\n## /docs/concepts/target\n\nSource: https://moonrepo.dev/docs/concepts/target\n\n# Targets\n\nA target is a compound identifier that pairs a [scope](#common-scopes) to a [task](/docs/concepts/task),\nseparated by a `:`, in the format of `scope:task`.\n\nTargets are used by terminal commands...\n\n```\n$ moon run designSystem:build\n```\n\nAnd configurations for declaring cross-project or cross-task dependencies.\n\n```\ntasks:  build:    command: 'webpack'    deps:      - 'designSystem:build'\n```\n\n## Common scopes\n\nThese scopes are available for both running targets and configuring them.\n\n### By project\n\nThe most common scope is the project scope, which requires the name of a project, as defined in\n[`.moon/workspace.yml`](/docs/config/workspace). When paired with a task name, it will run a specific\ntask from that project.\n\n```\n# Run `lint` in project `app`$ moon run app:lint\n```\n\n### By tagv1.4.0\n\nAnother way to target projects is with the tag scope, which requires the name of a tag prefixed with\n`#`, and will run a specific task in all projects with that tag.\n\n```\n# Run `lint` in projects with the tag `frontend`$ moon run '#frontend:lint'\n```\n\ncaution\n\nBecause `#` is a special character in the terminal (is considered a comment), you'll need to wrap\nthe target in quotes, or escape it like so `\\#`.\n\n## Run scopes\n\nThese scopes are only available on the command line when running tasks with `moon run` or `moon ci`.\n\n### All projects\n\nFor situations where you want to run a specific target in all projects, for example `lint`ing, you\ncan utilize the all projects scope by omitting the project name from the target: `:lint`.\n\n```\n# Run `lint` in all projects$ moon run :lint\n```\n\n### Closest project `~`v1.33.0\n\nIf you are within a project folder, or an arbitrarily nested folder, and want to run a task in the\nclosest project (traversing upwards), the `~` scope can be used.\n\n```\n# Run `lint` in the closest project$ moon run ~:lint\n```\n\n## Config scopes\n\nThese scopes are only available when configuring a task.\n\n### Dependencies `^`\n\nWhen you want to include a reference for each project [that's depended on](/docs/concepts/project#dependencies),\nyou can utilize the `^` scope. This will be expanded to all depended on projects. If you do not\nwant all projects, then you'll need to explicitly define them.\n\nmoon.yml\n\n```\ndependsOn:  - 'apiClients'  - 'designSystem'# Configured astasks:  build:    command: 'webpack'    deps:      - '^:build'# Resolves totasks:  build:    command: 'webpack'    deps:      - 'apiClients:build'      - 'designSystem:build'\n```\n\n### Self `~`\n\nWhen referring to another task within the current project, you can utilize the `~` scope, or omit\nthe `~:` prefix altogether, which will be expanded to the current project's name. This is useful for\nsituations where the name is unknown, for example, when configuring\n[`.moon/tasks/all.yml`](/docs/config/tasks), or if you just want a shortcut!\n\n.moon/tasks/all.yml\n\n```\n# Configured astasks:  lint:    command: 'eslint'    deps:      - '~:typecheck'      # OR      - 'typecheck'  typecheck:    command: 'tsc'# Resolves to (assuming project is \"foo\")tasks:  lint:    command: 'eslint'    deps:      - 'foo:typecheck'  typecheck:    command: 'tsc'\n```\n\n## /docs/concepts/task\n\nSource: https://moonrepo.dev/docs/concepts/task\n\n# Tasks\n\nTasks are commands that are ran in the context of a [project](/docs/concepts/project). Underneath the hood, a\ntask is simply a binary or system command that is ran as a child process.\n\n## IDs\n\nA task identifier (or name) is a unique resource for locating a task within a project. The ID is\nexplicitly configured as a key within the [`tasks`](/docs/config/project#tasks) setting, and can be\nwritten in camel/kebab/snake case. IDs support alphabetic unicode characters, `0-9`, `_`, `-`, `/`,\n`.`, and must start with a character.\n\nA task ID can be paired with a scope to create a [target](/docs/concepts/target).\n\n## Types\n\nTasks are grouped into 1 of the following types based on their configured parameters.\n\n- Build - Task generates one or many artifacts, and is derived from the [`outputs`](/docs/config/project#outputs) setting.\n\n- Run - Task runs a one-off, long-running, or never-ending process, and is derived from the [`local`](/docs/config/project#local) setting.\n\n- Test - Task asserts code is correct and behaves as expected. This includes linting, typechecking, unit tests, and any other form of testing. Is the default.\n\n## Modes\n\nAlongside types, tasks can also grouped into a special mode that provides unique handling within the\naction graph and pipelines.\n\n### Local only\n\nTasks either run locally, in CI (continuous integration pipelines), or both. For tasks that should\nonly be ran locally, for example, development servers and watchers, we provide a mechanism for\nmarking a task as local only. When enabled, caching is turned off, the task will not run in CI,\nterminal output is not captured, and the task is marked as [persistent](#persistent).\n\nTo mark a task as local only, enable the [`local`](/docs/config/project#local) setting.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev-server'    preset: 'server'\n```\n\n### Internal onlyv1.23.0\n\nInternal tasks are tasks that are not meant to be ran explicitly by the user (via\n[`moon check`](/docs/commands/check) or [`moon run`](/docs/commands/run)), but are used internally as\ndependencies of other tasks. Additionally, internal tasks are not displayed in a project's tasks\nlist, but can be inspected with [`moon task`](/docs/commands/task).\n\nTo mark a task as internal, enable the [`options.internal`](/docs/config/project#internal) setting.\n\nmoon.yml\n\n```\ntasks:  prepare:    command: 'intermediate-step'    options:      internal: true\n```\n\n### Interactivev1.12.0\n\nTasks that need to interact with the user via terminal prompts are known as interactive tasks.\nBecause interactive tasks require stdin, and it's not possible to have multiple parallel running\ntasks interact with stdin, we isolate interactive tasks from other tasks in the action graph. This\nensures that only 1 interactive task is ran at a time.\n\nTo mark a task as interactive, enable the [`options.interactive`](/docs/config/project#interactive)\nsetting.\n\nmoon.yml\n\n```\ntasks:  init:    command: 'init-app'    options:      interactive: true\n```\n\n### Persistentv1.6.0\n\nTasks that never complete, like servers and watchers, are known as persistent tasks. Persistent\ntasks are typically problematic when it comes to dependency graphs, because if they run in the\nmiddle of the graph, subsequent tasks will never run because the persistent task never completes!\n\nHowever in moon, this is a non-issue, as we collect all persistent tasks within the action graph and\nrun them last as a batch. This is perfect for a few reasons:\n\n- All persistent tasks are ran in parallel, so they don't block each other.\n\n- Running both the backend API and frontend webapp in parallel is a breeze.\n\n- Dependencies of persistent tasks are guaranteed to have ran and completed.\n\nTo mark a task as persistent, enable the [`local`](/docs/config/project#local) or\n[`options.persistent`](/docs/config/project#persistent) settings.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev-server'    preset: 'server'    # OR    options:      persistent: true\n```\n\n## Configuration\n\nTasks can be configured per project through [`moon.yml`](/docs/config/project), or for many projects\nthrough [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n### Commands vs Scripts\n\nA task is either a command or script, but not both. So what's the difference exactly? In the context\nof a moon task, a command is a single binary execution with optional arguments, configured with the\n[`command`](/docs/config/project#command) and [`args`](/docs/config/project#args) settings (which both\nsupport a string or array). While a script is one or many binary executions, with support for pipes\nand redirects, and configured with the [`script`](/docs/config/project#script) setting (which is only a\nstring).\n\nA command also supports merging during task inheritance, while a script does not and will always\nreplace values. Refer to the table below for more differences between the 2.\n\nCommand Script\n\nConfigured as string, array string\n\nInheritance merging  via `mergeArgs` option  always replaces\n\nAdditional args  via `args` setting \n\nPassthrough args (from CLI)  \n\nMultiple commands (with `&&` or `;`)  \n\nPipes, redirects, etc  \n\nAlways ran in a shell  \n\nCustom platform/toolchain  \n\n[Token](/docs/concepts/token) functions and variables  \n\n### Inheritance\n\nView the official documentation on [task inheritance](/docs/concepts/task-inheritance).\n\n## /docs/concepts/task-inheritance\n\nSource: https://moonrepo.dev/docs/concepts/task-inheritance\n\n# Task inheritance\n\nUnlike other task runners that require the same tasks to be repeatedly defined for every project,\nmoon uses an inheritance model where tasks can be defined once at the workspace-level, and are then\ninherited by many or all projects.\n\nWorkspace-level tasks (also known as global tasks) are defined in [`.moon/tasks/**/*.yml`](/docs/config/tasks),\nand are inherited by based on conditions. However, projects are able to include, exclude, or rename\ninherited tasks using the [`workspace.inheritedTasks`](/docs/config/project#inheritedtasks) in\n[`moon.yml`](/docs/config/project).\n\n## Conditional inheritance\n\nTask inheritance is powered by the [`inheritedBy`](/docs/config/tasks#inheritedby) setting in global\ntask configurations (those in [`.moon/tasks/**/*`](/docs/config/tasks)). This setting defines conditions that a\nproject must meet in order for inheritance to occur. If the setting is not defined, or no conditions\nare defined, the configuration is inherited by all projects.\n\nThe following conditions are supported:\n\n- `file`, `files` - Inherit for projects that contain specific files.\n\n- `language`, `languages` - Inherit for projects that belong to specific [`language`](/docs/config/project#language)s.\n\n- `layer`, `layers` - Inherit for projects that belong to specific [`layer`](/docs/config/project#layer)s.\n\n- `stack`, `stacks` - Inherit for projects that belong to specific [`stack`](/docs/config/project#stack)s.\n\n- `tag`, `tags` - Inherit for projects that have specific [`tags`](/docs/config/project#tags).\n\n- `toolchain`, `toolchains` - Inherit for projects that belong to specific [`toolchains`](/docs/config/project#toolchains).\n\nOne or many conditions can be defined, and all conditions must be met for inheritance to occur. For\nexample, the following configuration will only be inherited by Node.js frontend libraries.\n\n.moon/tasks/node-frontend-library.yml\n\n```\ninheritedBy:  toolchain: 'node'  stack: 'frontend'  layer: 'library'\n```\n\nEach condition supports a single value or an array of values. For example, the previous example\ncould be rewritten to inherit for both Node.js or Deno frontend libraries.\n\n.moon/tasks/js-frontend-library.yml\n\n```\ninheritedBy:  toolchains: ['node', 'deno']  stack: 'frontend'  layer: 'library'\n```\n\n### Clauses\n\nThe `tags` and `toolchains` conditions support special clauses `and`, `or` (the default), and `not`\nfor matching more complex scenarios.\n\n```\ninheritedBy:  toolchains:    or: ['javascript', 'typescript']    not: ['ruby']  layer: 'library'\n```\n\n## Merge strategies\n\nWhen a [global task](/docs/config/tasks#tasks) and [local task](/docs/config/project#tasks) of the same\nname exist, they are merged into a single task. To accomplish this, one of many\n[merge strategies](/docs/config/project#options) can be used.\n\nMerging is applied to the parameters [`args`](/docs/config/project#args),\n[`deps`](/docs/config/project#deps), [`env`](/docs/config/project#env-1),\n[`inputs`](/docs/config/project#inputs), [`outputs`](/docs/config/project#outputs), and\n[`toolchains`](/docs/config/project#toolchains), using the [`merge`](/docs/config/project#merge),\n[`mergeArgs`](/docs/config/project#mergeargs), [`mergeDeps`](/docs/config/project#mergedeps),\n[`mergeEnv`](/docs/config/project#mergeenv), [`mergeInputs`](/docs/config/project#mergeinputs),\n[`mergeOutputs`](/docs/config/project#mergeoutputs) and\n[`mergeToolchains`](/docs/config/project#mergetoolchains) options respectively. Each of these options\nsupport one of the following strategy values.\n\n- `append` (default) - Values found in the local task are merged after the values found in the global task. For example, this strategy is useful for toggling flag arguments.\n\n- `prepend` - Values found in the local task are merged before the values found in the global task. For example, this strategy is useful for applying option arguments that must come before positional arguments.\n\n- `preserve` - Preserve the original global task values. This should rarely be used, but exists for situations where an inheritance chain is super long and complex, but we simply want to the base values. v1.29.0\n\n- `replace` - Values found in the local task entirely replaces the values in the global task. This strategy is useful when you need full control.\n\nAll 3 of these strategies are demonstrated below, with a somewhat contrived example, but you get the\npoint.\n\n```\n# Globaltasks:  build:    command:      - 'webpack'      - '--mode'      - 'production'      - '--color'    deps:      - 'designSystem:build'    inputs:      - '/webpack.config.js'    outputs:      - 'build/'# Localtasks:  build:    args: '--no-color --no-stats'    deps:      - 'reactHooks:build'    inputs:      - 'webpack.config.js'    options:      mergeArgs: 'append'      mergeDeps: 'prepend'      mergeInputs: 'replace'# Merged resulttasks:  build:    command:      - 'webpack'      - '--mode'      - 'production'      - '--color'      - '--no-color'      - '--no-stats'    deps:      - 'reactHooks:build'      - 'designSystem:build'    inputs:      - 'webpack.config.js'    outputs:      - 'build/'    options:      mergeArgs: 'append'      mergeDeps: 'prepend'      mergeInputs: 'replace'\n```\n\n## /docs/concepts/token\n\nSource: https://moonrepo.dev/docs/concepts/token\n\n# Tokens\n\nTokens are variables and functions that can be used by [`command`](/docs/config/project#command),\n[`args`](/docs/config/project#args), [`env`](/docs/config/project#env) (>= v1.12),\n[`inputs`](/docs/config/project#inputs), and [`outputs`](/docs/config/project#outputs) when configuring a\ntask. They provide a way of accessing file group paths, referencing values from other task fields,\nand referencing metadata about the project and task itself.\n\n## Functions\n\nA token function is labeled as such as it takes a single argument, starts with an `@`, and is\nformatted as `@name(arg)`. The following token functions are available, grouped by their\nfunctionality.\n\ncaution\n\nToken functions must be the only content within a value, as they expand to multiple files. When\nused in an `env` value, multiple files are joined with a comma (`,`).\n\n### File groups\n\nThese functions reference file groups by name, where the name is passed as the argument.\n\n### `@group`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@group(file_group)` token is a standard token that will be replaced with the file group items\nas-is, for both file paths and globs. This token merely exists for reusability purposes.\n\n```\nfileGroups:  storybook:    - '.storybook/**/*'    - 'src/**/*'    - '**/*.stories.*'# Configured astasks:  build:    command: 'build-storybook'    inputs:      - '@group(storybook)'  start:    command: 'start-storybook'    inputs:      - '@group(storybook)'# Resolves totasks:  build:    command: 'build-storybook'    inputs:      - '/path/to/project/.storybook/**/*'      - '/path/to/project/src/**/*'      - '/path/to/project/**/*.stories.*'  start:    command: 'start-storybook'    inputs:      - '/path/to/project/.storybook/**/*'      - '/path/to/project/src/**/*'      - '/path/to/project/**/*.stories.*'\n```\n\n### `@dirs`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@dirs(file_group)` token will be replaced with an expanded list of directory paths, derived\nfrom the file group of the same name. If a glob pattern is detected within the file group, it will\naggregate all directories found.\n\nwarning\n\nThis token walks the file system to verify each directory exists, and filters out those that don't.\nIf using within `outputs`, you're better off using [`@group`](#group) instead.\n\n```\nfileGroups:  lintable:    - 'src'    - 'tests'    - 'scripts'    - '*.config.js'# Configured astasks:  lint:    command: 'eslint @dirs(lintable) --color'    inputs:      - '@dirs(lintable)'# Resolves totasks:  lint:    command:      - 'eslint'      - 'src'      - 'tests'      - 'scripts'      - '--color'    inputs:      - '/path/to/project/src'      - '/path/to/project/tests'      - '/path/to/project/scripts'\n```\n\n### `@files`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@files(file_group)` token will be replaced with an expanded list of file paths, derived from\nthe file group of the same name. If a glob pattern is detected within the file group, it will\naggregate all files found.\n\nwarning\n\nThis token walks the file system to verify each file exists, and filters out those that don't. If\nusing within `outputs`, you're better off using [`@group`](#group) instead.\n\n```\nfileGroups:  config:    - '*.config.js'    - 'package.json'# Configured astasks:  build:    command: 'webpack build @files(config)'    inputs:      - '@files(config)'# Resolves totasks:  build:    command:      - 'webpack'      - 'build'      - 'babel.config.js'      - 'webpack.config.js'      - 'package.json'    inputs:      - '/path/to/project/babel.config.js'      - '/path/to/project/webpack.config.js'      - '/path/to/project/package.json'\n```\n\n### `@globs`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@globs(file_group)` token will be replaced with the list of glob patterns as-is, derived from\nthe file group of the same name. If a non-glob pattern is detected within the file group, it will be\nignored.\n\n```\nfileGroups:  tests:    - 'tests/**/*'    - '**/__tests__/**/*'# Configured astasks:  test:    command: 'jest --testMatch @globs(tests)'    inputs:      - '@globs(tests)'# Resolves totasks:  test:    command:      - 'jest'      - '--testMatch'      - 'tests/**/*'      - '**/__tests__/**/*'    inputs:      - '/path/to/project/tests/**/*'      - '/path/to/project/**/__tests__/**/*'\n```\n\n### `@root`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@root(file_group)` token will be replaced with the lowest common directory, derived from the\nfile group of the same name. If a glob pattern is detected within the file group, it will walk the\nfile system and aggregate all directories found before reducing.\n\n```\nfileGroups:  sources:    - 'src/app'    - 'src/packages'    - 'src/scripts'# Configured astasks:  format:    command: 'prettier --write @root(sources)'    inputs:      - '@root(sources)'# Resolves totasks:  format:    command:      - 'prettier'      - '--write'      - 'src'    inputs:      - '/path/to/project/src'\n```\n\nWhen there's no directies, or too many directories, this function will return the project root\nusing `.`.\n\n### `@envs`v1.21.0\n\nUsable in `inputs`.\n\nThe `@envs(file_group)` token will be replaced with all environment variables that have been\nconfigured in the group of the provided name.\n\n```\nfileGroups:  sources:    - 'src/**/*'    - '$NODE_ENV'# Configured astasks:  build:    command: 'vite build'    inputs:      - '@envs(sources)'# Resolves totasks:  build:    command: 'vite build'    inputs:      - '$NODE_ENV'\n```\n\n### Inputs & outputs\n\n### `@in`\n\nUsable in `script` and `args` only.\n\nThe `@in(index)` token will be replaced with a single path, derived from\n[`inputs`](/docs/config/project#inputs) by numerical index. If a glob pattern is referenced by index,\nthe glob will be used as-is, instead of returning the expanded list of files.\n\n```\n# Configured astasks:  build:    command:      - 'babel'      - '--copy-files'      - '--config-file'      - '@in(1)'      - '@in(0)'    inputs:      - 'src'      - 'babel.config.js'# Resolves totasks:  build:    command:      - 'babel'      - '--copy-files'      - '--config-file'      - 'babel.config.js'      - 'src'    inputs:      - '/path/to/project/src'      - '/path/to/project/babel.config.js'\n```\n\n### `@out`\n\nUsable in `script` and `args` only.\n\nThe `@out(index)` token will be replaced with a single path, derived from\n[`outputs`](/docs/config/project#outputs) by numerical index.\n\n```\n# Configured astasks:  build:    command:      - 'babel'      - '.'      - '--out-dir'      - '@out(0)'    outputs:      - 'lib'# Resolves totasks:  build:    command:      - 'babel'      - '.'      - '--out-dir'      - 'lib'    outputs:      - '/path/to/project/lib'\n```\n\n### Miscellaneous\n\n### `@meta`v1.28.0\n\nUsable in `command`, `script`, `args`, `env`, `inputs`, and `outputs` only.\n\nThe `@meta(key)` token can be used to access project metadata and will be replaced with a value\nderived from [`project`](/docs/config/project#project) in [`moon.yml`](/docs/config/project).\n\nThe top-level fields (like `name` and `description`) will be used as-is (no quotes). If the setting\nis not defined, it will default to nothing or an empty string. For lists of values, they will be\njoined with `,`.\n\nCustom metadata defined in [`project`](/docs/config/project#project) can also be accessed by key, but\nwill return a JSON stringified value. For example, a custom string value of `example` will be\nstringified to `\"example\"` (with quotes).\n\n```\nproject:  title: 'example'  index: 123# Configured astasks:  build:    script: 'build --name @meta(title) --index @meta(index)'# Resolves totasks:  build:    script: 'build --name example --index 123'\n```\n\n## Variables\n\nA token variable is a value that starts with `$` and is substituted to a value derived from the\ncurrent workspace, project, and task. And unlike token functions, token variables can be placed\nwithin content when necessary, and supports multiple variables within the same content.\n\n### Environmentv1.30.0\n\n- `$arch` - The current host architecture, derived from the Rust [`ARCH` constant](https://doc.rust-lang.org/std/env/consts/constant.ARCH.html).\n\n- `$os` - The current operating system, derived from the Rust [`OS` constant](https://doc.rust-lang.org/std/env/consts/constant.OS.html).\n\n- `$osFamily` - The current operating system family, either `unix` or `windows`.\n\n```\n# Configured astasks:  build:    command: 'example --arch $arch'# Resolves totasks:  build:    command:      - 'example'      - '--arch'      - 'aarch64'\n```\n\n### Workspace\n\n- `$workingDir` - The current working directory.\n\n- `$workspaceRoot` - Absolute file path to the workspace root.\n\n```\n# Configured astasks:  build:    command:      - 'example'      - '--cwd'      - '$workspaceRoot'# Resolves totasks:  build:    command:      - 'example'      - '--cwd'      - '/path/to/repo'\n```\n\n### Project\n\nMost values are derived from settings in [`moon.yml`](/docs/config/project). When a setting is not\ndefined, or does not have a config, the variable defaults to \"unknown\" (for enums) or an empty\nstring.\n\n- `$language` Programming language the project is written in, as defined with [`language`](/docs/config/project#language).\n\n- `$project` - ID of the project that owns the currently running task, as defined in [`.moon/workspace.yml`](/docs/config/workspace).\n\n- `$projectAlias` - Alias of the project that owns the currently running task.\n\n- `$projectChannel` - The discussion channel for the project, as defined with [`project.channel`](/docs/config/project#channel). v1.28.0\n\n- `$projectLayer` - The project layer, as defined with [`layer`](/docs/config/project#layer). v1.39.0\n\n- `$projectTitle` - The human-readable name of the project, as defined with [`project.title`](/docs/config/project#title). v1.28.0\n\n- `$projectOwner` - The owner of the project, as defined with [`project.owner`](/docs/config/project#name). v1.28.0\n\n- `$projectRoot` - Absolute file path to the project root.\n\n- `$projectSource` - Relative file path from the workspace root to the project root, as defined in [`.moon/workspace.yml`](/docs/config/workspace).\n\n- `$projectStack` - The stack of the project, as defined with [`stack`](/docs/config/project#stack). v1.22.0\n\n```\n# Configured astasks:  build:    command: 'example debug $language'# Resolves totasks:  build:    command:      - 'example'      - 'debug'      - 'node'\n```\n\n### Task\n\n- `$target` - Fully-qualified target that is currently running.\n\n- `$task` - ID of the task that is currently running. Does not include the project ID.\n\n- `$taskToolchain` - The toolchain that task will run against, as defined in [`moon.yml`](/docs/config/project). v1.31.0\n\n- `$taskType` - The [type of task](/docs/concepts/task#types), based on its configured settings.\n\n```\n# Configured astasks:  build:    command: 'example $target'# Resolves totasks:  build:    command:      - 'example'      - 'web:build'\n```\n\n### Date/Time\n\n- `$date` - The current date in the format of `YYYY-MM-DD`.\n\n- `$datetime` - The current date and time in the format of `YYYY-MM-DD_HH:MM:SS`.\n\n- `$time` - The current time in the format of `HH:MM:SS`.\n\n- `$timestamp` - The current date and time as a UNIX timestamp in seconds.\n\n```\n# Configured astasks:  build:    command: 'example --date $date'# Resolves totasks:  build:    command:      - 'example'      - '--date'      - '2023-03-17'\n```\n\n### VCSv1.30.0\n\n- `$vcsBranch` - The current branch.\n\n- `$vcsRepository` - The repository slug, in the format of `owner/repo`.\n\n- `$vcsRevision` - The current revision (commit, etc).\n\n```\n# Configured astasks:  build:    command: 'example --branch $vcsBranch'# Resolves totasks:  build:    command:      - 'example'      - '--branch'      - 'master'\n```\n\n## /docs/concepts/toolchain\n\nSource: https://moonrepo.dev/docs/concepts/toolchain\n\n# Toolchain\n\nThe toolchain is an internal layer for downloading, installing, and managing tools (languages,\ndependency managers, libraries, and binaries) that are required at runtime. We embrace this approach\nover relying on these tools \"existing\" in the current environment, as it ensures the following\nacross any environment or machine:\n\n- The version and enabled features of a tool are identical.\n\n- Tools are isolated and unaffected by external sources.\n\n- Builds are consistent, reproducible, and hopefully deterministic.\n\nFurthermore, this avoids a developer, pipeline, machine, etc, having to pre-install all the\nnecessary tools, and to keep them in sync as time passes.\n\n## How it works\n\nThe toolchain is built around [proto](/proto), our stand-alone multi-language version manager. moon\nwill piggyback of proto's toolchain found at `~/.proto` and reuse any tools available, or download\nand install them if they're missing.\n\n### Force disabling\n\nThe `MOON_TOOLCHAIN_FORCE_GLOBALS` environment variable can be set to `true` to force moon to use\ntool binaries available on `PATH`, instead of downloading and installing them. This is useful for\npre-configured environments, like CI and Docker.\n\n```\nMOON_TOOLCHAIN_FORCE_GLOBALS=true\n```\n\nAdditionally, the name of one or many tools can be passed to this variable to only force globals for\nthose tools, and use the toolchain for the remaining tools.\n\n```\nMOON_TOOLCHAIN_FORCE_GLOBALS=node,yarn\n```\n\n## Configuration\n\nThe tools that are managed by the toolchain are configured through the\n[`.moon/toolchains.yml`](/docs/config/toolchain) file, but can be overridden in each project with\n[`moon.yml`](/docs/config/project#toolchain).\n\n### Version specification\n\nAs mentioned above, tools within the toolchain are managed by version for consistency across\nmachines. These versions are configured on a per-tool basis in\n[`.moon/toolchains.yml`](/docs/config/toolchain). So what kinds of versions are allowed?\n\n- Full versions - A full version is a semantic version that is fully specified, such as `1.2.3` or `2.0.0-rc.1`. This is the most common way to specify a version, and is preferred to avoid subtle deviations.\n\n- Partial versions - A partial version is a version that is either missing a patch number, minor number, or both, such as `1.2` or `1`. These can also be represented with requirement syntax, such as `^1.2` or `~1`. If using partials, we suggest having a major and minor number to reduce the deviation of versions across machines.\n\n- Aliases - An alias is a human-readable word that maps to a specific version. For example, `latest` or `stable` maps to the latest version of a tool, or `canary` which maps to applicable canary release, or even a completely custom alias like `berry`. Aliases are language specific, are not managed by moon, and are not suggested for use since they can change at any time (or even daily!).\n\nThis sounds great, but how exactly does this work? For full versions and aliases, it's straight\nforward, as the resolved version is used as-is (assuming it's a legitimate version), and can be\nfound at `~/.proto/tools//`.\n\nFor partial versions, we first check locally installed versions for a match, by scanning\n`~/.proto/tools/`. For example, if the requested version is `1.2` and we have `1.2.10`\ninstalled locally, we'll use that version instead of downloading the latest `1.2.*` version.\nOtherwise, we'll download the latest version that matches the partial version, and install it\nlocally.\n\n## /docs/concepts/workspace\n\nSource: https://moonrepo.dev/docs/concepts/workspace\n\n# Workspace\n\nA workspace is a directory that contains [projects](/docs/concepts/project), manages a [toolchain](/docs/concepts/toolchain),\nruns [tasks](/docs/concepts/task), and is coupled with a VCS repository. The root of a workspace is denoted by a\n`.moon` folder.\n\nBy default moon has been designed for monorepos, but can also be used for polyrepos.\n\n## Configuration\n\nConfiguration that's applied to the entire workspace is defined in\n[`.moon/workspace.yml`](/docs/config/workspace).\n\n## /docs/config\n\nSource: https://moonrepo.dev/docs/config\n\n- [Home](/)\n- [Config files](/docs/config)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Config files\n\n[ OverviewSupported formats](/docs/config/overview)\n\n[ .moon/workspaceThe .moon/workspace.yml file configures projects and services in the workspace. This file is](/docs/config/workspace)\n\n[ .moon/extensionsThe .moon/extensions.yml file configures extensions that can hook into pipeline events, or be](/docs/config/extensions)\n\n[ .moon/toolchainsThe .moon/toolchains.yml file configures the toolchain and the workspace development environment.](/docs/config/toolchain)\n\n[ .moon/tasksThe .moon/tasks//* files configures file groups and tasks that are inherited by every project](/docs/config/tasks)\n\n[ moonThe moon.yml configuration file is not required but can be used to define additional metadata](/docs/config/project)\n\n[ templateThe template.yml file configures metadata and variables for a template,](/docs/config/template)\n\n[Workspace](/docs/concepts/workspace)\n\n[Overview](/docs/config/overview)\n\n## /docs/config/extensions\n\nSource: https://moonrepo.dev/docs/config/extensions\n\n# .moon/extensions\n\nv2.0.0\n\nThe `.moon/extensions.yml` file configures extensions that can hook into pipeline events, or be\nexecuted directly. This file is optional.\n\n## `extends`\n\nDefines one or many external `.moon/extensions.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/extensions.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/extensions.yml'\n```\n\ncaution\n\nSettings will be merged recursively for blocks, with values defined in the local configuration\ntaking precedence over those defined in the extended configuration.\n\n## How it works\n\nA mapping of extensions that can be downloaded and executed with the [`moon ext`](/docs/commands/ext)\ncommand. An extension is a WASM plugin, and the location of the WASM file must be defined with the\n`plugin` field, which requires a\n[plugin locator string](/docs/guides/wasm-plugins#configuring-plugin-locations).\n\n.moon/extensions.yml\n\n```\nexample:  plugin: 'file://./path/to/example.wasm'  # or  plugin: 'https://example.com/path/to/example.wasm'\n```\n\nAdditionally, extensions support custom configuration that is passed to the WASM runtime when the\nplugin is instantiated. This configuration is defined by inserting additional fields under the\nextension name, relative to the `plugin` field. Each extension may have its own settings, so refer\nto their documentation for more information.\n\n.moon/extensions.yml\n\n```\nexample:  plugin: 'file://./path/to/example.wasm'  setting1: true  setting2: 'abc'\n```\n\n## Supported extensions\n\nView the [official guide](/docs/guides/extensions) for all built-in extensions.\n\n## /docs/config/overview\n\nSource: https://moonrepo.dev/docs/config/overview\n\n# Overview\n\n## Supported formatsv2.0.0\n\nIn moon, you can define configuration files in a variety of formats. We currently support the\nfollowing:\n\n- JSON (`.json`)\n\n- JSON with comments (`.jsonc`)\n\n- [HCL](https://github.com/hashicorp/hcl) (`.hcl`)\n\n- [Pkl](https://pkl-lang.org/) (`.pkl`)\n\n- [TOML](https://toml.io/en/) (`.toml`)\n\n- YAML (`.yml`, `.yaml`)\n\ninfo\n\nIn moon v1, only YAML (`.yml`) and Pkl (`.pkl`) configuration files were supported.\n\n## Schema validationv1.33.0\n\nWe support schema validation for all configuration files through\n[JSON Schema](https://json-schema.org/), even for formats that are not JSON (depends on tool/editor\nsupport). To reference the schema for a specific configuration file, configure the `$schema`\nproperty at the top of the file with the appropriate schema found at `.moon/cache/schemas`.\n\n- .moon/workspace\n- .moon/extensions\n- .moon/toolchains\n- .moon/tasks\n- moon\n- template\n\n.moon/workspace.yml\n\n```\n$schema: './cache/schemas/workspace.json'\n```\n\n.moon/extensions.yml\n\n```\n$schema: './cache/schemas/extensions.json'\n```\n\n.moon/toolchains.yml\n\n```\n$schema: './cache/schemas/toolchains.json'\n```\n\n.moon/tasks/all.yml\n\n```\n$schema: '../cache/schemas/tasks.json'\n```\n\nmoon.yml\n\n```\n$schema: '../path/to/.moon/cache/schemas/project.json'\n```\n\ntemplate.yml\n\n```\n$schema: '../path/to/.moon/cache/schemas/template.json'\n```\n\ninfo\n\nThe schemas are automatically created when running a task. If they do not exist yet, you can run\n[`moon sync config-schemas`](/docs/commands/sync/config-schemas) to generate them manually.\n\ndanger\n\nIn older versions of moon, the schema files were located at `https://moonrepo.dev/schemas`. These\nURLs are now deprecated, as they do not support dynamic settings. Please update your `$schema`\nreferences to point to the local schema files in `.moon/cache/schemas`.\n\n## /docs/config/project\n\nSource: https://moonrepo.dev/docs/config/project\n\n# moon\n\nThe `moon.yml` configuration file is not required but can be used to define additional metadata\nfor a project, override inherited tasks, and more at the project-level. When used, this file must\nexist in a project's root, as configured in [`projects`](/docs/config/workspace#projects).\n\n## `dependsOn`\n\nExplicitly defines other projects that this project depends on, primarily when generating the\nproject and task graphs. The most common use case for this is building those projects before\nbuilding this one. When defined, this setting requires an array of project names, which are the keys\nfound in the [`projects`](/docs/config/workspace#projects) map.\n\nmoon.yml\n\n```\ndependsOn:  - 'apiClients'  - 'designSystem'\n```\n\nA dependency object can also be defined, where a specific `scope` can be assigned, which accepts\n\"production\" (default), \"development\", \"build\", or \"peer\".\n\nmoon.yml\n\n```\ndependsOn:  - id: 'apiClients'    scope: 'production'  - id: 'designSystem'    scope: 'peer'\n```\n\nLearn more about [implicit and explicit dependencies](/docs/concepts/project#dependencies).\n\n## Metadata\n\n## `id`v1.18.0\n\nOverrides the name (identifier) of the project, which was configured in or derived from the\n[`projects`](/docs/config/workspace#projects) setting in [`.moon/workspace.yml`](/docs/config/workspace). This setting is\nuseful when using glob based project location, and want to avoid using the folder name as the\nproject name.\n\nmoon.yml\n\n```\nid: 'custom-id'\n```\n\ninfo\n\nAll references to the project must use the new identifier, including project and task dependencies.\n\n## `language`\n\nThe primary programming language the project is written in. This setting is required for\n[task inheritance](/docs/config/tasks), editor extensions, and more. Supports the following values:\n\n- `bash` - A [Bash](https://en.wikipedia.org/wiki/Bash_(Unix_shell)) based project (Unix only).\n\n- `batch` - A [Batch](https://en.wikibooks.org/wiki/Windows_Batch_Scripting)/PowerShell based project (Windows only).\n\n- `go` - A [Go](https://go.dev/) based project.\n\n- `javascript` - A [JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript) based project.\n\n- `php` - A [PHP](https://www.php.net) based project.\n\n- `python` - A [Python](https://www.python.org/) based project.\n\n- `ruby` - A [Ruby](https://www.ruby-lang.org/en/) based project.\n\n- `rust` - A [Rust](https://www.rust-lang.org/) based project.\n\n- `typescript` - A [TypeScript](https://www.typescriptlang.org/) based project.\n\n- `unknown` (default) - When not configured or inferred.\n\n- `*` - A custom language. Values will be converted to kebab-case.\n\nmoon.yml\n\n```\nlanguage: 'javascript'# Customlanguage: 'kotlin'\n```\n\nFor convenience, when this setting is not defined, moon will attempt to detect the language based\non configuration files found in the project root. This only applies to non-custom languages!\n\n## `owners`v1.8.0\n\nDefines ownership of source code within the current project, by mapping file system paths to owners.\nAn owner is either a user, team, or group.\n\nCurrently supports\n[GitHub](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners),\n[GitLab](https://docs.gitlab.com/ee/user/project/codeowners/reference.html), and\n[Bitbucket](https://marketplace.atlassian.com/apps/1218598/code-owners-for-bitbucket?tab=overview&hosting=cloud)\n(via app).\n\n### `customGroups`Bitbucket\n\nWhen using the\n[Code Owners for Bitbucket](https://marketplace.atlassian.com/apps/1218598/code-owners-for-bitbucket?tab=overview&hosting=cloud)\napp, this setting provides a way to define custom groups that will be injected at the top of the\n`CODEOWNERS` file. These groups must be unique across all projects.\n\nmoon.yml\n\n```\nowners:  customGroups:    '@@@backend': ['@\"user name\"', '@@team']\n```\n\n### `defaultOwner`\n\nThe default owner for all [`paths`](#paths). This setting is optional in some cases but helps to\navoid unnecessary repetition.\n\nmoon.yml\n\n```\nowners:  defaultOwner: '@frontend'\n```\n\n### `optional`GitLab\n\nFor GitLab, marks the project's\n[code owners section](https://docs.gitlab.com/ee/user/project/codeowners/reference.html#optional-sections)\nas optional. Defaults to `false`.\n\nmoon.yml\n\n```\nowners:  optional: true\n```\n\n### `paths`\n\nThe primary setting for defining ownership of source code within the current project. This setting\nsupports 2 formats, the first being a list of file paths relative from the current project. This\nformat requires [`defaultOwner`](#defaultowner) to be defined, and only supports 1 owner for every\npath (the default owner).\n\nmoon.yml\n\n```\nowners:  defaultOwner: '@frontend'  paths:    - '**/*.ts'    - '**/*.tsx'    - '*.config.js'\n```\n\nThe second format provides far more granularity, allowing for multiple owners per path. This format\nrequires a map, where the key is a file path relative from the current project, and the value is a\nlist of owners. Paths with an empty list of owners will fallback to [`defaultOwner`](#defaultowner).\n\nmoon.yml\n\n```\nowners:  defaultOwner: '@frontend'  paths:    '**/*.rs': ['@backend']    '**/*.js': []    '*.config.js': ['@frontend', '@frontend-infra']\n```\n\nThe syntax for owners is dependent on the provider you are using for version control (GitHub,\nGitLab, Bitbucket). moon provides no validation or guarantees that these are correct.\n\n### `requiredApprovals`Bitbucket / GitLab\n\nRequires a specific number of approvals for a pull/merge request to be satisfied. Defaults to `1`.\n\n- For Bitbucket, defines the [`Check()` condition](https://docs.mibexsoftware.com/codeowners/merge-checks#MergeChecks-2.MergeChecks:HowmanyoftheseCodeOwnersneedtoapprovebeforeapullrequestcanbemerged?) when using a [`defaultOwner`](#defaultowner).\n\n- For GitLab, defines a requirement on the [code owners section](https://docs.gitlab.com/ee/user/project/codeowners/reference.html#sections-requiring-multiple-approvals).\n\nmoon.yml\n\n```\nowners:  requiredApprovals: 2\n```\n\n## `layer`\n\nThe layer within a [stack](#stack). Supports the following values:\n\n- `application` - An application of any kind.\n\n- `automation` - An automated testing suite, like E2E, integration, or visual tests. v1.16.0\n\n- `configuration` - Configuration files or infrastructure. v1.22.0\n\n- `library` - A self-contained, shareable, and publishable set of code.\n\n- `scaffolding` - Templates or generators for scaffolding. v1.22.0\n\n- `tool` - An internal tool, CLI, one-off script, etc.\n\n- `unknown` (default) - When not configured.\n\nmoon.yml\n\n```\nlayer: 'application'\n```\n\ninfo\n\nThe project layer is used in [task inheritance](/docs/concepts/task-inheritance),\n[constraints and boundaries](/docs/config/workspace#constraints), editor extensions, and more!\n\n## `project`\n\nThe `project` setting defines metadata about the project itself.\n\nmoon.yml\n\n```\nproject:  title: 'moon'  description: 'A monorepo management tool.'  channel: '#moon'  owner: 'infra.platform'  maintainers: ['miles.johnson']\n```\n\nThe information listed within `project` is purely informational and primarily displayed within the\nCLI. However, this setting exists for you, your team, and your company, as a means to identify and\norganize all projects. Feel free to build your own tooling around these settings!\n\n### `channel`\n\nThe Slack, Discord, Teams, IRC, etc channel name (with leading #) in which to discuss the project.\n\n### `description`Required\n\nA description of what the project does and aims to achieve. Be as descriptive as possible, as this\nis the kind of information search engines would index on.\n\n### `maintainers`\n\nA list of people/developers that maintain the project, review code changes, and can provide support.\nCan be a name, email, LDAP name, GitHub username, etc, the choice is yours.\n\n### `title`\n\nA human readable name of the project. This is different from the unique project name configured in\n[`projects`](/docs/config/workspace#projects).\n\n### `owner`\n\nThe team or organization that owns the project. Can be a title, LDAP name, GitHub team, etc. We\nsuggest not listing people/developers as the owner, use [maintainers](#maintainers) instead.\n\n### Custom fieldsv2.0.0\n\nAdditional fields can be configured as custom metadata to associate to this project. Supports all\nvalue types that are valid JSON.\n\nmoon.yml\n\n```\nproject:  # ...  deprecated: true\n```\n\n## `stack`v1.22.0\n\nThe technology stack this project belongs to, primarily for categorization. Supports the following\nvalues:\n\n- `backend` - Server-side APIs, etc.\n\n- `data` - Data sources, database layers, etc. v2.0.0\n\n- `frontend` - Client-side user interfaces, etc.\n\n- `infrastructure` - Cloud/server infrastructure, Docker, etc.\n\n- `systems` - Low-level systems programming.\n\n- `unknown` (default) - When not configured.\n\nmoon.yml\n\n```\nstack: 'frontend'\n```\n\ninfo\n\nThe project stack is also used in [constraints and boundaries](/docs/config/workspace#constraints)!\n\n## `tags`\n\nTags are a simple mechanism for categorizing projects. They can be used to group projects together\nfor [easier querying](/docs/commands/query/projects), enforcing of\n[project boundaries and constraints](/docs/config/workspace#constraints),\n[task inheritance](/docs/concepts/task-inheritance), and more.\n\nmoon.yml\n\n```\ntags:  - 'react'  - 'prisma'\n```\n\n## Integrations\n\n## `docker`v1.27.0\n\nConfigures Docker integration for the current project.\n\n### `file`\n\nConfigures the `Dockerfile` generation process when [`moon docker file`](/docs/commands/docker/file) is\nexecuted.\n\n#### `buildTask`\n\nThe name of a task within the current project that will be used for building the project before\nrunning it. If not defined, does nothing.\n\nmoon.yml\n\n```\ndocker:  file:    buildTask: 'build'\n```\n\n#### `image`\n\nThe Docker image to use in the base stage. Defaults to an image based on the project's toolchain, as\noutlined below.\n\n- `oven/bun:latest` for Bun\n\n- `denoland/deno:latest` for Deno\n\n- `node:latest` for Node.js\n\n- `python:latest` for Python\n\n- `rust:latest` for Rust\n\n- `scratch` for everything else\n\nmoon.yml\n\n```\ndocker:  file:    image: 'node:latest'\n```\n\n#### `startTask`\n\nThe name of a task within the current project that will run the project after it has been built (if\nrequired). This task will be used as `CMD` within the `Dockerfile`.\n\nmoon.yml\n\n```\ndocker:  file:    startTask: 'start'\n```\n\n### `scaffold`\n\nConfigures aspects of the Docker scaffolding process when\n[`moon docker scaffold`](/docs/commands/docker/scaffold) is executed. Only applies to the\n[sources skeleton](/docs/commands/docker/scaffold#sources).\n\n#### `sourcesPhaseGlobs`\n\nList of globs in which to copy project-relative files into the `.moon/docker/sources` skeleton. When\nnot defined, defaults to `**/*`.\n\nmoon.yml\n\n```\ndocker:  scaffold:    sourcesPhaseGlobs:      - 'src/**/*'\n```\n\n## Tasks\n\n## `env`\n\nThe `env` field is map of strings that are passed as environment variables to all tasks within the\ncurrent project. Project-level variables will not override task-level variables of the same name.\n\nmoon.yml\n\n```\nenv:  NODE_ENV: 'production'\n```\n\nView the task [`env`](#env-1) setting for more usage examples and information.\n\n## `fileGroups`\n\nDefines [file groups](/docs/concepts/file-group) to be used by local tasks. By default, this setting\nis not required for the following reasons:\n\n- File groups are an optional feature, and are designed for advanced use cases.\n\n- File groups defined in [`.moon/tasks/all.yml`](/docs/config/tasks) will be inherited by all projects.\n\nWhen defined this setting requires a map, where the key is the file group name, and the value is a\nlist of [globs or file paths](/docs/concepts/file-pattern), or environment variables. Globs and paths\nare [relative to a project](/docs/concepts/file-pattern#project-relative) (even when defined\n[globally](/docs/config/tasks)).\n\nmoon.yml\n\n```\n# Example groupsfileGroups:  configs:    - '*.config.{js,cjs,mjs}'    - '*.json'  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*'    - '**/__tests__/**/*'  assets:    - 'assets/**/*'    - 'images/**/*'    - 'static/**/*'    - '**/*.{scss,css}'\n```\n\nOnce your groups have been defined, you can reference them within [`args`](#args),\n[`inputs`](#inputs), [`outputs`](#outputs), and more, using\n[token functions and variables](/docs/concepts/token).\n\nmoon.yml\n\n```\ntasks:  build:    command: 'vite build'    inputs:      - '@group(configs)'      - '@group(sources)'\n```\n\n## `tasks`\n\nTasks are actions that are ran within the context of a [project](/docs/concepts/project), and commonly\nwrap an npm binary or system command. This setting requires a map, where the key is a unique name\nfor the task, and the value is an object of task parameters.\n\nmoon.yml\n\n```\ntasks:  format:    command: 'prettier'  lint:    command: 'eslint'  test:    command: 'jest'  typecheck:    command: 'tsc'\n```\n\n### `extends`v1.12.0\n\nThe `extends` field can be used to extend the settings from a sibling task within the same project,\nor [inherited from the global scope](/docs/concepts/task-inheritance). This is useful for composing\nsimilar tasks with different arguments or options.\n\nWhen extending another task, the same\n[merge strategies](/docs/concepts/task-inheritance#merge-strategies) used for inheritance are applied.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint .'    inputs:      - 'src/**/*'  lint-fix:    extends: 'lint'    args: '--fix'    preset: 'utility'\n```\n\n### `description`v1.22.0\n\nA human-readable description of what the task does. This information is displayed within the\n[`moon project`](/docs/commands/project) and [`moon task`](/docs/commands/task) commands.\n\nmoon.yml\n\n```\ntasks:  build:    description: 'Builds the project using Vite'    command: 'vite build'\n```\n\n### `command`\n\nThe `command` field is a single command to execute for the task, including the command binary/name\n(must be first) and any optional [arguments](#args). This field supports task inheritance and\nmerging of arguments.\n\nThis setting can be defined using a string, or an array of strings. We suggest using arrays when\ndealing with many args, or the args string cannot be parsed easily.\n\nmoon.yml\n\n```\ntasks:  format:    # Using a string    command: 'prettier --check .'    # Using an array    command:      - 'prettier'      - '--check'      - '.'\n```\n\ninfo\n\nIf you need to support pipes, redirects, or multiple commands, use [`script`](#script) instead.\nLearn more about [commands vs scripts](/docs/concepts/task#commands-vs-scripts).\n\n#### Special commands\n\nFor interoperability reasons, the following command names have special handling.\n\n- `noop`, `no-op`, `nop` - Marks the task as a \"no operation\". Will not execute a command in the action pipeline but can define dependencies.\n\n- When `toolchain` is \"bun\": `bun`, `bunx` - Uses the binaries from the toolchain.\n\n- When `toolchain` is \"deno\": Will execute with `deno` binary.\n\n- When `toolchain` is \"node\": `node`, `npm`, `pnpm`, `yarn` - Uses the binaries from the toolchain.\n\n- When `toolchain` is \"rust\": Will execute with `cargo` binary.\n\n### `args`\n\nThe `args` field is a collection of additional arguments to append to the [`command`](#command)\nwhen executing the task. This field exists purely to provide arguments for\n[inherited tasks](/docs/config/tasks#tasks).\n\nThis setting can be defined using a string, or an array of strings. We suggest using arrays when\ndealing with many args, or the args string cannot be parsed easily.\n\nmoon.yml\n\n```\ntasks:  test:    command: 'jest'    # Using a string    args: '--color --maxWorkers 3'    # Using an array    args:      - '--color'      - '--maxWorkers'      - '3'\n```\n\nHowever, for the array approach to work correctly, each argument must be its own distinct item,\nincluding argument values. For example:\n\nmoon.yml\n\n```\ntasks:  test:    command: 'jest'    args:      # Valid      - '--maxWorkers'      - '3'      # Also valid      - '--maxWorkers=3'      # Invalid      - '--maxWorkers 3'\n```\n\n### `deps`\n\nThe `deps` field is a list of other tasks (known as [targets](/docs/concepts/target)), either within\nthis project or found in another project, that will be executed before this task. It achieves this\nby generating a directed task graph based on the project graph.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    deps:      - 'apiClients:build'      - 'designSystem:build'      # A task within the current project      - 'codegen'\n```\n\n#### Args & env\n\nFurthermore, for each dependency target, you can configure additional command line arguments and\nenvironment variables that'll be passed to the dependent task when it is ran. The `args` field\nsupports a list of strings, while `env` is an object of key-value pairs.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    deps:      - target: 'apiClients:build'        args: ['--env', 'production']        env:          NODE_ENV: 'production'\n```\n\nDependencies of inherited tasks will be excluded and renamed according to the\n[`workspace.inheritedTasks`](#inheritedtasks) setting. This process only uses filters from the\ncurrent project, and not filters from dependent projects. Furthermore, `args` and `env` are not\ndeeply merged.\n\n#### Optional\n\nBy default, all dependencies are required to exist when tasks are being built and expanded, but this\nisn't always true when dealing with composition and inheritance. For dependencies that may not exist\nbased on what's inherited, you can mark it as `optional`.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    deps:      - target: 'apiClients:build'        optional: true\n```\n\n### `env`\n\nThe `env` field is map of strings that are passed as environment variables when running the command.\nVariables defined here will take precedence over those loaded with [`envFile`](#envfile).\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    env:      NODE_ENV: 'production'\n```\n\nVariables also support substitution using the syntax `${VAR_NAME}`. When using substitution, only\nvariables in the current process can be referenced, and not those currently defined in `env`.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    env:      APP_TARGET: '${REGION}-${ENVIRONMENT}'\n```\n\n### `inputs`\n\nThe `inputs` field is a list of sources that calculate whether to execute this task based on the\nenvironment and files that have been touched since the last time the task has been ran. If not\ndefined or inherited, then all files within a project are considered an input (`**/*`), excluding\nroot-level tasks.\n\nInputs support the following source types:\n\n- Environment variables\n\n- Environment variable wildcards v1.22.0\n\n- Files, folders, and globs\n\n- [Token functions and variables](/docs/concepts/token)\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    inputs:      # Config files anywhere within the project      - '**/.eslintignore'      - '**/.eslintrc.js'      # Config files at the workspace root      - '/.eslintignore'      - '/.eslintrc.js'      # Tokens      - '$projectRoot'      - '@group(sources)'\n```\n\n#### Environment variables\n\nEnvironment variables can be used as inputs and must start with a `$`. Wildcard variables can use\n`*` to match any character.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      - '$FOO_CACHE'      - '$FOO_*'\n```\n\ncaution\n\nWhen using an environment variable, we assume it's not defined by default, and will trigger an\naffected state when it is defined. If the environment variable always exists, then the task will\nalways run and bypass the cache.\n\n#### File paths\n\nFile paths support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `file://` URI v1.39.0,\nor as an object with a `file` property v1.39.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `content`, `match`, `matches` (`string`) - When determining affected state, will match against the file's content using the defined regex pattern, instead of relying on file existence.\n\n- `optional` (`boolean`) - When hashing and set to `true` and the file is missing, will not log a warning. When set to `false` and the file is missing, will fail with an error. Defaults to logging a warning.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'project/relative/file.js'      - '/workspace/relative/file.js'      # Using file protocol      - 'file://project/relative/file.js?optional'      - 'file:///workspace/relative/file.js?content=a|b|c'      # Using an object      - file: 'project/relative/file.js'        optional: true      - file: '/workspace/relative/file.js'        content: 'a|b|c'\n```\n\n#### File groupsv1.41.0\n\nA file group input will reference the defined files/globs within from a file group in the current\nproject. It can be defined with a `group://` URI, or as an object with a `group` property.\nAdditionally, the following parameters are supported as a URI query or as object fields:\n\n- `format`, `as` (`string`) - The format in which to gather the file group results. Supported values are `static` (default), `files`, `dirs`, `globs`, `envs`, and `root`.\n\nmoon.yml\n\n```\nfileGroups:  sources:    - 'src/**/*'tasks:  build:    # ...    inputs:      # Using group protocol      - 'group://sources?format=dirs'      # Using an object      - group: 'sources'        format: 'dirs'\n```\n\n#### Glob patterns\n\nGlob patterns support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `glob://` URI v1.39.0,\nor as an object with a `glob` property v1.39.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `cache` (`boolean`) - When gathering inputs for hashing, defines whether the glob results should be cached for the duration of the moon process. Defaults to `true`.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'project/relative/file.*'      - '/workspace/relative/**/*'      # Using glob protocol      - 'glob://project/relative/file.*?cache=false'      - 'glob:///workspace/relative/**/*?cache'      # Using an object      - glob: 'project/relative/file.*'        cache: false      - glob: '/workspace/relative/**/*'\n```\n\nGlobs can also be negated by prefixing the path with `!`, which will exclude all files that match\nthe glob.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      - '!**/*.md'      - 'glob://!/workspace/relative/**/*'      - glob: '!/workspace/relative/**/*'\n```\n\nwarning\n\nGlob patterns that contain `?`, for example `*.tsx?`, cannot be used in URI format, as it conflicts\nwith the query string syntax. Use the path or object format instead.\n\ndanger\n\nBe aware that files that match the glob, but are ignored via `.gitignore` (or similar), will not\nbe considered an input. To work around this, use explicit file inputs.\n\n#### External projectsv1.41.0\n\nTasks can also depend on files and globs from other projects within the same workspace. This is\nuseful for handling cross-project relationships without needing to define explicit task\ndependencies.\n\nExternal projects can be defined as a `project://` URI, or as an object with a `project` property,\nboth of which require a project identifier, or `^` for all dependent projects. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `group`, `fileGroup` (`id`) - The name of a file group within the external project in which file and glob patterns will be used for matching. Takes precedence over `filter`.\n\n- `filter` (`string[]`) - A list of [project relative glob patterns](/docs/concepts/file-pattern#project-relative) that will be used for matching.\n\nIf neither `group` nor `filter` are defined, all files within the external project are considered a\nmatch (`**/*`).\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Using project protocol      - 'project://foo'      - 'project://bar?group=sources'      - 'project://baz?filter=src/**/*'      # Using an object      - project: 'foo'      - project: 'bar'        group: 'sources'      - project: 'baz'        filter: ['src/**/*']\n```\n\n### `outputs`\n\nThe `outputs` field is a list of [files and folders](/docs/concepts/file-pattern#project-relative) that\nare created as a result of executing this task, typically from a build or compilation related\ntask. Outputs are necessary for [incremental caching and hydration](/docs/concepts/cache). If you'd\nprefer to avoid that functionality, omit this field.\n\n#### File paths\n\nFile paths support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `file://` URI v1.41.0,\nor as an object with a `file` property v1.41.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `optional` (`boolean`) - When archiving and set to `true` and the file is missing, will not fail with a missing output error. Defaults to `false`.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'build/'      # Using file protocol      - 'file://build/'      # Using an object      - file: 'build/'        optional: true\n```\n\n#### Glob patterns\n\nGlob patterns support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `glob://` URI v1.41.0,\nor as an object with a `glob` property v1.41.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `optional` (`boolean`) - When archiving and set to `true` and the glob produced no results, will not fail with a missing output error. Defaults to `false`.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'build/**/*.js'      - '!build/internal.js'      # Using glob protocol      - 'glob://build/**/*.js'      # Using an object      - glob: 'build/**/*.js'\n```\n\nwarning\n\nGlob patterns that contain `?`, for example `*.tsx?`, cannot be used in URI format, as it conflicts\nwith the query string syntax. Use the path or object format instead.\n\ndanger\n\nWhen using globs and moon hydrates an output (a cache hit), all files not matching the glob will be\ndeleted. Ensure that all files critical for the build to function correctly are included.\n\n### `preset`v1.28.0\n\nApplies the chosen preset to the task. A preset defines a collection of task options that will be\ninherited as the default, and can then be overridden within the task itself. The following presets\nare available:\n\n- `server` [`cache`](#cache) -> Turned off\n\n- [`outputStyle`](#outputstyle) -> Set to \"stream\"\n\n- [`persistent`](#persistent) -> Turned on\n\n- [`runInCI`](#runinci) -> Turned off\n\n- `utility` v2.0.0 [`cache`](#cache) -> Turned off\n\n- [`interactive`](#interactive) -> Turned on\n\n- [`outputStyle`](#outputstyle) -> Set to \"stream\"\n\n- [`persistent`](#persistent) -> Turned off\n\n- [`runInCI`](#runinci) -> Skipped\n\nTasks named \"dev\", \"start\", or \"serve\" are marked as `server` automatically.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'webpack server'    preset: 'server'\n```\n\n### `script`v1.27.0\n\nThe `script` field is one or many commands to execute for the task, with support for pipes,\nredirects, and more. This field does not support task inheritance merging, and can only be defined\nwith a string.\n\nIf defined, will supersede [`command`](#command) and [`args`](#args).\n\nmoon.yml\n\n```\ntasks:  exec:    # Single command    script: 'cp ./in ./out'    # Multiple commands    script: 'rm -rf ./out && cp ./in ./out'    # Pipes    script: 'ps aux | grep 3000'    # Redirects    script: './gen.sh > out.json'\n```\n\ninfo\n\nIf you need to support merging during task inheritance, use [`command`](#command) instead. Learn\nmore about [commands vs scripts](/docs/concepts/task#commands-vs-scripts).\n\n### `toolchains`v1.31.0\n\nThe `toolchain` field defines additional [toolchain(s)](/docs/concepts/toolchain) the command runs on,\nwhere to locate its executable, and more. By default, moon will set to a value based on the\nproject's [`language`](#language), default [`toolchain.default`](#toolchain-1), or via detection.\n\nmoon.yml\n\n```\ntasks:  env:    command: 'printenv'    toolchains: 'system'\n```\n\nThis setting also supports multiple values.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'npm run build'    toolchains: ['javascript', 'node', 'npm']\n```\n\n### `options`\n\nThe `options` field is an object of configurable options that can be used to modify the task and its\nexecution. The following fields can be provided, with merge related fields supporting all\n[merge strategies](/docs/concepts/task-inheritance#merge-strategies).\n\nmoon.yml\n\n```\ntasks:  typecheck:    command: 'tsc --noEmit'    options:      mergeArgs: 'replace'      runFromWorkspaceRoot: true\n```\n\n#### `affectedFiles`\n\nWhen enabled and the [`--affected` option](/docs/run-task#running-based-on-affected-files-only) is\nprovided, all affected files that match this task's [`inputs`](#inputs) will be passed as relative\nfile paths as command line arguments, and as a `MOON_AFFECTED_FILES` environment variable.\n\nIf there are no affected files, `.` (current directory) will be passed instead for arguments, and an\nempty value for the environment variable. This functionality can be changed with the\n[`affectedPassInputs`](#affectedpassinputs) setting.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    options:      affectedFiles: true      # Only pass args      affectedFiles: 'args'      # Only set env var      affectedFiles: 'env'\n```\n\ncaution\n\nWhen using this option, ensure that explicit files or `.` are not present in the [`args`](#args)\nlist. Furthermore, this functionality will only work if the task's command supports an arbitrary\nlist of files being passed as arguments.\n\nThis setting also supports an object format with additional parameters. The `pass` field is\nrequired, which accepts a value described above.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    options:      affectedFiles:        pass: 'args'\n```\n\nThe following additional parameters are supported:\n\n- `passInputsWhenNoMatch` (`boolean`) - When no affected files are found, and `pass` includes `args`, will pass all configured [`inputs`](#inputs) as relative file paths instead of `.`. Defaults to `false`.\n\n#### `allowFailure`v1.13.0\n\nAllows a task to fail without failing the entire pipeline. When enabled, the following changes\noccur:\n\n- Other tasks cannot depend on this task, as we can't ensure it's side-effect free.\n\n- For [`moon run`](/docs/commands/run), the process will not bail early and will run to completion.\n\n- For [`moon ci`](/docs/commands/ci), the process will not exit with a non-zero exit code, if the only failing tasks are allowed to fail.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    options:      allowFailure: true\n```\n\n#### `cache`\n\nWhether to cache the task's execution result using our [smart hashing](/docs/concepts/cache#hashing)\nsystem. If disabled, will not create a cache hash, and will not persist a task's\n[outputs](#outputs). Supports the following values:\n\n- `true` (default) - Cache the task's output.\n\n- `false` - Do not cache the task's output.\n\n- `local` - Only cache locally. v1.40.0\n\n- `remote` - Only cache [remotely](/docs/guides/remote-cache). v1.40.0\n\nWe suggest disabling caching when defining cleanup tasks, one-off scripts, or file system heavy\noperations.\n\nmoon.yml\n\n```\ntasks:  clean:    command: 'rm -rf ./temp'    options:      cache: false\n```\n\n#### `cacheKey`v1.35.0\n\nA custom key to include in the cache and task hashing process. Can be used to invalidate local and\nremote caches.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'some-costly-build'    options:      cacheKey: 'v1'\n```\n\n#### `cacheLifetime`v1.29.0\n\nThe lifetime in which a [cached task](#cache) will live before being marked as stale and re-running.\nThis applies to a task even if it does not produce [outputs](#outputs).\n\nThe lifetime can be configured in a human-readable string format, for example, `1 day`, `3 hr`,\n`1m`, etc. If the lifetime is not defined, the cache will live forever, or until the task inputs are\ntouched.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'some-costly-build'    options:      cacheLifetime: '1 day'\n```\n\nString formats are powered by the\n[humantime](https://docs.rs/humantime/2.1.0/humantime/fn.parse_duration.html) crate.\n\n#### `envFile`\n\nA boolean or path to a `.env` file (also know as dotenv file) that defines a collection of\n[environment variables](#env-1) for the current task. Variables will be loaded on project creation,\nbut will not override those defined in [`env`](#env-1).\n\nVariables defined in the file support value substitution/expansion by wrapping the variable name in\ncurly brackets, such as `${VAR_NAME}`.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    options:      # Defaults to .env      envFile: true      # Or      envFile: '.env.production'      # Or from the workspace root      envFile: '/.env.shared'\n```\n\nWhen set to `true`, moon will load the following files in order, with later files taking precedence\nover earlier ones:\n\n- `/.env`\n\n- `/.env.local`\n\n- `.env`\n\n- `.env.local`\n\n- `.env.`\n\n- `.env..local`\n\nAdditionally, a list of file paths can also be provided. When using a list, the order of the files\nis important, as environment variables from all files will be aggregated into a single map, with\nsubsequent files taking precedence over previous ones. Once aggregated, the variables will be passed\nto the task, but will not override those defined in [`env`](#env-1).\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    options:      envFile:        - '.env'        - '.env.production'\n```\n\n#### `inferInputs`v1.31.0\n\nAutomatically infer [inputs](#inputs) based on the following parameters configured within the task's\n`command`, `script`, `args`, or `env`. Defaults to `false`.\n\n- File/glob paths derived from [file group based token functions](/docs/concepts/token#file-groups).\n\n- Environment variables being substituted within a command or script.\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      inferInputs: false\n```\n\n#### `internal`v1.23.0\n\nMarks the task as internal only. [Internal tasks](/docs/concepts/task#internal-only) can not be\nexplicitly ran on the command line, but can be depended on by other tasks.\n\nmoon.yml\n\n```\ntasks:  prepare:    # ...    options:      internal: true\n```\n\n#### `interactive`v1.12.0\n\nMarks the task as interactive. [Interactive tasks](/docs/concepts/task#interactive) run in isolation so\nthat they can interact with stdin.\n\nThis setting also disables caching, turns of CI, and other functionality, similar to the\n[`preset`](#preset) setting.\n\nmoon.yml\n\n```\ntasks:  init:    # ...    options:      interactive: true\n```\n\n#### `merge`v1.29.0\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging [`args`](#args),\n[`deps`](#deps), [`env`](#env-1), [`inputs`](#inputs), and [`outputs`](#outputs) with an inherited\ntask. This option can be overridden with the field specific merge options below.\n\n#### `mergeArgs`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`args`](#args) list with an inherited task. Defaults to \"append\".\n\n#### `mergeDeps`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`deps`](#deps) list with an inherited task. Defaults to \"append\".\n\n#### `mergeEnv`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`env`](#env-1) map with an inherited task. Defaults to \"append\".\n\n#### `mergeInputs`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`inputs`](#inputs) list with an inherited task. Defaults to \"append\".\n\n#### `mergeOutputs`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`outputs`](#outputs) list with an inherited task. Defaults to \"append\".\n\n#### `mergeToolchains`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`toolchains`](#toolchains) list with an inherited task. Defaults to \"append\".\n\n#### `mutex`v1.24.0\n\nCreates an exclusive lock on a \"virtual resource\", preventing other tasks using the same \"virtual\nresource\" from running concurrently.\n\nIf you have many tasks that require exclusive access to a resource that can't be tracked by moon\n(like a database, an ignored file, a file that's not part of the project, or a remote resource) you\ncan use the `mutex` option to prevent them from running at the same time.\n\nmoon.yml\n\n```\ntasks:  a:    # ...    options:      mutex: 'virtual_resource_name'  # b doesn't necessarily have to be in the same project  b:    # ...    options:      mutex: 'virtual_resource_name'\n```\n\n#### `os`v1.28.0\n\nWhen defined, the task will only run on the configured operating system. For other operating\nsystems, the task becomes a no-operation. Supports the values `linux`, `macos`, and `windows`.\n\nCan be defined as a single value, or a list of values.\n\nmoon.yml\n\n```\ntasks:  build-unix:    # ...    options:      os: ['linux', 'macos']  build-windows:    # ...    options:      os: 'windows'\n```\n\n#### `outputStyle`\n\nControls how stdout/stderr is displayed when the task is ran as a transitive target. By default,\nthis setting is not defined and defers to the action pipeline, but can be overridden with one of the\nfollowing values:\n\n- `buffer` - Buffers output and displays after the task has exited (either success or failure).\n\n- `buffer-only-failure` - Like `buffer`, but only displays on failures.\n\n- `hash` - Ignores output and only displays the generated [hash](/docs/concepts/cache#hashing).\n\n- `none` - Ignores output.\n\n- `stream` - Streams output directly to the terminal. Will prefix each line of output with the target.\n\nmoon.yml\n\n```\ntasks:  test:    # ...    options:      outputStyle: 'stream'\n```\n\n#### `persistent`v1.6.0\n\nMarks the task as persistent (continuously running). [Persistent tasks](/docs/concepts/task#persistent)\nare handled differently than non-persistent tasks in the action graph. When running a target, all\npersistent tasks are ran last and in parallel, after all their dependencies have completed.\n\nThis is extremely useful for running a server (or a watcher) in the background while other tasks are\nrunning.\n\nmoon.yml\n\n```\ntasks:  dev:    # ...    options:      persistent: true\n```\n\nWe suggest using the [`preset`](#preset) setting instead, which enables this setting, amongst\nother useful settings.\n\n#### `priority`v1.35.0\n\nThe priority level determines the position of the task within the action pipeline queue. A task with\na higher priority will run sooner rather than later, while still respecting the topological order.\nSupports the following levels:\n\n- `critical`\n\n- `high`\n\n- `normal` (default)\n\n- `low`\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      priority: 'high'\n```\n\n#### `retryCount`\n\nThe number of attempts the task will retry execution before returning a failure. This is especially\nuseful for flaky tasks. Defaults to `0`.\n\nmoon.yml\n\n```\ntasks:  test:    # ...    options:      retryCount: 3\n```\n\n#### `runDepsInParallel`\n\nWhether to run the task's direct [`deps`](#deps) in parallel or serial (in order). Defaults to\n`true`.\n\nWhen disabled, this does not run dependencies of dependencies in serial, only direct dependencies.\n\nmoon.yml\n\n```\ntasks:  start:    # ...    deps:      - '~:clean'      - '~:build'    options:      runDepsInParallel: false\n```\n\n#### `runInCI`\n\nWhether to run the task automatically in a CI (continuous integration) environment when affected by\ntouched files using the [`moon ci`](/docs/commands/ci) command. Supports the following values:\n\n- `always` - Always run in CI, regardless if affected or not. v1.31.0\n\n- `affected`, `true` (default) - Only run in CI if affected by touched files.\n\n- `false` - Never run in CI.\n\n- `only` - Only run in CI, and not locally, if affected by touched files. v1.41.0\n\n- `skip` - Skip running in CI but run locally and allow task relationships to be valid. v1.41.0\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      runInCI: false\n```\n\n#### `runFromWorkspaceRoot`\n\nWhether to use the workspace root as the working directory when executing a task. Defaults to\n`false` and runs from the task's project root.\n\nmoon.yml\n\n```\ntasks:  typecheck:    # ...    options:      runFromWorkspaceRoot: true\n```\n\n#### `shell`\n\nWhether to run the command within a shell or not. Defaults to `true` for system toolchain or\nWindows, and `false` otherwise. The shell to run is determined by the [`unixShell`](#unixshell) and\n[`windowsShell`](#windowsshell) options respectively.\n\nmoon.yml\n\n```\ntasks:  native:    command: 'echo $SHELL'    options:      shell: true\n```\n\nHowever, if you'd like to use a different shell, or customize the shell's arguments, or have\ngranular control, you can set `shell` to false and configure a fully qualified command.\n\nmoon.yml\n\n```\ntasks:  native:    command: '/bin/zsh -c \"echo $SHELL\"'    options:      shell: false\n```\n\n#### `timeout`v1.26.0\n\nThe maximum time in seconds that the task is allowed to run, before it is force cancelled. If not\ndefined, will run indefinitely.\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      timeout: 120\n```\n\n#### `unixShell`v1.21.0\n\nCustomize the shell to run with when on a Unix operating system. Accepts `bash`, `elvish`, `fish`,\n`ion`, `murex`, `nu`, `pwsh`, `xonsh`, or `zsh`. If not defined, will derive the shell from the\n`SHELL` environment variable, or defaults to `bash`.\n\nmoon.yml\n\n```\ntasks:  native:    command: 'echo $SHELL'    options:      unixShell: 'fish'\n```\n\n#### `windowsShell`v1.21.0\n\nCustomize the shell to run with when on a Windows operating system. Accepts `bash` (typically via\nGit), `elvish`, `fish`, `murex`, `nu`, `pwsh`, or `xonsh`. If not defined, defaults to `pwsh`.\n\nmoon.yml\n\n```\ntasks:  native:    command: 'echo $SHELL'    options:      windowsShell: 'bash'\n```\n\n## Overrides\n\nDictates how a project interacts with settings defined at the top-level.\n\n## `toolchains`\n\n### `default`v1.31.0\n\nThe default [`toolchain`](#toolchain-1) for all task's within the current project. When a task's\n`toolchain` has not been explicitly configured, the toolchain will fallback to this configured\nvalue, otherwise the toolchain will be detected from the project's environment.\n\nmoon.yml\n\n```\ntoolchains:  default: 'node'\n```\n\n### `bun`\n\nConfigures Bun for this project and overrides the top-level [`bun`](/docs/config/toolchain#bun) setting.\n\n#### `version`\n\nDefines the explicit Bun [version specification](/docs/concepts/toolchain#version-specification) to use\nwhen running tasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  bun:    version: '1.0.0'\n```\n\n### `deno`\n\nConfigures Deno for this project and overrides the top-level [`deno`](/docs/config/toolchain#deno) setting.\n\n#### `version`\n\nDefines the explicit Deno [version specification](/docs/concepts/toolchain#version-specification) to\nuse when running tasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  deno:    version: '1.40.0'\n```\n\n### `node`\n\nConfigures Node.js for this project and overrides the top-level [`node`](/docs/config/toolchain#node) setting.\nCurrently, only the Node.js version can be overridden per-project, not the package manager.\n\n#### `version`\n\nDefines the explicit Node.js [version specification](/docs/concepts/toolchain#version-specification) to\nuse when running tasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  node:    version: '12.12.0'\n```\n\n### `python`\n\nConfigures Python for this project and overrides the top-level [`python`](/docs/config/toolchain#python)\nsetting.\n\n#### `version`\n\nDefines the explicit Python\n[version/channel specification](/docs/concepts/toolchain#version-specification) to use when running\ntasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  python:    version: '3.12.0'\n```\n\n### `rust`\n\nConfigures Rust for this project and overrides the top-level [`rust`](/docs/config/toolchain#rust) setting.\n\n#### `version`\n\nDefines the explicit Rust\n[version/channel specification](/docs/concepts/toolchain#version-specification) to use when running\ntasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  rust:    version: '1.68.0'\n```\n\n### `typescript`\n\n#### `includeProjectReferenceSources`v1.17.0\n\nOverrides the workspace-level\n[`includeProjectReferenceSources`](/docs/config/toolchain#includeprojectreferencesources) setting. Defaults to\nundefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    includeProjectReferenceSources: false\n```\n\n#### `includeSharedTypes`v1.17.0\n\nOverrides the workspace-level [`includeSharedTypes`](/docs/config/toolchain#includesharedtypes) setting.\nDefaults to undefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    includeSharedTypes: false\n```\n\n#### `routeOutDirToCache`\n\nOverrides the workspace-level [`routeOutDirToCache`](/docs/config/toolchain#routeoutdirtocache) setting.\nDefaults to undefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    routeOutDirToCache: false\n```\n\n#### `syncProjectReferences`\n\nOverrides the workspace-level [`syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting.\nDefaults to undefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    syncProjectReferences: false\n```\n\n#### `syncProjectReferencesToPaths`\n\nOverrides the workspace-level\n[`syncProjectReferencesToPaths`](/docs/config/toolchain#syncprojectreferencestopaths) setting. Defaults to\nundefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    syncProjectReferencesToPaths: false\n```\n\n## `workspace`\n\n### `inheritedTasks`\n\nProvides a layer of control when inheriting tasks from [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n#### `exclude`\n\nThe optional `exclude` setting permits a project to exclude specific tasks from being inherited. It\naccepts a list of strings, where each string is the name of a global task to exclude.\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    # Exclude the inherited `test` task for this project    exclude: ['test']\n```\n\nExclusion is applied after inclusion and before renaming.\n\n#### `include`\n\nThe optional `include` setting permits a project to only include specific inherited tasks (works\nlike an allow/white list). It accepts a list of strings, where each string is the name of a global\ntask to include.\n\nWhen this field is not defined, the project will inherit all tasks from the global project config.\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    # Include *no* tasks (works like a full exclude)    include: []    # Only include the `lint` and `test` tasks for this project    include:      - 'lint'      - 'test'\n```\n\nInclusion is applied before exclusion and renaming.\n\n#### `rename`\n\nThe optional `rename` setting permits a project to rename the inherited task within the current\nproject. It accepts a map of strings, where the key is the original name (found in the global\nproject config), and the value is the new name to use.\n\nFor example, say we have 2 tasks in the global project config called `buildPackage` and\n`buildApplication`, but we only need 1, and since we're an application, we should omit and rename.\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['buildPackage']    rename:      buildApplication: 'build'\n```\n\nRenaming occurs after inclusion and exclusion.\n\n## /docs/config/tasks\n\nSource: https://moonrepo.dev/docs/config/tasks\n\n# .moon/tasks\n\nThe `.moon/tasks/**/*` files configures file groups and tasks that are inherited by every project\nin the workspace based on inheritance conditions.\n[Learn more about task inheritance!](/docs/concepts/task-inheritance)\n\nProjects can override or merge with these settings within their respective [`moon.yml`](/docs/config/project).\n\n## `extends`\n\nDefines one or many external `.moon/tasks/all.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/tasks/all.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/tasks/all.yml'\n```\n\ncaution\n\nFor map-based settings, `fileGroups` and `tasks`, entries from both the extended configuration and\nlocal configuration are merged into a new map, with the values of the local taking precedence. Map\nvalues are not deep merged!\n\n## `fileGroups`\n\nFor more information on file group configuration, refer to the\n[`fileGroups`](/docs/config/project#filegroups) section in the [`moon.yml`](/docs/config/project) doc.\n\nDefines [file groups](/docs/concepts/file-group) that will be inherited by projects, and also enables\nenforcement of organizational patterns and file locations. For example, encourage projects to place\nsource files in a `src` folder, and all test files in `tests`.\n\n.moon/tasks/all.yml\n\n```\nfileGroups:  configs:    - '*.config.{js,cjs,mjs}'    - '*.json'  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*'    - '**/__tests__/**/*'  assets:    - 'assets/**/*'    - 'images/**/*'    - 'static/**/*'    - '**/*.{scss,css}'\n```\n\ninfo\n\nFile paths and globs used within a file group are relative from the inherited project's root, and\nnot the workspace root.\n\n## `implicitDeps`\n\nDefines task [`deps`](/docs/config/project#deps) that are implicitly inserted into all inherited tasks within\na project. This is extremely useful for pre-building projects that are used extensively throughout\nthe repo, or always building project dependencies. Defaults to an empty list.\n\n.moon/tasks/all.yml\n\n```\nimplicitDeps:  - '^:build'\n```\n\ninfo\n\nImplicit dependencies are always inherited, regardless of the [`mergeDeps`](/docs/config/project#mergedeps)\noption.\n\n## `implicitInputs`\n\nDefines task [`inputs`](/docs/config/project#inputs) that are implicitly inserted into all inherited tasks\nwithin a project. This is extremely useful for the \"changes to these files should always trigger a\ntask\" scenario.\n\nLike `inputs`, file paths/globs defined here are relative from the inheriting project.\n[Project and workspace relative file patterns](/docs/concepts/file-pattern#project-relative) are\nsupported and encouraged.\n\n.moon/tasks/node.yml\n\n```\nimplicitInputs:  - 'package.json'\n```\n\ninfo\n\nImplicit inputs are always inherited, regardless of the [`mergeInputs`](/docs/config/project#mergeinputs)\noption.\n\n## `inheritedBy`v2.0.0\n\nA map of conditions that must be met for the configuration within the file to be inherited by a\nproject. When this field is not defined, or is an empty map, the configuration will be inherited by\nall projects.\n\n.moon/tasks/custom.yml\n\n```\ninheritedBy:  # Project belongs to either javascript or typescript toolchain, but not the ruby toolchain  toolchains:    or: ['javascript', 'typescript']    not: ['ruby']  # And project is either a frontend or backend stack  stacks: ['frontend', 'backend']  # And project is either a library or tool layer  layers: ['library', 'tool']\n```\n\ninfo\n\nView the [official task inheritance guide](/docs/concepts/task-inheritance) for more information!\n\n## `tasks`\n\nFor more information on task configuration, refer to the [`tasks`](/docs/config/project#tasks) section in the\n[`moon.yml`](/docs/config/project) doc.\n\nAs mentioned in the link above, [tasks](/docs/concepts/task) are actions that are ran within the\ncontext of a project, and commonly wrap a command. For most workspaces, every project should have\nlinting, typechecking, testing, code formatting, so on and so forth. To reduce the amount of\nboilerplate that every project would require, this setting offers the ability to define tasks that\nare inherited by many projects within the workspace, but can also be overridden per project.\n\n.moon/tasks/all.yml\n\n```\ntasks:  format:    command: 'prettier --check .'  lint:    command: 'eslint --no-error-on-unmatched-pattern .'  test:    command: 'jest --passWithNoTests'  typecheck:    command: 'tsc --build'\n```\n\ninfo\n\nRelative file paths and globs used within a task are relative from the inherited project's root, and\nnot the workspace root.\n\n## `taskOptions`v1.20.0\n\nFor more information on task options, refer to the [`options`](/docs/config/project#options) section in the\n[`moon.yml`](/docs/config/project) doc.\n\nLike [tasks](#tasks), this setting allows you to define task options that will be inherited by all\ntasks within the configured file, and by all project-level inherited tasks. This setting is the 1st\nlink in the inheritance chain, and can be overridden within each task.\n\n.moon/tasks/all.yml\n\n```\ntaskOptions:  # Never cache builds  cache: false  # Always re-run flaky tests  retryCount: 2tasks:  build:    # ...    options:      # Override the default cache setting      cache: true\n```\n\n## /docs/config/template\n\nSource: https://moonrepo.dev/docs/config/template\n\n# template\n\nThe `template.yml` file configures metadata and variables for a template,\n[used by the generator](/docs/guides/codegen), and must exist at the root of a named template folder.\n\n## `id`v1.23.0\n\nOverrides the name (identifier) of the template, instead of inferring the name from the template\nfolder. Be aware that template names must be unique across the workspace, and across all template\nlocations that have been configured in [`generator.templates`](/docs/config/workspace#templates).\n\ntemplate.yml\n\n```\nid: 'npm-package'\n```\n\n## `title`Required\n\nA human readable title that will be displayed during the [`moon generate`](/docs/commands/generate)\nprocess.\n\ntemplate.yml\n\n```\ntitle: 'npm package'\n```\n\n## `description`Required\n\nA description of why the template exists, what its purpose is, and any other relevant information.\n\ntemplate.yml\n\n```\ndescription: |  Scaffolds the initial structure for an npm package,  including source and test folders, a package.json, and more.\n```\n\n## `destination`v1.19.0\n\nAn optional file path in which this template should be generated into. This provides a mechanism for\nstandardizing a destination location, and avoids having to manually pass a destination to\n[`moon generate`](/docs/commands/generate).\n\nIf the destination is prefixed with `/`, it will be relative from the workspace root, otherwise it\nis relative from the current working directory.\n\ntemplate.yml\n\n```\ndestination: 'packages/[name]'\n```\n\nThis setting supports [template variables](#variables) through `[varName]` syntax. Learn more in\nthe [code generation documentation](/docs/guides/codegen#interpolation).\n\n## `extends`v1.19.0\n\nOne or many other templates that this template should extend. Will deeply inherit all template files\nand variables.\n\ntemplate.yml\n\n```\nextends: ['base', 'configs']\n```\n\n## `variables`\n\nA mapping of variables that will be interpolated into all template files and file system paths when\n[rendering with Tera](https://tera.netlify.app/docs/#variables). The map key is the variable name\n(in camelCase or snake_case), while the value is a configuration object, as described with the\nsettings below.\n\ntemplate.yml\n\n```\nvariables:  name:    type: 'string'    default: ''    required: true    prompt: 'Package name?'\n```\n\n### `type`Required\n\nThe type of value for the variable. Accepts `array`, `boolean`, `string`, `object`, `number`, or\n`enum`. Floats are not supported, use strings instead.\n\nFor arrays and objects, the value of each member must be a JSON compatible type.\n\n### `internal`v1.23.0\n\nMarks a variable as internal only, which avoids the variable value being overwritten by command line\narguments.\n\n### `order`v1.23.0\n\nThe order in which the variable will be prompted to the user. By default, variables are prompted in\nthe order they are defined in the `template.yml` file.\n\n### Primitives & collections\n\nYour basic primitives: boolean, numbers, strings, and collections: arrays, objects.\n\n- array\n- boolean\n- number\n- object\n- string\n\ntemplate.yml\n\n```\nvariables:  type:    type: 'array'    prompt: 'Type?'    default: ['app', 'lib']\n```\n\ntemplate.yml\n\n```\nvariables:  private:    type: 'boolean'    prompt: 'Private?'    default: false\n```\n\ntemplate.yml\n\n```\nvariables:  age:    type: 'number'    prompt: 'Age?'    default: 0    required: true\n```\n\ntemplate.yml\n\n```\nvariables:  metadata:    type: 'object'    prompt: 'Metadata?'    default:      type: 'lib'      dev: true\n```\n\ntemplate.yml\n\n```\nvariables:  name:    type: 'string'    prompt: 'Name?'    required: true\n```\n\n### `default`Required\n\nThe default value of the variable. When `--defaults` is passed to\n[`moon generate`](/docs/commands/generate) or [`prompt`](#prompt) is not defined, the default value\nwill be used, otherwise the user will be prompted to enter a custom value.\n\n### `prompt`\n\nWhen defined, will prompt the user with a message in the terminal to input a custom value, otherwise\n[`default`](#default) will be used.\n\nFor arrays and objects, a valid JSON string must be provided as the value.\n\n### `required`\n\nMarks the variable as required during prompting only. For arrays, strings, and objects, will error\nfor empty values (`''`). For numbers, will error for zero's (`0`).\n\n### Enums\n\nAn enum is an explicit list of string values that a user can choose from.\n\ntemplate.yml\n\n```\nvariables:  color:    type: 'enum'    values: ['red', 'green', 'blue', 'purple']    default: 'purple'    prompt: 'Favorite color?'\n```\n\n### `default`\n\nThe default value of the variable. When `--defaults` is passed to\n[`moon generate`](/docs/commands/generate) or [`prompt`](#prompt) is not defined, the default value\nwill be used, otherwise the user will be prompted to enter a custom value.\n\nFor enums, the default value can be a string when [`multiple`](#multiple) is false, or a string or\nan array of strings when `multiple` is true. Furthermore, each default value must exist in the\n[`values`](#values) list.\n\ntemplate.yml\n\n```\n# Singlevariables:  color:    type: 'enum'    values: ['red', 'green', 'blue', 'purple']    default: 'purple'    prompt: 'Favorite color?'# Multiplevariables:  color:    type: 'enum'    values: ['red', 'green', 'blue', 'purple']    default: ['red', 'purple']    multiple: true    prompt: 'Favorite color?'\n```\n\n### `prompt`\n\nWhen defined, will prompt the user with a message in the terminal to input a custom value, otherwise\n[`default`](#default) will be used.\n\n### `multiple`\n\nAllows multiple values to be chosen during prompting. In the template, an array or strings will be\nrendered, otherwise when not-multiple, a single string will be.\n\n### `values`Required\n\nList of explicit values to choose from. Can either be defined with a string, which acts as a value\nand label, or as an object, which defines an explicit value and label.\n\ntemplate.yml\n\n```\nvariables:  color:    type: 'enum'    values:      - 'red'      # OR      - value: 'red'        label: 'Red '    # ...\n```\n\n## Frontmatter\n\nThe following settings are not available in `template.yml`, but can be defined as frontmatter at\nthe top of a template file. View the [code generation guide](/docs/guides/codegen#frontmatter) for more\ninformation.\n\n### `force`\n\nWhen enabled, will always overwrite a file of the same name at the destination path, and will bypass\nany prompting in the terminal.\n\n```\n---force: true---Some template content!\n```\n\n### `to`\n\nDefines a custom file path, relative from the destination root, in which to create the file. This\nwill override the file path within the template folder, and allow for conditional rendering and\nengine filters to be used.\n\n```\n{% set component_name = name | pascal_case %}---to: components/{{ component_name }}.tsx---export function {{ component_name }}() {  return\n;}\n```\n\n### `skip`\n\nWhen enabled, the template file will be skipped while writing to the destination path. This setting\ncan be used to conditionally render a file.\n\n```\n---skip: {{ name == \"someCondition\" }}---Some template content!\n```\n\n## /docs/config/toolchain\n\nSource: https://moonrepo.dev/docs/config/toolchain\n\n# .moon/toolchains\n\nThe `.moon/toolchains.yml` file configures the toolchain and the workspace development environment.\nThis file is optional.\n\nManaging tool version's within the toolchain ensures a deterministic environment across any machine\n(whether a developer, CI, or production machine).\n\n## `extends`\n\nDefines one or many external `.moon/toolchains.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/toolchains.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/toolchains.yml'\n```\n\ncaution\n\nSettings will be merged recursively for blocks, with values defined in the local configuration\ntaking precedence over those defined in the extended configuration.\n\n## `moon`v1.29.0\n\nConfigures how moon will receive information about latest releases and download locations.\n\n### `manifestUrl`\n\nDefines an HTTPS URL in which to fetch the current version information from.\n\n.moon/toolchains.yml\n\n```\nmoon:  manifestUrl: 'https://proxy.corp.net/moon/version'\n```\n\n### `downloadUrl`\n\nDefines an HTTPS URL in which the moon binary can be downloaded from. The download file name is\nhard-coded and will be appended to the provided URL.\n\nDefaults to downloading from GitHub: [https://github.com/moonrepo/moon/releases](https://github.com/moonrepo/moon/releases)\n\n.moon/toolchains.yml\n\n```\nmoon:  downloadUrl: 'https://github.com/moonrepo/moon/releases/latest/download'\n```\n\n## `proto`v1.39.0\n\nConfigures how moon integrates with and utilizes [proto](/proto).\n\n### `version`\n\nThe version of proto to install and run toolchains with. If proto or this version of proto has not\nbeen installed yet, it will be installed automatically when running a task.\n\n.moon/toolchains.yml\n\n```\nproto:  version: '0.51.0'\n```\n\n## Go\n\n## `go`v1.38.0\n\nRun `moon toolchain info go` for all available settings.\n\n## JavaScript\n\n## `javascript`v1.40.0\n\nRun `moon toolchain info javascript` for all available settings.\n\n## `bun`v1.40.0\n\nRun `moon toolchain info bun` for all available settings.\n\ninfo\n\nThis toolchain requires the [`javascript`](#javascript) toolchain to also be enabled.\n\n## `deno`v1.41.0\n\nRun `moon toolchain info deno` for all available settings.\n\ninfo\n\nThis toolchain requires the [`javascript`](#javascript) toolchain to also be enabled.\n\n## `node`v1.40.0\n\nRun `moon toolchain info node` for all available settings.\n\ninfo\n\nThis toolchain requires the [`javascript`](#javascript) toolchain to also be enabled.\n\n## `npm`v1.40.0\n\nRun `moon toolchain info npm` for all available settings.\n\ninfo\n\nThis toolchain requires the [`node`](#node) toolchain to also be enabled.\n\n## `pnpm`v1.40.0\n\nRun `moon toolchain info pnpm` for all available settings.\n\ninfo\n\nThis toolchain requires the [`node`](#node) toolchain to also be enabled.\n\n## `yarn`v1.40.0\n\nRun `moon toolchain info yarn` for all available settings.\n\ninfo\n\nThis toolchain requires the [`node`](#node) toolchain to also be enabled.\n\n## `typescript`\n\nRun `moon toolchain info typescript` for all available settings.\n\n## Pythonv1.30.0\n\ncaution\n\nPython support is currently a work in progress for v2!\n\n## `python`\n\nRun `moon toolchain info python` for all available settings.\n\n## Rust\n\n## `rust`v1.37.0\n\nRun `moon toolchain info rust` for all available settings.\n\n## /docs/config/workspace\n\nSource: https://moonrepo.dev/docs/config/workspace\n\n# .moon/workspace\n\nThe `.moon/workspace.yml` file configures projects and services in the workspace. This file is\nrequired.\n\n## `extends`\n\nDefines one or many external `.moon/workspace.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/workspace.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/workspace.yml'\n```\n\ninfo\n\nSettings will be merged recursively for blocks, with values defined in the local configuration\ntaking precedence over those defined in the extended configuration. However, the `projects` setting\ndoes not merge!\n\n## `projects`Required\n\nDefines the location of all [projects](/docs/concepts/project) within the workspace. Supports either a\nmanual map of projects (default), a list of globs in which to automatically locate projects, or\nboth.\n\ncaution\n\nProjects that depend on each other and form a cycle must be avoided! While we do our best to avoid\nan infinite loop and disconnect nodes from each other, there's no guarantee that tasks will run in\nthe correct order.\n\n### Using a map\n\nWhen using a map, each project must be manually configured and requires a unique\n[name](/docs/concepts/project#names) as the map key, where this name is used heavily on the command\nline and within the project graph for uniquely identifying the project amongst all projects. The map\nvalue (known as the project source) is a file system path to the project folder, relative from the\nworkspace root, and must be contained within the workspace boundary.\n\n.moon/workspace.yml\n\n```\nprojects:  admin: 'apps/admin'  apiClients: 'packages/api-clients'  designSystem: 'packages/design-system'  web: 'apps/web'\n```\n\n### Using globs\n\nIf manually mapping projects is too tedious or cumbersome, you may provide a list of\n[globs](/docs/concepts/file-pattern#globs) to automatically locate all project folders, relative from\nthe workspace root.\n\nWhen using this approach, the project name is derived from the project folder name, and is cleaned\nto our [supported characters](/docs/concepts/project#names), but can be customized with the\n[`id`](/docs/config/project#id) setting in [`moon.yml`](/docs/config/project). Furthermore, globbing does risk the\nchance of collision, and when that happens, we log a warning and skip the conflicting project from\nbeing configured in the project graph.\n\n.moon/workspace.yml\n\n```\nprojects:  - 'apps/*'  - 'packages/*'  # Only shared folders with a moon configuration  - 'shared/*/moon.yml'\n```\n\n### Using a map and globs\n\nFor those situations where you want to use both patterns, you can! The list of globs can be\ndefined under a `globs` field, while the map of projects under a `sources` field.\n\n.moon/workspace.yml\n\n```\nprojects:  globs:    - 'apps/*'    - 'packages/*'  sources:    www: 'www'\n```\n\nAdditionally, you can customize the format of project IDs for glob discovered projects. By default\nit inherits the fodler name, but this has a high chance of collision. Instead you can configure\n`globFormat` to use a different format, for example, using the full workspace relative path as the\nproject ID.\n\n.moon/workspace.yml\n\n```\nprojects:  globFormat: 'source-path'  globs:    - 'packages/**/moon.yml'\n```\n\n## `defaultProject`v2.0.0\n\nDefines the default project to focus on when no project scope is specified on the command line for\ntask targets.\n\n.moon/workspace.yml\n\n```\ndefaultProject: 'web'\n```\n\n## `codeowners`v1.8.0\n\nConfigures code owners (`CODEOWNERS`) integration across the entire workspace.\n\n### `globalPaths`\n\nThis setting defines file patterns and their owners at the workspace-level, and are applied to any\nmatching path, at any depth, within the entire workspace. This is useful for defining global or\nfallback owners when a granular [project-level path](/docs/config/project#paths) does not match or exist.\n\n.moon/workspace.yml\n\n```\ncodeowners:  globalPaths:    '*': ['@admins']    'config/': ['@infra']    '/.github/': ['@infra']\n```\n\n### `orderBy`\n\nThe order in which code owners, grouped by project, are listed in the `CODEOWNERS` file. Accepts\n\"file-source\" (default) or \"project-id\".\n\n.moon/workspace.yml\n\n```\ncodeowners:  orderBy: 'project-id'\n```\n\n### `sync`\n\nWill automatically generate a `CODEOWNERS` file by aggregating and syncing all project\n[`owners`](/docs/config/project#owners) in the workspace when a [target is run](/docs/concepts/target). The format\nand location of the `CODEOWNERS` file is based on the [`vcs.provider`](#provider) setting. Defaults\nto `false`.\n\n.moon/workspace.yml\n\n```\ncodeowners:  sync: true\n```\n\n## `constraints`\n\nConfigures constraints between projects that are enforced during project graph generation. This is\nalso known as project boundaries.\n\n### `enforceLayerRelationships`\n\nEnforces allowed relationships between a project and its dependencies based on the project's\n[`layer`](/docs/config/project#layer) and [`stack`](/docs/config/project#stack) settings. When a project depends on\nanother project of an invalid layer, a layering violation error will be thrown when attempting to\nrun a task.\n\nLayers are allowed to depend on lower layers in the same stack, but not higher layers. Additionally,\nlayers may depend on itself, excluding automations and applications. The following layers are\nstacked as such:\n\nLayer Description\n\n`automation` An automated testing suite, like E2E, integration, or visual tests.\n\n`application` An application of any kind.\n\n`tool` An internal tool, CLI, one-off script, etc.\n\n`library` A self-contained, shareable, and publishable set of code.\n\n`scaffolding` Templates or generators for scaffolding.\n\n`configuration` Configuration files or infrastructure.\n\n`unknown` When not configured.\n\nWhen the project `stack` setting is defined, it alters these rules to allow these kinds of\nrelationships. For example, a frontend application can depend on a backend application, but not\nanother frontend application.\n\n.moon/workspace.yml\n\n```\nconstraints:  enforceLayerRelationships: false\n```\n\nProjects with an unconfigured or unknown layer are ignored during enforcement.\n\n### `tagRelationships`\n\nEnforces allowed relationships between a project and its dependencies based on the project's\n[`tags`](/docs/config/project#tags) setting. This works in a similar fashion to `enforceLayerRelationships`,\nbut gives you far more control over what these relationships look like.\n\nFor example, let's enforce that Next.js projects using the `next` tag can only depend on React\nprojects using the `react` tag. If a dependency does not have one of the configured required tags,\nin this case `react`, an error will occur.\n\n.moon/workspace.yml\n\n```\nconstraints:  tagRelationships:    next: ['react']\n```\n\nOn the project side, we would configure [`moon.yml`](/docs/config/project#tags) like so:\n\napp/moon.yml\n\n```\ntags: ['next']dependsOn: ['components']\n```\n\npackages/components/moon.yml\n\n```\ntags: ['react']\n```\n\n## `docker`v1.27.0\n\nConfigures Docker integration for the entire workspace.\n\n### `prune`\n\nConfigures aspects of the Docker pruning process when\n[`moon docker prune`](/docs/commands/docker/prune) is executed.\n\n#### `deleteVendorDirectories`\n\nAutomatically delete vendor directories (package manager dependencies, build targets, etc) while\npruning. For example, `node_modules` for JavaScript, or `target` for Rust. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\ndocker:  prune:    deleteVendorDirectories: false\n```\n\nThis process happens before toolchain dependencies are installed.\n\n#### `installToolchainDependencies`\n\nAutomatically install production dependencies for all required toolchain's of the focused projects\nwithin the Docker build. For example, `node_modules` for JavaScript. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\ndocker:  prune:    installToolchainDependencies: false\n```\n\nThis process happens after vendor directories are deleted.\n\n### `scaffold`\n\nConfigures aspects of the Docker scaffolding process when\n[`moon docker scaffold`](/docs/commands/docker/scaffold) is executed. Only applies to the\n[workspace skeleton](/docs/commands/docker/scaffold#workspace).\n\n#### `configsPhaseGlobs`\n\nList of globs in which to copy additional workspace-relative files into the `.moon/docker/workspace`\nskeleton. When not defined, does nothing.\n\n.moon/workspace.yml\n\n```\ndocker:  scaffold:    configsPhaseGlobs:      - '**/package.json'\n```\n\n## `experiments`v1.11.0\n\nEnable or disable experiments that alter core functionality.\n\nwarning\n\nExperiments are a work in progress and may be buggy. Please report any issues you encounter!\n\n### `fasterGlobWalk`v1.34.0\n\nUtilizes a new concurrent glob walking implementation that is on average, 1.5-2x faster than the\ncurrent implementation. Additionally, common globs are now cached for the duration of the process.\nDefaults to `true`.\n\n.moon/workspace.yml\n\n```\nexperiments:  fasterGlobWalk: true\n```\n\n### `gitV2`v1.34.0\n\nUtilizes a Git implementation, that has better support for submodules, subtrees, and workspaces.\nAdditionally, processes are parallized when applicable. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\nexperiments:  gitV2: true\n```\n\n## `generator`\n\nConfigures aspects of the template generator.\n\n### `templates`\n\nA list of paths in which templates can be located. Supports the following types of paths, and\ndefaults to `./templates`.\n\n- File system paths, relative from the workspace root.\n\n- Git repositories and a revision, prefixed with `git://`. v1.23.0\n\n- npm packages and a version, prefixed with `npm://`. v1.23.0\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates'    - 'file://./other/templates'    - 'git://github.com/moonrepo/templates#master'    - 'npm://@moonrepo/templates#1.2.3'\n```\n\nLearn more about this in the official\n[code generation guide](/docs/guides/codegen#configuring-template-locations)!\n\n## `hasher`\n\nConfigures aspects of the smart hashing layer.\n\n### `ignoreMissingPatterns`v1.10.0\n\nWhen [`hasher.warnOnMissingInputs`](#warnonmissinginputs) is enabled, moon will log a warning to the\nterminal that an input is missing. This is useful for uncovering misconfigurations, but can be quite\nnoisy when inputs are truly optional.\n\nTo ignore warnings for missing inputs, a list of [glob patterns](/docs/concepts/file-pattern#globs) can\nbe configured to filter and ignore files. Files are matched against workspace relative paths, so\nprefixing patterns with `**/` is suggested.\n\n.moon/workspace.yml\n\n```\nhasher:  ignoreMissingPatterns:    - '**/.eslintrc.*'    - '**/*.config.*'\n```\n\n### `ignorePatterns`v1.10.0\n\nA list of [glob patterns](/docs/concepts/file-pattern#globs) used to filter and ignore files during the\ninputs hashing process. Files are matched against workspace relative paths, so prefixing patterns\nwith `**/` is suggested.\n\n.moon/workspace.yml\n\n```\nhasher:  ignorePatterns:    - '**/*.png'\n```\n\n### `optimization`\n\nDetermines the optimization level to utilize when hashing content before running targets.\n\n- `accuracy` (default) - When hashing dependency versions, utilize the resolved value in the lockfile. This requires parsing the lockfile, which may reduce performance.\n\n- `performance` - When hashing dependency versions, utilize the value defined in the manifest. This is typically a version range or requirement.\n\n.moon/workspace.yml\n\n```\nhasher:  optimization: 'performance'\n```\n\n### `walkStrategy`\n\nDefines the file system walking strategy to utilize when discovering inputs to hash.\n\n- `glob` - Walks the file system using glob patterns.\n\n- `vcs` (default) - Calls out to the [VCS](#vcs) to extract files from its working tree.\n\n.moon/workspace.yml\n\n```\nhasher:  walkStrategy: 'glob'\n```\n\n### `warnOnMissingInputs`\n\nWhen enabled, will log warnings to the console when attempting to hash an input that does not exist.\nThis is useful in uncovering misconfigured tasks. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\nhasher:  warnOnMissingInputs: false\n```\n\n## `notifier`\n\nConfigures how moon notifies and interacts with a developer or an external system.\n\n### `terminalNotifications`v1.38.0\n\nWhen defined, will display OS notifications for action pipeline events when running commands from a\nterminal. Supports the following values:\n\n- `always` - Display on pipeline success and failure.\n\n- `failure` - Display on pipeline failure only.\n\n- `success` - Display on pipeline success only.\n\n- `task-failure` - Display for each task failure.\n\n.moon/workspace.yml\n\n```\nnotifier:  terminalNotifications: 'always'\n```\n\n### `webhookUrl`\n\nDefines an HTTPS URL that all pipeline events will be posted to. View the\n[webhooks guide for more information](/docs/guides/webhooks) on available events.\n\n.moon/workspace.yml\n\n```\nnotifier:  webhookUrl: 'https://api.company.com/some/endpoint'\n```\n\n### `acknowledge`\n\nWhen enabled, webhook notifier will wait for request result and validates the return code for 2xx.\nDefaults to `false`.\n\nwarning\n\nActivating this setting will slow down your pipeline, because every webhook request will be\nevaluated!\n\n.moon/workspace.yml\n\n```\nnotifier:  webhookUrl: 'https://api.company.com/some/endpoint'  webhookAcknowledge: true\n```\n\n## `pipeline`\n\nConfigures aspects of task running and the action pipeline.\n\n### `autoCleanCache`v1.24.0\n\nAutomatically cleans cached artifacts older than [`cacheLifetime`](#cachelifetime) from the cache\ndirectory (`.moon/cache`) after every run. This is useful for keeping the cache directory lean.\nDefaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  autoCleanCache: false\n```\n\n### `cacheLifetime`\n\nThe maximum lifetime of cached artifacts before they're marked as stale and automatically removed by\nthe action pipeline. Defaults to \"7 days\". This field requires an integer and a timeframe unit that\ncan be [parsed as a duration](https://docs.rs/humantime/2.1.0/humantime/fn.parse_duration.html).\n\n.moon/workspace.yml\n\n```\npipeline:  cacheLifetime: '24 hours'\n```\n\n### `inheritColorsForPipedTasks`\n\nForce colors to be inherited from the current terminal for all tasks that are ran as a child process\nand their output is piped to the action pipeline. Defaults to `true`.\n[View more about color handling in moon](/docs/commands/overview#colors).\n\n.moon/workspace.yml\n\n```\npipeline:  inheritColorsForPipedTasks: true\n```\n\n### `installDependencies`v1.34.0\n\nWhen enabled, runs the\n[`InstallWorkspaceDeps` and `InstallProjectDeps` actions](/docs/how-it-works/action-graph#install-dependencies)\nwithin the pipeline before running an applicable task. Installation is determined based on changed\nmanifests and lockfiles. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  installDependencies: false\n```\n\nInstead of a boolean, a list of toolchain IDs can be provided to only allow those toolchains to\ninstall dependencies.\n\n.moon/workspace.yml\n\n```\npipeline:  installDependencies: ['node']\n```\n\n### `killProcessThreshold`v1.32.1\n\nThreshold in milliseconds in which to force kill running child processes after the pipeline receives\nan external signal (like `SIGINT` or `SIGTERM`). A value of 0 will not kill the process and let them\nrun to completion. Defaults to `2000` (2 seconds).\n\n.moon/workspace.yml\n\n```\npipeline:  killProcessThreshold: 5000\n```\n\n### `logRunningCommand`\n\nWhen enabled, will log the task's command, resolved arguments, and working directory when a target\nis ran. Defaults to `false`.\n\n.moon/workspace.yml\n\n```\npipeline:  logRunningCommand: true\n```\n\n### `syncProjects`v1.34.0\n\nWhen enabled, runs the [`SyncProject` action](/docs/how-it-works/action-graph#sync-project) within the\npipeline before running an applicable task. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  syncProjects: false\n```\n\nInstead of a boolean, a list of project IDs can be provided to only sync those projects.\n\n.moon/workspace.yml\n\n```\npipeline:  syncProjects: ['app']\n```\n\nThe [`moon sync projects`](/docs/commands/sync/projects) command can be executed to manually sync\nprojects.\n\n### `syncWorkspace`v1.34.0\n\nWhen enabled, runs the [`SyncWorkspace` action](/docs/how-it-works/action-graph#sync-workspace) within\nthe pipeline before all other actions. This syncing includes operations such as codeowners, VCS\nhooks, and more. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  syncWorkspace: false\n```\n\nThe [`moon sync ...`](/docs/commands/sync) sub-commands can be executed to manually sync features.\n\n## `remote`v1.30.0\n\nConfigures a remote service, primarily for cloud-based caching of artifacts. Learn more about this\nin the [remote caching](/docs/guides/remote-cache) guide.\n\n### `api`v1.32.0\n\nThe API format of the remote server. This format dictates which type of client moon uses for\ncommunicating with. Supports the following:\n\n- `grpc` (default) - Uses the gRPC API: [https://github.com/bazelbuild/remote-apis](https://github.com/bazelbuild/remote-apis)\n\n- `http` - Uses the HTTP API: [https://bazel.build/remote/caching#http-caching](https://bazel.build/remote/caching#http-caching)\n\n.moon/workspace.yml\n\n```\nremote:  api: 'grpc'\n```\n\n### `auth`v1.32.0\n\nConfigures authorization and authentication level features of our remote clients.\n\n#### `headers`v1.32.0\n\nA mapping of HTTP headers to include in all requests to the remote server. These headers are applied\nto all [API formats and protocols](#api), not just HTTP.\n\n.moon/workspace.yml\n\n```\nremote:  auth:    headers:      'X-Custom-Header': 'value'\n```\n\n#### `token`v1.32.0\n\nThe name of an environment variable in which to extract a token for\n[Bearer HTTP authorization](https://swagger.io/docs/specification/v3_0/authentication/bearer-authentication/).\nAn `Authorization` HTTP header will be included in all requests to the remote server.\n\nIf the token does not exist, or is not enabled, remote caching will be disabled.\n\n.moon/workspace.yml\n\n```\nremote:  auth:    token: 'ENV_VAR_NAME'\n```\n\n### `cache`\n\nConfigures aspects of the caching layer, primarily the action cache (AC) and content addressable\ncache (CAS).\n\n#### `compression`v1.31.0\n\nThe compression format to use when uploading/downloading blobs. Supports `none` and `zstd`, and\ndefaults to no compression (`identity` format in RE API).\n\n.moon/workspace.yml\n\n```\nremote:  cache:    compression: 'zstd'\n```\n\ninfo\n\nCompression is only applied to gRPC based APIs, not HTTP.\n\n#### `instanceName`\n\nA\n[unique identifier](https://github.com/bazelbuild/remote-apis/blob/main/build/bazel/remote/execution/v2/remote_execution.proto#L223)\nused to distinguish between the various instances on the host. This allows the same remote service\nto serve and partition multiple moon repositories. Defaults to `moon-outputs`.\n\n.moon/workspace.yml\n\n```\nremote:  cache:    instanceName: 'custom-dir-name'\n```\n\nWe suggest changing the instance name to the name of your repository!\n\n#### `localReadOnly`v1.40.0\n\nWhen enabled and developing locally, existing remote blobs will only be downloaded, but new local\nblobs will not be uploaded. Blobs will only be uploaded in CI environments.\n\n.moon/workspace.yml\n\n```\nremote:  cache:    localReadOnly: true\n```\n\n#### `verifyIntegrity`v1.36.0\n\nWhen downloading blobs, verify the digests/hashes in the response match the associated blob\ncontents. This will reduce performance but ensure partial or corrupted blobs won't cause failures.\nDefaults to `false`.\n\n.moon/workspace.yml\n\n```\nremote:  cache:    verifyIntegrity: true\n```\n\n### `host`\n\nThe host URL to communicate with when uploading and downloading artifacts. Supports both\n`grpc(s)://` and `http(s)://` protocols. This field is required!\n\n.moon/workspace.yml\n\n```\nremote:  host: 'grpcs://your-host.com:9092'\n```\n\n### `mtls`\n\nConnect to the host using server and client authentication with mTLS. This takes precedence over\nnormal TLS.\n\n.moon/workspace.yml\n\n```\nremote:  # ...  mtls:    caCert: 'certs/ca.pem'    clientCert: 'certs/client.pem'    clientKey: 'certs/client.key'    domain: 'your-host.com'\n```\n\n#### `assumeHttp2`\n\nIf true, assume that the host supports HTTP/2, even if it doesn't provide protocol negotiation via\nALPN.\n\n#### `caCert`\n\nA file path, relative from the workspace root, to the certificate authority PEM encoded X509\ncertificate (typically `ca.pem`).\n\n#### `clientCert`\n\nA file path, relative from the workspace root, to the client's PEM encoded X509 certificate\n(typically `client.pem`).\n\n#### `clientKey`\n\nA file path, relative from the workspace root, to the client's PEM encoded X509 private key\n(typically `client.key`).\n\n#### `domain`\n\nThe domain name in which to verify the TLS certificate.\n\n### `tls`\n\nConnect to the host using server-only authentication with TLS.\n\n.moon/workspace.yml\n\n```\nremote:  # ...  tls:    cert: 'certs/ca.pem'    domain: 'your-host.com'\n```\n\n#### `assumeHttp2`\n\nIf true, assume that the host supports HTTP/2, even if it doesn't provide protocol negotiation via\nALPN.\n\n#### `cert`\n\nA file path, relative from the workspace root, to the certificate authority PEM encoded X509\ncertificate (typically `ca.pem`).\n\n#### `domain`\n\nThe domain name in which to verify the TLS certificate.\n\n## `telemetry`\n\nWhen enabled, will check for a newer moon version and send anonymous usage data to the moonrepo\nteam. This data is used to improve the quality and reliability of the tool. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\ntelemetry: false\n```\n\n## `vcs`\n\nConfigures the version control system to utilize within the workspace (and repository). A VCS is\nrequired for determining touched (added, modified, etc) files, calculating file hashes, computing\naffected files, and much more.\n\n### `defaultBranch`\n\nDefines the default branch in the repository for comparing differences against. For git, this is\ntypically \"master\" (default) or \"main\".\n\n.moon/workspace.yml\n\n```\nvcs:  defaultBranch: 'master'\n```\n\n### `hooks`v1.9.0\n\nDefines a mapping of hooks to a list of commands to run when that event is triggered. There are no\nrestrictions to what commands can be run, but the binaries for each command must exist on each\nmachine that will be running hooks.\n\nFor Git, each [hook name](https://git-scm.com/docs/githooks#_hooks) must be a valid kebab-cased\nname. [Learn more about Git hooks](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks).\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    pre-commit:      - 'moon run :lint :format --affected --status=staged --no-bail'      - 'another-command'\n```\n\ninfo\n\nIf running `moon` commands directly, the `moon` binary must be installed globally!\n\n### `hookFormat`v1.29.0\n\nThe shell and file type in which generated hook files are formatted with. Supports the following:\n\n- `native` (default) - The format native to the current operating system. Bash on Unix, and PowerShell on Windows.\n\n- `bash` - Forces the format to Bash for all operating systems.\n\n.moon/workspace.yml\n\n```\nvcs:  hookFormat: 'bash'\n```\n\n### `client`\n\nDefines the VCS tool/binary that is being used for managing the repository. Accepts \"git\" (default).\nExpect more version control systems in the future!\n\n.moon/workspace.yml\n\n```\nvcs:  client: 'git'\n```\n\n### `provider`v1.8.0\n\nDefines the service provider that the repository is hosted on. Accepts \"github\" (default), \"gitlab\",\n\"bitbucket\", or \"other\".\n\n.moon/workspace.yml\n\n```\nvcs:  provider: 'github'\n```\n\n### `remoteCandidates`\n\n(Git only) Defines a list of remote candidates to query against to determine merge bases. Defaults\nto \"origin\" and \"upstream\".\n\n.moon/workspace.yml\n\n```\nvcs:  remoteCandidates:    - 'origin'    - 'upstream'\n```\n\n### `sync`v1.9.0\n\nWill automatically generate [hook scripts](#hooks) to `.moon/hooks` and sync the scripts to the\nlocal VCS checkout. The hooks format and location is based on the [`vcs.client`](#client) setting.\nDefaults to `false`.\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    # ...  sync: true\n```\n\ncaution\n\nWhen enabled, this will sync hooks for all users of the repository. For personal or small\nprojects, this may be fine, but for larger projects, this may be undesirable and disruptive!\n\n## `versionConstraint`\n\nDefines a version requirement for the currently running moon binary. This provides a mechanism for\nenforcing that the globally installed moon on every developers machine is using an applicable\nversion.\n\n.moon/workspace.yml\n\n```\nversionConstraint: '>=0.20.0'\n```\n\n## /docs/create-project\n\nSource: https://moonrepo.dev/docs/create-project\n\n# Create a project\n\n3 min\n\nWith a [workspace](/docs/setup-workspace), we can now house one or many [projects](/docs/concepts/project),\nwith a project being an application, library, or tool. In the end, each project will have its own\nbuild layer, personal tasks, and custom configuration.\n\n## Declaring a project in the workspace\n\nAlthough a project may exist in your repository, it's not accessible from moon until it's been\nmapped in the [`projects`](/docs/config/workspace#projects) setting found in\n[`.moon/workspace.yml`](/docs/config/workspace). When mapping a project, we require a unique name for\nthe project, and a project source location (path relative from the workspace root).\n\nLet's say we have a frontend web application called \"client\", and a backend application called\n\"server\", our `projects` setting would look like the following.\n\n.moon/workspace.yml\n\n```\nprojects:  client: 'apps/client'  server: 'apps/server'\n```\n\nWe can now run [`moon project client`](/docs/commands/project) and\n[`moon project server`](/docs/commands/project) to display information about each project. If these\nprojects were not mapped, or were pointing to an invalid source, the command would throw an error.\n\nsuccess\n\nThe [`projects`](/docs/config/workspace#projects) setting also supports a list of globs, if you'd prefer\nto not manually curate the projects list!\n\n## Configuring a project\n\nA project can be configured in 1 of 2 ways:\n\n- Through the [`.moon/tasks/all.yml`](/docs/config/tasks) config file, which defines file groups and tasks that are inherited by all projects within the workspace. Perfect for standardizing common tasks like linting, typechecking, and code formatting.\n\n- Through the [`moon.yml`](/docs/config/project) config file, found at the root of each project, which defines files groups, tasks, dependencies, and more that are unique to that project.\n\nBoth config files are optional, and can be used separately or together, the choice is yours!\n\nNow let's continue with our client and server example above. If we wanted to configure both\nprojects, and define config that's also shared between the 2, we could do something like the\nfollowing:\n\n- Client\n- Server\n- Both (inherited)\n\napps/client/moon.yml\n\n```\ntasks:  build:    command: 'vite dev'    inputs:      - 'src/**/*'    outputs:      - 'dist'\n```\n\napps/server/moon.yml\n\n```\ntasks:  build:    command: 'babel src --out-dir build'    inputs:      - 'src/**/*'    outputs:      - 'build'\n```\n\n.moon/tasks/all.yml\n\n```\ntasks:  format:    command: 'prettier --check .'  lint:    command: 'eslint --no-error-on-unmatched-pattern .'  test:    command: 'jest --passWithNoTests .'  typecheck:    command: 'tsc --build'\n```\n\n### Adding optional metadata\n\nWhen utilizing moon in a large monorepo or organization, ownership becomes very important, but also\ndifficult to maintain. To combat this problem, moon supports the\n[`project`](/docs/config/project#project) field within a project's [`moon.yml`](/docs/config/project)\nconfig.\n\nThis field is optional by default, but when defined it provides metadata about the project,\nspecifically around team ownership, which developers maintain the project, where to discuss it, and\nmore!\n\nFurthermore, we also support the [`layer`](/docs/config/project#layer) and\n[`language`](/docs/config/project#language) settings for a more granular breakdown of what exists in the\nrepository.\n\n/moon.yml\n\n```\nlayer: 'tool'language: 'typescript'project:  name: 'moon'  description: 'A repo management tool.'  channel: '#moon'  owner: 'infra.platform'  maintainers: ['miles.johnson']\n```\n\n## Next steps\n\n[Setup toolchain](/docs/setup-toolchain)[Configure `.moon/workspace.yml` further](/docs/config/workspace)[Configure `.moon/tasks/all.yml` further](/docs/config/tasks)[Configure `moon.yml` further](/docs/config/project)[Learn about projects](/docs/concepts/project)\n\n## /docs/create-task\n\nSource: https://moonrepo.dev/docs/create-task\n\n# Create a task\n\n6 min\n\nThe primary focus of moon is a task runner, and for it to operate in any capacity, it requires tasks\nto run. In moon, a task is a binary or system command that is ran as a child process within the\ncontext of a project (is the current working directory). Tasks are defined per project with\n[`moon.yml`](/docs/config/project), or inherited by many projects with\n[`.moon/tasks/all.yml`](/docs/config/tasks), but can also be inferred from a language's ecosystem\n([we'll talk about this later](/docs/migrate-to-moon)).\n\ntip\n\nChange the language dropdown at the top right to switch the examples!\n\n## Configuring a task\n\nMost  if not all projects  utilize the same core tasks: linting, testing, code formatting,\ntypechecking, and building. Because these are so universal, let's implement the build task within\na project using [`moon.yml`](/docs/config/project).\n\nBegin by creating the `moon.yml` file at the root of a project and add `build` to the\n[`tasks`](/docs/config/project#tasks) field, with a [`command`](/docs/config/project#command) parameter.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build'\n```\n\nBy itself, this isn't doing much, so let's add some arguments. Arguments can also be defined with\nthe [`args`](/docs/config/project#args) setting.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build --mode production --no-stats'\n```\n\nWith this, the task can be ran from the command line with\n[`moon run :build`](/docs/commands/run)! This is tasks in its most simplest form, but continue\nreading on how to take full advantage of our task runner.\n\n### Inputs\n\nOur task above works, but isn't very efficient as it always runs, regardless of what has changed\nsince the last time it has ran. This becomes problematic in continuous integration environments, not\njust locally.\n\nTo mitigate this problem, moon provides a system known as inputs, which are file paths, globs, and\nenvironment variables that are used by the task when it's ran. moon will use and compare these\ninputs to calculate whether to run, or to return the previous run state from the cache.\n\nIf you're a bit confused, let's demonstrate this by expanding the task with the\n[`inputs`](/docs/config/project#inputs) setting.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build --mode production --no-stats'    inputs:      - 'src/**/*'      - 'webpack.config.js'      - '/webpack-shared.config.js'\n```\n\nThis list of inputs may look complicated, but they are merely run checks. For example, when moon\ndetects a change in...\n\n- Any files within the `src` folder, relative from the project's root.\n\n- A config file in the project's root.\n\n- A shared config file in the workspace root (denoted by the leading `/`).\n\n...the task will be ran! If the change occurs outside of the project or outside the list of\ninputs, the task will not be ran.\n\ntip\n\nInputs are a powerful feature that can be fine-tuned to your project's need. Be as granular or open\nas you want, the choice is yours!\n\n### Outputs\n\nOutputs are the opposite of [inputs](#inputs), as they are files and folders that are created as a\nresult of running the task. With that being said, outputs are optional, as not all tasks require\nthem, and the ones that do are typically build related.\n\nNow why is declaring outputs important? For incremental builds and smart caching! When moon\nencounters a build that has already been built, it hydrates all necessary outputs from the cache,\nthen immediately exits. No more waiting for long builds!\n\nContinuing our example, let's route the built files and expand our task with the\n[`outputs`](/docs/config/project#outputs) setting.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build --mode production --no-stats --output-path @out(0)'    inputs:      - 'src/**/*'      - 'webpack.config.js'      - '/webpack-shared.config.js'    outputs:      - 'build'\n```\n\n## Depending on other tasks\n\nFor scenarios where you need run a task before another task, as you're expecting some repository\nstate or artifact to exist, can be achieved with the [`deps`](/docs/config/project#deps) setting, which\nrequires a list of [targets](/docs/concepts/target):\n\n- `:` - Full canonical target.\n\n- `~:` or `` - A task within the current project.\n\n- `^:` - A task from all [depended on projects](/docs/concepts/project#dependencies).\n\n/moon.yml\n\n```\ndependsOn:  # ...tasks:  build:    # ...    deps:      - '^:build'\n```\n\n## Using file groups\n\nOnce you're familiar with configuring tasks, you may notice certain inputs being repeated\nconstantly, like source files, test files, and configuration. To reduce the amount of boilerplate\nrequired, moon provides a feature known as [file groups](/docs/concepts/file-group), which enables\ngrouping of similar file types within a project using\n[file glob patterns or literal file paths](/docs/concepts/file-pattern).\n\nFile groups are defined with the [`fileGroups`](/docs/config/project#filegroups) setting, which maps a\nlist of file paths/globs to a group, like so.\n\n/moon.yml\n\n```\nfileGroups:  configs:    - '*.config.js'  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*'\n```\n\nWe can then replace the inputs in our task above with these new file groups using a syntax known as\n[tokens](/docs/concepts/token), specifically the [`@globs`](/docs/concepts/token#globs) and\n[`@files`](/docs/concepts/token#files) token functions. Tokens are an advanced feature, so please refer\nto their documentation for more information!\n\n/moon.yml\n\n```\nlanguage: 'javascript'fileGroups:  # ...tasks:  build:    command: 'webpack build --mode production --no-stats --output-path @out(0)'    inputs:      - '@globs(sources)'      - 'webpack.config.js'      - '/webpack-shared.config.js'    outputs:      - 'build'\n```\n\nWith file groups (and tokens), you're able to reduce the amount of configuration required and\nencourage certain file structures for consuming projects!\n\n## Next steps\n\n[Run a task](/docs/run-task)[Configure `.moon/tasks/all.yml` further](/docs/config/tasks)[Configure `moon.yml` further](/docs/config/project)[Learn about tasks](/docs/concepts/task)[Learn about tokens](/docs/concepts/token)\n\n## /docs/editors\n\nSource: https://moonrepo.dev/docs/editors\n\n- [Home](/)\n- [Editors](/docs/editors)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Editors\n\n[ VS CodeEnhance your VS Code experience with our integrated moon console! Whether you're a fan of the](/docs/editors/vscode)\n\n[template](/docs/config/template)\n\n[VS Code](/docs/editors/vscode)\n\n## /docs/editors/vscode\n\nSource: https://moonrepo.dev/docs/editors/vscode\n\n# VS Code extension\n\nEnhance your VS Code experience with our integrated moon console! Whether you're a fan of the\ncommand line, or prefer interactive interfaces, our console will be a welcome experience.\n\nThis extension is in its early stages. Expect more advanced features in the future, like\nautocompletion, config validation, and more!\n\n## Views\n\nAll views are available within the moon sidebar. Simply click the moon icon in the left activity\nbar!\n\n### Projects\n\nThe backbone of moon is the projects view. In this view, all moon configured projects will be\nlisted, categorized by their [`layer`](/docs/config/project#layer), [`stack`](/docs/config/project#stack),\nand designated with their [`language`](/docs/config/project#language).\n\nEach project can then be expanded to view all available tasks. Tasks can be ran by clicking the ``\nicon, or using the command palette.\n\nThis view is available in both the \"Explorer\" and \"moon\" sidebars.\n\n### Tags\n\nSimilar to the projects view, the tags view displays projects grouped by their\n[`tags`](/docs/config/project#tags).\n\nThis view is only available in the \"moon\" sidebar.\n\n### Last run\n\nInformation about the last ran task will be displayed in a beautiful table with detailed stats.\n\nThis table displays all actions that were ran alongside the primary target(s). They are ordered\ntopologically via the action graph.\n\n## Features\n\n### YAML validation\n\nTo enable accurate validation of our YAML configuration files, you'll need to update the\n`yaml.schemas` setting in `.vscode/settings.json` to point to the local schemas at\n`.moon/cache/schemas`.\n\nThis can be automated by running the \"moon: Append YAML schemas configuration to settings\" in the\ncommand palette, after the extension has been installed.\n\n## Troubleshooting\n\nView the\n[official VS Code marketplace](https://marketplace.visualstudio.com/items?itemName=moonrepo.moon-console)\nfor more information on the extension, its commands, available settings, and more!\n\nIf you encounter a bug, or have a feature request, please submit them to the\n[moonrepo/dev](https://github.com/moonrepo/dev/tree/master/packages/vscode-extension) repository!\n\n## /docs/faq\n\nSource: https://moonrepo.dev/docs/faq\n\n# FAQ\n\n## General\n\n### Where did the name \"moon\" come from?\n\nThe first incarnation of the name was a misspelling of monorepo (= moonrepo). This is where the\ndomain moonrepo.dev came from, and our official company, moonrepo, Inc.\n\nHowever, moonrepo is quite a long name with many syllables, and as someone who prefers short 1\nsyllable words, moon was perfect. The word moon also has great symmetry, as you can see in our logo!\n\nBut that's not all... moon is also an acronym. It originally stood for monorepo,\norganization, orchestration, and notification tool. But since moon can also be used for\npolyrepos, we replaced monorepo with management (as shown on the homepage). This is a great\nacronym, as it embraces what moon is trying to solve:\n\n- Manage repos, projects, and tasks with ease.\n\n- Organize projects and the repo to scale.\n\n- Orchestrate tasks as efficiently as possible.\n\n- Notify developers and systems about important events.\n\n### Will moon support other languages?\n\nYes! Although we're focusing right now on the web ecosystem (Node.js, Rust, Go, PHP, Python, etc),\nwe've designed moon to be language agnostic and easily pluggable in the future. View our\n[supported languages for more information](/docs#supported-languages).\n\n### Will moon support continuous deployment?\n\nYes! We plan to integrate CD with the current build and CI system, but we are focusing on the latter\n2 for the time being. Why not start using moon today so that you can easily adopt CD when it's\nready?\n\n### What should be considered the \"source of truth\"?\n\nIf you're a frontend developer, you'll assume that a `package.json` is the source of truth for a\nproject, as it defines scripts, dependencies, and repo-local relations. While true, this breaks down\nwith additional tooling, like TypeScript project references, as now you must maintain\n`tsconfig.json` as well as `package.json`. The risk of these falling out of sync is high.\n\nThis problem is further exacerbated by more tooling, or additional programming languages. What if\nyour frontend project is dependent on a backend project? This isn't easily modeled in\n`package.json`. What if the backend project needs to be built and ran before running the frontend\nproject? Again, while not impossible, it's quite cumbersome to model in `package.json` scripts. So\non and so forth.\n\nmoon aims to solve this with a different approach, by standardizing all projects in the workspace on\n[`moon.yml`](/docs/config/project). With this, the `moon.yml` is the source of truth for each project,\nand provides us with the following:\n\n- The configuration is language agnostic. All projects are configured in a similar manner.\n\n- Tasks can reference other tasks easily. For example, npm scripts referencing rake tasks, and vice verse, is a non-ideal experience.\n\n- Dependencies defined with [`dependsOn`](/docs/config/project#dependson) use moon project names, and not language specific semantics. This field also easily populates the dependency/project graphs.\n\n- For JavaScript projects: `package.json` dependencies (via `dependsOn`) are kept in sync when [`node.syncProjectWorkspaceDependencies`](/docs/config/toolchain#syncprojectworkspacedependencies) is enabled.\n\n- `tsconfig.json` project references (via `dependsOn`) are kept in sync when [`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) is enabled.\n\nBy using moon as the source of truth, we can ensure a healthy repository, by accurately keeping\neverything in sync, and modifying project/language configuration to operate effectively.\n\ninfo\n\nWith all that being said, moon supports\n[implicit dependency scanning](/docs/concepts/project#dependencies), if you'd prefer to continue\nutilizing language specific functionality, instead of migrating entirely to moon.\n\n### How to stop moon formatting JSON and YAML files?\n\nTo ensure a healthy repository state, moon constantly modifies JSON and YAML files, specifically\n`package.json` and `tsconfig.json`. This may result in a different formatting style in regards to\nindentation. While there is no way to stop or turn off this functionality, we respect\n[EditorConfig](https://editorconfig.org/) during this process.\n\nCreate a root `.editorconfig` file to enforce a consistent syntax.\n\n.editorconfig\n\n```\n[*.{json,yaml,yml}]indent_style = spaceindent_size = 4\n```\n\n## Projects & tasks\n\n### How to pipe or redirect tasks?\n\nPiping (`|`) or redirecting (`>`) the output of one moon task to another moon task, whether via\nstdin or through `inputs`, is not possible within our pipeline (task runner) directly.\n\nHowever, we do support this functionality on the command line, or within a task itself, using the\n[`script`](/docs/config/project#script) setting.\n\nmoon.yml\n\n```\ntasks:  pipe:    script: 'gen-json | jq ...'\n```\n\nAlternativaly, you can wrap this script in something like a Bash file, and execute that instead.\n\nscripts/pipe.sh\n\n```\n#!/usr/bin/env bashgen-json | jq ...\n```\n\nmoon.yml\n\n```\ntasks:  pipe:    command: 'bash ./scripts/pipe.sh'\n```\n\n### How to run multiple commands within a task?\n\nOnly [`script`](/docs/config/project#script) based tasks can run multiple commands via `&&` or `;`\nsyntax. This is possible as we execute the entire script within a shell, and not directly with the\ntoolchain.\n\nmoon.yml\n\n```\ntasks:  multiple:    script: 'mkdir test && cd test && do-something'\n```\n\n### How to run tasks in a shell?\n\nBy default, all tasks run in a shell, based on the task's [`shell`](/docs/config/project#shell) option,\nas demonstrated below:\n\nmoon.yml\n\n```\ntasks:  # Runs in a shell  global:    command: 'some-command-on-path'  # Custom shells  unix:    command: 'bash -c some-command'    options:      shell: false  windows:    command: 'pwsh.exe -c some-command'    options:      shell: false\n```\n\n### Can we run other languages?\n\nYes! Although our toolchain only supports a few languages at this time, you can still run other\nlanguages within tasks by setting their [`toolchain`](/docs/config/project#toolchain) to \"system\".\nSystem tasks are an escape hatch that will use any command available on the current machine.\n\nmoon.yml\n\n```\ntasks:  # Ruby  lint:    command: 'rubocop'    toolchain: 'system'  # PHP  test:    command: 'phpunit tests'    toolchain: 'system'\n```\n\nHowever, because these languages are not supported directly within our toolchain, they will not\nreceive the benefits of the toolchain. Some of which are:\n\n- Automatic installation of the language. System tasks expect the command to already exist in the environment, which requires the user to manually install them.\n\n- Consistent language and dependency manager versions across all machines.\n\n- Built-in cpu and heap profiling (language specific).\n\n- Automatic dependency installs when the lockfile changes.\n\n- And many more.\n\n## JavaScript ecosystem\n\n### Can we use `package.json` scripts?\n\nWe encourage everyone to define tasks in a [`moon.yml`](/docs/config/project#tasks) file, as it allows\nfor additional metadata like `inputs`, `outputs`, `options`, and more. However, if you'd like to\nkeep using `package.json` scripts, enable the\n[`node.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts) setting.\n\nView the [official documentation](/docs/migrate-to-moon) for more information on this approach,\nincluding risks, disadvantages, and caveats.\n\n### Can moon version/publish packages?\n\nAt this time, no, as we're focusing on the build and test aspect of development. With that being\nsaid, this is something we'd like to support first-class in the future, but until then, we suggest\nthe following popular tools:\n\n- [Yarn releases](https://yarnpkg.com/features/release-workflow) (requires >= v2)\n\n- [Changesets](https://github.com/changesets/changesets)\n\n- [Lerna](https://github.com/lerna/lerna)\n\n### Why is npm/pnpm/yarn install running twice when running a task?\n\nmoon will automatically install dependencies in a project or in the workspace root (when using\npackage workspaces) when the lockfile or `package.json` has been modified since the last time the\ninstall ran. If you are running a task and multiple installs are occurring (and it's causing\nissues), it can mean 1 of 2 things:\n\n- If you are using package workspaces, then one of the projects triggering the install is not listed within the `workspaces` field in the root `package.json` (for npm and yarn), or in `pnpm-workspace.yml` (for pnpm).\n\n- If the install is triggering in a non-JavaScript related project, then this project is incorrectly listed as a package workspace.\n\n- If you don't want a package included in the workspace, but do want to install its dependencies, then it'll need its own lockfile.\n\n## Troubleshooting\n\n### How to resolve the \"version 'GLIBC_X.XX' not found\" error?\n\nThis is typically caused by running moon in an old environment, like Ubuntu 18, and the minimum\nrequired libc doesn't exist or is too old. Since moon is Rust based, we're unable to support all\nenvironments and versions perpetually, and will only support relatively modern environments.\n\nThere's not an easy fix to this problem, but there are a few potential solutions, from easiest to\nhardest:\n\n- Run moon in a Docker container/image that has the correct environment and libs. For example, the `node:latest` image.\n\n- Upgrade the environment to a newer one. For example, Ubuntu 18 -> 22.\n\n- Try and install a newer libc ([more information](https://stackoverflow.com/questions/72513993/how-install-glibc-2-29-or-higher-in-ubuntu-18-04)).\n\nFor more information on this problem as a whole,\n[refer to this in-depth article](https://kobzol.github.io/rust/ci/2021/05/07/building-rust-binaries-in-ci-that-work-with-older-glibc.html).\n\n## /docs/guides/ci\n\nSource: https://moonrepo.dev/docs/guides/ci\n\n# Continuous integration (CI)\n\nAll companies and projects rely on continuous integration (CI) to ensure high quality code and to\navoid regressions. Because this is such a critical piece of every developer's workflow, we wanted to\nsupport it as a first-class feature within moon, and we do just that with the\n[`moon ci`](/docs/commands/ci) command.\n\n## How it works\n\nThe `ci` command does all the heavy lifting necessary for effectively running jobs. It achieves this\nby automatically running the following steps:\n\n- Determines touched files by comparing the current HEAD against a base.\n\n- Determines all [targets](/docs/concepts/target) that need to run based on touched files.\n\n- Additionally runs affected [targets](/docs/concepts/target) dependencies and dependents.\n\n- Generates an action and dependency graph.\n\n- Installs the toolchain, Node.js, and npm dependencies.\n\n- Runs all actions within the graph using a thread pool.\n\n- Displays stats about all passing, failed, and invalid actions.\n\n## Configuring tasks\n\nBy default, all tasks run in CI, as you should always be building, linting, typechecking, testing,\nso on and so forth. However, this isn't always true, so this can be disabled on a per-task basis\nthrough the [`runInCI`](/docs/config/project#runinci) or [`local`](/docs/config/project#local) options.\n\n```\ntasks:  dev:    command: 'webpack server'    options:      runInCI: false    # Or    preset: 'server'\n```\n\ncaution\n\nThis option must be set to false for tasks that spawn a long-running or never-ending process, like\nHTTP or development servers. To help mitigate this, tasks named `dev`, `start`, or `serve` are false\nby default. This can be easily controlled with the [`local`](/docs/config/project#local) setting.\n\n## Integrating\n\nThe following examples can be referenced for setting up moon and its CI workflow in popular\nproviders. For GitHub, we're using our\n[`setup-toolchain` action](https://github.com/moonrepo/setup-toolchain) to install moon. For other\nproviders, we assume moon is an npm dependency and must be installed with Node.js.\n\n- GitHub\n- Buildkite\n- CircleCI\n- TravisCI\n\n.github/workflows/ci.yml\n\n```\nname: 'Pipeline'on:  push:    branches:      - 'master'  pull_request:jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      - uses: 'actions/checkout@v4'        with:          fetch-depth: 0      - uses: 'moonrepo/setup-toolchain@v0'      - run: 'moon ci'\n```\n\n.buildkite/pipeline.yml\n\n```\nsteps:  - label: 'CI'    commands:      - 'yarn install --immutable'      - 'moon ci'\n```\n\n.circleci/config.yml\n\n```\nversion: 2.1orbs:  node: 'circleci/node@5.0.2'jobs:  ci:    docker:      - image: 'cimg/base:stable'    steps:      - checkout      - node/install:          install-yarn: true          node-version: '16.13'      - node/install-packages:          check-cache: 'always'          pkg-manager: 'yarn-berry'      - run: 'moon ci'workflows:  pipeline:    jobs:      - 'ci'\n```\n\n.travis.yml\n\n```\nlanguage: node_jsnode_js:  - 16cache: yarnscript: 'moon ci'\n```\n\n## Choosing targetsv1.14.0\n\nBy default `moon ci` will run all tasks from all projects that are affected by touched files and\nhave the [`runInCI`](/docs/config/project#runinci) task option enabled. This is a great catch-all\nsolution, but may not vibe with your workflow or requirements.\n\nIf you'd prefer more control, you can pass a list of targets to `moon ci`, instead of moon\nattempting to detect them. When providing targets, `moon ci` will still only run them if affected by\ntouched files, but will still filter with the `runInCI` option.\n\n```\n# Run all builds$ moon ci :build# In another job, run tests$ moon ci :test :lint\n```\n\n## Comparing revisions\n\nBy default the command will attempt to detect the base and head revisions automatically based on the\ncurrent CI provider (powered by the [`ci_env`](https://github.com/milesj/rust-cicd-env) Rust crate).\nIf nothing was detected, this will fallback to the configured\n[`vcs.defaultBranch`](/docs/config/workspace#defaultbranch) for the base revision, and `HEAD` for the\nhead revision.\n\nThese values can be customized with the `--base` and `--head` command line options, or the\n`MOON_BASE` and `MOON_HEAD` environment variables, which takes highest precedence.\n\n```\n$ moon ci --base  --head # Or$ MOON_BASE= MOON_HEAD= moon ci\n```\n\n## Parallelizing tasks\n\nIf your CI environment supports sharding across multiple jobs, then you can utilize moon's built in\nparallelism by passing `--jobTotal` and `--job` options. The `--jobTotal` option is an integer of\nthe total number of jobs available, and `--job` is the current index (0 based) amongst the total.\n\nWhen these options are passed, moon will only run affected [targets](/docs/concepts/target) based on\nthe current job slice.\n\n- GitHub\n- Buildkite\n- CircleCI\n- TravisCI\n\nGitHub Actions do not support native parallelism, but it can be emulated using it's matrix.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    # ...    strategy:      matrix:        index: [0, 1]    steps:      # ...      - run: 'moon ci --job ${{ matrix.index }} --jobTotal 2'\n```\n\n- [Documentation](https://docs.github.com/en/actions/using-jobs/using-a-matrix-for-your-jobs)\n\n.buildkite/pipeline.yml\n\n```\n# ...steps:  - label: 'CI'    parallelism: 10    commands:      # ...      - 'moon ci --job $$BUILDKITE_PARALLEL_JOB --jobTotal $$BUILDKITE_PARALLEL_JOB_COUNT'\n```\n\n- [Documentation](https://buildkite.com/docs/tutorials/parallel-builds#parallel-jobs)\n\n.circleci/config.yml\n\n```\n# ...jobs:  ci:    # ...    parallelism: 10    steps:      # ...      - run: 'moon ci --job $CIRCLE_NODE_INDEX --jobTotal $CIRCLE_NODE_TOTAL'\n```\n\n- [Documentation](https://circleci.com/docs/2.0/parallelism-faster-jobs/)\n\nTravisCI does not support native parallelism, but it can be emulated using it's matrix.\n\n.travis.yml\n\n```\n# ...env:  global:    - TRAVIS_JOB_TOTAL=2  jobs:    - TRAVIS_JOB_INDEX=0    - TRAVIS_JOB_INDEX=1script: 'moon ci --job $TRAVIS_JOB_INDEX --jobTotal $TRAVIS_JOB_TOTAL'\n```\n\n- [Documentation](https://docs.travis-ci.com/user/speeding-up-the-build/)\n\nYour CI environment may provide environment variables for these 2 values.\n\n## Caching artifacts\n\nWhen a CI pipeline reaches a certain scale, its run times increase, tasks are unnecessarily ran, and\nbuild artifacts are not shared. To combat this, we support [remote caching](/docs/guides/remote-cache), a\nmechanism where we store build artifacts in the cloud, and sync these artifacts to machines on\ndemand.\n\n### Manual persistence\n\nIf you'd prefer to not use remote caching at this time, you can cache artifacts yourself, by\npersisting the `.moon/cache/{hashes,outputs}` directories. All other files and folders in\n`.moon/cache` should not be persisted, as they are not safe/portable across machines.\n\nHowever, because tasks can generate a different hash each run, you'll need to manually invalidate\nyour cache. Blindly storing the `hashes` and `outputs` directories without a mechanism to invalidate\nwill simply not work, as the contents will drastically change between CI runs. This is the primary\nreason why the remote caching service exists.\n\n## Reporting run results\n\nIf you're using GitHub Actions as your CI provider, we suggest using our\n[`moonrepo/run-report-action`](https://github.com/marketplace/actions/moon-ci-run-reports). This\naction will report the results of a [`moon ci`](/docs/commands/ci) run to a pull request as a comment\nand workflow summary.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      # ...      - run: 'moon ci'      - uses: 'moonrepo/run-report-action@v1'        if: success() || failure()        with:          access-token: ${{ secrets.GITHUB_TOKEN }}\n```\n\nThe report looks something like the following:\n\n### Community offerings\n\nThe following GitHub actions are provided by the community:\n\n- [`appthrust/moon-ci-retrospect`](https://github.com/appthrust/moon-ci-retrospect) - Displays the results of a `moon ci` run in a more readable fashion.\n\n- [`kymckay/moon-ci-booster`](https://github.com/kymckay/moon-ci-booster) - Displays failing `moon ci` tasks as comments with error logs directly on your pull request.\n\n## /docs/guides/codegen\n\nSource: https://moonrepo.dev/docs/guides/codegen\n\n# Code generation\n\nCode generation provides an easy mechanism for automating common development workflows and file\nstructures. Whether it's scaffolding a new library or application, updating configuration, or\nstandardizing patterns.\n\nTo accomplish this, we provide a generator, which is divided into two parts. The first being the\ntemplates and their files to be scaffolded. The second is our rendering engine that writes template\nfiles to a destination.\n\n## Creating a new template\n\nTo create a new template, run [`moon generate`](/docs/commands/generate) while passing the `--template` option. This\nwill create a template directory and [`template.yml`](/docs/config/template) file in the 1st file-based template\nlocation defined in [`generator.templates`](/docs/config/workspace#templates).\n\n```\n$ moon generate  --template\n```\n\n### Configuring `template.yml`\n\nEvery template requires a [`template.yml`](/docs/config/template) file in the template's directory root. This file\nacts as a schema and declares metadata and variables required by the generator.\n\ntemplate.yml\n\n```\ntitle: 'npm package'description: |  Scaffolds the initial structure for an npm package,  including source and test folders, a package.json, and more.variables:  name:    type: 'string'    default: ''    required: true    prompt: 'Package name?'\n```\n\n### Managing files\n\nFeel free to add any files and folders to the template that you'd like to be generated by consumers!\nThese files will then be scaffolded 1:1 in structure at the target destination.\n\nAn example of the templates folder structure may look something like the following:\n\n```\ntemplates/ npm-package/    src/    tests/    package.json    template.yml react-app/\n```\n\n#### Interpolation\n\nVariables can be interpolated into file paths using the form `[varName]`. For example, if you had a\ntemplate file `src/[type].ts`, and a variable `type` with a value of \"bin\", then the destination\nfile path would be `src/bin.ts`.\n\nThis syntax also supports [filters](#filters), such as `[varName | camel_case]`. However, spaces may\ncause issues with file path encoding, so this functionality is primarily recommended for the\n[`destination`](/docs/config/template#destination) setting.\n\n#### File extensions\n\nTo enable syntax highlighting for template engine syntax, you may use the `.tera` (preferred) or\n`.twig` file extensions. These extensions are optional, but will be removed when the files are\ngenerated.\n\nDepending on your preferred editor, these extensions may be supported through a plugin, or can be\nconfigured based on file type.\n\n- VS Code [Tera extension](https://marketplace.visualstudio.com/items?itemName=karunamurti.tera)\n\n- [Twig extension](https://marketplace.visualstudio.com/items?itemName=mblode.twig-language-2)\n\n- Atom [Twig package](https://atom.io/packages/atom-twig)\n\n- Webstorm [Twig plugin](https://plugins.jetbrains.com/plugin/7303-twig)\n\n#### Partials\n\nPartials are special template files that are used for\n[composition](https://keats.github.io/tera/docs/#include) and\n[inheritance](https://keats.github.io/tera/docs/#inheritance). Because of this, these files should\nnot be generated into the target destination, and do not support frontmatter.\n\nTo ensure they are not generated, include the word \"partial\" anywhere in the file path. For example,\n`partials/header.tpl` or `header.partial.tpl`.\n\n#### Rawsv1.11.0\n\nRaw template files are another special type of file that bypass all Tera rendering, and are used\nas-is instead. This is useful for files that contain syntax that conflicts with Tera.\n\nTo mark a file as raw, add a `.raw` extension, for example: `file.raw.js` or `file.js.raw`. When the\nfile is generated, the `.raw` extension will be removed.\n\n#### Frontmatter\n\nFrontmatter is a well-known concept for \"per-file configuration\", and is achieved by inserting YAML\nat the top of the file, delimited by wrapping `---`. This is a very powerful feature that provides\nmore control than the alternatives, and allows for some very cool integrations.\n\nmoon's frontmatter supports functionality like file skipping, force overwriting, and destination\npath rewriting.\n[View the configuration docs for a full list of supported fields](/docs/config/template#frontmatter).\n\npackage.json\n\n```\n---force: true---{  \"name\": \"{{ name | kebab_case }}\",  \"version\": \"0.0.1\"}\n```\n\nSince frontmatter exists in the file itself, you can take advantage of the rendering engine to\npopulate the field values dynamically. For example, if you're scaffolding a React component, you can\nconvert the component name and file name to PascalCase.\n\n```\n{% set component_name = name | pascal_case %}---to: components/{{ component_name }}.tsx---export function {{ component_name }}() {  return\n;}\n```\n\n#### Assets\n\nAssets are binary files that are copied as-is to the destination, without any rendering, and no\nsupport for frontmatter. This applies to all non-text based files, like images, audio, video, etc.\n\n### Template engine & syntax\n\nRendering templates is powered by [Tera](https://keats.github.io/tera/), a Rust based template\nengine with syntax similar to Twig, Liquid, Django, and more. We highly encourage everyone to read\nTera's documentation for an in-depth understanding, but as a quick reference, Tera supports the\nfollowing:\n\n- [Variable interpolation](https://keats.github.io/tera/docs/#variables) (defined with the [`variables`](/docs/config/template#variables) setting), with [built-in filters](https://keats.github.io/tera/docs/#built-in-filters).\n\n```\n{{ varName }} -> foo{{ varName | upper }} -> FOO\n```\n\n- [Conditional blocks](https://keats.github.io/tera/docs/#if) and [loops](https://keats.github.io/tera/docs/#for).\n\n```\n{% if price  1000 and not rich %}  That's expensive!{% else %}  N/A{% endif %}\n```\n\n```\n{% for item in items %}  {{ loop.index }} - {{ item.name }}{% endfor %}\n```\n\n- And many more features, like auto-escaping, white space control, and math operators!\n\n#### Filters\n\nFilters are a mechanism for transforming values during interpolation and are written using pipes\n(`|`). Tera provides many [built-in filters](https://keats.github.io/tera/docs/#built-in-filters),\nbut we also provide the following custom filters:\n\n- Strings - `camel_case`, `pascal_case`, `snake_case`, `upper_snake_case`, `kebab_case`, `upper_kebab_case`, `lower_case`, `upper_case`\n\n```\n{{ some_value | upper_case }}\n```\n\n- Paths - `path_join`, `path_relative`\n\n```\n{{ some_path | path_join(part = \"another/folder\") }}{{ some_path | path_relative(from = other_path) }}{{ some_path | path_relative(to = other_path) }}\n```\n\n#### Functions\n\nThe following functions are available within a template:\n\n- `variables()` - Returns an object containing all variables within the current template. v1.23.0\n\n#### Variables\n\nThe following variables are always available within a template:\n\n- `dest_dir` - Absolute path to the destination folder.\n\n- `dest_rel_dir` - Relative path to the destination folder from the working directory.\n\n- `working_dir` - Current working directory.\n\n- `workspace_root` - The moon workspace root.\n\n## Generating code from a template\n\nOnce a template has been created and configured, you can generate files based on it using the\n[`moon generate`](/docs/commands/generate) command! This is also know as scaffolding or code generation.\n\nThis command requires the name of a template as the 1st argument. The template name is the folder\nname on the file system that houses all the template files, or the [`id`](/docs/config/template#id)\nsetting configured in [`template.yml`](/docs/config/template).\n\n```\n$ moon generate npm-package\n```\n\nAn optional destination path, relative from the current working directory, can be provided as the\n2nd argument. If not provided, the [`destination`](/docs/config/template#destination) setting\nconfigured in [`template.yml`](/docs/config/template) will be used, or you'll be prompted during\ngeneration to provide one.\n\n```\n$ moon generate npm-package ./packages/example\n```\n\nThis command is extremely interactive, as we'll prompt you for the destination path, variable\nvalues, whether to overwrite files, and more. If you'd prefer to avoid interactions, pass\n`--defaults`, or `--force`, or both.\n\n### Configuring template locations\n\nTemplates can be located anywhere, especially when [being shared](#sharing-templates). Because of\nthis, our generator will loop through all template paths configured in\n[`generator.templates`](/docs/config/workspace#templates), in order, until a match is found.\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates'    # Or    - 'file://other/templates'\n```\n\nWhen using literal file paths, all paths are relative from the workspace root.\n\n#### Archive URLsv1.36.0\n\nTemplate locations can reference archives (zip, tar, etc) through https URLs. These archives should\ncontain templates and will be downloaded and unpacked. The list of\n[available archive formats can be found here](https://github.com/moonrepo/starbase/blob/master/crates/archive/src/lib.rs#L76).\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - 'https://domain.com/some/path/to/archive.zip'\n```\n\nArchives will be unpacked to `~/.moon/templates/archive/`, and will be cached for future\nuse.\n\n#### Globsv1.31.0\n\nIf you'd prefer more control over literal file paths (above), you can instead use glob paths or the\n`glob://` protocol. Globs are relative from the workspace root, and will only match directories, or\npatterns that end in `template.yml`.\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates/*'    # Or    - 'glob://projects/*/templates/*'\n```\n\n#### Git repositoriesv1.23.0\n\nTemplates locations can also reference templates in an external Git repository using the `git://`\nlocator protocol. This locator requires the Git host, repository path, and revision (branch, tag,\ncommit, etc).\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - 'git://github.com/moonrepo/templates#master'    - 'git://gitlab.com/org/repo#v1.2.3'\n```\n\nGit repositories will be cloned to `~/.moon/templates/git/` using an HTTPS URL (not a Git\nURL), and will be cached for future use.\n\n#### npm packagesv1.23.0\n\nAdditionally, template locations can also reference npm packages using the `npm://` locator\nprotocol. This locator requires a package name and published version.\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - 'npm://@moonrepo/templates#1.2.3'    - 'npm://other-templates#4.5.6'\n```\n\nnpm packages will be downloaded and unpacked to `~/.moon/templates/npm` and cached for future use.\n\n### Declaring variables with CLI arguments\n\nDuring generation, you'll be prompted in the terminal to provide a value for any configured\nvariables. However, you can pre-fill these variable values by passing arbitrary command line\narguments after `--` to [`moon generate`](/docs/commands/generate). Argument names must exactly match the variable\nnames.\n\nUsing the package template example above, we could pre-fill the `name` variable like so:\n\n```\n$ moon generate npm-package ./packages/example -- --name '@company/example' --private\n```\n\ninfo\n\n- Array variables support multiple options of the same name.\n\n- Boolean variables can be negated by prefixing the argument with `--no-`.\n\n- Object variables can not declare values through arguments.\n\n## Sharing templates\n\nAlthough moon is designed for a monorepo, you may be using multiple repositories and would like to\nuse the same templates across all of them. So how can we share templates across repositories? Why\nnot try...\n\n- Git submodules\n\n- Git repositories (using `git://` protocol)\n\n- File archives\n\n- Node.js modules\n\n- npm packages (using `npm://` protocol)\n\n- Another packaging system\n\nRegardless of the choice, simply configure [`generator.templates`](/docs/config/workspace#templates) to point to these\nlocations:\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates'    - 'file://./templates'    # Git    - './path/to/submodule'    - 'git://github.com/org/repo#branch'    # npm    - './node_modules/@company/shared-templates'    - 'npm://@company/shared-templates#1.2.3'\n```\n\n### Git and npm layout structure\n\nIf you plan to share templates using Git repositories (`git://`) or npm packages (`npm://`), then\nthe layout of those projects must follow these guidelines:\n\n- A project must support multiple templates\n\n- A template is denoted by a folder in the root of the project\n\n- Each template must have a [`template.yml`](/docs/config/template) file\n\n- Template names are derived from the folder name, or the `id` field in [`template.yml`](/docs/config/template)\n\nAn example of this layout structure may look something like the following:\n\n```\n template-one/    template.yml template-two/    template.yml template-three/    template.yml package.json, etc\n```\n\nThese templates can then be referenced by name, such as [`moon generate template-one`](/docs/commands/generate).\n\n## /docs/guides/codeowners\n\nSource: https://moonrepo.dev/docs/guides/codeowners\n\n# Code owners\n\nv1.8.0\n\nCode owners enables companies to define individuals, teams, or groups that are responsible for code\nin a repository. This is useful in ensuring that pull/merge requests are reviewed and approved by a\nspecific set of contributors, before the branch is merged into the base branch.\n\nWith that being said, moon does not implement a custom code owners solution, and instead builds\nupon the popular `CODEOWNERS` integration in VCS providers, like GitHub, GitLab, and Bitbucket.\n\n## Defining owners\n\nWith moon, you do not modify a `CODEOWNERS` file directly. Instead you define owners per project\nwith [`moon.yml`](/docs/config/project), or globally with [`.moon/workspace.yml`](/docs/config/workspace).\nThese owners are then aggregated and automatically\n[synced to a `CODEOWNERS` file](#generating-codeowners).\n\ninfo\n\nAn owner is a user, team, or group unique to your VCS provider. Please refer to your provider's\ndocumentation for the correct format in which to define owners.\n\n### Project-level\n\nFor projects, we support an [`owners`](/docs/config/project#owners) setting in\n[`moon.yml`](/docs/config/project) that accepts file patterns/paths and their owners (contributors\nrequired to review), as well as operational settings for minimum required approvals, custom groups,\nand more.\n\nPaths configured here are relative from the project root, and will be prefixed with the project\nsource (path from workspace root to project root) when the file is synced.\n\npackages/components/moon.yml\n\n```\nowners:  requiredApprovals: 2  paths:    'src/': ['@frontend', '@design-system']    '*.config.js': ['@frontend-infra']    '*.json': ['@frontend-infra']\n```\n\nThe configuration above would generate the following:\n\n- GitHub\n- GitLab\n- Bitbucket\n\n.github/CODEOWNERS\n\n```\n# components/packages/components/src/ @frontend @design-system/packages/components/*.config.js @frontend-infra/packages/components/*.json @frontend-infra\n```\n\n.gitlab/CODEOWNERS\n\n```\n# components[components][2]/packages/components/src/ @frontend @design-system/packages/components/*.config.js @frontend-infra/packages/components/*.json @frontend-infra\n```\n\nCODEOWNERS\n\n```\n# components/packages/components/src/ @frontend @design-system/packages/components/*.config.js @frontend-infra/packages/components/*.json @frontend-infra\n```\n\n### Workspace-level\n\nProject scoped owners are great but sometimes you need to define owners for files that span across\nall projects, or files at any depth within the repository. With the\n[`codeowners.globalPaths`](/docs/config/workspace#globalpaths) setting in\n[`.moon/workspace.yml`](/docs/config/workspace), you can do just that.\n\nPaths configured here are used as-is, allowing for full control of what ownership is applied.\n\n.moon/workspace.yml\n\n```\ncodeowners:  globalPaths:    # All files    '*': ['@admins']    # Config folder at any depth    'config/': ['@app-platform']    # GitHub folder at the root    '/.github/': ['@infra']\n```\n\nThe configuration above would generate the following at the top of the file (is the same for all\nproviders):\n\n- GitHub\n- GitLab\n- Bitbucket\n\n.github/CODEOWNERS\n\n```\n# (workspace)* @adminsconfig/ @app-platform/.github/ @infra\n```\n\n.gitlab/CODEOWNERS\n\n```\n# (workspace)* @adminsconfig/ @app-platform/.github/ @infra\n```\n\nCODEOWNERS\n\n```\n# (workspace)* @adminsconfig/ @app-platform/.github/ @infra\n```\n\n## Generating `CODEOWNERS`\n\nCode owners is an opt-in feature, and as such, the `CODEOWNERS` file can be generated in a few ways.\nThe first is manually, with the [`moon sync codeowners`](/docs/commands/sync/code-owners) command.\n\n```\n$ moon sync codeowners\n```\n\nWhile this works, it is a manual process, and can easily be forgotten, resulting in an out-of-date\nfile.\n\nAn alternative solution is the [`codeowners.syncOnRun`](/docs/config/workspace#synconrun) setting in\n[`.moon/workspace.yml`](/docs/config/workspace#codeowners), that when enabled, moon will automatically\ngenerate a `CODEOWNERS` file when a [target](/docs/concepts/target) is ran.\n\n.moon/workspace.yml\n\n```\ncodeowners:  syncOnRun: true\n```\n\nThe format and location of the `CODEOWNERS` file is based on the\n[`vcs.provider`](/docs/config/workspace#provider) setting.\n\n## FAQ\n\n### What providers or formats are supported?\n\nThe following providers are supported, based on the [`vcs.provider`](/docs/config/workspace#provider)\nsetting.\n\n- [Bitbucket](https://marketplace.atlassian.com/apps/1218598/code-owners-for-bitbucket?tab=overview&hosting=cloud) (via a 3rd-party app)\n\n- [GitHub](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners)\n\n- [GitLab](https://docs.gitlab.com/ee/user/project/codeowners/reference.html)\n\n- Other (very basic syntax)\n\n### Where does the `CODEOWNERS` file get created?\n\nThe location of the file is dependent on the configured provider.\n\n- GitHub -> `.github/CODEOWNERS`\n\n- GitLab -> `.gitlab/CODEOWNERS`\n\n- Everything else -> `CODEOWNERS`\n\n### Why are owners defined in `moon.yml` and not an alternative like `OWNERS`?\n\nA very popular pattern for defining owners is through an `OWNERS` file, which can appear in any\nfolder, at any depth, within the repository. All of these files are then aggregated into a single\n`CODEOWNERS` file.\n\nWhile this is useful for viewing ownership of a folder at a glance, it incurs a massive performance\nhit as we'd have to constantly glob the entire repository to find all `OWNERS` files. We found it\nbest to define owners in `moon.yml` instead for the following reasons:\n\n- No performance hit, as we're already loading and parsing these config files.\n\n- Co-locates owners with the rest of moon's configuration.\n\n- Ownership is now a part of the project graph, enabling future features.\n\n## /docs/guides/debug-task\n\nSource: https://moonrepo.dev/docs/guides/debug-task\n\n# Debugging a task\n\nRunning [tasks](/docs/concepts/task) is the most common way to interact with moon, so what do you do\nwhen your task isn't working as expected? Diagnose it of course! Diagnosing the root cause of a\nbroken task can be quite daunting, but do not fret, as the following steps will help guide you in\nthis endeavor.\n\n## Verify configuration\n\nBefore we dive into the internals of moon, we should first verify that the task is actually\nconfigured correctly. Our configuration layer is very strict, but it can't catch everything, so jump\nto the [`moon.yml`](/docs/config/project#tasks) documentation for more information.\n\nTo start, moon will create a snapshot of the project and its tasks, with all [tokens](/docs/concepts/token)\nresolved, and paths expanded. This snapshot is located at\n`.moon/cache/states/\n/snapshot.json`. With the snapshot open, inspect the root `tasks`\nobject for any inconsistencies or inaccuracies.\n\nSome issues to look out for:\n\n- Have `command` and `args` been parsed correctly?\n\n- Have [tokens](/docs/concepts/token) resolved correctly? If not, verify syntax or try another token type.\n\n- Have `inputFiles`, `inputGlobs`, and `inputVars` expanded correctly from [`inputs`](/docs/config/project#inputs)?\n\n- Have `outputFiles` and `outputGlobs` expanded correctly from [`outputs`](/docs/config/project#outputs)?\n\n- Is the `toolchain` (formerly `platform`) correct for the command? If incorrect, explicitly set the [`toolchain`](/docs/config/project#toolchain).\n\n- Are `options` and `flags` correct?\n\ninfo\n\nResolved information can also be inspected with the [`moon task --json`](/docs/commands/task)\ncommand.\n\n### Verify inherited configuration\n\nIf the configuration from the previous step looks correct, you can skip this step, otherwise let's\nverify that the inherited configuration is also correct. In the `snapshot.json` file, inspect the\nroot `inherited` object, which is structured as follows:\n\n- `order` - The order in which configuration files from `.moon` are loaded, from lowest to highest priority, and the order files are merged. The `*` entry is `.moon/tasks/all.yml`, while other entries map to `.moon/tasks/**/*.yml`.\n\n- `layers` - A mapping of configuration files that were loaded, derived from the `order`. Each layer represents a partial object (not expanded or resolved). Only files that exist will be mapped here.\n\n- `config` - A partial configuration object representing the state of all merged layers. This is what is merged with the project's `moon.yml` file.\n\nSome issues to look out for:\n\n- Is the order correct? If not, verify the project's [`language`](/docs/config/project#language) and the task's [`toolchain`](/docs/config/project#toolchain).\n\n- Does `config` correctly represent the merged state of all `layers`? Do note that tasks are shallow merged (by name), not deep merged.\n\n- Have the root `tasks` properly inherited [`implicitDeps`](/docs/config/tasks#implicitdeps), [`implicitInputs`](/docs/config/tasks#implicitinputs), and `fileGroups`?\n\n## Inspect trace logs\n\nIf configuration looks good, let's move on to inspecting the trace logs, which can be a non-trivial\namount of effort. Run the task to generate the logs, bypass the cache, and include debug\ninformation:\n\n```\nMOON_DEBUG_PROCESS_ENV=true MOON_DEBUG_PROCESS_INPUT=true moon run  --log trace --force\n```\n\nOnce ran, a large amount of information will be logged to the terminal. However, most of it can be\nignored, as we're only interested in the \"is this task affected by changes\" logs. This breaks down\nas follows:\n\n- First, we gather touched files from the local checkout, which is typically `git status --porcelain --untracked-files` (from the `moon_process::command_inspector` module). The logs do not output the list of files that are touched, but you can run this command locally to verify the output.\n\n- Secondly, we gather all files from the project directory, using the `git ls-files --full-name --cached --modified --others --exclude-standard --deduplicate` command (also from the `moon_process::command_inspector` module). This command can also be ran locally to verify the output.\n\n- Lastly, all files from the previous 2 commands will be hashed using the `git hash-object` command. If you passed the `MOON_DEBUG_PROCESS_INPUT` environment variable, you'll see a massive log entry of all files being hashed. This is what we use to generate moon's specific hash.\n\nIf all went well, you should see a log entry that looks like this:\n\n```\nmoon_task_runner::task_runner  Generated a unique hash  task_target=\"\" hash=\"\"\n```\n\nThe important piece is the hash, which is a 64-character SHA256 hash, and represents the unique hash\nof this task/target. This is what moon uses to determine a cache hit/miss, and whether or not to\nskip re-running a task.\n\nLet's copy the hash and move on to the next step.\n\n## Inspect the hash manifest\n\nWith the hash in hand, let's dig deeper into moon's internals, by inspecting the hash manifest at\n`.moon/cache/hashes/.json`, or running the [`moon hash`](/docs/commands/hash) command:\n\n```\nmoon hash\n```\n\nThe manifest is JSON and its contents are all the information used to generate its unique hash. This\ninformation is an array, and breaks down as follows:\n\n- The first item in the array is the task itself. The important fields to diagnose here are `deps` and `inputs`. Dependencies are other tasks (and their hash) that this task depends on.\n\n- Inputs are all the files (and their hash from `git hash-object`) this task requires to run.\n\n- The remaining items are toolchain/language specific, some examples are: Node.js - The current Node.js version and the resolved versions/hashes of all `package.json` dependencies.\n\n- Rust - The current Rust version and the resolved versions/hashes of all `Cargo.toml` dependencies.\n\n- TypeScript - Compiler options for changing compilation output.\n\nSome issues to look out for:\n\n- Do the dependencies match the task's configured [`deps`](/docs/config/project#deps) and [`implicitDeps`](/docs/config/tasks#implicitdeps)?\n\n- Do the inputs match the task's configured [`inputs`](/docs/config/project#inputs) and [`implicitInputs`](/docs/config/tasks#implicitinputs)? If not, try tweaking the config.\n\n- Are the toolchain/language specific items correct?\n\n- Are dependency versions/hashes correctly parsed from the appropriate lockfile?\n\n### Diffing a previous hash\n\nAnother avenue for diagnosing a task is to diff the hash against a hash from a previous run. Since\nwe require multiple hashes, we'll need to run the task multiple times,\n[inspect the logs](#inspect-trace-logs), and extract the hash for each. If you receive the same hash\nfor each run, you'll need to tweak configuration or change files to produce a different hash.\n\nOnce you have 2 unique hashes, we can pass them to the [`moon hash`](/docs/commands/hash) command. This\nwill produce a `git diff` styled output, allowing for simple line-by-line comparison debugging.\n\n```\nmoon hash\n```\n\n```\nLeft:  0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fddeRight: 2388552fee5a02062d0ef402bdc7232f0a447458b058c80ce9c3d0d4d7cfe171[\t{\t\t\"command\": \"build\",\t\t\"args\": [+\t\t\t\"./dist\"-\t\t\t\"./build\"\t\t],\t\t...\t}]\n```\n\nThis is extremely useful in diagnoising why a task is running differently than before, and is much\neasier than inspecting the hash manifest files manually!\n\n## Ask for help\n\nIf you've made it this far, and still can't figure out why a task is not working correctly, please\nask for help!\n\n- [Join the Discord community](https://discord.gg/qCh9MEynv2) (if lost)\n\n- [Report an issue](https://github.com/moonrepo/moon/issues/new/choose) (if an actual bug)\n\n## /docs/guides/docker\n\nSource: https://moonrepo.dev/docs/guides/docker\n\n# Docker integration\n\nUsing [Docker](https://www.docker.com/) to run your applications? Or build your artifacts? No\nworries, moon can be utilized with Docker, and supports a robust integration layer.\n\nsuccess\n\nLooking to speed up your Docker builds? Want to build in the cloud?\n[Give Depot a try](https://depot.dev?ref=moonrepo)!\n\n## Requirements\n\nThe first requirement, which is very important, is adding `.moon/cache` to the workspace root\n`.dockerignore` (moon assumes builds are running from the root). Not all files in `.moon/cache` are\nportable across machines/environments, so copying these file into Docker will definitely cause\ninteroperability issues.\n\n.dockerignore\n\n```\n.moon/cache\n```\n\nThe other requirement depends on how you want to integrate Git with Docker. Since moon executes\n`git` commands under the hood, there are some special considerations to be aware of when running\nmoon within Docker. There's 2 scenarios to choose from:\n\n- (recommended) Add the `.git` folder to `.dockerignore`, so that it's not `COPY`'d. moon will continue to work just fine, albeit with some functionality disabled, like caching.\n\n- Ensure that the `git` library is installed in the container, and copy the `.git` folder with `COPY`. moon will work with full functionality, but it will increase the overall size of the image because of caching.\n\n## Creating a `Dockerfile`\n\ninfo\n\nOur [`moon docker file`](/docs/commands/docker/file) command can automatically generate a `Dockerfile` based on this\nguide! We suggest generating the file then reading the guide below to understand what's going on.\n\nWe're very familiar with how tedious `Dockerfile`s are to write and maintain, so in an effort to\nreduce this headache, we've built a handful of tools to make this process much easier. With moon,\nwe'll take advantage of Docker's layer caching and staged builds as much as possible.\n\nWith that being said, there's many approaches you can utilize, depending on your workflow (we'll\ndocument them below):\n\n- Running `moon docker` commands before running `docker run|build` commands.\n\n- Running `moon docker` commands within the `Dockerfile`.\n\n- Using multi-staged or non-staged (standard) builds.\n\n- Something else unique to your setup!\n\nwarning\n\nThis guide and our Docker approach is merely a suggestion and is not a requirement for using moon\nwith Docker! Feel free to use this as a starting point, or not at all. Choose the approach that\nworks best for you!\n\n### What we're trying to avoid\n\nBefore we dive into writing a perfect `Dockerfile`, we'll briefly talk about the pain points we're\ntrying to avoid. In the context of Node.js and monorepo's, you may be familiar with having to `COPY`\neach individual `package.json` in the monorepo before installing `node_modules`, to effectively use\nlayer caching. This is very brittle, as each new application or package is created, every\n`Dockerfile` in the monorepo will need to be modified to account for this new `package.json`.\n\nFurthermore, we'll have to follow a similar process for only copying source files necessary for\nthe build or `CMD` to complete. This is very tedious, so most developers simply use `COPY . .` and\nforget about it. Copying the entire monorepo is costly, especially as it grows.\n\nAs an example, we'll use moon's official repository. The `Dockerfile` would look something like the\nfollowing.\n\n```\nFROM node:latestWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli# Copy moon filesCOPY ./.moon ./.moon# Copy all package.json's and lockfilesCOPY ./packages/cli/package.json ./packages/cli/package.jsonCOPY ./packages/core-linux-arm64-gnu/package.json ./packages/core-linux-arm64-gnu/package.jsonCOPY ./packages/core-linux-arm64-musl/package.json ./packages/core-linux-arm64-musl/package.jsonCOPY ./packages/core-linux-x64-gnu/package.json ./packages/core-linux-x64-gnu/package.jsonCOPY ./packages/core-linux-x64-musl/package.json ./packages/core-linux-x64-musl/package.jsonCOPY ./packages/core-macos-arm64/package.json ./packages/core-macos-arm64/package.jsonCOPY ./packages/core-macos-x64/package.json ./packages/core-macos-x64/package.jsonCOPY ./packages/core-windows-x64-msvc/package.json ./packages/core-windows-x64-msvc/package.jsonCOPY ./packages/runtime/package.json ./packages/runtime/package.jsonCOPY ./packages/types/package.json ./packages/types/package.jsonCOPY ./package.json ./package.jsonCOPY ./yarn.lock ./yarn.lockCOPY ./.yarn ./.yarnCOPY ./.yarnrc.yml ./yarnrc.yml# Install toolchain and dependencies# In non-moon repos: yarn installRUN moon docker setup# Copy project and required files# Or COPY . .COPY ./packages/types ./packages/typesCOPY ./packages/runtime ./packages/runtime# Build the targetRUN moon run runtime:build\n```\n\nFor such a small monorepo, this already looks too confusing!!! Let's remedy this by utilizing moon\nitself to the fullest!\n\n### Scaffolding the bare minimum\n\nThe first step in this process is to only copy the bare minimum of files necessary for installing\ndependencies (Node.js modules, etc). This is typically manifests (`package.json`), lockfiles\n(`yarn.lock`, etc), and any configuration (`.yarnrc.yml`, etc).\n\nThis can all be achieved with the [`moon docker scaffold`](/docs/commands/docker/scaffold) command, which scaffolds a\nskeleton of the repository structure, with only necessary files (the above). Let's update our\n`Dockerfile` usage.\n\n- Non-staged\n- Multi-staged\n\nThis assumes [`moon docker scaffold `](/docs/commands/docker/scaffold) is ran outside of the `Dockerfile`.\n\n```\nFROM node:latestWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli# Copy workspace skeletonCOPY ./.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup\n```\n\n```\n#### BASEFROM node:latest AS baseWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli#### SKELETONFROM base AS skeleton# Copy entire repository and scaffoldCOPY . .RUN moon docker scaffold\n#### BUILDFROM base AS build# Copy workspace skeletonCOPY --from=skeleton /app/.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup\n```\n\nAnd with this, our dependencies will be layer cached effectively! Let's now move onto copying source\nfiles.\n\n### Copying necessary source files\n\nThe next step is to copy all source files necessary for `CMD` or any `RUN` commands to execute\ncorrectly. This typically requires copying all source files for the project and all source files\nof the project's dependencies... NOT the entire repository!\n\nLuckily our [`moon docker scaffold `](/docs/commands/docker/scaffold) command has already done this for us! Let's\ncontinue updating our `Dockerfile` to account for this, by appending the following:\n\n- Non-staged\n- Multi-staged\n\n```\n# Copy source filesCOPY ./.moon/docker/sources .# Build something (optional)RUN moon run\n:\n```\n\n```\n# Copy source filesCOPY --from=skeleton /app/.moon/docker/sources .# Build something (optional)RUN moon run\n:\n```\n\ninfo\n\nIf you need to copy additional files for your commands to run successfully, you can configure the\n`docker.scaffold.include` setting in [`.moon/workspace.yaml`](/docs/config/workspace#scaffold) (entire\nworkspace) or [`moon.yml`](/docs/config/project#scaffold) (per project).\n\n### Pruning extraneous files\n\nNow that we've ran a command or built an artifact, we should prune the Docker environment to remove\nunneeded files and folders. We can do this with the [`moon docker prune`](/docs/commands/docker/prune) command, which\nmust be ran within the context of a `Dockerfile`!\n\n```\n# Prune workspaceRUN moon docker prune\n```\n\nWhen ran, this command will do the following, in order:\n\n- Remove extraneous dependencies (`node_modules`) for unfocused projects.\n\n- Install production only dependencies for the projects that were scaffolded.\n\ninfo\n\nThis process can be customized using the `docker.prune` setting in\n[`.moon/workspace.yaml`](/docs/config/workspace#prune).\n\n### Final result\n\nAnd with this moon integration, we've reduced the original `Dockerfile` of 35 lines to 18 lines, a\nreduction of almost 50%. The original file can also be seen as `O(n)`, as each new manifest requires\ncascading updates, while the moon approach is `O(1)`!\n\n- Non-staged\n- Multi-staged\n\n```\nFROM node:latestWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli# Copy workspace skeletonCOPY ./.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup# Copy source filesCOPY ./.moon/docker/sources .# Build something (optional)RUN moon run\n:# Prune workspaceRUN moon docker prune# CMD\n```\n\n```\n#### BASEFROM node:latest AS baseWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli#### SKELETONFROM base AS skeleton# Copy entire repository and scaffoldCOPY . .RUN moon docker scaffold\n#### BUILDFROM base AS build# Copy workspace skeletonCOPY --from=skeleton /app/.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup# Copy source filesCOPY --from=skeleton /app/.moon/docker/sources .# Build something (optional)RUN moon run\n:# Prune workspaceRUN moon docker prune# CMD\n```\n\n## Running `docker` commands\n\nWhen running `docker` commands, they must be ran from moon's workspace root (typically the\nrepository root) so that the project graph and all `moon docker` commands resolve correctly.\n\n```\ndocker build .\n```\n\nIf you're `Dockerfile`s are located within each applicable project, use the `-f` argument.\n\n```\ndocker run -f ./apps/client/Dockerfile .\n```\n\n## Troubleshooting\n\n### Supporting `node:alpine` images\n\nIf you're trying to use the `node:alpine` image with moon's\n[integrated toolchain](/docs/concepts/toolchain), you'll need to set the `MOON_TOOLCHAIN_FORCE_GLOBALS`\nenvironment variable in the Docker image to disable moon's toolchain. This is required as Node.js\ndoes not provide pre-built binaries for the Alpine target, so installing the Node.js toolchain will\nfail.\n\n```\nFROM node:alpineENV MOON_TOOLCHAIN_FORCE_GLOBALS=true\n```\n\n## /docs/guides/examples/angular\n\nSource: https://moonrepo.dev/docs/guides/examples/angular\n\n# Angular example\n\nIn this guide, you'll learn how to integrate [Angular](https://angular.io/) into moon.\n\nBegin by creating a new Angular project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n```\ncd apps && npx -p @angular/cli@latest ng new angular-app\n```\n\nView the [official Angular docs](https://angular.io/start) for a more in-depth guide to getting\nstarted!\n\n## Setup\n\nSince Angular is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\n/moon.yml\n\n```\nfileGroups:  app:    - 'src/**/*'    - 'angular.*'tasks:  dev:    command: 'ng serve'    preset: 'server'  build:    command: 'ng build'    inputs:      - '@group(app)'      - '@group(sources)'    outputs:      - 'dist'  # Extends the top-level lint  lint:    args:      - '--ext'      - '.ts'\n```\n\n### ESLint integration\n\nAngular does not provide a built-in linting abstraction, but instead there is an\n[ESLint package](https://github.com/angular-eslint/angular-eslint), which is great, but complicates\nthings a bit. Because of this, you have two options for moving forward:\n\n- Use a [global `lint` task](/docs/guides/examples/eslint) and bypass Angular's solution (preferred).\n\n- Use Angular's ESLint package solution only.\n\nRegardless of which option is chosen, the following changes are applicable to all options and should\nbe made. Begin be installing the dependencies that the\n[`@angular-eslint`](https://nextjs.org/docs/basic-features/eslint#eslint-config) package need in the\napplication's `package.json`.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\nyarn workspace\n add --dev @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\nnpm install --save-dev --workspace\n @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\npnpm add --save-dev --filter\n @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\nbun install --dev @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\nSince Angular has some specific rules, we'll need to tell the ESLint package to overrides the\ndefault ones. This can be achieved with a project-level `.eslintrc.json` file.\n\n/.eslintrc.json\n\n```\n{  \"root\": true,  \"ignorePatterns\": [\"projects/**/*\"],  \"overrides\": [    {      \"files\": [\"*.ts\"],      \"extends\": [        \"eslint:recommended\",        \"plugin:@typescript-eslint/recommended\",        \"plugin:@angular-eslint/recommended\",        // This is required if you use inline templates in Components        \"plugin:@angular-eslint/template/process-inline-templates\"      ],      \"rules\": {        /**         * Any TypeScript source code (NOT TEMPLATE) related rules you wish to use/reconfigure over and above the         * recommended set provided by the @angular-eslint project would go here.         */        \"@angular-eslint/directive-selector\": [          \"error\",          { \"type\": \"attribute\", \"prefix\": \"app\", \"style\": \"camelCase\" }        ],        \"@angular-eslint/component-selector\": [          \"error\",          { \"type\": \"element\", \"prefix\": \"app\", \"style\": \"kebab-case\" }        ]      }    },    {      \"files\": [\"*.html\"],      \"extends\": [        \"plugin:@angular-eslint/template/recommended\",        \"plugin:@angular-eslint/template/accessibility\"      ],      \"rules\": {        /**         * Any template/HTML related rules you wish to use/reconfigure over and above the         * recommended set provided by the @angular-eslint project would go here.         */      }    }  ]}\n```\n\nWith the basics now setup, choose the option that works best for you.\n\n- Global lint\n- Angular lint\n\nWe encourage using the global `lint` task for consistency across all projects within the repository.\nWith this approach, the `eslint` command itself will be ran and the `ng lint` command will be\nignored, but the `@angular-eslint` rules will still be used.\n\nIf you'd prefer to use the `ng lint` command, add it as a task to the project's\n[`moon.yml`](/docs/config/project).\n\n/moon.yml\n\n```\ntasks:  lint:    command: 'ng lint'    inputs:      - '@group(angular)'\n```\n\nFurthermore, if a global `lint` task exists, be sure to exclude it from being inherited.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['lint']\n```\n\nIn addition to configuring `moon.yml`, you also need to add a lint target in the `angular.json` file\nfor linting to work properly. The lint target specifies which builder to use for linting, as well as\nthe file patterns that should be linted.\n\n/angular.json\n\n```\n{  \"projects\": {    \"angular-app\": {      \"architect\": {        \"lint\": {          \"builder\": \"@angular-eslint/builder:lint\",          \"options\": {            \"lintFilePatterns\": [\"src/**/*.ts\", \"src/**/*.html\"]          }        }      }    }  }}\n```\n\nAdding this lint target is crucial for ensuring that the linting process is properly configured and\nintegrated with Angular's build system.\n\n### TypeScript integration\n\nAngular has [built-in support for TypeScript](https://angular.io/guide/typescript-configuration), so\nthere is no need for additional configuration to enable TypeScript support.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository.\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Angular should be installed per-project, and the\n`ng` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Angular project, a [`angular.json`](https://angular.io/guide/workspace-config)\nis created, and must exist in the project root. This allows each project to configure Angular for\ntheir needs.\n\n/angular.json\n\n```\n{  \"$schema\": \"./node_modules/@angular/cli/lib/config/schema.json\",  \"version\": 1,  \"projects\": {    \"angular-app\": {      \"projectType\": \"application\",      ...    }  },  ...}\n```\n\n## /docs/guides/examples/astro\n\nSource: https://moonrepo.dev/docs/guides/examples/astro\n\n# Astro example\n\nIn this guide, you'll learn how to integrate [Astro](https://docs.astro.build).\n\nBegin by creating a new Astro project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n```\ncd apps && npm create astro@latest\n```\n\n## Setup\n\nSince Astro is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Astro tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/astro).\n\n/moon.yml\n\n```\n# Inherit tasks from the `astro` preset# https://github.com/moonrepo/moon-configstags: ['astro']# Disable project referencestoolchain:  typescript:    syncProjectReferences: false\n```\n\n### ESLint integration\n\nWhen using a [`lint`](/docs/guides/examples/eslint) task, the\n[`eslint-plugin-astro`](https://ota-meshi.github.io/eslint-plugin-astro/user-guide/) package must be\ninstalled to lint `.astro` files.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace  add --dev eslint-plugin-astro\n```\n\n```\nyarn workspace  add --dev eslint-plugin-astro\n```\n\n```\nnpm install --save-dev --workspace  eslint-plugin-astro\n```\n\n```\npnpm add --save-dev --filter  eslint-plugin-astro\n```\n\n```\nbun install --dev eslint-plugin-astro\n```\n\nOnce the dependency has been installed in the application's `package.json`. We can then enable this\nconfiguration by creating an `.eslintrc.js` file in the project root. Be sure this file is listed in\nyour lint task's inputs!\n\n/.eslintrc.js\n\n```\nmodule.exports = {  extends: ['plugin:astro/recommended'],  overrides: [    {      files: ['*.astro'],      parser: 'astro-eslint-parser',      // If using TypeScript      parserOptions: {        parser: '@typescript-eslint/parser',        extraFileExtensions: ['.astro'],        project: 'tsconfig.json',        tsconfigRootDir: __dirname,      },    },  ],};\n```\n\nAnd lastly, when linting through moon's command line, you'll need to include the `.astro` extension\nwithin the `lint` task. This can be done by extending the top-level task within the project (below),\nor by adding it to the top-level entirely.\n\n/moon.yml\n\n```\ntasks:  lint:    args:      - '--ext'      - '.ts,.tsx,.astro'\n```\n\n### Prettier integration\n\nWhen using a [`format`](/docs/guides/examples/prettier) task, the `prettier-plugin-astro` package must be installed to\nformat `.astro` files. View the official\n[Astro docs](https://docs.astro.build/en/editor-setup/#prettier) for more information.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace  add --dev prettier-plugin-astro\n```\n\n```\nyarn workspace  add --dev prettier-plugin-astro\n```\n\n```\nnpm install --save-dev --workspace  prettier-plugin-astro\n```\n\n```\npnpm add --save-dev --filter  prettier-plugin-astro\n```\n\n```\nbun install --dev prettier-plugin-astro\n```\n\n### TypeScript integration\n\nSince Astro utilizes custom `.astro` files, it requires a specialized TypeScript integration, and\nluckily Astro provides an [in-depth guide](https://docs.astro.build/en/guides/typescript/). With\nthat being said, we do have a few requirements and pointers!\n\n- Use the official [Astro `tsconfig.json`](https://docs.astro.build/en/guides/typescript/#setup) as a basis.\n\n- From our internal testing, the `astro check` command (that typechecks `.astro` files) does not support project references. If the `composite` compiler option is enabled, the checker will fail to find `.astro` files. To work around this, we disable `workspace.typescript` in our moon config above.\n\n- Since typechecking requires 2 commands, one for `.astro` files, and the other for `.ts`, `.tsx` files, we've added the [`typecheck`](/docs/guides/examples/typescript) task as a dependency for the `check` task. This will run both commands through a single task!\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Astro should be installed per-project, and the\n`astro` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Astro project, a\n[`astro.config.mjs`](https://docs.astro.build/en/reference/configuration-reference/) is created, and\nmust exist in the project root. This allows each project to configure Astro for their needs.\n\n/astro.config.mjs\n\n```\nimport { defineConfig } from 'astro/config';// https://astro.build/configexport default defineConfig({});\n```\n\n## /docs/guides/examples/eslint\n\nSource: https://moonrepo.dev/docs/guides/examples/eslint\n\n# ESLint example\n\nIn this guide, you'll learn how to integrate [ESLint](https://eslint.org/) into moon.\n\nBegin by installing `eslint` and any plugins in your root. We suggest using the same version across\nthe entire repository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev eslint eslint-config-moon\n```\n\n```\nyarn add --dev eslint eslint-config-moon# If using workspacesyarn add --dev -W eslint eslint-config-moon\n```\n\n```\nnpm install --save-dev eslint eslint-config-moon\n```\n\n```\npnpm add --save-dev eslint eslint-config-moon# If using workspacespnpm add --save-dev -w eslint eslint-config-moon\n```\n\n```\nbun install --dev eslint eslint-config-moon\n```\n\n## Setup\n\nSince linting is a universal workflow, add a `lint` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  lint:    command:      - 'eslint'      # Support other extensions      - '--ext'      - '.js,.jsx,.ts,.tsx'      # Always fix and run extra checks      - '--fix'      - '--report-unused-disable-directives'      # Dont fail if a project has nothing to lint      - '--no-error-on-unmatched-pattern'      # Do fail if we encounter a fatal error      - '--exit-on-fatal-error'      # Only 1 ignore file is supported, so use the root      - '--ignore-path'      - '@in(4)'      # Run in current dir      - '.'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Other config files      - '*.config.*'      # Project configs, any format, any depth      - '**/.eslintrc.*'      # Root configs, any format      - '/.eslintignore'      - '/.eslintrc.*'\n```\n\nProjects can extend this task and provide additional parameters if need be, for example.\n\n/moon.yml\n\n```\ntasks:  lint:    args:      # Enable caching for this project      - '--cache'\n```\n\n### TypeScript integration\n\nIf you're using the [`@typescript-eslint`](https://typescript-eslint.io) packages, and want to\nenable type-safety based lint rules, we suggest something similar to the official\n[monorepo configuration](https://typescript-eslint.io/docs/linting/monorepo).\n\nCreate a `tsconfig.eslint.json` in your repository root, extend your shared compiler options (we use\n[`tsconfig.options.json`](/docs/guides/examples/typescript)), and include all your project files.\n\ntsconfig.eslint.json\n\n```\n{  \"extends\": \"./tsconfig.options.json\",  \"compilerOptions\": {    \"emitDeclarationOnly\": false,    \"noEmit\": true  },  \"include\": [\"apps/**/*\", \"packages/**/*\"]}\n```\n\nAppend the following inputs to your `lint` task.\n\n.moon/tasks/node.yml\n\n```\ntasks:  lint:    # ...    inputs:      # TypeScript support      - 'types/**/*'      - 'tsconfig.json'      - '/tsconfig.eslint.json'      - '/tsconfig.options.json'\n```\n\nAnd lastly, add `parserOptions` to your [root-level config](#root-level).\n\n## Configuration\n\n### Root-level\n\nThe root-level ESLint config is required, as ESLint traverses upwards from each file to find\nconfigurations, and this denotes the stopping point. It's also used to define rules for the entire\nrepository.\n\n.eslintrc.js\n\n```\nmodule.exports = {  root: true, // Required!  extends: ['moon'],  rules: {    'no-console': 'error',  },  // TypeScript support  parser: '@typescript-eslint/parser',  parserOptions: {    project: 'tsconfig.eslint.json',    tsconfigRootDir: __dirname,  },};\n```\n\nThe `.eslintignore` file must also be defined at the root, as\n[only 1 ignore file](https://eslint.org/docs/user-guide/configuring/ignoring-code#the-eslintignore-file)\ncan exist in a repository. We ensure this ignore file is used by passing `--ignore-path` above.\n\n.eslintignore\n\n```\nnode_modules/*.min.js*.map*.snap\n```\n\n### Project-level\n\nA project-level ESLint config can be utilized by creating a `.eslintrc.` in the\nproject root. This is optional, but necessary when defining rules and ignore patterns unique to the\nproject.\n\n/.eslintrc.js\n\n```\nmodule.exports = {  // Patterns to ignore (alongside the root .eslintignore)  ignorePatterns: ['build', 'lib'],  // Project specific rules  rules: {    'no-console': 'off',  },};\n```\n\nThe\n[`extends`](https://eslint.org/docs/user-guide/configuring/configuration-files#extending-configuration-files)\nsetting should not extend the root-level config, as ESLint will automatically merge configs\nwhile traversing upwards!\n\n### Sharing\n\nTo share configuration across projects, you have 3 options:\n\n- Define settings in the [root-level config](#root-level). This only applies to the parent repository.\n\n- Create and publish an [`eslint-config`](https://eslint.org/docs/developer-guide/shareable-configs#using-a-shareable-config) or [`eslint-plugin`](https://eslint.org/docs/developer-guide/working-with-plugins) npm package. This can be used in any repository.\n\n- A combination of 1 and 2.\n\nFor options 2 and 3, if you're utilizing package workspaces, create a local package with the\nfollowing content.\n\npackages/eslint-config-company/index.js\n\n```\nmodule.exports = {  extends: ['airbnb'],};\n```\n\nWithin your root-level ESLint config, you can extend this package to inherit the settings.\n\n.eslintrc.js\n\n```\nmodule.exports = {  extends: 'eslint-config-company',};\n```\n\nWhen using this approach, the package must be built and symlinked into `node_modules` before the\nlinter will run correctly. Take this into account when going down this path!\n\n## FAQ\n\n### How to lint a single file or folder?\n\nUnfortunately, this isn't currently possible, as the `eslint` binary itself requires a file or\nfolder path to operate on, and in the task above we pass `.` (current directory). If this was not\npassed, then nothing would be linted.\n\nThis has the unintended side-effect of not being able to filter down lintable targets by passing\narbitrary file paths. This is something we hope to resolve in the future.\n\nTo work around this limitation, you can create another lint task.\n\n### Should we use `overrides`?\n\nProjects should define their own rules using an ESLint config in their project root. However, if you\nwant to avoid touching many ESLint configs (think migrations), then\n[overrides in the root](https://eslint.org/docs/user-guide/configuring/configuration-files#configuration-based-on-glob-patterns)\nare a viable option. Otherwise, we highly encourage project-level configs.\n\n.eslintrc.js\n\n```\nmodule.exports = {  // ...  overrides: [    // Only apply to apps \"foo\" and \"bar\", but not others    {      files: ['apps/foo/**/*', 'apps/bar/**/*'],      rules: {        'no-magic-numbers': 'off',      },    },  ],};\n```\n\n## /docs/guides/examples/jest\n\nSource: https://moonrepo.dev/docs/guides/examples/jest\n\n# Jest example\n\nIn this guide, you'll learn how to integrate [Jest](https://jestjs.io/) into moon.\n\nBegin by installing `jest` in your root. We suggest using the same version across the entire\nrepository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev jest\n```\n\n```\nyarn add --dev jest# If using workspacesyarn add --dev -W jest\n```\n\n```\nnpm install --save-dev jest\n```\n\n```\npnpm add --save-dev jest# If using workspacespnpm add --save-dev -w jest\n```\n\n```\nbun install --dev jest\n```\n\n## Setup\n\nSince testing is a universal workflow, add a `test` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  test:    command:      - 'jest'      # Always run code coverage      - '--coverage'      # Dont fail if a project has no tests      - '--passWithNoTests'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Project configs, any format      - 'jest.config.*'\n```\n\nProjects can extend this task and provide additional parameters if need be, for example.\n\n/moon.yml\n\n```\ntasks:  test:    args:      # Disable caching for this project      - '--no-cache'\n```\n\n## Configuration\n\n### Root-level\n\nA root-level Jest config is not required and should be avoided, instead, use a [preset](#sharing) to\nshare configuration.\n\n### Project-level\n\nA project-level Jest config can be utilized by creating a `jest.config.` in the\nproject root. This is optional, but necessary when defining project specific settings.\n\n/jest.config.js\n\n```\nmodule.exports = {  // Project specific settings  testEnvironment: 'node',};\n```\n\n### Sharing\n\nTo share configuration across projects, you can utilize Jest's built-in\n[`preset`](https://jestjs.io/docs/configuration#preset-string) functionality. If you're utilizing\npackage workspaces, create a local package with the following content, otherwise publish the npm\npackage for consumption.\n\npackages/company-jest-preset/jest-preset.js\n\n```\nmodule.exports = {  testEnvironment: 'jsdom',  watchman: true,};\n```\n\nWithin your project-level Jest config, you can extend the preset to inherit the settings.\n\n/jest.config.js\n\n```\nmodule.exports = {  preset: 'company-jest-preset',};\n```\n\nYou can take this a step further by passing the `--preset` option in the [task above](#setup), so\nthat all projects inherit the preset by default.\n\n## FAQ\n\n### How to test a single file or folder?\n\nYou can filter tests by passing a file name, folder name, glob, or regex pattern after `--`. Any\npassed files are relative from the project's root, regardless of where the `moon` command is being\nran.\n\n```\n$ moon run\n:test -- filename\n```\n\n### How to use `projects`?\n\nWith moon, there's no reason to use\n[`projects`](https://jestjs.io/docs/configuration#projects-arraystring--projectconfig) as the `test`\ntask is ran per project. If you'd like to test multiple projects, use\n[`moon run :test`](/docs/commands/run).\n\n## /docs/guides/examples/nest\n\nSource: https://moonrepo.dev/docs/guides/examples/nest\n\n# Nest example\n\nIn this guide, you'll learn how to integrate [NestJS](https://nestjs.com/) into moon.\n\nBegin by creating a new NestJS project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n```\nnpx @nestjs/cli@latest new nestjs-app --skip-git\n```\n\nView the [official NestJS docs](https://docs.nestjs.com/first-steps) for a more in-depth guide to\ngetting started!\n\n## Setup\n\nSince NestJS is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\n/moon.yml\n\n```\nlayer: 'application'fileGroups:  app:    - 'nest-cli.*'tasks:  dev:    command: 'nest start --watch'    preset: 'server'  build:    command: 'nest build'    inputs:      - '@group(app)'      - '@group(sources)'\n```\n\n### TypeScript integration\n\nNestJS has [built-in support for TypeScript](https://NestJS.io/guide/typescript-configuration), so\nthere is no need for additional configuration to enable TypeScript support.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository.\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as NestJS should be installed per-project, and the\n`nest` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new NestJS project, a [`nest-cli.json`](https://docs.nestjs.com/cli/monorepo) is\ncreated, and must exist in the project root. This allows each project to configure NestJS for\ntheir needs.\n\n/nest-cli.json\n\n```\n{  \"$schema\": \"https://json.schemastore.org/nest-cli\",  \"collection\": \"@nestjs/schematics\",  \"type\": \"application\",  \"root\": \"./\",  \"sourceRoot\": \"src\",  \"compilerOptions\": {    \"tsConfigPath\": \"tsconfig.build.json\"  }}\n```\n\n## /docs/guides/examples/next\n\nSource: https://moonrepo.dev/docs/guides/examples/next\n\n# Next example\n\nIn this guide, you'll learn how to integrate [Next.js](https://nextjs.org) into moon.\n\nBegin by creating a new Next.js project at a specified folder path (this should not be created in\nthe workspace root, unless a polyrepo).\n\n```\ncd apps && npx create-next-app\n --typescript\n```\n\nView the [official Next.js docs](https://nextjs.org/learn/basics/create-nextjs-app/setup) for a\nmore in-depth guide to getting started!\n\n## Setup\n\nSince Next.js is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Next.js tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/next).\n\n/moon.yml\n\n```\n# Inherit tasks from the `next` preset# https://github.com/moonrepo/moon-configstags: ['next']\n```\n\n### ESLint integration\n\nNext.js has [built-in support for ESLint](https://nextjs.org/docs/basic-features/eslint), which is\ngreat, but complicates things a bit. Because of this, you have two options for moving forward:\n\n- Use a [global `lint` task](/docs/guides/examples/eslint) and bypass Next.js's solution (preferred).\n\n- Use Next.js's solution only.\n\nRegardless of which option is chosen, the following changes are applicable to all options and should\nbe made. Begin be installing the\n[`eslint-config-next`](https://nextjs.org/docs/basic-features/eslint#eslint-config) dependency in\nthe application's `package.json`.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev eslint-config-next\n```\n\n```\nyarn workspace\n add --dev eslint-config-next\n```\n\n```\nnpm install --save-dev --workspace\n eslint-config-next\n```\n\n```\npnpm add --save-dev --filter\n eslint-config-next\n```\n\n```\nbun install --dev eslint-config-next\n```\n\nSince the Next.js app is located within a subfolder, we'll need to tell the ESLint plugin where to\nlocate it. This can be achieved with a project-level `.eslintrc.js` file.\n\n/.eslintrc.js\n\n```\nmodule.exports = {  extends: 'next', // or 'next/core-web-vitals'  settings: {    next: {      rootDir: __dirname,    },  },};\n```\n\nWith the basics now setup, choose the option that works best for you.\n\n- Global lint\n- Next.js lint\n\nWe encourage using the global `lint` task for consistency across all projects within the repository.\nWith this approach, the `eslint` command itself will be ran and the `next lint` command will be\nignored, but the `eslint-config-next` rules will still be used.\n\nAdditionally, we suggest disabling the linter during the build process, but is not a requirement. As\na potential alternative, add the `lint` task as a dependency for the `build` task.\n\n/next.config.js\n\n```\nmodule.exports = {  eslint: {    ignoreDuringBuilds: true,  },};\n```\n\nIf you'd prefer to use the `next lint` command, add it as a task to the project's\n[`moon.yml`](/docs/config/project).\n\n/moon.yml\n\n```\ntasks:  lint:    command: 'next lint'    inputs:      - '@group(next)'\n```\n\nFurthermore, if a global `lint` task exists, be sure to exclude it from being inherited.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['lint']\n```\n\n### TypeScript integration\n\nNext.js also has\n[built-in support for TypeScript](https://nextjs.org/docs/basic-features/typescript), but has\nsimilar caveats to the [ESLint integration](#eslint-integration). TypeScript itself is a bit\ninvolved, so we suggest reading the official Next.js documentation before continuing.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository.\n\nAdditionally, we suggest disabling the typechecker during the build process, but is not a\nrequirement. As a potential alternative, add the `typecheck` task as a dependency for the `build`\ntask.\n\n/next.config.js\n\n```\nmodule.exports = {  typescript: {    ignoreBuildErrors: true,  },};\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Next.js should be installed per-project, and the\n`next` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Next.js project, a\n[`next.config.`](https://nextjs.org/docs/api-reference/next.config.js/introduction) is\ncreated, and must exist in the project root. This allows each project to configure Next.js for\ntheir needs.\n\n/next.config.js\n\n```\nmodule.exports = {  compress: true,};\n```\n\n## /docs/guides/examples/nuxt\n\nSource: https://moonrepo.dev/docs/guides/examples/nuxt\n\n# Nuxt example\n\nIn this guide, you'll learn how to integrate [Nuxt v3](https://nuxt.com), a [Vue](/docs/guides/examples/vue) framework,\ninto moon.\n\nBegin by creating a new Nuxt project at a specified folder path (this should not be created in the\nworkspace root, unless a polyrepo).\n\n```\ncd apps && npx nuxi init\n\n```\n\nView the [official Nuxt docs](https://nuxt.com/docs/getting-started/installation) for a more\nin-depth guide to getting started!\n\n## Setup\n\nSince Nuxt is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\n/moon.yml\n\n```\nfileGroups:  nuxt:    - 'assets/**/*'    - 'components/**/*'    - 'composables/**/*'    - 'content/**/*'    - 'layouts/**/*'    - 'middleware/**/*'    - 'pages/**/*'    - 'plugins/**/*'    - 'public/**/*'    - 'server/**/*'    - 'utils/**/*'    - '.nuxtignore'    - 'app.config.*'    - 'app.vue'    - 'nuxt.config.*'tasks:  nuxt:    command: 'nuxt'    preset: 'server'  # Production build  build:    command: 'nuxt build'    inputs:      - '@group(nuxt)'    outputs:      - '.nuxt'      - '.output'  # Development server  dev:    command: 'nuxt dev'    preset: 'server'  # Preview production build locally  preview:    command: 'nuxt preview'    deps:      - '~:build'    preset: 'server'\n```\n\nBe sure to keep the `postinstall` script in your project's `package.json`.\n\n/package.json\n\n```\n{  // ...  \"scripts\": {    \"postinstall\": \"nuxt prepare\"  }}\n```\n\n### ESLint integration\n\nRefer to our [Vue documentation](/docs/guides/examples/vue#eslint-integration) for more information on linting.\n\n### TypeScript integration\n\nNuxt requires `vue-tsc` for typechecking, so refer to our\n[Vue documentation](/docs/guides/examples/vue#typescript-integration) for more information.\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Nuxt should be installed per-project, and the\n`nuxt` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Nuxt project, a\n[`nuxt.config.ts`](https://v3.nuxtjs.org/api/configuration/nuxt-config) is created, and must exist\nin the project root. This allows each project to configure Next.js for their needs.\n\n/nuxt.config.ts\n\n```\nexport default defineNuxtConfig({});\n```\n\n## Testing\n\nNuxt supports testing through [Jest](https://jestjs.io/) or [Vitest](https://vitest.dev/). Refer to\nour [Jest documentation](/docs/guides/examples/jest) or [Vitest documentation](/docs/guides/examples/vite) for more information on testing.\n\n## /docs/guides/examples/packemon\n\nSource: https://moonrepo.dev/docs/guides/examples/packemon\n\n# Packemon example\n\nIn this guide, you'll learn how to integrate [Packemon](https://packemon.dev/) into moon. Packemon\nis a tool for properly building npm packages for distribution, it does this by providing the\nfollowing functionality:\n\n- Compiles source code to popular formats: CJS, MJS, ESM, UMD, etc.\n\n- Validates the `package.json` for incorrect fields or values.\n\n- Generates `exports` mappings for `package.json` based on the define configuration.\n\n- And many more [optimizations and features](https://packemon.dev/docs/features)!\n\nBegin by installing `packemon` in your root. We suggest using the same version across the entire\nrepository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev packemon\n```\n\n```\nyarn add --dev packemon# If using workspacesyarn add --dev -W packemon\n```\n\n```\nnpm install --save-dev packemon\n```\n\n```\npnpm add --save-dev packemon# If using workspacespnpm add --save-dev -w packemon\n```\n\n```\nbun install --dev packemon\n```\n\n## Setup\n\nSince Packemon is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Packemon tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/packemon).\n\n/moon.yml\n\n```\n# Inherit tasks from the `packemon` preset# https://github.com/moonrepo/moon-configstags: ['packemon']# Set the output formatstasks:  build:    outputs:      - 'cjs'\n```\n\n### TypeScript integration\n\nPackemon has built-in support for TypeScript, but to not conflict with a\n[typecheck task](/docs/guides/examples/typescript), a separate `tsconfig.json` file is required, which is named\n`tsconfig..json`.\n\nThis config is necessary to only compile source files, and to not include unwanted files in the\ndeclaration output directory.\n\ntsconfig.esm.json\n\n```\n{  \"extends\": \"../../tsconfig.options.json\",  \"compilerOptions\": {    \"outDir\": \"esm\",    \"rootDir\": \"src\"  },  \"include\": [\"src/**/*\"],  \"references\": []}\n```\n\n### Build targets\n\nTo configure the target platform(s) and format(s), you must define a\n[`packemon` block](https://packemon.dev/docs/config) in the project's `package.json`. The chosen\nformats must also be listed as `outputs` in the task.\n\npackage.json\n\n```\n{  \"name\": \"package\",  // ...  \"packemon\": {    \"format\": \"esm\",    \"platform\": \"browser\"  }}\n```\n\n## /docs/guides/examples/prettier\n\nSource: https://moonrepo.dev/docs/guides/examples/prettier\n\n# Prettier example\n\nIn this guide, you'll learn how to integrate [Prettier](https://prettier.io/) into moon.\n\nBegin by installing `prettier` in your root. We suggest using the same version across the entire\nrepository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev prettier\n```\n\n```\nyarn add --dev prettier# If using workspacesyarn add --dev -W prettier\n```\n\n```\nnpm install --save-dev prettier\n```\n\n```\npnpm add --save-dev prettier# If using workspacespnpm add --save-dev -w prettier\n```\n\n```\nbun install --dev prettier\n```\n\n## Setup\n\nSince code formatting is a universal workflow, add a `format` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  format:    command:      - 'prettier'      # Use the same config for the entire repo      - '--config'      - '@in(4)'      # Use the same ignore patterns as well      - '--ignore-path'      - '@in(3)'      # Fail for unformatted code      - '--check'      # Run in current dir      - '.'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Config and other files      - '**/*.{md,mdx,yml,yaml,json}'      # Root configs, any format      - '/.prettierignore'      - '/.prettierrc.*'\n```\n\n## Configuration\n\n### Root-level\n\nThe root-level Prettier config is required, as it defines conventions and standards to apply to\nthe entire repository.\n\n.prettierrc.js\n\n```\nmodule.exports = {  arrowParens: 'always',  semi: true,  singleQuote: true,  tabWidth: 2,  trailingComma: 'all',  useTabs: true,};\n```\n\nThe `.prettierignore` file must also be defined at the root, as\n[only 1 ignore file](https://prettier.io/docs/en/ignore.html#ignoring-files-prettierignore) can\nexist in a repository. We ensure this ignore file is used by passing `--ignore-path` above.\n\n.prettierignore\n\n```\nnode_modules/*.min.js*.map*.snap\n```\n\n### Project-level\n\nWe suggest against project-level configurations, as the entire repository should be formatted\nusing the same standards. However, if you're migrating code and need an escape hatch,\n[overrides in the root](https://prettier.io/docs/en/configuration.html#configuration-overrides) will\nwork.\n\n## FAQ\n\n### How to use `--write`?\n\nUnfortunately, this isn't currently possible, as the `prettier` binary itself requires either the\n`--check` or `--write` options, and since we're configuring `--check` in the task above, that takes\nprecedence. This is also the preferred pattern as checks will run (and fail) in CI.\n\nTo work around this limitation, we suggest the following alternatives:\n\n- Configure your editor to run Prettier on save.\n\n- Define another task to write the formatted code, like `format-write`.\n\n## /docs/guides/examples/react\n\nSource: https://moonrepo.dev/docs/guides/examples/react\n\n# React example\n\nReact is an application or library concern, and not a build system one, since the bundling of React\nis abstracted away through another tool like webpack. Because of this, moon has no guidelines around\nutilizing React directly. You can use React however you wish!\n\nHowever, with that being said, we do suggest the following:\n\n- Add `react` and related dependencies to each project, not the root. This includes `@types/react` as well. This will ensure accurate [hashing](/docs/concepts/cache#hashing).\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add react\n```\n\n```\nyarn workspace\n add react\n```\n\n```\nnpm install --workspace\n react\n```\n\n```\npnpm add --filter\n react\n```\n\n```\nbun install react\n```\n\n- Configure Babel with the `@babel/preset-react` preset.\n\n- Configure [TypeScript](/docs/guides/examples/typescript) compiler options with `\"jsx\": \"react-jsx\"`.\n\n## /docs/guides/examples/remix\n\nSource: https://moonrepo.dev/docs/guides/examples/remix\n\n# Remix example\n\nIn this guide, you'll learn how to integrate [Remix](https://remix.run) into moon.\n\nBegin by creating a new Remix project at a specified folder path (this should not be created in the\nworkspace root, unless a polyrepo).\n\n```\ncd apps && npx create-remix\n```\n\nDuring this installation, Remix will ask a handful of questions, but be sure to answer \"No\" for the\n\"Do you want me to run `npm install`?\" question. We suggest installing dependencies at the workspace\nroot via package workspaces!\n\nView the [official Remix docs](https://remix.run/docs/en/v1) for a more in-depth guide to getting\nstarted!\n\n## Setup\n\nSince Remix is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Remix tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/remix).\n\n/moon.yml\n\n```\n# Inherit tasks from the `remix` preset# https://github.com/moonrepo/moon-configstags: ['remix']\n```\n\n### ESLint integration\n\nRemix does not provide a built-in linting abstraction, and instead provides a simple ESLint\nconfiguration package,\n[`@remix-run/eslint-config`](https://www.npmjs.com/package/@remix-run/eslint-config). For the rest\nof this section, we're going to assume that a [global `lint` task](/docs/guides/examples/eslint) has been configured.\n\nBegin be installing the `@remix-run/eslint-config` dependency in the application's `package.json`.\nWe can then enable this configuration by creating an `.eslintrc.js` file in the project root. Be\nsure this file is listed in your `lint` task's inputs!\n\n/.eslintrc.js\n\n```\nmodule.exports = {  extends: ['@remix-run/eslint-config', '@remix-run/eslint-config/node'],  // If using TypeScript  parser: '@typescript-eslint/parser',  parserOptions: {    project: 'tsconfig.json',    tsconfigRootDir: __dirname,  },};\n```\n\n### TypeScript integration\n\nRemix ships with TypeScript support (when enabled during installation), but the `tsconfig.json` it\ngenerates is not setup for TypeScript project references, which we suggest using with a\n[global `typecheck` task](/docs/guides/examples/typescript).\n\nWhen using project references, we suggest the following `tsconfig.json`, which is a mix of Remix and\nmoon. Other compiler options, like `isolatedModules` and `esModuleInterop`, should be declared in a\nshared configuration found in the workspace root (`tsconfig.projectOptions.json` in the example).\n\n/tsconfig.json\n\n```\n{  \"extends\": \"../../tsconfig.projectOptions.json\",  \"compilerOptions\": {    \"baseUrl\": \".\",    \"emitDeclarationOnly\": false,    \"jsx\": \"react-jsx\",    \"resolveJsonModule\": true,    \"moduleResolution\": \"node\",    \"noEmit\": true,    \"paths\": {      \"~/*\": [\"./app/*\"]    }  },  \"include\": [\".eslintrc.js\", \"remix.env.d.ts\", \"**/*\"],  \"exclude\": [\".cache\", \"build\", \"public\"]}\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Remix should be installed per-project, and the\n`remix` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Remix project, a\n[`remix.config.js`](https://remix.run/docs/en/v1/api/conventions) is created, and must exist in\nthe project root. This allows each project to configure Remix for their needs.\n\n/remix.config.js\n\n```\nmodule.exports = {  appDirectory: 'app',};\n```\n\n## /docs/guides/examples/solid\n\nSource: https://moonrepo.dev/docs/guides/examples/solid\n\n# Solid example\n\n[Solid](https://www.solidjs.com) (also known as SolidJS) is a JavaScript framework for building\ninteractive web applications. Because of this, Solid is an application or library concern, and not a\nbuild system one, since the bundling of Solid is abstracted away through the application or a\nbundler.\n\nWith that being said, we do have some suggestions on utilizing Solid effectively in a monorepo. To\nbegin, install Solid to a project.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add solid-js\n```\n\n```\nyarn workspace\n add solid-js\n```\n\n```\nnpm install --workspace\n solid-js\n```\n\n```\npnpm add --filter\n solid-js\n```\n\n```\nbun install solid-js\n```\n\n## Setup\n\nSolid utilizes JSX for rendering markup, which requires\n[`babel-preset-solid`](https://www.npmjs.com/package/babel-preset-solid) for parsing and\ntransforming. To enable the preset for the entire monorepo, add the preset to a root\n`babel.config.js`, otherwise add it to a `.babelrc.js` in each project that requires it.\n\n```\nmodule.exports = {  presets: ['solid'],};\n```\n\n### TypeScript integration\n\nFor each project using Solid, add the following compiler options to the `tsconfig.json` found in the\nproject root.\n\n/tsconfig.json\n\n```\n{  \"compilerOptions\": {    \"jsx\": \"preserve\",    \"jsxImportSource\": \"solid-js\"  }}\n```\n\n### Vite integration\n\nIf you're using a [Vite](/docs/guides/examples/vite) powered application (Solid Start or starter templates), you should\nenable [`vite-plugin-solid`](https://www.npmjs.com/package/vite-plugin-solid) instead of configuring\nBabel. Be sure to read our [guide on Vite](/docs/guides/examples/vite) as well!\n\n/vite.config.js\n\n```\nimport { defineConfig } from 'vite';import solidPlugin from 'vite-plugin-solid';export default defineConfig({  // ...  plugins: [solidPlugin()],});\n```\n\n## /docs/guides/examples/storybook\n\nSource: https://moonrepo.dev/docs/guides/examples/storybook\n\n# Storybook example\n\nStorybook is a frontend workshop for building UI components and pages in isolation. Thousands of\nteams use it for UI development, testing, and documentation. Its open source and free.\n\n[Storybook v7](https://storybook.js.org/docs/7.0) is typically coupled with\n[Vite](https://vitejs.dev/). To scaffold a new Storybook project with Vite, run the following\ncommand in a project root. This guide assumes you are using React, however it is possible to use\nalmost any (meta) framework with Storybook.\n\n```\ncd\n && npx storybook init\n```\n\nWe highly suggest reading our documentation on [using Vite (and Vitest) with moon](/docs/guides/examples/vite) and\n[using Jest with moon](/docs/guides/examples/jest) for a more holistic view.\n\n## Setup\n\nThis section assumes Storybook is being used with Vite, and is integrated on a per-project basis.\n\nAfter setting up Storybook, ensure [`moon.yml`](/docs/config/project) has the following tasks:\n\n/moon.yml\n\n```\nfileGroups:  storybook:    - 'src/**/*'    - 'stories/**/*'    - 'tests/**/*'    - '.storybook/**/*'tasks:  buildStorybook:    command: 'build-storybook --output-dir @out(0)'    inputs:      - '@group(storybook)'    outputs:      - 'build'  storybook:    preset: 'server'    command: 'start-storybook'    inputs:      - '@group(storybook)'\n```\n\nTo run the Storybook development server:\n\n```\nmoon run\n:storybook\n```\n\n### Vite integration\n\nStorybook 7 uses Vite out of the box, and as such, no configuration is required, but should you\nchoose to extend the Vite config, you can do so by passing in `viteFinal`:\n\n.storybook/main.ts\n\n```\nimport { mergeConfig } from 'vite';export default {  stories: ['../stories/**/*.stories.mdx', '../stories/**/*.stories.@(js|jsx|ts|tsx)'],  addons: ['@storybook/addon-links', '@storybook/addon-essentials'],  core: {    builder: '@storybook/builder-vite',  },  async viteFinal(config) {    // Merge custom configuration into the default config    return mergeConfig(config, {      // Use the same \"resolve\" configuration as your app      resolve: (await import('../vite.config.js')).default.resolve,      // Add dependencies to pre-optimization      optimizeDeps: {        include: ['storybook-dark-mode'],      },    });  },};\n```\n\nFor more information on how to integrate Vite with Storybook see the\n[relevant documentation](https://storybook.js.org/docs/7.0/react/builders/vite#configuration).\n\n### Webpack integration\n\nIf you want to use Webpack with your Storybook project, you can do so by installing the relevant\npackage and updating configuration.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev @storybook/builder-webpack5\n```\n\n```\nyarn workspace\n add --dev @storybook/builder-webpack5\n```\n\n```\nnpm install --save-dev --workspace\n @storybook/builder-webpack5\n```\n\n```\npnpm add --save-dev --filter\n @storybook/builder-webpack5\n```\n\n```\nbun install --dev @storybook/builder-webpack5\n```\n\n.storybook/main.ts\n\n```\nexport default {  core: {    builder: '@storybook/builder-webpack5',  },};\n```\n\nFor more information on how to integrate Webpack with Storybook, see the\n[relevant documentation](https://storybook.js.org/docs/7.0/react/builders/webpack).\n\n### Jest integration\n\nYou can use Jest to test your stories, but isn't a requirement. Storybook ships with first-party\nplugins for improved developer experience.\n\nInstall the test runner and any relevant packages:\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\nyarn workspace\n add --dev @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\nnpm install --save-dev --workspace\n @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\npnpm add --save-dev --filter\n @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\nbun install --dev @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\nAdd the test task to your project:\n\n/moon.yml\n\n```\ntasks:  testStorybook:    command: 'test-storybook'    inputs:      - '@group(storybook)'\n```\n\nThen enable plugins and interactions in your Storybook project:\n\n.storybook/main.ts\n\n```\nexport default {  stories: ['../src/**/*.stories.mdx', '../src/**/*.stories.@(js|jsx|ts|tsx)'],  addons: [    // Other Storybook addons    '@storybook/addon-interactions', // Addon is registered here    '@storybook/addon-coverage',  ],  features: {    interactionsDebugger: true, // Enable playback controls  },};\n```\n\nYou can now start writing your tests. For an extended guide on how to write tests within your\nstories, see\n[writing an interaction test](https://storybook.js.org/docs/react/writing-tests/interaction-testing#write-an-interaction-test)\non the Storybook docs.\n\n## Configuration\n\nStorybook requires a `.storybook` folder relative to the project root. Because of this, Storybook\nshould be scaffolded in each project individually. Configuration may be shared through package\nimports.\n\n## /docs/guides/examples/sveltekit\n\nSource: https://moonrepo.dev/docs/guides/examples/sveltekit\n\n# SvelteKit example\n\n[SvelteKit](https://kit.svelte.dev) is built on [Svelte](https://svelte.dev), a UI framework that\nuses a compiler to let you write breathtakingly concise components that do minimal work in the\nbrowser, using languages you already know  HTML, CSS and JavaScript. It's a love letter to web\ndevelopment.\n\n```\ncd apps && npm create svelte@latest\n\n```\n\nYou will be prompted to choose between select templates, TypeScript, ESLint, Prettier, Playwright\nand Vitest among other options. moon supports and has guides for many of these tools.\n\nWe highly suggest reading our documentation on [using Vite (and Vitest) with moon](/docs/guides/examples/vite),\n[using ESLint with moon](/docs/guides/examples/eslint) and [using Prettier with moon](/docs/guides/examples/prettier) for a more holistic\nview.\n\n## Setup\n\nSince SvelteKit is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting SvelteKit tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/sveltekit).\n\n/moon.yml\n\n```\n# Inherit tasks from the `sveltekit` preset# https://github.com/moonrepo/moon-configstags: ['sveltekit']\n```\n\n### ESLint integration\n\nSvelteKit provides an option to setup ESLint along with your project, with moon you can use a\n[global `lint` task](/docs/guides/examples/eslint). We encourage using the global `lint` task for consistency across all\nprojects within the repository. With this approach, the `eslint` command itself will be ran and the\n`svelte3` rules will still be used.\n\n/moon.yml\n\n```\ntasks:  # Extends the top-level lint  lint:    args:      - '--ext'      - '.ts,.svelte'\n```\n\nBe sure to enable the Svelte parser and plugin in a project local ESLint configuration file.\n\n.eslintrc.cjs\n\n```\nmodule.exports = {  plugins: ['svelte3'],  ignorePatterns: ['*.cjs'],  settings: {    'svelte3/typescript': () => require('typescript'),  },  overrides: [{ files: ['*.svelte'], processor: 'svelte3/svelte3' }],};\n```\n\n### TypeScript integration\n\nSvelteKit also has built-in support for TypeScript, but has similar caveats to the\n[ESLint integration](#eslint-integration). TypeScript itself is a bit involved, so we suggest\nreading the official [SvelteKit documentation](https://kit.svelte.dev/docs/introduction) before\ncontinuing.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository. However, because Svelte isn't standard\nJavaScript, it requires the use of the `svelte-check` command for type-checking.\n\ninfo\n\nThe\n[moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/sveltekit)\nprovides the `check` task below.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['typecheck']tasks:  check:    command: 'svelte-check --tsconfig ./tsconfig.json'    deps:      - 'typecheck-sync'    inputs:      - '@group(svelte)'      - 'tsconfig.json'\n```\n\nIn case Svelte doesn't automatically create a `tsconfig.json`, you can use the following:\n\n/tsconfig.json\n\n```\n{  \"extends\": \"./.svelte-kit/tsconfig.json\",  \"compilerOptions\": {    \"allowJs\": true,    \"checkJs\": true,    \"esModuleInterop\": true,    \"forceConsistentCasingInFileNames\": true,    \"resolveJsonModule\": true,    \"skipLibCheck\": true,    \"sourceMap\": true,    \"strict\": true  }}\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as SvelteKit should be installed per-project, and the\n`vite` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new SvelteKit project, a\n[`svelte.config.js`](https://kit.svelte.dev/docs/configuration) is created, and must exist in the\nproject root. This allows each project to configure SvelteKit for their needs.\n\n/svelte.config.js\n\n```\nimport adapter from '@sveltejs/adapter-auto';import { vitePreprocess } from '@sveltejs/kit/vite';/** @type {import('@sveltejs/kit').Config} */const config = {  // Consult https://kit.svelte.dev/docs/integrations#preprocessors  // for more information about preprocessors  preprocess: vitePreprocess(),  kit: {    adapter: adapter(),  },};export default config;\n```\n\n## /docs/guides/examples/typescript\n\nSource: https://moonrepo.dev/docs/guides/examples/typescript\n\n# TypeScript example\n\nIn this guide, you'll learn how to integrate [TypeScript](https://www.typescriptlang.org/) into\nmoon. We'll be using [project references](/docs/guides/javascript/typescript-project-refs), as it ensures that\nonly affected projects are built, and not the entire repository.\n\nBegin by installing `typescript` and any pre-configured tsconfig packages in your root. We suggest\nusing the same version across the entire repository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev typescript tsconfig-moon\n```\n\n```\nyarn add --dev typescript tsconfig-moon# If using workspacesyarn add --dev -W typescript tsconfig-moon\n```\n\n```\nnpm install --save-dev typescript tsconfig-moon\n```\n\n```\npnpm add --save-dev typescript tsconfig-moon# If using workspacespnpm add --save-dev -w typescript tsconfig-moon\n```\n\n```\nbun install --dev typescript tsconfig-moon\n```\n\n## Setup\n\nSince typechecking is a universal workflow, add a `typecheck` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  typecheck:    command:      - 'tsc'      # Use incremental builds with project references      - '--build'      # Always use pretty output      - '--pretty'      # Use verbose logging to see affected projects      - '--verbose'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Type declarations      - 'types/**/*'      # Project configs      - 'tsconfig.json'      - 'tsconfig.*.json'      # Root configs (extended from only)      - '/tsconfig.options.json'    outputs:      # Matches `compilerOptions.outDir`      - 'lib'\n```\n\nProjects can extend this task and provide additional parameters if need be, for example.\n\n/moon.yml\n\n```\ntasks:  typecheck:    args:      # Force build every time      - '--force'\n```\n\n## Configuration\n\n### Root-level\n\nMultiple root-level TypeScript configs are required, as we need to define compiler options that\nare shared across the repository, and we need to house a list of all project references.\n\nTo start, let's create a `tsconfig.options.json` that will contain our compiler options. In our\nexample, we'll extend [tsconfig-moon](https://www.npmjs.com/package/tsconfig-moon) for convenience.\nSpecifically, the `tsconfig.workspaces.json` config, which enables ECMAScript modules, composite\nmode, declaration emitting, and incremental builds.\n\ntsconfig.options.json\n\n```\n{  \"extends\": \"tsconfig-moon/tsconfig.projects.json\",  \"compilerOptions\": {    // Your custom options    \"moduleResolution\": \"nodenext\",    \"target\": \"es2022\"  }}\n```\n\nWe'll also need the standard `tsconfig.json` to house our project references. This is used by\neditors and tooling for deep integrations.\n\ntsconfig.json\n\n```\n{  \"extends\": \"./tsconfig.options.json\",  \"files\": [],  // All project references in the repo  \"references\": []}\n```\n\nThe [`typescript.rootConfigFileName`](/docs/config/toolchain#rootconfigfilename) setting can be\nused to change the root-level config name and the\n[`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting will\nautomatically keep project references in sync!\n\n### Project-level\n\nEvery project will require a `tsconfig.json`, as TypeScript itself requires it. The following\n`tsconfig.json` will typecheck the entire project, including source and test files.\n\n/tsconfig.json\n\n```\n{  // Extend the root compiler options  \"extends\": \"../../tsconfig.options.json\",  \"compilerOptions\": {    // Declarations are written here    \"outDir\": \"lib\"  },  // Include files in the project  \"include\": [\"src/**/*\", \"tests/**/*\"],  // Depends on other projects  \"references\": []}\n```\n\nThe [`typescript.projectConfigFileName`](/docs/config/toolchain#projectconfigfilename) setting can\nbe used to change the project-level config name.\n\n### Sharing\n\nTo share configuration across projects, you have 3 options:\n\n- Define settings in a [root-level config](#root-level). This only applies to the parent repository.\n\n- Create and publish an [`tsconfig base`](https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#tsconfig-bases) npm package. This can be used in any repository.\n\n- A combination of 1 and 2.\n\nFor options 2 and 3, if you're utilizing package workspaces, create a local package with the\nfollowing content.\n\npackages/tsconfig-company/tsconfig.json\n\n```\n{  \"compilerOptions\": {    // ...    \"lib\": [\"esnext\"]  }}\n```\n\nWithin another `tsconfig.json`, you can extend this package to inherit the settings.\n\ntsconfig.json\n\n```\n{  \"extends\": \"tsconfig-company/tsconfig.json\"}\n```\n\n## FAQ\n\n### How to preserve pretty output?\n\nTypeScript supports a pretty format where it includes codeframes and color highlighting for\nfailures. However, when `tsc` is piped or the terminal is not a TTY, the pretty format is lost. To\npreserve and always display the pretty format, be sure to pass the `--pretty` argument!\n\n## /docs/guides/examples/vite\n\nSource: https://moonrepo.dev/docs/guides/examples/vite\n\n# Vite & Vitest example\n\nIn this guide, you'll learn how to integrate [Vite](https://vitejs.dev/) and\n[Vitest](https://vitest.dev/) into moon.\n\nBegin by creating a new Vite project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n\n```\nyarn create vite\n```\n\n```\nyarn create vite\n```\n\n```\nnpm create vite\n```\n\n```\npnpm create vite\n```\n\nIf you plan on using Vitest, run the following command to add the `vitest` dependency to a project,\notherwise skip to the setup section.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev vitest\n```\n\n```\nyarn workspace\n add --dev vitest\n```\n\n```\nnpm install --save-dev --workspace\n vitest\n```\n\n```\npnpm add --save-dev --filter\n vitest\n```\n\n```\nbun install --dev vitest\n```\n\n## Setup\n\nSince Vite is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Vite tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/vite).\n\n/moon.yml\n\n```\n# Inherit tasks from the `vite` and `vitest` presets# https://github.com/moonrepo/moon-configstags: ['vite', 'vitest']\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Vite should be installed per-project, and the\n`vite` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Vite project, a [`vite.config.`](https://vitejs.dev/config) is created,\nand must exist in the project root.\n\n/vite.config.js\n\n```\nimport { defineConfig } from 'vite';export default defineConfig({  // ...  build: {    // These must be `outputs` in the `build` task    outDir: 'dist',  },  test: {    // Vitest settings  },});\n```\n\nIf you'd prefer to configure Vitest in a\n[separate configuration file](https://vitest.dev/guide/#configuring-vitest), create a\n`vitest.config.` file.\n\n## /docs/guides/examples/vue\n\nSource: https://moonrepo.dev/docs/guides/examples/vue\n\n# Vue example\n\nVue is an application or library concern, and not a build system one, since the bundling of Vue is\nabstracted away through other tools. Because of this, moon has no guidelines around utilizing Vue\ndirectly. You can use Vue however you wish!\n\nHowever, with that being said, Vue is typically coupled with [Vite](https://vitejs.dev/). To\nscaffold a new Vue project with Vite, run the following command in a project root.\n\n```\nnpm init vue@latest\n```\n\nWe highly suggest reading our documentation on [using Vite (and Vitest) with moon](/docs/guides/examples/vite) for a\nmore holistic view.\n\n## Setup\n\nThis section assumes Vue is being used with Vite.\n\n### ESLint integration\n\nWhen linting with [ESLint](/docs/guides/examples/eslint) and the\n[`eslint-plugin-vue`](https://eslint.vuejs.org/user-guide/#installation) library, you'll need to\ninclude the `.vue` extension within the `lint` task. This can be done by extending the top-level\ntask within the project (below), or by adding it to the top-level entirely.\n\n/moon.yml\n\n```\ntasks:  lint:    args:      - '--ext'      - '.js,.ts,.vue'\n```\n\nFurthermore, when using TypeScript within ESLint, we need to make a few additional changes to the\n`.eslintrc.js` config found in the root (if the entire repo is Vue), or within the project (if only\nthe project is Vue).\n\n```\nmodule.exports = {  parser: 'vue-eslint-parser',  parserOptions: {    extraFileExtensions: ['.vue'],    parser: '@typescript-eslint/parser',    project: 'tsconfig.json', // Or another config    tsconfigRootDir: __dirname,  },};\n```\n\n### TypeScript integration\n\nVue does not use [TypeScript](/docs/guides/examples/typescript)'s `tsc` binary directly, but instead uses\n[`vue-tsc`](https://vuejs.org/guide/typescript/overview.html), which is a thin wrapper around `tsc`\nto support Vue components. Because of this, we should update the `typecheck` task in the project to\nutilize this command instead.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['typecheck']tasks:  typecheck:    command:      - 'vue-tsc'      - '--noEmit'      # Always use pretty output      - '--pretty'    inputs:      - 'env.d.ts'      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Project configs      - 'tsconfig.json'      - 'tsconfig.*.json'      # Root configs (extended from only)      - '/tsconfig.options.json'\n```\n\nBe sure `tsconfig.json` compiler options are based on\n[`@vue/tsconfig`](https://vuejs.org/guide/typescript/overview.html#configuring-tsconfig-json).\n\n## /docs/guides/extensions\n\nSource: https://moonrepo.dev/docs/guides/extensions\n\n# Extensions\n\nv1.20.0\n\nAn extension is a WASM plugin that allows you to extend moon with additional functionality, have\nwhitelisted access to the file system, and receive partial information about the current workspace.\nExtensions are extremely useful in offering new and unique functionality that doesn't need to be\nbuilt into moon's core. It also enables the community to build and share their own extensions!\n\n## Using extensions\n\nBefore an extension can be executed with the [`moon ext`](/docs/commands/ext) command, it must be\nconfigured with the [`extensions`](/docs/config/workspace#extensions) setting in\n[`.moon/workspace.yml`](/docs/config/workspace) (excluding [built-in's](#built-in-extensions)).\n\n.moon/workspace.yml\n\n```\nextensions:  example:    plugin: 'https://example.com/path/to/example.wasm'\n```\n\nOnce configured, it can be executed with [`moon ext`](/docs/commands/ext) by name. Arguments unique to\nthe extension must be passed after a `--` separator.\n\n```\n$ moon ext example -- --arg1 --arg2\n```\n\n## Built-in extensions\n\nmoon is shipped with a few built-in extensions that are configured and enabled by default. Official\nmoon extensions are built and published in our [moonrepo/moon-extensions](https://github.com/moonrepo/moon-extensions) repository.\n\n### `download`\n\nThe `download` extension can be used to download a file from a URL into the current workspace, as\ndefined by the `--url` argument. For example, say we want to download the latest [proto](/proto)\nbinary:\n\n```\n$ moon ext download --\\  --url https://github.com/moonrepo/proto/releases/latest/download/proto_cli-aarch64-apple-darwin.tar.xz\n```\n\nBy default this will download `proto_cli-aarch64-apple-darwin.tar.xz` into the current working\ndirectory. To customize the location, use the `--dest` argument. However, do note that the\ndestination must be within the current moon workspace, as only certain directories are whitelisted\nfor WASM.\n\n```\n$ moon ext download --\\  --url https://github.com/moonrepo/proto/releases/latest/download/proto_cli-aarch64-apple-darwin.tar.xz\\  --dest ./temp\n```\n\n#### Arguments\n\n- `--url` (required) - URL of a file to download.\n\n- `--dest` - Destination folder to save the file. Defaults to the current working directory.\n\n- `--name` - Override the file name. Defaults to the file name in the URL.\n\n### `migrate-nx`v1.22.0\n\nThis extension is currently experimental and will be improved over time.\n\nThe `migrate-nx` extension can be used to migrate an Nx powered repository to moon. This process\nwill convert the root `nx.json` and `workspace.json` files, and any `project.json` and\n`package.json` files found within the repository. The following changes are made:\n\n- Migrates `targetDefaults` as global tasks to [`.moon/tasks/node.yml`](/docs/config/tasks#tasks) (or `bun.yml`), `namedInputs` as file groups, `workspaceLayout` as projects, and more.\n\n- Migrates all `project.json` settings to [`moon.yml`](/docs/config/project#tasks) equivalent settings. Target to task conversion assumes the following: Target `executor` will be removed, and we'll attempt to extract the appropriate npm package command. For example, `@nx/webpack:build` -> `webpack build`.\n\n- Target `options` will be converted to task `args`.\n\n- The `{projectRoot}` and `{workspaceRoot}` interpolations will be replaced with moon tokens.\n\n```\n$ moon ext migrate-nx\n```\n\ncaution\n\nNx and moon are quite different, so many settings are either ignored when converting, or are not a\n1:1 conversion. We do our best to convert as much as possible, but some manual patching will most\nlikely be required! We suggest testing each converted task 1-by-1 to ensure it works as expected.\n\n#### Arguments\n\n- `--bun` - Migrate to Bun based commands instead of Node.js.\n\n- `--cleanup` - Remove Nx configs/files after migrating.\n\n#### Unsupported\n\nThe following features are not supported in moon, and are ignored when converting.\n\n- Most settings in `nx.json`.\n\n- Named input variants: external dependencies, dependent task output files, dependent project inputs, or runtime commands.\n\n- Target `configurations` and `defaultConfiguration`. Another task will be created instead that uses `extends`.\n\n- Project `root` and `sourceRoot`.\n\n### `migrate-turborepo`v1.21.0\n\nThe `migrate-turborepo` extension can be used to migrate a Turborepo powered repository to moon.\nThis process will convert the root `turbo.json` file, and any `turbo.json` files found within the\nrepository. The following changes are made:\n\n- Migrates `pipeline` (v1) and `tasks` (v2) global tasks to [`.moon/tasks/node.yml`](/docs/config/tasks#tasks) (or `bun.yml`) and project scoped tasks to [`moon.yml`](/docs/config/project#tasks). Task commands will execute `package.json` scripts through a package manager.\n\n- Migrates root `global*` settings to [`.moon/tasks/node.yml`](/docs/config/tasks#implicitinputs) (or `bun.yml`) as `implicitInputs`.\n\n```\n$ moon ext migrate-turborepo\n```\n\n#### Arguments\n\n- `--bun` - Migrate to Bun based commands instead of Node.js.\n\n- `--cleanup` - Remove Turborepo configs/files after migrating.\n\n### `unpack`v2.0.0\n\nThe `unpack` extension can be used to unpack an archive (zip/tar) from a file path or URL into a\ndestination folder.\n\n```\n$ moon ext unpack -- --src ./path/to/archive.zip --dest ./output --prefix path/to/strip\n```\n\n#### Arguments\n\n- `--src` (required) - Path or URL of a file to unpack.\n\n- `--dest` - Destination folder to unpack into. Defaults to the current working directory.\n\n- `--prefix` - A prefix path to strip from unpacked files.\n\n## Creating an extension\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins) for more information on how our WASM plugins\nwork, critical concepts to know, how to create a plugin, and more. Once you have a good\nunderstanding, you may continue this specific guide.\n\nnote\n\nRefer to our [moonrepo/moon-extensions](https://github.com/moonrepo/moon-extensions) repository for in-depth examples.\n\n### Registering metadata\n\nBefore we begin, we must implement the `register_extension` function, which simply provides some\nmetadata that we can bubble up to users, or to use for deeper integrations.\n\n```\nuse extism_pdk::*;use moon_pdk::*;#[plugin_fn]pub fn register_extension(Json(input): Json) -> FnResult> {   Ok(Json(ExtensionMetadataOutput {        name: \"Extension name\".into(),        description: Some(\"A description about what the extension does.\".into()),        plugin_version: env!(\"CARGO_PKG_VERSION\").into(),        ..ExtensionMetadataOutput::default()    }))}\n```\n\n#### Configuration schema\n\nIf you are using [configuration](#supporting-configuration), you can register the shape of the\nconfiguration using the [`schematic`](https://crates.io/crates/schematic) crate. This shape will be\nused to generate outputs such as JSON schemas, or TypeScript types.\n\n```\n#[plugin_fn]pub fn register_extension(_: ()) -> FnResult> {    Ok(Json(ExtensionMetadataOutput {        // ...        config_schema: Some(schematic::SchemaBuilder::generate::()),    }))}\n```\n\nSchematic is a heavy library, so we suggest adding the dependency like so:\n\n```\n[dependencies]schematic = { version = \"*\", default-features = false, features = [\"schema\"] }\n```\n\n### Implementing execution\n\nExtensions support a single plugin function, `execute_extension`, which is called by the\n[`moon ext`](/docs/commands/ext) command to execute the extension. This is where all your business\nlogic will reside.\n\n```\n#[host_fn]extern \"ExtismHost\" {    fn host_log(input: Json);}#[plugin_fn]pub fn execute_extension(Json(input): Json) -> FnResult {  host_log!(stdout, \"Executing extension!\");  Ok(())}\n```\n\n### Supporting arguments\n\nMost extensions will require arguments, as it provides a mechanism for users to pass information\ninto the WASM runtime. To parse arguments, we provide the\n[`Args`](https://docs.rs/clap/latest/clap/trait.Args.html) trait/macro from the\n[clap](https://crates.io/crates/clap) crate. Refer to their\n[official documentation on usage](https://docs.rs/clap/latest/clap/_derive/index.html) (we don't\nsupport everything).\n\n```\nuse moon_pdk::*;#[derive(Args)]pub struct ExampleExtensionArgs {  // --url, -u  #[arg(long, short = 'u', required = true)]  pub url: String,}\n```\n\nOnce your struct has been defined, you can parse the provided input arguments using the\n[`parse_args`](https://docs.rs/moon_pdk/latest/moon_pdk/args/fn.parse_args.html) function.\n\n```\n#[plugin_fn]pub fn execute_extension(Json(input): Json) -> FnResult {  let args = parse_args::(&input.args)?;  args.url; // --url  Ok(())}\n```\n\n### Supporting configuration\n\nUsers can configure [extensions](/docs/config/workspace#extensions) with additional settings in\n[`.moon/workspace.yml`](/docs/config/workspace). Do note that settings should be in camelCase for them\nto be parsed correctly!\n\n.moon/workspace.yml\n\n```\nextensions:  example:    plugin: 'file://./path/to/example.wasm'    someSetting: 'abc'    anotherSetting: 123\n```\n\nIn the plugin, we can map these settings (excluding `plugin`) into a struct. The `Default` trait\nmust be implemented to handle situations where settings were not configured, or some are missing.\n\n```\nconfig_struct!(  #[derive(Default)]  pub struct ExampleExtensionConfig {    pub some_setting: String,    pub another_setting: u32,  });\n```\n\nOnce your struct has been defined, you can access the configuration using the\n[`get_extension_config`](https://docs.rs/moon_pdk/latest/moon_pdk/extension/fn.get_extension_config.html)\nfunction.\n\n```\n#[plugin_fn]pub fn execute_extension(Json(input): Json) -> FnResult {  let config = get_extension_config::()?;  config.another_setting; // 123  Ok(())}\n```\n\n## /docs/guides/javascript/bun-handbook\n\nSource: https://moonrepo.dev/docs/guides/javascript/bun-handbook\n\n# Bun handbook\n\nUtilizing JavaScript (and TypeScript) in a monorepo can be a daunting task, especially when using\nBun (or Node.js), as there are many ways to structure your code and to configure your tools. With\nthis handbook, we'll help guide you through this process.\n\ninfo\n\nThis guide is a living document and will continue to be updated over time!\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable JavaScript support via Bun, define the [`bun`](/docs/config/toolchain#bun) setting in\n[`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Bunbun: {}\n```\n\ninfo\n\nIn moon v1.40+, use `javascript` and `bun` instead of `bun` to enable the new WASM powered Bun\ntoolchain, which is far more accurate and efficient. The non-WASM toolchain will be deprecated in\nthe future.\n\nOr by pinning a `bun` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\nbun = \"1.0.0\"\n```\n\nThis will enable the Bun toolchain and provide the following automations around its ecosystem:\n\n- Node modules will automatically be installed if dependencies in `package.json` have changed, or the lockfile has changed, since the last time a task has ran. We'll also take `package.json` workspaces into account and install modules in the correct location; either the workspace root, in a project, or both.\n\n- Relationships between projects will automatically be discovered based on `dependencies`, `devDependencies`, and `peerDependencies` in `package.json`.\n\n### Utilizing the toolchain\n\nWhen a language is enabled, moon by default will assume that the language's binary is available\nwithin the current environment (typically on `PATH`). This has the downside of requiring all\ndevelopers and machines to manually install the correct version of the language, and to stay in\nsync.\n\nInstead, you can utilize [moon's toolchain](/docs/concepts/toolchain), which will download and\ninstall the language in the background, and ensure every task is executed using the exact version\nacross all machines.\n\nEnabling the toolchain is as simple as defining the [`bun.version`](/docs/config/toolchain#version)\nsetting.\n\n.moon/toolchains.yml\n\n```\n# Enable Bun toolchain with an explicit versionbun:  version: '1.0.0'\n```\n\nVersions can also be defined with [`.prototools`](/docs/proto/config).\n\n### Configuring the toolchain\n\nSince the JavaScript ecosystem supports multiple runtimes, moon is unable to automatically detect\nthe correct runtime for all scenarios. Does the existence of a `package.json` mean Node.js or Bun?\nWe don't know, and default to Node.js because of its popularity.\n\nTo work around this, you can set `toolchain` to \"bun\" at the task-level or project-level.\n\nmoon.yml\n\n```\n# For all tasks in the projecttoolchain:  default: 'bun'tasks:  build:    command: 'webpack'    # For this specific task    toolchain: 'bun'\n```\n\nThe task-level `toolchain.default` only needs to be set if executing a `node_modules` binary! The\n`bun` binary automatically sets the toolchain to Bun.\n\n### Using `package.json` scripts\n\nIf you're looking to prototype moon, or reduce the migration effort to moon tasks, you can configure\nmoon to inherit `package.json` scripts, and internally convert them to moon tasks. This can be\nachieved with the [`bun.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts)\nsetting.\n\n.moon/toolchains.yml\n\n```\nbun:  inferTasksFromScripts: true\n```\n\nOr you can run scripts through `bun run` calls.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'bun run build'\n```\n\n## Handbook\n\ninfo\n\nRefer to the [Node.js handbook](/docs/guides/javascript/node-handbook) for more information on repository structure,\ndependency management, and more. Since both runtimes are extremely similar, the information in that\nhandbook also applies to Bun!\n\n## /docs/guides/javascript/deno-handbook\n\nSource: https://moonrepo.dev/docs/guides/javascript/deno-handbook\n\n# Deno handbook\n\nUtilizing Deno in a TypeScript based monorepo can be a non-trivial task. With this handbook, we'll\nhelp guide you through this process.\n\ninfo\n\nThis guide is a living document and will continue to be updated over time!\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable TypeScript support via Deno, define the [`deno`](/docs/config/toolchain#deno) setting in\n[`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Denodeno: {}# Enable Deno and override default settingsdeno:  lockfile: true\n```\n\nOr by pinning a `deno` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\ndeno = \"1.31.0\"\n```\n\nThis will enable the Deno toolchain and provide the following automations around its ecosystem:\n\n- Automatic handling and caching of lockfiles (when the setting is enabled).\n\n- Relationships between projects will automatically be discovered based on `imports`, `importMap`, and `deps.ts` (currently experimental).\n\n- And more to come!\n\n### Work in progress\n\ncaution\n\nDeno support is currently experimental while we finalize the implementation.\n\nThe following features are not supported:\n\n- `deno.jsonc` files (use `deno.json` instead).\n\n- `files.exclude` are currently considered an input. These will be filtered in a future release.\n\n## Coming soon!\n\nThe handbook is currently being written while we finalize our Deno integration support!\n\n## /docs/guides/javascript/node-handbook\n\nSource: https://moonrepo.dev/docs/guides/javascript/node-handbook\n\n# Node.js handbook\n\nUtilizing JavaScript (and TypeScript) in a monorepo can be a daunting task, especially when using\nNode.js, as there are many ways to structure your code and to configure your tools. With this\nhandbook, we'll help guide you through this process.\n\ninfo\n\nThis guide is a living document and will continue to be updated over time!\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable JavaScript support via Node.js, define the [`node`](/docs/config/toolchain#node) setting\nin [`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Node.jsnode: {}# Enable Node.js and override default settingsnode:  packageManager: 'pnpm'\n```\n\ninfo\n\nIn moon v1.40+, use `javascript` and `node` instead of `node` to enable the new WASM powered Node.js\ntoolchain, which is far more accurate and efficient. The non-WASM toolchain will be deprecated in\nthe future.\n\nOr by pinning a `node` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\nnode = \"18.0.0\"pnpm = \"7.29.0\"\n```\n\nThis will enable the Node.js toolchain and provide the following automations around its ecosystem:\n\n- Node modules will automatically be installed if dependencies in `package.json` have changed, or the lockfile has changed, since the last time a task has ran. We'll also take `package.json` workspaces into account and install modules in the correct location; either the workspace root, in a project, or both.\n\n- Relationships between projects will automatically be discovered based on `dependencies`, `devDependencies`, and `peerDependencies` in `package.json`. The versions of these packages will also be automatically synced when changed.\n\n- Tasks can be [automatically inferred](/docs/config/toolchain#infertasksfromscripts) from `package.json` scripts.\n\n- And much more!\n\n### Utilizing the toolchain\n\nWhen a language is enabled, moon by default will assume that the language's binary is available\nwithin the current environment (typically on `PATH`). This has the downside of requiring all\ndevelopers and machines to manually install the correct version of the language, and to stay in\nsync.\n\nInstead, you can utilize [moon's toolchain](/docs/concepts/toolchain), which will download and\ninstall the language in the background, and ensure every task is executed using the exact version\nacross all machines.\n\nEnabling the toolchain is as simple as defining the [`node.version`](/docs/config/toolchain#version)\nsetting.\n\n.moon/toolchains.yml\n\n```\n# Enable Node.js toolchain with an explicit versionnode:  version: '18.0.0'\n```\n\nVersions can also be defined with [`.prototools`](/docs/proto/config).\n\n### Using `package.json` scripts\n\nIf you're looking to prototype moon, or reduce the migration effort to moon tasks, you can configure\nmoon to inherit `package.json` scripts, and internally convert them to moon tasks. This can be\nachieved with the [`node.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts)\nsetting.\n\n.moon/toolchains.yml\n\n```\nnode:  inferTasksFromScripts: true\n```\n\nOr you can run scripts through `npm run` (or `pnpm`, `yarn`) calls.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'npm run build'\n```\n\n## Repository structure\n\nJavaScript monorepo's work best when projects are split into applications and packages, with each\nproject containing its own `package.json` and dependencies. A root `package.json` must also exist\nthat pieces all projects together through workspaces.\n\nFor small repositories, the following structure typically works well:\n\n```\n/ .moon/ package.json apps/    client/|   |    ...   |    package.json    server/|        ...        package.json packages/     components/    |    ...        package.json     theme/    |    ...        package.json     utils/         ...         package.json\n```\n\nFor large repositories, grouping projects by team or department helps with ownership and\norganization. With this structure, applications and libraries can be nested at any depth.\n\n```\n/ .moon/ package.json infra/    ... internal/    ... payments/    ... shared/     ...\n```\n\n### Applications\n\nApplications are runnable or executable, like an HTTP server, and are pieced together with packages\nand its own encapsulated code. They represent the whole, while packages are the pieces. Applications\ncan import and depend on packages, but they must not import and depend on other applications.\n\nIn moon, you can denote a project as an application using the [`layer`](/docs/config/project#layer)\nsetting in [`moon.yml`](/docs/config/project).\n\nmoon.yml\n\n```\nlayer: 'application'\n```\n\n### Packages\n\nPackages (also known as a libraries) are self-contained reusable pieces of code, and are the\nsuggested pattern for [code sharing](#code-sharing). Packages can import and depend on other\npackages, but they must not import and depend on applications!\n\nIn moon, you can denote a project as a library using the [`layer`](/docs/config/project#layer)\nsetting in [`moon.yml`](/docs/config/project).\n\nmoon.yml\n\n```\nlayer: 'library'\n```\n\n### Configuration\n\nEvery tool that you'll utilize in a repository will have its own configuration file. This will be a\nlot of config files, but regardless of what tool it is, where the config file should go will fall\ninto 1 of these categories:\n\n- Settings are inherited by all projects. These are known as universal tools, and enforce code consistency and quality across the entire repository. Their config file must exist in the repository root, but may support overrides in each project. Examples: Babel, [ESLint](/docs/guides/examples/eslint), [Prettier](/docs/guides/examples/prettier), [TypeScript](/docs/guides/examples/typescript)\n\n- Settings are unique per project. These are developers tools that must be configured separately for each project, as they'll have different concerns. Their config file must exist in each project, but a shared configuration may exist as a base (for example, Jest presets). Examples: [Jest](/docs/guides/examples/jest), [TypeScript](/docs/guides/examples/typescript) (with project references)\n\n- Settings are one-offs. These are typically for applications or tools that require their own config, but aren't prevalent throughout the entire repository. Examples: [Astro](/docs/guides/examples/astro), [Next](/docs/guides/examples/next), [Nuxt](/docs/guides/examples/nuxt), [Remix](/docs/guides/examples/remix), Tailwind\n\n## Dependency management\n\nDependencies, also known as node modules, are required by all projects, and are installed through a\npackage manager like npm, pnpm, or yarn. It doesn't matter which package manager you choose, but we\nhighly suggest choosing one that has proper workspaces support. If you're unfamiliar with\nworkspaces, they will:\n\n- Resolve all `package.json`'s in a repository using glob patterns.\n\n- Install dependencies from all `package.json`'s at once, in the required locations.\n\n- Create symlinks of local packages in `node_modules` (to emulate an installed package).\n\n- Deduplicate and hoist `node_modules` when applicable.\n\nAll of this functionality enables robust monorepo support, and can be enabled with the following:\n\n- npm\n- pnpm\n- Yarn\n- Yarn (classic)\n\npackage.json\n\n```\n{  // ...  \"workspaces\": [\"apps/*\", \"packages/*\"]}\n```\n\n.yarnrc.yml\n\n```\n# ...nodeLinker: 'node-modules'\n```\n\n- [Documentation](https://yarnpkg.com/features/workspaces)\n\npackage.json\n\n```\n{  // ...  \"workspaces\": [\"apps/*\", \"packages/*\"]}\n```\n\n- [Documentation](https://classic.yarnpkg.com/en/docs/workspaces)\n\npackage.json\n\n```\n{  // ...  \"workspaces\": [\"apps/*\", \"packages/*\"]}\n```\n\n- [Documentation](https://docs.npmjs.com/cli/v8/using-npm/workspaces)\n\npnpm-workspace.yaml\n\n```\npackages:  - 'apps/*'  - 'packages/*'\n```\n\n- [Documentation](https://pnpm.io/workspaces)\n\ncaution\n\nPackage workspaces are not a requirement for monorepos, but they do solve an array of problems\naround module resolution, avoiding duplicate packages in bundles, and general interoperability.\nProceed with caution for non-workspaces setups!\n\n### Workspace commands\n\nThe following common commands can be used for adding, removing, or managing dependencies in a\nworkspace. View the package manager's official documentation for a thorough list of commands.\n\n- npm\n- pnpm\n- Yarn\n- Yarn (classic)\n\nInstall dependencies:\n\n```\nnpm install\n```\n\nAdd a package:\n\n```\n# At the rootnpm install # In a projectnpm install  --workspace\n\n```\n\nRemove a package:\n\n```\n# At the rootnpm install # In a projectnpm install  --workspace\n\n```\n\nUpdate packages:\n\n```\nnpx npm-check-updates --interactive\n```\n\nInstall dependencies:\n\n```\npnpm install\n```\n\nAdd a package:\n\n```\n# At the rootpnpm add # In a projectpnpm add  --filter\n\n```\n\nRemove a package:\n\n```\n# At the rootpnpm remove # In a projectpnpm remove  --filter\n\n```\n\nUpdate packages:\n\n```\npnpm update -i -r --latest\n```\n\nInstall dependencies:\n\n```\nyarn install\n```\n\nAdd a package:\n\n```\n# At the rootyarn add # In a projectyarn workspace\n add\n```\n\nRemove a package:\n\n```\n# At the rootyarn remove # In a projectyarn workspace\n remove\n```\n\nUpdate packages:\n\n```\nyarn upgrade-interactive\n```\n\nInstall dependencies:\n\n```\nyarn install\n```\n\nAdd a package:\n\n```\n# At the rootyarn add  -w# In a projectyarn workspace\n add\n```\n\nRemove a package:\n\n```\n# At the rootyarn remove  -w# In a projectyarn workspace\n remove\n```\n\nUpdate packages:\n\n```\nyarn upgrade-interactive --latest\n```\n\n### Developer tools at the root\n\nWhile not a strict guideline to follow, we've found that installing universal developer tool related\ndependencies (Babel, ESLint, Jest, TypeScript, etc) in the root `package.json` as `devDependencies`\nto be a good pattern for consistency, quality, and the health of the repository. It provides the\nfollowing benefits:\n\n- It ensures all projects are utilizing the same version (and sometimes configuration) of a tool.\n\n- It allows the tool to easily be upgraded. Upgrade once, applied everywhere.\n\n- It avoids conflicting or outdated versions of the same package.\n\nWith that being said, this does not include development dependencies that are unique to a project!\n\n### Product libraries in a project\n\nProduct, application, and or framework specific packages should be installed as production\n`dependencies` in a project's `package.json`. We've found this pattern to work well for the\nfollowing reasons:\n\n- Application dependencies are pinned per project, avoiding accidental regressions.\n\n- Applications can upgrade their dependencies and avoid breaking neighbor applications.\n\n## Code sharing\n\nOne of the primary reasons to use a monorepo is to easily share code between projects. When code is\nco-located within the same repository, it avoids the overhead of the \"build -> version -> publish to\nregistry -> upgrade in consumer\" workflow (when the code is located in an external repository).\n\nCo-locating code also provides the benefit of fast iteration, fast adoption, and easier migration\n(when making breaking changes for example).\n\nWith [package workspaces](#dependency-management), code sharing is a breeze. As mentioned above,\nevery project that contains a `package.json` that is part of the workspace, will be symlinked into\n`node_modules`. Because of this, these packages can easily be imported using their `package.json`\nname.\n\n```\n// Imports from /packages/utils/package.jsonimport utils from '@company/utils';\n```\n\n### Depending on packages\n\nBecause packages are symlinked into `node_modules`, we can depend on them as if they were normal npm\npackages, but with 1 key difference. Since these packages aren't published, they do not have a\nversion to reference, and instead, we can use the special `workspace:^` version (yarn and pnpm only,\nuse `*` for npm).\n\n```\n{  \"name\": \"@company/consumer\",  \"dependencies\": {    \"@company/provider\": \"workspace:^\"  }}\n```\n\nThe `workspace:` version basically means \"use the package found in the current workspace\". The `:^`\ndetermines the version range to substitute with when publishing. For example, the `workspace:^`\nabove would be replaced with version of `@company/provider` as `^` when the\n`@company/consumer` package is published.\n\nThere's also `workspace:~` and `workspace:*` which substitutes to `~` and ``\nrespectively. We suggest using `:^` so that version ranges can be deduped.\n\n### Types of packages\n\nWhen sharing packages in a monorepo, there's typically 3 different kinds of packages:\n\n#### Local only\n\nA local only package is just that, it's only available locally to the repository and is not\npublished to a registry, and is not available to external repositories. For teams and companies\nthat utilize a single repository, this will be the most common type of package.\n\nA benefit of local packages is that they do not require a build step, as source files can be\nimported directly ([when configured correctly](#bundler-integration)). This avoids a lot of\n`package.json` overhead, especially in regards to `exports`, `imports`, and other import patterns.\n\n#### Internally published\n\nAn internal package is published to a private registry, and is not available to the public.\nPublished packages are far more strict than local packages, as the `package.json` structure plays a\nmuch larger role for downstream consumers, as it dictates how files are imported, where they can be\nfound, what type of formats are supported (CJS, ESM), so on and so forth.\n\nPublished packages require a build step, for both source code and TypeScript types (when\napplicable). We suggest using [esbuild](https://esbuild.github.io/) or\n[Packemon](/docs/guides/examples/packemon) to handle this entire flow. With that being said, local projects\ncan still [import their source files](#bundler-integration).\n\n#### Externally published\n\nAn external package is structured similarly to an internal package, but instead of publishing to a\nprivate registry, it's published to the npm public registry.\n\nExternal packages are primarily for open source projects, and require the repository to also be\npublic.\n\n### Bundler integration\n\nCo-locating packages is great, but how do you import and use them effectively? The easiest solution\nis to configure resolver aliases within your bundler (Webpack, Vite, etc). By doing so, you enable\nthe following functionality:\n\n- Avoids having to build (and rebuild) the package everytime its code changes.\n\n- Enables file system watching of the package, not just the application.\n\n- Allows for hot module reloading (HMR) to work.\n\n- Package code is transpiled and bundled alongside application code.\n\n- Vite\n- Webpack\n\nvite.config.ts\n\n```\nimport path from 'path';import { defineConfig } from 'vite';export default defineConfig({  // ...  resolve: {    alias: {      '@company/utils': path.join(__dirname, '../packages/utils/src'),    },  },});\n```\n\nwebpack.config.js\n\n```\nconst path = require('path');module.exports = {  // ...  resolve: {    alias: {      '@company/utils': path.join(__dirname, '../packages/utils/src'),    },  },};\n```\n\ninfo\n\nWhen configuring aliases, we suggest using the `package.json` name as the alias! This ensures that\non the consuming side, you're using the package as if it's a normal node module, and avoids\ndeviating from the ecosystem.\n\n### TypeScript integration\n\nWe suggest using TypeScript project references. Luckily, we have an\n[in-depth guide on how to properly and efficiently integrate them](/docs/guides/javascript/typescript-project-refs)!\n\n## /docs/guides/javascript/typescript-eslint\n\nSource: https://moonrepo.dev/docs/guides/javascript/typescript-eslint\n\n# typescript-eslint\n\n## ESLint integration\n\n### Disabling problematic rules\n\nA handful of ESLint rules are not compatible with the TypeScript plugin, or they cause serious\nperformance degradation, and should be disabled entirely. According to the\n[official typescript-eslint.io documentation](https://typescript-eslint.io/docs/linting/troubleshooting#eslint-plugin-import),\nmost of these rules come from the `eslint-plugin-import` plugin.\n\n.eslintrc.js\n\n```\nmodule.exports = {  // ...  rules: {    'import/default': 'off',    'import/named': 'off',    'import/namespace': 'off',    'import/no-cycle': 'off',    'import/no-deprecated': 'off',    'import/no-named-as-default': 'off',    'import/no-named-as-default-member': 'off',    'import/no-unused-modules': 'off',  },};\n```\n\n### Running from the command line\n\n### Running within editors\n\n#### ESLint\n\nUse the\n[dbaeumer.vscode-eslint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)\nextension. Too avoid poor performance, do not use ESLint for formatting code (via the\n`eslint-plugin-prettier` plugin or something similar), and only use it for linting. The difference\nin speed is comparable to 100ms vs 2000ms.\n\n.vscode/settings.json\n\n```\n{  // Automatically run all linting fixes on save as a concurrent code action,  // and avoid formatting with ESLint. Use another formatter, like Prettier.  \"editor.codeActionsOnSave\": [\"source.fixAll.eslint\"],  \"eslint.format.enable\": false,  // If linting is *too slow* while typing, uncomment the following line to  // only run the linter on save only.  // \"editor.run\": \"onSave\",  // Your package manager of choice.  \"eslint.packageManager\": \"yarn\",  // Use the newer and more performant `ESLint` class implementation.  \"eslint.useESLintClass\": true,  // List of directories that that linter should operate on.  \"eslint.workingDirectories\": [{ \"pattern\": \"apps/*\" }, { \"pattern\": \"packages/*\" }]}\n```\n\n#### Prettier\n\nUse the\n[esbenp.prettier-vscode](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)\nextension.\n\n.vscode/settings.json\n\n```\n{  // Use Prettier as the default formatter for all file types. Types not  // supported by Prettier can be overridden using bracket syntax, or ignore files.  \"editor.defaultFormatter\": \"esbenp.prettier-vscode\",  \"editor.formatOnSave\": true}\n```\n\n## /docs/guides/javascript/typescript-project-refs\n\nSource: https://moonrepo.dev/docs/guides/javascript/typescript-project-refs\n\n# TypeScript project references\n\nThe ultimate in-depth guide for using TypeScript in a monorepo effectively!\n\nHow to use TypeScript in a monorepo? What are project references? Why use project references? What\nis the best way to use project references? These are just a handful of questions that are\nconstantly asked on Twitter, forums, Stack Overflow, and even your workplace.\n\nBased on years of experience managing large-scale frontend repositories, we firmly believe that\nTypeScript project references are the proper solution for effectively scaling TypeScript in a\nmonorepo. The official\n[TypeScript documentation on project references](https://www.typescriptlang.org/docs/handbook/project-references.html)\nanswers many of these questions, but it basically boils down to the following:\n\n- Project references enforce project boundaries, disallowing imports to arbitrary projects unless they have been referenced explicitly in configuration. This avoids circular references / cycles.\n\n- It enables TypeScript to process individual units, instead of the entire repository as a whole. Perfect for reducing CI and local development times.\n\n- It supports incremental compilation, so only out-of-date or affected projects are processed. The more TypeScript's cache is warmed, the faster it will be.\n\n- It simulates how types work in the Node.js package ecosystem.\n\nThis all sounds amazing but there's got to be some downsides right? Unfortunately, there is:\n\n- Project references require generating declarations to resolve type information correctly. This results in a lot of compilation artifacts littered throughout the repository. There [are ways](#gitignore) [around this](/docs/config/toolchain#routeoutdirtocache).\n\n- This approach is a bit involved and may require some cognitive overhead based on your current level of TypeScript tooling knowledge.\n\nsuccess\n\nIf you'd like a real-world repository to reference, our\n[moonrepo/moon](https://github.com/moonrepo/moon), [moonrepo/dev](https://github.com/moonrepo/dev),\nand [moonrepo/examples](https://github.com/moonrepo/examples) repositories utilizes this\narchitecture!\n\n## Preface\n\nBefore you dive into this questionably long guide, we'd like to preface with:\n\n- This guide is a living document and will continually be updated with best practices and frequently asked questions. Keep returning to learn more!\n\n- This guide assumes a basic level knowledge of TypeScript and how it works.\n\n- The architecture outlined in this guide assumes that TypeScript is only used for typechecking and not compiling. However, supporting compilation should be as easy as modifying a handful of compiler options.\n\n- Although this guide exists within moon's documentation, it does not require moon. We've kept all implementation details generic enough for it be used in any repository, but have also included many notes on how moon would improve this experience.\n\n## Configuration\n\nThe most complicated part of integrating TypeScript in a monorepo is a proper configuration setup.\nBased on our extensive experience, we suggest the following architecture as a base! This is not\nperfect and can most definitely be expanded upon or modified to fit your needs.\n\n### Root-level\n\nIn a polyrepo, the root `tsconfig.json` is typically the only configuration file, as it defines\ncommon compiler options, and includes files to typecheck. In a monorepo, these responsibilities are\nnow split across multiple configuration files.\n\n#### `tsconfig.json`\n\nTo start, the root `tsconfig.json` file is nothing more than a list of all projects in the\nmonorepo, with each project being an individual entry in the `references` field. Each entry must\ncontain a `path` field with a relative file system path to the project root (that contains their\nconfig).\n\nWe also do not define compiler options in this file, as project-level configuration files would\nnot be able to extend this file, as it would trigger a circular reference. Instead, we define\ncommon compiler options in a root [`tsconfig.options.json`](#tsconfigoptionsjson) file, that this\nfile also `extends` from.\n\nIn the end, this file should only contain 3 fields: `extends`, `files` (an empty list), and\n`references`. This abides the\n[official guidance around structure](https://www.typescriptlang.org/docs/handbook/project-references.html#overall-structure).\n\n```\n{  \"extends\": \"./tsconfig.options.json\",  \"files\": [],  \"references\": [    {      \"path\": \"apps/foo\"    },    {      \"path\": \"packages/bar\"    }    // ... more  ]}\n```\n\nWhen using moon, the\n[`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting will\nkeep this `references` list automatically in sync, and the name of the file can be customized with\n[`typescript.rootConfigFileName`](/docs/config/toolchain#rootconfigfilename).\n\n#### `tsconfig.options.json`\n\nThis file will contain common compiler options that will be inherited by all projects in the\nmonorepo. For project references to work correctly, the following settings must be enabled at the\nroot, and typically should not be disabled in each project.\n\n- `composite` - Enables project references and informs the TypeScript program where to find referenced outputs.\n\n- `declaration` - Project references rely on the compiled declarations (`.d.ts`) of external projects. If declarations do not exist, TypeScript will generate them on demand.\n\n- `declarationMap` - Generate sourcemaps for declarations, so that language server integrations in editors like \"Go to\" resolve correctly.\n\n- `incremental` - Enables incremental compilation, greatly improving performance.\n\n- `noEmitOnError` - If the typechecker fails, avoid generating invalid or partial declarations.\n\n- `skipLibCheck` - Avoids eager loading and analyzing all declarations, greatly improving performance.\n\nFurthermore, we have 2 settings that should be enabled per project, depending on the project type.\n\n- `emitDeclarationOnly` - For packages: Emit declarations, as they're required for references, but avoid compiling to JavaScript.\n\n- `noEmit` - For applications: Don't emit declarations, as others should not be depending on the project.\n\nFor convenience, we provide the\n[`tsconfig-moon`](https://github.com/moonrepo/dev/tree/master/packages/tsconfig) package, which\ndefines common compiler options and may be used here.\n\n```\n{  \"compilerOptions\": {    \"composite\": true,    \"declaration\": true,    \"declarationMap\": true,    \"emitDeclarationOnly\": true,    \"incremental\": true,    \"noEmitOnError\": true,    \"skipLibCheck\": true    // ... others  }}\n```\n\nWhen using moon, the name of the file can be customized with\n[`typescript.rootOptionsConfigFileName`](/docs/config/toolchain#rootoptionsconfigfilename).\n\n##### ECMAScript interoperability\n\nECMAScript modules (ESM) have been around for quite a while now, but the default TypeScript settings\nare not configured for them. We suggest the following compiler options if you want proper ESM\nsupport with interoperability with the ecosystem.\n\n```\n{  \"compilerOptions\": {    \"allowSyntheticDefaultImports\": true,    \"esModuleInterop\": true,    \"isolatedModules\": true,    \"module\": \"esnext\",    \"moduleResolution\": \"bundler\",    \"strict\": true,    \"target\": \"esnext\"    // ... others  }}\n```\n\n#### `.gitignore`\n\nProject references unfortunately generate a ton of artifacts that typically shouldn't be committed\nto the repository (but could be if you so choose). We suggest ignoring the following:\n\n.gitignore\n\n```\n# The `outDir` for declarationslib/# Build cache manifests*.tsbuildinfo\n```\n\n### Project-level\n\nEach project that contains TypeScript files and will utilize the typechecker must contain a\n`tsconfig.json` in the project root, typically as a sibling to `package.json`.\n\n#### `tsconfig.json`\n\nA `tsconfig.json` in the root of a project (application or package) is required, as it informs\nTypeScript that this is a project, and that it can be referenced by other projects. In its simplest\nform, this file should extend the root [`tsconfig.options.json`](#tsconfigoptionsjson) to inherit\ncommon compiler options, define its own compiler options (below), define includes/excludes, and any\nnecessary references.\n\nWhen using moon, the name of the file can be customized with\n[`typescript.projectConfigFileName`](/docs/config/toolchain#projectconfigfilename).\n\n- Applications\n- Packages\n\nFor applications, declaration emitting can be disabled, since external projects should not be\nimporting files from an application. If this use case ever arises, move those files into a package.\n\napps/foo/tsconfig.json\n\n```\n{  \"extends\": \"../../../../tsconfig.options.json\",  \"compilerOptions\": {    \"noEmit\": true  },  \"include\": [],  \"references\": []}\n```\n\nFor packages, we must define the location in which to generate declarations. These are the\ndeclarations that external projects would reference. This location is typically\n[gitignored](#gitignore)!\n\npackages/bar/tsconfig.json\n\n```\n{  \"extends\": \"../../../../tsconfig.options.json\",  \"compilerOptions\": {    \"emitDeclarationOnly\": true,    \"outDir\": \"./lib\"  },  \"include\": [],  \"references\": []}\n```\n\nWhen using moon, the `outDir` can automatically be re-routed to a shared cache using\n[`typescript.routeOutDirToCache`](/docs/config/toolchain#routeoutdirtocache), to avoid littering\nthe repository with compilation artifacts.\n\n##### Includes and excludes\n\nBased on experience, we suggest defining `include` instead of `exclude`, as managing a whitelist of\ntypecheckable files is much easier. When dealing with excludes, there are far too many\npossibilities. To start, you have `node_modules`, and for applications maybe `dist`, `build`,\n`.next`, or another application specific folder, and then for packages you may have `lib`, `cjs`,\n`esm`, etc. It becomes very... tedious.\n\nThe other benefit of using `include` is that it forces TypeScript to only load what's necessary,\ninstead of eager loading everything into memory, and for typechecking files that aren't part of\nsource, like configuration.\n\n/tsconfig.json\n\n```\n{  // ...  \"include\": [\"src/**/*\", \"tests/**/*\", \"*.js\", \"*.ts\"]}\n```\n\n##### Depending on other projects\n\nWhen a project depends on another project (by importing code from it), either using relative paths,\n[path aliases](#using-paths-aliases), or its `package.json` name, it must be declared as a\nreference. If not declared, TypeScript will error with a message about importing outside the project\nboundary.\n\n/tsconfig.json\n\n```\n{  // ...  \"references\": [    {      \"path\": \"../../foo\"    },    {      \"path\": \"../../bar\"    },    {      \"path\": \"../../../../baz\"    }  ]}\n```\n\nTo make use of editor intellisense and auto-imports of deeply nested files, you'll most likely need\nto add includes for referenced projects as well.\n\n/tsconfig.json\n\n```\n{  // ...  \"include\": [    // ...    \"src/**/*\",    \"../../foo/src/**/*\",    \"../../bar/src/**/*\",    \"../../../../baz/src/**/*\"  ]}\n```\n\nWhen using moon, the\n[`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting will\nkeep this `references` list automatically in sync, and\n[`typescript.includeProjectReferenceSources`](/docs/config/toolchain#syncprojectreferences) for\n`include`.\n\n#### `tsconfig.*.json`\n\nAdditional configurations may exist in a project that serve a role outside of typechecking, with one\nsuch role being npm package publishing. These configs are sometimes named `tsconfig.build.json`,\n`tsconfig.types.json`, or `tsconfig.lib.json`. Regardless of what they're called, these configs are\noptional, so unless you have a business need for them, you may skip this section.\n\n##### Package publishing\n\nAs mentioned previously, these configs may be used for npm packages, primarily for generating\nTypeScript declarations that are mapped through the `package.json`\n[`types` (or `typings`) field](https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html).\n\nGiven this `package.json`...\n\n/package.json\n\n```\n{  // ...  \"types\": \"./lib/index.d.ts\"}\n```\n\nOur `tsconfig.build.json` may look like...\n\n/tsconfig.build.json\n\n```\n{  \"extends\": \"../../../../tsconfig.options.json\",  \"compilerOptions\": {    \"outDir\": \"lib\",    \"rootDir\": \"src\"  },  \"include\": [\"src/**/*\"]}\n```\n\nSimple right? But why do we need an additional configuration? Why not use the other `tsconfig.json`?\nGreat questions! The major reason is that we only want to publish declarations for source files,\nand the declarations file structure should match 1:1 with the sources structure. The `tsconfig.json`\ndoes not guarantee this, as it may include test, config, or arbitrary files, all of which may not\nexist in the sources directory (`src`), and will alter the output to an incorrect directory\nstructure. Our `tsconfig.build.json` solves this problem by only including source files, and by\nforcing the source root to `src` using the `rootDir` compiler option.\n\nHowever, there is a giant caveat with this approach! Because TypeScript utilizes Node.js's module\nresolution, it will reference the declarations defined by the `package.json` `types` or\n[`exports`](#supporting-packagejson-exports) fields, instead of the `outDir` compiler option, and\nthe other `tsconfig.json` does not guarantee these files will exist. This results in TypeScript\nfailing to find the appropriate types! To solve this, add the `tsconfig.build.json` as a project\nreference to `tsconfig.json`.\n\n/tsconfig.json\n\n```\n{  // ...  \"references\": [    {      \"path\": \"./tsconfig.build.json\"    }    // ... others  ]}\n```\n\n##### Vendor specific\n\nSome vendors, like [Vite](/docs/guides/examples/vite), [Vitest](/docs/guides/examples/vite), and\n[Astro](/docs/guides/examples/astro) may include additional `tsconfig.*.json` files unique to their ecosystem.\nWe suggest following their guidelines and implementation when applicable.\n\n## Running the typechecker\n\nNow that our configuration is place, we can run the typechecker, or attempt to at least! This can be\ndone with the `tsc --build` command, which acts as a\n[build orchestrator](https://www.typescriptlang.org/docs/handbook/project-references.html#build-mode-for-typescript).\nWe also suggest passing `--verbose` for insights into what projects are compiling, and which are\nout-of-date.\n\n### On all projects\n\nFrom the root of the repository, run `tsc --build --verbose` to typecheck all projects, as defined\nin [tsconfig.json](#tsconfigjson). TypeScript will generate a directed acyclic graph (DAG) and\ncompile projects in order so that dependencies and references are resolved correctly.\n\ninfo\n\nWhy run TypeScript in the root? Typically you would only want to run against projects, but for\nsituations where you need to verify that all projects still work, running in the root is the best\napproach. Some such situations are upgrading TypeScript itself, upgrading global `@types` packages,\nupdating shared types, reworking build processes, and more.\n\n### On an individual project\n\nTo only typecheck a single project (and its dependencies), there are 2 approaches. The first is to\nrun from the root, and pass a relative path to the project, such as\n`tsc --build --verbose packages/foo`. The second is to change the working directory to the project,\nand run from there, such as `cd packages/foo && tsc --build --verbose`.\n\nBoth approaches are viable, and either may be used based on your tooling, build system, task runner,\nso on and so forth. This is the approach moon suggests with its\n[`typecheck` task](/docs/guides/examples/typescript).\n\n### On affected projects\n\nIn CI environments, it's nice to only run the typechecker on affected projects  projects that\nhave changed files. While this isn't entirely possible with `tsc`, it is possible with moon! Head\nover to the\n[official docs for more information](/docs/run-task#running-based-on-affected-files-only).\n\n## Using `paths` aliases\n\nPath aliases, also known as path mapping or magic imports, is the concept of defining an import\nalias that re-maps its underlying location on the file system. In TypeScript, this is achieved with\nthe\n[`paths` compiler option](https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping).\n\nIn a monorepo world, we suggest using path aliases on a per-project basis, instead of defining them\n\"globally\" in the root. This gives projects full control of what's available and what they want to\nimport, and also plays nice with the mandatory `baseUrl` compiler option.\n\n/tsconfig.json\n\n```\n{  // ...  \"compilerOptions\": {    // ...    \"baseUrl\": \".\",    \"paths\": {      // Within the project      \":components/*\": [\"./src/components/*\"],      // To a referenced project      \":shared/*\": [\"../../shared/code/*\"]    }  },  \"references\": [    {      \"path\": \"../../shared/code\"    }  ]}\n```\n\nThe above aliases would be imported like the following:\n\n```\n// Beforeimport { Button } from '../../../../components/Button';import utils from '../../shared/code/utils';// Afterimport { Button } from ':components/Button';import utils from ':shared/utils';\n```\n\ninfo\n\nWhen using path aliases, we suggest prefixing or suffixing the alias with `:` so that it's apparent\nthat it's an alias (this also matches the new `node:` import syntax). Using no special character or\n`@` is problematic as it risks a chance of collision with a public npm package and may accidentally\nopen your repository to a\n[supply chain attack](https://snyk.io/blog/npm-security-preventing-supply-chain-attacks/). Other\ncharacters like `~` and `$` have an existing meaning in the ecosystem, so it's best to avoid them\naswell.\n\n### Importing source files from local packages\n\nIf you are importing from a project reference using a `package.json` name, then TypeScript will\nabide by Node.js module resolution logic, and will import using the\n[`main`/`types` or `exports` entry points](https://nodejs.org/api/packages.html#package-entry-points).\nThis means that you're importing compiled code instead of source code, and will require the\npackage to be constantly rebuilt if changes are made to it.\n\nHowever, why not simply import source files instead? With path aliases, you can do just that, by\ndefining a `paths` alias that maps the `package.json` name to its source files, like so.\n\n/tsconfig.json\n\n```\n{  // ...  \"compilerOptions\": {    // ...    \"paths\": {      // Index import      \"@scope/name\": [\"../../shared/package/src/index.ts\"],      // Deep imports      \"@scope/name/*\": [\"../../shared/package/src/*\"]    }  },  \"references\": [    {      \"path\": \"../../shared/package\"    }  ]}\n```\n\nWhen using moon, the\n[`typescript.syncProjectReferencesToPaths`](/docs/config/toolchain#syncprojectreferencestopaths)\nsetting will automatically create `paths` based on the local references.\n\n## Sharing and augmenting types\n\nDeclaring global types, augmenting node modules, and sharing reusable types is a common practice.\nThere are many ways to achieve this, so choose what works best for your repository. We use the\nfollowing pattern with great success.\n\nAt the root of the repository, create a `types` folder as a sibling to `tsconfig.json`. This folder\nmust only contain declarations (`.d.ts`) files for the following reasons:\n\n- Declarations can be `include`ed in a project without having to be a project reference.\n\n- Hard-coded declarations do not need to be compiled from TypeScript files.\n\nBased on the above, update your project's `tsconfig.json` to include all of these types, or just\nsome of these types.\n\n/tsconfig.json\n\n```\n{  // ...  \"include\": [\"src/**/*\", \"../../../../types/**/*\"]}\n```\n\nIn the future, moon will provide a setting to automate this workflow!\n\n## Supporting `package.json` exports\n\nIn Node.js v12, they introduced a new field to `package.json` called `exports` that aims to solve\nthe shortcomings of the `main` field. The `exports` field is very complicated, and instead of\nrepeating all of its implementation details, we suggest reading\n[the official Node.js docs on this topic](https://nodejs.org/api/packages.html#package-entry-points).\n\nWith that being said, TypeScript completely ignored the `exports` field until\n[v4.7](https://devblogs.microsoft.com/typescript/announcing-typescript-4-7/#esm-nodejs), and\nrespecting `exports` is still ignored unless the `moduleResolution` compiler option is set to\n\"nodenext\", \"node16\", or \"bundler\". If `moduleResolution` is set to \"node\", then your integration is\nresolving based on the `main` and `types` field, which are basically \"legacy\".\n\nwarning\n\nEnabling `package.json` imports/exports resolution is very complicated, and may be very tedious,\nespecially considering the state of the npm ecosystem. Proceed with caution!\n\n### State of the npm ecosystem\n\nAs mentioned above, the npm ecosystem (as of November 2022) is in a very fragile state in regards to\nimports/exports. Based on our experience attempting to utilize them in a monorepo, we ran into an\narray of problems, some of which are:\n\n- Published packages are simply utilizing imports/exports incorrectly. The semantics around CJS/ESM are very strict, and they may be configured wrong. This is exacerbated by the new `type` field.\n\n- The `exports` field overrides the `main` and `types` fields. If `exports` exists without type conditions, but the `types` field exists, the `types` entry point is completely ignored, resulting in TypeScript failures.\n\nWith that being said, there are [ways around this](#resolving-issues) and moving forward is\npossible, if you dare!\n\n### Enabling imports/exports resolution\n\nTo start, set the `moduleResolution` compiler option to \"nodenext\" (for packages) or \"bundler\" (for\napps) in the [`tsconfig.options.json`](#tsconfigoptionsjson) file.\n\n```\n{  \"compilerOptions\": {    // ...    \"moduleResolution\": \"nodenext\"  }}\n```\n\nNext, [run the typechecker from the root](#on-all-projects) against all projects. This will help\nuncover all potential issues with the dependencies you're using or the current configuration\narchitecture. If no errors are found, well congratulations, otherwise jump to the next section for\nmore information on [resolving them](#resolving-issues).\n\nIf you're trying to use `exports` in your own packages, ensure that the `types` condition is set,\nand it's the first condition in the mapping! We also suggest including `main` and the top-level\n`types` for tooling that do not support `exports` yet.\n\npackage.json\n\n```\n{  // ...  \"main\": \"./lib/index.js\",  \"types\": \"./lib/index.d.ts\",  \"exports\": {    \"./package.json\": \"./package.json\",    \".\": {      \"types\": \"./lib/index.d.ts\",      \"node\": \"./lib/index.js\"    }  }}\n```\n\ninfo\n\nManaging `exports` is non-trivial. If you'd prefer them to be automatically generated based on a set\nof inputs, we suggest using [Packemon](https://packemon.dev/)!\n\n### Resolving issues\n\nThere's only one way to resolve issues around incorrectly published `exports`, and that is package\npatching, either with [Yarn's patching feature](https://yarnpkg.com/features/protocols/#patch),\n[pnpm's patching feature](https://pnpm.io/cli/patch), or the\n[`patch-package` package](https://www.npmjs.com/package/patch-package). With patching, you can:\n\n- Inject the `types` condition/field if it's missing.\n\n- Re-structure the `exports` mapping if it's incorrect.\n\n- Fix incorrect entry point paths.\n\n- And even fix invalid TypeScript declarations or JavaScript code!\n\npackage.json\n\n```\n{  \"main\": \"./lib/index.js\",  \"types\": \"./lib/index.d.ts\",  \"exports\": {    \"./package.json\": \"./package.json\",-    \".\": \"./lib/index.js\"+    \".\": {+      \"types\": \"./lib/index.d.ts\",+      \"node\": \"./lib/index.js\"+    }  }}\n```\n\ninfo\n\nMore often than not, the owners of these packages may be unaware that their `exports` mapping is\nincorrect. Why not be a good member of the community and report an issue or even submit a pull\nrequest?\n\n## Editor integration\n\nUnfortunately, we only have experience with VS Code. If you prefer another editor and have guidance\nyou'd like to share with the community, feel free to submit a pull request and we'll include it\nbelow!\n\n### VS Code\n\n[VS Code](https://code.visualstudio.com/) has first-class support for TypeScript and project\nreferences, and should \"just work\" without any configuration. You can verify this by restarting the\nTypeScript server in VS Code (with the cmd + shift + p command palette) and navigating to\neach project. Pay attention to the status bar at the bottom, as you'll see this:\n\nWhen this status appears, it means that VS Code is compiling a project. It will re-appear multiple\ntimes, basically for each project, instead of once for the entire repository.\n\nFurthermore, ensure that VS Code is using the version of TypeScript from the `typescript` package in\n`node_modules`. Relying on the version that ships with VS Code may result in unexpected TypeScript\nfailures.\n\n.vscode/settings.json\n\n```\n{  \"typescript.tsdk\": \"node_modules/typescript/lib\"  // Or \"Select TypeScript version\" from the command palette}\n```\n\n## FAQ\n\n### I still have questions, where can I ask them?\n\nWe'd love to answer your questions and help anyway that we can. Feel free to...\n\n- Join the [moonrepo discord](https://discord.gg/qCh9MEynv2) and post your question in the `#typescript` channel.\n\n- Ping me, [Miles Johnson](https://twitter.com/mileswjohnson), on Twitter. I'll try my best to respond to every tweet.\n\n### Do I have to use project references?\n\nShort answer, no. If you have less than say 10 projects, references may be overkill. If your\nrepository is primarily an application, but then has a handful of shared npm packages, references\nmay also be unnecessary here. In the end, it really depends on how many projects exist in the\nmonorepo, and what your team/company is comfortable with.\n\nHowever, we do suggest using project references for very large monorepos (think 100s of projects),\nor repositories with a large number of contributors, or if you merely want to reduce CI typechecking\ntimes.\n\n### What about not using project references and only using source files?\n\nA popular alternative to project references is to simply use the source files as-is, by updating the\n`main` and `types` entry fields within each `package.json` to point to the original TypeScript\nfiles. This approach is also known as \"internal packages\".\n\npackage.json\n\n```\n{  // ...  \"main\": \"./src/index.tsx\",  \"types\": \"./src/index.tsx\"}\n```\n\nWhile this works, there are some downsides to this approach.\n\n- Loading declaration files are much faster than source files.\n\n- You'll lose all the benefits of TypeScript's incremental caching and compilation. TypeScript will consistently load, parse, and evaluate these source files every time. This is especially true for CI environments.\n\n- When using `package.json` workspaces, bundlers and other tools may consider these source files \"external\" as they're found in `node_modules`. This will require custom configuration to allow it.\n\n- It breaks consistency. Consistency with the npm ecosystem, and consistency with how packaging and TypeScript was designed to work. If all packages are internal, then great, but if you have some packages that are published, you now have 2 distinct patterns for \"using packages\" instead of 1.\n\nWith that being said, theres a 3rd alternative that may be the best of both worlds, using project\nreferences and source files,\n[by using `paths` aliases](#importing-source-files-from-local-packages).\n\nAll in all, this is a viable approach if you're comfortable with the downsides listed above. Use the\npattern that works best for your repository, team, or company!\n\n### How to integrate with ESLint?\n\nWe initially included ESLint integration in this guide, but it was very complex and in-depth on its\nown, so we've opted to push it to another guide. Unfortunately, that guide is not yet available, so\nplease come back soon! We'll announce when it's ready.\n\n### How to handle circular references?\n\nProject references do not support\n[circular references](https://github.com/microsoft/TypeScript/issues/33685) (cycles), which is\ngreat, as they are a code smell! If you find yourself arbitrarily importing code from random\nsources, or between 2 projects that depend on each other, then this highlights a problem with your\narchitecture. Projects should be encapsulated and isolated from outside sources, unless explicitly\nallowed through a dependency. Dependencies are \"upstream\", so having them depend on the current\nproject (the \"downstream\"), makes little to no sense.\n\nIf you're trying to adopt project references and are unfortunately hitting the circular reference\nproblem, don't fret, untangling is possible, although non-trivial depending on the size of your\nrepository. It basically boils down to creating an additional project to move coupled code to.\n\nFor example, if project A was importing from project B, and B from A, then the solution would be to\ncreate another project, C (typically a shared npm package), and move both pieces of code into C. A\nand B would then import from C, instead of from each other. We're not aware of any tools that would\nautomate this, or detect cycles, so you'll need to do it manually.\n\n## /docs/guides/mcp\n\nSource: https://moonrepo.dev/docs/guides/mcp\n\n# MCP integration\n\nv1.37.0\n\n[Model Context Protocol](https://modelcontextprotocol.io) (MCP) is an open standard that enables AI\nmodels to interact with external tools and services through a unified interface. The moon CLI\ncontains an MCP server that you can register with your code editor to allow LLMs to use moon\ndirectly.\n\n## Setup\n\n### Claude Code\n\nTo use [MCP servers in Claude Code](https://docs.anthropic.com/en/docs/claude-code/mcp), run the\nfollowing command in your terminal:\n\n```\nclaude mcp add moon -s project -e MOON_WORKSPACE_ROOT=/absolute/path/to/your/moon/workspace -- moon mcp\n```\n\nOr create an `.mcp.json` file in your project directory.\n\n```\n{  \"mcpServers\": {    \"moon\": {      \"command\": \"moon\",      \"args\": [\"mcp\"],      \"env\": {        \"MOON_WORKSPACE_ROOT\": \"/absolute/path/to/your/moon/workspace\"      }    }  }}\n```\n\n### Cursor\n\nTo use [MCP servers in Cursor](https://docs.cursor.com/context/model-context-protocol), create a\n`.cursor/mcp.json` file in your project directory, or `~/.cursor/mcp.json` globally, with the\nfollowing content:\n\n.cursor/mcp.json\n\n```\n{  \"mcpServers\": {    \"moon\": {      \"command\": \"moon\",      \"args\": [\"mcp\"],      \"env\": {        \"MOON_WORKSPACE_ROOT\": \"/absolute/path/to/your/moon/workspace\"      }    }  }}\n```\n\nOnce configured, the moon MCP server should appear in the \"Available Tools\" section on the MCP\nsettings page in Cursor.\n\n### VS Code\n\nTo use MCP servers in VS Code, you must have the\n[Copilot Chat](https://code.visualstudio.com/docs/copilot/chat/copilot-chat) extension installed.\nOnce installed, create a `.vscode/mcp.json` file with the following content:\n\n.vscode/mcp.json\n\n```\n{  \"servers\": {    \"moon\": {      \"type\": \"stdio\",      \"command\": \"moon\",      \"args\": [\"mcp\"],      // >= 1.102 (June 2025)      \"cwd\": \"${workspaceFolder}\",      // Older versions      \"env\": {        \"MOON_WORKSPACE_ROOT\": \"${workspaceFolder}\"      }    }  }}\n```\n\nOnce your MCP server is configured, you can use it with\n[GitHub Copilots agent mode](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode):\n\n- Open the Copilot Chat view in VS Code\n\n- Enable agent mode using the mode select dropdown\n\n- Toggle on moon's MCP tools using the \"Tools\" button\n\n### Zed\n\nTo use [MCP servers in Zed](https://zed.dev/docs/ai/mcp), create a `.zed/settings.json` file in your\nproject directory, or `~/.config/zed/settings.json` globally, with the following content:\n\n.zed/settings.json\n\n```\n{  \"context_servers\": {    \"moon\": {      \"command\": {        \"path\": \"moon\",        \"args\": [\"mcp\"],        \"env\": {          \"MOON_WORKSPACE_ROOT\": \"/absolute/path/to/your/moon/workspace\"        }      }    }  }}\n```\n\nOnce your MCP server is configured, you'll need to enable the tools using the following steps:\n\n- Open the Agent panel in Zed\n\n- Click the Write/Ask toggle button and go to \"Configure Profiles\"\n\n- Click \"Customize\" in the Ask section\n\n- Click \"Configure MCP Tools\"\n\n- Enable each tool under the \"moon\" section\n\n## Available tools\n\nThe following tools are available in the moon MCP server and can be executed by LLMs using agent\nmode.\n\n- `get_project` - Get a project and its tasks by `id`.\n\n- `get_projects` - Get all projects.\n\n- `get_task` - Get a task by `target`.\n\n- `get_tasks` - Get all tasks.\n\n- `get_touched_files` - Gets touched files between base and head revisions. v1.38.0\n\n- `sync_projects` - Runs the `SyncProject` action for one or many projects by `id`. v1.38.0\n\n- `sync_workspace` - Runs the `SyncWorkspace` action. v1.38.0\n\ninfo\n\nThe\n[request and response shapes](https://github.com/moonrepo/moon/blob/master/packages/types/src/mcp.ts)\nfor these tools are defined as TypeScript types in the\n[`@moonrepo/types`](https://www.npmjs.com/package/@moonrepo/types) package.\n\n## /docs/guides/node/examples\n\nSource: https://moonrepo.dev/docs/guides/node/examples\n\n- [Home](/)\n- JavaScript\n- [Examples](/docs/guides/node/examples)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Node.js examples\n\n[ AngularIn this guide, you'll learn how to integrate Angular into moon.](/docs/guides/examples/angular)\n\n[ AstroIn this guide, you'll learn how to integrate Astro.](/docs/guides/examples/astro)\n\n[ ESLintIn this guide, you'll learn how to integrate ESLint into moon.](/docs/guides/examples/eslint)\n\n[ JestIn this guide, you'll learn how to integrate Jest into moon.](/docs/guides/examples/jest)\n\n[ NestIn this guide, you'll learn how to integrate NestJS into moon.](/docs/guides/examples/nest)\n\n[ NextIn this guide, you'll learn how to integrate Next.js into moon.](/docs/guides/examples/next)\n\n[ NuxtIn this guide, you'll learn how to integrate Nuxt v3, a Vue framework,](/docs/guides/examples/nuxt)\n\n[ PackemonIn this guide, you'll learn how to integrate Packemon into moon. Packemon](/docs/guides/examples/packemon)\n\n[ PrettierIn this guide, you'll learn how to integrate Prettier into moon.](/docs/guides/examples/prettier)\n\n[ ReactReact is an application or library concern, and not a build system one, since the bundling of React](/docs/guides/examples/react)\n\n[ RemixIn this guide, you'll learn how to integrate Remix into moon.](/docs/guides/examples/remix)\n\n[ SolidSolid (also known as SolidJS) is a JavaScript framework for building](/docs/guides/examples/solid)\n\n[ StorybookStorybook is a frontend workshop for building UI components and pages in isolation. Thousands of](/docs/guides/examples/storybook)\n\n[ SvelteKitSvelteKit is built on Svelte, a UI framework that](/docs/guides/examples/sveltekit)\n\n[ TypeScriptIn this guide, you'll learn how to integrate TypeScript into](/docs/guides/examples/typescript)\n\n[ Vite & VitestIn this guide, you'll learn how to integrate Vite and](/docs/guides/examples/vite)\n\n[ VueVue is an application or library concern, and not a build system one, since the bundling of Vue is](/docs/guides/examples/vue)\n\n[TypeScript project references](/docs/guides/javascript/typescript-project-refs)\n\n[Angular](/docs/guides/examples/angular)\n\n## /docs/guides/notifications\n\nSource: https://moonrepo.dev/docs/guides/notifications\n\n# Terminal notifications\n\nv1.38.0\n\nmoon is able to send operating system desktop notifications for specific events in the action\npipeline, on behalf of your terminal application. This is useful for continuous feedback loops and\nreacting to long-running commands while multi-tasking.\n\nNotifications are opt-in and must be enabled with the\n[`notify.terminalNotifications`](/docs/config/workspace#terminalnotifications) setting.\n\n.moon/workspace.yml\n\n```\nnotifier:  terminalNotifications: 'always'\n```\n\n## Setup\n\nNotifications must be enabled at the operating system level.\n\n### Linux\n\nLinux support is based on the [XDG specification](https://en.wikipedia.org/wiki/XDG) and utilizes\nD-BUS APIs, primarily the\n[`org.freedesktop.Notifications.Notify`](https://www.galago-project.org/specs/notification/0.9/x408.html#command-notify)\nmethod. Refer to your desktop distribution for more information.\n\nNotifications will be sent using the `moon` application name (the current executable).\n\n### macOS\n\n- Open \"System Settings\" or \"System Preferences\"\n\n- Select \"Notifications\" in the left sidebar\n\n- Select your terminal application from the list (e.g., \"Terminal\", \"iTerm\", etc)\n\n- Ensure \"Allow notifications\" is enabled\n\n- Customize the other settings as desired\n\nNotifications will be sent from your currently running terminal application, derived from the\n`TERM_PROGRAM` environment variable. If we fail to detect the terminal, it will default to \"Finder\".\n\n### Windows\n\nRequires Windows 10 or later.\n\n- Open \"Settings\"\n\n- Go to the \"System\" panel\n\n- Select \"Notifications & Actions\" in the left sidebar\n\n- Ensure notifications are enabled\n\nNotifications will be sent from the \"Windows Terminal\" app if it's currently in use, otherwise from\n\"Microsoft PowerShell\".\n\n## /docs/guides/offline-mode\n\nSource: https://moonrepo.dev/docs/guides/offline-mode\n\n# Offline mode\n\nmoon assumes that an internet connection is always available, as we download and install tools into\nthe toolchain, resolve versions against upstream manifests, and automatically install dependencies.\nWhile this is useful, having a constant internet connection isn't always viable.\n\nTo support workflows where internet isn't available or is spotty, moon will automatically check for\nan active internet connection, and drop into offline mode if necessary.\n\n## What's disabled when offline\n\nWhen offline, moon will skip or disable the following:\n\n- Automatic dependency installation will be skipped.\n\n- Toolchain will skip resolving, downloading, and installing tools, and instead use the local cache. If no local cache available, will fallback to binaries found on `PATH`.\n\n- If not available on `PATH`, will fail to run.\n\n- Upgrade and version checks will be skipped.\n\n## Toggling modes\n\nWhile we automatically check for an internet connection, both online and offline modes can be forced\nwith the `PROTO_OFFLINE` environment variable. Setting the variable to `1` or `true` will force\noffline mode, while `0` and `false` will force online mode.\n\n## Environment variables\n\nSome additional variables to interact with offline checks.\n\n- `PROTO_OFFLINE_TIMEOUT` - Customize the timeout for offline checks (in milliseconds). Defaults to `750`.\n\n- `PROTO_OFFLINE_HOSTS` - Customize additional hosts/IPs to check for offline status. Separate multiple hosts with a `,`.\n\n- `PROTO_OFFLINE_IP_VERSION` - Customize which IP version to support, `4` or `6`. If not defined, supports both.\n\n## /docs/guides/open-source\n\nSource: https://moonrepo.dev/docs/guides/open-source\n\n# Open source usage\n\nAlthough moon was designed for large monorepos, it can also be used for open source projects,\nespecially when coupled with our [built-in continuous integration support](/docs/guides/ci).\n\nHowever, a pain point with moon is that it has an explicitly configured version for each tool in the\n[toolchain](/docs/concepts/toolchain), but open source projects typically need to run checks against\nmultiple versions! To mitigate this problem, you can set the matrix value as an environment\nvariable, in the format of `MOON__VERSION`.\n\n.github/workflows/ci.yml\n\n```\nname: 'Pipeline'on:  push:    branches:      - 'master'  pull_request:jobs:  ci:    name: 'CI'    runs-on: ${{ matrix.os }}    strategy:      matrix:        os: ['ubuntu-latest', 'windows-latest']        node-version: [16, 18, 20]    steps:      # Checkout repository      - uses: 'actions/checkout@v4'        with:          fetch-depth: 0      # Install Node.js      - uses: 'actions/setup-node@v6'      # Install dependencies      - run: 'yarn install --immutable'      # Run moon and affected tasks      - run: 'yarn moon ci'        env:          MOON_NODE_VERSION: ${{ matrix.node-version }}\n```\n\ninfo\n\nThis example is only for GitHub actions, but the same mechanism can be applied to other CI\nenvironments.\n\n## Reporting run results\n\nWe also suggest using our\n[`moonrepo/run-report-action`](https://github.com/marketplace/actions/moon-ci-run-reports) GitHub\naction. This action will report the results of a [`moon ci`](/docs/commands/ci) run to a pull request\nas a comment and workflow summary.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      # ...      - run: 'yarn moon ci'      - uses: 'moonrepo/run-report-action@v1'        if: success() || failure()        with:          access-token: ${{ secrets.GITHUB_TOKEN }}\n```\n\nThe report looks something like the following:\n\n## /docs/guides/pkl-config\n\nSource: https://moonrepo.dev/docs/guides/pkl-config\n\n# Pkl configuration\n\nv1.32.0\n\nWhile YAML is our official configuration format, we want to support dynamic formats, and as such,\nhave added support for Pkl. What is Pkl? If you haven't heard of Pkl yet,\n[Pkl is a programmable configuration format by Apple](https://pkl-lang.org/). We like Pkl, as it\nmeets the following requirements:\n\n- Is easy to read and write.\n\n- Is dynamic and programmable (loops, variables, etc).\n\n- Has type-safety / built-in schema support.\n\n- Has Rust serde integration.\n\nThe primary requirement that we are hoping to achieve is supporting a configuration format that is\nprogrammable. We want something that has native support for variables, loops, conditions, and\nmore, so that you could curate and compose your configuration very easily. Hacking this\nfunctionality into YAML is a terrible user experience in our opinion!\n\n## Installing Pkl\n\nPkl utilizes a client-server architecture, which means that the `pkl` binary must exist in the\nenvironment for parsing and evaluating `.pkl` files. Jump over to the\n[official documentation for instructions on how to install Pkl](https://pkl-lang.org/main/current/pkl-cli/index.html#installation).\n\nIf you are using [proto](/proto), you can install Pkl with the following commands.\n\n```\nproto plugin add pkl https://raw.githubusercontent.com/milesj/proto-plugins/refs/heads/master/pkl.tomlproto install pkl --pin\n```\n\n## Using Pkl\n\nTo start using Pkl in moon, simply:\n\n- Install [Pkl](#installing-pkl) and the [VS Code extension](https://pkl-lang.org/vscode/current/index.html)\n\n- Create configs with the `.pkl` extension instead of `.yml`\n\ninfo\n\nWe highly suggest reading the Pkl\n[language reference](https://pkl-lang.org/main/current/language-reference/index.html), the\n[standard library](https://pkl-lang.org/main/current/standard-library.html), or looking at our\n[example configurations](#example-configs) when using Pkl.\n\n### Caveats and restrictions\n\nSince this is an entirely new configuration format that is quite dynamic compared to YAML, there are\nsome key differences to be aware of!\n\n- Only files are supported. Cannot use or extend from URLs.\n\n- Each `.pkl` file is evaluated in isolation (loops are processed, variables assigned, etc). This means that task inheritance and file merging cannot extend or infer this native functionality.\n\n- `default` is a [special feature](https://pkl-lang.org/main/current/language-reference/index.html#default-element) in Pkl and cannot be used as a setting name. This only applies to [`template.pkl`](/docs/config/template#default), but can be worked around by using `defaultValue` instead.\n\ntemplate.pkl\n\n```\nvariables {  [\"age\"] {    type = \"number\"    prompt = \"Age?\"    defaultValue = 0}\n```\n\n- `local` is also a reserved word in Pkl. It can be worked around by escaping it with backticks, or you can simply use the [`preset` setting](/docs/config/project#preset) instead.\n\n```\ntasks {  [\"example\"] {    `local` = true    # Or    preset = \"server\"  }}\n```\n\n## Example configs\n\n### `.moon/workspace.pkl`\n\n```\nprojects {  globs = List(\"apps/*\", \"packages/*\")  sources {    [\"root\"] = \".\"  }}vcs {  defaultBranch = \"master\"}\n```\n\n### `.moon/toolchain.pkl`\n\n```\nnode {  version = \"20.15.0\"  packageManager = \"yarn\"  yarn {    version = \"4.3.1\"  }  addEnginesConstraint = false  inferTasksFromScripts = false}\n```\n\n### `moon.pkl`\n\n```\ntype = \"application\"language = \"typescript\"dependsOn = List(\"client\", \"ui\")tasks {  [\"build\"] {    command = \"docusaurus build\"    deps = List(\"^:build\")    outputs = List(\"build\")    options {      interactive = true      retryCount = 3    }  }  [\"typecheck\"] {    command = \"tsc --build\"    inputs = new Listing {      \"@globs(sources)\"      \"@globs(tests)\"      \"tsconfig.json\"      \"/tsconfig.options.json\"    }  }}\n```\n\n## Example functionality\n\n### Loops and conditionals\n\n```\ntasks {  for (_os in List(\"linux\", \"macos\", \"windows\")) {    [\"build-\\(_os)\"] {      command = \"cargo\"      args = List(        \"--target\",        if (_os == \"linux\") \"x86_64-unknown-linux-gnu\"          else if (_os == \"macos\") \"x86_64-apple-darwin\"          else \"i686-pc-windows-msvc\",        \"--verbose\"      )      options {        os = _os      }    }  }}\n```\n\n### Local variables\n\n```\nlocal _sharedInputs = List(\"src/**/*\")tasks {  [\"test\"] {    // ...    inputs = List(\"tests/**/*\") + _sharedInputs  }  [\"lint\"] {    // ...    inputs = List(\"**/*.graphql\") + _sharedInputs  }}\n```\n\n## /docs/guides/profile\n\nSource: https://moonrepo.dev/docs/guides/profile\n\n# Task profiling\n\nTroubleshooting slow or unperformant tasks? Profile and diagnose them with ease!\n\ncaution\n\nProfiling is only supported by `node` based tasks, and is not supported by tasks that are created\nthrough `package.json` inference, or for packages that ship non-JavaScript code (like Rust or Go).\n\n## CPU snapshots\n\nCPU profiling helps you get a better understanding of which parts of your code require the most CPU\ntime, and how your code is executed and optimized by Node.js. The profiler will measure code\nexecution and activities performed by the engine itself, such as compilation, calls of system\nlibraries, optimization, and garbage collection.\n\n### Record a profile\n\nTo record a CPU profile, pass `--profile cpu` to the [`moon run`](/docs/commands/run) command. When\nsuccessful, the profile will be written to\n`.moon/cache/states/\n//snapshot.cpuprofile`.\n\n```\n$ moon run --profile cpu app:lint\n```\n\n### Analyze in Chrome\n\nCPU profiles can be reviewed and analyzed with\n[Chrome developer tools](https://developer.chrome.com/docs/devtools/) using the following steps.\n\n- Open Chrome and navigate to `chrome://inspect`.\n\n- Under \"Devices\", navigate to \"Open dedicated DevTools for Node\".\n\n- The following window will popup. Ensure the \"Profiler\" tab is selected.\n\n- Click \"Load\" and select the `snapshot.cpuprofile` that was [previously recorded](#record-a-profile). If successful, the snapshot will appear in the left column.\n\nOn macOS, press `command` + `shift` + `.` to display hidden files and folders, to locate the\n`.moon` folder.\n\n- Select the snapshot in the left column. From here, the snapshot can be analyzed and represented with [Bottom up](#bottom-up), [Top down](#top-down), or [Flame chart](#flame-chart) views.\n\n## Heap snapshots\n\nHeap profiling lets you detect memory leaks, dynamic memory problems, and locate the fragments of\ncode that caused them.\n\n### Record a profile\n\nTo record a heap profile, pass `--profile heap` to the [`moon run`](/docs/commands/run) command. When\nsuccessful, the profile will be written to\n`.moon/cache/states/\n//snapshot.heapprofile`.\n\n```\n$ moon run --profile heap app:lint\n```\n\n### Analyze in Chrome\n\nHeap profiles can be reviewed and analyzed with\n[Chrome developer tools](https://developer.chrome.com/docs/devtools/) using the following steps.\n\n- Open Chrome and navigate to `chrome://inspect`.\n\n- Under \"Devices\", navigate to \"Open dedicated DevTools for Node\".\n\n- The following window will popup. Ensure the \"Memory\" tab is selected.\n\n- Click \"Load\" and select the `snapshot.heapprofile` that was [previously recorded](#record-a-profile-1). If successful, the snapshot will appear in the left column.\n\nOn macOS, press `command` + `shift` + `.` to display hidden files and folders, to locate the\n`.moon` folder.\n\n- Select the snapshot in the left column. From here, the snapshot can be analyzed and represented with [Bottom up](#bottom-up), [Top down](#top-down), or [Flame chart](#flame-chart) views.\n\n## Views\n\nChrome DevTools provide 3 views for analyzing activities within a snapshot. Each view gives you a\ndifferent perspective on these activities.\n\n### Bottom up\n\nThe Bottom up view is helpful if you encounter a heavy function and want to find out where it was\ncalled from.\n\n- The \"Self Time\" column represents the aggregated time spent directly in that activity, across all of its occurrences.\n\n- The \"Total Time\" column represents aggregated time spent in that activity or any of its children.\n\n- The \"Function\" column is the function that was executed, including source location, and any children.\n\n### Top down\n\nThe Top down view works in a similar fashion to [Bottom up](#bottom-up), but displays functions\nstarting from the top-level entry points. These are also known as root activities.\n\n### Flame chart\n\nDevTools represents main thread activity with a flame chart. The x-axis represents the recording\nover time. The y-axis represents the call stack. The events on top cause the events below it.\n\n## /docs/guides/remote-cache\n\nSource: https://moonrepo.dev/docs/guides/remote-cache\n\n# Remote caching\n\nIs your CI pipeline running slower than usual? Are you tired of running the same build over and over\nalthough nothing has changed? Do you wish to reuse the same local cache across other machines and\nenvironments? These are just a few scenarios that remote caching aims to solve.\n\nRemote caching is a system that shares artifacts to improve performance, reduce unnecessary\ncomputation time, and alleviate resources. It achieves this by uploading hashed artifacts to a cloud\nstorage provider, like AWS S3 or Google Cloud, and downloading them on demand when a build matches a\nderived hash.\n\nTo make use of remote caching, we provide 2 solutions.\n\n## Self-hosted v1.30.0\n\nThis solution allows you to host any remote caching service that is compatible with the\n[Bazel Remote Execution v2 API](https://github.com/bazelbuild/remote-apis/tree/main/build/bazel/remote/execution/v2),\nsuch as [`bazel-remote`](https://github.com/buchgr/bazel-remote). When using this solution, the\nfollowing RE API features must be enabled:\n\n- Action result caching\n\n- Content addressable storage caching\n\n- SHA256 digest hashing\n\n- gRPC requests\n\nwarning\n\nThis feature and its implementation is currently unstable, and its documentation is incomplete.\nPlease report any issues on GitHub or through Discord!\n\n### Host your service\n\nWhen you have chosen (or built) a compatible service, host it and make it available through gRPC (we\ndo not support HTTP at this time). For example, if you plan to use `bazel-remote`, you can do\nsomething like the following:\n\n```\nbazel-remote --dir /path/to/moon-cache --max_size 10 --storage_mode uncompressed --grpc_address 0.0.0.0:9092\n```\n\nIf you've configured the [`remote.cache.compression`](/docs/config/workspace#compression) setting to\n\"zstd\", you'll need to run the binary with that storage mode as well.\n\n```\nbazel-remote --dir /path/to/moon-cache --max_size 10 --storage_mode zstd --grpc_address 0.0.0.0:9092\n```\n\ninfo\n\nView the official [`bazel-remote`](https://github.com/buchgr/bazel-remote#usage) documentation for\nall the available options, like storing artifacts in S3, configuring authentication (TLS/mTLS),\nproxies, and more.\n\n### Configure remote caching\n\nOnce your service is running, you can enable remote caching by configuring the\n[`remote`](/docs/config/workspace#remote) settings in [`.moon/workspace.yml`](/docs/config/workspace). At\nminimum, the only setting that is required is `host`.\n\n.moon/workspace.yml\n\n```\nremote:  host: 'grpc://your-host.com:9092'\n```\n\n#### TLS and mTLS\n\nWe have rudimentary support for TLS and mTLS, but it's very unstable, and has not been thoroughly\ntested. There's also [many](https://github.com/hyperium/tonic/issues/1652)\n[many](https://github.com/hyperium/tonic/issues/1989)\n[issues](https://github.com/hyperium/tonic/issues/1033) around authentication in Tonic.\n\n.moon/workspace.yml\n\n```\n# TLSremote:  host: 'grpcs://your-host.com:9092'  tls:    cert: 'certs/ca.pem'    domain: 'your-host.com'# mTLSremote:  host: 'grpcs://your-host.com:9092'  mtls:    caCert: 'certs/ca.pem'    clientCert: 'certs/client.pem'    clientKey: 'certs/client.key'    domain: 'your-host.com'\n```\n\n## Cloud-hosted: Depotv1.32.0\n\nIf you'd prefer not to host your own solution, you could use\n[Depot Cache](https://depot.dev/products/cache), a cloud-based caching solution. To make use of\nDepot, follow these steps:\n\n- Create an account on [depot.dev](https://depot.dev)\n\n- Create an organization\n\n- Go to organization settings -> API tokens\n\n- Create a new API token\n\n- Add the token as a `DEPOT_TOKEN` environment variable to your moon pipelines\n\nOnce these steps have been completed, you can enable remote caching in moon with the following\nconfiguration. If your Depot account has more than 1 organization, you'll need to set the\n`X-Depot-Org` header.\n\n.moon/workspace.yml\n\n```\nremote:  host: 'grpcs://cache.depot.dev'  auth:    token: 'DEPOT_TOKEN'    headers:      'X-Depot-Org': ''\n```\n\n## FAQ\n\n#### What is an artifact?\n\nIn the context of moon and remote caching, an artifact is the\n[outputs of a task](/docs/config/project#outputs), as well as the stdout and stderr of the task that\ngenerated the outputs. Artifacts are uniquely identified by the\n[moon generated hash](/docs/concepts/cache#hashing).\n\n#### Do I have to use remote caching?\n\nNo, remote caching is optional. It's intended purpose is to store long lived build artifacts to\nspeed up CI pipelines, and optionally local development. For the most part,\n[`moon ci`](/docs/commands/ci) does a great job of only running what's affected in pull requests, and\nis a great starting point.\n\n#### Does remote caching store source code?\n\nNo, remote caching does not store source code. It stores the\n[outputs of a task](/docs/config/project#outputs), which is typically built and compiled code. To\nverify this, you can inspect the tar archives in `.moon/cache/outputs`.\n\n#### Does moon collect any personally identifiable information?\n\nNo, moon does not collect any PII as part of the remote caching process.\n\n#### Are artifacts encrypted?\n\nWe do not encrypt on moon's side, as encryption is provided by your cloud storage provider.\n\n## /docs/guides/root-project\n\nSource: https://moonrepo.dev/docs/guides/root-project\n\n# Root-level project\n\nComing from other repositories or task runner, you may be familiar with tasks available at the\nrepository root, in which one-off, organization, maintenance, or process oriented tasks can be ran.\nmoon supports this through a concept known as a root-level project.\n\nBegin by adding the root to [`projects`](/docs/config/workspace#projects) with a source value of `.`\n(current directory relative from the workspace).\n\n.moon/workspace.yml\n\n```\n# As a mapprojects:  root: '.'# As a list of globsprojects:  - '.'\n```\n\nWhen using globs, the root project's name will be inferred from the repository folder name. Be\nwary of this as it can change based on what a developer has checked out as.\n\nOnce added, create a [`moon.yml`](/docs/config/project) in the root of the repository. From here you\ncan define tasks that can be ran using this new root-level project name, for example,\n`moon run root:`.\n\nmoon.yml\n\n```\ntasks:  versionCheck:    command: 'yarn version check'    inputs: []    options:      cache: false\n```\n\nAnd that's it, but there are a few caveats to be aware of...\n\n## Caveats\n\n### Greedy inputs\n\nwarning\n\nIn moon v1.24, root-level tasks default to no inputs. In previous versions, inputs defaulted to\n`**/*`. This section is only applicable for older moon versions!\n\nTask [`inputs`](/docs/config/project#inputs) default to `**/*`, which would result in root-level tasks\nscanning all files in the repository. This will be a very expensive operation! We suggest\nrestricting inputs to a very succinct whitelist, or disabling inputs entirely.\n\nmoon.yml\n\n```\ntasks:  oneOff:    # ...    inputs: []\n```\n\n### Inherited tasks\n\nBecause a root project is still a project in the workspace, it will inherit all tasks defined in\n[`.moon/tasks/all.yml`](/docs/config/tasks), which may be unexpected. To mitigate this, you can exclude\nsome or all of these tasks in the root config with\n[`workspace.inheritedTasks`](/docs/config/project#inheritedtasks).\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    include: []\n```\n\n## /docs/guides/rust/handbook\n\nSource: https://moonrepo.dev/docs/guides/rust/handbook\n\n# Rust handbook\n\nUtilizing Rust in a monorepo is a trivial task, thanks to Cargo, and also moon. With this handbook,\nwe'll help guide you through this process.\n\ninfo\n\nmoon is not a build system and does not replace Cargo. Instead, moon runs `cargo` commands, and\nefficiently orchestrates those tasks within the workspace.\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable Rust, define the [`rust`](/docs/config/toolchain#rust) setting in\n[`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Rustrust: {}# Enable Rust and override default settingsrust:  syncToolchainConfig: true\n```\n\nOr by pinning a `rust` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\nrust = \"1.69.0\"\n```\n\nThis will enable the Rust toolchain and provide the following automations around its ecosystem:\n\n- Manifests and lockfiles are parsed for accurate dependency versions for hashing purposes.\n\n- Cargo binaries (in `~/.cargo/bin`) are properly located and executed.\n\n- Automatically sync `rust-toolchain.toml` configuration files.\n\n- For non-workspaces, will inherit `package.name` from `Cargo.toml` as a project alias.\n\n- And more to come!\n\n### Utilizing the toolchain\n\nWhen a language is enabled, moon by default will assume that the language's binary is available\nwithin the current environment (typically on `PATH`). This has the downside of requiring all\ndevelopers and machines to manually install the correct version of the language, and to stay in\nsync.\n\nInstead, you can utilize [moon's toolchain](/docs/concepts/toolchain), which will download and\ninstall the language in the background, and ensure every task is executed using the exact version\nacross all machines.\n\nEnabling the toolchain is as simple as defining the\n[`rust.version`](/docs/config/toolchain#version-2) setting.\n\n.moon/toolchains.yml\n\n```\n# Enable Rust toolchain with an explicit versionrust:  version: '1.69.0'\n```\n\nVersions can also be defined with [`.prototools`](/docs/proto/config).\n\ncaution\n\nmoon requires `rustup` to exist in the environment, and will use this to install the necessary Rust\ntoolchains. This requires Rust to be manually installed on the machine, as moon does not\nauto-install the language, just the toolchains.\n\n## Repository structure\n\nRust/Cargo repositories come in two flavors: a single crate with one `Cargo.toml`, or multiple\ncrates with many `Cargo.toml`s using\n[Cargo workspaces](https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html). The latter is\nhighly preferred as it enables Cargo incremental caching.\n\nRegardless of which flavor your repository uses, in moon, both flavors are a single\n[moon project](/docs/concepts/project). This means that all Rust crates are grouped together into a\nsingle moon project, and the [`moon.yml`](/docs/config/project) file is located at the root relative\nto `Cargo.lock` and the `target` folder.\n\nAn example of this layout is demonstrated below:\n\n- Workspaces\n- Non-workspaces\n\n```\n/ .moon/ crates/    client/|       ...       Cargo.toml    server/|       ...       Cargo.toml    utils/|        ...        Cargo.toml target/ Cargo.lock Cargo.toml moon.yml\n```\n\n```\n/ .moon/ src/    lib.rs tests/    ... target/ Cargo.lock Cargo.toml moon.yml\n```\n\n### Example `moon.yml`\n\nThe following configuration represents a base that covers most Rust projects.\n\n- Workspaces\n- Non-workspaces\n\n/moon.yml\n\n```\nlanguage: 'rust'layer: 'application'env:  CARGO_TERM_COLOR: 'always'fileGroups:  sources:    - 'crates/*/src/**/*'    - 'crates/*/Cargo.toml'    - 'Cargo.toml'  tests:    - 'crates/*/benches/**/*'    - 'crates/*/tests/**/*'tasks:  build:    command: 'cargo build'    inputs:      - '@globs(sources)'  check:    command: 'cargo check --workspace'    inputs:      - '@globs(sources)'  format:    command: 'cargo fmt --all --check'    inputs:      - '@globs(sources)'      - '@globs(tests)'  lint:    command: 'cargo clippy --workspace'    inputs:      - '@globs(sources)'      - '@globs(tests)'  test:    command: 'cargo test --workspace'    inputs:      - '@globs(sources)'      - '@globs(tests)'\n```\n\n/moon.yml\n\n```\nlanguage: 'rust'layer: 'application'env:  CARGO_TERM_COLOR: 'always'fileGroups:  sources:    - 'src/**/*'    - 'Cargo.toml'  tests:    - 'benches/**/*'    - 'tests/**/*'tasks:  build:    command: 'cargo build'    inputs:      - '@globs(sources)'  check:    command: 'cargo check'    inputs:      - '@globs(sources)'  format:    command: 'cargo fmt --check'    inputs:      - '@globs(sources)'      - '@globs(tests)'  lint:    command: 'cargo clippy'    inputs:      - '@globs(sources)'      - '@globs(tests)'  test:    command: 'cargo test'    inputs:      - '@globs(sources)'      - '@globs(tests)'\n```\n\n## Cargo integration\n\nYou can't use Rust without Cargo -- well you could but why would you do that? With moon, we're doing\nour best to integrate with Cargo as much as possible. Here's a few of the benefits we currently\nprovide.\n\n### Global binaries\n\nCargo supports global binaries through the\n[`cargo install`](https://doc.rust-lang.org/cargo/commands/cargo-install.html) command, which\ninstalls a crate to `~/.cargo/bin`, or makes it available through the `cargo ` command. These\nare extremely beneficial for development, but they do require every developer to manually install\nthe crate (and appropriate version) to their machine.\n\nWith moon, this is no longer an issue with the [`rust.bins`](/docs/config/toolchain#bins) setting.\nThis setting requires a list of crates (with optional versions) to install, and moon will install\nthem as part of the task runner install dependencies action. Furthermore, binaries will be installed\nwith [`cargo-binstall`](https://crates.io/crates/cargo-binstall) in an effort to reduce build and\ncompilation times.\n\n.moon/toolchains.yml\n\n```\nrust:  bins:    - 'cargo-make@0.35.0'    - 'cargo-nextest'\n```\n\nAt this point, tasks can be configured to run this binary as a command. The `cargo` prefix is\noptional, as we'll inject it when necessary.\n\n/moon.yml\n\n```\ntasks:  test:    command: 'nextest run --workspace'    toolchain: 'rust'\n```\n\ntip\n\nThe `cargo-binstall` crate may require a `GITHUB_TOKEN` environment variable to make GitHub Releases\nAPI requests, especially in CI. If you're being rate limited, or fail to find a download, try\ncreating a token with necessary permissions.\n\n### Lockfile handling\n\nTo expand our integration even further, we also take `Cargo.lock` into account, and apply the\nfollowing automations when a target is being ran:\n\n- If the lockfile does not exist, we generate one with [`cargo generate-lockfile`](https://doc.rust-lang.org/cargo/commands/cargo-generate-lockfile.html).\n\n- We parse and extract the resolved checksums and versions for more accurate hashing.\n\n## FAQ\n\n### Should we cache the `target` directory as an output?\n\nNo, we don't believe so. Both moon and Cargo support incremental caching, but they're not entirely\ncompatible, and will most likely cause problems when used together.\n\nThe biggest factor is that moon's caching and hydration uses a tarball strategy, where each task\nwould unpack a tarball on cache hit, and archive a tarball on cache miss. The Cargo target directory\nis extremely large (moon's is around 50gb), and coupling this with our tarball strategy is not\nviable. This would cause massive performance degradation.\n\nHowever, at maximum, you could cache the compiled binary itself as an output, instead of the\nentire target directory. Example:\n\nmoon.yml\n\n```\ntasks:  build:    command: 'cargo build --release'    outputs: ['target/release/moon']\n```\n\n### How can we improve CI times?\n\nRust is known for slow build times and CI is no exception. With that being said, there are a few\npatterns to help alleviate this, both on the moon side and outside of it.\n\nTo start, you can cache Rust builds in CI. This is a non-moon solution to the `target` directory\nproblem above.\n\n- If you use GitHub Actions, feel free to use our [moonrepo/setup-rust](https://github.com/moonrepo/setup-rust) action, which has built-in caching.\n\n- A more integrated solution is [sccache](https://crates.io/crates/sccache), which stores build artifacts in a cloud storage provider.\n\n## /docs/guides/sharing-config\n\nSource: https://moonrepo.dev/docs/guides/sharing-config\n\n# Sharing workspace configuration\n\nFor large companies, open source maintainers, and those that love reusability, more often than not\nyou'll want to use the same configuration across all repositories for consistency. This helps reduce\nthe maintenance burden while ensuring a similar developer experience.\n\nTo help streamline this process, moon provides an `extends` setting in both\n[`.moon/workspace.yml`](/docs/config/workspace#extends),\n[`.moon/toolchains.yml`](/docs/config/toolchain#extends), and\n[`.moon/tasks/all.yml`](/docs/config/tasks#extends). This setting requires a HTTPS URL or relative\nfile system path that points to a valid YAML document for the configuration in question.\n\nA great way to share configuration is by using GitHub's \"raw file view\", as demonstrated below using\nour very own [examples repository](https://github.com/moonrepo/examples).\n\n.moon/tasks/all.yml\n\n```\nextends: 'https://raw.githubusercontent.com/moonrepo/examples/master/.moon/tasks/all.yml'\n```\n\n## Versioning\n\nInheriting an upstream configuration can be dangerous, as the settings may change at any point,\nresulting in broken builds. To mitigate this, you can used a \"versioned\" upstream configuration,\nwhich is ideally a fixed point in time. How this is implemented is up to you or your company, but we\nsuggest the following patterns:\n\n### Using versioned filenames\n\nA rudimentary solution is to append a version to the upstream filename. When the file is modified, a\nnew version should be created, while the previous version remains untouched.\n\n```\n-extends: '../shared/project.yml'+extends: '../shared/project-v1.yml'\n```\n\n### Using branches, tags, or commits\n\nWhen using a version control platform, like GitHub above, you can reference the upstream\nconfiguration through a branch, tag, commit, or sha. Since these are a reference point in time, they\nare relatively safe.\n\n```\n-extends: 'https://raw.githubusercontent.com/moonrepo/examples/master/.moon/tasks/all.yml'+extends: 'https://raw.githubusercontent.com/moonrepo/examples/c3f10160bcd16b48b8d4d21b208bb50f6b09bd96/.moon/tasks/all.yml'\n```\n\n## /docs/guides/vcs-hooks\n\nSource: https://moonrepo.dev/docs/guides/vcs-hooks\n\n# VCS hooks\n\nv1.9.0\n\nVCS hooks (most popular with [Git](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks)) are a\nmechanism for running scripts at pre-defined phases in the VCS's lifecycle, most commonly\npre-commit, pre-push, or pre-merge. With moon, we provide a built-in solution for managing hooks,\nand syncing them across developers and machines.\n\n- [Learn more about Git hooks](https://git-scm.com/docs/githooks)\n\n## Defining hooks\n\nHooks can be configured with the [`vcs.hooks`](/docs/config/workspace#hooks) setting in\n[`.moon/workspace.yml`](/docs/config/workspace). This setting requires a map of hook names (in the\nformat required by your VCS), to a list of arbitrary commands to run within the hook script.\nCommands are used as-is and are not formatted or interpolated in any way.\n\nTo demonstrate this, let's configure a `pre-commit` hook that runs a moon `lint` task for affected\nprojects, and also verifies that the commit message abides by a specified format (using\n[pre-commit](https://pre-commit.com/) and the\n[commitlint hook](https://github.com/alessandrojcm/commitlint-pre-commit-hook), for example).\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    pre-commit:      - 'pre-commit run'      - 'moon run :lint --affected'    commit-msg:      - 'pre-commit run --hook-stage commit-msg --commit-msg-filename $ARG1'\n```\n\ninfo\n\nAll commands are executed from the repository root (not moon's workspace root) and must exist on\n`PATH`. If `moon` is installed locally, you can execute it using a repository relative path, like\n`./node_modules/@moonrepo/cli/moon`.\n\n### Accessing argumentsv1.40.3\n\nTo ease interoperability between operating systems and terminal shells, we set passed arguments as\nenvironment variables.\n\nIn your hook commands, you can access these arguments using the `$ARG` format, where `` is the\n1-indexed position of the argument. For example, to access the first argument, you would use\n`$ARG1`, the second argument would be `$ARG2`, and so on. `$ARG0` exists and points to the current\nscript.\n\n## Enabling hooks\n\nHooks are a divisive subject, as some developers love them, and others hate them. Finding a viable\nsolution for everyone can be difficult, so with moon, we opted to support 2 distinct options, but\nonly 1 can be used at a time. Choose the option that works best for your project, team, or company!\n\ncaution\n\nIf you have existing VCS hooks, back them up as moon's implementation will overwrite them! To\nmigrate your existing hooks, [configure them as commands to run](#defining-hooks).\n\n### Automatically for everyone\n\nIf you'd like hooks to be enforced for every contributor of the repository, then simply enable the\n[`vcs.syncHooks`](/docs/config/workspace#synchooks) setting in\n[`.moon/workspace.yml`](/docs/config/workspace). This will automatically generate hook scripts and link\nthem with the local VCS checkout, everytime a [target](/docs/concepts/target) is ran.\n\n.moon/workspace.yml\n\n```\nvcs:  hooks: [...]  syncHooks: true\n```\n\ncaution\n\nAutomatically activating hooks on everyone's computer is considered a sensitive action, because it\nenables the execution of arbitrary code on the computers of the team members. Be careful about the\nhook commands you define in the [`.moon/workspace.yml`](/docs/config/workspace) file.\n\n### Manually by each developer\n\nIf you'd prefer contributors to have a choice in whether or not they want to use hooks, then simply\ndo nothing, and guide them to run the [`moon sync hooks`](/docs/commands/sync/vcs-hooks) command. This\ncommand will generate hook scripts and link them with the local VCS checkout.\n\n```\n$ moon sync hooks\n```\n\n## Disabling hooks\n\nIf you choose to stop using hooks, you'll need to cleanup the previously generated hook scripts, and\nreset the VCS checkout. To start, disable the `vcs.syncHooks` setting.\n\n.moon/workspace.yml\n\n```\nvcs:  syncHooks: false\n```\n\nAnd then run the following command, which will delete files from your local filesystem. Every\ndeveloper that is using hooks will need to run this command.\n\n```\n$ moon sync hooks --clean\n```\n\n## How it works\n\nWhen hooks are [enabled](#enabling-hooks), the following processes will take place.\n\n- The configured [hooks](#defining-hooks) will be generated as individual script files in the `.moon/hooks` directory. Whether or not you commit or ignore these script files is your choice. They are written to the `.moon` directory so that they can be reviewed, audited, and easily tested, but are required.\n\n- We then sync these generated hook scripts with the current VCS. For Git, we create `.git/hooks` files that execute our generated scripts, using repository relative commands. Any existing VCS hooks will be overwritten.\n\ninfo\n\nThe `.moon/hooks` scripts are generated as Bash scripts (use a `.sh` file extension) on Unix, and\nPowerShell scripts (use a `.ps1` file extension) on Windows.\n\n### Git\n\nOn Unix based operating systems (Linux, macOS, etc), the `.moon/hooks` scripts are executed from\n`.git/hooks` Bash files. Because of this, `bash` should be available on the system (which is\ntypically the case).\n\nOn Windows, things get tricky. Since Git has a requirement that `.git/hooks` files must be\nextensionless, and older versions of PowerShell require an extension, we have to use a workaround.\nTo handle this, the `.git/hooks` files are Bash-like scripts (that should work on most machines)\nthat execute `.moon/hooks` using the `powershell.exe` (or `pwsh.exe`) executables. Because of this,\nPowerShell must be available on the system.\n\n## Examples\n\n### Pre-commit\n\nA perfect use case for the `pre-commit` hook is to check linting and formatting of the files being\ncommitted. If either of these tasks fail, the commit will abort until they are fixed. Be sure to use\nthe [`--affected`](/docs/run-task#running-based-on-affected-files-only) option so that we only run on\nchanged projects!\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    pre-commit:      - 'moon run :lint :format --affected --status=staged'\n```\n\nBy default this will run on the entire project (all files). If you want to filter it to only the\nchanged files, enable the [`affectedFiles`](/docs/config/project#affectedfiles) task option.\n\n## /docs/guides/wasm-plugins\n\nSource: https://moonrepo.dev/docs/guides/wasm-plugins\n\n# WASM plugins\n\n[moon](/moon) and [proto](/proto) plugins can be written in\n[WebAssembly (WASM)](https://webassembly.org/), a portable binary format. This means that plugins\ncan be written in any language that compiles to WASM, like Rust, C, C++, Go, TypeScript, and more.\nBecause WASM based plugins are powered by a programming language, they implicitly support complex\nbusiness logic and behavior, have access to a sandboxed file system (via WASI), can execute child\nprocesses, and much more.\n\ndanger\n\nSince our WASM plugin implementations are still experimental, expect breaking changes to occur in\nnon-major releases.\n\n## Powered by Extism\n\nOur WASM plugin system is powered by [Extism](https://extism.org/), a Rust-based cross-language\nframework for building WASM plugins under a unified guest and host API. Under the hood, Extism uses\n[wasmtime](https://wasmtime.dev/) as its WASM runtime.\n\nFor the most part, you do not need to know about Extism's host SDK, as we have implemented the\nbulk of it within moon and proto directly. However, you should be familiar with the guest PDKs, as\nthis is what you'll be using to implement Rust-based plugins. We suggest reading the following\nmaterial:\n\n- [Plugin development kits](https://extism.org/docs/concepts/pdk) (PDKs)\n\n- The [extism-pdk](https://github.com/extism/rust-pdk) Rust crate\n\n- [Host functions](https://extism.org/docs/concepts/host-functions) (how they work)\n\n## Concepts\n\nBefore we begin, let's talk about a few concepts that are critical to WASM and our plugin systems.\n\n### Plugin identifier\n\nWhen implementing plugin functions, you'll need to access information about the current plugin. To\nget the current plugin identifier (the key the plugin was configured with), use the\n[`get_plugin_id`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.get_plugin_id.html) function.\n\n```\nlet id = get_plugin_id();\n```\n\n### Virtual paths\n\nWASM by default does not have access to the host file system, but through [WASI](https://wasi.dev/),\nwe can provide sandboxed access to a pre-defined list of allowed directories. We call these\n[virtual paths](https://docs.rs/warpgate_api/latest/warpgate_api/enum.VirtualPath.html), and all\npaths provided via function input or context use them.\n\nVirtual paths are implemented by mapping a real path (host machine) to a virtual path (guest\nruntime) using file path prefixes. The following prefixes are currently supported:\n\nReal path Virtual path Only for\n\n`~` `/userhome` ~\n\n`~/.proto` `/proto` ~\n\n`~/.moon` `/moon` moon\n\nmoon workspace `/workspace` moon\n\nFor example, from the context of WASM, you may have a virtual path of `/proto/tools/node/1.2.3`,\nwhich simply maps back to `~/.proto/tools/node/1.2.3` on the host machine. However, this should\nalmost always be transparent to you, the developer, and to end users.\n\nHowever, there may be a few cases where you need access to the real path from WASM, for example,\nlogging or executing commands. For this, the real path can be accessed with the\n[`real_path`](https://docs.rs/warpgate_api/latest/warpgate_api/enum.VirtualPath.html#method.real_path)\nfunction on the `VirtualPath` enum (this is a Rust only feature).\n\n```\nvirtual_path.real_path();\n```\n\n#### File system caveats\n\nWhen working with the file system from the context of WASM, there are a few caveats to be aware of.\n\n- All `fs` calls must use the virtual path. Real paths will error.\n\n- Paths not white listed (using prefixes above) will error.\n\n- Changing file permissions is not supported (on Unix and Windows). This is because WASI does not support this.\n\n- This also means operations like unpacking archives is not possible.\n\n### Host environment\n\nSince WASM executes in its own runtime, it does not have access to the current host operating\nsystem, architecture, so on and so forth. To bridge this gap, we provide the\n[`get_host_environment`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.get_host_environment.html)\nfunction.\n[Learn more about this type](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/struct.HostEnvironment.html).\n\n```\nlet env = get_host_environment()?;\n```\n\nThe host operating system and architecture can be accessed with `os` and `arch` fields respectively.\nBoth fields are an enum in Rust, or a string in other languages.\n\n```\nif env.os == HostOS::Windows {    // Windows only}if env.arch == HostArch::Arm64 {    // aarch64 only}\n```\n\nFurthermore, the user's home directory (`~`) can be accessed with the `home_dir` field, which is a\n[virtual path](#virtual-paths).\n\n```\nif env.home_dir.join(some_path).exists() {    // Do something}\n```\n\n### Host functions & macros\n\nWASM is pretty powerful but it can't do everything since it's sandboxed. To work around this, we\nprovide a mechanism known as host functions, which are functions that are implemented on the host\n(in Rust), and can be executed from WASM. The following host functions are currently available:\n\n- [`exec_command`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.exec_command.html) - Execute a system command on the host machine, with a provided list of arguments or environment variables.\n\n- [`from_virtual_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.real_path.html) - Converts a virtual path into a real path.\n\n- [`get_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_env.html) - Get an environment variable value from the host environment.\n\n- [`host_log`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_log.html) - Log an stdout, stderr, or tracing message to the host's terminal.\n\n- [`send_request`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.send_request.html) - Requests a URL on the host machine using a Rust-based HTTP client (not WASM).\n\n- [`set_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_env.html) - Set an environment variable to the host environment.\n\n- [`to_virtual_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.virtual_path.html) - Converts a real path into a virtual path.\n\nTo use host functions, you'll need to make them available by registering them at the top of your\nRust file (only add the functions you want to use) using the\n[extism-pdk](https://crates.io/crates/extism-pdk) crate.\n\n```\nuse extism_pdk::*;#[host_fn]extern \"ExtismHost\" {    fn exec_command(input: Json) -> Json;    fn from_virtual_path(path: String) -> String;    fn get_env_var(key: String) -> String;    fn host_log(input: Json);    fn send_request(input: Json) -> Json;    fn set_env_var(key: String, value: String);    fn to_virtual_path(path: String) -> Json;}\n```\n\ninfo\n\nTo simplify development, we provide built-in functions and macros for the host functions above.\nContinue reading for more information on these macros.\n\n#### Converting paths\n\nWhen working with virtual paths, you may need to convert them to real paths, and vice versa. The\n[`into_virtual_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.into_virtual_path.html)\nand [`into_real_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.into_real_path.html)\nfunctions can be used for such situations, which use the `to_virtual_path` and `from_virtual_path`\nhost functions respectively.\n\n```\n// Supports strings or pathslet virt = into_virtual_path(\"/some/real/path\")?;let real = into_real_path(PathBuf::from(\"/some/virtual/path\"))?;\n```\n\n#### Environment variables\n\nThe [`get_host_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.get_host_env_var.html)\nand [`set_host_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.set_host_env_var.html)\nfunctions can be used to read and write environment variables on the host, using the `set_env_var`\nand `get_env_var` host functions respectively.\n\n```\n// Set a valueset_host_env_var(\"ENV_VAR\", \"value\")?;// Get a value (returns an `Option`)let value = get_host_env_var(\"ENV_VAR\")?;\n```\n\nAdditionally, the\n[`add_host_paths`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.add_host_paths.html) function\ncan be used to append paths to the `PATH` environment variable.\n\n```\n// Append to pathadd_host_paths([\"/userhome/some/virtual/path\"])?;\n```\n\n#### Executing commands\n\nThe [`exec_command!`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.exec_command.html)\nmacro can be used to execute a command on the host, using the `exec_command` host function. If the\ncommand does not exist on `PATH`, an error is thrown. This macros supports three modes: pipe,\ninherit, and raw (returns `Result`).\n\n```\nlet result = exec_command!(raw, \"which\", [\"node\"]);\n```\n\nIf you want a simpler API, the\n[`exec`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.exec.html),\n[`exec_captured`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.exec_captured.html) (pipe),\nand [`exec_streamed`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.exec_streamed.html)\n(inherit) functions can be used.\n\n```\n// Pipe stdout/stderrlet output = exec_captured(\"which\", [\"node\"])?;// Inherit stdout/stderrexec_streamed(\"npm\", [\"install\"])?;// Full controlexec(ExecCommandInput {    command: \"npm\".into(),    args: vec![\"install\".into()],    ..ExecCommandInput::default()})?;\n```\n\n#### Sending requests\n\nThe [`send_request`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.send_request.html) macro\ncan be used to request a URL on the host, instead of from WASM, allowing it to use the same HTTP\nclient as the host CLI. This macro returns a response object, with the raw body in bytes, and the\nstatus code.\n\n```\nlet response = send_request!(\"https://some.com/url/to/fetch\");if response.status == 200 {  let json = response.json::()?;  let text = response.text()?;} else {  // Error!}\n```\n\nTo simplify the handling of requests -> responses, we also provide the\n[`fetch_bytes`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.fetch_bytes.html),\n[`fetch_json`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.fetch_json.html), and\n[`fetch_text`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.fetch_text.html) functions.\n\n```\nlet json: T = fetch_json(\"https://some.com/url/to/fetch.json\")?;\n```\n\nOnly GET requests are supported.\n\n#### Logging\n\nThe [`host_log!`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_log.html) macro can be\nused to write stdout or stderr messages to the host's terminal, using the `host_log` host function.\nIt supports the same argument patterns as `format!`.\n\nIf you want full control, like providing data/fields, use the input mode and provide\n[`HostLogInput`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/struct.HostLogInput.html).\n\n```\nhost_log!(stdout, \"Some message\");host_log!(stderr, \"Some message with {}\", \"args\");// With datahost_log!(input, HostLogInput {    message: \"Some message with data\".into(),    data: HashMap::from_iter([        (\"data\".into(), serde_json::to_value(data)?),    ]),    target: HostLogTarget::Stderr,});\n```\n\nFurthermore, the [extism-pdk](https://crates.io/crates/extism-pdk) crate provides a handful of\nmacros for writing level-based messages that'll appear in the host's terminal when `--log` is\nenabled in the CLI. These also support arguments.\n\n```\ndebug!(\"This is a debug message\");info!(\"Something informational happened\");warn!(\"Proceed with caution\");error!(\"Oh no, something went wrong\");\n```\n\n## Configuring plugin locations\n\nTo use a WASM plugin, it'll need to be configured in both moon and proto. Luckily both tools use a\nsimilar approach for configuring plugins called the\n[plugin locator](https://docs.rs/warpgate/latest/warpgate/enum.PluginLocator.html). A locator string\nis composed of 2 parts separated by `://`, the former is the protocol, and the latter is the\nlocation.\n\n```\n\"\n://\"\n```\n\nThe following locator patterns are supported:\n\n### `file`\n\nThe `file://` protocol represents a file path, either absolute or relative (from the current\nconfiguration file).\n\n```\n# Relative\"file://./path/to/example.wasm\"# Absolute\"file:///root/path/to/example.wasm\"\n```\n\n### `github`\n\nThe `github://` protocol can be used to target and download an asset from a specific GitHub release.\nThe location must be an organization + repository slug (owner/repo), and the release must have a\n`.wasm` asset available to download.\n\n```\n\"github://moonrepo/example-repo\"\n```\n\nIf you are targeting releases in a monorepo, you can append the project name after the repository.\nThe project name will be used as a prefix for tags, and will match `@v?` or\n`-v?` based tags.\n\n```\n\"github://moonrepo/example-repo/project-name\"\n```\n\nBy default, the latest release will be used and cached for 7 days. If you'd prefer to target a\nspecific release (preferred), append the release tag to the end of the location.\n\n```\n\"github://moonrepo/example-repo@v1.2.3\"\n```\n\nThis strategy is powered by the [GitHub API](https://api.github.com/) and is subject to rate\nlimiting. If running in a CI environment, we suggesting setting a `GITHUB_TOKEN` environment\nvariable to authorize API requests with. If using GitHub Actions, it's as simple as:\n\n```\n# In some job or step...env:  GITHUB_TOKEN: '${{ secrets.GITHUB_TOKEN }}'\n```\n\n### `https`\n\nThe `https://` protocol is your standard URL, and must point to an absolute file path. Files will be\ndownloaded to `~/.moon/plugins` or `~/.proto/plugins`. Non-secure URLs are not supported!\n\n```\n\"https://domain.com/path/to/plugins/example.wasm\"\n```\n\n## Creating a plugin\n\ninfo\n\nAlthough plugins can be written in any language that compiles to WASM, we've only tested Rust. The\nrest of this article assume you're using Rust and Cargo! Refer to [Extism](https://extism.org/)'s\ndocumentation for other examples.\n\nTo start, create a new crate with Cargo:\n\n```\ncargo new plugin --libcd plugin\n```\n\nSet the lib type to `cdylib`, and provide other required settings.\n\nCargo.toml\n\n```\n[package]name = \"example_plugin\"version = \"0.0.1\"edition = \"2024\"publish = false[lib]crate-type = ['cdylib'][profile.release]codegen-units = 1debug = falselto = trueopt-level = \"s\"panic = \"abort\"\n```\n\nOur Rust plugins are powered by [Extism](https://extism.org/), so lets add their PDK and ours as a\ndependency.\n\n```\ncargo add extism-pdk# For protocargo add proto_pdk# For mooncargo add moon_pdk\n```\n\nIn all Rust files, we can import all the PDKs with the following:\n\nsrc/lib.rs\n\n```\nuse extism_pdk::*;\n```\n\nWe can then build the WASM binary. The file will be available at\n`target/wasm32-wasip1/debug/.wasm`.\n\n```\ncargo build --target wasm32-wasip1\n```\n\n## Building and publishing\n\nAt this point, you should have a fully working WASM plugin, but to make it available to the\ncommunity, you'll still need to build and make the `.wasm` file available. The easiest solution is\nto publish a GitHub release and include the `.wasm` file as an asset.\n\n### Building, optimizing, and stripping\n\nWASM files are pretty fat, even when compiling in release mode. To reduce the size of these files,\nwe can use `wasm-opt` and `wasm-strip`, both of which are provided by the\n[WebAssembly](https://github.com/WebAssembly) group. The following script is what we use to build\nour own plugins.\n\ninfo\n\nThis functionality is natively supported in our\n[moonrepo/build-wasm-plugin](https://github.com/moonrepo/build-wasm-plugin) GitHub Action!\n\nbuild-wasm\n\n```\n#!/usr/bin/env bashtarget=\"${CARGO_TARGET_DIR:-target}\"input=\"$target/wasm32-wasip1/release/$1.wasm\"output=\"$target/wasm32-wasip1/$1.wasm\"echo \"Building\"cargo build --target wasm32-wasip1 --releaseecho \"Optimizing\"# https://github.com/WebAssembly/binaryen~/binaryen/bin/wasm-opt -Os \"$input\" --output \"$output\"echo \"Stripping\"# https://github.com/WebAssembly/wabt~/wabt/bin/wasm-strip \"$output\"\n```\n\n### Manually create releases\n\nWhen your plugin is ready to be published, you can create a release on GitHub using the following\nsteps.\n\n- Tag the release and push to GitHub.\n\n```\ngit tag v0.0.1git push --tags\n```\n\n- Build a release version of the plugin using the `build-wasm` script above. The file will be available at `target/wasm32-wasip1/.wasm`.\n\n```\nbuild-wasm\n```\n\n- In GitHub, navigate to the tags page, find the new tag, create a new release, and attach the built file as an asset.\n\n### Automate releases\n\nIf you're using GitHub Actions, you can automate the release process with our official\n[moonrepo/build-wasm-plugin](https://github.com/moonrepo/build-wasm-plugin) action.\n\n- Create a new workflow file at `.github/workflows/release.yml`. Refer to the link above for a working example.\n\n- Tag the release and push to GitHub.\n\n```\n# In a polyrepogit tag v0.0.1# In a monorepogit tag example_plugin-v0.0.1# Push the tagsgit push --tags\n```\n\n- The action will automatically build the plugin, create a release, and attach the built file as an asset.\n\n## /docs/guides/webhooks\n\nSource: https://moonrepo.dev/docs/guides/webhooks\n\n# Webhooks (experimental)\n\nLooking to gather metrics for your pipelines? Gain insight into run durations and failures? Maybe\nyou want to send Slack or Discord notifications? With our webhooks, all of these are possible!\n\nWhen the [`notifier.webhookUrl`](/docs/config/workspace#webhookurl) setting is configured with an HTTPS\nURL, and moon is running in a CI environment, moon will POST a payload to this endpoint for every\nevent in our pipeline.\n\n## Payload structure\n\nEvery webhook event is posted with the following request body, known as a payload.\n\n- `type` (`string`) - The type of [event](#events).\n\n- `environment` (`object | null`) - Information about the current CI/CD pipeline environment.\n\n- `event` (`object`) - The event specific payload. View each event for an example of their structure.\n\n- `createdAt` (`string`) - When the event was created, as a UTC timestamp in ISO 8601 (RFC 3339) format.\n\n- `uuid` (`string`) - A unique identifier for all webhooks in the current run batch.\n\n- `trace` (`string`) - A unique identifier for all webhooks in the overall run batch. Can be defined via `MOON_TRACE_ID` environment variable.\n\n```\n{  \"type\": \"...\",  \"environment\": \"...\",  \"event\": {    // ...  },  \"createdAt\": \"...\",  \"uuid\": \"...\",  \"trace\": \"...\"}\n```\n\nThe `uuid` field can be used to differentiate concurrently running pipelines!\n\n### Pipeline environment\n\nWhen webhooks are sent from a CI/CD pipeline, we attempt to include information about the\nenvironment under the `environment` field. If information could not be detected, this field is null,\notherwise it contains these fields.\n\n- `baseBranch` (`string | null`) - When a merge/pull request, the target (base) branch, otherwise null.\n\n- `branch` (`string`) - When a merge/pull request, the source (head) branch, otherwise the triggering branch.\n\n- `id` (`string`) - ID of the current pipeline instance.\n\n- `provider` (`string`) - Name of your CI/CD provider. GitHub Actions, GitLab, CircleCI, etc.\n\n- `requestId` (`string | null`) - The ID of the merge/pull request.\n\n- `requestUrl` (`string | null`) - Link to the merge/pull request.\n\n- `revision` (`string`) - The HEAD commit, revision, tag, ref, etc, that triggered the pipeline.\n\n- `url` (`string | null`) - Link to the current pipeline, when available.\n\n## Events\n\n### Pipeline\n\nRuns actions within moon using a robust dependency graph. Is triggered when using\n[`moon run`](/docs/commands/run).\n\n### `pipeline.started`\n\nTriggered when the pipeline has been created but before actions have started to run.\n\nThis event includes the number of actions registered within the pipeline, but does not provide\ndetailed information about the actions. Use the [`action.*`](#actionstarted) events for this.\n\n```\n{  \"type\": \"pipeline.started\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"actionsCount\": 15  },  \"uuid\": \"...\"}\n```\n\n### `pipeline.finished`\n\nTriggered when the pipeline has finished running all actions, with aggregated counts based on final\nstatus.\n\nThis event is not triggered if the pipeline crashes (this does not include actions that have\nfailed, as those are legitimate runs). Use the [`pipeline.aborted`](#pipelineaborted) event if you\nwant to also catch crashes.\n\n```\n{  \"type\": \"pipeline.finished\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"cachedCount\": 10,    \"baselineDuration\": {      \"secs\": 60,      \"nanos\": 3591693    },    \"duration\": {      \"secs\": 120,      \"nanos\": 3591693    },    \"estimatedSavings\": {      \"secs\": 60,      \"nanos\": 0    },    \"failedCount\": 1,    \"passedCount\": 4  },  \"uuid\": \"...\"}\n```\n\n### `pipeline.aborted`\n\nTriggered when the pipeline has crashed for unknown reasons, or had to abort as a result of a\ncritical action failing.\n\n```\n{  \"type\": \"pipeline.aborted\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": \"...\"  },  \"uuid\": \"...\"}\n```\n\n### Actions\n\nActions are \"jobs\" within the pipeline that are executed topologically.\n\n### `action.started`\n\nTriggered when an action within the pipeline has started to run.\n\n```\n{  \"type\": \"action.started\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"action\": {      \"attempts\": null,      \"createdAt\": \"...\",      \"duration\": {        \"secs\": 0,        \"nanos\": 3591693      },      \"error\": null,      \"label\": \"InstallWorkspaceDeps(node:18.0.0)\",      \"nodeIndex\": 5,      \"status\": \"passed\"    },    \"node\": {      \"action\": \"InstallDeps\",      \"params\": [        {          \"toolchain\": \"Node\",          \"version\": \"18.0.0\"        }      ]    }  },  \"uuid\": \"...\"}\n```\n\n### `action.finished`\n\nTriggered when an action within the pipeline has finished running, either with a success or failure.\nIf the action failed, the `error` field will be set with the error message.\n\n```\n{  \"type\": \"action.finished\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"action\": {      \"attempts\": null,      \"createdAt\": \"...\",      \"duration\": {        \"secs\": 0,        \"nanos\": 3591693      },      \"error\": null,      \"label\": \"InstallWorkspaceDeps(node:18.0.0)\",      \"nodeIndex\": 5,      \"status\": \"passed\"    },    \"error\": null,    \"node\": {      \"action\": \"InstallDeps\",      \"params\": {        \"toolchain\": \"Node\",        \"version\": \"18.0.0\"      }    }  },  \"uuid\": \"...\"}\n```\n\n### `dependencies.installing`\n\nTriggered when dependencies for a workspace or project have started to install. When targeting a\nproject, the `project` field will be set, otherwise `null` for the entire workspace.\n\n```\n{  \"type\": \"dependencies.installing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"project\": {      \"id\": \"server\"      // ...    },    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    },    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `dependencies.installed`\n\nTriggered when dependencies for a workspace or project have finished installing. When targeting a\nproject, the `project` field will be set, otherwise `null` for the entire workspace. If the install\nfailed, the `error` field will be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nInstalled deps can be scoped with the `InstallDeps(...)` labels.\n\n```\n{  \"type\": \"dependencies.installed\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"project\": null,    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    },    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `environment.initializing`v1.37.0\n\nTriggered when an environment is being setup for a toolchain. When targeting a project, the\n`project` field will be set, otherwise `null` for the entire workspace.\n\n```\n{  \"type\": \"environment.initializing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"project\": {      \"id\": \"server\"      // ...    },    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `environment.initialized`v1.37.0\n\nTriggered when an environment has been setup for a toolchain. When targeting a project, the\n`project` field will be set, otherwise `null` for the entire workspace. If setup failed, the `error`\nfield will be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nInstalled deps can be scoped with the `SetupEnvironment(...)` labels.\n\n```\n{  \"type\": \"environment.initialized\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"project\": null,    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `project.syncing`\n\nTriggered when an affected project has started syncing its workspace state. This occurs\nautomatically before a project's task is ran.\n\n```\n{  \"type\": \"project.syncing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"project\": {      \"id\": \"client\"      // ...    },    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `project.synced`\n\nTriggered when an affected project has finished syncing. If the sync failed, the `error` field will\nbe set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nSynced projects can be scoped with the `SyncProject(...)` labels.\n\n```\n{  \"type\": \"project.synced\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"project\": {      \"id\": \"client\"      // ...    },    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `tool.installing`\n\nTriggered when a tool within the toolchain has started downloading and installing.\n\nThis event is always triggered, regardless of whether the tool has already been installed or not.\nFor an accurate state, use the [`action.finished`](#actionfinished) event. If the `status` is\n\"skipped\", then the tool was already installed.\n\n```\n{  \"type\": \"tool.installing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `tool.installed`\n\nTriggered when a tool within the toolchain has finished installing. If the install failed, the\n`error` field will be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nTools can be scoped with the `SetupToolchain(...)` labels.\n\n```\n{  \"type\": \"tool.installed\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `toolchain.installing`\n\nTriggered when a toolchain plugin has started downloading and installing.\n\nThis event is always triggered, regardless of whether the tool has already been installed or not.\nFor an accurate state, use the [`action.finished`](#actionfinished) event. If the `status` is\n\"skipped\", then the tool was already installed.\n\n```\n{  \"type\": \"toolchain.installing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"spec\": {      \"id\": \"node\",      \"req\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `toolchain.installed`\n\nTriggered when a toolchain plugin has finished installing. If the install failed, the `error` field\nwill be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nTools can be scoped with the `SetupToolchain(...)` labels.\n\n```\n{  \"type\": \"toolchain.installed\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"spec\": {      \"id\": \"node\",      \"req\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `task.running`\n\nTriggered when a [task](/docs/concepts/task) has started to run (via [`moon run`](/docs/commands/run) or\nsimilar command).\n\n```\n{  \"type\": \"task.running\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"target\": \"app:build\"  },  \"uuid\": \"...\"}\n```\n\n### `task.ran`\n\nTriggered when a [task](/docs/concepts/task) has finished running. If the run failed, the `error` field\nwill be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event. Ran\ntasks can be scoped with the `RunTask(...)`, `RunInteractiveTask(...)`, and `RunPersistentTask(...)`\nlabels.\n\n```\n{  \"type\": \"task.ran\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"target\": \"app:build\"  },  \"uuid\": \"...\"}\n```\n\n### `workspace.syncing`\n\nTriggered when the workspace is being synced.\n\n```\n{  \"type\": \"workspace.syncing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"target\": \"app:build\"  },  \"uuid\": \"...\"}\n```\n\n### `workspace.synced`\n\nTriggered when the workspace has finished syncing. If the action failed, the `error` field will be\nset with the error message.\n\n```\n{  \"type\": \"workspace.synced\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null  },  \"uuid\": \"...\"}\n```\n\n## /docs/how-it-works\n\nSource: https://moonrepo.dev/docs/how-it-works\n\n- [Home](/)\n- [How it works](/docs/how-it-works)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# How it works\n\n[ LanguagesAlthough moon is currently focusing on the JavaScript ecosystem, our long-term vision is to be a](/docs/how-it-works/languages)\n\n[ Project graphThe project graph is a representation of all configured](/docs/how-it-works/project-graph)\n\n[ Task graphThe task graph is a representation of all configured](/docs/how-it-works/task-graph)\n\n[ Action graphWhen you run a task on the command line, we generate an action graph to](/docs/how-it-works/action-graph)\n\n[Install moon](/docs/install)\n\n[Languages](/docs/how-it-works/languages)\n\n## /docs/how-it-works/action-graph\n\nSource: https://moonrepo.dev/docs/how-it-works/action-graph\n\n# Action graph\n\nWhen you run a [task](/docs/config/project#tasks-1) on the command line, we generate an action graph to\nensure [dependencies](/docs/config/project#deps) of tasks have ran before running run the primary task.\n\nThe action graph is a representation of all [tasks](/docs/concepts/task), derived from the\n[project graph](/docs/how-it-works/project-graph) and [task graph](/docs/how-it-works/task-graph), and is also represented internally\nas a directed acyclic graph (DAG).\n\n## Actions\n\nUnlike other task runners in the industry that represent each node in the graph as a task to run, we\nrepresent each node in the graph as an action to perform. This allows us to be more flexible and\nefficient with how we run tasks, and allows us to provide more functionality and automation than\nother runners.\n\nThe following actions compose our action graph:\n\n### Sync workspace\n\nThis is a common action that always runs and give's moon a chance to perform operations and health\nchecks across the entire workspace.\n\ninfo\n\nThis action can be skipped by disabling the\n[`pipeline.syncWorkspace`](/docs/config/workspace#syncworkspace) setting.\n\n### Setup toolchain\n\nThe most important action in the graph is the setup toolchain action, which downloads and installs a\ntier 3 language into the toolchain. For other tiers, this is basically a no-operation.\n\n- When the tool has already been installed, this action will be skipped.\n\n- Actions will be scoped by language and version, also known as a runtime. For example, `SetupToolchain(node:18.1.0)` or `SetupToolchain(deno:1.31.0)`.\n\n- Tools that require a global binary (found on `PATH`) will display the version as \"global\". For example, `SetupToolchain(node:global)`.\n\ninfo\n\nThis action can be skipped by setting the `MOON_SKIP_SETUP_TOOLCHAIN=true` environment variable. The\nskip can be scoped per tool by setting the value to the tool name (`node`), and also by version\n(`node:20.0.0`). Supports a comma-separated list.\n\n### Setup environmentv1.35.0\n\nThis action runs after the toolchain has been setup, but before dependencies are installed, so that\nthe development environment can be setup and configured. This includes operations such as modifying\na manifest (`package.json`, etc), updating configuration files, initializing venv's (Python), so on\nand so forth.\n\n### Setup protov1.39.0\n\nThis action runs before all toolchain related actions and ensures that [proto](/proto) has been\ninstalled and is available for use. This is required for toolchains that will be downloaded and\ninstalled.\n\n### Install dependencies\n\nBefore we run a task, we ensure that all language dependencies (`node_modules` for example) have\nbeen installed, by automatically installing them if we detect changes since the last run. We achieve\nthis by comparing lockfile modified timestamps, parsing manifest files, and hashing resolved\ndependency versions.\n\n- When dependencies do not need to be installed, this action will be skipped.\n\n- Depending on the language and configuration, we may install dependencies in a project (`InstallProjectDeps`), or in the workspace root for all projects (`InstallWorkspaceDeps`).\n\n- Actions will be scoped by language and version, also known as a runtime. For example, `InstallWorkspaceDeps(node:18.1.0)` or `InstallProjectDeps(node:18.1.0, example)`.\n\ninfo\n\nThis action can be skipped by disabling the\n[`pipeline.installDependencies`](/docs/config/workspace#installdependencies) setting.\n\n### Sync project\n\nTo ensure a consistently healthy project and repository, we run a process known as syncing\neverytime a task is ran. This action will run sync operations for all toolchains associated with\nthe project.\n\ninfo\n\nThis action can be skipped by disabling the\n[`pipeline.syncProject`](/docs/config/workspace#syncproject) setting.\n\n### Run task\n\nThe primary action in the graph is the run [task](/docs/concepts/task) action, which runs a project's\ntask as a child process, derived from a [target](/docs/concepts/target). Tasks can depend on other\ntasks, and they'll be effectively orchestrated and executed by running in topological order using a\nthread pool.\n\n### Run interactive task\n\nLike the base run task, but runs the [task interactively](/docs/concepts/task#interactive) with stdin\ncapabilities. All interactive tasks are run in isolation in the graph.\n\n### Run persistent task\n\nLike the base run task, but runs the [task in a persistent process](/docs/concepts/task#persistent)\nthat never exits. All persistent tasks are run in parallel as the last batch in the graph.\n\n## What is the graph used for?\n\nWithout the action graph, tasks would not efficiently run, or possibly at all! The graph helps to\nrun tasks in parallel, in the correct order, and to ensure a reliable outcome.\n\n## /docs/how-it-works/languages\n\nSource: https://moonrepo.dev/docs/how-it-works/languages\n\n# Languages\n\nAlthough moon is currently focusing on the JavaScript ecosystem, our long-term vision is to be a\nmulti-language task runner and monorepo management tool. To that end, we've designed our languages\nto work like plugins, where their functionality is implemented in isolation, and is opt-in.\n\ninfo\n\nWe do not support third-party language plugins at this time, but are working towards it!\n\n## Enabling a language\n\nmoon [supported languages](/docs/#supported-languages) are opt-in, and are not enabled by default. We\nchose this pattern to avoid unnecessary overhead, especially for the future when we have 10 or more\nbuilt-in languages.\n\nTo enable a supported language, simply define a configuration block with the language's name in\n[`.moon/toolchains.yml`](/docs/config/toolchain). Even an empty block will enable the language.\n\n.moon/toolchains.yml\n\n```\n# Enable Node.jsnode: {}# Enable Node.js with custom settingsnode:  packageManager: 'pnpm'# Enable Denodeno: {}\n```\n\nFor unsupported languages, use the system toolchain. Continue reading to learn more!\n\n## System language and toolchain\n\nWhen working with moon, you'll most likely have tasks that run built-in system commands that do not\nbelong to any of the supported languages. For example, you may have a task that runs `git` or\n`docker` commands, or common commands like `rm`, `cp`, `mv`, etc.\n\nFor these cases, moon provides a special language/toolchain called `system`, that is always enabled.\nThis toolchain is a catch-all, an escape-hatch, a fallback, and provides the following:\n\n- Runs a system command or a binary found on `PATH`.\n\n- Wraps the execution in a shell.\n\nTo run system commands, set a task's [`toolchain`](/docs/config/project#toolchain) setting to \"system\".\n\nmoon.yml\n\n```\ntasks:  example:    command: 'git status'    toolchain: 'system'\n```\n\n## Tier structure and responsibilities\n\nAs mentioned in our introduction,\n[language support is divided up into tiers](/docs/#supported-languages), where each tier introduces\nmore internal integrations and automations, but requires more work to properly implement.\n\nInternally each tier maps to a Rust crate, as demonstrated by the graph at the top of the article.\n\n### Tier 0 = Unsupported\n\nThe zero tier represents all languages not directly supported by moon. This tier merely exists as\na mechanism for running non-supported language binaries via the\n[system toolchain](#system-language-and-toolchain).\n\nmoon.yml\n\n```\ntasks:  example:    command: 'ruby'    toolchain: 'system'\n```\n\n### Tier 1 = Language\n\nThe first tier is the language itself. This is the most basic level of support, and is the only tier\nthat is required to be implemented for a language to be considered minimally supported. This tier is\nin charge of:\n\n- Declaring metadata about the language. For example, the name of the binary, supported file extensions, available dependency/package/version managers, names of config/manifest/lock files, etc.\n\n- Helpers for parsing lockfiles and manifest files, and interacting with the language's ecosystem (for example, Node.js module resolution).\n\n- Mechanisms for detecting the language of a project based on config files and other criteria.\n\n- Maps to a project's [`language`](/docs/config/project#language) setting.\n\nmoon.yml\n\n```\nlanguage: 'javascript'\n```\n\n### Tier 2 = Platform\n\nThe second tier requires the language functionality from tier 1, and eventually the toolchain\nfunctionality from tier 3, and provides interoperability with moon's internals. This is the most\ncomplex of all tiers, and the tier is in charge of:\n\n- Determining when, where, and how to install dependencies for a project or the workspace.\n\n- Loading project aliases and inferring implicit relationships between projects.\n\n- Syncing a project and ensuring a healthy project state.\n\n- Hashing efficiently for dependency installs and target runs.\n\n- Prepending `PATH` with appropriate lookups to execute a task.\n\n- Running a target's command with proper arguments, environment variables, and flags.\n\n- Maps to a project's [`toolchain.default`](/docs/config/project#toolchain-1) or task's [`toolchain`](/docs/config/project#toolchain) setting.\n\n- Supports a configuration block by name in [`.moon/toolchains.yml`](/docs/config/toolchain).\n\nmoon.yml\n\n```\ntasks:  example:    command: 'webpack'    toolchain: 'node'\n```\n\n.moon/toolchains.yml\n\n```\nnode: {}\n```\n\n### Tier 3 = Toolchain\n\nThe third tier is toolchain support via [proto](/proto). This is the final tier, as the toolchain is\nunusable unless the platform has been entirely integrated, and as such, the platform depends on this\ntier. This tier handles:\n\n- Downloading and installing a language into the toolchain.\n\n- Installing and deduping project dependencies.\n\n- Detecting appropriate versions of tools to use.\n\n- Determining which binary to use and execute targets with.\n\n- Supports a `version` field in the named configuration block in [`.moon/toolchains.yml`](/docs/config/toolchain).\n\n.moon/toolchains.yml\n\n```\nnode:  version: '18.0.0'\n```\n\n## /docs/how-it-works/project-graph\n\nSource: https://moonrepo.dev/docs/how-it-works/project-graph\n\n# Project graph\n\nThe project graph is a representation of all configured\n[projects in the workspace](/docs/config/workspace#projects) and their relationships between each\nother, and is represented internally as a directed acyclic graph (DAG). Below is a visual\nrepresentation of a project graph, composed of multiple applications and libraries, where both\nproject types depend on libraries.\n\ninfo\n\nThe [`moon project-graph`](/docs/commands/project-graph) command can be used to view the structure of\nyour workspace.\n\n## Relationships\n\nA relationship is between a dependent (downstream project) and a dependency/requirement (upstream\nproject). Relationships are derived from source code and configuration files within the repository,\nand fall into 1 of 2 categories:\n\n### Explicit\n\nThese are dependencies that are explicitly defined in a project's [`moon.yml`](/docs/config/project)\nconfig file, using the [`dependsOn`](/docs/config/project#dependson) setting.\n\nmoon.yml\n\n```\ndependsOn:  - 'components'  - id: 'utils'    scope: 'peer'\n```\n\n### Implicit\n\nThese are dependencies that are implicitly discovered by moon when scanning the repository. How an\nimplicit dependency is discovered is based on a\n[language's platform integration](/docs/how-it-works/languages#tier-2--platform), and how that language's ecosystem\nfunctions.\n\npackage.json\n\n```\n{  // ...  \"dependencies\": {    \"@company/components\": \"workspace:*\"  },  \"peerDependencies\": {    \"@company/utils\": \"workspace:*\"  }}\n```\n\ncaution\n\nIf a language is not officially supported by moon, then implicit dependencies will not be\nresolved. For unsupported languages, you must explicitly configure dependencies.\n\n### Scopes\n\nEvery relationship is categorized into a scope that describes the type of relationship between the\nparent and child. Scopes are currently used for [project syncing](/docs/commands/sync) and deep Docker\nintegration.\n\n- Production - Dependency is required in production, will not be pruned in production environments, and will sync as a production dependency.\n\n- Development - Dependency is required in development and production, will be pruned from production environments, and will sync as a development-only dependency.\n\n- Build - Dependency is required for building only, and will sync as a build dependency.\n\n- Peer - Dependency is a peer requirement, with language specific semantics. Will sync as a peer dependency when applicable.\n\n## What is the graph used for?\n\nGreat question, the project graph is used throughout the codebase to accomplish a variety of\nfunctions, but mainly:\n\n- Is fed into the [task graph](/docs/how-it-works/task-graph) to determine relationships of tasks between other tasks, and across projects.\n\n- Powers our [Docker](/docs/guides/docker) layer caching and scaffolding implementations.\n\n- Utilized for [project syncing](/docs/commands/sync) to ensure a healthy repository state.\n\n- Determines affected projects in [continuous integration](/docs/guides/ci) workflows.\n\n## /docs/how-it-works/task-graph\n\nSource: https://moonrepo.dev/docs/how-it-works/task-graph\n\n# Task graph\n\nThe task graph is a representation of all configured\n[tasks in the workspace](/docs/config/workspace#projects) and their relationships between each other,\nand is represented internally as a directed acyclic graph (DAG). This graph is derived from\ninformation in the [project graph](/docs/how-it-works/project-graph). Below is a visual representation of a task\ngraph.\n\ninfo\n\nThe [`moon task-graph`](/docs/commands/task-graph) command can be used to view the structure of your\nworkspace.\n\n## Relationships\n\nA relationship is between a dependent (downstream task) and a dependency/requirement (upstream\ntask). Relationships are derived explicitly with the task [`deps`](/docs/config/project#deps) setting,\nand fall into 1 of 2 categories:\n\n### Required\n\nThese are dependencies that are required to run and complete with a success, before the owning task\ncan run. If a required dependency fails, then the owning task will abort.\n\n### Optional\n\nThe opposite of [required](#required), these are dependencies that can either a) not exist during\ntask inheritance, or b) run and fail without aborting the owning task.\n\n## What is the graph used for?\n\nGreat question, the task graph is extremely important for running tasks (duh), and it also:\n\n- Is fed into the [action graph](/docs/how-it-works/action-graph) that can be executed in topological order.\n\n- Determines affected tasks in [continuous integration](/docs/guides/ci) workflows.\n\n## /docs/install\n\nSource: https://moonrepo.dev/docs/install\n\n# Install moon\n\n2 min\n\nThe following guide can be used to install moon and integrate it into an existing repository (with\nor without incremental adoption), or to a fresh repository.\n\n## Installing\n\nThe entirety of moon is packaged and shipped as a single binary. It works on all major operating\nsystems, and does not require any external dependencies. For convenience, we provide the following\nscripts to download and install moon.\n\n### proto\n\nmoon can be installed and managed in [proto's toolchain](/proto). This will install moon to\n`~/.proto/tools/moon` and make the binary available at `~/.proto/bin`.\n\n```\nproto install moon\n```\n\nFurthermore, the version of moon can be pinned on a per-project basis using the\n[`.prototools` config file](/docs/proto/config).\n\n.prototools\n\n```\nmoon = \"1.31.0\"\n```\n\ninfo\n\nWe suggest using proto to manage moon (and other tools), as it allows for multiple versions to be\ninstalled and used. The other installation options only allow for a single version (typically the\nlast installed).\n\n### Linux, macOS, WSL\n\nIn a terminal that supports Bash, run:\n\n```\nbash\ninfo\n\nIf you are using Git Bash on Windows, you can run the [Unix commands](#linux-macos-wsl) above.\n\n### npm\n\nmoon is also packaged and shipped as a single binary through the\n[`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli) npm package. Begin by installing this\npackage at the root of the repository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev @moonrepo/cli\n```\n\n```\nyarn add --dev @moonrepo/cli# If using workspacesyarn add --dev -W @moonrepo/cli\n```\n\n```\nnpm install --save-dev @moonrepo/cli\n```\n\n```\npnpm add --save-dev @moonrepo/cli# If using workspacespnpm add --save-dev -w @moonrepo/cli\n```\n\n```\nbun install --dev @moonrepo/cli\n```\n\nIf you are installing with Bun, you'll need to add `@moonrepo/cli` as a\n[trusted dependency](https://bun.sh/docs/install/lifecycle#trusteddependencies).\n\ninfo\n\nWhen a global `moon` binary is executed, and the `@moonrepo/cli` binary exists within the\nrepository, the npm package version will be executed instead. We do this because the npm package\ndenotes the exact version the repository is pinned it.\n\n### Other\n\nmoon can also be downloaded and installed manually, by downloading an asset from\n[https://github.com/moonrepo/moon/releases](https://github.com/moonrepo/moon/releases). Be sure to\nrename the file after downloading, and apply the executable bit (`chmod +x`) on macOS and Linux.\n\n## Upgrading\n\nIf using proto, moon can be upgraded using the following command:\n\n```\nproto install moon --pin\n```\n\nOtherwise, moon can be upgraded with the [`moon upgrade`](/docs/commands/upgrade) command. However, this\nwill only upgrade moon if it was installed in `~/.moon/bin`.\n\n```\nmoon upgrade\n```\n\nOtherwise, you can re-run the installers above and it will download, install, and overwrite with the\nlatest version.\n\n## Canary releases\n\nmoon supports canary releases, which are built and published for every commit to our development\nbranches. These releases will include features and functionality that have not yet landed on master.\nWhen using a canary release, you'll need to download and execute the binaries manually:\n\n- Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `canary` tag. Releases are versioned by date.\n\n- From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/canary) using the `canary` tag. This tag always represents the latest development release.\n\n## Nightly releases\n\nmoon supports nightly releases, which are built and published once a day from the latest commit on\nmaster. When using a nightly release, you'll need to download and execute the binaries manually.\n\n- Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `nightly` tag. Releases are versioned by date.\n\n- From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/nightly) using the `nightly` tag. This tag always represents the latest stable release.\n\n## Next steps\n\n[Setup workspace](/docs/setup-workspace)\n\n## /docs/migrate-to-moon\n\nSource: https://moonrepo.dev/docs/migrate-to-moon\n\n# Migrate to moon\n\nNow that we've talked about the workspace, projects, tasks, and more, we must talk about something\nimportant... Should you embrace moon tasks? Or keep using language/ecosystem specific scripts? Or\nboth (incremental adoption)?\n\n## Migrate to moon tasks\n\nWe suggest using moon tasks (of course), as they provide far more granular control and configurable\noptions than scripts, and a `moon.yml` is a better\n[source of truth](/docs/faq#what-should-be-considered-the-source-of-truth). Scripts aren't powerful\nenough to scale for large codebases.\n\nAn example of what this may look like can be found below. This may look like a lot, but it pays\ndividends in the long run.\n\n/moon.yml\n\n```\nlanguage: 'javascript'fileGroups:  sources:    - 'src/**/*'  tests:    - 'tests/**/*'tasks:  build:    command: 'webpack build --output-path @out(0)'    inputs:      - '@globs(sources)'      - 'webpack.config.js'    outputs:      - 'build'  dev:    command: 'webpack server'    inputs:      - '@globs(sources)'      - 'webpack.config.js'    preset: 'server'  format:    command: 'prettier --check .'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - '/prettier.config.js'  lint:    command: 'eslint .'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - '.eslintignore'      - '.eslintrc.js'      - '/.eslintrc.js'  test:    command: 'jest .'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - 'jest.config.js'  typecheck:    command: 'tsc --build'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - 'tsconfig.json'      - '/tsconfig.json'\n```\n\n## Continue using scripts\n\nAs a frontend developer you're already familiar with the Node.js ecosystem, specifically around\ndefining and using `package.json` scripts, and you may not want to deviate from this. Don't worry,\nsimply enable the [`node.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts) setting\nto automatically create moon tasks from a project's scripts! These can then be ran with\n[`moon run`](/docs/commands/run).\n\nThis implementation is a simple abstraction that runs `npm run ` (or pnpm/yarn) in the\nproject directory as a child process. While this works, relying on `package.json` scripts incurs the\nfollowing risks and disadvantages:\n\n- [Inputs](/docs/config/project#inputs) default to `**/*`: A change to every project relative file will mark the task as affected, even those not necessary for the task. Granular input control is lost.\n\n- A change to workspace relative files will not mark the task as affected. For example, a change to `/prettier.config.js` would not be detected for a `npm run format` script.\n\n- [Outputs](/docs/config/project#outputs) default to an empty list unless: moon will attempt to extract outputs from arguments, by looking for variations of `--out`, `--outFile`, `--dist-dir`, etc.\n\n- If no output could be determined, builds will not be cached and hydrated.\n\n- Tasks will always [run in CI](/docs/config/project#runinci) unless: moon will attempt to determine invalid CI tasks by looking for popular command usage, for example: `webpack serve`, `next dev`, `--watch` usage, and more. This is not an exhaustive check.\n\n- The script name contains variations of `dev`, `start`, or `serve`.\n\n## Next steps\n\nBy this point, you should have a better understanding behind moon's fundamentals! Why not adopt\nincrementally next? Jump into [guides](/docs/guides/ci) for advanced use cases or [concepts](/docs/concepts)\nfor a deeper understanding.\n\n[Community help & support](https://discord.gg/qCh9MEynv2)[Releases & updates](https://twitter.com/tothemoonrepo)\n\n## /docs/migrate/2.0\n\nSource: https://moonrepo.dev/docs/migrate/2.0\n\n# Migrate to moon v2.0\n\nTo ease the migration process from moon v1 to v2, we've compiled a list of all breaking changes and\nimportant changes that you should be aware of. Please read through these carefully before upgrading\nyour workspace.\n\nTo automate some of the migration process, we've created the `moon migrate v2` command that will\nmigrate all applicable settings in configuration files.\n\n```\n$ moon migrate v2\n```\n\n## CLI\n\n- Removed `x86_64-apple-darwin` (Apple Intel) as a supported operating system. Only `aarch64-apple-darwin` (Apple Silicon) is now supported.\n\n### Commands\n\n- We've done a large polish pass for all commands, based on the [CLI guidelines](https://clig.dev).\n\n- Updated the `moonx` binary to use `moon exec` instead of `moon run` under the hood.\n\n- Renamed all options and flags to kebab-case instead of camelCase. Example: `--logLevel` -> `--log-level`\n\n- Renamed options for all commands: `--platform` -> `--toolchain`\n\n- Removed commands: `moon node`\n\n- `moon migrate from-package-json` (use the `migrate-turborepo` extension instead)\n\n- `moon query hash` (use `moon hash` instead)\n\n- `moon query hash-diff` (use `moon hash` instead)\n\n#### `moon action-graph`\n\n- Changed the output of `--json` to a new JSON structure (now matches the project and task graphs).\n\n#### `moon check`\n\n- Now runs `moon exec` under the hood, with some arguments/options pre-filled.\n\n- If the project ID is not specifed, it will no longer find the closest project. Instead you must pass `--closest`.\n\n- Renamed options: `--update-cache, -u` -> `--force, -f`\n\n#### `moon ci`\n\n- Now runs `moon exec` under the hood, with some arguments/options pre-filled.\n\n- Renamed options: `--update-cache, -u` -> `--force, -f`\n\n#### `moon generate`\n\n- Changed the destination from a positional argument, to the `--to` option. Example: `moon generate ./dist` -> `moon generate --to ./dist`\n\n#### `moon init`\n\n- Removed \"scaffolding a toolchain\" functionality from the command. Use the `moon toolchain add` command instead.\n\n- Removed options: `--to` (use a positional argument instead)\n\n#### `moon mcp`\n\n- Updated protocol version to 2025-11-25.\n\n- Updated the `get_projects` tool to no longer have an `includeTasks` option.\n\n- Updated the `get_projects` tool to return a list of project fragments, instead of the whole project object. This was required as the response was too large for MCP.\n\n- Updated the `get_tasks` tool to return a list of task fragments, instead of the whole task object. This was required as the response was too large for MCP.\n\n#### `moon query projects`\n\n- Removed options: `--dependents`\n\n#### `moon run`\n\n- Now runs `moon exec` under the hood, with some arguments/options pre-filled.\n\n- Updated options: `--dependents` now requires a value, either `deep` or `direct`\n\n- Renamed options: `--update-cache, -u` -> `--force, -f`\n\n- Removed options: `--no-bail` (use `moon exec` instead)\n\n- `--profile`\n\n- `--remote` (use `--affected remote` instead)\n\n#### `moon templates`\n\n- Changed the output to render a table instead of a list.\n\n#### `moon run`\n\n- Running a target without a scope no longer locates the closest project and instead uses the new default project feature. To run a target in the closets project, use `~:` scope instead. Example: `moon run build` -> `moon run ~:build`\n\n## Workspace\n\n### Configuration: `.moon/workspace.*`\n\n- Renamed setting values: `codeowners.orderBy` value `project-name` -> `project-id`\n\n- Renamed settings: `codeowners.syncOnRun` -> `codeowners.sync`\n\n- `constraints.enforceProjectTypeRelationships` -> `constraints.enforceLayerRelationships`\n\n- `docker.prune.installToolchainDeps` -> `docker.prune.installToolchainDependencies`\n\n- `docker.scaffold.include` -> `docker.scaffold.configsPhaseGlobs`\n\n- `runner` -> `pipeline`\n\n- `unstable_remote` -> `remote`\n\n- `vcs.manager` -> `vcs.client`\n\n- `vcs.syncHooks` -> `vcs.sync`\n\n- Removed settings: `docker.scaffold.copyToolchainFiles`\n\n- `experiments.*`\n\n- `hasher.batchSize`\n\n- `pipeline.archivableTargets`\n\n## Toolchains\n\n### Configuration: `.moon/toolchain.*`\n\n- This file was renamed to `.moon/toolchains.*` (plural) to reflect that multiple toolchains are configured. This also aligns with the new `.moon/extensions.*` file.\n\n- All toolchains have been stabilized, so the `unstable_` prefix must be removed from identifiers.\n\n#### JavaScript\n\nThe `bun`, `deno`, and `node` toolchains now require the `javascript` toolchain to be defined as\nwell. All shared settings have been moved to the `javascript` toolchain.\n\nIn addition, all `node` package managers are no longer nested under the `node` toolchain, but are\nnow top-level settings. These are only required when the `javascript.packageManager` setting is\ndefined.\n\n- Moved settings: `bun.dependencyVersionFormat` -> `javascript.dependencyVersionFormat`\n\n- `bun.inferTasksFromScripts` -> `javascript.inferTasksFromScripts`\n\n- `bun.rootPackageOnly` -> `javascript.rootPackageDependenciesOnly`\n\n- `bun.syncProjectWorkspaceDependencies` -> `javascript.syncProjectWorkspaceDependencies`\n\n- `node.dependencyVersionFormat` -> `javascript.dependencyVersionFormat`\n\n- `node.dedupeOnLockfileChange` -> `javascript.dedupeOnLockfileChange`\n\n- `node.inferTasksFromScripts` -> `javascript.inferTasksFromScripts`\n\n- `node.packageManager` -> `javascript.packageManager`\n\n- `node.rootPackageOnly` -> `javascript.rootPackageDependenciesOnly`\n\n- `node.syncPackageManagerField` -> `javascript.syncPackageManagerField`\n\n- `node.syncProjectWorkspaceDependencies` -> `javascript.syncProjectWorkspaceDependencies`\n\n- `node.bun` -> `bun`\n\n- `node.npm` -> `npm`\n\n- `node.pnpm` -> `pnpm`\n\n- `node.yarn` -> `yarn`\n\n- Renamed settings: `node.binExecArgs` -> `node.executeArgs`\n\n- Removed settings: `bun.packagesRoot`\n\n- `deno.depsFile`\n\n- `deno.lockfile`\n\n- `node.addEnginesConstraint`\n\n- `node.packagesRoot`\n\n.moon/toolchains.yml\n\n```\n# Beforenode:  version: '22.14.0'  packageManager: 'yarn'  inferTasksFromScripts: false  syncPackageManagerField: true  syncProjectWorkspaceDependencies: true  yarn:    version: '4.8.0'# Afterjavascript:  packageManager: 'yarn'  inferTasksFromScripts: false  syncPackageManagerField: true  syncProjectWorkspaceDependencies: truenode:  version: '22.14.0'yarn:  version: '4.8.0'\n```\n\n## Extensions\n\n### Configuration: `.moon/extensions.*`\n\n- The `extensions` setting from `.moon/workspace.*` has been moved (and flattened) to its own file, `.moon/extensions.*`.\n\n- The built-in extensions `download`, `migrate-nx`, and `migrate-turborepo` must now be enabled in the configuration file before they can be used. Simply set an empty object. This change was made to reduce the number of extensions that are loaded by default, improving performance.\n\n.moon/extensions.yml\n\n```\ndownload: {}migrate-nx: {}\n```\n\n## Project\n\n### Configuration: `moon.*`\n\n- Renamed settings: `docker.scaffold.include` -> `docker.scaffold.sourcesPhaseGlobs`\n\n- `project.name` -> `project.title`\n\n- `type` -> `layer`\n\n- `toolchain` -> `toolchains`\n\n- `platform` -> `toolchains.default`\n\n- Removed settings: [`project.metadata`](#custom-metadata)\n\n- [`toolchain.*.disabled`](#toolchain-disabling)\n\n### Language detection\n\nThe primary `language` is now detected from toolchains, instead of being a hardcoded implementation.\nThe result may now differ, as the first toolchain in the list will be used. Additionally, languages\nthat don't have a toolchain yet, like PHP or Ruby, will not be detected and must be explicitly\nconfigured.\n\nmoon.yml\n\n```\n# Afterlanguage: 'ruby'\n```\n\n### Custom metadata\n\nThe `project.metadata` setting has been removed, but all custom metadata fields can now be defined\nat the root of the `project` setting.\n\nmoon.yml\n\n```\n# Beforeproject:  metadata:    customField: 'value'# Afterproject:  customField: 'value'\n```\n\n### Toolchain disabling\n\nThe `toolchain.*.disabled` setting was removed. Instead set the toolchain itself to null/false.\n\nmoon.yml\n\n```\n# Beforetoolchain:  typescript:    disabled: true# Aftertoolchains:  typescript: null\n```\n\n## Tasks\n\n### Configuration: `moon.*`, `.moon/tasks`\n\n- The file `.moon/tasks.yml` has been removed. If you want to support tasks that are inherited by all projects, then move this to `.moon/tasks/all.yml` and do not configure the new `inheritedBy` setting.\n\n- Renamed tokens: `$projectName` -> `$projectTitle`\n\n- `$projectType` -> `$projectLayer`\n\n- `$taskPlatform` -> `$taskToolchain`\n\n- Renamed settings: [`tasks.*.local`](#local-mode) -> `tasks.*.preset` using `server` value\n\n- `tasks.*.platform` -> `tasks.*.toolchains`\n\n- `tasks.*.options.affectedPassInputs` -> `tasks.*.options.affectedFiles.passInputsWhenNoMatch`\n\n- Removed setting values: `tasks.*.preset` value `watcher`\n\n- Changed settings: `tasks.deps.*.args` no longer supports a string. Use a list of strings instead.\n\n- `tasks.*.options.affectedFiles` now supports an object for more granular control.\n\n- Changed option defaults: `tasks.*.options.envFile` now defaults to a list of files, instead of a single file, when `true`. Refer to the blog post for more information.\n\n- `tasks.*.options.inferInputs` now defaults to `false` instead of `true`.\n\n- `tasks.*.options.shell` now defaults to `true` instead of `false`.\n\n- `tasks.*.options.unixShell` now defaults to `bash` instead of nothing.\n\n- `tasks.*.options.windowsShell` now defaults to `pwsh` instead of nothing.\n\n### Simple commands only\n\nWe've reworked `command` (and `args`) to only support simple commands. A simple command is an\nexecutable (binary, file, etc) followed by zero or many arguments.\n\nComplex commands that involve shell features like piping (`|`), redirection (`>`, `\n\nShell features like expansion, globbing, and substitution is still supported in `command`.\n\n### Local mode\n\nThe `local` task setting has been removed as the name was confusing. Users assumed it meant \"only\nrun locally\", but it actually meant \"this is a persistent server that should only run locally\".\nInstead, use the `preset` setting with a value of `server`.\n\nmoon.yml\n\n```\n# Beforetasks:  dev:    command: 'start-dev'    local: true# Beforetasks:  dev:    command: 'start-dev'    preset: 'server'\n```\n\nIf you want a task that is simply \"local only\" without other options changes, use `options.runInCI`\ndirectly.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev'    options:      runInCI: false\n```\n\n### Shells by default\n\nTasks now run in a shell by default, and will use Bash on Unix (`options.unixShell`), and pwsh on\nWindows (`options.windowsShell`). You can disable this behavior by setting `options.shell` to\n`false`.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev'    options:      shell: false\n```\n\n### Env var substitution behavior\n\nThe syntax and behavior for substituting (expanding/interpolation) environment variables has\nchanged, to better align with the standard of `.env` files. The biggest change is that flagless\ntokens (`$VAR`) and `?` flag tokens (`$VAR?`) swapped functionality. Refer to the following table:\n\nSyntax v1 v2\n\n`$VAR` Substitute with variable syntax (`$VAR`) if variable empty  Substitute with empty string if variable empty\n\n`$VAR!` Don't substitute and keep variable syntax (`$VAR`)  Removed syntax\n\n`$VAR?` Substitute with empty string if variable empty  Removed syntax\n\n`${VAR}` Substitute with variable syntax (`$VAR`) if variable empty  Substitute with empty string if variable empty\n\n`${VAR!}` Don't substitute and keep variable syntax (`$VAR`) ~\n\n`${VAR?}` Substitute with empty string if variable empty  Substitute with variable syntax (`$VAR`) if variable empty\n\n`${VAR:default}` Use default value if variable empty ~\n\n`${VAR:-default}`, `${VAR-default}`  Not supported Use default value if variable empty\n\n`${VAR:+alternate}`, `${VAR+alternate}`  Not supported Use alternate value if variable non-empty\n\nLegend:\n\n- `~` indicates the syntax/functionality is the same as v1\n\n- `` indicates breaking change\n\n- `` indicates not supported\n\n### Env var precedence\n\nThe order of precedence for environment variables has slightly changed when running tasks, as it was\nconfusing to users. The new order of precedence is as follows, from lowest to highest tier, with the\nlatter overwriting the former:\n\n- Task `.env` files via `options.envFile`\n\n- Task env variables via `env` or `deps.*.env`\n\n- System variables via profile scripts (`.bashrc`, `.zshrc`, etc)\n\n- via command line: `KEY=value moon ...`\n\nIn regards to variable substitution, each tier can reference variables within the same tier, or the\nhigher tier(s), but not from lower tier(s). This is because variables are processed in reverse\norder. Refer to the following table:\n\nTier Can reference Evaluated during\n\nDotenv Dotenv, Task, System Before task execution\n\nTask Task, System After task creation\n\nSystem System CLI startup\n\nIf you don't want to inherit a system variable, you can override it in the task with a null value.\n\n```\ntasks:  dev:    env:      EXAMPLE: null\n```\n\n### Deferred `.env` files\n\nIn v1, when `options.envFile` was enabled, the `.env` file(s) were loaded at the time of task\ncreation, during the building of project/task graphs. This meant that if the `.env` file changed\nbetween the time of graph creation and task execution, the changes would not be reflected.\n\nIn v2 and later, `.env` files are loaded just before task execution, ensuring that any changes to\nthe file are picked up.\n\ncaution\n\nBecause of this change, task `env` variables will continue to override `.env` file variables, BUT\ncan no longer reference them for substitution. This is because the `.env` files are loaded later in\nthe process.\n\n### Other changes\n\n- When `options.affectedFiles` is enabled, the list of files will be joined with the OS path separator (`:` on Unix, `;` on Windows) instead of a comma (`,`) when passed as the `MOON_AFFECTED_FILES` environment variable.\n\n## Task inheritance\n\n### Deep merged instead of shallow merged\n\nIn v1, when inheriting tasks, all global configs (those in `.moon`) were shallow merged into a\nsingle config ignoring merge task options, and then merged with the local config (`moon.*`) using\nmerge task options. This was not intuitive, as users expected all configs to be merged in sequence.\nTo demonstrate this, take the following example configs, in order of inherited:\n\n```\n# .moon/tasks.ymltasks:  build:    command: 'build --cache'    options:      mutex: 'build'# .moon/tasks/tag-a.ymltasks:  build:    args: '--force'# .moon/tasks/tag-b.ymltasks:  build:    args: '--clean'\n```\n\nUsers would expect the final `build` task to be `build --cache --force --clean` with the mutex\noption set. However, since the `tasks` setting was shallow merged, only the last config (`tag-b`)\nwould be used, resulting in the task being `noop --clean` without the mutex. The `noop` pops up\nbecause the `command` setting was not configured in the last config.\n\nTo remedy this, and to improve task composition overall, global configs are no longer shallow merged\ninto a single config before merging with the local config. Instead, all configs are merged in\nsequence, while respecting the task merge options. This is the order of operations for the new\nsystem:\n\n- Load all global configs (`.moon`) into a list, in order, based on the `inheritedBy` setting.\n\n- Load the local config (`moon.*`).\n\n- Create an inheritance chain by resolving global configs first, then the local config last, while respecting `extend` and other composition settings.\n\n- Merge all task options in order, to create the final task options.\n\n- Merge all tasks in order, using the final task options to guide the merging behavior.\n\n### File groups are merged\n\nBecause of the new deep merging behavior, file groups defined in inherited configs are now merged\ntogether, instead of being replaced by the following config in the sequence. For example, given the\nconfigs:\n\n```\n# .moon/tasks/tag-a.ymlfileGroups:  sources:    - 'src/**'# .moon/tasks/tag-b.ymlfileGroups:  sources:    - 'docs/**'\n```\n\nIn v1, the final `sources` file group would only include `docs/**`, as the second config would\nreplace the first. In v2, the final `sources` file group includes both `src/**` and `docs/**`.\n\n## VCS\n\n### New hooks system\n\nWe've rewritten our Git hooks from the ground up to be based around the `core.hooksPath` setting.\nThe following changes have been made:\n\n- We no longer write hooks to the `.git/hooks` directory.\n\n- Instead, all hooks are written to `.moon/hooks` and Git is configured to use this directory.\n\n- Bash scripts no longer end in `.sh`.\n\ncaution\n\nWe currently don't have an easy way to clean the previous implementation of hooks. You may need to\nmanually remove the old scripts from `.git/hooks` and `.moon/hooks` if they are causing issues.\n\n## Other changes\n\n### Changed (touched) files\n\nWe renamed the terminology \"touched files\" to \"changed files\" throughout the codebase and\ndocumentation. This better aligns with common VCS terminology and reduces confusion. Because of\nthis, the following changes were made:\n\n- Renamed the `moon query touched-files` CLI command to `moon query changed-files`.\n\n- Renamed the `get_touched_files` MCP tool to `get_changed_files`.\n\n- Renamed the `touchedFiles` run report field to `changedFiles`.\n\n```\n# Before$ moon query touched-files# After$ moon query changed-files\n```\n\n### Docker\n\n- The scaffolded `.moon/docker/workspace` directory was renamed to `.moon/docker/configs`.\n\n- The `moon docker file` command will now loop through all toolchains and use the first image found, otherwise it defaults to \"scratch\". If you want to be explicit, set the `docker.file.image` setting.\n\n### Query language (MQL)\n\n- Renamed fields: `projectName` -> `projectId`\n\n- `projectType` -> `projectLayer`\n\n- `taskPlatform` -> `taskToolchain`\n\n```\n# BeforeprojectType=application && taskPlatform=node# AfterprojectLayer=application && taskToolchain=node\n```\n\n### Webhooks\n\n- Removed the `tool.*` events. Use `toolchain.*` events instead.\n\n- Removed the `runtime` field from `dependencies.*` events. Use the `toolchain` field instead.\n\n## /docs/proto\n\nSource: https://moonrepo.dev/docs/proto\n\n# What is proto?\n\n3 min\n\nproto is a pluggable version manager, a unified toolchain.\n\nIf you're unfamiliar with the concept of a toolchain, a toolchain is a collection of tools that are\ndownloaded, installed, and managed by version through a single interface. In the context of proto's\ntoolchain, a tool is either a programming language, a dependency/package manager for a language, or\na custom implementation provided by a plugin. It's the next step in the version manager evolution.\n\n## Features\n\n- Lightspeed! With Rust and WASM, we can guarantee exceptional performance.\n\n- Multi-language. A single CLI for managing versions for all of your languages.\n\n- Cross-platform, for a consistent experience across machines and teams.\n\n- [Contextual version detection](/docs/proto/detection), ensuring the correct version of a tool is always used.\n\n- Checksum verification, ensuring a tool came from a trusted source.\n\n- Detects and infers from a language's ecosystem for maximum compatibility.\n\n- [Pluggable architecture](/docs/proto/plugins), allowing for custom tooling.\n\n## Why proto?\n\nproto was designed to be a modern and holistic version manager for all of your favorite programming\nlanguages. We believe a single tool that works the same across every language is better than\nmultiple ad-hoc tools. While we only support a handful of languages today, we aim to support many\nmore in the future!\n\nsuccess\n\nproto powers [moon](/moon)'s toolchain, enabling a single source of truth for both tools!\n\n## How does it work?\n\nThe toolchain is a `.proto` directory within the current user's home directory, e.g., `~/.proto`.\n\nThe first step in a tool's life-cycle is being downloaded to `~/.proto/temp`. Downloads are\ntypically an archive that can be unpacked into a target directory. Once downloaded, we verify the\ndownloaded file by running a checksum. If this check fails for any reason, the tool is unusable,\nand the process is aborted.\n\nAfter a successful verification, the last step in the tool's life-cycle can begin, installation.\nDepending on the type of download, the installation process may differ. For archives, we unpack the\ntool to `~/.proto/tools//`. In the future, we'll support building from source.\n\nFrom here, we make these tools globally available by prepending `~/.proto/shims` and `~/.proto/bin`\nto `PATH` (typically as part of your shell profile). Continue reading for more about these folders.\n\n## Supported tools\n\nThe following tools are [officially supported](/docs/proto/tools) in proto via moonrepo. Additional\ntools can be supported through [third-party plugins](/docs/proto/plugins).\n\n+ npm, pnpm, yarn\n\n+ pip, poetry, uv\n\n... with [0 more proto plugins](/docs/proto/tools#third-party), and over [800 asdf plugins](/docs/proto/tool-spec#asdf)...\n\n## Supported targets\n\nBecause proto is written in Rust, we only support targets that are explicitly compiled for, which\nare currently:\n\nOperating system Architecture Target\n\nmacOS 64-bit Intel `x86_64-apple-darwin`\n\nmacOS 64-bit ARM `aarch64-apple-darwin`\n\nLinux 64-bit Intel GNU `x86_64-unknown-linux-gnu`\n\nLinux 64-bit Intel musl `x86_64-unknown-linux-musl`\n\nLinux 64-bit ARM GNU `aarch64-unknown-linux-gnu`\n\nLinux 64-bit ARM musl `aarch64-unknown-linux-musl`\n\nWindows 64-bit Intel `x86_64-pc-windows-msvc`\n\n## /docs/proto/commands/activate\n\nSource: https://moonrepo.dev/docs/proto/commands/activate\n\n# activate\n\nv0.38.0\n\nThe `proto activate ` command will activate proto for the current shell session, by exporting\nenvironment variables and prepending `PATH` for each tool configured in the current directory.\nActivation is ran each time the current directory changes using a shell hook.\n\ninfo\n\nLearn more about\n[shell activation in the official workflow documentation](/docs/proto/workflows#shell-activation)!\n\n### Arguments\n\n- `` - The shell to activate for.\n\n### Options\n\n- `--export` - Print the activate instructions in shell-specific syntax.\n\n- `--json` - Print the activate instructions in JSON format.\n\n- `--no-bin` - Do not include `~/.proto/bin` when appending `PATH`.\n\n- `--no-shim` - Do not include `~/.proto/shims` when prepending `PATH`.\n\n- `--no-init` - Do not trigger activation when initialized in the shell, and instead wait for a cd/prompt change. v0.50.0\n\n### Caveats\n\n- Only tools that have a [version configured in `.prototools`](/docs/proto/config#pinning-versions) will be activated.\n\n- Tool versions configured in the global `~/.proto/.prototools` are not included by default. Pass `--config-mode all` during activation to include them. Do note that this will worsen performance depending on the number of tools.\n\n### Setup\n\nThe following activation steps should be added after all environment variable and `PATH`\nmodifications have happened in your shell, typically at the end of your shell profile.\n\n#### Bash\n\nAdd the following line to the end of your `~/.bashrc` or `~/.bash_profile`.\n\n```\neval \"$(proto activate bash)\"\n```\n\n#### Elvish\n\nGenerate the hook:\n\n```\nproto activate elvish > ~/.elvish/lib/proto-hook.elv\n```\n\nThen add the following line to your `~/.elvish/rc.elv` file.\n\n```\nuse proto-hook\n```\n\n#### Fish\n\nAdd the following line to the end of your `~/.config/fish/config.fish`.\n\n```\nproto activate fish | source\n```\n\n#### Murex\n\nAdd the following line to the end of your `~/.murex_profile`.\n\n```\nproto activate murex -> source\n```\n\n#### Nu\n\nGenerate the hook:\n\n```\n(proto activate nu) | save ~/.config/nushell/proto-hook.nu\n```\n\nThen add the following line to your `~/.config/nushell/config.nu` file.\n\n```\nuse proto-hook.nu\n```\n\n#### Pwsh\n\nAdd the following line to the end of your profile (`$PROFILE`).\n\n```\nproto activate pwsh | Out-String | Invoke-Expression\n```\n\n#### Zsh\n\nAdd the following line to the end of your `~/.zshrc`.\n\n```\neval \"$(proto activate zsh)\"\n```\n\n## /docs/proto/commands/alias\n\nSource: https://moonrepo.dev/docs/proto/commands/alias\n\n# alias\n\nThe `proto alias   ` (or `proto a`) command will define a custom alias that\nmaps to a specific version for the provided tool. Aliases can be used anywhere a version is\naccepted.\n\n```\n$ proto alias node work 16.16\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--to` to customize\nthe location.\n\n### Arguments\n\n- `` - Type of tool.\n\n- `` - Name of the alias. Supports alphanumeric chars.\n\n- `` - Version to map to the alias.\n\n## Options\n\n- `--to` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n## /docs/proto/commands/bin\n\nSource: https://moonrepo.dev/docs/proto/commands/bin\n\n# bin\n\nThe `proto bin  [version]` command will return an absolute path to a tool's binary within the\ntoolchain. When a tool has not been installed, or a version cannot be resolved, the command will\nexit with a failure.\n\n```\n$ proto bin node 16.10.0/Users/example/.proto/tools/node/16.10.0/bin/node\n```\n\nThis command can also return directories using the `--dir` option.\n\n```\n$ proto bin node 16.10.0 --dir exes/Users/example/.proto/tools/node/16.10.0/bin$ proto bin node 16.10.0 --dir globals/Users/example/.proto/tools/node/globals/bin\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n- `[version]` - Version of tool. If not provided, will attempt to [detect the version](/docs/proto/detection).\n\n### Options\n\n- `--all` - Return multiple paths, separated by newlines, instead of the first path. v0.50.0\n\n- `--dir ` - Return a directory instead of of the main file. v0.50.0 `exes` - Returns the executable's directory.\n\n- `globals` - Returns the globals/packages directory.\n\n- `--bin` - When applicable, return the `~/.proto/bin` path.\n\n- `--shim` - When applicable, return the `~/.proto/shims` path.\n\n## /docs/proto/commands/clean\n\nSource: https://moonrepo.dev/docs/proto/commands/clean\n\n# clean\n\nThe `proto clean` command can be used to uninstall stale and unused tools, plugins, and more. By\ndefault, it will remove items that haven't been used in the last 30 days.\n\n```\n$ proto clean\n```\n\nFurthermore, the command can be used to target a specific artifact type.\n\n```\n$ proto clean plugins\n```\n\n### Arguments\n\n- `[target]` - Type of target. Accepts `cache`, `plugins`, `temp`, or `tools`. v0.44.0\n\n### Options\n\n- `--days` - Number of days before a tool is considered stale.\n\n- `--json` - Print the clean result in JSON format. v0.44.0\n\n- `--yes` - Avoid and confirm all prompts.\n\n## /docs/proto/commands/completions\n\nSource: https://moonrepo.dev/docs/proto/commands/completions\n\n# completions\n\nThe `proto completions` command will generate proto command and argument completions for your\ncurrent shell. This command will write to stdout, which can then be redirected to a file of your\nchoice.\n\n```\n$ proto completions > ./path/to/write/to\n```\n\n### Options\n\n- `--shell` - Shell to explicitly generate for.\n\n### Examples\n\n- Bash\n- Fish\n- Zsh\n\nIf using [bash-completion](https://github.com/scop/bash-completion).\n\n```\nmkdir -p ~/.bash_completion.dproto completions > ~/.bash_completion.d/proto.sh\n```\n\nOtherwise write the file to a common location, and source it in your profile.\n\n```\nmkdir -p ~/.bash_completionsproto completions > ~/.bash_completions/proto.sh# In your profilesource ~/.bash_completions/proto.sh\n```\n\nWrite the file to Fish's completions directory.\n\n```\nmkdir -p ~/.config/fish/completionsproto completions > ~/.config/fish/completions/proto.fish\n```\n\nIf using [oh-my-zsh](https://ohmyz.sh/) (the `_` prefix is required).\n\n```\nmkdir -p ~/.oh-my-zsh/completionsproto completions > ~/.oh-my-zsh/completions/_proto# Reload shell (or restart terminal)omz reload\n```\n\n## /docs/proto/commands/debug\n\nSource: https://moonrepo.dev/docs/proto/commands/debug\n\n- [Home](/)\n- Commands\n- [debug](/docs/proto/commands/debug)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# debug\n\nOperations for debugging the current proto environment.\n\n[ configThe proto debug config command will list all .prototools configuration files (in TOML format)](/docs/proto/commands/debug/config)\n\n[ envThe proto debug env command will print information about your current proto environment. Primarily](/docs/proto/commands/debug/env)\n\n[completions](/docs/proto/commands/completions)\n\n[config](/docs/proto/commands/debug/config)\n\n## /docs/proto/commands/debug/config\n\nSource: https://moonrepo.dev/docs/proto/commands/debug/config\n\n# debug config\n\nv0.25.0\n\nThe `proto debug config` command will list all `.prototools` configuration files (in TOML format)\nthat have been loaded, in order of precedence, with the final merged configuration printed at the\nend.\n\n```\n$ proto debug config/Users/name/.proto/.prototools   node = \"20.0.0\"  npm = \"bundled\"  [tools.node.aliases]  stable = \"~20\"  [settings]  auto-clean = falseFinal configuration   node = \"20.0.0\"  npm = \"bundled\"  [tools.node.aliases]  stable = \"~20\"  [plugins.tools]  node = \"https://github.com/moonrepo/node-plugin/releases/download/v0.6.1/node_plugin.wasm\"  [settings]  auto-clean = false  auto-install = false  detect-strategy = \"first-available\"  [settings.http]  allow-invalid-certs = false  proxies = []\n```\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n## /docs/proto/commands/debug/env\n\nSource: https://moonrepo.dev/docs/proto/commands/debug/env\n\n# debug env\n\nv0.26.0\n\nThe `proto debug env` command will print information about your current proto environment. Primarily\nthe store location, relevant file paths, and environment variables.\n\n```\n$ proto debug envStore   Root: /Users/name/.proto  Bins: /Users/name/.proto/bin  Shims: /Users/name/.proto/shims  Plugins: /Users/name/.proto/plugins  Tools: /Users/name/.proto/tools  Temp: /Users/name/.proto/tempEnvironment   Proto version: 0.44.0  Operating system: macos  Architecture: arm64  Config sources:    - /Users/name/Projects/example/.prototools    - /Users/name/.proto/.prototools  Virtual paths:    /userhome = /Users/name    /proto = /Users/name/.proto  Environment variables:    PROTO_APP_LOG = proto=info,schematic=info,starbase=info,warpgate=info,extism::pdk=info    PROTO_HOME = /Users/name/.proto    PROTO_OFFLINE_TIMEOUT = 750    PROTO_VERSION = 0.44.0\n```\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n## /docs/proto/commands/diagnose\n\nSource: https://moonrepo.dev/docs/proto/commands/diagnose\n\n# diagnose\n\nv0.37.0\n\nThe `proto diagnose` command will diagnose your proto installation for any potential issues. Issues\nare categorized into errors and warnings, with the former being a must fix, and the latter being a\nmaybe fix (depending on your usage of proto).\n\n```\n$ proto diagnoseShell: zshShell profile: /Users/name/.zshrcErrors   - Issue: Bin directory /Users/name/.proto/bin was found BEFORE the shims directory /Users/name/.proto/shims on PATH    Resolution: Ensure the shims path comes before the bin path in your shell    Comment: Runtime version detection will not work correctly unless shims are used\n```\n\n### Options\n\n- `--shell` - The shell to diagnose (will detect automatically).\n\n- `--json` - Print the diagnosis in JSON format.\n\n## /docs/proto/commands/exec\n\nSource: https://moonrepo.dev/docs/proto/commands/exec\n\n# exec\n\nv0.53.0\n\nThe `proto exec  -- ` (or `proto x`) command will activate a temporary\nenvironment by loading and initializing any number of tools, and then execute an arbitrary command\nwithin that environment.\n\n```\n$ proto exec node pnpm -- pnpm run dev\n```\n\nTools will automatically detect a version to execute with based on loaded `.prototools`, but the\nversion can be provided inline by suffixing the tool with `@`.\n\n```\n$ proto exec node@24.2 pnpm@10 -- pnpm run dev\n```\n\n### Shell support\n\nBy default, the command will not be executed in a shell, and will be excuted in the context of the\nparent process. If you want to execute the command within a shell (using `-c`), you can use the\n`--shell` option.\n\n```\n$ proto exec node pnpm --shell bash --\n```\n\nIf your command contains special characters, complex expressions, or shell specific syntax, you may\nneed to pass `--raw` to avoid quoting/escaping issues.\n\n```\n$ proto exec node pnpm --shell bash --raw --\n```\n\nFurthermore, if you want to launch an interactive shell session with the activated environment, you\ncan pass the shell command itself as the exec command.\n\n```\n$ proto exec node pnpm -- bash\n```\n\n### Arguments\n\n- `` - List of tool identifiers with optional version.\n\n- `` - Command to execute within the environment. Must be passed after a `--` separator.\n\n### Options\n\n- `--tools-from-config` - Inherit tools to initialize from `.prototools` configs, instead of passing an explicit list.\n\n- `--raw` - Execute the command as-is without quoting or escaping when using `--shell`.\n\n- `--shell` - Shell to execute the command with (e.g. `bash` or `pwsh`).\n\n## /docs/proto/commands/install\n\nSource: https://moonrepo.dev/docs/proto/commands/install\n\n# install\n\nThe `proto install` (or `proto i`) command can be used to install one or many tools.\n\n### Installing all toolsv0.39.0\n\nThe `proto install` command (without arguments) will download and install all tools and plugins\nfrom all parent [`.prototools`](/docs/proto/config) configuration files, and any\n[versions detected](/docs/proto/detection) in the current working directory (if not defined in\n`.prototools`).\n\n```\n$ proto install\n```\n\nBy default, this command does not install tools for versions pinned in the global\n`~/.proto/.prototools` file. Pass `--config-mode all` to include them.\n\n### Installing one tool\n\nThe `proto install  [version]` command will download and install a single tool by unpacking\ntheir archive to `~/.proto/tools/`. If the tool has already been installed, the command will\nexit early.\n\nThe command is also smart enough to resolve partial versions, so 1, 1.2, and 1.2.3 are all\nacceptable. It even supports aliases when applicable, like `latest`, `next`, `beta`, etc. To install\na canary release, use `canary`.\n\n```\n$ proto install deno$ proto install deno 1.31$ proto install deno canary\n```\n\n#### Pinning the version\n\nBy default this command will only install the tool into `~/.proto/tools` but will not make the\nbinary available. If you would like to also pin the resolved version to a `.prototools` file, use\nthe `--pin` option.\n\n```\n# ./.prototools$ proto install bun --pin$ proto install bun --pin local# ~/.proto/.prototools$ proto install bun --pin global# ~/.prototools$ proto install bun --pin user\n```\n\n### Handling plugin hooks\n\nSome tools run [post-install hooks](/docs/proto/tools) that support arbitrary arguments that can be passed\nafter `--`.\n\n```\n$ proto install go -- --no-gobin\n```\n\n### Arguments\n\n- One tool `[tool]` - Type of tool.\n\n- `[version]` - Version of tool. Defaults to a pinned version in `.prototools` or \"latest\".\n\n- `[-- ]` - Additional arguments to pass to post-install hooks.\n\n### Options\n\n- `--force` - Force install, even if already installed.\n\n- `--update-lockfile` - Don't inherit a version from the lockfile and update the existing record. v0.51.0\n\n- One tool `--build` - Build from source if available. v0.45.0\n\n- `--no-build` - Download a pre-built if available. v0.45.0\n\n- `--pin` - Pin the resolved version and create a symlink in `~/.proto/bin`. Accepts a boolean (pins locally by default), or the string \"global\", or the string \"local\".\n\n## /docs/proto/commands/list\n\nSource: https://moonrepo.dev/docs/proto/commands/list\n\n# list\n\ndanger\n\nThis command was removed in v0.44, use [`proto versions`](/docs/proto/commands/versions) instead!\n\nThe `proto list ` (or `proto ls`) command will list installed versions by scanning the\nmanifest at `~/.proto/tools//manifest.json` for possible versions.\n\n```\n$ proto list node16.16.018.2.019.4.0\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--aliases` - Include aliases in the list.\n\n## /docs/proto/commands/list-remote\n\nSource: https://moonrepo.dev/docs/proto/commands/list-remote\n\n# list-remote\n\ndanger\n\nThis command was removed in v0.44, use [`proto versions`](/docs/proto/commands/versions) instead!\n\nThe `proto list-remote ` (or `proto lsr`) command will list available versions by resolving\nversions from the tool's remote release manifest.\n\n```\n$ proto list-remote node...18.10.018.11.018.12.018.12.118.13.018.14.018.14.118.14.219.0.019.0.119.1.019.2.019.3.019.4.019.5.019.6.019.6.119.7.0\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--aliases` - Include aliases in the list.\n\n## /docs/proto/commands/outdated\n\nSource: https://moonrepo.dev/docs/proto/commands/outdated\n\n# outdated\n\nv0.19.0\n\nThe `proto outdated` command will load all [`.prototools`](/docs/proto/config) files and check for newer\n(matching configured range) and latest versions of each configured tool. Will also include the\nconfiguration file in which the version has been configured.\n\n```\n$ proto outdated Tool      Current Newest  Latest  Config                               bun       1.1.42  1.1.42  1.1.42  /Users/name/.proto/.prototools       node      23.5.0  23.5.0  23.5.0  /Users/name/.proto/.prototools       npm       10.7.0  10.7.0  11.0.0  /Users/name/.proto/.prototools       rust      1.83.0  1.83.0  1.83.0  /Users/name/.proto/.prototools       yarn      3.6.3   3.8.7   4.5.1   /Users/name/.proto/.prototools      \n```\n\nBy default, this command does not check tools for versions pinned in the global\n`~/.proto/.prototools` file. Pass `--config-mode all` to include them.\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n- `--latest` - When updating versions with `--update`, use the latest version instead of newest.\n\n- `--update` - Update and write newest/latest versions to their respective configuration.\n\n- `--yes` - Avoid and confirm all prompts. v0.44.0\n\n## /docs/proto/commands/pin\n\nSource: https://moonrepo.dev/docs/proto/commands/pin\n\n# pin\n\nv0.19.0\n\nThe `proto pin  ` command will pin a version (or alias) of a tool. This version will\nbe used when attempting to [detect a version](/docs/proto/detection).\n\n```\n$ proto pin go 1.20$ proto pin python 3.14 --to=global$ proto pin node lts --resolve$ proto pin npm latest --resolve --tool-native\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--to` to customize\nthe location, or use the `--tool-native` option to use a location unique to the tool.\n\n### Arguments\n\n- `` - Type of tool.\n\n- `` - Version of tool.\n\n### Options\n\n- `--resolve` - Resolve the version to a fully-qualified semantic version before pinning.\n\n- `--to` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n- `--tool-native` - Pins the version in a tool specific location. Examples: JavaScript tooling (Node, Bun, Deno, npm, pnpm, Yarn, etc) Pins version in the `devEngines` field in the `package.json` file.\n\n- v0.55.0\n\n## /docs/proto/commands/plugin\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin\n\n- [Home](/)\n- Commands\n- [plugin](/docs/proto/commands/plugin)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# plugin\n\nOperations for managing tools and plugins.\n\n[ addThe proto plugin add command will add the provided ID and plugin locator string to](/docs/proto/commands/plugin/add)\n\n[ infoThe proto plugin info command will display information about a tool and its plugin.](/docs/proto/commands/plugin/info)\n\n[ listThe proto plugin list [...id] command will list all available and configured plugins, for both](/docs/proto/commands/plugin/list)\n\n[ removeThe proto plugin remove command will remove the provided tool ID from the [plugins] section](/docs/proto/commands/plugin/remove)\n\n[ searchThe proto plugin search command will search for plugins provided by the community, based](/docs/proto/commands/plugin/search)\n\n[pin](/docs/proto/commands/pin)\n\n[add](/docs/proto/commands/plugin/add)\n\n## /docs/proto/commands/plugin/add\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/add\n\n# plugin add\n\nv0.23.0\n\nThe `proto plugin add\n` command will add the provided ID and plugin locator string to\nthe `[plugins]` section of a chosen `.prototools`.\n\n```\n$ proto plugin add node \"https://github.com/moonrepo/node-plugin/releases/latest/download/node_plugin.wasm\"\n```\n\nLearn more about [plugin locator strings](/docs/proto/plugins#enabling-plugins).\n\n### Arguments\n\n- `` - ID of the tool.\n\n- `` - How to locate the plugin.\n\n### Options\n\n- `--to` - [Location of `.prototools`](/docs/proto/config#locations) to update. v0.41.0\n\n- `--type` - Type of plugin to add, either `tool` (default) or `backend`. v0.52.0\n\n## /docs/proto/commands/plugin/info\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/info\n\n# plugin info\n\nv0.23.0\n\nThe `proto plugin info ` command will display information about a tool and its plugin.\n\n```\n$ proto plugin info nodePlugin   ID: node  Name: Node.js  Type: Language  Version: 0.13.0  Source URL: https://github.com/moonrepo/plugins/releases/download/node_tool-v0.13.0/node_tool.wasmInventory   Detected version: 23.5.0  Fallback version: 23.5.0  Store directory: /Users/name/.proto/tools/node  Executable file: /Users/name/.proto/tools/node/23.5.0/bin/node  Executables directory: /Users/name/.proto/tools/node/23.5.0/bin  Global packages directory: /Users/name/.proto/tools/node/globals/bin  Shims:    - /Users/name/.proto/shims/node  Binaries:    - /Users/name/.proto/bin/node    - /Users/name/.proto/bin/node-20    - /Users/name/.proto/bin/node-20.15    - /Users/name/.proto/bin/node-20.8    - /Users/name/.proto/bin/node-23    - /Users/name/.proto/bin/node-23.4    - /Users/name/.proto/bin/node-23.5  Installed versions:    20.8.0 - installed 12/19/24, last used 12/19/24    20.15.0 - installed 12/25/24, last used 12/25/24    23.4.0 - installed 12/19/24, last used 12/19/24    23.5.0 - installed 12/25/24, last used 12/25/24, fallback version  Remote aliases:    argon = 4.9.1    boron = 6.17.1    carbon = 8.17.0    dubnium = 10.24.1    erbium = 12.22.12    fermium = 14.21.3    gallium = 16.20.2    hydrogen = 18.20.5    iron = 20.18.1    jod = 22.12.0    latest = 23.5.0    stable = 22.12.0Configuration   Local aliases:    example = 19.0.0  Environment variables:   Settings: \n```\n\n### Arguments\n\n- `` - ID of tool.\n\n### Options\n\n- `--json` - Print the info in JSON format.\n\n## /docs/proto/commands/plugin/list\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/list\n\n# plugin list\n\nv0.23.0\n\nThe `proto plugin list [...id]` command will list all available and configured plugins, for both\nthird-party and built-in tools. Will load all `./.prototools` traversing upwards, and the\n`~/.proto/.prototools` file.\n\nFurthermore, it can list tool information, along with their installed versions, relevant timestamps,\navailable aliases, and store location.\n\n```\n$ proto plugin list --versionsBun   ID: bun  Source URL: https://github.com/moonrepo/plugins/releases/download/bun_tool-v0.14.0/bun_tool.wasm  Store directory: /Users/miles/.proto/tools/bun  Versions:    1.1.42 - installed 12/25/24, fallback versionDeno   ID: deno  Source URL: https://github.com/moonrepo/plugins/releases/download/deno_tool-v0.13.0/deno_tool.wasm  Store directory: /Users/miles/.proto/tools/deno  Versions:    1.30.0 - installed 02/01/24, last used 11/28/24    1.40.0 - installed 02/01/24, last used 12/09/24    1.43.1 - installed 12/25/24, fallback versionGo   ID: go  Source URL: https://github.com/moonrepo/plugins/releases/download/go_tool-v0.14.0/go_tool.wasm  Store directory: /Users/miles/.proto/tools/go  Versions:    1.18.0 - installed 12/25/24, fallback version    1.19.0 - installed 12/22/24    1.20.12 - installed 12/09/23    1.23.4 - installed 12/24/24\n```\n\nA list of tool IDs can be provided to filter the output list.\n\n```\n$ proto plugin list node npm\n```\n\n### Arguments\n\n- `[id...]` - IDs of tools.\n\n### Options\n\n- `--aliases` - Print the list with resolved aliases.\n\n- `--versions` - Print the list with installed versions.\n\n- `--json` - Print the list in JSON format.\n\n## /docs/proto/commands/plugin/remove\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/remove\n\n# plugin remove\n\nv0.23.0\n\nThe `proto plugin remove ` command will remove the provided tool ID from the `[plugins]` section\nof the chosen (`.prototools`).\n\n```\n$ proto plugin remove node\n```\n\nBuilt-in plugins cannot be removed!\n\n### Arguments\n\n- `` - ID of the tool.\n\n### Options\n\n- `--from` - [Location of `.prototools`](/docs/proto/config#locations) to update. v0.41.0\n\n- `--type` - Type of plugin to remove, either `tool` (default) or `backend`. v0.52.0\n\n## /docs/proto/commands/plugin/search\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/search\n\n# plugin search\n\nv0.36.0\n\nThe `proto plugin search ` command will search for plugins provided by the community, based\non the provided query string. Built-in plugins are not searchable.\n\n```\n$ proto plugin search moonSearch results for: moonLearn more about plugins: https://moonrepo.dev/docs/proto/plugins Plugin      Author    Format Description             Locator                                                              moon        moonrepo  TOML   moon is a multi-        https://raw.githubusercontent.com/moonrepo/moon/master/proto-                                     language build system   plugin.toml                                                                                       and codebase management                                                                                                   tool.                                                                                       \n```\n\n### Arguments\n\n- `` - Query string to match against.\n\n### Options\n\n- `--json` - Print the results in JSON format.\n\n## /docs/proto/commands/regen\n\nSource: https://moonrepo.dev/docs/proto/commands/regen\n\n# regen\n\nv0.27.0\n\nThe `proto regen` command can be used to regenerate all shims in the `~/.proto/shims` directory.\nThis command will also clean the shims directory before regenerating, in an effort to remove\nunexpected or broken shims.\n\n```\n$ proto regen\n```\n\nBy default this will only regenerate shims. If you want to regenerate bins in `~/.proto/bin` as\nwell, pass the `--bin` flag. This will also clean the bins directory before regenerating.\n\n```\n$ proto regen --bin\n```\n\nOnly versions pinned in `~/.proto/.prototools` will be linked as bins.\n\n## Options\n\n- `--bin` - Also recreate `~/.proto/bin` symlinks.\n\n## /docs/proto/commands/run\n\nSource: https://moonrepo.dev/docs/proto/commands/run\n\n# run\n\nThe `proto run  [version]` (or `proto r`) command will run a tool after\n[detecting a version](/docs/proto/detection) from the environment.\n\n```\n# Run and detect version from environment$ proto run bun# Run with explicit version$ proto run bun 0.5.3# Run with version from environment variable$ PROTO_BUN_VERSION=0.5.3 proto run bun\n```\n\nArguments can be passed to the underlying tool binary by providing additional arguments after `--`.\n\n```\n$ proto run bun -- run ./script.ts# When using the binary on PATH$ bun run ./script.ts\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n- `[version]` - Version of tool. If not provided, will attempt to detect the version from the environment.\n\n## /docs/proto/commands/setup\n\nSource: https://moonrepo.dev/docs/proto/commands/setup\n\n# setup\n\nThe `proto setup` command will setup proto in your current shell by modifying an applicable profile\nfile and appending proto's bin directory to `PATH`. If a shell could not be detected, you'll be\nprompted to select one.\n\n```\n$ proto setup\n```\n\nDuring setup, the following profiles will be searched or prompted for.\n\n- Bash `~/.bash_profile`\n\n- `~/.bashrc`\n\n- `~/.profile`\n\n- Elvish `~/.elvish/rc.elv`\n\n- `~/.config/elvish/rc.elv`\n\n- Fish `~/.config/fish/config.fish`\n\n- Ion `~/.config/ion/initrc`\n\n- Murex `~/.murex_preload`\n\n- `~/.murex_profile`\n\n- Nu `~/.config/nushell/env.nu`\n\n- `~/.config/nushell/config.nu`\n\n- PowerShell Windows `~\\Documents\\PowerShell\\Microsoft.PowerShell_profile.ps1`\n\n- `~\\Documents\\PowerShell\\Profile.ps1`\n\n- Unix `~/.config/powershell/Microsoft.PowerShell_profile.ps1`\n\n- `~/.config/powershell/profile.ps1`\n\n- Xonsh `~/.config/xonsh/rc.xsh`\n\n- `~/.xonshrc`\n\n- Zsh `~/.zprofile`\n\n- `~/.zshenv`\n\n- `~/.zshrc`\n\n### Windows support\n\nIn addition to updating a shell profile file (most likely PowerShell), we'll also modify the `PATH`\n(or `Path`) system environment variable, by prepending the `~/.proto/shims` and `~/.proto/bin`\npaths.\n\nIf you would like to opt-out of this behavior, pass the `--no-modify-path` flag.\n\n### Options\n\n- `--shell` - Shell to explicitly setup for.\n\n- `--no-modify-profile` / `PROTO_NO_MODIFY_PROFILE` - Don't update a shell profile file.\n\n- `--no-modify-path` / `PROTO_NO_MODIFY_PATH` - Don't update the system `PATH` environment variable (Windows only).\n\n- `--yes` - Avoid interactive prompts and use defaults.\n\n## /docs/proto/commands/status\n\nSource: https://moonrepo.dev/docs/proto/commands/status\n\n# status\n\nv0.34.0\n\nThe `proto status` command will list all tools that are currently active for a target directory,\nwhat versions of those tools are resolved to, and the configuration file in which they are defined.\n\n```\n$ proto status Tool      Configured Resolved  Installed                           Config                              bun       1.1.42     1.1.42    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      bun/1.1.42                                                              deno      1.43.1     1.43.1    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      deno/1.43.1                                                             node      23.5.0     23.5.0    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      node/23.5.0                                                             npm       ~10.7      10.7.0    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      npm/10.7.0                                                              python    3.12.0     3.12.0    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      python/3.12.0                                                           yarn      3.6.3      3.6.3     /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      yarn/3.6.3                                                             \n```\n\nBy default, this command does not check tools for versions pinned in the global\n`~/.proto/.prototools` file. Pass `--config-mode all` to include them.\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n## /docs/proto/commands/unalias\n\nSource: https://moonrepo.dev/docs/proto/commands/unalias\n\n# unalias\n\nThe `proto unalias  ` (or `proto ua`) command will remove a custom alias for the\nprovided tool.\n\n```\n$ proto unalias node work\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--from` to customize\nthe location.\n\n### Arguments\n\n- `` - Type of tool.\n\n- `` - Name of the alias. Supports alphanumeric chars.\n\n## Options\n\n- `--from` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n## /docs/proto/commands/uninstall\n\nSource: https://moonrepo.dev/docs/proto/commands/uninstall\n\n# uninstall\n\nThe `proto uninstall  [version]` (or `proto ui`) command will uninstall and remove a tool from\n`~/.proto/tools/`. If the tool has not been installed, the command will exit early.\n\n```\n# Remove a specific version$ proto uninstall deno 1.31# Remove all versions$ proto uninstall deno\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n- `[version]` - Version of tool.\n\n## /docs/proto/commands/unpin\n\nSource: https://moonrepo.dev/docs/proto/commands/unpin\n\n# unpin\n\nv0.36.0\n\nThe `proto unpin ` command will unpin a version of a tool.\n\n```\n$ proto unpin go$ proto unpin node --tool-native\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--from` to customize\nthe location.\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--from` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n- `--tool-native` - Use a tool specific location, like the `devEngines` field in the `package.json` for JavaScript tools. v0.55.0\n\n## /docs/proto/commands/upgrade\n\nSource: https://moonrepo.dev/docs/proto/commands/upgrade\n\n# upgrade\n\nThe `proto upgrade` (or `proto up`) command can be used to upgrade your current proto binary to the\nlatest version, or check if you're currently outdated.\n\n```\n$ proto upgrade# Up/downgrade to a specific version$ proto upgrade 0.39.0\n```\n\ninfo\n\nThe previous binary will be moved to `~/.proto/tools/proto/`, while the new binary will be\ninstalled to `~/.proto/bin`.\n\n### Arguments\n\n- `` - The version of proto to explicitly upgrade or downgrade to. v0.39.3\n\n### Options\n\n- `--check` - Check if there's a new version without executing the upgrade.\n\n- `--json` - Print the upgrade information as JSON.\n\n## /docs/proto/commands/use\n\nSource: https://moonrepo.dev/docs/proto/commands/use\n\n# use\n\ndanger\n\nThis command has been deprecated and its functionality was merged into [`proto install`](/docs/proto/commands/install)\nin v0.39. Use that command instead!\n\nThe `proto use` (or `proto u`) command will download and install all tools and plugins from all\nparent [`.prototools`](/docs/proto/config) configuration files, and any [versions detected](/docs/proto/detection) in\nthe current working directory (if not defined in `.prototools`).\n\n```\n$ proto use\n```\n\nThis command does not install tools for versions pinned in the global `~/.proto/.prototools`\nfile.\n\n## /docs/proto/commands/versions\n\nSource: https://moonrepo.dev/docs/proto/commands/versions\n\n# versions\n\nv0.44.0\n\nThe `proto versions ` command will list available versions by resolving versions from the\ntool's remote release manifest. Furthermore, if a version has been installed locally, it will be\ndenoted with a timestamp.\n\n```\n$ proto versions node...22.0.022.1.022.2.022.3.022.4.022.4.122.5.0 - installed 12/25/2422.5.122.6.022.7.022.8.022.9.022.10.022.11.022.12.023.0.023.1.023.2.023.3.023.4.0 - installed 12/19/2423.5.0 - installed 12/25/24\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--aliases` - Include aliases in the list.\n\n- `--installed` - Only display installed versions.\n\n- `--json` - Print the versions and aliases in JSON format.\n\n## /docs/proto/config\n\nSource: https://moonrepo.dev/docs/proto/config\n\n# Configuration\n\nWe support configuration at both the project-level and user-level using a\n[TOML](https://toml.io/en/) based `.prototools` file. This file can be used to pin versions of\ntools, provide tool specific configuration, enable new tools via plugins, define proto settings, and\nmore.\n\n## Locationsv0.41.0\n\nproto supports 3 locations in which a `.prototools` file can exist. These locations are used\nthroughout the command line and proto's own settings.\n\n- `local` -> `./.prototools`, `.\\.prototools` (current directory)\n\n- `global` -> `~/.proto/.prototools`, `%USERPROFILE%\\.proto\\.prototools`\n\n- `user` -> `~/.prototools`, `%USERPROFILE%\\.prototools`\n\nLocal is a bit of a misnomer as a `.prototools` file can theoretically exist in any directory, but\nwhen reading/writing to a file, `local` refers to the current working directory.\n\n### Where to configure?\n\nWith so many locations to store proto configuration, the question of where to store certain\nconfigurations become blurred, especially when [resolution](#resolution-mode) comes into play. We\nsuggest the following locations:\n\n- Default/fallback [versions](#pinning-versions) of tools -> `global`\n\n- Project specific [versions](#pinning-versions) of tools -> `local`\n\n- Project specific [settings](#settings) -> `local`\n\n- Shared/developer [settings](#settings) -> `user`\n\n- Non-project related -> `user`\n\n## Resolution modev0.40.0\n\nWhen a `proto` command or shim is ran, we must find and load all applicable `.prototools` files. We\nthen deeply merge all of these configuration files into a final configuration object, with the\ncurrent directory taking highest precedence.\n\nThe order in which to resolve configuration can be defined using the `--config-mode` (`-c`) command\nline option, or the `PROTO_CONFIG_MODE` environment variable. The following 4 modes are supported:\n\n### `global`\n\nIn this mode, proto will only load the `~/.proto/.prototools` file. This \"global\" file acts as\nconfiguration at the user-level and allows for fallback settings.\n\n```\n~/.proto/.prototools\n```\n\n### `local`\n\nIn this mode, proto will only load the `.prototools` file in the current directory.\n\n```\n./.prototools\n```\n\n### `upwards`\n\nIn this mode, proto will traverse upwards starting from the current directory, and load\n`.prototools` within each directory, until we reach the system root or the user directory (`~`),\nwhichever comes first.\n\n```\n~/Projects/app/.prototools (cwd)~/Projects/.prototools~/.prototools\n```\n\nThis is the default mode for the [`activate`](/docs/proto/commands/activate),\n[`install`](/docs/proto/commands/install), [`outdated`](/docs/proto/commands/outdated), and\n[`status`](/docs/proto/commands/status) commands.\n\n### `upwards-global` / `all`\n\nThis mode works exactly like [`upwards`](#upwards) but with the functionality of [`global`](#global)\nas well. The global `~/.proto/.prototools` file is appended as the final entry.\n\n```\n~/Projects/app/.prototools (cwd)~/Projects/.prototools~/.prototools~/.proto/.prototools\n```\n\nThis is the default mode for all other commands not listed above in `upwards`.\n\n## Environment modev0.29.0\n\nWe also support environment specific configuration, such as `.prototools.production` or\n`.prototools.development`, when the `PROTO_ENV` environment variable is set. This is useful for\ndefining environment specific aliases, or tool specific configuration.\n\nThese environment aware settings take precedence over the default `.prototools` file, for the\ndirectory it's located in, and are merged in the same way as the default configuration. For example,\nthe lookup order would be the following when `PROTO_ENV=production`:\n\n```\n~/Projects/.prototools.production~/Projects/.prototools~/.prototools.production~/.prototools~/.proto/.prototools\n```\n\nThe global `~/.proto/.prototools` file does not support environment modes.\n\n## Pinning versions\n\nproto supports pinning versions of tools on a per-directory basis through our `.prototools`\nconfiguration file. This file takes precedence during [version detection](/docs/proto/detection) and can be\ncreated/updated with [`proto pin`](/docs/proto/commands/pin).\n\nAt its most basic level, you can map tools to specific versions, for the directory the file is\nlocated in. A [version](/docs/proto/tool-spec) can either be a fully-qualified version, a partial version, a\nrange or requirement, or an alias.\n\n.prototools\n\n```\nnode = \"16.16.0\"npm = \"9\"go = \"~1.20\"rust = \"stable\"\n```\n\n### Lock `proto` versionv0.39.0\n\nYou can also pin the version of proto that you want all tools to execute with by adding a `proto`\nversion entry. This approach uses shims and dynamic version detection like other tools.\n\n.prototools\n\n```\nproto = \"0.38.0\"\n```\n\n## Available settings\n\n### `[env]`v0.29.0\n\nThis setting is a map of environment variables that will be applied to all tools when they are\nexecuted, or when [`proto activate`](/docs/proto/commands/activate) is ran in a shell profile. Variables\ndefined here will not override existing environment variables (either passed on the command line,\nor inherited from the shell).\n\n.prototools\n\n```\n[env]DEBUG = \"*\"\n```\n\nAdditionally, `false` can be provided as a value, which will remove the environment variable. This\nis useful for removing inherited shell variables.\n\n.prototools\n\n```\n[env]DEBUG = false\n```\n\nVariables also support substitution using the syntax `${VAR_NAME}`. When using substitution,\nvariables in the current process and merged `[env]` can be referenced. Recursive substitution is not\nsupported!\n\nThis functionality enables per-directory environment variables!\n\n#### `file`v0.43.0\n\nThis is a special field that points to a dotenv file, relative from the current configuration file,\nthat will be loaded into the environment variables mapping. Variables defined in a dotenv file will\nbe loaded before variables manually defined within `[env]`.\n\nThis feature utilizes the [dotenvy](https://github.com/allan2/dotenvy) crate for parsing dotfiles.\n\n.prototools\n\n```\n[env]file = \".env\"\n```\n\n### `[settings]`\n\n#### `auto-install`\n\nWhen enabled, will automatically install a missing version of a tool when\n[`proto run`](/docs/proto/commands/run) is ran, instead of erroring. Defaults to `false` or\n`PROTO_AUTO_INSTALL`.\n\n.prototools\n\n```\n[settings]auto-install = true\n```\n\nwarning\n\nThis functionality requires shims (not activation) and will only work after a tool has been\ninstalled at least once. This is because the shim executable handles the interception and the shim\nis created after a tool is installed.\n\n#### `auto-clean`\n\nWhen enabled, will automatically clean up the proto store in the background, by removing unused\ntools and outdated plugins. Defaults to `false` or `PROTO_AUTO_CLEAN`.\n\n.prototools\n\n```\n[settings]auto-clean = true\n```\n\n#### `builtin-plugins`v0.39.0\n\nCan be used to customize the [built-in plugins](/docs/proto/tools#built-in) within proto. Can disable all\nbuilt-ins by passing `false`, or enabling a select few by name. Defaults to `true`, which enables\nall.\n\n.prototools\n\n```\n[settings]# Disable allbuiltin-plugins = false# Enable somebuiltin-plugins = [\"node\", \"bun\"]\n```\n\n#### `cache-duration`v0.50.1\n\nThe duration in seconds in which to cache downloaded plugins. Defaults to 30 days.\n\n.prototools\n\n```\n[settings]cache-duration = 3600\n```\n\n#### `detect-strategy`\n\nThe strategy to use when [detecting versions](/docs/proto/detection). Defaults to `first-available` or\n`PROTO_DETECT_STRATEGY`.\n\n- `first-available` - Will use the first available version that is found. Either from `.prototools` or a tool specific file (`.nvmrc`, etc).\n\n- `prefer-prototools` - Prefer a `.prototools` version, even if found in a parent directory. If none found, falls back to tool specific file.\n\n- `only-prototools` - Only use a version defined in `.prototools`. v0.34.0\n\n.prototools\n\n```\n[settings]detect-strategy = \"prefer-prototools\"\n```\n\n#### `pin-latest`\n\nWhen defined and a tool is installed with the \"latest\" alias, will automatically pin the resolved\nversion to the configured location. Defaults to disabled or `PROTO_PIN_LATEST`.\n\n- `global` - Pins globally to `~/.proto/.prototools`.\n\n- `local` - Pins locally to `./.prototools` in current directory.\n\n- `user` - Pins to the user's `~/.prototools` in their home directory. v0.41.0\n\n.prototools\n\n```\n[settings]pin-latest = \"local\"\n```\n\n#### `telemetry`\n\nWhen enabled, we collect anonymous usage statistics for tool installs and uninstalls. This helps us\nprioritize which tools to support, what tools or their versions may be broken, the plugins currently\nin use, and more. Defaults to `true`.\n\n.prototools\n\n```\n[settings]telemetry = false\n```\n\nThe data we track is publicly available and\n[can be found here](https://github.com/moonrepo/proto/blob/master/crates/cli/src/telemetry.rs).\n\n#### `unstable-lockfile`v0.51.0\n\nWhen enabled, will create a `.protolock` file relative to this configuration file. The lockfile will\nrecord and lock all tools, their versions, and checksums from the configuration file, ensuring\nconsistency across machines, and reliability.\n\n.prototools\n\n```\n[settings]unstable-lockfile = true\n```\n\n#### `unstable-registries`v0.51.0\n\nA list of OCI registries to query for plugins by\n[reference](https://oras.land/docs/concepts/reference). Registries will be queried in the order they\nare configured. Each registry object supports the following fields:\n\n- `registry` - The registry host, e.g. `ghcr.io`.\n\n- `namespace` - The namespace (or organization) that the plugin belongs to.\n\n.prototools\n\n```\n[settings]unstable-registries = [  { registry: \"ghcr.io\", namespace: \"moonrepo\" }]\n```\n\n#### `url-rewrites`v0.50.0\n\nProvides a mechanism for rewriting most URLs used by proto, such as those used for downloading\ntools. This setting accepts a map of [Rust regular expressions](https://docs.rs/regex/latest/regex/)\nto [replacement strings](https://docs.rs/regex/latest/regex/struct.Regex.html#method.replace). When\na URL is rewritten, all entries in the map are applied in order, and all matches are replaced.\n\n.prototools\n\n```\n[settings.url-rewrites]\"github.com/(\\\\w+)/(\\\\w+)\" = \"gh-mirror.corp.com/$1/$2\"\"mo+n\" = \"lunar\"\n```\n\nThe following types of URLs are rewritten:\n\n- Tool download/checksum URLs (even from third-party plugins)\n\n- Plugin download URLs\n\n- Build script URLs\n\n- Archive URLs\n\nThe following are not rewritten:\n\n- Git repository URLs\n\n- proto version check/telemetry URLs\n\n### `[settings.build]`v0.46.0\n\nCan be used to customize the build from source flow.\n\n#### `exclude-packages`\n\nConfigures a list of packages that should be excluded during installation.\n\n.prototools\n\n```\n[settings.build]exclude-packages = [\"git\", \"python3\", \"libssl-dev\"]\n```\n\n#### `install-system-packages`\n\nWhen enabled, will install packages required for building using the system package manager. Defaults\nto `true`.\n\n.prototools\n\n```\n[settings.build]install-system-packages = false\n```\n\n#### `system-package-manager`\n\nCustomize the system package manager to use when installing system packages and their dependencies.\nBy default we attempt to detect the package manager to use from the environment.\n\nThis setting accepts a map, where the key is the name of the\n[operating system](https://doc.rust-lang.org/std/env/consts/constant.OS.html), and the value is the\n[package manager](https://docs.rs/system_env/latest/system_env/enum.SystemPackageManager.html) to\nuse. Both the key and value are in kebab-case.\n\n.prototools\n\n```\n[settings.build.system-package-manager]windows = \"choco\"\n```\n\n#### `write-log-file`\n\nWhen a build has completed, write a log file to the current directory. This is always `true` when a\nbuild fails, but `false` otherwise.\n\n.prototools\n\n```\n[settings.build]write-log-file = true\n```\n\n### `[settings.http]`\n\nCan be used to customize the HTTP client used by proto, primarily for requesting files to download,\navailable versions, and more.\n\n#### `allow-invalid-certs`\n\nWhen enabled, will allow invalid certificates instead of failing. This is an escape hatch and\nshould only be used if other settings have failed. Be sure you know what you're doing! Defaults to\n`false`.\n\n.prototools\n\n```\n[settings.http]allow-invalid-certs = true\n```\n\n#### `proxies`\n\nA list of proxy URLs to use for requests. As an alternative, the `HTTP_PROXY` and `HTTPS_PROXY`\nenvironment variables can be set. URLs that start with `http://` will be considered insecure, while\n`https://` will be secure.\n\n.prototools\n\n```\n[settings.http]proxies = [\"https://internal.proxy\", \"https://corp.net/proxy\"]\n```\n\n#### `secure-proxies`v0.40.3\n\nA list of proxy URLs that will be considered secure, regardless of the HTTP protocol.\n\n.prototools\n\n```\n[settings.http]secure-proxies = [\"http://internal.proxy\", \"http://corp.net/proxy\"]\n```\n\n#### `root-cert`\n\nThe path to a root certificate to use for requests. This is useful for overriding the native\ncertificate, or for using a self-signed certificate, especially when in a corporate/internal\nenvironment. Supports `pem` and `der` files.\n\n.prototools\n\n```\n[settings.http]root-cert = \"/path/to/root/cert.pem\"\n```\n\n### `[settings.offline]`v0.41.0\n\nCan be used to customize how we detect an internet connection for offline based logic. These\nsettings are useful if you're behind a VPN or corporate proxy.\n\n#### `custom-hosts`\n\nA list of custom hosts to ping. Will be appended to our\n[default list of hosts](#override-default-hosts) and will be ran last.\n\n.prototools\n\n```\n[settings.offline]custom-hosts = [\"proxy.corp.domain.com:80\"]\n```\n\n#### `override-default-hosts`\n\nIf our default hosts are blocked or are too slow, you can disable pinging them by setting this\noption to true. Our default hosts are Google DNS, Cloudflare DNS, and then Google and Mozilla hosts.\n\nThis should be used in parallel with [`custom-hosts`](#custom-hosts).\n\n.prototools\n\n```\n[settings.offline]override-default-hosts = true\n```\n\n#### `timeout`\n\nThe timeout in milliseconds to wait for a ping against a host to resolve. Default timeout is 750ms.\n\n.prototools\n\n```\n[settings.offline]timeout = 500\n```\n\n### `[plugins]`\n\nThis setting was renamed to [`[plugins.tools]`](#pluginstools) in v0.52 but exists for backwards\ncompatibility.\n\n## Backend specific settings\n\n### `[plugins.backends]`v0.52.0\n\nCustom [backend plugins](/docs/proto/plugins) can be configured with the `[plugins.backends]` section.\n[Learn more about this syntax](/docs/proto/plugins#enabling-plugins).\n\n.prototools\n\n```\n[plugins.backends]my-backend = \"https://raw.githubusercontent.com/my/backend/master/proto-plugin.toml\"\n```\n\nOnce configured, you can manage a tool plugin using your custom backend:\n\n```\n$ proto install my-backend:tool-id\n```\n\n### `[backends.*]`v0.53.0\n\nBackends support custom configuration that will be passed to their WASM plugin, which can be used to\ncontrol the behavior for all tools managed by the backend. Please refer to the\n[official documentation](/docs/proto/tool-spec#backends) around backends.\n\n.prototools\n\n```\n[backends.example]setting = true\n```\n\n### `[backends.*.env]`v0.53.0\n\nThis setting is a map of environment variables for a specific backend, and will be applied when that\nbackend is executed through a managed tool, or when [`proto activate`](/docs/proto/commands/activate) is ran\nin a shell profile. These variables will override those defined in `[env]`. Refer to [`[env]`](#env)\nfor usage examples.\n\n.prototools\n\n```\n[backends.example.env]KEY = \"value\"\n```\n\n#### `file`v0.53.0\n\nLike [`[env].file`](#file), this is a path to a dotenv file, relative from the current configuration\nfile, that will be loaded into the environment variables mapping for this specific backend.\n\n.prototools\n\n```\n[backends.example.env]file = \"backend/.env\"\n```\n\n## Tool specific settings\n\n### `[plugins.tools]`v0.52.0\n\nCustom [tool plugins](/docs/proto/plugins) can be configured with the `[plugins.tools]` section.\n[Learn more about this syntax](/docs/proto/plugins#enabling-plugins).\n\n.prototools\n\n```\n[plugins.tools]my-tool = \"https://raw.githubusercontent.com/my/tool/master/proto-plugin.toml\"\n```\n\nOnce configured, you can manage a tool plugin:\n\n```\n$ proto install my-tool\n```\n\n### `[tools.*]`\n\nTools support custom configuration that will be passed to their WASM plugin, which can be used to\ncontrol the business logic within the plugin. Please refer to the [official documentation](/docs/proto/tools)\nof each tool (typically on their repository) for a list of available settings.\n\nAs an example, let's configure [Node.js](https://github.com/moonrepo/node-plugin) (using the `node`\nidentifier).\n\n.prototools\n\n```\nnpm = \"bundled\" # use bundled npm instead of specific version[tools.node]bundled-npm = true[tools.npm]shared-globals-dir = true\n```\n\n### `[tools.*.aliases]`\n\nAliases are custom and unique labels that map to a specific version, and can be configured manually\nwithin `.prototools`, or by calling the [`proto alias`](/docs/proto/commands/alias) command.\n\n.prototools\n\n```\n[tools.node.aliases]work = \"18\"oss = \"20\"\n```\n\n### `[tools.*.env]`v0.29.0\n\nThis setting is a map of environment variables for a specific tool, and will be applied when that\ntool is executed, or when [`proto activate`](/docs/proto/commands/activate) is ran in a shell profile. These\nvariables will override those defined in `[env]`. Refer to [`[env]`](#env) for usage examples.\n\n.prototools\n\n```\n[tools.node.env]NODE_ENV = \"production\"\n```\n\n#### `file`v0.43.0\n\nLike [`[env].file`](#file), this is a path to a dotenv file, relative from the current configuration\nfile, that will be loaded into the environment variables mapping for this specific tool.\n\n.prototools\n\n```\n[tools.node.env]file = \"frontend/.env\"\n```\n\n## GitHub Action\n\nTo streamline GitHub CI workflows, we provide the\n[`moonrepo/setup-toolchain`](https://github.com/moonrepo/setup-toolchain) action, which can be used\nto install `proto` globally, and cache the toolchain found at `~/.proto`.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      - uses: 'actions/checkout@v4'      - uses: 'moonrepo/setup-toolchain@v0'        with:          auto-install: true\n```\n\n## /docs/proto/detection\n\nSource: https://moonrepo.dev/docs/proto/detection\n\n# Version detection\n\n2 min\n\nThe most powerful feature in proto is its contextual version detection, that is triggered with\n[`proto run`](/docs/proto/commands/run), [`proto bin`](/docs/proto/commands/bin), or when a shim is executed. So what\ndoes this mean exactly? Before a tool in proto's toolchain can be executed, we need to determine the\nversion of the tool to execute with. If a detected version exists locally, we proceed using that\nbinary, otherwise we fail with a missing installation error.\n\nWhen detecting a version, the following steps are checked, in the order as listed:\n\n#### 1. Version is explicitly passed as a command line argument\n\n```\n$ proto run node 24.0.0\n```\n\n#### 2. Version is provided with the `PROTO_*_VERSION` environment variable\n\n```\n$ PROTO_NODE_VERSION=24.0.0 proto run node\n```\n\n#### 3. Version is located by traversing the file system\n\nThis step will attempt to find a configuration or manifest file in the current working directory,\nand traverse upwards through parent directories (stops at the user's home directory) until a file is\nfound.\n\n##### 3.1. Version is defined locally in `.prototools`\n\nA `.prototools` file was found and a version entry exists for the current tool. This is also known\nas a \"local version\" and can be created with [`proto pin`](/docs/proto/commands/pin).\n\n.prototools\n\n```\nnode = \"24.0.0\"\n```\n\n##### 3.2. Version is defined in the tool's ecosystem\n\nDepending on the tool, a version is extracted from a found file unique to that tool's ecosystem.\nThis includes version manager configs (`.nvmrc`, etc), manifest files (`package.json`, etc), and\nmore.\n\n.nvmrc\n\n```\n24.0.0\n```\n\npackage.json\n\n```\n{  \"devEngines\": {    \"runtime\": {      \"name\": \"node\",      \"version\": \"24.0.0\"    },    \"packageManager\": {      \"name\": \"npm\",      \"version\": \"11.0.0\"    }  }}\n```\n\n#### 4. Version is defined globally\n\nAs the last check, we look for a \"global version\" that was pinned with\n[`proto pin --global`](/docs/proto/commands/pin) or [`proto install --pin`](/docs/proto/commands/install). This version\nis stored at `~/.proto/.prototools` (`%USERPROFILE%\\.proto\\.prototools` on Windows).\n\n#### 5. Version could not be detected\n\nIf all the previous steps have failed, then we could not detect an applicable version, and the\nprocess will fail.\n\n## /docs/proto/faq\n\nSource: https://moonrepo.dev/docs/proto/faq\n\n# FAQ\n\n## General\n\n### Where did the name \"proto\" come from?\n\nWe wanted to keep with the space theme, and spent quite some time digging through Wikipedia and\nultimately landed on the page for [protostar](https://en.wikipedia.org/wiki/Protostar) (this is why\nour logo's a star). We really liked the definition of protostar, as it basically means \"the\nbeginning phase of a star\". Even the the prefix proto means \"first\" or \"earliest form of\".\n\nThis was great as that's the impression we had in mind for our tool. proto is the first piece\nrequired for setting up your developer environment. The toolchain is the first layer in the\nfoundation.\n\nFrom an aesthetic standpoint, proto's typography works well with moon, as most of the letters are\ncircle shaped. Double points for proto having two o's like the other products!\n\n### Are you worried about confusion with other tools like protobufs?\n\nNah.\n\n### What is a tool?\n\nA tool in the context of proto is either a language, dependency/package manager (typically for a\nlanguage), or third-party CLI. The tool is something that can be downloaded and installed by\nversion onto a machine.\n\nFurthermore, a tool should have a primary executable file that can be executed with `proto run` or\nthrough proto's shims. Additionally, a tool can also provide secondary executable files. For\nexample, `npm` (the primary) also provides `npx` and `node-gyp` (secondaries).\n\n### What is a backend?\n\nA backend is a special type of tool that provides additional integration with 3rd-party plugins,\ngreatly expanding what can be installed and managed with proto.\n\n### What is a plugin?\n\nA plugin is a WASM (or JSON, TOML, YAML) file for a tool or backend.\n\nThe terms tool and plugin are often used interchangeably, but plugin primarily refers to the WASM\nportion of a tool, while tool refers to the entire package: metadata, business logic, branding, so\non an so forth.\n\n### Will you support more languages?\n\nYes! We'd love to support as many as possible, and if you'd like to help, join our Discord\ncommunity! Feel free to create a [plugin](/docs/proto/plugins) in the mean time.\n\n### Will you support other kinds of tools?\n\nNo, we will only support languages, dependency managers, and CLIs, which should be enough. However,\nyou can create a [plugin](/docs/proto/plugins) to support other kinds of tools.\n\n### Do you support \"build from source\"?\n\nAs of version 0.45, we do! Simple pass `--build` to `proto install`. However, building from source\nis a complicated process and is unique per tool, so not all tools support it.\n\n### How to run a canary release after installing it?\n\nOnce a tool has been installed with `canary`, the canary version can be explicitly referenced using\nour [version detection rules](/docs/proto/detection). The easiest approach is to prefix the shim with an\nenvironment variable:\n\n```\n$ PROTO_BUN_VERSION=canary bun ./index.ts\n```\n\nOr to explicitly configure the version in [`.prototools`](/docs/proto/config):\n\n```\nbun = \"canary\"\n```\n\n### What kind of features are supported for HTTP requests?\n\nproto makes a lot of HTTP requests, for information such as available versions/releases, and for\ndownloading the blobs/archives themselves. Because of this, we do our best to support all kinds of\ninternet connections, proxy and intranet usage, and more, through the following:\n\n- All GET and HEAD requests are cached to `~/.proto/cache/requests` based on the [HTTP cache semantics](https://github.com/kornelski/rusty-http-cache-semantics) and relevant RFCs.\n\n- We support the [netrc file format](https://www.gnu.org/software/inetutils/manual/html_node/The-_002enetrc-file.html) and will automatically load `~/.netrc` if it exists.\n\n- We support an offline mode that will short-circuit certain workflows if there's no internet connection. We check for a connection by pinging DNS endpoints, but this can be configured with [`[settings.offline]`](/docs/proto/config#settingsoffline).\n\n- We attempt to automatically load root and system certifications so that secure connections work correctly. This can be configured with [`[settings.http]`](/docs/proto/config#settingshttp).\n\n## Troubleshooting\n\n### Network requests keep failing, how can I bypass?\n\nWhen a tool is executed, we validate the version to ensure it's correct. We achieve this by making\nnetwork requests to a remote service to gather the list of valid versions. If you're having network\nissues, or the request is timing out, you can bypass these checks with the following:\n\n- Pass a fully-qualified version as an environment variable. The version must be installed for this to work. ``` PROTO_NODE_VERSION=20.0.0 node --version ``` If executing a Node.js package manager, you'll need to set versions for both Node.js and the manager. This is required since manager's execute `node` processes under the hood. ``` PROTO_NODE_VERSION=20.0.0 PROTO_NPM_VERSION=10.0.0 npm --version ```\n\n- Pass the `PROTO_BYPASS_VERSION_CHECK` environment variable. This will bypass the network request to load versions, but does not bypass other requests. However, this is typically enough. ``` PROTO_BYPASS_VERSION_CHECK=1 node --version ```\n\n## /docs/proto/install\n\nSource: https://moonrepo.dev/docs/proto/install\n\n# Install proto\n\n1 min\n\nThe following guide can be used to install proto into your environment.\n\n## Requirements\n\n- Git - for fetching available versions/tags\n\n- tar, unzip, gz, xz - for unpacking archives\n\n```\n# macOSbrew install git unzip gzip xz# Ubuntu / Debianapt-get install git unzip gzip xz-utils# RHEL-based / Fedoradnf install git unzip gzip xz\n```\n\n## Installing\n\nThe entirety of proto is packaged and shipped as 2 binaries. It works on most operating systems,\nand does not require any external dependencies. For convenience, we provide the following scripts to\ndownload and install proto.\n\ninfo\n\nThe install location can be customized with the `PROTO_HOME` environment variable. If not provided,\nthe default location is `~/.proto`.\n\n### Linux, macOS, WSL\n\nIn a terminal that supports Bash, run the following command. This will download and install proto,\nthen open an interactive prompt to complete the installation.\n\n```\nbash administrator Powershell or Windows Terminal, run the following command. This will download\nand install proto, then open an interactive prompt to complete the installation.\n\n```\nirm https://moonrepo.dev/install/proto.ps1 | iex\n```\n\nYou may also need to run the following command for shims to be executable:\n\n```\nSet-ExecutionPolicy RemoteSigned# Without admin privilegesSet-ExecutionPolicy -Scope CurrentUser RemoteSigned\n```\n\n### Other\n\nproto can also be downloaded and installed manually, by downloading an asset from\n[https://github.com/moonrepo/proto/releases](https://github.com/moonrepo/proto/releases). Be sure to\nrename the file after downloading, and apply the executable bit (`chmod +x`) on macOS and Linux.\n\n## Upgrading\n\nTo upgrade proto, run the [`proto upgrade`](/docs/proto/commands/upgrade) command, or re-run the install\nscripts above.\n\n## Uninstalling\n\nTo uninstall proto, delete the `~/.proto` directory, and remove any `PROTO_HOME` references from\nyour shell profile.\n\n## Canary releases\n\nproto supports canary releases, which are built and published for every commit to our development\nbranches. These releases will include features and functionality that have not yet landed on master.\nCanary releases are available as a\n[GitHub prerelease](https://github.com/moonrepo/proto/releases/tag/canary) using the `canary` tag.\n\n## Nightly releases\n\nproto supports nightly releases, which are built and published once a day from the latest commit on\nmaster. Nightly releases are available as a\n[GitHub prerelease](https://github.com/moonrepo/proto/releases/tag/nightly) using the `nightly` tag.\n\n## Next steps\n\n[Choose a workflow](/docs/proto/workflows)[Learn about `.prototools`](/docs/proto/config)\n\n## /docs/proto/non-wasm-plugin\n\nSource: https://moonrepo.dev/docs/proto/non-wasm-plugin\n\n# Non-WASM plugin\n\nThe non-WASM plugin is by design, very simple. It's a JSON, TOML, or YAML file that describes a\nschema for the tool, how it should be installed, and how it should be invoked. Since this is a\nstatic configuration file, it does not support any logic or complex behavior, and is merely for\nsimple and common use cases, like CLIs.\n\ninfo\n\nJSON and YAML support was added in proto v0.42.\n\n## Create a plugin\n\nLet's start by creating a new plugin, and defining the `name` and `type` fields. The type can either\nbe `language`, `dependency-manager`, `package-manager`, or `cli`. For this example, we'll create a\nplugin for our fake product called Protostar, a CLI tool.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"name\": \"Protostar\",  \"type\": \"cli\"}\n```\n\nprotostar.toml\n\n```\nname = \"Protostar\"type = \"cli\"\n```\n\nprotostar.yaml\n\n```\nname: 'Protostar'type: 'cli'\n```\n\n### Platform variations\n\nNative tools are often platform specific, and proto supports this by allowing you to define\nvariations based on operating system using the `[platform]` section. For non-native tools, this\nsection can typically be skipped.\n\nThis section requires a mapping of Rust\n[`OS` strings](https://doc.rust-lang.org/std/env/consts/constant.OS.html) to platform settings. The\nfollowing settings are available:\n\n- `archs` - A list of architectures supported for this platform. If not provided, supports all archs.\n\n- `archive-prefix` - If the tool is distributed as an archive (zip, tar, etc), this is the name of the direct folder within the archive that contains the tool, and will be removed when unpacking the archive. If there is no prefix folder within the archive, this setting can be omitted.\n\n- `exes-dir` - A relative path to a directory that contains pre-installed executables.\n\n- `exe-path` - The path to the main executable binary within the archive (without the prefix). If the tool is distributed as a single binary, this setting can be typically omitted.\n\n- `checksum-file` - Name of the checksum file to verify the downloaded file with. If the tool does not support checksum verification, this setting can be omitted.\n\n- `download-file` (required) - Name of the file to download. [Learn more about downloading](#downloading-and-installing).\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"platform\": {    \"linux\": {      \"archivePrefix\": \"protostar-linux\",      \"exePath\": \"bin/protostar\",      \"checksumFile\": \"protostar-{arch}-unknown-linux-{libc}.sha256\",      \"downloadFile\": \"protostar-{arch}-unknown-linux-{libc}.tar.gz\"    },    \"macos\": {      \"archivePrefix\": \"protostar-macos\",      \"exePath\": \"bin/protostar\",      \"checksumFile\": \"protostar-{arch}-apple-darwin.sha256\",      \"downloadFile\": \"protostar-{arch}-apple-darwin.tar.xz\"    },    \"windows\": {      \"archivePrefix\": \"protostar-windows\",      \"exePath\": \"bin/protostar.exe\",      \"checksumFile\": \"protostar-{arch}-pc-windows-msvc.sha256\",      \"downloadFile\": \"protostar-{arch}-pc-windows-msvc.zip\"    }  }}\n```\n\nprotostar.toml\n\n```\n[platform][platform.linux]archive-prefix = \"protostar-linux\"exe-path = \"bin/protostar\"checksum-file = \"protostar-{arch}-unknown-linux-{libc}.sha256\"download-file = \"protostar-{arch}-unknown-linux-{libc}.tar.gz\"[platform.macos]archive-prefix = \"protostar-macos\"exe-path = \"bin/protostar\"checksum-file = \"protostar-{arch}-apple-darwin.sha256\"download-file = \"protostar-{arch}-apple-darwin.tar.xz\"[platform.windows]archive-prefix = \"protostar-windows\"exe-path = \"bin/protostar.exe\"checksum-file = \"protostar-{arch}-pc-windows-msvc.sha256\"download-file = \"protostar-{arch}-pc-windows-msvc.zip\"\n```\n\nprotostar.yaml\n\n```\nplatform:  linux:    archivePrefix: 'protostar-linux'    exePath: 'bin/protostar'    checksumFile: 'protostar-{arch}-unknown-linux-{libc}.sha256'    downloadFile: 'protostar-{arch}-unknown-linux-{libc}.tar.gz'  macos:    archivePrefix: 'protostar-macos'    exePath: 'bin/protostar'    checksumFile: 'protostar-{arch}-apple-darwin.sha256'    downloadFile: 'protostar-{arch}-apple-darwin.tar.xz'  windows:    archivePrefix: 'protostar-windows'    exePath: 'bin/protostar.exe'    checksumFile: 'protostar-{arch}-pc-windows-msvc.sha256'    downloadFile: 'protostar-{arch}-pc-windows-msvc.zip'\n```\n\nYou may have noticed tokens above, like `{arch}`. These are special tokens that are replaced with a\ndynamic value at runtime, based on the current host machine executing the code. The following tokens\nare available:\n\n- `{version}` - The currently resolved version, as a fully-qualified semantic or calendar version.\n\n- `{versionMajor}` / `{versionYear}` - Only the major version. v0.41.4\n\n- `{versionMinor}` / `{versionMonth}` - Only the minor version. v0.45.2\n\n- `{versionPatch}` / `{versionDay}` - Only the patch version. v0.45.2\n\n- `{versionPrerelease}` - The prerelease identifier, if applicable. Returns an empty string otherwise. v0.41.4\n\n- `{versionBuild}` - The build identifier, if applicable. Returns an empty string otherwise. v0.41.4\n\n- `{arch}` - The architecture of the host machine, like `x86_64`. These values map to Rust's [`ARCH` constant](https://doc.rust-lang.org/std/env/consts/constant.ARCH.html), but can be customized with [`install.arch`](#downloading-and-installing).\n\n- `{os}` - The operating system of the host machine, like `windows`. These values map to Rust's [`OS` constant](https://doc.rust-lang.org/std/env/consts/constant.OS.html).\n\n- `{libc}` - For Linux machines, this is the current libc implementation, either `gnu` or `musl`. v0.31.2\n\n### Downloading and installing\n\nA non-WASM plugin only supports downloading pre-built tools, typically as an archive, and does\nnot support building from source. The `[install]` section can be used to configure how the tool\nshould be downloaded and installed into the toolchain. The following settings are available:\n\n- `arch` - A mapping of Rust [`ARCH` strings](https://doc.rust-lang.org/std/env/consts/constant.ARCH.html) to custom values for the `{arch}` token. This is useful if the tool has different terminology.\n\n- `libc` - A mapping of custom values for the `{libc}` token.\n\n- `checksum-url` - A secure URL to download the checksum file for verification. If the tool does not support checksum verification, this setting can be omitted.\n\n- `checksum-url-canary` - A URL for canary releases.\n\n- `checksum-public-key` - Public key used for verifying checksums. Only used for `.minisig` files.\n\n- `download-url` (required) - A secure URL to download the tool/archive.\n\n- `download-url-canary` - A URL for canary releases.\n\n- `primary` - Configures the primary executable.\n\n- `secondary` - Configures secondary executables.\n\nThe URL settings support `{checksum_file}` and `{download_file}` tokens, which will be replaced with\nthe values from the `[platform]` section.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"install\": {    \"checksumUrl\": \"https://github.com/moonrepo/protostar/releases/download/v{version}/{checksum_file}\",    \"downloadUrl\": \"https://github.com/moonrepo/protostar/releases/download/v{version}/{download_file}\",    \"arch\": {      \"aarch64\": \"arm64\",      \"x86_64\": \"x64\"    }  }}\n```\n\nprotostar.toml\n\n```\n[install]checksum-url = \"https://github.com/moonrepo/protostar/releases/download/v{version}/{checksum_file}\"download-url = \"https://github.com/moonrepo/protostar/releases/download/v{version}/{download_file}\"[install.arch]aarch64 = \"arm64\"x86_64 = \"x64\"\n```\n\nprotostar.yaml\n\n```\ninstall:  checksumUrl: 'https://github.com/moonrepo/protostar/releases/download/v{version}/{checksum_file}'  downloadUrl: 'https://github.com/moonrepo/protostar/releases/download/v{version}/{download_file}'  arch:    aarch64: 'arm64'    x86_64: 'x64'\n```\n\n#### Executables\n\nThe available executables (bins and shims) can be customized with the `[install.exes]` section,\nwhich is required. This setting requires a map, where the key is the executable file name, and the\nvalue is an object of the following options:\n\n- `exe-path` - The file to execute, relative from the tool directory. On Windows, the `.exe` extension will automatically be appended. If you need more control over platform variance, use `[platform.*.exe-path]` instead.\n\n- `no-bin` - Do not symlink a binary in `~/.proto/bin`.\n\n- `no-shim`- Do not generate a shim in `~/.proto/shims`.\n\n- `parent-exe-name` - Name of a parent executable required to execute the executable path. For example, `node` is required for `.js` files.\n\n- `primary` - Is the main executable in the tool. There can only be 1 primary! v0.42.0\n\n- `shim-before-args` - Custom args to prepend to user-provided args within the generated shim.\n\n- `shim-after-args` - Custom args to append to user-provided args within the generated shim.\n\n- `shim-env-vars` - Custom environment variables to set when executing the shim.\n\nThis field supports both the required primary executable, and optional secondary executables. The\nprimary executable must be marked with `primary = true`.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"install\": {    \"exes\": {      \"protostar\": {        \"exePath\": \"bins/protostar\",        \"primary\": true,        \"shimBeforeArgs\": [          \"--verbose\"        ]      },      \"protostar-debug\": {        \"exePath\": \"bins/protostar-debug\",        \"noShim\": true      }    }  }}\n```\n\nprotostar.toml\n\n```\n[install][install.exes][install.exes.protostar]exe-path = \"bins/protostar\"primary = trueshim-before-args = [ \"--verbose\" ][install.exes.protostar-debug]exe-path = \"bins/protostar-debug\"no-shim = true\n```\n\nprotostar.yaml\n\n```\ninstall:  exes:    protostar:      exePath: 'bins/protostar'      primary: true      shimBeforeArgs:        - '--verbose'    protostar-debug:      exePath: 'bins/protostar-debug'      noShim: true\n```\n\n#### Global packages\n\nThe `[packages]` sections can be configured that provides information about where global packages\nare stored.\n\n- `globals-lookup-dirs` - A list of directories where global binaries are stored. This setting supports interpolating environment variables via the syntax `$ENV_VAR`.\n\n- `globals-prefix` - A string that all package names are prefixed with. For example, Cargo/Rust binaries are prefixed with `cargo-`.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"packages\": {    \"globalsLookupDirs\": [      \"$PROTOSTAR_HOME/bin\",      \"$HOME/.protostar/bin\"    ]  }}\n```\n\nprotostar.toml\n\n```\n[packages]globals-lookup-dirs = [ \"$PROTOSTAR_HOME/bin\", \"$HOME/.protostar/bin\" ]\n```\n\nprotostar.yaml\n\n```\npackages:  globalsLookupDirs:    - '$PROTOSTAR_HOME/bin'    - '$HOME/.protostar/bin'\n```\n\n### Resolving versions\n\nNow that the tool can be downloaded and installed, we must configure how to resolve available\nversions. Resolving is configured through the `[resolve]` section, which supports 2 patterns to\nresolve with: Git tags or a JSON manifest.\n\n#### Git tags\n\nTo resolve a list of available versions using Git tags, the following settings are available:\n\n- `git-url` (required) - The remote URL to fetch tags from.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"gitUrl\": \"https://github.com/moonrepo/protostar\"  }}\n```\n\nprotostar.toml\n\n```\n[resolve]git-url = \"https://github.com/moonrepo/protostar\"\n```\n\nprotostar.yaml\n\n```\nresolve:  gitUrl: 'https://github.com/moonrepo/protostar'\n```\n\n#### JSON manifest\n\nTo resolve a list of available versions using a JSON manifest, the following settings are available:\n\n- `manifest-url` (required) - A URL that returns a JSON response of all versions. This response must be an array of strings, or an array of objects.\n\n- `manifest-version-key` - If the response is an array of objects, this is the key to extract the version from. If the response is an array of strings, this setting can be omitted. Defaults to `version`.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"manifestUrl\": \"https://someregistry.com/protostar/versions.json\",    \"manifestVersionKey\": \"latest_version\"  }}\n```\n\nprotostar.toml\n\n```\n[resolve]manifest-url = \"https://someregistry.com/protostar/versions.json\"manifest-version-key = \"latest_version\"\n```\n\nprotostar.yaml\n\n```\nresolve:  manifestUrl: 'https://someregistry.com/protostar/versions.json'  manifestVersionKey: 'latest_version'\n```\n\n#### Versions and aliasesv0.36.0\n\nAs an alternative, we also support a static configuration of explicit versions and aliases. This is\nuseful if you have an internal tool that is relatively stable, or does not provide a means in which\nto extract version information.\n\n- `versions` - A list of versions.\n\n- `aliases` - A mapping of alias names to versions.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"versions\": [      \"1.2.3\",      \"1.2.4\",      \"1.2.5\"    ],    \"aliases\": {      \"stable\": \"1.2.4\"    }  }}\n```\n\nprotostar.toml\n\n```\n[resolve]versions = [ \"1.2.3\", \"1.2.4\", \"1.2.5\" ][resolve.aliases]stable = \"1.2.4\"\n```\n\nprotostar.yaml\n\n```\nresolve:  versions:    - '1.2.3'    - '1.2.4'    - '1.2.5'  aliases:    stable: '1.2.4'\n```\n\n#### Version patterns\n\nWhen a version is found, either from a git tag or manifest key, we attempt to parse it into a\n[valid version](/docs/proto/tool-spec) using a Rust based regex pattern and the `version-pattern` setting.\n\nThis pattern uses named regex capture groups (`(?...)`) to build the version, and to support\nfound versions that are not fully-qualified (they may be missing patch or minor versions). The\nfollowing groups are supported:\n\n- `major` / `year` - The major version number. Defaults to `0` if missing.\n\n- `minor` / `month` - The minor version number. Defaults to `0` if missing.\n\n- `patch` / `day` - The patch version number. Defaults to `0` if missing.\n\n- `pre` - The pre-release identifier, like \"rc.0\" or \"alpha.0\". Supports an optional leading `-`. Does nothing if missing.\n\n- `build` - The build metadata, like a timestamp. Supports an optional leading `+`. Does nothing if missing.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"versionPattern\": \"^@protostar/cli@((?\\\\d+)\\\\.(?\\\\d+)\\\\.(?\n\\\\d+))\"  }}\n```\n\nprotostar.toml\n\n```\n[resolve]version-pattern = \"^@protostar/cli@((?\\\\d+)\\\\.(?\\\\d+)\\\\.(?\n\\\\d+))\"\n```\n\nprotostar.yaml\n\n```\nresolve:  versionPattern: '^@protostar/cli@((?\\d+)\\.(?\\d+)\\.(?\n\\d+))'\n```\n\nIf no named capture groups are found, the match at index `1` is used as the version.\n\n### Detecting versions\n\nAnd lastly, we can configure how to [detect a version](/docs/proto/detection) contextually at runtime, using\nthe `[detect]` setting. At this time, we only support 1 setting:\n\n- `version-files` - A list of version files to extract from. The contents of these files can only be the version string itself.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"detect\": {    \"versionFiles\": [      \".protostar-version\",      \".protostarrc\"    ]  }}\n```\n\nprotostar.toml\n\n```\n[detect]version-files = [ \".protostar-version\", \".protostarrc\" ]\n```\n\nprotostar.yaml\n\n```\ndetect:  versionFiles:    - '.protostar-version'    - '.protostarrc'\n```\n\n## /docs/proto/plugins\n\nSource: https://moonrepo.dev/docs/proto/plugins\n\n# Plugins\n\nproto supports a pluggable architecture as a means for consumers to integrate and manage custom\ntools (languages, CLIs, etc) within proto's toolchain. It's not possible for proto to support\neverything in core directly, so plugins are a way for the community to extend the toolchain to\ntheir needs.\n\n## Enabling plugins\n\nPlugins can be enabled by configuring them in [`.prototools`](/docs/proto/config#plugins) files, within the\n`[plugins]` section. The map key is the plugin name in kebab-case, which is used as the\nbinary/tool name in proto, and also the name for configuration and cache purposes. The map value is\na [plugin locator string](/docs/guides/wasm-plugins#configuring-plugin-locations) that defines a\nprotocol and source location.\n\n.prototools\n\n```\n[plugins.tools] = \"\n://\"\n```\n\n## Creating plugins\n\nTo ease the plugin development process, proto supports 2 types of plugins, a\n[non-WASM configuration based plugin](/docs/proto/non-wasm-plugin) for basic use cases, and a\n[WASM based plugin](/docs/proto/wasm-plugin) for advanced use cases.\n\n## Publish a plugin\n\nproto's registry is currently powered by static JSON files located in our official\n[proto repository](https://github.com/moonrepo/proto/tree/master/registry). View that link for\ninformation on how to publish a plugin.\n\n## /docs/proto/tool-spec\n\nSource: https://moonrepo.dev/docs/proto/tool-spec\n\n# Tool specification\n\n3 min\n\nSince proto is a toolchain for multiple tools, each with differing version formats, we must align\nthem on a standard specification that can resolve and store safely. To handle this, we've\nimplemented our own solution called the tool and version specification. This specification currently\nsupports semantic and calendar based versions, each with their own guidelines and caveats.\n\ninfo\n\nIf you're implementing a plugin for a specific tool that has a different version format, you'll need\nto re-format it into one of the specifications below.\n\n## Backendsv0.47.0\n\nA backend is an internal system that allows proto to use plugins from 3rd-party package/version\nmanagers within proto, greatly expanding the amount of tools that proto can install and support.\nThis functionality is achieved through special WASM plugins under the hood.\n\nTo make use of a backend, prefix the tool identifier in `.prototools` with the backend's unique\nidentifier. For example, we can install Zig via asdf.\n\n.prototools\n\n```\n# >= v0.52\"asdf:zig\" = \"0.13.0\"# does\nnot use the `asdf` binary itself, and instead emulates the environment as best we can. Because of\nthis, some tools may not be usable through proto.\n\n.prototools\n\n```\n\"asdf:\" = \"20\"\n```\n\nBy default, the ID pinned in `.prototools` is the\n[asdf shortname](https://asdf-vm.com/plugins/create.html#plugin-shortname-index) used when cloning a\nrepository. If the ID is different than the shortname (`node` vs `nodejs`), you can configure the\n`asdf-shortname` setting.\n\n.prototools\n\n```\n\"asdf:node\" = \"20\"[tools.\"asdf.node\"]asdf-shortname = \"nodejs\"\n```\n\nThe following settings are supported:\n\n- `asdf-shortname` (string) - The name of the [asdf plugin](https://github.com/asdf-vm/asdf-plugins) if different than the configured ID.\n\n- `asdf-repository` (string) - The Git repository URL in which to locate [scripts](https://asdf-vm.com/plugins/create.html#scripts-overview). If not defined, is extracted from the shortname plugin index.\n\n- `exes` (string[]) - List of executable file names (relative from `bin`) to be linked as a shim/bin. If not defined, we'll automatically scan the `bin` directory.\n\n## Semantic versions\n\nThe most common format is [semver](https://semver.org/), also known as a semantic version. This\nformat requires major, minor, and patch numbers, with optional pre-release and build metadata.\n\n.prototools\n\n```\ntool = \"1.2.3\"\n```\n\n### Syntax\n\n- `..` - 1.2.3\n\n- `..-` - 1.2.3-alpha.0\n\n- `..-+` - 1.2.3-alpha.0+nightly456\n\n- `..+` - 1.2.3+nightly456\n\n### Guidelines\n\n- major, minor, patch - `0-9` of any length\n\n- pre, build - `a-z`, `0-9`, `-`, `.`\n\n[Learn more about this format!](https://semver.org/#backusnaur-form-grammar-for-valid-semver-versions)\n\n## Calendar versionsv0.37.0\n\nAnother popular format is [calver](https://calver.org/), also known as a calendar version, which\nuses the calendar year, month, and day as version numbers. This format also supports pre-release and\nbuild metadata, but with different syntax than semver.\n\n.prototools\n\n```\ntool = \"2025-02-26\"\n```\n\n### Syntax\n\n- `-` - 2024-02\n\n- `--` - 2024-02-26\n\n- `--.` - 2024-02-26.123\n\n- `--_` - 2024-02-26_123\n\n- `--.-` - 2024-02-26.123-alpha.0\n\n- `--_-` - 2024-02-26_123-alpha.0\n\n- `---` - 2024-02-26-alpha.0\n\n### Guidelines\n\n- year - `0-9` of 1-4 length If the year is not YYYY format, it will use the year 2000 as the base. For example, `24` becomes `2024`, and `124` becomes `2124`.\n\n- month - `0-9` of 1-2 length Supports with and without a leading zero (`02` vs `2`).\n\n- Does not support invalid months (`0` or `13`).\n\n- day - `0-9` of 1-2 length Can be omitted, even with build/pre.\n\n- Supports with and without a leading zero (`02` vs `2`).\n\n- Does not support invalid days (`0` or `32`).\n\n- build - `0-9` of any length Also known as a \"micro\" number.\n\n- The leading dot `.` format is preferred.\n\n- pre - `a-z`, `0-9`, `-`, `.`\n\n[Learn more about this format!](https://calver.org/#scheme)\n\n## Requirements and ranges\n\nBesides an explicit version, we also support partial versions known as version requirements or\nversion ranges. These are quite complex as we need to support both semver and calver in unison, as\nwell as support partial/incomplete numbers (missing patch/day, missing minor/month, etc). We do our\nbest to support as many combinations as possible.\n\n.prototools\n\n```\ntool-a = \"^1\"tool-b = \"~2.1\"tool-c = \">=2000-10\"\n```\n\n### Syntax\n\n- Requirement - `[]` - `1.2.3`, `>4.5`, `~3`, `^2000-10`, etc\n\n- AND range - `[,] ...` - `>=1, `, `>=`, ` If omitted, defaults to `~` when a partial version is provided (i.e. allow the minimum specified version component to increase)\n\n- If a full version is provided, defaults to `^` (i.e. allow any newer version that is nominally compatible)\n\n- To specify an exact version, use the `=` operator explicitly.\n\n- pattern Dot-separated semver, with optional major and patch numbers.\n\n- Dash-separated calver, with optional month and day numbers.\n\n- Pre-release and build metadata are only supported when suffixed to full versions.\n\nFor example, if you want to use `npm` 11.6.2 but 11.6.3 has an issue, use:\n`npm = \"^11.6.4 || =11.6.2\"`\n\n## /docs/proto/tools\n\nSource: https://moonrepo.dev/docs/proto/tools\n\n# Supported tools\n\n## Built-in\n\nThe following tools are supported natively in proto's toolchain.\n\n## Third-party\n\n[Add tool](https://github.com/moonrepo/proto/tree/master/registry)\n\nAdditional tools can be supported through [plugins](/docs/proto/plugins).\n\n## /docs/proto/wasm-plugin\n\nSource: https://moonrepo.dev/docs/proto/wasm-plugin\n\n# WASM plugin\n\nIf you want more control over how your tool works, a WASM plugin is the way to go.\n\nsuccess\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins) for more information on how our WASM\nplugins work, critical concepts to know, and more. Once you have a good understanding, you may\ncontinue this proto specific guide.\n\n## Concepts\n\nThe following concepts are unique to proto, but be sure to also read about the general concepts in\nour [WASM plugins guide](/docs/guides/wasm-plugins#concepts).\n\n### Tool context\n\nFor plugin functions, we provide what we call the tool context, which is information that is\nconstantly changing depending on the current step or state of proto's execution. The context cannot\nbe accessed with a stand-alone function, and is instead passed as a `context` field in the input of\nmany plugin functions.\n\n```\n#[plugin_fn]pub fn download_prebuilt(Json(input): Json) -> FnResult> {    let version = input.context.version;    // ...}\n```\n\nThe following fields are available on the\n[context object](https://docs.rs/proto_pdk/latest/proto_pdk/struct.ToolContext.html):\n\n- `proto_version` - The version of proto executing the plugin. Note that this version may be for the [`proto_core` crate](https://crates.io/crates/proto_core), and not the CLI. Patch numbers will drift, but major and minor numbers should be in sync.\n\n- `temp_dir` - A virtual path to a temporary directory unique to this tool. v0.45.0\n\n- `tool_dir` - A virtual path to the tool's directory for the current version.\n\n- `version` - The current version or alias. If not resolved, will be \"latest\".\n\ncaution\n\nThe `version` field is either a fully-qualified version (1.2.3), an alias (\"latest\", \"stable\"), or\ncanary (\"canary\"). Be sure to account for all these variations when implementing plugin functions!\n\n### Tool configuration\n\nUsers can configure tools through the [`[tools.*]`](/docs/proto/config#tools) section of their `.prototools`,\nwhich can then be accessed within the WASM plugin using the\n[`get_tool_config`](https://docs.rs/proto_pdk/latest/proto_pdk/fn.get_tool_config.html) function.\n\nThis function requires a struct to deserialize into. It should implement `Default`, enable serde\ndefaults, and map keys from `kebab-case`. If you want to error on unknown settings, also enable\n`deny_unknown_fields`.\n\n```\n#[derive(Debug, Default, serde::Deserialize)]#[serde(default, deny_unknown_fields, rename_all = \"kebab-case\")]struct NodeToolConfig {    pub bundled_npm: bool,}let config = get_tool_config::()?;config.bundled_npm;\n```\n\n### Backend configurationv0.53.0\n\nLike tool configuration, users can configure backends through the\n[`[backends.*]`](/docs/proto/config#backends) section of their `.prototools`, which can then be accessed\nwithin the WASM plugin using the\n[`get_backend_config`](https://docs.rs/proto_pdk/latest/proto_pdk/fn.get_backend_config.html)\nfunction.\n\n```\n#[derive(Debug, Default, serde::Deserialize)]#[serde(default, deny_unknown_fields, rename_all = \"kebab-case\")]struct ExampleBackendConfig {    pub setting: bool,}let config = get_backend_config::()?;\n```\n\n## Creating a plugin\n\nsuccess\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins#creating-a-plugin) for steps on how to\ncreate a Rust based plugin.\n\n## Implementing tool functions\n\nPlugins are powered by a set of functions that are called from the host, and are annotated with\n`#[plugin_fn]`. These are known as plugin functions, or guest functions.\n\n### Registering the tool\n\nThe first step in a plugin's life-cycle is to register metadata about the plugin with the\n`register_tool` function. This function is called immediately after a plugin is loaded at runtime,\nand must return a human-readable name and plugin type.\n\n```\n#[plugin_fn]pub fn register_tool(_: ()) -> FnResult> {    Ok(Json(RegisterToolOutput {        name: \"Node.js\".into(),        type_of: PluginType::Language,        minimum_proto_version: Some(Version::new(0, 42, 0)),        plugin_version: Version::parse(env!(\"CARGO_PKG_VERSION\")).ok(),        ..RegisterToolOutput::default()    }))}\n```\n\nThis function also receives the plugin ID as input, allowing for conditional logic based on the ID.\nThe ID is the [key the plugin was configured with](/docs/proto/plugins#enabling-plugins), and what is passed\nto `proto` commands (e.g. `proto install `).\n\n```\n#[plugin_fn]pub fn register_tool(Json(input): Json) -> FnResult> {  input.id  // ...}\n```\n\n### Configuration schemav0.53.0\n\nIf you are using [tool configuration](#tool-configuration), you can register the shape of the\nconfiguration using the [`schematic`](https://crates.io/crates/schematic) crate and the\n`define_tool_config` function. This shape will be used to generate outputs such as JSON schemas, or\nTypeScript types.\n\n```\n#[plugin_fn]pub fn define_tool_config(_: ()) -> FnResult> {    Ok(Json(DefineToolConfigOutput {        schema: Some(schematic::SchemaBuilder::generate::()),    }))}\n```\n\nSchematic is a heavy library, so we suggest adding the dependency like so:\n\n```\n[dependencies]schematic = { version = \"\", default-features = false, features = [\"schema\"] }\n```\n\n### Installation strategy\n\n#### Downloading pre-builts\n\nOur plugin layer only supports downloading pre-built tools, typically as an archive, and does\nnot support building from source. The `download_prebuilt` function must be defined, whichs\nconfigures how the tool should be downloaded and installed.\n\nThe following fields are available:\n\n- `archive_prefix` - If the tool is distributed as an archive (zip, tar, etc), this is the name of the direct folder within the archive that contains the tool, and will be removed when unpacking the archive. If there is no prefix folder within the archive, this setting can be omitted.\n\n- `download_url` (required) - A secure URL to download the tool/archive.\n\n- `download_name` - File name of the archive to download. If not provided, will attempt to extract it from the URL.\n\n- `checksum` - The checksum hash itself. Will be used if no other option was provided. v0.47.0\n\n- `checksum_url` - A secure URL to download the checksum file for verification. If the tool does not support checksum verification, this setting can be omitted.\n\n- `checksum_public_key` - Public key used for verifying checksums. Only used for `.minisig` files.\n\n```\n#[plugin_fn]pub fn download_prebuilt(Json(input): Json) -> FnResult> {     let env = get_host_environment()?;    check_supported_os_and_arch(        NAME,        &env,        permutations! [            HostOS::Linux => [HostArch::X64, HostArch::Arm64, HostArch::Arm, HostArch::Powerpc64, HostArch::S390x],            HostOS::MacOS => [HostArch::X64, HostArch::Arm64],            HostOS::Windows => [HostArch::X64, HostArch::X86, HostArch::Arm64],        ],    )?;    let version = input.context.version;    let arch = env.arch;    let os = env.os;    let prefix = match os {        HostOS::Linux => format!(\"node-v{version}-linux-{arch}\"),        HostOS::MacOS => format!(\"node-v{version}-darwin-{arch}\"),        HostOS::Windows => format!(\"node-v{version}-win-{arch}\"),        other => {            return Err(PluginError::UnsupportedPlatform(\"Node.js\".into(), other.into()))?;        }    };    let filename = if os == HostOS::Windows {        format!(\"{prefix}.zip\")    } else {        format!(\"{prefix}.tar.xz\")    };    Ok(Json(DownloadPrebuiltOutput {        archive_prefix: Some(prefix),        download_url: format!(\"https://nodejs.org/dist/v{version}/{filename}\"),        download_name: Some(filename),        checksum_url: Some(format!(\"https://nodejs.org/dist/v{version}/SHASUMS256.txt\")),        ..DownloadPrebuiltOutput::default()    }))}\n```\n\n##### Unpacking an archive\n\nOur plugin layer will do its best to detect file extensions, unpack the downloaded file (if an\narchive), and install the tool to the correct directory. However, we're unable to account for all\nedge cases, so for situations where the install params above are not sufficient, you may define an\n`unpack_archive` function.\n\nThis function receives an input with the following fields:\n\n- `input_file` - Virtual path to the downloaded file. Maps to `~/.proto/temp//`.\n\n- `output_dir` - Virtual directory to unpack the archive into, or copy the binary to. Maps to `~/.proto/tools//`.\n\n```\n#[plugin_fn]pub fn unpack_archive(Json(input): Json) -> FnResult {    untar(input.input_file, input.output_dir)?;    Ok(())}\n```\n\n#### Build from source\n\nComing soon!\n\n#### Native installation\n\nFor tools that can't be installed through downloading pre-builts or building from source, and\nrequire a more unique/native approach (say running a script), you may define the `native_install`\nfunction.\n\nThis function allows you to execute host commands, make HTTP requests, and more, to install the\ntool. All that's required to return whether the installation was successful or not, and an optional\nerror message.\n\n```\n#[plugin_fn]pub fn native_install(Json(input): Json) -> FnResult> {    let result = exec_captured(\"command\", [\"args\"])?;    Ok(Json(NativeInstallOutput {        installed: result.exit_code == 0,        error: if result.stderr.is_empty() {            None        } else {            Some(result.stderr)        },        ..Default::default()    }))}\n```\n\n### Locating executables\n\nEven though a tool has been installed, we must inform proto of where to find executables. This can\nbe achieved with the required `locate_executables` function. The `exes` field defines the location\nof the executables, relative from the installation directory.\n\n```\n#[plugin_fn]pub fn locate_executables(    Json(_): Json,) -> FnResult> {    let env = get_host_environment()?;    Ok(Json(LocateExecutablesOutput {        exes: HashMap::from_iter([            // Primary            (                \"node\".into(),                ExecutableConfig::new_primary(                    // Helper that chooses between distinct Unix or Windows values                    env.os.for_native(\"bin/node\", \"node.exe\"),                    // Or the same value with optional Windows extension                    // env.os.get_file_name(\"node\", \"exe\")                )            ),            // Secondary            (                \"corepack\".into(),                ExecutableConfig::new(env.os.for_native(\"bin/corepack\", \"corepack.exe\"))            ),        ]),        ..LocateExecutablesOutput::default()    }))}\n```\n\nThe main executable of the tool must be marked as primary, either with\n`ExecutableConfig::new_primary`, or setting the `ExecutableConfig.primary` field to true.\n\nFurthermore, the `locate_executables` function can define a list of lookups for the globals\ninstallation directory. proto will loop through each lookup, and return the first directory that\nexists on the current file system. proto will also expand environment variables in the format of\n`$VAR_NAME`. If a variable is not defined, or has an empty value, the lookup will be skipped. To\ndemonstrate this, we'll use [Deno](https://deno.land/manual@v1.35.0/tools/script_installer).\n\n```\n#[plugin_fn]pub fn locate_executables(    Json(_): Json,) -> FnResult> {    let env = get_host_environment()?;    Ok(Json(LocateExecutablesOutput {        globals_lookup_dirs: vec![\"$DENO_INSTALL_ROOT/bin\".into(), \"$HOME/.deno/bin\".into()],        // ...        ..LocateExecutablesOutput::default()    }))}\n```\n\n### Loading and resolving versions\n\nNow that the tool can be downloaded and installed, we must configure how to resolve available\nversions to actually be installed. To provide a list of versions and language specific aliases, the\n`load_versions` function must be defined.\n\n```\n#[plugin_fn]pub fn load_versions(Json(_): Json) -> FnResult> {    let mut output = LoadVersionsOutput::default();    let response: Vec = fetch_json(\"https://nodejs.org/dist/index.json\")?;    for (index, item) in response.iter().enumerate() {        let version = VersionSpec::parse(&item.version[1..])?; // Starts with v        if index == 0 {            output.latest = Some(version.clone());        }        output.versions.push(version);    }    Ok(Json(output))}\n```\n\nFurthermore, we support an optional function named `resolve_version`, that can be defined to\nintercept the version resolution process. This function receives an input with an initial candidate,\neither an alias or version, and can replace it with a new candidate. The candidate must be a valid\nalias or version as defined in `load_versions`.\n\n```\n#[plugin_fn]pub fn resolve_version(    Json(input): Json,) -> FnResult> {    let mut output = ResolveVersionOutput::default();    if let UnresolvedVersionSpec::Alias(alias) = input.initial {        let candidate = if alias == \"node\" {            \"latest\"        } else if alias == \"lts-*\" || alias == \"lts/*\" {            \"stable\"        } else if alias.starts_with(\"lts-\") || alias.starts_with(\"lts/\") {            &alias[4..]        } else {            return Ok(Json(output));        };        output.candidate = Some(UnresolvedVersionSpec::Alias(candidate.to_owned()));    }    Ok(Json(output))}\n```\n\n### Detecting versions\n\nAnd lastly, we can configure how to [detect a version](/docs/proto/detection) contextually at runtime, using\nthe `detect_version_files` function and optional `parse_version_file` function. The\n`detect_version_files` function can return a list of files to locate within a directory.\n\n```\n#[plugin_fn]pub fn detect_version_files(input: Json) -> FnResult> {    Ok(Json(DetectVersionOutput {        files: vec![            \".nvmrc\".into(),            \".node-version\".into(),            \"package.json\".into(),        ],        ignore: vec![\"node_modules\".into()],    }))}\n```\n\nBy default our plugin layer will assume the version file's contents contain the literal version, and\nnothing else, like \"1.2.3\". If any of the files in the `detect_version_files` list require custom\nparsing (for example, `package.json` above), you can define the `parse_version_file` function.\n\nThis function receives the file name and contents as input, and must return the parsed version (if\napplicable).\n\n```\n#[plugin_fn]pub fn parse_version_file(Json(input): Json\n) -> FnResult {    let mut version = None;    if input.file == \"package.json\" {        let json: PackageJson = serde_json::from_str(&input.content)?;        if let Some(engines) = json.engines {            if let Some(constraint) = engines.get(\"node\") {                version = Some(UnresolvedVersionSpec::parse(constraint)?);            }        }    } else {        version = Some(UnresolvedVersionSpec::parse(input.content.trim())?);    }    Ok(Json(ParseVersionFileOutput { version }))}\n```\n\n## Implementing backend functions\n\nPlugins are powered by a set of functions that are called from the host, and are annotated with\n`#[plugin_fn]`. These are known as plugin functions, or guest functions.\n\n### Registering the backendv0.52.0\n\nBackends will also need to implement [`register_tool`](#registering-the-tool) for the managed tool\nwithin the backend.\n\nThe first step in a plugin's life-cycle is to register metadata about the plugin with the\n`register_backend` function. This function requires a unique backend identifier, which is typically\nthe identifier of the current tool being managed.\n\n```\n#[plugin_fn]pub fn register_backend(    Json(input): Json,) -> FnResult> {    Ok(Json(RegisterBackendOutput {        backend_id: get_plugin_id()?,        ..Default::default()    }))}\n```\n\n#### Referencing install scripts\n\nSome tools rely on command line scripts for installation, like `asdf`. To make these scripts\navailable (at `~/.proto/backends`), you can define the `source` field in the\n`RegisterBackendOutput`, which accepts a Git repository URL, or an HTTP URL to an archive to unpack.\nAdditionally, the `exes` field must be defined with a list of scripts that will be executed within\nthe backend.\n\nAs an example, here's how the `asdf` backend is implemented:\n\n```\n#[plugin_fn]pub fn register_backend(    Json(input): Json,) -> FnResult> {    Ok(Json(RegisterBackendOutput {        backend_id: get_plugin_id()?,        exes: vec![            \"bin/download\".into(),            \"bin/exec-env\".into(),            \"bin/install\".into(),            \"bin/latest-stable\".into(),            \"bin/list-all\".into(),            \"bin/list-bin-paths\".into(),            \"bin/list-legacy-filenames\".into(),            \"bin/parse-legacy-file\".into(),            \"bin/uninstall\".into(),        ],        source: Some(SourceLocation::Git(GitSource {            url: \"https://github.com/asdf-vm/asdf-nodejs.git\".into(),            ..Default::default()        })),    }))}\n```\n\nThese scripts can then be accessed on the file system using the following virtual path.\n\n```\nPathBuf::from(\"/proto/backends///bin/install\")\n```\n\n### Configuration schemav0.53.0\n\nIf you are using [backend configuration](#backend-configuration), you can register the shape of the\nconfiguration using the [`schematic`](https://crates.io/crates/schematic) crate and the\n`define_backend_config` function. This shape will be used to generate outputs such as JSON schemas,\nor TypeScript types.\n\n```\n#[plugin_fn]pub fn define_backend_config(_: ()) -> FnResult> {    Ok(Json(DefineBackendConfigOutput {        schema: Some(schematic::SchemaBuilder::generate::()),    }))}\n```\n\nSchematic is a heavy library, so we suggest adding the dependency like so:\n\n```\n[dependencies]schematic = { version = \"\", default-features = false, features = [\"schema\"] }\n```\n\n## Testing\n\nThe best way to test the plugin is to execute it through `proto` directly. To do this, you'll need\nto configure a `.prototools` file at the root of your plugin's repository that maps the plugin to a\ndebug build:\n\n```\n[plugins.tools] = \"file://./target/wasm32-wasip1/debug/.wasm\"\n```\n\nAnd everytime you make a change to the plugin, you'll need to rebuild it with:\n\n```\ncargo build --target wasm32-wasip1\n```\n\nWith these 2 pieces in place, you can now execute `proto` commands. Be sure you're running them from\nthe directory with the `.prototools` file, and that you're passing `--log trace`. Logs are extremely\nhelpful for figuring out what's going on.\n\n```\nproto --log trace install proto --log trace list-remote ...\n```\n\n### Unit tests\n\nTesting WASM plugins is a bit tricky, but we've taken it upon ourselves to streamline this process\nas much as possible with built-in test utilities, and Rust macros for generating common test cases.\nTo begin, install all necessary development dependencies:\n\n```\ncargo add --dev proto_pdk_test_utils starbase_sandbox tokio\n```\n\nAnd as mentioned above, everytime you make a change to the plugin, you'll need to rebuild it with:\n\n```\ncargo build --target wasm32-wasip1\n```\n\n#### Testing plugin functions\n\nThe common test case is simply calling plugin functions with a provided input and asserting the\noutput is correct. This can be achieved by creating a plugin instance with `create_plugin` and\ncalling the appropriate method.\n\n```\nuse proto_pdk_test_utils::*;use starbase_sandbox::create_empty_sandbox;#[tokio::test(flavor = \"multi_thread\")]async fn registers_metadata() {    let sandbox = create_empty_proto_sandbox();    let plugin = sandbox.create_plugin(\"id\").await;    assert_eq!(        plugin.register_tool(RegisterToolInput::default()).await,        RegisterToolOutput {            name: \"Name\".into(),            ..RegisterToolOutput::default()        }    );}\n```\n\ninfo\n\nWe suggest using this pattern for static functions that return a deterministic output from a\nprovided input, and not for dynamic functions that make HTTP requests or execute host commands.\n\n#### Generating cases from macros\n\nTo reduce the burden of writing custom tests for common flows, like downloading a pre-built,\nresolving versions, and generating shims, we provide a set of Rust decl macros that will generate\nthe tests for you.\n\nTo test downloading and installing, use `generate_download_install_tests!`. This macro requires a\nplugin ID and a real version to test with.\n\n```\nuse proto_pdk_test_utils::*;generate_download_install_tests!(\"id\", \"1.2.3\");\n```\n\nTo test version resolving, use `generate_resolve_versions_tests!`. This macro requires a plugin ID,\nand a mapping of version/aliases assertions to expectations.\n\n```\ngenerate_resolve_versions_tests!(\"id\", {    \"0.4\" => \"0.4.12\",    \"0.5.1\" => \"0.5.1\",    \"stable\" => \"1.0.0\",});\n```\n\nTo test installing and uninstalling globals, use `generate_globals_test!`. This macro requires a\nplugin ID, the dependency to install, and an optional environment variable to the globals directory.\n\n```\n// Doesn't support all use cases! If this doesn't work, implement a test case manually.generate_globals_test!(\"id\", \"dependency\", \"GLOBAL_INSTALL_ROOT\");\n```\n\nAnd lastly, to test shims, use `generate_shims_test!`. This requires a plugin ID and a list of shim\nfile names. This macro generates snapshots using [Insta](https://insta.rs/).\n\n```\ngenerate_shims_test!(\"id\", [\"primary\", \"secondary\"]);\n```\n\n## Building and publishing\n\nsuccess\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins#building-and-publishing) for steps on how\nto build and publish your plugin.\n\n## Resources\n\nSome helpful resources for learning about and building plugins.\n\n- [Official proto WASM plugins](https://github.com/moonrepo/plugins)\n\n- Plugin development kit [`proto_pdk` docs](https://docs.rs/proto_pdk/)\n\n- [`proto_pdk_test_utils` docs](https://docs.rs/proto_pdk_test_utils/)\n\n## /docs/proto/workflows\n\nSource: https://moonrepo.dev/docs/proto/workflows\n\n# Workflows\n\nWith proto, we provide multiple workflows for everyday use for you to choose from. They can be used\nindividually, or together, it's up to you!\n\n## Shims\n\nproto is primarily powered by the industry standard concept of shims. For each tool installed in\nproto, a shim file will exist at `~/.proto/shims` for the primary executable, and some secondary\nexecutables. Shims are not symlinks to the tool's binary, but are thin wrappers around\n[`proto run`](/docs/proto/commands/run), enabling [runtime version detection](/docs/proto/detection) on every\ninvocation! For example, these are equivalent:\n\n```\n$ proto run node -- --version20.0.0$ node --version20.0.0$ which node~/.proto/shims/node\n```\n\n### Setup\n\nTo make use of shims, prepend the `~/.proto/shims` directory to `PATH` in your shell profile. This\nmust come before the [bin directory](#binary-linking) if using both.\n\nIf you're using or plan to use [shell activation](#shell-activation), the `PATH` configuration\nhappens automatically, but shell activation will only work if the `proto` command is accessible,\nwhich requires `~/.proto/bin` to be in your `PATH`.\n\n## Binary linking\n\nAlternatively, we also support a non-shim based approach, which creates symlinks to a versioned\ntool's primary and secondary executables. For each tool installed in proto, a symlink will exist at\n`~/.proto/bin`.\n\n```\n$ node --version23.1.0$ which node~/.proto/bin/node -> ~/.proto/tools/node/23.1.0/bin/node\n```\n\nWhen a tool is installed into proto, we symlink many binaries based on all the versions that are\ninstalled in the toolchain. The primary binary will always point to the highest installed version,\nwhile we also create binaries for the highest major, and highest major + minor combinations. For\nexample:\n\n- `~/.proto/bin/node` - Points to the highest version.\n\n- `~/.proto/bin/node-` - Points to the highest version within that major range (`~major`). Is created for each separate major version, for example: `node-20`, `node-22`.\n\n- `~/.proto/bin/node-.` - Points to the highest version within that major + minor range (`~major.minor`). Is created for each separate major + minor version, for example: `node-20.1`, `node-22.4`.\n\n- `~/.proto/bin/node-canary` - Points to a canary install, if it exists.\n\n```\n$ node-22 --version22.5.1$ which node-22~/.proto/bin/node-22 -> ~/.proto/tools/node/22.5.1/bin/node\n```\n\ninfo\n\nNot all tools support symlinking a binary, as not all files are executable. For example, most\nNode.js package managers currently do not support this, as JavaScript files are not executable\n(especially on Windows). Shims are required for these tools.\n\n### Setup\n\nTo make use of bins, prepend the `~/.proto/bin` directory to `PATH` in your shell profile. This\nmust come after the [shim directory](#shims) if using shims.\n\nIf you're using or plan to use [shell activation](#shell-activation), the `PATH` configuration\nhappens automatically, but shell activation will only work if the `proto` command is accessible,\nwhich requires `~/.proto/bin` to be in your `PATH`.\n\nwarning\n\nThis directory must always exist in `PATH`, as the official proto binaries `~/.proto/bin/proto` and\n`~/.proto/bin/proto-shim` are located here. If you move those binaries to another location, you can\nomit `~/.proto/bin` from `PATH` if you like.\n\n## Shell activationv0.38.0\n\nOur last workflow is what we call shell activation (or shell hooks), and it's where the proto\nenvironment is setup/reset every time you change directories. If you're coming from another version\nmanager, you may be familiar with this kind of workflow.\n\nSo how does this work exactly? In your shell profile, you'll evaluate a call to\n[`proto activate `](/docs/proto/commands/activate), which generates a bunch of shell specific syntax\nthat registers a hook for \"run this code when the current directory or prompt line changes\". Once\nthis hook is registered and you run `cd` (for example), proto will...\n\n- Load all `.prototools` files\n\n- Extract tools with a [configured version](/docs/proto/config#pinning-versions)\n\n- For each tool: Load associated WASM plugin\n\n- Export environment variables based on [`[env]`](/docs/proto/config#env) and [`[tools.*.env]`](/docs/proto/config#toolsenv)\n\n- Prepend `PATH` with tool-specific directories (like local and global executables) for the detected version\n\n```\n$ cd /some/path && node --version20.0.0$ cd /another/path && node --version18.0.0\n```\n\n### Setup\n\nView the [`proto activate`](/docs/proto/commands/activate#setup) documentation for information on how to setup\nyour shell profile for this workflow.\n\n## Comparison\n\nThe workflows above may come across as information overload, so we've provided the following\ncomparison table outlining the features each workflow supports.\n\nShims Bins Activate\n\nRuntime version detection    only when the hook triggers\n\nSupports multiple versions   \n\nFixed to a single version  with arg or env var   if not using shims\n\nIncludes all tool executables   \n\nIncludes tool globals/packages   \n\nExports environment variables   \n\nPrepends `PATH`   \n\nCan pin proto's version   \n\n## /docs/run-task\n\nSource: https://moonrepo.dev/docs/run-task\n\n# Run a task\n\n2 min\n\nEven though we've [created a task](/docs/create-task), it's not useful unless we run it, which is done\nwith the [`moon run `](/docs/commands/run) command. This command requires a single argument, a\n[primary target](/docs/concepts/target), which is the pairing of a scope and task name. In the example\nbelow, our project is `app`, the task is `build`, and the target is `app:build`.\n\n```\n$ moon run app:build\n```\n\nWhen this command is ran, it will do the following:\n\n- Generate a directed acyclic graph, known as the action (dependency) graph.\n\n- Insert [`deps`](/docs/config/project#deps) as targets into the graph.\n\n- Insert the primary target into the graph.\n\n- Run all tasks in the graph in parallel and in topological order (the dependency chain).\n\n- For each task, calculate [hashes](/docs/concepts/cache) and either: On cache hit, exit early and return the last run.\n\n- On cache miss, run the task and generate a new cache.\n\n## Running dependents\n\nmoon will always run upstream dependencies ([`deps`](/docs/config/project#deps)) before running the\nprimary target, as their outputs may be required for the primary target to function correctly.\n\nHowever, if you're working on a project that is shared and consumed by other projects, you may want\nto verify that downstream dependents have not been indirectly broken by any changes. This can be\nachieved by passing the `--dependents` option, which will run dependent targets after the primary\ntarget.\n\n```\n$ moon run app:build --dependents\n```\n\n## Running based on affected files only\n\nBy default [`moon run`](/docs/commands/run) will always run the target, regardless if files have\nactually changed. However, this is typically fine because of our\n[smart hashing & cache layer](/docs/concepts/cache). With that being said, if you'd like to only run a\ntarget if files have changed, pass the `--affected` flag.\n\n```\n$ moon run app:build --affected\n```\n\nUnder the hood, we extract locally touched (created, modified, staged, etc) files from your\nconfigured [VCS](/docs/config/workspace#vcs), and exit early if no files intersect with the task's\n[inputs](/docs/config/project#inputs).\n\n### Using remote changes\n\nIf you'd like to determine affected files based on remote changes instead of local changes, pass the\n`--remote` flag. This will extract touched files by comparing the current `HEAD` against the\n[`vcs.defaultBranch`](/docs/config/workspace#defaultbranch).\n\n```\n$ moon run app:build --affected --remote\n```\n\n### Filtering based on change status\n\nWe can take this a step further by filtering down affected files based on a change status, using the\n`--status` option. This option accepts the following values: `added`, `deleted`, `modified`,\n`staged`, `unstaged`, `untracked`. If not provided, the option defaults to all.\n\n```\n$ moon run app:build --affected --status deleted\n```\n\nMultiple status can be provided by passing the `--status` option multiple times.\n\n```\n$ moon run app:build --affected --status deleted --status modified\n```\n\n## Passing arguments to the underlying command\n\nIf you'd like to pass arbitrary arguments to the underlying task command, in addition to the already\ndefined [`args`](/docs/config/project#args), you can pass them after `--`. These arguments are appended\nas-is.\n\n```\n$ moon run app:build -- --force\n```\n\nThe `--` delimiter and any arguments must be defined last on the command line.\n\n## Advanced run targeting\n\nBy this point you should have a basic understanding of how to run tasks, but with moon, we want to\nprovide support for advanced workflows and development scenarios. For example, running a target in\nall projects:\n\n```\n$ moon run :build\n```\n\nOr perhaps running a target based on a query:\n\n```\n$ moon run :build --query \"language=[javascript, typescript]\"\n```\n\nJump to the official [`moon run` documentation](/docs/commands/run) for more examples!\n\n## Next steps\n\n[Migrate to moon](/docs/migrate-to-moon)[Learn about tasks](/docs/concepts/task)[Learn about `moon run`](/docs/commands/run)\n\n## /docs/setup-toolchain\n\nSource: https://moonrepo.dev/docs/setup-toolchain\n\n# Setup toolchain\n\n5 min\n\nOne of moon's most powerful features is the [toolchain](/docs/concepts/toolchain), which automatically\nmanages, downloads, and installs Node.js and other languages behind the scenes using\n[proto](/proto). It also enables [advanced functionality](/docs/how-it-works/languages#tier-2--platform)\nfor task running based on the platform (language and environment combination) it runs in.\n\nThe toolchain is configured with [`.moon/toolchains.yml`](/docs/config/toolchain).\n\ntip\n\nChange the language dropdown at the top right to switch the examples!\n\n## How it works\n\nFor more information on the toolchain, our tier based support, and how languages integrate into\nmoon, refer to the official [\"how it works\" language guide](/docs/how-it-works/languages) and the\n[toolchain concept](/docs/concepts/toolchain) documentation!\n\ninfo\n\nThe toolchain is optional but helps to solve an array of issues that developers face in their\nday-to-day.\n\n## Enabling a toolchain\n\nBy default all tasks run through the\n[system toolchain](/docs/how-it-works/languages#system-language-and-toolchain) and inherit no special\nfunctionality. If you want to take advantage of this functionality, like dependency hashing, package\nshorthand execution, and lockfile management, you'll need to enable the toolchain in\n[`.moon/toolchains.yml`](/docs/config/toolchain). Otherwise, you can skip to the\n[create a task](/docs/create-task) guide.\n\nBegin by declaring the necessary configuration block, even if an empty object! This configuration\ncan also be injected using the [`moon toolchain add `](/docs/commands/toolchain/add) command\n(doesn't support all languages).\n\n.moon/toolchains.yml\n\n```\njavascript:  packageManager: 'yarn'node: {}yarn: {}\n```\n\nAlthough we've enabled the toolchain, language binaries must exist on `PATH` for task execution to\nfunction correctly. Continue reading to learn how to automate this flow using tier 3 support.\n\n## Automatically installing a tool\n\nOne of the best features of moon is its integrated toolchain and automatic download and installation\nof programming languages (when supported), for all developers and machines that moon runs on. This\nfeature solves the following pain points:\n\n- Developers running tasks using different versions of languages.\n\n- Version drift of languages between machines.\n\n- Languages being installed through different version managers or install scripts.\n\n- Language binaries not existing on `PATH`.\n\n- How shell profiles should be configured.\n\nIf you have dealt with any of these pain points before and would like to eliminate them for you and\nall your developers, you can try enabling moon's tier 3 support for supported tools. This is easily\ndone by defining the `version` field for each toolchain.\n\n.moon/toolchains.yml\n\n```\njavascript:  packageManager: 'yarn'node:  version: '20.0.0'yarn:  version: '4.0.0'\n```\n\nWhen the `version` field is configured, moon will download and install the tool when a related task\nis executed for the first time! It will also set the correct `PATH` lookups and environment\nvariables automatically. Amazing right?\n\n## Next steps\n\n[Create a task](/docs/create-task)[Configure `.moon/toolchains.yml` further](/docs/config/toolchain)[Learn about the toolchain](/docs/concepts/toolchain)\n\n## /docs/setup-workspace\n\nSource: https://moonrepo.dev/docs/setup-workspace\n\n# Setup workspace\n\n2 min\n\nOnce moon has been [installed](/docs/install), we must setup the [workspace](/docs/concepts/workspace),\nwhich is denoted by the `.moon` folder  this is known as the workspace root. The workspace is in\ncharge of:\n\n- Integrating with a version control system.\n\n- Defining configuration that applies to its entire tree.\n\n- Housing [projects](/docs/concepts/project) to build a [project graph](/docs/how-it-works/project-graph).\n\n- Running tasks with the [action graph](/docs/how-it-works/action-graph).\n\n## Initializing the repository\n\nLet's scaffold and initialize moon in a repository with the [`moon init`](/docs/commands/init) command.\nThis should typically be ran at the root, but can be nested within a directory.\n\n```\n$ moon init\n```\n\nWhen executed, the following operations will be applied.\n\n- Creates a `.moon` folder with a [`.moon/workspace.yml`](/docs/config/workspace) configuration file.\n\n- Appends necessary ignore patterns to the relative `.gitignore`.\n\n- Infers the version control system from the environment.\n\ninfo\n\nIf you're investigating moon, or merely want to prototype, you can use `moon init --minimal` to\nquickly initialize and create minimal configuration files.\n\n## Migrate from an existing build system\n\nLooking to migrate from Nx or Turborepo to moon? Use our\n[`moon ext migrate-nx`](/docs/guides/extensions#migrate-nx) or\n[`moon ext migrate-turborepo`](/docs/guides/extensions#migrate-turborepo) commands for a (somewhat)\nseamless migration!\n\nThese extensions will convert your existing configuration files to moon's format as best as\npossible, but is not a requirement.\n\n## Configuring a version control system\n\nmoon requires a version control system (VCS) to be present for functionality like file diffing,\nhashing, and revision comparison. The VCS and its default branch can be configured through the\n[`vcs`](/docs/config/workspace#vcs) setting.\n\n.moon/workspace.yml\n\n```\nvcs:  manager: 'git'  defaultBranch: 'master'\n```\n\nmoon defaults to `git` and the settings above, so feel free to skip this.\n\n## Next steps\n\n[Create a project](/docs/create-project)[Configure `.moon/workspace.yml` further](/docs/config/workspace)[Learn about the workspace](/docs/concepts/workspace)\n\n## /docs/terminology\n\nSource: https://moonrepo.dev/docs/terminology\n\n# Terminology\n\nTerm Description\n\nAction A node within the dependency graph that gets executed by the action pipeline.\n\nAction pipeline Executes actions from our dependency graph in topological order using a thread pool.\n\nAffected Touched by an explicit set of inputs or sources.\n\nCache Files and outputs that are stored on the file system to provide incremental builds and increased performance.\n\nCI Continuous integration. An environment where tests, builds, lints, etc, are continuously ran on every pull/merge request.\n\nDependency graph A directed acyclic graph (DAG) of targets to run and their dependencies.\n\nDownstream Dependents or consumers of the item in question.\n\n[Generator](/docs/guides/codegen) Generates code from pre-defined templates.\n\nHash A unique SHA256 identifier that represents the result of a ran task.\n\nHashing The mechanism of generating a hash based on multiple sources: inputs, dependencies, configs, etc.\n\nLTS Long-term support.\n\nDependency manager Installs and manages dependencies for a specific tool (`npm`), using a manifest file (`package.json`).\n\nPlatform An internal concept representing the integration of a programming language (tool) within moon, and also the environment + language that a task runs in.\n\nPrimary target The target that was explicitly ran, and is the dependee of transitive targets.\n\n[Project](/docs/concepts/project) An collection of source and test files, configurations, a manifest and dependencies, and much more. Exists within a [workspace](/docs/concepts/workspace)\n\nRevision In the context of a VCS: a branch, revision, commit, hash, or point in history.\n\nRuntime An internal concept representing the platform + version of a tool.\n\n[Target](/docs/concepts/target) A label and reference to a task within the project, in the format of `project:task`.\n\n[Task](/docs/concepts/task) A command to run within the context of and configured in a [project](/docs/concepts/project).\n\nTemplate A collection of files that get scaffolded by a generator.\n\nTemplate file An individual file within a template.\n\nTemplate variable A value that is interpolated within a template file and its file system path.\n\n[Token](/docs/concepts/token) A value within task configuration that is substituted at runtime.\n\nTool A programming language or dependency manager within the [toolchain](/docs/concepts/toolchain).\n\n[Toolchain](/docs/concepts/toolchain) Installs and manages tools within the [workspace](/docs/concepts/workspace).\n\nTransitive target A target that is the dependency of the primary target, and must be ran before the primary.\n\nTouched A file that has been created, modified, deleted, or changed in any way.\n\nUpstream Dependencies or producers of the item in question.\n\nVCS Version control system (like Git or SVN).\n\n[Workspace](/docs/concepts/workspace) Root of the moon installation, and houses one or many [projects](/docs/concepts/project). Also refers to package manager workspaces (like Yarn).\n\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\n- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\n- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\n- Capture results: success=171, failed=0.\n----\n",
              "additions": 19948,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/readmes/protobuf-schema-research.md",
              "before": "",
              "after": "# Protobuf Schema Research Notes\n\nLast reviewed: 2026-02-15\n\n## Scope\n\n- Capture practical notes for authoring new `.proto` schemas.\n- Support both `proto2` and `proto3` workflows.\n- Document `protoc` usage for Rust and TypeScript generation paths.\n\n## Primary web sources\n\n- OpenCode skills docs: https://opencode.ai/docs/skills/\n- Protoc install docs: https://protobuf.dev/installation/\n- Proto2 guide: https://protobuf.dev/programming-guides/proto2/\n- Proto3 guide: https://protobuf.dev/programming-guides/proto3/\n- Field presence note: https://protobuf.dev/programming-guides/field_presence/\n- Rust generated code guide: https://protobuf.dev/reference/rust/rust-generated/\n- Rust build reference: https://protobuf.dev/reference/rust/building-rust-protos/\n- `prost-build` docs: https://docs.rs/prost-build/latest/prost_build/\n- `tonic-prost-build` docs: https://docs.rs/tonic-prost-build/latest/tonic_prost_build/\n- `ts-proto` README: https://github.com/stephenh/ts-proto\n- `protobuf-ts` README: https://github.com/timostamm/protobuf-ts\n\n## Proto2 vs proto3 (what matters most)\n\n- **Syntax line**\n  - `proto2`: `syntax = \"proto2\";`\n  - `proto3`: `syntax = \"proto3\";`\n- **Cardinality labels**\n  - `proto2`: `optional`, `required` (strongly discouraged), `repeated`, `map`.\n  - `proto3`: `optional` (recommended), implicit singular (legacy style), `repeated`, `map`.\n- **Required fields**\n  - `proto2` only, but strongly discouraged for new schemas.\n  - Not available in `proto3`.\n- **Scalar default overrides**\n  - `proto2`: supports `[default = ...]` on singular non-message fields.\n  - `proto3`: no custom scalar defaults; language defaults apply.\n- **Field presence**\n  - `proto2`: explicit presence for singular fields.\n  - `proto3`: explicit presence only with `optional` (or oneof/message); otherwise implicit for basic scalars.\n  - Proto docs recommend using `optional` in proto3 for smoother compatibility.\n- **Enum zero value**\n  - `proto3`: first enum value must be `0`.\n  - `proto2`: first value is default; using `_UNSPECIFIED = 0` is still safest.\n- **Extensions and groups**\n  - `proto2`: supports extensions; groups exist but are deprecated.\n  - `proto3`: no general extension fields/groups in the same way.\n- **Repeated scalar packing**\n  - `proto2`: use `[packed = true]` for new repeated numeric fields.\n  - `proto3`: repeated scalar numerics are packed by default.\n- **Unknown fields**\n  - Preserved in both proto2 and proto3 (binary format).\n- **Interop note**\n  - Proto2 and proto3 messages can interoperate across imports, but proto2 enums cannot be used directly in proto3 syntax.\n\n## Safe schema evolution checklist\n\n- Never renumber existing fields.\n- Never reuse deleted field numbers.\n- Reserve removed field numbers and names using `reserved`.\n- Prefer additive changes: add new fields, do not mutate existing wire meaning.\n- Avoid `required` for new work.\n- Use `oneof` when exactly one field must be present.\n\n## Protoc usage basics\n\n- Verify installation:\n\n```bash\nprotoc --version\n```\n\n- General compile shape:\n\n```bash\nprotoc -I proto --<LANG>_out=gen/<lang> proto/path/to/file.proto\n```\n\n- Validate schema and emit descriptor set (useful for CI checks):\n\n```bash\nprotoc -I proto --include_imports --descriptor_set_out=gen/schema.pb proto/path/to/file.proto\n```\n\n## Rust generation patterns\n\nRust codegen is commonly done in `build.rs` wrappers that call `protoc` for you.\n\n- `prost-build` example (`build.rs`):\n\n```rust\nfn main() -> std::io::Result<()> {\n    prost_build::compile_protos(&[\"proto/service.proto\"], &[\"proto\"])?;\n    Ok(())\n}\n```\n\n- `tonic-prost-build` example (`build.rs`):\n\n```rust\nfn main() {\n    tonic_prost_build::configure()\n        .compile_protos(&[\"proto/service.proto\"], &[\"proto\"])\n        .unwrap();\n}\n```\n\n- `protobuf` crate ecosystem example (`build.rs`, from protobuf-example):\n\n```rust\nuse protobuf_codegen::CodeGen;\n\nfn main() {\n    CodeGen::new()\n        .inputs([\"proto_example/foo.proto\", \"proto_example/bar/bar.proto\"])\n        .include(\"proto\")\n        .dependency(protobuf_well_known_types::get_dependency(\"protobuf_well_known_types\"))\n        .generate_and_compile()\n        .unwrap();\n}\n```\n\n## TypeScript generation patterns\n\nTypeScript typically uses `protoc` plugins.\n\n- `ts-proto` quickstart:\n\n```bash\nprotoc \\\n  --plugin=./node_modules/.bin/protoc-gen-ts_proto \\\n  --ts_proto_out=gen/ts \\\n  --ts_proto_opt=esModuleInterop=true \\\n  -I proto \\\n  proto/path/to/file.proto\n```\n\n- `@protobuf-ts/plugin` quickstart:\n\n```bash\nnpx protoc --ts_out gen/ts --proto_path proto proto/path/to/file.proto\n```\n\n## Agent defaults for new schema requests\n\n- Ask which syntax to use: `proto2` or `proto3`.\n- If unspecified, recommend `proto3` with explicit `optional` for scalar presence.\n- Ask which TypeScript generator to target: `ts-proto` or `@protobuf-ts/plugin`.\n- If unspecified, recommend `ts-proto` for idiomatic TS interfaces and flexible options.\n- Always call out features that are syntax-specific (for example `required`/extensions/default overrides in proto2).\n",
              "additions": 151,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "scripts/scrape_moon_docs.sh.ts",
              "before": "",
              "after": "#!/usr/bin/env bun\n\nimport { mkdirSync } from \"node:fs\";\nimport { dirname, resolve } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n\ntype ScrapeResult = {\n  url: string;\n  ok: boolean;\n  markdown?: string;\n  error?: string;\n};\n\nconst SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\nconst DOCS_ROOT = \"https://moonrepo.dev/docs\";\nconst DEFAULT_OUTPUT_RELATIVE =\n  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\nconst CONCURRENCY = 4;\n\nfunction decodeEntities(value: string): string {\n  return value\n    .replaceAll(\"&amp;\", \"&\")\n    .replaceAll(\"&quot;\", '\"')\n    .replaceAll(\"&apos;\", \"'\")\n    .replaceAll(\"&#x27;\", \"'\")\n    .replaceAll(\"&#39;\", \"'\")\n    .replaceAll(\"&nbsp;\", \" \")\n    .replaceAll(\"&lt;\", \"<\")\n    .replaceAll(\"&gt;\", \">\");\n}\n\nfunction stripJinaEnvelope(markdown: string): string {\n  return markdown\n    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n    .trim();\n}\n\nfunction stripTags(value: string): string {\n  return value.replace(/<[^>]+>/g, \"\");\n}\n\nfunction plainTextFromHtml(value: string): string {\n  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n}\n\nfunction extractMainHtml(html: string): string {\n  const markdownBlockMatch = html.match(\n    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n  );\n\n  if (markdownBlockMatch?.[1]) {\n    return markdownBlockMatch[1];\n  }\n\n  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n  if (articleMatch?.[1]) {\n    return articleMatch[1];\n  }\n\n  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n  return mainMatch?.[1] ?? html;\n}\n\nfunction htmlToMarkdown(html: string): string {\n  let content = extractMainHtml(html);\n\n  content = content\n    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n\n  content = content.replace(\n    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n    (_match, code) => {\n      const normalizedCode = decodeEntities(\n        stripTags(code)\n          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n          .replace(/\\n{3,}/g, \"\\n\\n\")\n          .trim(),\n      );\n\n      if (!normalizedCode) {\n        return \"\";\n      }\n\n      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n    },\n  );\n\n  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n    const normalizedCode = decodeEntities(stripTags(code)).trim();\n    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n  });\n\n  content = content.replace(/<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi, (_m, href, label) => {\n    const text = plainTextFromHtml(label);\n    if (!text) {\n      return \"\";\n    }\n\n    return `[${text}](${decodeEntities(href)})`;\n  });\n\n  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n    const heading = plainTextFromHtml(inner);\n    if (!heading) {\n      return \"\";\n    }\n\n    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n  });\n\n  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n    const line = plainTextFromHtml(inner);\n    return line ? `- ${line}\\n` : \"\";\n  });\n\n  content = content\n    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n      const cell = plainTextFromHtml(inner);\n      return cell ? `${cell} ` : \"\";\n    });\n\n  content = decodeEntities(content)\n    .replace(/<[^>]+>/g, \"\")\n    .replace(/[ \\t]+\\n/g, \"\\n\")\n    .replace(/\\n{3,}/g, \"\\n\\n\")\n    .trim();\n\n  return content;\n}\n\nfunction extractDocsUrls(sitemapXml: string): string[] {\n  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n    decodeEntities(match[1]?.trim() ?? \"\"),\n  )\n    .filter((url) => url.startsWith(DOCS_ROOT))\n    .filter((url) => !url.includes(\"/docs/tags\"))\n    .filter((url) => !url.includes(\"#\"));\n\n  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n}\n\nasync function fetchText(url: string): Promise<string> {\n  const response = await fetch(url, {\n    headers: {\n      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Request failed (${response.status}) for ${url}`);\n  }\n\n  return await response.text();\n}\n\nasync function mapConcurrent<T, R>(\n  values: T[],\n  limit: number,\n  map: (value: T, index: number) => Promise<R>,\n): Promise<R[]> {\n  const results = new Array<R>(values.length);\n  let index = 0;\n\n  async function worker(): Promise<void> {\n    while (true) {\n      const currentIndex = index;\n      index += 1;\n\n      if (currentIndex >= values.length) {\n        return;\n      }\n\n      results[currentIndex] = await map(values[currentIndex], currentIndex);\n    }\n  }\n\n  const workerCount = Math.min(limit, values.length);\n  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n  return results;\n}\n\nasync function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n\n  try {\n    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n    try {\n      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n\n      if (markdown) {\n        return {\n          url,\n          ok: true,\n          markdown,\n        };\n      }\n    } catch {\n      // Fall through to direct HTML scrape.\n    }\n\n    const html = await fetchText(url);\n    const markdown = htmlToMarkdown(html);\n\n    if (!markdown) {\n      return {\n        url,\n        ok: false,\n        error: \"No markdown content returned from HTML fallback\",\n      };\n    }\n\n    return {\n      url,\n      ok: true,\n      markdown,\n    };\n  } catch (error) {\n    return {\n      url,\n      ok: false,\n      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n    };\n  }\n}\n\nfunction buildHeader(urlCount: number, capturedAt: string): string {\n  return [\n    \"----\",\n    \"## External Docs Snapshot // moonrepo\",\n    \"\",\n    `- Captured: ${capturedAt}`,\n    `- Source root: ${DOCS_ROOT}`,\n    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)`,\n    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildFooter(successCount: number, failureCount: number): string {\n  return [\n    \"\",\n    \"----\",\n    \"## Notes / Comments / Lessons\",\n    \"\",\n    \"- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\",\n    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildPageSection(result: ScrapeResult): string {\n  if (!result.ok) {\n    return [\n      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n      \"\",\n      `Source: ${result.url}`,\n      \"\",\n      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n      \"\",\n    ].join(\"\\n\");\n  }\n\n  return [\n    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n    \"\",\n    `Source: ${result.url}`,\n    \"\",\n    result.markdown?.trim() ?? \"\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nconst repoRoot = findRepoRoot(import.meta.dir);\nconst outputArg = Bun.argv[2];\nconst outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n\nconst sitemapXml = await fetchText(SITEMAP_URL);\nconst docsUrls = extractDocsUrls(sitemapXml);\n\nif (docsUrls.length === 0) {\n  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n}\n\nconst results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n  scrapeDocsPage(url, index + 1, docsUrls.length),\n);\n\nconst successCount = results.filter((result) => result.ok).length;\nconst failureCount = results.length - successCount;\nconst capturedAt = new Date().toISOString();\n\nconst content = [\n  buildHeader(docsUrls.length, capturedAt),\n  ...results.map(buildPageSection),\n  buildFooter(successCount, failureCount),\n].join(\"\\n\");\n\nmkdirSync(dirname(outputPath), { recursive: true });\nawait Bun.write(outputPath, content);\n\nconsole.log(\n  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n);\n",
              "additions": 314,
              "deletions": 0,
              "status": "added"
            }
          ]
        },
        "agent": "build",
        "model": {
          "providerID": "openai",
          "modelID": "gpt-5.3-codex"
        },
        "variant": "high",
        "id": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "text",
          "text": "Download and scrape in to docs/external/moonrepo - the moon mono repo docs - https://moonrepo.dev/docs - at the top add a ---- dermarked section/header with your own summary / key words - and ex. Ad the end, add another ---- demarker footer with notes/  comments/ lessons etc. - these should be in .ext.md - in markdown - if you need helpers to scrape or convert to markdown - feel freel to use our @scripts/ @.opencode/skills/script-authoring/ system to make scripts + @scripts/helpers/ for this process",
          "id": "prt_c6482a8dc001HIZhkr8KWKm16b",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8db001Hr7xDkYcxWeSRO"
        },
        {
          "type": "file",
          "mime": "application/x-directory",
          "filename": "scripts/",
          "url": "file:///Users/alex/repos/vfp/dark-factory/scripts/",
          "source": {
            "text": {
              "value": "@scripts/",
              "start": 399,
              "end": 408
            },
            "type": "file",
            "path": "scripts/"
          },
          "id": "prt_c6482a8dc002aEIweWAxO4vL9D",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8db001Hr7xDkYcxWeSRO"
        },
        {
          "type": "file",
          "mime": "application/x-directory",
          "filename": ".opencode/skills/script-authoring/",
          "url": "file:///Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/",
          "source": {
            "text": {
              "value": "@.opencode/skills/script-authoring/",
              "start": 409,
              "end": 444
            },
            "type": "file",
            "path": ".opencode/skills/script-authoring/"
          },
          "id": "prt_c6482a8dc003YMjKakO1sp1U6q",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8db001Hr7xDkYcxWeSRO"
        },
        {
          "type": "file",
          "mime": "application/x-directory",
          "filename": "scripts/helpers/",
          "url": "file:///Users/alex/repos/vfp/dark-factory/scripts/helpers/",
          "source": {
            "text": {
              "value": "@scripts/helpers/",
              "start": 470,
              "end": 487
            },
            "type": "file",
            "path": "scripts/helpers/"
          },
          "id": "prt_c6482a8dc004wqBRX4Ibqs2AOX",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8db001Hr7xDkYcxWeSRO"
        },
        {
          "type": "text",
          "text": "Called the Read tool with the following input: {\"filePath\":\"/Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/\"}",
          "synthetic": true,
          "id": "prt_c6482a8e5001R7eH6GmwmPR0Jq",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8db001Hr7xDkYcxWeSRO"
        },
        {
          "type": "text",
          "text": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/</path>\n<type>directory</type>\n<entries>\nSKILL.md\n\n(1 entries)\n</entries>",
          "synthetic": true,
          "id": "prt_c6482a8e5002wvsaaLK8XE7NtR",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8db001Hr7xDkYcxWeSRO"
        },
        {
          "type": "text",
          "text": "Called the Read tool with the following input: {\"filePath\":\"/Users/alex/repos/vfp/dark-factory/scripts/\"}",
          "synthetic": true,
          "id": "prt_c6482a8e5003r8nvsI2YBe16yz",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8db001Hr7xDkYcxWeSRO"
        },
        {
          "type": "text",
          "text": "<path>/Users/alex/repos/vfp/dark-factory/scripts/</path>\n<type>directory</type>\n<entries>\nhelpers/\ninstall.sh.ts\nproto_install.sh.ts\n\n(3 entries)\n</entries>",
          "synthetic": true,
          "id": "prt_c6482a8e5004QJpZo11ZRzxD76",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8db001Hr7xDkYcxWeSRO"
        },
        {
          "type": "text",
          "text": "Called the Read tool with the following input: {\"filePath\":\"/Users/alex/repos/vfp/dark-factory/scripts/helpers/\"}",
          "synthetic": true,
          "id": "prt_c6482a8e5005h4MEU1e1IOuQ2q",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8db001Hr7xDkYcxWeSRO"
        },
        {
          "type": "text",
          "text": "<path>/Users/alex/repos/vfp/dark-factory/scripts/helpers/</path>\n<type>directory</type>\n<entries>\nrun_root.sh.ts\nrun_steps.sh.ts\n\n(2 entries)\n</entries>",
          "synthetic": true,
          "id": "prt_c6482a8e5006uN0Y5RB0mf24tu",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8db001Hr7xDkYcxWeSRO"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212810477,
          "completed": 1771212824091
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 21235,
          "input": 20576,
          "output": 659,
          "reasoning": 626,
          "cache": {
            "read": 0,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6482a8ed0017iXqRjLpqEruSN",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c6482b19b001bJJ0BEvahzIFkG",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8ed0017iXqRjLpqEruSN"
        },
        {
          "type": "reasoning",
          "text": "**Planning multi-page doc scraping**",
          "metadata": {
            "openai": {
              "itemId": "rs_04832480374138c7016992900d415c8193b16ee70c44e12c2f",
              "reasoningEncryptedContent": "gAAAAABpkpAXgRMMoHcepJOOxL0N_VOHTXhi3F6dCAz0CnOnSCIV1AfsT50TS2OYzBEa_d7luC1fvyeujBU3R92aLUnqAhFmp8msPdnrgtdODE9LpmmRthGiFt-KF9gbDaor0M87Lq97P9ywqGysYwsxyYVLvrewBSZog0XdxpZhkkMRsTlj59sl8Kr2txnzJXISmd06Cw8FQMNeJSZXb384L--0VSTBezwY9YDtssAL8b1Wg7SFClXRR8IX1gFPXIOAIjddieRj2FWI3cTFZMQ0NlqVVx6z3qkov1mbiJ5i_a2GWrUrdc9hRyAD7j04REbj-mf3zBQeDj-KBiOGh1QW7dDPnwZdD-alZlwSXfQXZebRfd-h0i-m3jI-LQBPEX9mmknlXxKvm9XZfxEH27AdPn6bV6hclNhTgA7Pmhs86WPxUGufSi9RX5Gd-OD5ssy-CaW-QHw6FJHbOtPWOX20ED5yU6Et79AZYhJ5_aCkEbSMObJBeA2TACcXUuGdkZOfz8L6nibF2wTt4p4N3b3fqpY_-ptvRNWrTuCf7KlZ2UyLSCJulVHF3uXCOKYhblKTFnFjz8cBu8hvClGjH2Z_RFc4IOj0JFRfcir6s59BS1LF6E-Wm4asQK1yLtf-3Qw65KZk8ygkvQWY8gbDSeidh24hO51ZS68_JqS_L_2J8VQy3T5nvHEDsJH0iLFTwoNwmS6UmR-nYzxtg_5R8v2tAs_ukquGa1LzlpUcvtpD3pN4VgXtZKHtEuwZmkK9r_v2eZxGcyLsSTAvS2ZhzLTAIF4XO3rrFaVrEKR9a1SblM-2tyH0mIfeYMkFVVBAa-OeP6py_0P1Vuuu9naRAILEfbERpKu-ZxszVpGe6WQXZnVQCHt4gaTznswtaTIMe3kMqxoXb_R-rsTmnc3c0J5bwYsJQkVhFPEwG8wW5x4rvbBx8vj4rv-1t7DoPuCNaRFEVxi-ip9vWwDGidwaWq8tXdxoAqRgXnqPVDkF_modijBBatJRD81hoNM_xsKD2HdCNLgV-LaMF7HVBckIzAGU2OMHGgGmPW3nQcdSJ1SEInVYBFPYzvIRbSh7d3u1ag8k3FPAH0a_FQg6U8zMH2Fc2-dVINx1C82zPDl5k03g4kUE8LtANv1anQgC8E7ZMVNdeFNVzRqhcWALxKQjb0HyPTDM4lDn0V39_iRuRK9uFdNaZaI8xOp6XcO4OdmbW8Lk2FlpuAyXmQyXNhENUU6bFGe6dgTuv5Svt2HjaLF8VJWWKiTmT59MNFlRgo9e8kfZyMQJuHBpGKYjehu1DFrjs_L2tgROVoMh9zs97lfJ69w23qNI4xUIl735stVY8WsPujKXHKMznxOzUyWuc3edDt739JSAprvAmEXPZCEMpKXVvgoCQ0eHmARWjwrSj8kY-_pKbwaqMmvdA1QjFFN7pJqZ_OTFGT35m-pmOjIu2Ff7_ByqO6c5h6f3ibj4zx455_ecEoWdgVz5j2fQOULbNx7Cjr_Za7Gdq4Fc7_g55rtok2Zxk7YTR3McA_6PopOBDY04UNoI2G3xHUs5urs8yK3f7EelIfOdPQVpVlGGiOGFpJjxf7mtzKDl0lt34Y8aid8U4p-6T6wd2CQ2q8qu5XbLlNBQNLdMqpOJbIaWdt7qw-Bo0fmgJOdqbDSxeVbQV6AGFW2b1xb-iRAAM040Mr-E_Rftm1gzIwWi4KSJR0gN9eCWEnOVxIW1IXM8YjobrpD6wGmpdhpWo45fqa3eaV1DjzPds-tSubGiW6_3ghjZ2CnP-cP7EcmymxDczaRNpSlQhcz5aDcHFxEx0GpzlHSFdjWG68Eo8a7HPjfCFm9451S9WaiZXc2VY7FwHUb6oWNwcyNeAmjdIhiEednnLegYxrBP52Maw11uUKP6Hc486GecjTGto7ZRgAihMRHjMTceNz4vxSkEXVl75UQYhUtixefC5xXyufl7XbVm_L3aNd6lgPGixVKUAX4mczkFqaQdl9g5IK8-Zqf5OFwi12S56H5fMlAhOJM-pc2AyCEq9KKA0O0mrCbpyFxvEr642BnvayNrJJ0N0BuL2hu2HpGeGgmcFgqRPlM7nftCazTOLQ3scoy3sOATiL0zzQ9GTSGso4SM6D9FeNMKBHzxUyLkJW5Fggwi1oHnfLAgVboRc94BUVY2BIRdSWUjbBfbc0qvbXicQ-rTsIBxnkDFJSsvQsPvgRtwLBMC71aj14EbP1R-PpoBt4aBMzHpu0vZdFdd55zwVHHvStr59eCmQb49EoYbwfPzyA4neZzkVkLm1KfuHnucZ-71p9hKD71dfwa5MmutTs2HhvIFPe6WZVUcstZfcbTRKOJ4FKDWf53Pz_CwgbWWfhPEtFQnON9rZII69aWWKY4NzFUm0M9_gPSUtkjHKzaii5YiQ2RUCev19hGOJrP-mFkYZEl3JOLyej8wKkUWwKxyPbKar6QBpKT1q6JuosUERxiLvWWDudoAjZUWg_eIFcE7yyjM8pHpX0AgkFLaECCzS1wjX5PF7lY-tjp6c4suNOkEH9zJ42Bc7VIWBPSCZAOoAWGZMQSXNSG0JkrKYphELnT8GvYqlhW88wjXgD2O8lVGEO2YBqix0zAaFjRekp2PNjiFyzNRBPcHrrBEFOdTJpt2RQCZDNNAvJF_1W0tVT1Vp1GjAil3nZowAlQg5A42APqTYCKGPQ4uYIYx84MxC39sGjWykSv6g-PdhtgM6r_4OuPN5HNQgyR1BT5rOuHlU5QNmDbKDaycrXKa4_LNmQundd_yL8is9hY3D2iVkwhe_-wjzN7vvtaU4INbe0JEqyuF0RGHwvcz7d5v9Lm8ZYusYDw8btzdrN9VCMqdY65LOioNgKOfknyutq9yFogTD1BGkaXvHnNMuQijTlDhjF5xJxOF5lVydeSKzgdjMTwQ-5tFXqsuquhD1-A-vuYgVsEuhXrq8XVtj21AlCeXN3rv13kKS8ROHhyLjGFNoprx94QoqslD8xKwjHPUE3ZJ7WyB38yudNqRKL18EBdq2Q1xTP5nI1IrCQ_QEy69mY_4gOe3oZgTLg-TjDe5w_wG7hE7GVrXgbLrQcNj8aUhb_rpNA4CM5XXJNsexGojFmUfY26P1Kp2o89oA1iDNEIU0DYRDX6g9oc-8-piHwypctZK7sFApA9ClhgiohuD7HxE5dft_-CRaLyv7h4mb_9Q-1FIOkOhvHzDME68nRpWRlsorzARC7hau-WhgR9K9cOL9L57JKJE2j3RpZg4XtWiRgIGn5CiObk-m-PcwectoQj2vd4ZO4vW97PuaqktCpz9SYcAGsHXO-k6gPa8I4Vw_tJ4kWPsiGnSK8x4HvGgcMWGdJAzxYV--FWTSi1GrDjj_t5tqi48AjEcWg_olyDrZPOaDfKcOEJV_R8TwxcJozuhljDs_dAxFHXEtuuculdk6LWsx7udi85c0ZUQGm9f1nMk47Ut3BOc3jiUeDI5xva-Zp_fgiMHDu3Htd6qO1OY88NfL0LTZVTvOmJqLuPpzU5ax3EDah9yDKhn4aUFk5PEXcvcBSOSEwu9niqJZdydSbmrjWqdyNcjQv3qs7kJJH8N3nMAwdvnVnzxiu_0ClrtAwG4hdFKmrhCD6brgJ35kv40fWsZTRPn0D67dS--xr_24z9d2-LJACeJCM40LvDisMEIt2cYtcqoFzdX-xkrzz-8TJza8PpNgnIXo6lQYr4fCZsbZbZmiXmG4BUzc8qT85vHA4Lhk3j7qR7oVerWnXbD_15WRA0-8bn75CyLJoNJY-x_h8RHRaBJKW5vEtFiYxr7XJA0fd0E1kjGXtgVy7J9nPrxgSZVd562OjG4pasrmaTpP4BAWyecSiUngm2mnR4urCtVmRSVH7VDEmpfP307QJ06RDPVxOfISuUfaNVk44Fcd8U_QO1dBI6YyXsjfn5nJ7aqFriRdN3WssRPg_gbgJ9RM_W_K45r6kfSLtigiD0OU0FqjYueJh9hcuey82t4qo6Ul3EGfHowFk7CzE67q4trb4r81wTMd5BNFh05P9flbw6RlHQ5fApBniZpQSsAHuixsSkq_UNz0vN9csG8VChtTSyWzVmYL9HbmnxDC-zDoZkUzBFJe0eGS6ocqAddaE3JPwB6x7EX6z6FA310BvsD0Ix6gszROCS_FCia0bdb8GmCe2BMCX8yD45d2HZFKSf-zvmeTkg8unjeps7FcgZg3zWoxk4zMBOyBC4um1gEnCoYzjsAcVsuq5P5td0o3Lh4b-2_K4U8x7ALuTD-2ZHfvYS1Oe49e0xa11h_m4JTmlkhME8PwaCytBL8Xc-OkDcXnzHj5NqPsLX01ZzEdSRPW7w0r6t7PunkZZj_oseu_stdbvcwayazo8dJ08YQqcxXYOs7NuGHATRjzn749ltF277H4Ue-YVw1rEmJyWcyNTMjEKnwHgGFqH3ZEvH0s4V1SlPUEYoSramE1D0mqhdUpA5707VINwzsoYZoiQ0ekRm86G7ygVkZdOZklsGSK6vBC-vKlSz5yserGWjlhQUkdbOw_WdGda1hN-WpxG55FX5WeMSLtghxo-Cgc3nZ1-APIREtUE1UGXRWx9qMeTlRqPYswnJ2eBT6SkXEWhqgfgbcjtiFWIPu-7vXvo0lhQcvxi-hDIgQFW9uNJLbt1Ao_dZZEeqqLHC-g2m-WQzAapqYdKI4X5yb7J9olsh5Amx7pzuT9D_nMMEengHOz2wRiSPoWl3nYtUnFL5EMnODZTKEE8-kdorFi3lkK5LXmWLz7RtQZ2leLU5D8WIENKJyu1iE2qlHl7sp9jRphqTHeVpvIdPTUvBDG9SRg0zs_ugeVkpsmFHUqC7FQf5VHC1PiCwUhXaWBOhOPJS49CO65Dr2Ua5jl_CSWxNvabalxWHedETdHQ=="
            }
          },
          "time": {
            "start": 1771212813281,
            "end": 1771212823779
          },
          "id": "prt_c6482b3e1001ClrEiYQSC8Kz2k",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8ed0017iXqRjLpqEruSN"
        },
        {
          "type": "tool",
          "callID": "call_ybpMtFGM2kPjDrY9mgHLZrwc",
          "tool": "webfetch",
          "state": {
            "status": "completed",
            "input": {
              "url": "https://moonrepo.dev/docs",
              "format": "markdown",
              "timeout": 120
            },
            "output": "  Introduction | moonrepo      \n\n[Skip to main content](#__docusaurus_skipToContent_fallback)\n\n[\n\n![moon](/img/logo.svg)![moon](/img/logo.svg)\n\n](/)\n\n[Products](#)\n\n-   [**moon**\n    \n    Build system for managing codebases\n    \n    ](/moon)\n-   [**proto**\n    \n    Multi-language version manager\n    \n    ](/proto)\n\n[Docs](#)\n\n-   [**moon**](/docs)\n-   [**proto**](/docs/proto)\n\n[Guides](/docs/guides/ci)[Blog](/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n-   [Introduction](/docs)\n-   [Install moon](/docs/install)\n-   [How it works](/docs/how-it-works)\n    \n-   [Getting started](/docs/setup-workspace)\n    \n    -   [Setup workspace](/docs/setup-workspace)\n    -   [Create a project](/docs/create-project)\n    -   [Setup toolchain](/docs/setup-toolchain)\n    -   [Create a task](/docs/create-task)\n    -   [Run a task](/docs/run-task)\n    -   [Migrate to moon](/docs/migrate-to-moon)\n-   [Concepts](/docs/concepts)\n    \n-   [Config files](/docs/config)\n    \n-   [Editors](/docs/editors)\n    \n-   [Commands](/docs/commands)\n    \n-   [Migrations](/docs/migrate/2.0)\n    \n-   [Cheat sheet](/docs/cheat-sheet)\n-   [Feature comparison](/docs/comparison)\n-   [Terminology](/docs/terminology)\n-   [FAQ](/docs/faq)\n-   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.  [Home](/)\n2.  [Introduction](/docs)\n    \n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\n# Introduction\n\nmoonrepo is a productivity platform that aims to eliminate pain points for both developers and companies, by automating tiresome and complex workflows, and improving the overall developer experience.\n\nWe currently achieve this through the following tools and services:\n\n## moon[](#moon \"Direct link to moon\")\n\n[moon](/moon) is a repository *m*anagement, *o*rganization, *o*rchestration, and *n*otification tool for the web ecosystem, written in Rust. Many of the concepts within moon are heavily inspired from Bazel and other popular build systems, but tailored for our [supported languages](#supported-languages).\n\nYou can think of a moon as a tool that sits firmly in the middle between Bazel (high complexity, full structure), and make/just/etc scripts (low complexity, no structure).\n\n### Why use moon?[](#why-use-moon \"Direct link to Why use moon?\")\n\nWorking in a language's ecosystem can be very involved, especially when it comes to managing a repository effectively. Which language version to use? Which dependency manager to use? How to use packages? Or how to build packages? So on and so forth. moon aims to streamline this entire process and provide a first-class developer experience.\n\n-   **Increased productivity** - With [Rust](https://www.rust-lang.org/) as our foundation, we can ensure robust speeds, high performance, and low memory usage. Instead of long builds blocking you, focus on your work.\n-   **Exceptional developer experience** - As veterans of developer tooling, we're well aware of the pain points and frustrations. Our goal is to mitigate and overcome these obstacles.\n-   **Incremental adoption** - At its core, moon has been designed to be adopted incrementally and is *not* an \"all at once adoption\". Migrate project-by-project, or task-by-task, it's up to you!\n-   **Reduced tasks confusion** - Tasks (for example, `package.json` scripts) can become unwieldy, very quickly. No more duplicating the same task into every project, or reverse-engineering which root scripts to use. With moon, all you need to know is the project name, and a task name.\n-   **Ensure correct versions** - Whether it's a programming language or dependency manager, ensure the same version of each tool is the same across *every* developer's environment. No more wasted hours of debugging.\n-   **Automation built-in** - When applicable, moon will automatically install dependencies (`node_modules`), or [sync project dependencies](/docs/config/toolchain#syncprojectworkspacedependencies), or even [sync TypeScript project references](/docs/config/toolchain#syncprojectreferences).\n-   And of course, the amazing list of [features](#features) below!\n\n### Supported languages[](#supported-languages \"Direct link to Supported languages\")\n\nmoon's long-term vision is to robustly support multiple programming languages (and dependency managers) so that a repository composed of projects with differing languages and tools can all work in unison. This is a lofty vision that requires a massive amount of time and resources to achieve, and as such, is not available on initial release, but will gradually be supported over time.\n\nTo help achieve this vision, language support is broken down into 4 tiers, allowing us to incrementally integrate and improve them over time. The 4 tiers are as follows:\n\n-   Tier 0  **No direct integration** - Tool is not directly supported in moon, but can still be run using the [\"system\" task toolchain](/docs/faq#can-we-run-other-languages), which expects the tool to exist in the current environment.\n-   Tier 1  **Project categorization** - Projects can configure their primary [language in `moon.yml`](/docs/config/project#language), and have a dedicated Rust crate for metadata.\n-   Tier 2  **Ecosystem platformization** - moon deeply integrates with the language's ecosystem by parsing manifests, lockfiles, and other semantic files to infer dependencies, tasks, and other necessary information.\n-   Tier 3  **Toolchain integration** - Language is directly supported in the toolchain, configured in [`.moon/toolchains.yml`](/docs/config/toolchain), and will automatically be downloaded and installed.\n\nTier 0\n\nTier 1\n\nTier 2\n\nTier 3\n\nBash/Batch\n\n\n\n\n\nBun (JavaScript, TypeScript)\n\n\n\n\n\n\n\n\n\nDeno (JavaScript, TypeScript)\n\n\n\n\n\n\n\n\n\nGo\n\n\n\n\n\n\n\n\n\nNode (JavaScript, TypeScript)\n\n\n\n\n\n\n\n\n\n npm, pnpm, yarn\n\n\n\n\n\n\n\n\n\nPHP\n\n\n\n\n\n Composer\n\n\n\n\n\nPython\n\n\n\n\n\n\n\n\n\n Pip\n\n\n\n\n\n\n\nRuby\n\n\n\n\n\n Gems, Bundler\n\n\n\n\n\nRust\n\n\n\n\n\n\n\n\n\n Cargo\n\n\n\n\n\n\n\n\n\nOther (Kotlin, Java, C#, ...)\n\n\n\n-    Not applicable\n-    Partially supported (experimental)\n-    Fully Supported\n\n### Supported targets[](#supported-targets \"Direct link to Supported targets\")\n\nBecause moon is written in Rust, we only support targets that are explicitly compiled for, which are currently:\n\nOperating system\n\nArchitecture\n\nTarget\n\nmacOS 64-bit\n\nIntel\n\n`x86_64-apple-darwin`\n\nmacOS 64-bit\n\nARM\n\n`aarch64-apple-darwin`\n\nLinux 64-bit\n\nIntel GNU\n\n`x86_64-unknown-linux-gnu`\n\nLinux 64-bit\n\nIntel musl\n\n`x86_64-unknown-linux-musl`\n\nLinux 64-bit\n\nARM GNU\n\n`aarch64-unknown-linux-gnu`\n\nLinux 64-bit\n\nARM musl\n\n`aarch64-unknown-linux-musl`\n\nWindows 64-bit\n\nIntel\n\n`x86_64-pc-windows-msvc`\n\n### Features[](#features \"Direct link to Features\")\n\n#### Management[](#management \"Direct link to Management\")\n\n-   **Smart hashing** - Collects inputs from multiple sources to ensure builds are deterministic and reproducible.\n-   **Remote caching** - Persists builds, hashes, and caches between teammates and CI/CD environments.\n-   **Integrated toolchain** - Automatically downloads and installs explicit versions of Node.js and other tools for consistency across the entire workspace or per project.\n-   **Multi-platform** - Runs on common development platforms: Linux, macOS, and Windows.\n\n#### Organization[](#organization \"Direct link to Organization\")\n\n-   **Project graph** - Generates a project graph for dependency and dependent relationships.\n-   **Code generation** - Easily scaffold new applications, libraries, tooling, and more!\n-   **Dependency workspaces** - Works alongside package manager workspaces so that projects have distinct dependency trees.\n-   **Code ownership** - Declare owners, maintainers, support channels, and more. Generate CODEOWNERS.\n\n#### Orchestration[](#orchestration \"Direct link to Orchestration\")\n\n-   **Dependency graph** - Generates a dependency graph to increase performance and reduce workloads.\n-   **Action pipeline** - Executes actions in parallel and in order using a thread pool and our dependency graph.\n-   **Action distribution** Coming soon - Distributes actions across multiple machines to increase throughput.\n-   **Incremental builds** - With our smart hashing, only rebuild projects that have been touched since the last build.\n\n#### Notification[](#notification \"Direct link to Notification\")\n\n-   **Flakiness detection** - Reduce flaky builds with automatic retries and passthrough settings.\n-   **Webhook events** Experimental - Receive a webhook for every event in the pipeline. Useful for metrics gathering and insights.\n-   **Terminal notifications** Experimental - Receives notifications in your chosen terminal when builds are successful... or are not.\n-   **Git hooks** - Manage Git hooks to enforce workflows and requirements for contributors.\n\n## proto[](#proto \"Direct link to proto\")\n\n[proto](/proto) is a version manager for your favorite programming languages. [View proto documentation](/docs/proto).\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/intro.mdx)\n\n[Install moon](/docs/install)\n\n-   [moon](#moon)\n    -   [Why use moon?](#why-use-moon)\n    -   [Supported languages](#supported-languages)\n    -   [Supported targets](#supported-targets)\n    -   [Features](#features)\n-   [proto](#proto)\n\n## Footer\n\n###### Learn\n\n-   [Docs](/docs)\n-   [Guides](/docs/guides/ci)\n-   [Blog](/blog)\n\n###### Ecosystem\n\n-   [Releases](https://github.com/moonrepo/moon/releases)\n-   [Shared configs](https://github.com/moonrepo/moon-configs)\n-   [Developer tools](https://github.com/moonrepo/dev)\n-   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n-   [GitHub](https://github.com/moonrepo)\n-   [Discord](https://discord.gg/qCh9MEynv2)\n-   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubjectConsultationPartnershipAffiliation\n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)",
            "title": "https://moonrepo.dev/docs (text/html; charset=utf-8)",
            "metadata": {
              "truncated": false
            },
            "time": {
              "start": 1771212823784,
              "end": 1771212823996
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_04832480374138c701699290178b5c81939ddcdabfd74a1d12"
            }
          },
          "id": "prt_c6482dce40011dwJrEg5KihP9e",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8ed0017iXqRjLpqEruSN"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 21235,
            "input": 20576,
            "output": 659,
            "reasoning": 626,
            "cache": {
              "read": 0,
              "write": 0
            }
          },
          "id": "prt_c6482ddbd0011xIZsnMvmL4te5",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482a8ed0017iXqRjLpqEruSN"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212824095,
          "completed": 1771212828209
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 23959,
          "input": 2764,
          "output": 75,
          "reasoning": 40,
          "cache": {
            "read": 21120,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6482de1f001vOMwlsLCsFgDI9",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c6482e7d0001rZQ71HaaE8Ztql",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482de1f001vOMwlsLCsFgDI9"
        },
        {
          "type": "reasoning",
          "text": "**Considering sitemap fetching**",
          "metadata": {
            "openai": {
              "itemId": "rs_064311d3810389c5016992901adbfc8195a8b9c93c518748ea",
              "reasoningEncryptedContent": "gAAAAABpkpAbWp_taLrYa7JLMPVZ3deqQRbIqjCzoTTPs3Bv_WolEE92ZdO6Q045KzACr4YM8nKGrH6VuNQs3zEl4WTFE5CNIKhR1rgwKmwggtggNcw1NhhJ3d_nbF8RPrpgGJiC-Xa5OFwCgTMAMVaKCPNA79f5nKZfAH7SjDkG89GcGMPAVDkex48Z9lHEtul-sUveT_OuLQYYzo7XGWea21oh1-gcrcl0ht8Dtr55h9z-EFS9XZq-N8riKRKf79iOdLtqVVyxlJJs_UW0fZnRIxErWXSmIBCQLI2K2qSzMp32p9t2---LHYz7CelXr_iF5Y18_c9JMWhc_d3I0Y9USgW740Vb16LIlseR-JK2m_xpgsjuJpUHmjF24PgGoqyEWI9V0SwqfQ0pjRlmy0iwqwUbHqcXfkx8j4ayUO3mRENTzpgr77y_KJ1xz_Z5RAia_dikm7jcJN0pcli7S3F1_InQz3Ha-Mo8zoVDWyzPGTLoAAIKxgrjouVcctdrioWAKXwwYQOmqH7jSKM-zASUzh2C7IYVBEaYeycTQZvUcYmigoiGyszKXIGlfH6R0atX-PI4QTDy4Hr4GvZfSUemCI6g7EN-eaMGAPoq3_Tdpk2wNjd6evKe2lGwVRfefy5n0SVsk13-FDAcbDyzHhwRKBEQMhtTrzgsC2O4QnRyph0ImIReJ650q26qljgUqjob7r4UIZb_zhz5SelEDo3GPdCocyaxCev8NtVpmHubhwc9S368qRNphdEoDKrG0GMgGTwAJBXsSm7uSBbATUSg0PoeDacHYvLawD_tbWP5yiBPuTvb8wuAFY02Udj1baQeS0bJJpqI1XVRkw99sQ349Mj2RqkBqKZzQL_wDUVf72eaHCQejz-QPIqaZCYu_J3sfXsmQ2HBqkM0A79HmX5R81KZmW8VKxfZV6EvWhb9aPO4YfiHGloLb5khJoKw-rG5cKCTGxapRXsx17XKwRkbdqSIi1xDqAVysfvvyFuFF8uPvji7I66MrnPELqWHNPDKPzyyOseSWL7xl5zVzGA_9Ekc-qVO5BK6EILIZXHTf8Aox8DsiaE="
            }
          },
          "time": {
            "start": 1771212826886,
            "end": 1771212827977
          },
          "id": "prt_c6482e906001P816eddQlX1fD5",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482de1f001vOMwlsLCsFgDI9"
        },
        {
          "type": "tool",
          "callID": "call_wzbuky7ixQ6gx694rqpoGIrk",
          "tool": "webfetch",
          "state": {
            "status": "completed",
            "input": {
              "url": "https://moonrepo.dev/sitemap.xml",
              "format": "text",
              "timeout": 120
            },
            "output": "\n\n...62243 bytes truncated...\n\nThe tool call succeeded but the output was truncated. Full output saved to: /Users/alex/.local/share/opencode/tool-output/tool_c6482ede5001W4LoKFv03d2pq7\nUse the Task tool to have explore agent process this file with Grep and Read (with offset/limit). Do NOT read the full file yourself - delegate to save context.",
            "title": "https://moonrepo.dev/sitemap.xml (application/xml)",
            "metadata": {
              "truncated": true,
              "outputPath": "/Users/alex/.local/share/opencode/tool-output/tool_c6482ede5001W4LoKFv03d2pq7"
            },
            "time": {
              "start": 1771212828020,
              "end": 1771212828136
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_064311d3810389c5016992901bd58c81958fcd2bec833a2818"
            }
          },
          "id": "prt_c6482ed4a001VXJOEEfILzAepT",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482de1f001vOMwlsLCsFgDI9"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 23959,
            "input": 2764,
            "output": 75,
            "reasoning": 40,
            "cache": {
              "read": 21120,
              "write": 0
            }
          },
          "id": "prt_c6482edeb001dZ66SRlaCt8joz",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482de1f001vOMwlsLCsFgDI9"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212828211,
          "completed": 1771212833067
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 24176,
          "input": 248,
          "output": 120,
          "reasoning": 78,
          "cache": {
            "read": 23808,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6482ee33001i06yOHxFgz96t5",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c6482f4df0012KxML4lqcj2JVX",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482ee33001i06yOHxFgz96t5"
        },
        {
          "type": "reasoning",
          "text": "**Searching documentation URLs**",
          "metadata": {
            "openai": {
              "itemId": "rs_029400a5a4cd2b63016992901e1a788197b3aaf9113c15ef6a",
              "reasoningEncryptedContent": "gAAAAABpkpAgOgw-ShWhcSJ2glOO_b8etM_1BgIQijfX6KS2yaHgvM-su7_FUfyoT2wNHInt-Ovl3e4x2u9ME-rgI7Fwh_3W4FuAxMaRvwiFCzi2GA9lBau0JjO763n9pdTNk5Yh8996xZlRjc9Yh9YAq7xatcN2oI31Y7P132rQQZ7vWgMVAv7GYu_TDT9vGv6Sy-7FTyktWellh6qGEeso7XQcM263h9t36gDpH_FhJmSIwME1N86XuwtscdbP_ItkoqBD5h-JsQFuolKwRsGAgh0suWU9CR27X-D0VFT4b4i8F4ZEesSyzjVx9Um0_PQ29YPep_Aqa_kM0-Niw-v6o2k2Z51ZQ0xCHL-sMqxxABmsflbIfTMJ9I4n4ocnmTlDq2v1vS_IFhfcEpzzytklzsQMep9Dn0I0vhXiP6ijEo0RWDYToQzV1euc4Gq2Uqovnz9vmstwXQ_GOrOT8xVaUCGNuRCidkVA9G8d9nvlo4b0eoFe_pHonBZnADFDghIzdAy4f_Gjye3_e_YpDvK46Vm2DxQ7ACdRBHMib4IBwQkM0DZ9tdlck0NDLgb0A4VMCFYFHYoKPoepdgmS1Qk6jQSdFJXjxWlK8IiYVEQC2uYFlfk7zDN8QvFyh4bBcgHa0XYyLqCZUW__z9RIHMd_LwsTCQDAVaeJpfic_C6H-jmQys3wfKqaEWKEGFS4KON1wrH-2YFdb7Mc4fkIm6EsFjEUDYC6eZjhk0I55NGlqf0twTiW5LdZxuosanN8N6QAPzqhuLdLDbECzEG8u0QO88onqvmwk_5TlelAFQrbLUobs4Rzr90AfG7k4dJ7OClM5YrWbGE6j2n118LTIncViCjSsaBUXx9VDuXGAL9nL9QlRvUsDkvs8YDsbPZ8LrPXlA-gwtmlU4XAaUKqUvY4g_VQHkfcYd2Oo44MXOP7qpVnVkn6cNdO69XM6pwh3jwMF3pZ_kT82lHqrImrKVq2vgQBXvpRrX-oJoD3VCmDN-SK3bjKpdX_hdCeVgEivoeiAS7cexVnPN1h8n87PbAkER5D69C1wl_b6ZImWMXBK2PLH4xVnbgpBWixCltuHMqGHuoN-L6kTUNnBLDoeRRRNsQH0NTjrAGjv30g64NKPYpR5YyKYn4NQLGxAaG01FoFf19LnyzJuFw7PCSbSBXhZhs3AJ9i7bz3CXeglLd9yXkARIu4PVXk4-i52VSDchbQm9nBee4XQs40WZQekbGH5sdJS4VYlnEIfQ2O7Hdd9WrMk_TxrSBQs0HO2-59xKypsap5Wj4e7lKHnUTQKWKZnMOPLoT6yg=="
            }
          },
          "time": {
            "start": 1771212830225,
            "end": 1771212832792
          },
          "id": "prt_c6482f6110018eW1TwuepK9b1r",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482ee33001i06yOHxFgz96t5"
        },
        {
          "type": "tool",
          "callID": "call_3nTyb0UIORuiA3sGzULPvkft",
          "tool": "grep",
          "state": {
            "status": "completed",
            "input": {
              "pattern": "https://moonrepo.dev/docs[^<]*",
              "path": "/Users/alex/.local/share/opencode/tool-output"
            },
            "output": "Found 1 matches\n/Users/alex/.local/share/opencode/tool-output/tool_c6482ede5001W4LoKFv03d2pq7:\n  Line 1: <?xml version=\"1.0\" encoding=\"UTF-8\"?><urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:news=\"http://www.google.com/schemas/sitemap-news/0.9\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\" xmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\"><url><loc>https://moonrepo.dev/blog</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/2023-roadmap</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/2024-roadmap</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/archive</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/authors</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/moon-v1.0</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/moon-v1.1</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/moon-v1.10</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/moon-v1.11</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/moon-v1.12</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/moon-v1.13</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/moon-v1.14</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/moon-v1.15</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/moon-v1.16</loc><changefreq>weekly</changefreq><priority>0.5</priority></url><url><loc>https://moonrepo.dev/blog/moon-v1.17</loc><changefreq>weekly</changefreq><priority>0.5</priority><...",
            "title": "https://moonrepo.dev/docs[^<]*",
            "metadata": {
              "matches": 1,
              "truncated": false
            },
            "time": {
              "start": 1771212832997,
              "end": 1771212833022
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_029400a5a4cd2b630169929020ab14819780226df63cc7e812"
            }
          },
          "id": "prt_c6483001a00195G0Erf5BqzkHD",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482ee33001i06yOHxFgz96t5"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 24176,
            "input": 248,
            "output": 120,
            "reasoning": 78,
            "cache": {
              "read": 23808,
              "write": 0
            }
          },
          "id": "prt_c648300ff001za2oqXRTNlaus5",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6482ee33001i06yOHxFgz96t5"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212833069,
          "completed": 1771212861490
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 26457,
          "input": 1829,
          "output": 1588,
          "reasoning": 1443,
          "cache": {
            "read": 23040,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6483012d001xVqVmb4zMyzL0k",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c64830853001sW6sPCdOGnJt71",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483012d001xVqVmb4zMyzL0k"
        },
        {
          "type": "reasoning",
          "text": "**Outlining docs scraping strategy**",
          "metadata": {
            "openai": {
              "itemId": "rs_0386559ad92cafc70169929022fe988197bb56175d28653650",
              "reasoningEncryptedContent": "gAAAAABpkpA8OfCz5fJBwTucFfTKatFt-YyE38WzPcpt9DG8DCOMTF37PqAEI_c_wYUN3Y2zEGu8lNTA8fRpDXvOZzSAHQl4ZFUZi8ZemQm3YxMr8cKdWHfVyqXDosFiwDXiJhBaeIJm0dQx7-HL4UwPZNHIIHPjbaG3khq7ZosIhyeapeXBT5r2wQWc-cHR0JemqKm8p7eZ15ElL27BaT-3tDtjSwrFP4XoUsjddMdvw0zRwVWz6OCzvSOfGa896lKRrm4Vkz6oFKAFVslrbNCRKJVdK8ctpwACvZ4zetkfRDSIGDXTivzIEbxkrlbDlXePayYijuxtOMaaxoWcaNxnh8zAoIWTGbsl25UILdCDz9qgc-u-V_2ww8a-UtgN7x5XCGG-Nw4Dykex2vwkmGPbpdyJWwajMEVQW5GhIYuxHQaVY4RWqirYgXR-AknHWT7_3JKE4mHjqdDAstU4opnlw_GTXAZsC5jK-UaXWy9vmp6VMHZTMJdASKwkiylePn5FzSH4brOuY8Wj1g2eIasnz-i9nm22w1FFDc2tlpnNNcYMtvjGPn7N3F2g_wiVTfa12nzV3_jaXrgM90WTXSRNSSa7X8yceoU73ggJoKxsgt2uTn5B98xn1pRPJmQjH-QWhDbbABI3A0Stx8Y3hI0OpUg5GJPDeMWTJkjYA-pJkYzAhLPvG0nYYFnxE8MXbLRrElqotGoKjYjhRJPsztlq_Nt8Rci3FTbcdeO1VqDBMWp7oFW1EmIdzeOzBi_ck16yHgIS4EQtghlFTXfmSZIyLn2kwacGNGG9KSg0EST4Zvq4JHLT6zFkqr3UeP77fi7uxaYhoazUPh1SidhUMj78h7d7fUvp1rBH681bVbvVj8ujo70Vyd3h1jdkVF4mbTaYCH7eIYL1-eshi-GTgdxOOub_LeTO_FgS9w10xSamBDwZRf6IztqB9BAhS9q99-Z8xT7eY7x-mCJ5nfdtaEXlIZkv-IQKvLK5wYeIGaX06tjFqFHZCPeIV79MRmxjtoufodq6kGmYo5u4gZsjfSezBpPZrgx-Yb2U5VeSQp6ktpxhKRwjDp1Q4S95mzjd8ql5oClduoKiPoqsKDG36ZHOTIQ_Wzp5h7bYChLr4T8sgJd4RM7mTdCGQnkB961gQFN0jLdiyWEIBuht4CZl7Ur49utVZ5Heqpw4nQIP3Af-eihhToq1kYnxJ5G8oOVWLrteSF7LvfLGyY0ttWr_IAbtCtrsFz3PjynOQZOioYslNOp5y-eAQC-A6Su2Rx07dZ1tUcEfNTCu7Up214gzV1Yh3080NbTlLpPjbNKYep-aJvLoJ2IJKDn8z6odwQc_rV-u7eMHOHcm9C-p8QOw2W6fx10T_ZdUnwKhyuu7F_R-U4Gq6ze0WvXuJSDnFRCYONR-wGMjyIirhTG33aeS6s6QSe4XKWBQo5HDTPgPpkq9h1bMC2XN2gqEopGUWizLOikO1GGhhc68uHtkUSJyaSVQEQqipJDoRgAhHh47bR6Ei3o38t-GK1jgWv48mHWcje11ufG7XZAu5skV05E6qfioffM_h7lodqRqksKBxlaAktccTRzM0fMaClG7-CGTxJ0cAIezxNGFRRZcWtHyzY5OfdVUqM0_ACToWZf2uAGXiKz8Nlg_3PhISAQ2cFs2MoQivKVm-gDR38CzKXKPUkCgtuIfsAo7zBd0K5xQvI-iZc8mgEV02xAiHfuqryF8nMm4JmYZcOODqgDOsUeJbGD8vGSc7cvVzDApJz_rhNydSWMyH4PLf-TUIshnpb9zIksqBYeze-gUj-qbJrq2dBKO1IiE1GiNcLpF9Q3DTpE76UyWKgRYIoneGu2D5N05b7czleA4F4ohwL-l2SkR4GEFVpr_UMi68Z2poinn_LoPaCKiiyMpVJElV-Kx8utBf6npk7TxMNwibw_RydKwvxln1U-4xH8zXOISQbBSeCsnOAUi74lu2yWOiBdlfpnKxW2IKUkYRk0F1CKzIFwr4fO4vRDbEuLnTalz6EzY_73Pzf8rBGHJS5mvuNLLEBtddSgfkkMUisxUr41EJ62f7YRXlGU_SRSRj8281xHBewNJJ_9lkQISV1cC3w6AC48fp4UZ_Esw6vqxm-SfJaMEIOQ0SbZI-HliPt_CTQrTgV1KuHGUGyvQBd2tyyg-O6p8u-ankEtsuCc3cv7oyaSCY6Fkt7H6jfN6Q9ixgr3Vx_M-rCNkko79P6imyYrL_gnFgO97lfiepOtg4TxiT00Dl5-i5sTM07K8ldrVuKcHatmXnTUhshj831mjc0yRBBxZUycV8kMh-h63kOOakuKtrl_ycqzhC_vSji2v9feiGUDhF3QxNWmwUV69VU4w_AjRMMkzr6MrTqWPocpatLtM8PgRbjlkyQTYZDe-oW1_gt13_2i_-jJ9JgPNsCjaFQnPazJQhEbzMZBWXZYS_S64cugVmGXksNq2IJTjlyD26gCG60TweuiiRARk-7vfkE9lhZVtkm9FzfreiJl8fGyO3VMmm2Io2MxA1CsCszdA0xJb27Ys2lV_CpP4x8RWmqUI1eCt2mW07inqQffQoEszZHsIcsVFKI7iUbWWgx37J0NrtGhLXW9R1FSehqGIrD9IoDxLM3x-WVXB8eRBn_jf8zZcpgYGL1XUZniKMB4OWDm-jUbi8YT31YNfiHArHV7K9fFcn5dQB5M8IrohAprVdsqx_t9d_AEVf40o1Z9sm6EdNKr-DEqfAfWMm8i3V9ZjOzbhmpfmlQ0T8bPKW9wEQ6jm8_vRZvtbQQBV_4ePeFijQiuf45ItRbAac4_MNtb4oVyo26-1L1LbnwrkoD5Qd7UmO6AnjN7DG6CAC_8NW3jdLhspPW60B7PCyTSUsLGLdGztb48cwJQUK22ql2T0lWhA8Xzv08bmop37ye-BwBjm_-2vlTCjjPR42GLSTPKCOp1z1ovhwwW97l_cY-4tTTz7eWVGjLYYR2YxN8IAwd6MD4Ugaf6Vfd8x-_7X0PPp0S3DG0huHUHoFJuO_klsiuIdthnDoyPu-t-qjQ_zBiI-1TWwpKDHlstJDs3Mijvq_KeU3aDCSwl5j9bsWDI88Iyn75gT0FPrZmNPO6xpW-tOPjPKia_UFCVi3Ik081Rwv8DwbwXau1nVrxjwB64TweRePs7mHWWNEyWfNr1H1Hvz1snZzyHHFx1gHtihFQHnZacC8bpItjbL56rdw6U0evq6u9OhCIK-_UPrJyZDLGzyjMv8LDprqLM93y9vf6jVkMmKyoeyYMLa8l3IBlgUU6Ycbz5-exFcQRElMOSPNQdGZxrLjldaGAWHguTHiXsvfros0WGe7pgIB95zjV29bVov5Fsrq0257rnqfsGhKQPNmHXJIeWaT2BpAbTZP1JrOIVpbaoAsq0yLSrqqu4P_N8R-b3Njl_IgKoIwHvaElozOdUMIl-JT_r2Ql34auQAd2qOV0ld5txT1LISaPUuMwIKJZOnDQbNeffPEvlRHtBs4shDU88dtbPxGJB6_Gg3Ife9oNAU5goeXXzknquV_HpcYjC5Q5TyigttqHiubT4jvoLLbb-bn8-9xLfPHULdLf5_KjJDUWlERVhSWjERzZMm0rkm4ldXx5IThIrRjNwgQI4xuVF0OPEgtV6MyZL5TjWpqkItHZf98qjeyu2kfyCRw4J4UHupqmKSAcj33pPv2rLAUYsFRZ8MKsiiayQ2TdR-548qkLTerB5cMzsmYmg3qUeEVKsaewQC8CR2e1rbHMj4__p9bGP5KfiYAWcqylQWaSjE3ZO_zXPTqQbiUgcqfO3fhuVY-IJDLZ4HkFCb-hgWYoB_BaKCm_bLNj2qEsRqXjbxqjmFT-GWnT5FREHE1a0WcGMqZUVDK7lJ9R8meoo3CVtijTtwX2KtM_w1AZMSxfBlblb20C8PBfDPCLXEYSbVSgRL9szZTckRHeJLpaYd8C8Ih215LJp4WvmU0OWaQGHuldpx4ux6rAYSoBDkb43r2hUrUVVgJKdmEr5ND0daQTWfw7PZC4d5RpL8kST8c0XkE_vISatQdoLsy0XTg846Rr4DTTSU4hfhj3aZMRSKBUaZhECHmwtgbkrv-HgbOY1TmiIddl6r0YqEG_UvowEZw-3B5Qy_ISb9GlQBheokmZots04L8J_0amSYI2i_WsqQmV7YC1xGhBVeC1IL7oV5loiGRDRtxzlPJRJQt4rZizBNEFwF4xuvotcixe3C6jGs-7mI6KoxsQKlrvPwkpCRlyzjXWy0rSyGb-ZUdjuxoeP7pgHMk52la9MWvtsJQpMyxVtSlqsBoIZ4HpKpE0cXnEG7-T2YKfgkiZWEwLe7oi5KlsZfH9xd7iamppc1Ccsgop-nFcdIvxb_aar6YekINh6EwIaYEW13ohRch25deGaAd4iJR12c4hZVhaxryT51Pz5qYXg64cm7NyLd-OPjxnE-gvL7WxkZ_9JiwSKraBtodtNBO3FJxLeBUaPPjSNqH8I7l1fah7Rl3WwhCIVbvyFiFF5J0stQ06LPCtFESswaRd_4TvqblZahdC-A2uN6grBAEMHkeYsvkiUmSXjG1MNmKiEaeAZbqXJVTtrzv1s74naW2LYiFP84Y-RKoIVocFfhdpga4mRREbcPNKWf-Bh7zb6WXHNWg_f5Ak68AWAwXXx2GqxVUHuAU923wDc1SMTqST4RY46bGqlWvwTKeyqmVlLuXlJYUKKlHqItDzSZ_cTHO-eDYnrv5MEcLcIOJWkF-PwHnd18LcfXlsoLsvGaJctTpUsiqMu18Q12ik9ju8m2CZ2Q6rXokrFY2TwY98f3pzk4EqBHPgJ57DqtRMYYbJgdNl5SwhOhRZULn7hqPo7gqg9XfIHReR1ajoC2ir_-mxIsPb2M9-Ex3S66vkPqE-XhYdoP98rCjNniow5trsqIpD-b_7ZXOztZEf_XSpivR4FQzuXJGBCwL0CEqWmt4pZxh-XA7v_ZPDarXR983MV5PZXWiF8--qswJpTf5-KvUSjrn0g9yGwugD8lNqdD5qO5LDy3apyOOrvJWUuFqAZtyXY7WXHVrMofkzZxt2uZQzRheAwN-Ee21U-8WbLVf50wuJX4O9-hUUyqyEzYhlF2UYFZNpKwW40vW3UM8SP7lieatVXSXqWiwCWE23StZFttxN97GBugAIzOgeF1lpiojRU04gQbBSlt4hm6UAKv_qJMYkGokNrqTkmFHxJAGE7-n24dzo8BvNXKjjmMDJzfzWnMA7mZpCFgWFlU7yNF3e1RQzFWXxqLcLasshLb6Xu2HkxBpgAKJ_RC5Jj6vTIYyNPDMJw5qO283ndvm49LKclZYAoEDQ7y9AvzodSj9lTEC4E9Wxb2atq8BbKstr4AyY8UuF7ZG4a30V2ozkNvsRXbAwvcK3a-LKNrYUErfvLq6qXfiGITBoHeNOeR7vhw5cBFghRGLUJtStn6qbaO61nY-_nc3XLoYW4TfQDVB-MvYlNRQPQDzWD5xjtTLrb3SfnecQ8uxpPSeP_H2NG4FzTWosTwxRoCPY5gK1lvVZPcSPVDUZ4Ya6DnMtgAG9E1pTgQpxe0wFy_b8ZUSbehUu4fMfpLK4NleoWkyqa7Oe8llVnlt-XXFrj6vpZWxWqb-aQO1e6DfuVvnTB-o7VwrCQO8hkFlSlNh-BdxrV68g-cucLOJyF8Qy5PbbtEUmOSbkJRh0PtNNm1j2Ytnb0IL_s40VhqcBVc1jpZ8xFFUlutf32yZwQskIlAKoIJjSTeZjqcy3MKosTabtM2ODOoRB9dPlYAh-T9lGnyHU15JJiepEl97UNYdZjBFJAibLFYAkGEixwOsHnRjiOETDCUIZUx4USFer6JKxGkUCoa9ATPuUN_gWmqqE1nwXMKu3KBLHumiZpeiQOOegv9KayGqIaiT1o5RHQWT2JQ-iliDLZw7IbJJ8UmygYc5D3nneS0DT-pRsOh1wAUqTmkDOG5hAfJvYGUVpxioFJy4O4uhUz5awIjvVpm2HXSXEex_XKN863fuY2_lWZb4PG1zq0zFiMy_7EeQ5GODiQmsESr1DO8NHlFyAqktQv-q1UDeeucrNifBomcnR9kypVBGh1nM8B2HxofAb5zqmvKAky_1pe9wgy2CGuOPXz3JDM9qKO1rSHwv7TB7ABhwlcn7tFHqruJ-T-s6QitmetSiShzH5ksqeu_sXFC9n4iw4hmvhzpDoII2lffR3CUPE395Sod0TvXeZgNABPZq_VIuC_CKO1VIwrz490G8OVnpXQj3CNQuMjdf7Rx2gUecBa3UZfoWWA_ApXr72DCjRsIzN7rWS01bPFyOMpjQOSZdqZyyqnzjAWTYubMJ52T8CRb9DSHruHe-SNFonC5d0w741J24QRf3R39CIsQJQCQh1VYGf1Hsc8WMcKJ-cFXHevhuJfBPGTAu89OCM1DjhvAexOTRlcSdfyujbgJapdUZ0_98a-YjijUq_bgsmw10Aw54w9Pntkvur1bUb68uWFVSLzUauHeDz-Tp8RH6-dn6WuAZGFqG2USBckgiZRsiiBoM31KDCo8PCPmvgv-JZ309bt2bpfhFNyXoCF3o0cFUm3UlMRTE3fV-vWHG3qClVGr4t750p1xn2WSa22pf9ndCPyf7fM973fZuhp8BbFz_JfbRdj7_j7fiZqKLN5UoYUO806Npp7c2nserRbtnGJ-GQr2P62POJkVsp4gKxINghAcsL9qmakAXXzKWduBYTLE8tlCuekj46OSuczb9Pj2kUYwbUsylWkQtX03tekk84bvFG11e9Z3xnLc7ry9uzr50GoaQVs4KRQOPfp1v7ugftKwTNiL1YN4FVduM71y5fkCZ4QFnCtSqXuG90DxYfJioMYQvHiyXaegeLlGau5hIKxMBH3KGhNVekS-885KD_9rAOAYJotKNmK8_yTyxQlgnaKCvaeIQSdZG4XwrZH_4S_0ZBVWOySRFlY4qrg2aKTylJrLaeh7g3cUDnR4jIVO64EkNwt9lMPAvpvK-i1NT2nVo35MN7eQXpEPR-7LNGEagNGR0ltK7sW32Qm4kEAo61PYIhKIwW5bakHJFZHhe4F0uLRoi4UYacEUnqJDAATCxSi0ixvXoG1KhZTKzDRNbV-wJrFDhOQDCFm-KI4J7EcWPJxGQw2JAgBtlfMQHRshi4Of__BkhFwhHzyw9qjzlBckt4t45UP-KMcwsWq_9LLgVM9iWSqiErEbjRrkxVHOrLFsYoWe8IVCiCHPLI0tNz5X3lv4-NR4KD_fTDl6I6muL2BRX2H12uGUrgb-vNE5RQpQt3ugx4F9msj3F64zLg2FOZb9wpo9iZJk88Vg3gwarOdAaAcOSttD5mDXUNqQRuHQQdtTBQk81yypRXx8-Xcd1h1Dv7hq2ncdwbaJDq2xxw59jcH2SgmWDjNP3vqPkgUlk-zOF4_2GOg6w0QcFbIar-Gqkw8xox1JSLpxkShVofrYkH5J9FGem5DOEcfhW_M6A6RW6_qaHGOS0hfKRwvxrSyQWPkjtpxuo4O-V1OVKM5nM8JfO3uhouof1jXQk81y3wY1LsorI9C1UNfLjRDo7knaxTO1W2wkWAs2l2JS51b8tAFIO9jNXJgugpK06VVzArXQ-CdCwHpB2gDUON9T5Nb8KYrg3Jqud-wFcnFvk4VXBLve3Upu9ZWNk9ULE-1lMPHa4qH4tSANRJyTto9C_KBMBja2UB3oN7Lds1vgkj7ndmexw725dS6ZhScaQiLkjVI7e1GrnuGWsmEjIDnI_EsX8q_JLbSH4yaiu5dBaGkUGSiF4DleCeFtCQ6PwioMu0Rnyzx82RrNDPkzzoi4-qjOgXaDETErcaJrvrcpyfnXyNzhSQiI9UBtzFaW1euNx-ICWmU-MQFVW9OsWSBRG1Odq69ZkZkW-3TOaS5-BlxsVgKSR_6vVAaBtOiWX85f9cTRJc55LzUyOFoZA-PAMmKFI5SHXZTxqony-X6iK4CQn0VmenRoyMmAjYlUERuXjoAkCQWc9htZrVO5orpWyDGJbzqL4pdcrhBQMr5VoImKpk2JAtlksnH6RXeDcJFAKywJiQrGBJ72CgU3bdpmjcxLq9STfnfQI-277d45qBGiimpmC0MNxkeCJRv8tuj7j2qrBbXiVpKYzrMlJulb5NQY4DTW6kzlZvDeOd8V4guT6mxNte55c-AHX6r3ORYRgUAemtD6F7EQXh0DiF1O3da71ZcdV7Tn3Rr9T5kFj644F-MJO4LrtMn63d6Ly0d9tidax4a6LCau6PiBwrJ5iqdShlzxvRuLVcmD6eeHMl-2qHgRVpTa_iei8duh-47ldrQXB3ViaY5z9iXZ8MEC7UEDK347vYTNov-v_kMtBpxjSdlEeWfz2yWy0lgauZtB8JRRw8UQjdw1aSYPMN3PZwTrt02F-3KM0o6jsBYnv5y-KRDkU9DiVYigBwQWAHk2O73bpXuSTFuKNlwA-xU4CdOf8LUzE6HD2CAsbxOtQt-rjbST4ccJerZnrR4EJZ6XpAnvAO1iRs8xYvsB1maerYMyc7yt2aO04XQKFGLtMmjqYsHKMguWmUtGsA-fto7gWcqUrFTSyhHdbUuyDBEP5rqACmR4FJwFGeeTbd5vG4_V93PRHipO1VuI0ysh_viYKyLPzXeWuBo7p55FPzq8209slWHC_HsLUgnce5eGJwi-nWOmhKXHzbVifOw-ac7PsAnCwXHGTYervld7-FgE0mmaBxwdvY_pqDathYwHo-NTGiypBwr5ohgNd8OkDP4brfcGGpv8oKeUO3_deBrDmIVFh7aPezWd2kMr7u_Fdaz6IdmmRlu5cvZ14vyDB6ioydM7QEY2eR90dtHVis5BQvF3ySD9vTDIqqMnlTXFxQdbFf60gAfE_wrSjnAxOJ1Lp1baHz36ESbQHVB1MdPoK5BOaaGtVf_pO_lXWCtJT6RrzumMO1mLBtH_Ui8iGLYxD2-rPuJOJ01g0BFXwdLOjVm-e38mNO-cBY21R_fetI0-coqxP8HPSwb03y4ibkytC0lmaS0j7Qsuc394n6HZotPOR5Zvirtb65pnqOYlhPMV3YKl76DqJlUmSeHKkim_iC9BlrB4HgxrDo4JGlZC4qiFDEIz_8BR0ozW5u96wt5cViqQZnCoOPPEPJXxAxUvaVfWFSNTyIgU5_9DnfZjkcWd3E0kroq0MMR5jcOHVRkCLEj5Lmc0hUGDkFTbyq8M4DE94x8ZIvKSVs0IkYf7KNk3ZJ4VmqWKktD7YWIBCskoaXmzLJq5GJmbrZgfygJi9A9KyJayXNHH2ceK67WkLrMPv4uIC7F2WeW1_pGldnJCSt7QFBfLYuDB2PZA_-gek29beIRKOj165jgFqtAvtMAeUTv5qsSIaVI9dCsLG1lK8zq35E-3V7kMMDKlPUit2R68VKnGeN1DQtufRLE2b46aI64hTLXc3ZU0qnqCwqEZ9Kntaj2HeHEyYz6-q5anHe7ldPnEP10SZ334hAe9bleR6HGT-SofD97i-9S1BnqAuoCy1UsTz_pIwpwmLKk0i0VKZO0xzW55_SFY_rY0qLOhNsWIKaeQ3v7YO-7f3U_YAa8D7pHBY0dUDp9ht1YxVyx_q3dEEbWEpwdHkfjOQopch0EkPq0Gjm9QiCaIeyWM0PEoq8okl96okOc_5nWOiR3vMM-A18iaHoH4HvyzkL5fIXoDBHX4e5MD58KsvbYiflF-oWCIgt3FVjm6k4-LXdHU9HZ8YIRiJo00vJw8G3FWxf9O78ANOoFXgQrSj9mucsRX2bkMLL125XQL08OvBpSo0XNa6LQx9kJib5gDJvVWa3xaVs689Qc8Greh83MkxRU53xpIOyMyVwZbMXUU91ExhEiG8ZJsAtqkMZIXIbN6II-wcF98MU9UKnxbR2DShpIgwhYH3BdocuTHJDLLKJa2-Mx7H2BGMorv5e0fAPEHotKjTW13EQ9_qfZCcA=="
            }
          },
          "time": {
            "start": 1771212835066,
            "end": 1771212860187
          },
          "id": "prt_c648308fa001Un046v3sNLfOwi",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483012d001xVqVmb4zMyzL0k"
        },
        {
          "type": "tool",
          "callID": "call_Uo79lUFyaZZTuUXBGm7vXpy5",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "python3 - <<'PY'\nimport re\nfrom pathlib import Path\np=Path('/Users/alex/.local/share/opencode/tool-output/tool_c6482ede5001W4LoKFv03d2pq7')\ntext=p.read_text()\nurls=re.findall(r'<loc>(.*?)</loc>', text)\ndocs=[u for u in urls if u.startswith('https://moonrepo.dev/docs')]\nprint('docs urls:', len(docs))\nfor u in docs[:80]:\n    print(u)\nPY",
              "description": "Count and preview docs URLs from sitemap"
            },
            "output": "docs urls: 191\nhttps://moonrepo.dev/docs/tags\nhttps://moonrepo.dev/docs/tags/code\nhttps://moonrepo.dev/docs/tags/codegen\nhttps://moonrepo.dev/docs/tags/codeowners\nhttps://moonrepo.dev/docs/tags/extension\nhttps://moonrepo.dev/docs/tags/generator\nhttps://moonrepo.dev/docs/tags/git\nhttps://moonrepo.dev/docs/tags/git-hooks\nhttps://moonrepo.dev/docs/tags/hooks\nhttps://moonrepo.dev/docs/tags/lang\nhttps://moonrepo.dev/docs/tags/mql\nhttps://moonrepo.dev/docs/tags/owners\nhttps://moonrepo.dev/docs/tags/plugin\nhttps://moonrepo.dev/docs/tags/query\nhttps://moonrepo.dev/docs/tags/scaffold\nhttps://moonrepo.dev/docs/tags/solid\nhttps://moonrepo.dev/docs/tags/solidjs\nhttps://moonrepo.dev/docs/tags/template\nhttps://moonrepo.dev/docs/tags/vcs\nhttps://moonrepo.dev/docs/tags/wasm\nhttps://moonrepo.dev/docs\nhttps://moonrepo.dev/docs/cheat-sheet\nhttps://moonrepo.dev/docs/commands\nhttps://moonrepo.dev/docs/commands/action-graph\nhttps://moonrepo.dev/docs/commands/bin\nhttps://moonrepo.dev/docs/commands/check\nhttps://moonrepo.dev/docs/commands/ci\nhttps://moonrepo.dev/docs/commands/clean\nhttps://moonrepo.dev/docs/commands/completions\nhttps://moonrepo.dev/docs/commands/docker\nhttps://moonrepo.dev/docs/commands/docker/file\nhttps://moonrepo.dev/docs/commands/docker/prune\nhttps://moonrepo.dev/docs/commands/docker/scaffold\nhttps://moonrepo.dev/docs/commands/docker/setup\nhttps://moonrepo.dev/docs/commands/exec\nhttps://moonrepo.dev/docs/commands/ext\nhttps://moonrepo.dev/docs/commands/extension\nhttps://moonrepo.dev/docs/commands/extension/add\nhttps://moonrepo.dev/docs/commands/extension/info\nhttps://moonrepo.dev/docs/commands/generate\nhttps://moonrepo.dev/docs/commands/hash\nhttps://moonrepo.dev/docs/commands/init\nhttps://moonrepo.dev/docs/commands/mcp\nhttps://moonrepo.dev/docs/commands/overview\nhttps://moonrepo.dev/docs/commands/project\nhttps://moonrepo.dev/docs/commands/project-graph\nhttps://moonrepo.dev/docs/commands/projects\nhttps://moonrepo.dev/docs/commands/query\nhttps://moonrepo.dev/docs/commands/query/affected\nhttps://moonrepo.dev/docs/commands/query/changed-files\nhttps://moonrepo.dev/docs/commands/query/projects\nhttps://moonrepo.dev/docs/commands/query/tasks\nhttps://moonrepo.dev/docs/commands/run\nhttps://moonrepo.dev/docs/commands/setup\nhttps://moonrepo.dev/docs/commands/sync\nhttps://moonrepo.dev/docs/commands/sync/code-owners\nhttps://moonrepo.dev/docs/commands/sync/config-schemas\nhttps://moonrepo.dev/docs/commands/sync/projects\nhttps://moonrepo.dev/docs/commands/sync/vcs-hooks\nhttps://moonrepo.dev/docs/commands/task\nhttps://moonrepo.dev/docs/commands/task-graph\nhttps://moonrepo.dev/docs/commands/tasks\nhttps://moonrepo.dev/docs/commands/teardown\nhttps://moonrepo.dev/docs/commands/template\nhttps://moonrepo.dev/docs/commands/templates\nhttps://moonrepo.dev/docs/commands/toolchain\nhttps://moonrepo.dev/docs/commands/toolchain/add\nhttps://moonrepo.dev/docs/commands/toolchain/info\nhttps://moonrepo.dev/docs/commands/upgrade\nhttps://moonrepo.dev/docs/comparison\nhttps://moonrepo.dev/docs/concepts\nhttps://moonrepo.dev/docs/concepts/cache\nhttps://moonrepo.dev/docs/concepts/file-group\nhttps://moonrepo.dev/docs/concepts/file-pattern\nhttps://moonrepo.dev/docs/concepts/project\nhttps://moonrepo.dev/docs/concepts/query-lang\nhttps://moonrepo.dev/docs/concepts/target\nhttps://moonrepo.dev/docs/concepts/task\nhttps://moonrepo.dev/docs/concepts/task-inheritance\nhttps://moonrepo.dev/docs/concepts/token\n",
            "title": "Count and preview docs URLs from sitemap",
            "metadata": {
              "output": "docs urls: 191\nhttps://moonrepo.dev/docs/tags\nhttps://moonrepo.dev/docs/tags/code\nhttps://moonrepo.dev/docs/tags/codegen\nhttps://moonrepo.dev/docs/tags/codeowners\nhttps://moonrepo.dev/docs/tags/extension\nhttps://moonrepo.dev/docs/tags/generator\nhttps://moonrepo.dev/docs/tags/git\nhttps://moonrepo.dev/docs/tags/git-hooks\nhttps://moonrepo.dev/docs/tags/hooks\nhttps://moonrepo.dev/docs/tags/lang\nhttps://moonrepo.dev/docs/tags/mql\nhttps://moonrepo.dev/docs/tags/owners\nhttps://moonrepo.dev/docs/tags/plugin\nhttps://moonrepo.dev/docs/tags/query\nhttps://moonrepo.dev/docs/tags/scaffold\nhttps://moonrepo.dev/docs/tags/solid\nhttps://moonrepo.dev/docs/tags/solidjs\nhttps://moonrepo.dev/docs/tags/template\nhttps://moonrepo.dev/docs/tags/vcs\nhttps://moonrepo.dev/docs/tags/wasm\nhttps://moonrepo.dev/docs\nhttps://moonrepo.dev/docs/cheat-sheet\nhttps://moonrepo.dev/docs/commands\nhttps://moonrepo.dev/docs/commands/action-graph\nhttps://moonrepo.dev/docs/commands/bin\nhttps://moonrepo.dev/docs/commands/check\nhttps://moonrepo.dev/docs/commands/ci\nhttps://moonrepo.dev/docs/commands/clean\nhttps://moonrepo.dev/docs/commands/completions\nhttps://moonrepo.dev/docs/commands/docker\nhttps://moonrepo.dev/docs/commands/docker/file\nhttps://moonrepo.dev/docs/commands/docker/prune\nhttps://moonrepo.dev/docs/commands/docker/scaffold\nhttps://moonrepo.dev/docs/commands/docker/setup\nhttps://moonrepo.dev/docs/commands/exec\nhttps://moonrepo.dev/docs/commands/ext\nhttps://moonrepo.dev/docs/commands/extension\nhttps://moonrepo.dev/docs/commands/extension/add\nhttps://moonrepo.dev/docs/commands/extension/info\nhttps://moonrepo.dev/docs/commands/generate\nhttps://moonrepo.dev/docs/commands/hash\nhttps://moonrepo.dev/docs/commands/init\nhttps://moonrepo.dev/docs/commands/mcp\nhttps://moonrepo.dev/docs/commands/overview\nhttps://moonrepo.dev/docs/commands/project\nhttps://moonrepo.dev/docs/commands/project-graph\nhttps://moonrepo.dev/docs/commands/projects\nhttps://moonrepo.dev/docs/commands/query\nhttps://moonrepo.dev/docs/commands/query/affected\nhttps://moonrepo.dev/docs/commands/query/changed-files\nhttps://moonrepo.dev/docs/commands/query/projects\nhttps://moonrepo.dev/docs/commands/query/tasks\nhttps://moonrepo.dev/docs/commands/run\nhttps://moonrepo.dev/docs/commands/setup\nhttps://moonrepo.dev/docs/commands/sync\nhttps://moonrepo.dev/docs/commands/sync/code-owners\nhttps://moonrepo.dev/docs/commands/sync/config-schemas\nhttps://moonrepo.dev/docs/commands/sync/projects\nhttps://moonrepo.dev/docs/commands/sync/vcs-hooks\nhttps://moonrepo.dev/docs/commands/task\nhttps://moonrepo.dev/docs/commands/task-graph\nhttps://moonrepo.dev/docs/commands/tasks\nhttps://moonrepo.dev/docs/commands/teardown\nhttps://moonrepo.dev/docs/commands/template\nhttps://moonrepo.dev/docs/commands/templates\nhttps://moonrepo.dev/docs/commands/toolchain\nhttps://moonrepo.dev/docs/commands/toolchain/add\nhttps://moonrepo.dev/docs/commands/toolchain/info\nhttps://moonrepo.dev/docs/commands/upgrade\nhttps://moonrepo.dev/docs/comparison\nhttps://moonrepo.dev/docs/concepts\nhttps://moonrepo.dev/docs/concepts/cache\nhttps://moonrepo.dev/docs/concepts/file-group\nhttps://moonrepo.dev/docs/concepts/file-pattern\nhttps://moonrepo.dev/docs/concepts/project\nhttps://moonrepo.dev/docs/concepts/query-lang\nhttps://moonrepo.dev/docs/concepts/target\nhttps://moonrepo.dev/docs/concepts/task\nhttps://moonrepo.dev/docs/concepts/task-inheritance\nhttps://moonrepo.dev/docs/concepts/token\n",
              "exit": 0,
              "description": "Count and preview docs URLs from sitemap",
              "truncated": false
            },
            "time": {
              "start": 1771212861301,
              "end": 1771212861377
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0386559ad92cafc7016992903c232c8197a76fec14e9abd882"
            }
          },
          "id": "prt_c64836b1d001lNdUBSe5aj7I84",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483012d001xVqVmb4zMyzL0k"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 26457,
            "input": 1829,
            "output": 1588,
            "reasoning": 1443,
            "cache": {
              "read": 23040,
              "write": 0
            }
          },
          "id": "prt_c64836ffd00101DIEIZvSIKDb0",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483012d001xVqVmb4zMyzL0k"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212861493,
          "completed": 1771212875679
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 27916,
          "input": 975,
          "output": 573,
          "reasoning": 531,
          "cache": {
            "read": 26368,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64837035001hbmV9tiPyhu5Mo",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c64837afc0011cVObEMPQQ1e67",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64837035001hbmV9tiPyhu5Mo"
        },
        {
          "type": "reasoning",
          "text": "**Planning large docs extraction**",
          "metadata": {
            "openai": {
              "itemId": "rs_06ca272136fb9d0301699290419b188194a74f245bde30027e",
              "reasoningEncryptedContent": "gAAAAABpkpBL3xJEvu2YFBYjBGAyUa4JeI-Ufti6SKy4PM83cjCf3P7jCzIK-mGIzCwImibUcFJJKQCnFDWZyqQHXJXoyh7T335EAlodJCGDMd8q6Gv166XwLhWe7I1jM5BaCk08Hc6u_CDinTy4e6t5mpkfnDw3r99qfOvFxiBXAGZSZfLctpvAOtjuDFxz4arQjsvBZal8hIAWRSXFh2dHUSTF9DpG6sauYZSQiJLN7qgDQ2BjE4vf_fv7kYNt9cdJsoDUvs3n78DqUQFLyiG9TYdFF5WfQhFpuAWRYvaW7EdC3iYHiRlxDv4X3gwrGWu-YcwhNhkn_2RJTyBaDLMpgvQiF1kbkqAwCP3vz5kYk3v8A0sgzZne9q69iMK3yGlPZwQfPt61TCZkIb7MwDLTw-U9-FLBvTC43_JOrHRG6FPgaEQxUL1JSKOQALhe4DeA8XWiL-SRdGXb1LngveKuRuEKcwbPW1hOLQBfqOD0L5xqTj3o7bJa2RRc4ZRS0VtWOgfcis7-N2RLjBvk22JnTAAzPUSOJQxy7I33UAWtnWLae0-Xfp6HaJil6BUeRfFAi2l7BBKCSWG-bi8n8I7LdWr7zjOH2L2xu0UhTOfJu42oWUngjvcc_JFe0O8ByVvPyqytMAnlcpud6cd-7djV8m4w4lU4UZR0_Q_2hFwtU1dy5NjhU50GaSsEzHKPEcWxX8uv5mzDHTPCDdNJUYNUiYI3reVxA8e-O1-gtVLFJHIbhpCj3-Of-Mkt1BzvCGMeFwy-COt1x6DQjKOlkauNEIIYeH007M_miGbTxo8ZEuLgSneBkSZQW3XZohcm5Hn9faCagcY0d6_ze61cgYLFIRAwPjF_gDlOSLRGwuYqWEwNfqIcf6FiIIwgy95nhhA4eS01Irg-SIkJAJBkXi1OlU30BAeRFRpdriPCHeijHjLclq4w-CbIAhtRFeQrlcEPR6Wwr43bQa7jjV29OS89DGs9Fby193CpODsI4qtALZ1QlE8NtLBvt9pzucJqGZ217h1NxD8OODvtwRfWajN926dFEBnM5X9dybIQwo5NSOgyYDy6cUhsYO4TgKu_hS6i8YDZMklq7WiBhkjzf0gLJtU2TST00GDjHTJ3vOjmPF0muxdzXjpFBzgV70A7C2D2TmAlE0P_TtsOuppvs2lSrNA7M4gmKWrKocduLh2qCYwpMplcSNEZV7w7NGugirvep4iT6bh8XZyUON0scqCyz70bhLzro9TYkgoDHVpQh-g038vVBYLkw7ftyNdlxOuIv9kmChRdY5ynnQdpIBkxXti_-F__2fQAvfLO9-pGt1hh4d3AlqR1S7w9Ez_iy7OuXBxsniG1T919bxN3rEzIJ4iWTsa0SR6WfT6tx5nt7MhFXy56EF8YQAjB5Fp0VfG-GBf1wxWSMMwRGRj9Z-vpQrjvHpLzmOnhISZDTu9iqEBz0f9PrFbKWlYXM9cgm-qrjTp39SwvwHNsEqg8VGZmPxQ1HEd5ssDMYpRtl1CjCgtjZn9mCjRNbrd6mGNTIDZMCfRAYHYJdJXRdrJL7bUjeXRm8VssrL5HvL5xXXbDuOvclSYfJaOHEvxuQuR-jevdQK5TispeXDYBDJ2gF5Xk1-Cj-QLumlD2_vGHFyd2E-BUtW2Lrz0VLJvspht0W_xqxb0jrHGdddJ-vk-9K2nky6XVbkxZfJCYnL-iMOOlQh7LRxZQkeAvdeLWLisoH78jk4z-CECko8ievg0D6qbDkOr816Mx7dVt9ahv_fkzzwRD7ySkevjfJTSoxWP-XfxwOvi6TpfNt9R7ByXkKKd_taS7SryeChpQdbwnDOqFOXEy0TYBBkMqd5FzMHlVPtMAa_nb0CHVFg4d-vXlZTO-DrSuU0VCws0uxzw0_t102YzLwPm4tyXVZ5lbiB9Fxp4sh0lfTG9fBS3CwU7mShVFjetCUj-xdIv5qVcHK5NhEfnqgQGmnqEvRw50h0RaGTCOuhlzmDzhoJLAdZgdvjA4_cGruaZG1vgxSGiVoXbOFIOXf_-pmvLfx9gFhjDyVYOAyx3uiZmIo29Yg0tCXRYbZA_WCmeI0PdcIM5Zd4mU6xccmSuW5NdESSQQEJwC4zw9JjtDB7_sEJB5r7uV8KLuEmHK4YFezbrb1OewqH5z98Wzvm_axbpyavl9MokV6xxcuTght7phFoJchYLB9Y8oD607HgbsRzQI2KErBdfnI-e9SOMrGgpwqHNxv-s2K1dk70hKKNz3vhkZwWPxrKppmDbiCmsbadwC3j979RmgWzmVvZFJNQRVR_Hrc9_jQX8_wp-pKBPUxBFRdkSHnHPSacI5cISWExbr1N8wLNgHkdeUthUILvp-uhNx1VvIDsHzm5ZYJwEGeF5fEbX9X0OOAB8j8dVn5wnv00L-K07wPjfJ2rBAvNn5MjUjNhj1ygNl6R2YrTm8trpiS50Ch6nev_0LTXoNTrxBTRO2653FOUbeiWgov9B3Eg8RHq4HmygkiHD_IX2Rv89_6DH_UfATU0jbBfJ2YPYlM-yoIL73BTTBm9JlCSKR4wlGaFlAjSndHKbT7IBTiBEMDQkpjtNzytTYDYRhNUjg7PzZiPeiyADAVWZ8l2zpMA1dp0pzMKLHYqiqnnVwa6Cc5oxdxQGxS9S4GHqEYlr_WpJ9iONsFRbsKCmIprq9h0NELk-1ik5vWAsjJUmqZGGvUAgCAMWb1HEVGrNB-drY9hmhGIOBZ68p5Ubc8ZMoRCFMBaEbBrtSCOO1z6ISVF8PiFUe99agDe2S5uUm2rHJ4Okvjzhjeqy0JxOJw1bG4cUvwU9y-SJdroYA8hC0P3cNLz-DfQZHptpTp1U8rthhx0EFLjRm3oReVADnC8fGnHirXPzUQpJQ_tpUS_UZifzaNrA4DgSVX6N98T89hg_JlDagyOWjcXcPz6qr2TMaNhfVMCXDwafl3bqwoN8jRrNJNtyFtS-gM9U-oEnTdNAYWp5BnN651nbeZv4UYSBf_PyH_e71JRuamRRGQ9KC8mwQ--aAbtd1nSK_IUgId8516zU5qlyyIeVAVeySSMFCkVFgiMMRSeWGw4M7y9bsgmtg4CnPrPu0bhu95SR7QOaAnaetjUA8GvhAgA6_w1ErVkGx_yva25UCnf7gkKjdGnxcgJjhNGLfRInOaLAT0KjEr4W6zXvkWZye1fKHIdo01gDtpaSZfpfCJSgy2cPMWfLcFOJqEu_evLCbxoo75Ax-xC6hINpkTiLlHTZzm6cLxQ9wokEsqxvBUFTe9pfJvrN-CFHx6fEyzKO6d0WadTC7Qv6-xiQ-SRVh989aBXOZI9k9fmgneQTTB7nTMu4cFV6kuzXzeZFDtLB9axK13RFEXM-0O-iMFwVb7RAffVocGTMXk2451gZ_JzvucIp7UEgMPBFC_-Nfs7plmF0U25GiCdz2WuoPOaLUGb6mYyO1Y9CdClinNQhrE6AEIPadBaVJR2cw9IU9GcK3hV6VFYFIBPRAc4ORo199JV_lLZU2ZUbVDUeE4IXmTi95p8CqX5IubFypHWk1GXXiRAy_hs2ofJOVV-kNpNBNm_sXR96NQtmPdEVPEowYMmfz6qhonnWVn7gtnJof1zbrI5SR4n0uSXFEOyyc2XfSzqNzdUILQU3vUZk5Yj_GpmPQUcLA1TinEwo39KX5OtDJ5yVgnpAxrBL7u0xljsvQPur0fRhdOAtIkcV44VWnl5UYAbfmKbKA4ZDw_N4Gi1M1FFEYy-GsWq33dsuBebkVq2fxsNCr_vMPhh1OTup78mrmIUSHuLF41G1HseFHNN4SnUyddOizO3Y5jxXDD-gnW7-OycdCW3aV8Imib9QjBGd85d2_FYO8bcksjg319A8k6cNpUY4KGixkkns8Z51le6W7ZBxBJmbIDr5p6Wub7xEafdHmRghin5jmqkvBCpsfkdtOb7i7Us6Wf64xIjvI6kA8FceIRzJIqTMBLProyGE-RyQYVKi0vw8T6WOwTeLpE05WIy-_ashHyhCBXqHJh39iauSibH7p4dxy9hDJgSY_sQZ0M_EYXxyww8zHIHwl2-A56XBMkk2i6UH88ep_4kVwHEzn1xiDB25PlGOfYQE6fgdmz8qu8ZQo4UXbsx5fqQ_umA=="
            }
          },
          "time": {
            "start": 1771212865758,
            "end": 1771212875201
          },
          "id": "prt_c648380de001SY61v66v9clfkH",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64837035001hbmV9tiPyhu5Mo"
        },
        {
          "type": "tool",
          "callID": "call_4vpcAeNx3DuVsLALtlVCZkg0",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "command -v pandoc >/dev/null && echo yes || echo no",
              "description": "Check if pandoc is installed"
            },
            "output": "no\n",
            "title": "Check if pandoc is installed",
            "metadata": {
              "output": "no\n",
              "exit": 0,
              "description": "Check if pandoc is installed",
              "truncated": false
            },
            "time": {
              "start": 1771212875607,
              "end": 1771212875627
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_06ca272136fb9d03016992904b20c08194bb742c1802f8c702"
            }
          },
          "id": "prt_c6483a5c6001Cjp7xYZ06KX72Y",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64837035001hbmV9tiPyhu5Mo"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 27916,
            "input": 975,
            "output": 573,
            "reasoning": 531,
            "cache": {
              "read": 26368,
              "write": 0
            }
          },
          "id": "prt_c6483a773001w24542AR9CgQ7p",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64837035001hbmV9tiPyhu5Mo"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212875682,
          "completed": 1771212879727
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 28029,
          "input": 153,
          "output": 100,
          "reasoning": 22,
          "cache": {
            "read": 27776,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6483a7a2001hjC5UNMmyUW9KJ",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c6483b0ad001mbAYeNsfwn4kgu",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483a7a2001hjC5UNMmyUW9KJ"
        },
        {
          "type": "reasoning",
          "text": "**Checking lightweight markdown tools**",
          "metadata": {
            "openai": {
              "itemId": "rs_0ba3b5340bde4639016992904e2420819597403f4055984b7c",
              "reasoningEncryptedContent": "gAAAAABpkpBOmDzsaCYK0bdCWc_TcWUTwmoNEAVNPp6hGpPazqqmqEqpfRYkj39sxvNgXloqUs32dnGzlK-MuY6-lDclzXsOqAG4j76VOkuQ8Bur8ZaN0aFiAOGZG7zD1VBr6H5lf5E8-Vv8F01qOXA0AevocDgHdMpogrLmX1f-0xnD-5qz99gGgXkPn3qDHcu179U8oTrIW3zf2SJtuMdTfW4SGMh3iS6oSS1xBINx0EIBNEM4ZmOjOHEkkdgWHPVEvB7xLEjZgGdFQzJQzu-02gSDIq3tcJVU26EbTXYSAZtCutSWCTM2V4AKfBoNmqbz6P7NvY9gfya_Sbl3z49C-vHNvJnYEY2BEC9dJDj0KZN2JvQZro8Qq5zZDqV6dTiDqQia1kAgDaJoks6xWWEbfBE1Unf_SzyLznSNh4YDppnanSGSVKgeUpiENaB46n-C7HONCcjw9TK1fwrsVyIwmQPv3aZoFYamwS_MeUep4auD_jwEGU3-XA3-8ykwpo9xtL7zPiB82gv9sIfkmtOuFO4f28lt-760CtI3DEMQl6eriGaSTwORaTov8QFTAsk5BFbGcjx_2L3z3m12gokqFPbqkMrEdEnIMuRu1B6BKpNVriA0daAGNQf0l5TTUIl-NbyAhlqk0qlRjYG24iaPeg0YFl716b0ddMM8Ipvv98F6oWs96Z61FFvfex84UzyPwY8zCGc_iYkdOmHTcgikzOpT9GbkKhB8SpjyY-D-yvtwUAzAuvfUOIi7xAvRe5OV_ws2EKmi4brmG7usp3gTiCHx27VBzRqx3wOL8MQtDuqgAq6umVMK0SawFdD2bYe55oV3_MB6MI6WejNTzetvjphcT_baghgp1FGsdCyJisykgck0lgouypagtArZlc5aoHG6lTmBM8vNIn9snwM-MN7_mSAxt0rFucbpUPnviv6gNtHe8h4="
            }
          },
          "time": {
            "start": 1771212878206,
            "end": 1771212878816
          },
          "id": "prt_c6483b17e001ijsfsGpMRNgYTi",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483a7a2001hjC5UNMmyUW9KJ"
        },
        {
          "type": "tool",
          "callID": "call_J72O0NnMkPnf7lxMjK5nUSTF",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "python3 - <<'PY'\nimport importlib.util\nmods=['bs4','markdownify','html2text','lxml']\nfor m in mods:\n    print(m, bool(importlib.util.find_spec(m)))\nPY",
              "description": "Check Python HTML conversion libraries"
            },
            "output": "bs4 False\nmarkdownify False\nhtml2text False\nlxml False\n",
            "title": "Check Python HTML conversion libraries",
            "metadata": {
              "output": "bs4 False\nmarkdownify False\nhtml2text False\nlxml False\n",
              "exit": 0,
              "description": "Check Python HTML conversion libraries",
              "truncated": false
            },
            "time": {
              "start": 1771212879625,
              "end": 1771212879686
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0ba3b5340bde4639016992904ec3588195a4812eb6e581241b"
            }
          },
          "id": "prt_c6483b3e1001H4WV9tqTdD7P5R",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483a7a2001hjC5UNMmyUW9KJ"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 28029,
            "input": 153,
            "output": 100,
            "reasoning": 22,
            "cache": {
              "read": 27776,
              "write": 0
            }
          },
          "id": "prt_c6483b746001S7Y3bOOaYe12be",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483a7a2001hjC5UNMmyUW9KJ"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212879729,
          "completed": 1771212884687
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 28177,
          "input": 153,
          "output": 120,
          "reasoning": 84,
          "cache": {
            "read": 27904,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6483b7710018XFlxYCaKdRyIM",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c6483c135001XfbBNTlOgKwoNo",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483b7710018XFlxYCaKdRyIM"
        },
        {
          "type": "reasoning",
          "text": "**Evaluating content extraction methods**",
          "metadata": {
            "openai": {
              "itemId": "rs_04cdd1cdfeda20b6016992905260f88190bdcca87bf6032121",
              "reasoningEncryptedContent": "gAAAAABpkpBUeN8qQVLp9e4cFPt1nhhUIxJ8_tSdovAUrfUqgHR2E1WjCKY-ao1ixL_u0rET4oo271zE80STZdUuhKh_a2fp7JdNt7JK8jYi-OrvbkULqZ_8D1Kab1LWgeZi6J9RECu8OGYu6Neq4Xh91bme_f6TpxqVNkHxE0pdaVPpgOnCttOSrLOdUdS-kgrPGYYegX25lDYxf6BuB1qgdE2pji7E2flFqai3Dh5S8fURgYewwso-kB1yOzM0TkwlkSBGwh6F1dvAUNJbQ_j1ClUpKWW84NJNhl34MJQ3sI1q559KWySgnhMzjhR9es4Fn2NjHW1vRtxa6o_FnKr1VyzX9Yk0O2JMZ4IdX4UoyH7rCY79j6VxIe5snyrlcjwJ1N6mv9AOYffdlQLRAEyeuhiHPafuiXbM6zt4TSql-MC-S2B0HUCVd8Vq549qvnmiohGXBaLx7uiwRf9pWylp11yqJg6JNQCU3lmAtd1nDvFoJWyl0K-1Xg_9Qg_cuxCsCAYih3CDBes1k08ZTpZ0sp5h9O9QSWyLKdTYyHtjfO0XjTmFUPqhLiw9eAXKxpOPUqwIq9BVvqxfQw05zfC2W_JsHZXDYpnFhmnFqGffYUecD3RlFohqtEsO6mHT2Yc5QG9BKHSs7_qhVmc9XoFRxqQDivcGPuRnAKovI-EmsqEAOkFOMv222-F-ycXHP_gOaREuAcJxluoS3BiGk0-kDSGIdORv6HD0PsnndmGCaTwgQmNDuOGfpw28iPX9hDC-MxhUMkgFCs83U01NhzUQ02_xJmoMFAZ9Ov_5j09JTTGHbLM_6T9sotVs34HH3q01pwFKtqB46fTD_ZmKoTC2MZ9Py0nNNTJkPGI7CvsVOZxPoGKv7kvDNkinaamSXB03bcEVPPX_m4knz0CPQzzmKnH8GFuuj0tGCnCStPT4nh3jTVommIm0wLnFUqq8QLDmjw8E2B_ukPt65s-KMSXGegzotrVXxfShtk9XT7OLVCYebeCnh4zHMjJKVT7T_4W50SJsqqmMJPIsaZQyNlH1VPd8ykTZ09kRN5hUvtdIT_VI3Hb9ziXFzVgIgW3EIirMGCS9Q8QL3mP_2V5R1fRbJF-WLyB_ArFjXbsHiNAtLCOz1xGugM4F_IYwtmxY0BVhQ1bvkb_Lm-FhzMVM55bL3pyWfniJFkRgIDkChB63mJ1m1gYVt-2J6p8lAkKeQdFI55QTM0u48Ff4lKEt8nxCwzktIcGmi7T0YlrjNPBxwp3Tjxt0_5-_tE42zym-mCNM3zlFqEXcsEQNWCzW8emSgLKkJk3IzK_gSZkvdsKJmX9r_RrKrtw-WCBpmxzImZu9GzLqHdIDew2ZB82tLLt62qIMiP0xWc6WeTynHO4lF_mqnb8Bo2E="
            }
          },
          "time": {
            "start": 1771212882425,
            "end": 1771212884408
          },
          "id": "prt_c6483c1f9001JPdJVDKF7b1ZVf",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483b7710018XFlxYCaKdRyIM"
        },
        {
          "type": "tool",
          "callID": "call_SGA16yvWrTwvN9vQ9C1utuRJ",
          "tool": "webfetch",
          "state": {
            "status": "error",
            "input": {
              "url": "https://moonrepo.dev/docs/install/index.json",
              "format": "text",
              "timeout": 120
            },
            "error": "Error: Request failed with status code: 404",
            "time": {
              "start": 1771212884501,
              "end": 1771212884631
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_04cdd1cdfeda20b601699290544bd48190a466e357ab6afc77"
            }
          },
          "id": "prt_c6483c9b90010B25rlt37uVOvP",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483b7710018XFlxYCaKdRyIM"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 28177,
            "input": 153,
            "output": 120,
            "reasoning": 84,
            "cache": {
              "read": 27904,
              "write": 0
            }
          },
          "id": "prt_c6483ca990019aD5Iok8jT5T2S",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483b7710018XFlxYCaKdRyIM"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212884689,
          "completed": 1771212900295
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 28896,
          "input": 166,
          "output": 698,
          "reasoning": 671,
          "cache": {
            "read": 28032,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6483cad1001ww3ivrKWvFPBnu",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c6483d4a1001MHUSWt4VrIw21n",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483cad1001ww3ivrKWvFPBnu"
        },
        {
          "type": "reasoning",
          "text": "**Planning markdown extraction script**",
          "metadata": {
            "openai": {
              "itemId": "rs_012d6a6b21312a2f01699290575f4c8195a683c7ad254f7603",
              "reasoningEncryptedContent": "gAAAAABpkpBjGMFHeMOBEXPAezZbsUigRPM9gChxCirFtYETwW8v6Wi5Iy3DrIMzHBpiXmSWGXPghgoKz0d-o8zXFfnN4fpGtvRyKIxJlRRwpbyHBHgsQgEqKwks9YGJ0X9oqY6yXXa_Y58TEbyilbpQUf53Kwfjv8a4kDZd38wyRXtJb2dx2SLSVOZDfTa10hNoS2DyDgPfglXflekUKMMjNhN_ZB6BMm7L1tGBC9lBtJwxwYk4JK0H-6XnujcAkgJAywWFByA_LxVTu2AjSMQBuBINH7PwFDKe5gJkbeoUpYSBbdGSFlTs5OHdgPOKecJSuNFTpcvOcMAP1sGpP8ad8dLwlG1dlFPHZk8eB61EQUGvgLzi1YuxUkxxPLI-7ugqRbrSfnoOXtHoyrAKBOYM3Cnh4F0etC9K8z2Mhf6YdNBJwj4OOJt2U3UJJ85tcUO0PqUZuJOLIA32eoBWNzO6_kZmplUHKlS_H0Tk6U-sWPWbXJXbF_GCwJBZSGb0qSC4sqOtWgXt5CnVy97AHJzMkkRGj_35IPrZjXQ8j0sHXD3KIiF-QWCZ3fLeHuMgEPS-Hn9GFD6mFL9Ws4623cL_kyeYs1o4-KnGDPzyQIh--Ph4T7OVOmMMI8E5r0ZO0jab-r1PiCK9lSrfQrD2Qvhg1b6QN8p6auUqlpqlYwH0DAuzkq4071LEIwdaWzEZzUoDqxmQKZLEcDhaycnJqzIFcyrCcJiKX6QOCXGuV9_iit33teXoD41LQsZYb04xIygjGG9NEPUCvDSpqHMyB9NAM1s9GbLt1AD7p2HXhgv-uaXlL0GMHfaPaOK1zLPy1PtPOsWbJSmrwhwwmJq-WiNzWvic7cFc0bcJRKLerhLKZiu196ca2JwoWslmcd3nxuSNhdYgezqVk3PeOCMD8piKqCk2kkGcSV3g9ML0WjqaCrpG1-t2_m_1vdsq8CwvXpvFm1di4_OHUoygPRZXHCjMcYLkkC8qizcFoLkjvv6HbOw5mIynTTVakbfwHALGhZSn6gwMAhKqBK9WtSmaJdquX65h4gJhIRAwUdVFWvPDJ5IY5N07wxMD6uuM-Gckue7Tsxqg4p7-M_U63Gomxmrvx9WaUX8Gd83H6XcxTlLuRv7d6Lj6cso83WIh9LkXfRuPYpTHREv8ouwFY44TKkhSZsB5dhZR-ZO6AwyeJ3niro4UdDIqN6Mv-FCF28-L9_hp6ygyFYHSJTqD21E8huAf_pnn4OqDzHA8GbWJFF4nv2Brn5sjDUXjmi2QRXDeNB83JwsRjCBW2dnS31xRFpIiRc5fiaLACeOLoKxyo8RzUwA7FoqHmG9R3j7ZbLcA00ZJ1t1ZWFSVorb5ZhsrfW9Yl747xTB2Y3TMT8gC8IF-jX-r67S9ocpu-b1JghwsSXYylr9wibJDh6hqub9ClzmnT4-8UdNev14KHgr75v4EgmhVA5wKGCEMdGMVwQE1E-7Oj-3k8xqzf7p8jx3ZmF1Ufa5udL8rkWm3PBdyLM6vYpyFXjrO3iL2AJITSxT7kpjzmLBQyrRmaLdy6QFEDZw0epscE48LxlolnUfG0cAfOIOTATYy-8bf149nRwjVyujPTtHfXgayBGNygmQf6XosgxIrndrCMHRQ0ULjsBsKkbVgsaesj9ttJledFqXxhBtaqFsa3jKQn_U2Ez-wyMAzmwowIaoOcSX4bdMIYhFdp4zdxnQ1xvLtEKq5x_C3oD9RJSVIp0WzOMVrxkvSk4OStr8oSvPoYCbrPg_hwtwP1f3UzQm8N67v7QINmuFNJ2XrLnkH8afaKR9aYrDVAIiX4CfvLjAELbeI-EmcF86fKBmyRNDl4NzmK7N2-Dugt2LSj1tsaXUZ1mhW2FaXacfvEMyzVpPG9m0JNW9OBF5GNLfRwZfoMow7aDxl3jcuibUrYU1DVAe02iYXFaiszgSj2GhA1jKh2KN88Bg0ryIa2HfiSNYvgTUiQ9Teblu_NeaGqw36HNxt2IFWC3CIw0HblktPRp1L5zY00109ZlCT2lrfYb8aAffYHKQB0W4nLSarUCkebg3umveb5ctMIoiyKfWF9ruezK3YYVSRcteH4MmvzGaJLgIgYpWOqrYEmvcNLf8WBLNCczhsn-Mg9Oo1f1nB9u3tZWfYPEJQqxb8gfXKHAZUrjtu1p1KMkvWKe4Y-TwvuQJXr5FugBPQ4i2yYqoQi_mQuJe3ExNHPdQbNSxckhEes965MQh6t3bg-Lvo8hd5WlwYvCiPOsUnkgQu-2qAsdVZ58lP3SGgp_QJrI7LrMJ876Gh-Hs0DEwHmohxZDo2oTvmoGpA2h0YJO_TRbVV3ruTF4JZb732OgZflgUQdWZXdAUwInDSssFQV0VkhB1KETCBQsvcHCaIcn9rted3OX4s-AjlkJKPYoqeE7ChMO2MuOW2ZVTGF--MvhZwSu31sPbO-LwKZHRXB1Wo-q6qWhgtw0A8YdQCFPSeFCNvjceW40XbYtfUyy3ghPIv-Ysti8FzwXmSmP1k1YCZ4z_eYScfIWuxBR139GwED9P3z05jx1rXhTseFb6rt-JwyOtu0cykWy3fBWJpXt8WyeuCYzK1uMB0qKZoyMkBFV_QwWlVUiDLUd7UaJfAys6GNIPsIErBFQHyvLra35eckhaij25LHG72Ef76DVKPHflA-LbE1VnFN9Zhk9cRkePUpMelExCFWsU-oh9DhyojQxfq3_kK_dQXkoxkTxC1KxaGPqay2iCYKDgIv7aEYdEqymsQdpR5UGfV2_BjFcVW8ghAu7df4crALoeJ9W6_JSjyfj0SkGwAyVd1lKyeXdFsvNwu5eXcQf81rRMq3Lcrr2vCa8d5fdfxpc0KHgvNL_Xr1wSwx8kF1SalLwqpFt-it7fHlGNznhnw-34tJfnPEUzgX5wbGNOD6ZldY7dKZolChil5nRNjfucsIIZAn4lpY9gGSVpIFRyh-WiVa2LZRo1XZR--IS0zGOd49q6594wJk_y0umFDQ9SdEek_Q92q2tgNCF6HUU4_0H2fJnfdBEE6KreHwblERB-wsDmvo_rdkeF8ULlrh8BdfmcndpVHBQTOVGQWSmK_5vsp-stdiyWcZ958hgnp_9suIAsKNLqZHTfWc7wyfGLxJNHceiGY0rpm64o8lNt22rR2Jw1jdpXAC1_ocqWIuNfvAivxxxuCZuNl2KbWdQkfeMHXyzDZ9wuhNXmkWzFIurZTHifA00bdTb5mXN47mTHjALzC8hdagGJiZedAUan6OFVkKhOUy_VOPRIElFe3LrNhbNm2aQqSbF73okeNwU4JXQLqFONnVEQsUGg9nk54n4CtBGTd3h2aOqE_v2O87mOpNWFG1MxzA5u0NsnkXQhxxJJziwGGcTDx-zpAj0RqsV8pSCERuaIKZyaAWMphs11NCZq22rMzGotboJA497W0F12UQrrapOEr1CyqgYk6OTDzaEY1qSrEH8vvVY9reBR3b4MMrFRZJO1jyPba-0KH783dNXW3U6AJK1GFMcLn5LU2GnJQAhQQAbOLGvQkZBgR4xMmlZXpiLeUBDO7QrMgyK6eB5JOHUeW3ehLB6YgwhPA9ZuCOO3RW7uJ_xO4mL-TBnRVDPHQl2NAmVqnsFJCM260qGTMGN5nNkms1_PfO0eR2vCA2aC5VfN22H4RQoqRv6FZ58tQgYsK1TzARxfjEJZ5B9EzrDfT_4dCc1T4BTemvxVzwFEEDFqoYGQRUjM78fiyIhX2BoMj2eVAtWFw0AnWOXOqCueBwkGZg_ojHrn2bPA3goqgsZWolsOlY6wRFUX2glRQqFEKv8yL9fX3thvqfZ-CPpZVGLXFubIh9BamCpomGXZbNmtNFDm4S25PAJ4OzSM8szXLrHgbrKL7MuWfJnky5kXFV_sFWxpBXr2IR_DJbmmzMW3wjW7V0HFRTbHnvYjT2KotVzjPIlj3acQ-iWU4PII3s3aj5FmKtWCPLYX895GJBTsc0KNFaEHrkfPk4Pu0CeoQX8Y31pzMJ_7YLLcp9VS4DeEw6C3nOPxl7P_qk6ybkbGFg_KWT8qnTcRp7ijRf1psTbZEOtDwtWixCw1krAgy7brsFpAFjQ7BYG4iLjADmPG8ldy9VqqRKlkgH5uMYo5IAUHhxxjETJO1V5-NmRUCyLVUqVqf84Uukj51hUoJ5b-6gln5xvqwP6GMSd1jydplXsbV_hwGU9qpGUMQtTGRLSwz9WYotqvuUCtRVsI68TZmbIEt0bKhmBolLYyVAvkzFTNe506Qrgpe8T8hthC3AfHqmV1EysZ3oHs-GdG0tRDgBzpos5XoKuZtOFfjyrh5ifmIy6Xd1llxbAECPLx9z0mjGMz8Q55LUstaO7zL9hAjw03y4O_xm7UlX2kzcx_66PFquYo5Eu09uEwPMUEIM_tziZTF-M7vA8nEEtKZdCxpnuwIGwBDkppI0sEDjdTuHmPt80QjunKBuPWNCY8pUN32Klo-jOHT8FmfNnmyPR5dsnN1_F_gRBIjeQo8a7tYxqLHN7C3dppD9ysZgCCOXHawJOVcHjAF7pdPNlMxZ8NrXpYISba7e2wt2npICOW8Opb4KbLsLpfdDwFhTcl2QFVLdfMe4yUwmn58wusNfZSpBelfySwQ2zXlYaeS2sjxmrLiO1GGlJwoQ1dtmwg8ChQsBDzLjAimqPFmhdOsZmm2Uj5OUI7l70AvUwy5XV59ow8c_bcY2tn8wCK5z-716mxfs11PTQlXD9fLse7xi9emBCGHGSb4mY0xL1q9EhLP2hJmaxZ7M_5SmAPSeA7EehGmAsMLV0f0aqGuWj3BGCXcDc2rraPse-bbomwyvKMUJ0cmu-tk3HkjwyvYgTsMy4DjKGsYI9RPrGWY9BfMkznT8_hacLGglGzZDs9HX9wU_MlJ010tNV0j-0A3ueSSQIHaeSbNblLRtNkal9X-1X04"
            }
          },
          "time": {
            "start": 1771212887419,
            "end": 1771212900053
          },
          "id": "prt_c6483d57b00146buNBxsxJzK5m",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483cad1001ww3ivrKWvFPBnu"
        },
        {
          "type": "tool",
          "callID": "call_omEIXgQ8okpXnuQqzyzOU1o1",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "ls",
              "description": "List repository root entries"
            },
            "output": "AGENTS.md\ncore\ndocs\nfrontends\nLICENSE\nopencode.jsonc\nREADME.md\nscripts\nTODO.md\n",
            "title": "List repository root entries",
            "metadata": {
              "output": "AGENTS.md\ncore\ndocs\nfrontends\nLICENSE\nopencode.jsonc\nREADME.md\nscripts\nTODO.md\n",
              "exit": 0,
              "description": "List repository root entries",
              "truncated": false
            },
            "time": {
              "start": 1771212900124,
              "end": 1771212900157
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_012d6a6b21312a2f0169929063f8a8819593af3ddcf0de6d2c"
            }
          },
          "id": "prt_c648406de001Qav7vMryHU1W4U",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483cad1001ww3ivrKWvFPBnu"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 28896,
            "input": 166,
            "output": 698,
            "reasoning": 671,
            "cache": {
              "read": 28032,
              "write": 0
            }
          },
          "id": "prt_c648407880016i4so0Qxbja1wc",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6483cad1001ww3ivrKWvFPBnu"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212900297,
          "completed": 1771212904554
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 28987,
          "input": 133,
          "output": 54,
          "reasoning": 23,
          "cache": {
            "read": 28800,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648407c9001s0XxwUO4U1c0gr",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c64841261001f9FmsaLqXO2TJY",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648407c9001s0XxwUO4U1c0gr"
        },
        {
          "type": "reasoning",
          "text": "**Inspecting documentation directory**",
          "metadata": {
            "openai": {
              "itemId": "rs_0fc4166583bcc1b401699290673d7c81939d925f8f9e3ba60c",
              "reasoningEncryptedContent": "gAAAAABpkpBo9tDmqvaHUkuejCrMqB9WrtSiYODBCFBz85J-BxwflTQ5s61rlPSaLpXcGM_9tWQyTUM8B94gDjDNb3uwGE6r_zXz0FlIr9R-btsufG5OFk08AMH9dyKKQhGL9uxPIwzjr8OkavOJpeeFu3ueaIMT5a1Ik-hZNyLVyE4Bl-d4HFWFtM1jabO6sONeg3oS8iWyh-V4kgJDxnL42rO3BFAdNaCOXytvBEN2pZzr5EiTEDrnvprKd6PJnB5Uabyl1lKYji4gokbd1Na59QvK0M9VU7IAVwCV9LArrTK-PAjT_GlFivweP5lNUIxt5DkjqktILYo-3uhCjXhWr0jVNpAddkZP7x871mUbAJqG5VxlZiklyE6EPZmlkyLqgNMfN2LYWcy4zdLGePlUJBDvHOcLXxky2jJZopo5A8lQxl7cX1vNFc-O95e5j3_01SDvhyYAcuQYAxrLldYvSq0ur-Q4kEtJHp3iFXZxdADv1cN-PytTWXcLzerAniGioHx5raOL2mGI-8GzkG2o60Lrj35OSm9DedOA_RRDplBARTxM0ymqghCH5YyriPXQ5dbm6eRU6MnAUi3rcMHorsPTBoXBWMwcuO8qud7ArWGjow1WrBJBrOqqDWkYDZ4uLRsjoL3fCo6UWx1qEyzGuiZIiQHxhxSE6VTHIRqPHDXDnexRgjZ8Wf_x1WMA8g4EO2TQYkmITkWF9-3194y059pX75h0bP7slQzlOfXpSlf7-wCb0EDNPpMCQIPHr_65H4a3d5ePtN6guNJO_EsM4_RdC7CbIUYBRXqvtSr3ZOv6oMnA5TUKw6CaQNNAtwjDjIq7wO2qYHqAJ7DJYj2nTBbqghFoWRJAWfcXemj9CcTRetwhkN4FVTAFhcDk8aQ78UL53Tnx0ZwqLrHthhHZFYjhMi4N-_2sIu5co2FrIjoldNS8ynuicPphGZ91fMYAWCZxl3Yx"
            }
          },
          "time": {
            "start": 1771212903277,
            "end": 1771212904472
          },
          "id": "prt_c6484136d001hzDcV3j1VkjcLo",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648407c9001s0XxwUO4U1c0gr"
        },
        {
          "type": "tool",
          "callID": "call_FagZZXu9TdeAsR5KvWVqInbY",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/docs"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/docs</path>\n<type>directory</type>\n<entries>\ndesigns/\nreadmes/\n\n(2 entries)\n</entries>",
            "title": "docs",
            "metadata": {
              "preview": "designs/\nreadmes/",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771212904477,
              "end": 1771212904479
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0fc4166583bcc1b401699290684d50819392d6caabe3e3c537"
            }
          },
          "id": "prt_c64841819001exaBd0NrbwycK4",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648407c9001s0XxwUO4U1c0gr"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 28987,
            "input": 133,
            "output": 54,
            "reasoning": 23,
            "cache": {
              "read": 28800,
              "write": 0
            }
          },
          "id": "prt_c64841832001P27mAnX0VR98k1",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648407c9001s0XxwUO4U1c0gr"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212904557,
          "completed": 1771212925787
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 30122,
          "input": 237,
          "output": 1085,
          "reasoning": 1046,
          "cache": {
            "read": 28800,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6484186d001DJqPvs6ttqmR9o",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c648421170012AivAMujKEfJL5",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6484186d001DJqPvs6ttqmR9o"
        },
        {
          "type": "reasoning",
          "text": "**Designing HTML-to-Markdown helper**",
          "metadata": {
            "openai": {
              "itemId": "rs_0a1083b14a9482d5016992906b0da081939edfd775f21ccbfc",
              "reasoningEncryptedContent": "gAAAAABpkpB9bTlTdsd-3eMKNomDjpx_tPRPUfCK_Wcs4csq_FAOJr0svDh4_m9NCQYEHwSIjI0fJYwuVfmr4r03G7zY0ok8EcB13Aj6YQAtjYBYEfFLcJ8Xf9guq_9a4ZuqOtplvW5tkSlgAz6clwov-ZQJYtA79bbCgtPPY0Az_uO_otQvqEAfZTE3sc-Q63QNqHoeYcdFfPH0AtpdvGH4wZSvZYLuTLEnsJU6NNxLUf641dLue_-3iAFeJ4pgpfVBwVQLZiOIQZeYWVzQVi5MHYCVH1AoQCVY15JTxk7XPV76jYzcK3HwXqLOIIfrTFhSg_SWpjZPArx70AORVlUoTqwAiUlqlYT_Zhn4Xklf-fy6psspvwCbxcTfHSwTl4VJLYBKkDm8zYyPA5NEtsRqawa4XHtR5VQGLU-r122OsHBka2l9vhAhW5V15BL45C6N5pok9jZJMafdjRcrbQ3Ah8LrlG4tjzv7uwqj8m-Z7s3yrw9vFX-GJ5jcNnPZ56Ga-yZLuTeA7YX41VAol5lGQ0jOsIXA6y1xkSF8cVc4cMWmC0gr5EfWpHQZWDjs4UtbQ6NDAs8_OA6V3fk9WvqLq7Lvt29DyPK5bARkVC5M1bxisduedJ2Rcg47ZALPIenZ5wNYpHDIYV2fqn3aCbhsYs9tO4i7kOfWndnaQ2kmu4YE9OZIGty_scngjOtnHicTfkJLHklFH8q8sa2Miez9V3OvAN5Qqey-tjEvOQ7eU1cYXWlaCJENeDNluE3ktoVaon28fMzjNiJ8QJyTd8_vJxJg4Eo07Zk8pJJijTG3FiRCEx-tW1CgfIBKXCfbKqT36ZOxlQzVBD8jtMQjbvOSV5VznM1AsHNG_6ck0lXh7Z1W21IItX6ME8koTd-kPRcXtMcqDUJ0JQ_VxM-DDg46oDMYwsgjQ5X5CiIccs68CWj6_FpdwuCjt1CnK19ZIumLq8f6fHkjYJenU3QjI6CigtHtARV_oJw-RvwYjW15Ljuw2cGZDg_paOrRSoI9ks7hHvSByHJ4uMrTuU5I0sO1-dK7ddYxL18Vkujm6ID_Z4-kmHthNh1uzj7AN3hp6ccdDHFXC22wceiGKWL86FppHKgHqi2ddGhIRFA1YWGukWV2VvM1VBYaD1MLLFRNC7m4Q-bFe3jPtQB_LflXH26FQh1U47ulJeh6wL7sq2B3yTKYqa1wUm-J9vLByrrfMyO8IONBn_PSu9VI6NLYDXfyoUp3aCYeF9XtSHWyz-QYvNhPfRzhPhpsjXeVgNkg9YJ_Q2OfOM813rRIuIEvwhI0R1Z6Htrti0iFS8W5Ue2ijnyLyWnAxUu9XI7FK-PCKBUT2DqAsqPu7za7KZ-ZNCpZrslWVDw4XgPVRvUDw-lELof0vGjvJ8BKNMBhBmMFq_Cv-9FT2lpM38irqvudDLFRB23vUE1I5qMmlrvImnY36nAbBjLRlaO295psRdhDD1CA5mZjv6ZjeI1iX-i7HadyCFOnCsh7UB6jv4fBgzqwQL338dL-x482ClhmbfMZlDDvRUH5diViiLSQwSqojytIe3jF-4eKdZh1U7siRg73mYHExsWddIFtHQ0td0vWGPSY7guMXxMP8SctF7WCSURamDVwup1NRc9M15nsoB54UEVW6CmV0XmkPdEuh83w02JLUHp830aohvcRR188GRPIdi_gMcLmzpWoYh8hfWdbUlyIhe5sSQZrAReEZPVLqLkVaM1g-IH3CyzQ7nOGvmP9yy9yyjUw9ll6XjFwyoJw9rLN4TNhPX_iW4OFYSfkJRNV3olh2az7_TdWCfUPm0VKAX5MqzzAc6uGXg7TTpszKovWagKn2ZsLlnhygv4bbn8viNhNheVQnu-WYSkB6PIOfjGuUJe6xOVDX1dNKzI0S6X8nBUqxd6YxvcJxNeSfllvrUDLcFU-yGZ3rdjpih8Jn0n4Mbr1bGVz_bdLgopr2OrNNw16KT8tUBKGgHZQTDpqp44pdwwPPzjfDsmh2iKSP8t3zgERoFvnawjTJjCbL7uyV4oKE93UCwUS_JfvBYwRndO7eYCeX4gfkPgQm6-DzMiuRHd93ihyMPvyAbyQUAlTBQjObd_nzao_bjLkcuKK7z3GdciOfhZfMGjTAUiNVW1C2B5x2T0F0MDy7Ng-KF9D8SeISVbwvXmz5UWAfD6-Yn_4LJGvebYfeWJv46Pys01xbh_3oS_RQyYbqn8ID4gF0HIqtPbXm8tWfrx0NmoeXqyKvbnFeVk1seEPemL85c0QPYnlsziFYXZO5MoRVT0ktW5PPp1YyFFmBOAHe9D8h6UU3OFeSw9gSFccv33Nnv8TIuYQWD7XrD-EarBtRkXvOYEPCo1HgjP0yFcc2_O2UvRd7YuZNZBkZf4tgBIhfezU-NlscMTyprg8ig45z9N-uk9fPmZk4FnNsQmOLXRGkwdsNSjCwfDg9qqL-FSwDYkUJCbDXpAFY0BjFIKF2-lj4fGymCwfWE7_jXE4Sdmy2ZdNljvnDFCuVtnnGvUDRcrWAgB1cJA_R31XIBzYiPpzd-hN2lJkE6hofEmbwXHoxXHRzX5RDFf8J3uAynSQKGGfLXb7iUChVAcclfzUp2u4w1zYzH8Qz2XJQMwWTIeFysaDpBGuAf3Pjqr90sNgpTY6NqNJS2QEhqTb7IZGAW3gvq4-qtpQpRNJA8NL4KBWP6EeCTNKE-yzITG8zVi0xUhiIFkHFZNCeiRBdnNtyfRMm9GL0lEt9nFUP38VgXvODZzEdCmBBUm78j2girv9gGp5h6Ju9scprYpjP32CYgnNX9XMeBZ2qDhSI5llCaJUn_YnVfysKLVtmJiim8-v2N2lybMvIn6cN3LkKd4jaVqZF6hWgFN0gwKFNdHSWH3uQRa1HBx3cMj7mzCdJcleHOlWfZ8xt8gUDeezSK6e_nXHoeDYDbVl6LF6xcaHiRjgE9x13-jCHMl6kMkgvifH8ffJRgqLBpo_ymg9vF_nnqmwo4FWar-4SxGs6TFkY5w8-Xf8I9shZ4eavz78U1AjzQwCGzm0XrZcbjGvTPJCFYVZ0K1y9_fRAv0jIYoKM3VWUbK1ek8Ji5M0Xs0jYFKXeHzjNrXe1WWaGqcQy-I9_MRQVJlOE-S9b8RfqJzWSIVnvoxqeQawskqF4W0oSGePEGLiVtZB0tDQnuTWKfZ_fFDnmeMnWuJM6xslnyy4CDF2ah7N0QlYgwhU0LXB65qb2dZ5m1ZaHpK6wEalBhiFWJOjNc2oBjzNIKt8r5Fk1T5zqPrlDMm9xKZz3v_AmIxO7jpPMzx3vYyqetnvJ9iSFJxzvgUQ9xkLW-vrBMZJxmh40qe9sIgQzlxB5iDtwtHMxMAZgaQRiEJ9SssvkbW-G0l0Th0IscqtBw9-h9LDMg7FZq4lizEV9YtdStPjdtFF-6W67JqfxEXsGeWKQEPDztSVKfcETzaCYDREkdY-cwQEgC5t3EXUFGxe3uHYAdv8tr_g8fawZJ-pM-sVlhvcMuSCriYsPF-QGJxwzJk9ZepQR4uvxTflnf2ed8U8GhUQ7CX_9MVeLrTgSsZvkrqjRXwAG8TCXkGcTadS02EVZ0gJiuekE4O4pTCxKKnPzhs3p-VZkALAw8bmEzqOO1W2CTOEOREcZHvhYEomPV4wX777481AP5oZHk6GmZbw06IksB_bp67iFmn03m0RWRWhlPtBXNRxEZt6n-4J-zyKqLUqM--5rpHQxjBjrEq9bL75thSiiXuQnni8jwFE0HrZGacslRZhihXa-ejHX4IcIEEPt9OyZgkX4gCyZiMrYhjZB0ihApcEuVZisBcn_fev5FTrbP_3HZUGA1n7lrWoPUMIMMdYID3ps2uwFc_auAcE3uj0xOfUfQ6ht00MwykLludP-XmPY-46BlEc-RNOoy6-DB4N8f1H26falZfp_uXz147g735VQurpVRNL6GMOWdmXzSTwdiSNieYKahz9R7qUc6bDi79YXeFPeP_6omFFfSDdc_cNrJRl2I-r-4Ico2iPGTr90gcyn85P4jNBvI7nFWNVVjhkKwdOYTvHaTKWlplDHry7dhvFmI38rKiaqvTrXIK2IUrytpu4LENa_9G9-GxEmNHYximMLqpX6wpad6Fhi8RV-tavrHRBVoN7XFKqAPjlzIvNnZfbEVVAl5Q6yWQmtx8SNV4QS4MU-VUVBMnLwIvofjHPgD3zk-VkClTpJWGsemRgxvr-19j52afsydSnL9XWTZUZHp2PET_12W9-LCGrWfvlBTC6JcyV5f86sZpRXPdp5ALYGXjyxtQxtkJDam0rTgOwnxy8dFFdXdQK0emH4UHDxQPuHjIKL1H5XB-d1PXwzdRCLOOBVpIkB531RagkEkYMlL2eWW54zBtv33ruNfd_yAPSwP75L62bXP27t8DucVPuvIj8zAG5xyctrRq78W98hsOQIOlQ-BdVkEmbL44RGTOHlXmnuS5n5QzzjUcwTWis2uQe2FVBF8Np6BKJnM-20Y17V5QiYs1v1VQAKixL2BHM3LpRoRy24sfcVLiSP916zOscMZVz4V0uqrI9ee1qxbLt_yqXHSRc0HAdTl7BiBqOYV36jWIFW431nGPZsiuYhykMhl5PbPYCcGWLw-C4ivKC7ZAQWflEwXBEt3uwZOjpmj5xzeMVUklu7e78CL6b6oJHApXtcSJYRNvpYcXUkog05ZBjd8D7gFSMW7iNxeSwmQL0VZlZefMPenwAyLR_cKRd3IF0lMgok1IhYJsFSy7Kk0U3M7_GYVpsQUTyutbt8-SorYOLyr1rWY7mkI50Mr8vSpEjv7vPOQbwccvtgr0C67TVOoJw1dsEIIQbWcZ74Ud3u9W8Qd2UAOZ_enjd5KsEDDozgJFJcJUGw5cn3aCjfGW3fcqdPNMmDjnFb6mDPl_ngqfxVU_-PLVXMVTf9umqgt91PZ48LikiXbf30eqoM4ehEkA86yuOAQ3X6ZJ_bwK3K5_NMtB4hQOOLqe0OlRT__534FZTe8eH1iCBn01Q9lQsEPYy3RxzmpikfxQq9aTqJPQpfHqGOdYF78lLWZrYgv48M7rqbfePmGAap5qypZcK98nIfvEbPBdIY9q4kL_KCx3SlPuhb9jklB3T6O5E3l8rDwX-ti6fQ4wULT5BvGjS-v34hhvRblaNFI1OtfvRz6jYVPCIvvzGFiQK7DkS2vLlbq_gazzhI0LJif2y5-T5_qOxS31ekn9cVMnbIZRBNE6wFeb-dO2ChOgsFohe8mlIq5Dl9kTHQzFWf83A5VHdAa8jT3StRF8oGB02_Ioclu76sxRcOOEjJVNxIqpaGpGb9V3yBes7YzBRz60_SkOz_4V-Ba7i-OxwccwKONvw1kH9mHyOIXAdDAKfLeqwCm5Xf2bC1SHoFCsSj8k5KDeEBIZVVQdsh_qq70RPL4-8vRv1Jo1_iobS-3jTxllPrbB6G0rrtuTyqYdIcTiKA9L0v-fEnsfmcVCPZMzcLTUJzY5QvR0Uj-oeSkW00jMrwdPwwQpd7VT3vAOp3vmiFfuTBECBRn9aBsPLBEAXyJhKcCj8Q7ntw9zAupvWtNZjpGDxeAPfoDl3-x1w6bl5FrKCZL61YjalyM1LsYWxvPeSpgAfI9ypJr9G1QWEbuFaLG8E_Elgs8lpky3mUpKCCua1JC7XZIQ_FcFet05yeMM7pzNiiOOfMvz6Zg2qjwzVTNOIUZ7FyrWmFcoZ9XF1Eg9GF7lixiIRm-9B1sICxte-x_RBBfHKAHu1TYjDZq02hGhIV-D9KlmxgJTUA2GgvFHE64VjdoKnbKBqsuTKUZmkoTnhuij1QpZ9eTZDzNMLP6RdNhdBy4h7I-phSxfBC19UjokfO1zM52D6M1iDrfwPU_7WM65Mjgx1X1BecI8bmCW-fuGbzLFXzoO7t9sdSPnEGGdzJZN9TYaYccWd-w8iFWdB9yfH5kjkwIFSp7rc-VQOlRGFs4LAGY-VWF7YnEfyqdx7KwEpcmILcWWDdNE-QUNATNoI7Nzqn-_vishmmLIcfBeNKwha7ZejfOira6DyXDi5IM7cDOOpPh8YC6PaSHPN6xMhQoEkNR0LJqY4PfU2UeS5n5hVp5fLFsUqV0qQ-Ma0kqAVXxIxFp9kBO8i1Pl8J6eq0Vw8cfrubdiKizRIyNqd070al2agtS99NqZq-Sx33vp4D2v2_E_i0KB9eQP-bd8OjYnulyGaxVUNBox701qv72Yp3ZRk1lNs5Jf8BA7XNDImiAlIF48_gE7Fp2A03BY18iag4DPvrXZybvUouhjx_cy5xG9ktfvDq_XJRusAs2chwIK3Qg26PDARsOUZJJjklJ5-Ws-dCBDmcDWepNjcCv1emQVV5ImPWMTQP_vW71M5sbgHxakXdTeInQ93UsZqMCFck4Zg_vyFniDaF3nE1DZPgUhPSZXTmRQ8qloD0vQYIIA4Bbs5skcl7N9QsxRk7s1eomdoh9mSMknEwUQbUKy_vtjOnfYnWlUfKZfuv-VUwo3eBODSaG0Ay26-UJq3f96HobXtMN9hkXo825Ew1Cg_CPs1q-uStJu4RPCziZP5z4t30EUwa8jCTiKOa7Gh9PLjqhkSbFXLjRMnFDYSwC4YZc_wyB8SKHpOStOcy_6AZKF-MNB3BZ4WuTmm32eAiWnQTE-fSzdRkGCE5RiBR8ygJo3saAziaa3BErWk4Uq-d49efn4UoQUIVOdsXL9xh_hex06rwqwpkKMaZOTjophiNOUOkGYTX-Q8-Sihu8pxQIm2OP4qk_RFYjl1G7Logehlbtiftb3dCUGJxEpaDxqAATiAXQB36zsPsGZA4bn3zt6lY6uNireg5fYJFD1fVPOIGA46QMXy5TEgtG_7l7WlLh6g5Q-jhayfzxvHeoOUPzxcYTiFPWCUIBDUFF53t5bJmwdGySz8EsEXawn1neBwYfmJekxj6tb-ErFSOwSEreN3ax_Xz-lb0xq9DTGUbMDb6qYdDqy403iZcst61s79x9nM_f30LIr4QWsGd-4U88qco-KcFyVcWlEJgWVEaQQSI_FdqGfwlgCeq3b_PTAoWDzVDsH2Z5Oi1K9FfKflfh61Y5HRTubZw68Bkrn2FJKSenLwD1zvckj9H5uU2mWEXKqcAhZUtOyfy3VJEFA5ho6YrCQum10tD9r6p6cMkofAaaGm1UQUo1j0h6nqqKYezpbpnmf08qk1SCeGjSOpHgoZtwoFGUlfw9tv41DpncxYC5yn91VDMxCFyn9MMUx4rW3j4Gf9Cz1QMqjvu8fWueQQiqFij4OS_nmVLnvq6CUU9nsfR1zlFNX6fspOKEfvQUVq70T9jw4ZUefN-Ij7xPBIAMefTJjTrz0i9grPINP_QSX3nei1qGRyvJw6POVptcpwZ19eVDj1j0YbAlcEQg=="
            }
          },
          "time": {
            "start": 1771212907079,
            "end": 1771212925290
          },
          "id": "prt_c64842247001beBY7OMZHtR2Hd",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6484186d001DJqPvs6ttqmR9o"
        },
        {
          "type": "tool",
          "callID": "call_Rhgb4X4scoKmr8R4bT39nw6x",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "bun -e \"console.log(typeof DOMParser)\"",
              "description": "Check DOMParser availability in Bun"
            },
            "output": "undefined\n",
            "title": "Check DOMParser availability in Bun",
            "metadata": {
              "output": "undefined\n",
              "exit": 0,
              "description": "Check DOMParser availability in Bun",
              "truncated": false
            },
            "time": {
              "start": 1771212925426,
              "end": 1771212925744
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0a1083b14a9482d5016992907d38848193b44aba32e8498cf7"
            }
          },
          "id": "prt_c6484696c001iNqf3y0RxU3gee",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6484186d001DJqPvs6ttqmR9o"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 30122,
            "input": 237,
            "output": 1085,
            "reasoning": 1046,
            "cache": {
              "read": 28800,
              "write": 0
            }
          },
          "id": "prt_c64846b30001BcKitlwZ5F7G3f",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6484186d001DJqPvs6ttqmR9o"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212925789,
          "completed": 1771212932003
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 30305,
          "input": 951,
          "output": 170,
          "reasoning": 136,
          "cache": {
            "read": 29184,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64846b5d001IKsr08fBzNCv3c",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c6484746b001W3c3MfzxIEERhm",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64846b5d001IKsr08fBzNCv3c"
        },
        {
          "type": "reasoning",
          "text": "**Evaluating DOM parsing alternatives**",
          "metadata": {
            "openai": {
              "itemId": "rs_03ed36d5b87b7b0801699290805a3c8194be064095ef22d073",
              "reasoningEncryptedContent": "gAAAAABpkpCD3DJa7fKANMh_VOnY2AElAq3KRrQJxwekmSI7qViZ-VTj9cBhQq1xL1c7Tqv0tvzytu2d-NHQojkRrFgcSd6QIMuThljpHZ9JWRkoLPjmgsXEMxu6meZjBm1RbaJn3XypCbNkFhbrba38cwUA-GnrFYozvTuuf4Lu-VXXv3hTLG_ktCPQS9rdrMUcmcIjEI8p58bW3Y-sLvFz0dE8tONf_U7fGkaUbVkE6-8GxqgmWO9thGjPoQ3UHcI6ird0DkFPTwVfeMj_3QUplnjtVxU-2DIq_49m63xM-eUxLG_p83fVYnW2p2aVcRdJG0pUqrlTIscfoHx3RA7gntKhzHIWqAjF5poltMEG5VL77V_aWU0PBmzh9jiw8jYt3H1O1FAe7fLNOIjZKiD8DTn4WchY_nOBeSd2PtSYgE-bjY3POchMwgPcrFomuCrk36Ldo4t-8v9Me-pWkHGOs2e8aKMbj3BwRpSpQ47hHofBf97YV9KmncUU-X1-dW9uIGwQuzq4YQxMHgzM7l3bjYZFI7xHPCtUAxYC9jGo21g5GTZJFowRvhYv5v_Mk1r7WpwgAGtr64Rm4snRMfARn_qFOqo7knnCH8L_RXuXjNgogVNi3IAifqBxna4ITepSXkM7WiC_dacsSAbnbbFrl-YRd90MnDfLFc0tPglb5CtMMWmpO8w3zDoS9HV1U8ijnVx6ZGu6h-PUapjvhhblJmcYBOA-CXQRMb5JaecufHcav4T1AG5_Vg8wjfvGgqHCJyFCfJWWK2YGkQMVOmcEpo13XIAl6CHqS6HQe72rb20LI-1Fhm1GQaFpfA5GlVVYeZgdMGzpVyr-EvnvvqichA2ETTcazmle3rccJX49-2qPLn8JKDw_FFIKE-6zRR5U2SvguV0u9sA0t-i62j-D1Eh7oHcGpAUWZVS2PFK-nYvWK65rxGheBqvaQAXe1t5XMAaH2hBJ93OFGG-8JM1GWWcbAprD-k9fnV8bdGLcuHTqxI8O0OIoVULsTM0qi-aCv1bmq0SRVCMCuf4Ii-3VIuwdklbXO1XZfvmJOxeq7OIxRTRFR3h25Nu41piNDJiwbj7LFjdWGblB_3luflsv2aoxa3z-Qn4P9dM_OV7rFR-JCfHkCDHu3nrqtf2iK_Naia1xXujPYEtj821-GB8RxO_Ocw8kRjlcSBtPTf75OZrKNSOPf--6cpyoGTYm4--4al_uCcut6771CzFqDOHStLqZxl8BOcL--urn99BUxdkQH_WP5ihoZFHvgDO3uWTlG9shzQUZEnkzd0CfQVOl2Br4YKfjkUnJP5-9oInZBILt31Q6xtB4zxHwThkykjQwDB69GTrGiZTyVqUIP2eO9XM_2q8NNxaXpYdqfjGQNhvqziTm6fj4tO6Zz-L3uxRzEHESvLY-En1-wFD7ugRJGWXbhKNabr-9ayzmaoY6B2xjq-BWJuPwRLHZ57PPP3Xcp1Udh7Zk7Bs3lYuV6CebDAGNCkf9G71LMBNgBX-5vfGZohruMRRcRCseOND3kTpfqsgUB2yo0ksVQuHvfBiMbUYsIsf5DVwGx4gpO3waH0Y5O8mVdZ0EyMnw4wCyvXOIS89Uth0M3IJMOr9EGpltdSeur0AZJqCxkh67lD-FoHtPsgxR4nA2dvCG__rUEAI0womaJjyP"
            }
          },
          "time": {
            "start": 1771212928382,
            "end": 1771212931733
          },
          "id": "prt_c6484757e001kyNesXhZudOTXZ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64846b5d001IKsr08fBzNCv3c"
        },
        {
          "type": "tool",
          "callID": "call_VBx75Fe8OsaDKuhfvCpFwjJZ",
          "tool": "webfetch",
          "state": {
            "status": "completed",
            "input": {
              "url": "https://moonrepo.dev/docs/install",
              "format": "html",
              "timeout": 120
            },
            "output": "<!doctype html>\n<html lang=\"en\" dir=\"ltr\" class=\"docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-install\" data-has-hydrated=\"false\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"generator\" content=\"Docusaurus v3.9.2\">\n<title data-rh=\"true\">Install moon | moonrepo</title><meta data-rh=\"true\" name=\"viewport\" content=\"width=device-width,initial-scale=1\"><meta data-rh=\"true\" name=\"twitter:card\" content=\"summary_large_image\"><meta data-rh=\"true\" property=\"og:url\" content=\"https://moonrepo.dev/docs/install\"><meta data-rh=\"true\" property=\"og:locale\" content=\"en\"><meta data-rh=\"true\" name=\"docusaurus_locale\" content=\"en\"><meta data-rh=\"true\" name=\"docsearch:language\" content=\"en\"><meta data-rh=\"true\" name=\"keywords\" content=\"moon, repo, moonrepo, task, runner, build, system, ci, times, devx, developer, experience, tooling, tools, monorepo, polyrepo, productivity, platform, proto, toolchain\"><meta data-rh=\"true\" name=\"og:image\" content=\"https://moonrepo.dev/img/hero/slate-bg.jpg\"><meta data-rh=\"true\" name=\"docusaurus_version\" content=\"current\"><meta data-rh=\"true\" name=\"docusaurus_tag\" content=\"docs-default-current\"><meta data-rh=\"true\" name=\"docsearch:version\" content=\"current\"><meta data-rh=\"true\" name=\"docsearch:docusaurus_tag\" content=\"docs-default-current\"><meta data-rh=\"true\" property=\"og:title\" content=\"Install moon | moonrepo\"><meta data-rh=\"true\" name=\"description\" content=\"The following guide can be used to install moon and integrate it into an existing repository (with\"><meta data-rh=\"true\" property=\"og:description\" content=\"The following guide can be used to install moon and integrate it into an existing repository (with\"><link data-rh=\"true\" rel=\"icon\" href=\"/img/favicon.svg\"><link data-rh=\"true\" rel=\"canonical\" href=\"https://moonrepo.dev/docs/install\"><link data-rh=\"true\" rel=\"alternate\" href=\"https://moonrepo.dev/docs/install\" hreflang=\"en\"><link data-rh=\"true\" rel=\"alternate\" href=\"https://moonrepo.dev/docs/install\" hreflang=\"x-default\"><link data-rh=\"true\" rel=\"preconnect\" href=\"https://400S075OEM-dsn.algolia.net\" crossorigin=\"anonymous\"><link rel=\"alternate\" type=\"application/rss+xml\" href=\"/blog/rss.xml\" title=\"moonrepo RSS Feed\">\n<link rel=\"alternate\" type=\"application/atom+xml\" href=\"/blog/atom.xml\" title=\"moonrepo Atom Feed\">\n\n<link rel=\"preconnect\" href=\"https://www.google-analytics.com\">\n<link rel=\"preconnect\" href=\"https://www.googletagmanager.com\">\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=G-LB233GTZD3\"></script>\n<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag(\"js\",new Date),gtag(\"config\",\"G-LB233GTZD3\",{})</script>\n\n\n\n<link rel=\"search\" type=\"application/opensearchdescription+xml\" title=\"moonrepo\" href=\"/opensearch.xml\"><link rel=\"stylesheet\" href=\"/assets/css/styles.e6dcddd9.css\">\n<script src=\"/assets/js/runtime~main.3f833ac7.js\" defer=\"defer\"></script>\n<script src=\"/assets/js/main.ff931658.js\" defer=\"defer\"></script>\n</head>\n<body class=\"navigation-with-keyboard\">\n<svg style=\"display: none;\"><defs>\n<symbol id=\"theme-svg-external-link\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z\"/></symbol>\n</defs></svg>\n<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get(\"docusaurus-theme\")}catch(t){}}()||function(){try{return window.localStorage.getItem(\"theme\")}catch(t){}}();document.documentElement.setAttribute(\"data-theme\",t||\"light\"),document.documentElement.setAttribute(\"data-theme-choice\",t||\"light\")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith(\"docusaurus-data-\")){var a=t.replace(\"docusaurus-data-\",\"data-\");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=\"__docusaurus\"><link rel=\"preload\" as=\"image\" href=\"/img/logo.svg\"><div role=\"region\" aria-label=\"Skip to main content\"><a class=\"skipToContent_oPtH\" href=\"#__docusaurus_skipToContent_fallback\">Skip to main content</a></div><nav aria-label=\"Main\" class=\"theme-layout-navbar navbar navbar--fixed-top\"><div class=\"navbar__inner\"><div class=\"theme-layout-navbar-left navbar__items\"><button aria-label=\"Toggle navigation bar\" aria-expanded=\"false\" class=\"navbar__toggle clean-btn\" type=\"button\"><svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" aria-hidden=\"true\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" d=\"M4 7h22M4 15h22M4 23h22\"></path></svg></button><a class=\"navbar__brand\" href=\"/\"><div class=\"navbar__logo\"><img src=\"/img/logo.svg\" alt=\"moon\" class=\"themedComponent_siVc themedComponent--light_hHel\"><img src=\"/img/logo.svg\" alt=\"moon\" class=\"themedComponent_siVc themedComponent--dark_yETr\"></div></a><div class=\"navbar__item dropdown dropdown--hoverable\"><a href=\"#\" aria-haspopup=\"true\" aria-expanded=\"false\" role=\"button\" class=\"navbar__link\">Products</a><ul class=\"dropdown__menu\"><li><a class=\"dropdown__link\" href=\"/moon\"><strong class=\"block mr-2\">moon</strong><div class=\"opacity-60\">Build system for managing codebases</div></a></li><li><a class=\"dropdown__link\" href=\"/proto\"><strong class=\"block mr-2\">proto</strong><div class=\"opacity-60\">Multi-language version manager</div></a></li></ul></div><div class=\"navbar__item dropdown dropdown--hoverable\"><a href=\"#\" aria-haspopup=\"true\" aria-expanded=\"false\" role=\"button\" class=\"navbar__link\">Docs</a><ul class=\"dropdown__menu\"><li><a aria-current=\"page\" class=\"dropdown__link dropdown__link--active\" href=\"/docs\"><strong>moon</strong></a></li><li><a class=\"dropdown__link\" href=\"/docs/proto\"><strong>proto</strong></a></li></ul></div><a class=\"navbar__item navbar__link\" href=\"/docs/guides/ci\">Guides</a><a class=\"navbar__item navbar__link\" href=\"/blog\">Blog</a><a href=\"https://github.com/moonrepo\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"navbar__item navbar__link\">GitHub</a></div><div class=\"theme-layout-navbar-right navbar__items navbar__items--right\"><div class=\"toggle_ki11 colorModeToggle_Hewu\"><button class=\"clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m\" type=\"button\" disabled=\"\" title=\"system mode\" aria-label=\"Switch between dark and light mode (currently system mode)\"><svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" aria-hidden=\"true\" class=\"toggleIcon_k9hJ lightToggleIcon_lgto\"><path fill=\"currentColor\" d=\"M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z\"></path></svg><svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" aria-hidden=\"true\" class=\"toggleIcon_k9hJ darkToggleIcon_U96C\"><path fill=\"currentColor\" d=\"M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z\"></path></svg><svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" aria-hidden=\"true\" class=\"toggleIcon_k9hJ systemToggleIcon_E5c0\"><path fill=\"currentColor\" d=\"m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z\"></path></svg></button></div><div class=\"navbarSearchContainer_bzqh\"><button type=\"button\" class=\"DocSearch DocSearch-Button\" aria-label=\"Search (Meta+k)\" aria-keyshortcuts=\"Meta+k\"><span class=\"DocSearch-Button-Container\"><svg width=\"20\" height=\"20\" class=\"DocSearch-Search-Icon\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><circle cx=\"11\" cy=\"11\" r=\"8\" stroke=\"currentColor\" fill=\"none\" stroke-width=\"1.4\"></circle><path d=\"m21 21-4.3-4.3\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg><span class=\"DocSearch-Button-Placeholder\">Search</span></span><span class=\"DocSearch-Button-Keys\"></span></button></div></div></div><div role=\"presentation\" class=\"navbar-sidebar__backdrop\"></div></nav><div id=\"__docusaurus_skipToContent_fallback\" class=\"theme-layout-main main-wrapper mainWrapper_MB5r\"><div class=\"docsWrapper__sE8\"><button aria-label=\"Scroll back to top\" class=\"clean-btn theme-back-to-top-button backToTopButton_iEvu\" type=\"button\"></button><div class=\"docRoot_DfVB\"><aside class=\"theme-doc-sidebar-container docSidebarContainer_c7NB\"><div class=\"sidebarViewport_KYo0\"><div class=\"sidebar_CUen\"><nav aria-label=\"Docs sidebar\" class=\"menu thin-scrollbar menu_jmj1\"><ul class=\"theme-doc-sidebar-menu menu__list\"><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item\"><a class=\"menu__link\" href=\"/docs\"><span title=\"Introduction\" class=\"linkLabel_fEdy\">Introduction</span></a></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item\"><a class=\"menu__link menu__link--active\" aria-current=\"page\" href=\"/docs/install\"><span title=\"Install moon\" class=\"linkLabel_fEdy\">Install moon</span></a></li><li class=\"theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed\"><div class=\"menu__list-item-collapsible\"><a class=\"categoryLink_ROYx menu__link menu__link--sublist\" href=\"/docs/how-it-works\"><span title=\"How it works\" class=\"categoryLinkLabel_ufhF\">How it works</span></a><button aria-label=\"Expand sidebar category &#x27;How it works&#x27;\" aria-expanded=\"false\" type=\"button\" class=\"clean-btn menu__caret\"></button></div></li><li class=\"theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item\"><div class=\"menu__list-item-collapsible\"><a class=\"categoryLink_ROYx menu__link menu__link--sublist menu__link--sublist-caret\" role=\"button\" aria-expanded=\"true\" href=\"/docs/setup-workspace\"><span title=\"Getting started\" class=\"categoryLinkLabel_ufhF\">Getting started</span></a></div><ul class=\"menu__list\"><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item\"><a class=\"menu__link\" tabindex=\"0\" href=\"/docs/setup-workspace\"><span title=\"Setup workspace\" class=\"linkLabel_fEdy\">Setup workspace</span></a></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item\"><a class=\"menu__link\" tabindex=\"0\" href=\"/docs/create-project\"><span title=\"Create a project\" class=\"linkLabel_fEdy\">Create a project</span></a></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item\"><a class=\"menu__link\" tabindex=\"0\" href=\"/docs/setup-toolchain\"><span title=\"Setup toolchain\" class=\"linkLabel_fEdy\">Setup toolchain</span></a></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item\"><a class=\"menu__link\" tabindex=\"0\" href=\"/docs/create-task\"><span title=\"Create a task\" class=\"linkLabel_fEdy\">Create a task</span></a></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item\"><a class=\"menu__link\" tabindex=\"0\" href=\"/docs/run-task\"><span title=\"Run a task\" class=\"linkLabel_fEdy\">Run a task</span></a></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item\"><a class=\"menu__link\" tabindex=\"0\" href=\"/docs/migrate-to-moon\"><span title=\"Migrate to moon\" class=\"linkLabel_fEdy\">Migrate to moon</span></a></li></ul></li><li class=\"theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed\"><div class=\"menu__list-item-collapsible\"><a class=\"categoryLink_ROYx menu__link menu__link--sublist\" href=\"/docs/concepts\"><span title=\"Concepts\" class=\"categoryLinkLabel_ufhF\">Concepts</span></a><button aria-label=\"Expand sidebar category &#x27;Concepts&#x27;\" aria-expanded=\"false\" type=\"button\" class=\"clean-btn menu__caret\"></button></div></li><li class=\"theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed\"><div class=\"menu__list-item-collapsible\"><a class=\"categoryLink_ROYx menu__link menu__link--sublist\" href=\"/docs/config\"><span title=\"Config files\" class=\"categoryLinkLabel_ufhF\">Config files</span></a><button aria-label=\"Expand sidebar category &#x27;Config files&#x27;\" aria-expanded=\"false\" type=\"button\" class=\"clean-btn menu__caret\"></button></div></li><li class=\"theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed\"><div class=\"menu__list-item-collapsible\"><a class=\"categoryLink_ROYx menu__link menu__link--sublist\" href=\"/docs/editors\"><span title=\"Editors\" class=\"categoryLinkLabel_ufhF\">Editors</span></a><button aria-label=\"Expand sidebar category &#x27;Editors&#x27;\" aria-expanded=\"false\" type=\"button\" class=\"clean-btn menu__caret\"></button></div></li><li class=\"theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed\"><div class=\"menu__list-item-collapsible\"><a class=\"categoryLink_ROYx menu__link menu__link--sublist\" href=\"/docs/commands\"><span title=\"Commands\" class=\"categoryLinkLabel_ufhF\">Commands</span></a><button aria-label=\"Expand sidebar category &#x27;Commands&#x27;\" aria-expanded=\"false\" type=\"button\" class=\"clean-btn menu__caret\"></button></div></li><li class=\"theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed\"><div class=\"menu__list-item-collapsible\"><a class=\"categoryLink_ROYx menu__link menu__link--sublist menu__link--sublist-caret\" role=\"button\" aria-expanded=\"false\" href=\"/docs/migrate/2.0\"><span title=\"Migrations\" class=\"categoryLinkLabel_ufhF\">Migrations</span></a></div></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item\"><a class=\"menu__link\" href=\"/docs/cheat-sheet\"><span title=\"Cheat sheet\" class=\"linkLabel_fEdy\">Cheat sheet</span></a></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item\"><a class=\"menu__link\" href=\"/docs/comparison\"><span title=\"Feature comparison\" class=\"linkLabel_fEdy\">Feature comparison</span></a></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item\"><a class=\"menu__link\" href=\"/docs/terminology\"><span title=\"Terminology\" class=\"linkLabel_fEdy\">Terminology</span></a></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item\"><a class=\"menu__link\" href=\"/docs/faq\"><span title=\"FAQ\" class=\"linkLabel_fEdy\">FAQ</span></a></li><li class=\"theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item\"><a href=\"https://github.com/moonrepo/moon/releases\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"menu__link menuExternalLink_BiEj\"><span title=\"Changelog\" class=\"linkLabel_fEdy\">Changelog</span><svg width=\"13.5\" height=\"13.5\" aria-label=\"(opens in new tab)\" class=\"iconExternalLink_nPrP\"><use href=\"#theme-svg-external-link\"></use></svg></a></li></ul></nav></div></div></aside><main class=\"docMainContainer_a9sJ\"><div class=\"container padding-top--md padding-bottom--lg\"><div class=\"row\"><div class=\"col docItemCol_Qr34\"><div class=\"docItemContainer_tjFy\"><article><span class=\"float-right ml-2\"><select class=\"outline-none min-w-0 bg-white border border-solid border-gray-400 dark:border-transparent rounded-md p-0.5 text-sm text-gray-800 placeholder-gray-600 h-full font-sans\"><option value=\"bun\">Bun</option><option value=\"deno\">Deno</option><option value=\"go\">Go</option><option value=\"node\" selected=\"\">Node.js</option><option value=\"php\">PHP</option><option value=\"python\">Python</option><option value=\"ruby\">Ruby</option><option value=\"rust\">Rust</option></select></span><nav class=\"flex pl-1 mb-2\" aria-label=\"Breadcrumb\"><ol role=\"list\" class=\"list-none p-0 m-0 flex items-center space-x-2\" itemscope=\"\" itemtype=\"https://schema.org/BreadcrumbList\"><li><a class=\"cursor-pointer text-base text-gray-700 hover:text-gray-800 dark:text-gray-600 dark:hover:text-gray-500 font-normal\" href=\"/\"><span class=\"inline-block flex-shrink-0\" aria-hidden=\"true\" style=\"padding-top:5px\"><span></span></span><span class=\"sr-only\">Home</span></a></li><li itemscope=\"\" itemprop=\"itemListElement\" itemtype=\"https://schema.org/ListItem\"><div class=\"flex items-center\"><span class=\"inline-block flex-shrink-0 text-gray-600 mr-2\" aria-hidden=\"true\"><span></span></span><a class=\"cursor-pointer text-sm text-gray-700 hover:text-gray-800 dark:text-gray-600 dark:hover:text-gray-500 font-medium\" aria-current=\"page\" itemprop=\"item\" href=\"/docs/install\"><span itemprop=\"name\">Install moon</span></a><meta itemprop=\"position\" content=\"1\"></div></li></ol></nav><div><div class=\"theme-admonition theme-admonition-warning admonition_WCGJ alert alert--warning\"><div class=\"admonitionHeading_GCBg\"><span class=\"admonitionIcon_L39b\"><svg viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z\"></path></svg></span>warning</div><div class=\"admonitionContent_pbrs\"><p>Documentation is currently for <a href=\"/blog/moon-v2-alpha\">moon v2</a> and latest proto. Documentation for moon v1 has been frozen and can be<!-- --> <a href=\"https://moonrepo.github.io/website-v1/\">found here</a>.</p></div></div></div><div class=\"tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys\"><button type=\"button\" class=\"clean-btn tocCollapsibleButton_iI2p\">On this page</button></div><div class=\"theme-doc-markdown markdown\"><header><h1>Install moon</h1></header><span class=\"inline-flex items-center px-1 py-0.5 rounded text-xs font-bold uppercase bg-green-100 text-green-900 absolute right-0 top-1.5\"><span class=\"inline-block mr-1\" aria-hidden=\"true\"><span></span></span>2 min</span>\n<p>The following guide can be used to install moon and integrate it into an existing repository (with\nor without incremental adoption), or to a fresh repository.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_tleR\" id=\"installing\">Installing<a href=\"#installing\" class=\"hash-link\" aria-label=\"Direct link to Installing\" title=\"Direct link to Installing\" translate=\"no\"></a></h2>\n<p>The entirety of moon is packaged and shipped as a single binary. It works on all major operating\nsystems, and does not require any external dependencies. For convenience, we provide the following\nscripts to download and install moon.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_tleR\" id=\"proto\">proto<a href=\"#proto\" class=\"hash-link\" aria-label=\"Direct link to proto\" title=\"Direct link to proto\" translate=\"no\"></a></h3>\n<p>moon can be installed and managed in <a class=\"\" href=\"/proto\">proto&#x27;s toolchain</a>. This will install moon to\n<code>~/.proto/tools/moon</code> and make the binary available at <code>~/.proto/bin</code>.</p>\n<div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\">proto </span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">install</span><span class=\"token plain\"> moon</span><br></span></code></pre></div></div>\n<p>Furthermore, the version of moon can be pinned on a per-project basis using the\n<a class=\"\" href=\"/docs/proto/config\"><code>.prototools</code> config file</a>.</p>\n<div class=\"language-toml codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockTitle_kY6l\">.prototools</div><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token key property\" style=\"color:#b7a9f9\">moon</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#cad4e2\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#c9e166\">&quot;1.31.0&quot;</span><br></span></code></pre></div></div>\n<div class=\"theme-admonition theme-admonition-info admonition_WCGJ alert alert--info\"><div class=\"admonitionHeading_GCBg\"><span class=\"admonitionIcon_L39b\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>info</div><div class=\"admonitionContent_pbrs\"><p>We suggest using proto to manage moon (and other tools), as it allows for multiple versions to be\ninstalled and used. The other installation options only allow for a single version (typically the\nlast installed).</p></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_tleR\" id=\"linux-macos-wsl\">Linux, macOS, WSL<a href=\"#linux-macos-wsl\" class=\"hash-link\" aria-label=\"Direct link to Linux, macOS, WSL\" title=\"Direct link to Linux, macOS, WSL\" translate=\"no\"></a></h3>\n<p>In a terminal that supports Bash, run:</p>\n<div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">bash</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:#b7a9f9\">&lt;</span><span class=\"token punctuation\" style=\"color:#cad4e2\">(</span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">curl</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#fef9c3\">-fsSL</span><span class=\"token plain\"> https://moonrepo.dev/install/moon.sh</span><span class=\"token punctuation\" style=\"color:#cad4e2\">)</span><br></span></code></pre></div></div>\n<p>This will install moon to <code>~/.moon/bin</code>. You&#x27;ll then need to set <code>PATH</code> manually in your shell\nprofile.</p>\n<div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token builtin class-name\" style=\"color:#ff94ff;font-weight:bold\">export</span><span class=\"token plain\"> </span><span class=\"token assign-left variable environment constant\" style=\"color:#ff94ff;font-weight:bold\">PATH</span><span class=\"token operator\" style=\"color:#b7a9f9\">=</span><span class=\"token string\" style=\"color:#c9e166\">&quot;</span><span class=\"token string environment constant\" style=\"color:#ff94ff;font-weight:bold\">$HOME</span><span class=\"token string\" style=\"color:#c9e166\">/.moon/bin:</span><span class=\"token string environment constant\" style=\"color:#ff94ff;font-weight:bold\">$PATH</span><span class=\"token string\" style=\"color:#c9e166\">&quot;</span><br></span></code></pre></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_tleR\" id=\"windows\">Windows<a href=\"#windows\" class=\"hash-link\" aria-label=\"Direct link to Windows\" title=\"Direct link to Windows\" translate=\"no\"></a></h3>\n<p>In Powershell or Windows Terminal, run:</p>\n<div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\">irm https://moonrepo.dev/install/moon.ps1 </span><span class=\"token operator\" style=\"color:#b7a9f9\">|</span><span class=\"token plain\"> iex</span><br></span></code></pre></div></div>\n<p>This will install moon to <code>~\\.moon\\bin</code> and prepend to the <code>PATH</code> environment variable for the\ncurrent session. To persist across sessions, update <code>PATH</code> manually in your system environment\nvariables.</p>\n<div class=\"theme-admonition theme-admonition-info admonition_WCGJ alert alert--info\"><div class=\"admonitionHeading_GCBg\"><span class=\"admonitionIcon_L39b\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>info</div><div class=\"admonitionContent_pbrs\"><p>If you are using Git Bash on Windows, you can run the <a href=\"#linux-macos-wsl\" class=\"\">Unix commands</a> above.</p></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_tleR\" id=\"npm\">npm<a href=\"#npm\" class=\"hash-link\" aria-label=\"Direct link to npm\" title=\"Direct link to npm\" translate=\"no\"></a></h3>\n<p>moon is also packaged and shipped as a single binary through the\n<a href=\"https://www.npmjs.com/package/@moonrepo/cli\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\"><code>@moonrepo/cli</code></a> npm package. Begin by installing this\npackage at the root of the repository.</p>\n<div class=\"theme-tabs-container tabs-container tabList_J5MA\"><ul role=\"tablist\" aria-orientation=\"horizontal\" class=\"tabs\"><li role=\"tab\" tabindex=\"0\" aria-selected=\"true\" class=\"tabs__item tabItem_l0OV tabs__item--active\">Yarn</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_l0OV\">Yarn (classic)</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_l0OV\">npm</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_l0OV\">pnpm</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_l0OV\">Bun</li></ul><div class=\"margin-top--md\"><div role=\"tabpanel\" class=\"tabItem_wHwb\"><div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">yarn</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">add</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#fef9c3\">--dev</span><span class=\"token plain\"> @moonrepo/cli</span><br></span></code></pre></div></div></div><div role=\"tabpanel\" class=\"tabItem_wHwb\" hidden=\"\"><div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">yarn</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">add</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#fef9c3\">--dev</span><span class=\"token plain\"> @moonrepo/cli</span><br></span><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:#97a1af;font-style:italic\"># If using workspaces</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">yarn</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">add</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#fef9c3\">--dev</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#fef9c3\">-W</span><span class=\"token plain\"> @moonrepo/cli</span><br></span></code></pre></div></div></div><div role=\"tabpanel\" class=\"tabItem_wHwb\" hidden=\"\"><div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">npm</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">install</span><span class=\"token plain\"> --save-dev @moonrepo/cli</span><br></span></code></pre></div></div></div><div role=\"tabpanel\" class=\"tabItem_wHwb\" hidden=\"\"><div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">pnpm</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">add</span><span class=\"token plain\"> --save-dev @moonrepo/cli</span><br></span><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:#97a1af;font-style:italic\"># If using workspaces</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">pnpm</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">add</span><span class=\"token plain\"> --save-dev </span><span class=\"token parameter variable\" style=\"color:#fef9c3\">-w</span><span class=\"token plain\"> @moonrepo/cli</span><br></span></code></pre></div></div></div><div role=\"tabpanel\" class=\"tabItem_wHwb\" hidden=\"\"><div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\">bun </span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">install</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#fef9c3\">--dev</span><span class=\"token plain\"> @moonrepo/cli</span><br></span></code></pre></div></div></div></div></div>\n<p>If you are installing with Bun, you&#x27;ll need to add <code>@moonrepo/cli</code> as a\n<a href=\"https://bun.sh/docs/install/lifecycle#trusteddependencies\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">trusted dependency</a>.</p>\n<div class=\"theme-admonition theme-admonition-info admonition_WCGJ alert alert--info\"><div class=\"admonitionHeading_GCBg\"><span class=\"admonitionIcon_L39b\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>info</div><div class=\"admonitionContent_pbrs\"><p>When a global <code>moon</code> binary is executed, and the <code>@moonrepo/cli</code> binary exists within the\nrepository, the npm package version will be executed instead. We do this because the npm package\ndenotes the exact version the repository is pinned it.</p></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_tleR\" id=\"other\">Other<a href=\"#other\" class=\"hash-link\" aria-label=\"Direct link to Other\" title=\"Direct link to Other\" translate=\"no\"></a></h3>\n<p>moon can also be downloaded and installed manually, by downloading an asset from\n<a href=\"https://github.com/moonrepo/moon/releases\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">https://github.com/moonrepo/moon/releases</a>. Be sure to\nrename the file after downloading, and apply the executable bit (<code>chmod +x</code>) on macOS and Linux.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_tleR\" id=\"upgrading\">Upgrading<a href=\"#upgrading\" class=\"hash-link\" aria-label=\"Direct link to Upgrading\" title=\"Direct link to Upgrading\" translate=\"no\"></a></h2>\n<p>If using proto, moon can be upgraded using the following command:</p>\n<div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\">proto </span><span class=\"token function\" style=\"color:#ff94ff;font-weight:bold\">install</span><span class=\"token plain\"> moon </span><span class=\"token parameter variable\" style=\"color:#fef9c3\">--pin</span><br></span></code></pre></div></div>\n<p>Otherwise, moon can be upgraded with the <a class=\"\" href=\"/docs/commands/upgrade\"><code>moon upgrade</code></a> command. However, this\nwill only upgrade moon if it was installed in <code>~/.moon/bin</code>.</p>\n<div class=\"language-shell codeBlockContainer_mQmQ theme-code-block\" style=\"--prism-background-color:#00080f;--prism-color:#e5e9f1\"><div class=\"codeBlockContent_t_Hd\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_RMoD thin-scrollbar\" style=\"background-color:#00080f;color:#e5e9f1\"><code class=\"codeBlockLines_AclH\"><span class=\"token-line\" style=\"color:#e5e9f1\"><span class=\"token plain\">moon upgrade</span><br></span></code></pre></div></div>\n<p>Otherwise, you can re-run the installers above and it will download, install, and overwrite with the\nlatest version.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_tleR\" id=\"canary-releases\">Canary releases<a href=\"#canary-releases\" class=\"hash-link\" aria-label=\"Direct link to Canary releases\" title=\"Direct link to Canary releases\" translate=\"no\"></a></h2>\n<p>moon supports canary releases, which are built and published for every commit to our development\nbranches. These releases will include features and functionality that have not yet landed on master.\nWhen using a canary release, you&#x27;ll need to download and execute the binaries manually:</p>\n<ul>\n<li class=\"\">Using our npm package\n<a href=\"https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\"><code>@moonrepo/cli</code></a> under the\n<code>canary</code> tag. Releases are versioned by date.</li>\n<li class=\"\">From a <a href=\"https://github.com/moonrepo/moon/releases/tag/canary\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">GitHub prerelease</a> using the\n<code>canary</code> tag. This tag always represents the latest development release.</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_tleR\" id=\"nightly-releases\">Nightly releases<a href=\"#nightly-releases\" class=\"hash-link\" aria-label=\"Direct link to Nightly releases\" title=\"Direct link to Nightly releases\" translate=\"no\"></a></h2>\n<p>moon supports nightly releases, which are built and published once a day from the latest commit on\nmaster. When using a nightly release, you&#x27;ll need to download and execute the binaries manually.</p>\n<ul>\n<li class=\"\">Using our npm package\n<a href=\"https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\"><code>@moonrepo/cli</code></a> under the\n<code>nightly</code> tag. Releases are versioned by date.</li>\n<li class=\"\">From a <a href=\"https://github.com/moonrepo/moon/releases/tag/nightly\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">GitHub prerelease</a> using the\n<code>nightly</code> tag. This tag always represents the latest stable release.</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_tleR\" id=\"next-steps\">Next steps<a href=\"#next-steps\" class=\"hash-link\" aria-label=\"Direct link to Next steps\" title=\"Direct link to Next steps\" translate=\"no\"></a></h2>\n<div class=\"grid grid-cols-1 gap-2 sm:grid-cols-2\"><a class=\"focus:outline-none\" href=\"/docs/setup-workspace\"><div class=\"relative rounded-lg px-3 py-3 flex items-center space-x-2 border-solid border border-t-0 border-b-2 bg-gray-50 hover:bg-gray-100/90 border-gray-200/75 dark:bg-slate-700 dark:hover:bg-slate-600 dark:border-slate-900/75\"><div class=\"flex-shrink-0\" style=\"margin-bottom:-7px\"><span class=\"inline-block\" aria-hidden=\"true\"><span></span></span></div><div class=\"flex-1 min-w-0 text-gray-900 dark:text-gray-100\">Setup workspace</div></div></a></div></div><footer class=\"theme-doc-footer docusaurus-mt-lg\"><div class=\"row margin-top--sm theme-doc-footer-edit-meta-row\"><div class=\"col noPrint_QeZL\"><a href=\"https://github.com/moonrepo/moon/tree/master/website/docs/install.mdx\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"theme-edit-this-page\"><svg fill=\"currentColor\" height=\"20\" width=\"20\" viewBox=\"0 0 40 40\" class=\"iconEdit_bHB7\" aria-hidden=\"true\"><g><path d=\"m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z\"></path></g></svg>Edit this page</a></div><div class=\"col lastUpdated_ydrU\"></div></div></footer></article><nav class=\"docusaurus-mt-lg pagination-nav\" aria-label=\"Docs pages\"><div class=\"flex-1 text-left\"><a class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-bold inline-flex\" href=\"/docs\"><span class=\"inline-block mr-1 icon-previous\" aria-hidden=\"true\"><span></span></span><span>Introduction</span></a></div><div class=\"flex-1 text-right\"><a class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-bold inline-flex\" href=\"/docs/how-it-works\"><span>How it works</span><span class=\"inline-block ml-1 icon-next\" aria-hidden=\"true\"><span></span></span></a></div></nav></div></div><div class=\"col col--3\"><div class=\"tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop\"><ul class=\"table-of-contents table-of-contents__left-border\"><li><a href=\"#installing\" class=\"table-of-contents__link toc-highlight\">Installing</a><ul><li><a href=\"#proto\" class=\"table-of-contents__link toc-highlight\">proto</a></li><li><a href=\"#linux-macos-wsl\" class=\"table-of-contents__link toc-highlight\">Linux, macOS, WSL</a></li><li><a href=\"#windows\" class=\"table-of-contents__link toc-highlight\">Windows</a></li><li><a href=\"#npm\" class=\"table-of-contents__link toc-highlight\">npm</a></li><li><a href=\"#other\" class=\"table-of-contents__link toc-highlight\">Other</a></li></ul></li><li><a href=\"#upgrading\" class=\"table-of-contents__link toc-highlight\">Upgrading</a></li><li><a href=\"#canary-releases\" class=\"table-of-contents__link toc-highlight\">Canary releases</a></li><li><a href=\"#nightly-releases\" class=\"table-of-contents__link toc-highlight\">Nightly releases</a></li><li><a href=\"#next-steps\" class=\"table-of-contents__link toc-highlight\">Next steps</a></li></ul></div></div></div></div></main></div></div></div><footer class=\"bg-gray-100 dark:bg-slate-600\" aria-labelledby=\"footer-heading\"><h2 id=\"footer-heading\" class=\"sr-only\">Footer</h2><div class=\"max-w-7xl mx-auto py-3 px-2 sm:px-3 md:py-4 md:px-4 lg:px-6\"><div class=\"lg:grid lg:grid-cols-5 lg:gap-3\"><div class=\"grid grid-cols-3 gap-3 lg:col-span-3\"><div><h6 class=\"m-0 text-base font-semibold uppercase\">Learn</h6><ul role=\"list\" class=\"m-0 mt-2 p-0 space-y-1 list-none\"><li><a class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\" href=\"/docs\">Docs</a></li><li><a class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\" href=\"/docs/guides/ci\">Guides</a></li><li><a class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\" href=\"/blog\">Blog</a></li></ul></div><div><h6 class=\"m-0 text-base font-semibold uppercase\">Ecosystem</h6><ul role=\"list\" class=\"m-0 mt-2 p-0 space-y-1 list-none\"><li><a href=\"https://github.com/moonrepo/moon/releases\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\">Releases</a></li><li><a href=\"https://github.com/moonrepo/moon-configs\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\">Shared configs</a></li><li><a href=\"https://github.com/moonrepo/dev\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\">Developer tools</a></li><li><a href=\"https://github.com/moonrepo/examples\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\">Examples repository</a></li></ul></div><div><h6 class=\"m-0 text-base font-semibold uppercase\">Support</h6><ul role=\"list\" class=\"m-0 mt-2 p-0 space-y-1 list-none\"><li><a href=\"https://github.com/moonrepo\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\">GitHub</a></li><li><a href=\"https://discord.gg/qCh9MEynv2\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\">Discord</a></li><li><a href=\"https://twitter.com/tothemoonrepo\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\">Twitter</a></li></ul></div></div><div class=\"mt-4 lg:mt-0 col-span-2\"><h6 class=\"m-0 text-base font-semibold uppercase\">Contact us</h6><p class=\"text-base text-gray-800 dark:text-slate-100 font-normal\">Want to learn more about moonrepo? Have questions?</p><div class=\"mt-2\"><div class=\"flex justify-between gap-x-1\"><div class=\"w-3/4\"><label for=\"subject\" class=\"sr-only\">Subject</label><select id=\"subject\" name=\"subject\" required=\"\" class=\"outline-none min-w-0 w-full bg-white border border-transparent rounded-md px-1 py-1 text-base text-gray-800 placeholder-gray-600 h-full font-sans\"><option value=\"\" selected=\"\"></option><option value=\"Consultation\">Consultation</option><option value=\"Partnership\">Partnership</option><option value=\"Affiliation\">Affiliation</option></select></div><button class=\"border border-transparent rounded-md px-2 flex items-center justify-center text-base font-bold text-white bg-blurple-400 dark:bg-purple-600 opacity-60 py-1 w-1/4\" disabled=\"\" id=\"contact-next\" type=\"button\">Next</button></div></div><div class=\"mt-4 flex justify-end items-start gap-1\"><div><p class=\"text-sm text-gray-800 dark:text-slate-100 font-normal\">Backed by</p></div><div><svg xmlns=\"http://www.w3.org/2000/svg\" xml:space=\"preserve\" id=\"Layer_1\" x=\"0\" y=\"0\" viewBox=\"0 0 1604 320\" height=\"22\"><style>.st0{fill-rule:evenodd;clip-rule:evenodd;fill:#fb651e}</style><g id=\"Group-19\"><path id=\"Fill-1\" d=\"M0 320h320V0H0z\" class=\"st0\"></path><path id=\"Fill-2\" d=\"M173 175.9V247h-27v-71.1L77.1 73H110l49.6 76L209 73h32.9z\" style=\"fill-rule:evenodd;clip-rule:evenodd;fill:#fff\"></path><g id=\"Group-18\" transform=\"translate(425.854 73.217)\"><path id=\"Fill-3\" d=\"M81.8 34.1C52.2 34.1 30 57 30 86.6s22.2 52.7 51.8 52.7c19 0 35.5-9.8 44.4-26.3l25.4 15.1c-14.2 24.3-40.8 40.1-69.8 40.1C36.2 168.1 0 131.9 0 86.6 0 41.2 36.2 5 81.8 5c29.3 0 55.6 15.6 69.8 40.1l-25.4 15.1c-9-16.5-25.4-26.1-44.4-26.1\" class=\"st0\"></path><path id=\"Fill-5\" d=\"M249.2 107.2c0-18.5-13.5-32.5-30.9-32.5-17.9 0-31.4 14-31.4 32.5s13.5 32.5 31.4 32.5c17.1 0 30.9-14 30.9-32.5m-91.4 0c0-33.4 26.8-60.2 60.5-60.2 33.2 0 60 26.8 60 60.2s-26.8 60.2-60 60.2c-33.7 0-60.5-26.8-60.5-60.2\" class=\"st0\"></path><path id=\"Fill-7\" d=\"M467.1 97.6v67.2h-29v-62.1c0-17.4-8.5-28.4-21.3-28.4-13.1 0-22.7 11-22.7 28.4v62.1h-28v-62.1c0-17.4-8.8-28.4-21.7-28.4s-22.3 11-22.3 28.4v62.1h-29v-115h29v14.7c7.1-11 18.1-17.9 31.6-17.9 14.7 0 26.3 8.3 33.4 21.2 7.3-11.5 20.8-21.2 37.8-21.2 25.5 0 42.2 22.5 42.2 51\" class=\"st0\"></path><path id=\"Fill-9\" d=\"M570.2 108.4c0-19.2-11.9-33-28.6-33-16.3 0-28.6 13.1-28.6 32.7 0 19.5 12.6 32.7 29.1 32.7 16.2-.1 28.1-13.6 28.1-32.4m-22.5 59.4c-16 0-27.8-7.3-34.6-17.4v14.4h-29V4.8h29v59c7-9.4 18.8-16.2 34.1-16.2 29.7 0 52.4 25.6 52.9 60.1.5 34.9-22.7 60.1-52.4 60.1\" class=\"st0\"></path><path id=\"Fill-11\" d=\"M612.1 164.8h29v-115h-29zm-3.7-147.6c0-9.8 8.2-17.2 18.1-17.2 9.6 0 17.6 7.3 17.6 17.2 0 9.8-8 17.2-17.6 17.2-9.8-.1-18.1-7.4-18.1-17.2\" class=\"st0\"></path><path id=\"Fill-13\" d=\"M766.1 98.1v66.7h-28v-60.5c0-18.5-9.7-30-23.7-30-15.4 0-26.3 14-26.3 30.5v60h-28v-115h28v14.5c7.8-10.8 20.3-17.7 34.9-17.7 25.8 0 43.1 22 43.1 51.5\" class=\"st0\"></path><path id=\"Fill-14\" d=\"M854.1 113.8v-2.5l-29.3 5.7c-9.8 2.3-15.8 7.3-15.8 14 0 7.1 6.5 12.4 17.2 12.1 15.4-.5 27.9-13.9 27.9-29.3m28-18.4v69.4h-28v-13.3c-8.5 9.2-21.8 16-36.5 16.3-19.5 0-36.7-12.8-36.7-34.8 0-20.8 15.6-32.7 38.8-37.3l33.7-6.4c-2.3-9.6-9.6-16.9-20.7-16.9-11 0-21.3 6.9-27.5 15.6l-21.1-15.3c10.8-15.1 29.8-25.2 48.7-25.2 28.2-.2 49.3 19.3 49.3 47.9\" class=\"st0\"></path><path id=\"Fill-15\" d=\"M941.1 75.8V124c0 9.4 4.1 13.7 12.6 13.7h14.4v27h-18.4c-24.5 0-36.6-12-36.6-37.2V75.8h-21v-26h20V21.4l29-8.9v37.3h27v26z\" class=\"st0\"></path><path id=\"Fill-16\" d=\"M1069 107.2c0-18.5-13.5-32.5-30.9-32.5-17.9 0-31.4 14-31.4 32.5s13.5 32.5 31.4 32.5c17.1 0 30.9-14 30.9-32.5m-91.4 0c0-33.4 26.8-60.2 60.5-60.2 33.2 0 60 26.8 60 60.2s-26.8 60.2-60 60.2c-33.7 0-60.5-26.8-60.5-60.2\" class=\"st0\"></path><path id=\"Fill-17\" d=\"M1178.1 47.3v27.9c-25.9 0-37 12.6-37 29.1v60.5h-28v-115h28v14.4c7.9-10.3 20.6-16.9 37-16.9\" class=\"st0\"></path></g></g></svg></div></div></div></div><div class=\"mt-3 pt-3 md:mt-4 md:pt-4 border-0 border-t border-solid border-gray-200 dark:border-slate-400 flex items-center justify-between\"><div class=\"text-sm text-gray-800 dark:text-slate-100 font-normal m-0\"><div class=\"footer__copyright\">Copyright  2026, moonrepo, Inc.</div></div><div class=\"flex space-x-2\"><a href=\"https://github.com/moonrepo\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\"><span class=\"sr-only\">GitHub</span><span class=\"inline-block\" aria-hidden=\"true\"><span></span></span></a><a href=\"https://discord.gg/qCh9MEynv2\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\"><span class=\"sr-only\">Discord</span><span class=\"inline-block\" aria-hidden=\"true\"><span></span></span></a><a href=\"https://twitter.com/tothemoonrepo\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cursor-pointer text-base text-blurple-300 hover:text-blurple-500 dark:text-purple-400 dark:hover:text-purple-200 font-normal\"><span class=\"sr-only\">Twitter</span><span class=\"inline-block\" aria-hidden=\"true\"><span></span></span></a></div></div></div></footer></div>\n</body>\n</html>",
            "title": "https://moonrepo.dev/docs/install (text/html; charset=utf-8)",
            "metadata": {
              "truncated": false
            },
            "time": {
              "start": 1771212931840,
              "end": 1771212931957
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_03ed36d5b87b7b080169929083b2d4819481c39b98fb0b7486"
            }
          },
          "id": "prt_c64848296001Z9rpWmTcTs5nyY",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64846b5d001IKsr08fBzNCv3c"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 30305,
            "input": 951,
            "output": 170,
            "reasoning": 136,
            "cache": {
              "read": 29184,
              "write": 0
            }
          },
          "id": "prt_c64848377001Ob7j63B3PrdhX9",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64846b5d001IKsr08fBzNCv3c"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212932005,
          "completed": 1771212943342
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 46963,
          "input": 16561,
          "output": 194,
          "reasoning": 154,
          "cache": {
            "read": 30208,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648483a50012ZRPHBqt772mbj",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "id": "prt_c64848bcd001KL2tKxxkOvKIAd",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648483a50012ZRPHBqt772mbj"
        },
        {
          "type": "reasoning",
          "text": "**Testing markdown fetch service**",
          "metadata": {
            "openai": {
              "itemId": "rs_0cf82571775e4d5f0169929087bccc8194bc2d10615f26d751",
              "reasoningEncryptedContent": "gAAAAABpkpCMA9Wc0byf649MeTOuHcn-EQsCY1F6mAHPSs9safC1WwbbvdhSQnnSzE9sMfTV1ICLl5BtxxVXxKQjKMQPdt4cJ7U50tox8GxUx_0pJ0isuw5bMvUYpJzAkgDX9EIWLtO2oV3EmfK6pcZVRcAQvyUFoAFHa3reBDsBtkULHzb-OYDOphetcp8L_CtO2TMWI-iqctCJP90QZ1xd4D5g_g2FjTVKdO1HWhH1-F8lQwF6nKCL7NKA9QLAYXK5pZ2usegdK5GosWdgmu1zwhsYvSdjpLUsq3KruMSJiCxpQZ1fN7sTHyhjaBxmLqGJ2_SGbpHKY0urlyAS2CdLIVgOU4acuYrxnNlCbJtxYGEfX2cJc7-_Ry01Pemjio_cST63y0iATrXxDYE-AN5oKwHPOEDAVxZ4RwqrKIMAph45lV-P3CnWRrPY55gdQDCaWpfB9PSvzF2Nf8A1aGzQdkQ5QB7L6Hf__q_KjqEIZ2g0mtdqSd7wukZvrvX2Rar0M-Zj0Awlu2WZP1jn-4DlWttwiQVkp0GqrVcOySD3TTEwFatmF-Ob7wghbFvvW4T_bT3x5V2eJWNQ5LcunNAZpnrhbQwsAONSuWFYe8rb-qbRPkxxRtZdlNHOqu_C9-LBJ4eR4nsDWTQQTU8igQuC2AnxKoGH3YcpaqcjEUg80BuFoQQvGgcdbIaF27pQT6_FmowhcD8piyeyn_oCIsAiZSK0uOXXgHpUTky2dTtWgWB_AzuTieR23LRnWNm_fBIH3Dzekh1IxFoI7FikzzPs8j1FEyDYOy3uz-UG0-8-qFpfc4MuRj58qNGqxKUeKbIyLo1YTBhFkhQYadsQfrGS4WPy8zzsUgKFsLhV6k-QsgySqB6YLEI0IRv6a-_pcW1u87vcv4kvceFMWUhsqL9QTFsn4Z05achtzMxRZsn8ZfYcbBnMAF-VdbwCqFAfItdkHRLVsrg12G0wbiVPNvQFx6q0uIrTMjS5esR_0zs9mkcYkcX-kpRiuBL9d1Voqw6Z523pmFJn6XUQtteMN6KzI_-JPSsVk9kzWxdsIYePeYGj0ycI4seD9YjQ0XjzT9wOc5Z5Rq8YjkQ_75JDcApWoc0eEYt8cAnfycqQzdop0cIkQLalydTKRH4joFSGF4s0q6vPtWKd1nFNTJVbvCjLcio4OrSb-KyAuXOdVc21bhQjpuBtiMybspNX6DaN1kdTIHYt0oCANrc9VW3qiI6NfQqjLTZQ8oaUNE6Pmgir1kuXfU68vfLmsMCL8ubi388uPj2IGsGhR9B8KhKigASDJoQw4F81yeIYsRxtaeiTWmcpJpPjLu6TyNiRMLuIgOC8vBuzl10cMMg3-1ZPCSi04pXm3ulYG_vvkyE5pkFQrw92xSEP1dKzNmehI6uR8ulc75BLi2CvVRUvBa_5F_KDJ9f_JrwNUSQoSVGuYq-B8Pwy0FsUV2QLYPYfqtf-oj73crIi786P1xlv1HpaJyd-Xms0UrmlV7sEiNuAsiw87yHLtFTFQtjIsTGCI1CPMnCDRhomXKMDRRmK9SLWhnvmO1sLF4CXdicUXfpa3zyVudeOclLXlbR14IuIttAx8Eeg1M2d3ZHuMEqZkDoz-uCL3lnkWDQR7TaIZkKDeG3ciC37gWsSOKp_-fQRvyrkQxVZ6HbaeidRBCA2MygOvhH5x45OI_V_h2QaM8FRSFYchnrxc_cDLa3cxgC7ErzjWi6p74Hg52KU0pEL9xDRrBloQlHrScEWTg=="
            }
          },
          "time": {
            "start": 1771212935905,
            "end": 1771212940272
          },
          "id": "prt_c648492e1001IJ7TfjEt3KZ7i5",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648483a50012ZRPHBqt772mbj"
        },
        {
          "type": "tool",
          "callID": "call_d7lamBp7AGLQAgWcZr3quZOr",
          "tool": "webfetch",
          "state": {
            "status": "completed",
            "input": {
              "url": "https://r.jina.ai/http://moonrepo.dev/docs/install",
              "format": "markdown",
              "timeout": 120
            },
            "output": "Title: Install moon | moonrepo\n\nURL Source: http://moonrepo.dev/docs/install\n\nMarkdown Content:\n2 min\n\nThe following guide can be used to install moon and integrate it into an existing repository (with or without incremental adoption), or to a fresh repository.\n\nInstalling[](http://moonrepo.dev/docs/install#installing \"Direct link to Installing\")\n--------------------------------------------------------------------------------------\n\nThe entirety of moon is packaged and shipped as a single binary. It works on all major operating systems, and does not require any external dependencies. For convenience, we provide the following scripts to download and install moon.\n\n### proto[](http://moonrepo.dev/docs/install#proto \"Direct link to proto\")\n\nmoon can be installed and managed in [proto's toolchain](https://moonrepo.dev/proto). This will install moon to `~/.proto/tools/moon` and make the binary available at `~/.proto/bin`.\n\n`proto install moon`\n\nFurthermore, the version of moon can be pinned on a per-project basis using the [`.prototools` config file](https://moonrepo.dev/docs/proto/config).\n\n.prototools\n\n`moon = \"1.31.0\"`\n\ninfo\n\nWe suggest using proto to manage moon (and other tools), as it allows for multiple versions to be installed and used. The other installation options only allow for a single version (typically the last installed).\n\n### Linux, macOS, WSL[](http://moonrepo.dev/docs/install#linux-macos-wsl \"Direct link to Linux, macOS, WSL\")\n\nIn a terminal that supports Bash, run:\n\n`bash <(curl -fsSL https://moonrepo.dev/install/moon.sh)`\n\nThis will install moon to `~/.moon/bin`. You'll then need to set `PATH` manually in your shell profile.\n\n`export PATH=\"$HOME/.moon/bin:$PATH\"`\n\n### Windows[](http://moonrepo.dev/docs/install#windows \"Direct link to Windows\")\n\nIn Powershell or Windows Terminal, run:\n\n`irm https://moonrepo.dev/install/moon.ps1 | iex`\n\nThis will install moon to `~\\.moon\\bin` and prepend to the `PATH` environment variable for the current session. To persist across sessions, update `PATH` manually in your system environment variables.\n\ninfo\n\nIf you are using Git Bash on Windows, you can run the [Unix commands](http://moonrepo.dev/docs/install#linux-macos-wsl) above.\n\n### npm[](http://moonrepo.dev/docs/install#npm \"Direct link to npm\")\n\nmoon is also packaged and shipped as a single binary through the [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli) npm package. Begin by installing this package at the root of the repository.\n\n*   Yarn\n*   Yarn (classic)\n*   npm\n*   pnpm\n*   Bun\n\n`yarn add --dev @moonrepo/cli`\n\nIf you are installing with Bun, you'll need to add `@moonrepo/cli` as a [trusted dependency](https://bun.sh/docs/install/lifecycle#trusteddependencies).\n\ninfo\n\nWhen a global `moon` binary is executed, and the `@moonrepo/cli` binary exists within the repository, the npm package version will be executed instead. We do this because the npm package denotes the exact version the repository is pinned it.\n\n### Other[](http://moonrepo.dev/docs/install#other \"Direct link to Other\")\n\nmoon can also be downloaded and installed manually, by downloading an asset from [https://github.com/moonrepo/moon/releases](https://github.com/moonrepo/moon/releases). Be sure to rename the file after downloading, and apply the executable bit (`chmod +x`) on macOS and Linux.\n\nUpgrading[](http://moonrepo.dev/docs/install#upgrading \"Direct link to Upgrading\")\n-----------------------------------------------------------------------------------\n\nIf using proto, moon can be upgraded using the following command:\n\n`proto install moon --pin`\n\nOtherwise, moon can be upgraded with the [`moon upgrade`](https://moonrepo.dev/docs/commands/upgrade) command. However, this will only upgrade moon if it was installed in `~/.moon/bin`.\n\n`moon upgrade`\n\nOtherwise, you can re-run the installers above and it will download, install, and overwrite with the latest version.\n\nCanary releases[](http://moonrepo.dev/docs/install#canary-releases \"Direct link to Canary releases\")\n-----------------------------------------------------------------------------------------------------\n\nmoon supports canary releases, which are built and published for every commit to our development branches. These releases will include features and functionality that have not yet landed on master. When using a canary release, you'll need to download and execute the binaries manually:\n\n*   Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `canary` tag. Releases are versioned by date.\n*   From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/canary) using the `canary` tag. This tag always represents the latest development release.\n\nNightly releases[](http://moonrepo.dev/docs/install#nightly-releases \"Direct link to Nightly releases\")\n--------------------------------------------------------------------------------------------------------\n\nmoon supports nightly releases, which are built and published once a day from the latest commit on master. When using a nightly release, you'll need to download and execute the binaries manually.\n\n*   Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `nightly` tag. Releases are versioned by date.\n*   From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/nightly) using the `nightly` tag. This tag always represents the latest stable release.\n\nNext steps[](http://moonrepo.dev/docs/install#next-steps \"Direct link to Next steps\")\n--------------------------------------------------------------------------------------\n",
            "title": "https://r.jina.ai/http://moonrepo.dev/docs/install (text/plain; charset=utf-8)",
            "metadata": {
              "truncated": false
            },
            "time": {
              "start": 1771212940599,
              "end": 1771212943271
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0cf82571775e4d5f016992908c35908194873bd116e5c4aa73"
            }
          },
          "id": "prt_c6484a3f1001HyvZ3JF1rOrO09",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648483a50012ZRPHBqt772mbj"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "9d6f15c7b06acb730f3f74807178e28dcff70941",
          "cost": 0,
          "tokens": {
            "total": 46963,
            "input": 16561,
            "output": 194,
            "reasoning": 154,
            "cache": {
              "read": 30208,
              "write": 0
            }
          },
          "id": "prt_c6484afaa001FcAIFC3878X42v",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648483a50012ZRPHBqt772mbj"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212943345,
          "completed": 1771212988473
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 51257,
          "input": 1361,
          "output": 3048,
          "reasoning": 1063,
          "cache": {
            "read": 46848,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6484aff1001hFwqGa4PHzae7Q",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "",
          "id": "prt_c6484b7c8001ujBq4QHSX3Juqh",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6484aff1001hFwqGa4PHzae7Q"
        },
        {
          "type": "reasoning",
          "text": "**Designing sitemap scrape script**",
          "metadata": {
            "openai": {
              "itemId": "rs_01de2a232dee44d101699290919e1c81909c3323b6f08f0875",
              "reasoningEncryptedContent": "gAAAAABpkpCiNBPAnV-NyXX-0E2cwpgYMuaaB2RKHtwm9njTjrqg8HSWCUJZ8IjpsFbiNmWnhHCbZV3ZdtKKabc-UQJUz4D0JCtCNo9Vow712h79Q3SJew52yx75Rvved0LSA8DbRGdOw8GgaxQ2Y1Xw5zz7sdbqWajk0n9LuGtN48xFk8HGTmBKBzy7_CqysxXYS_p3un84IzPty9771XB9xbWR8uYTfLCqs0uJ_OKfCfMOFF-TGLSmrcskaft3Xho6W3OXFuqet7ag3oW4qpNTKNkC-DitAKyl69J09-a-y7kEVYfFOQt-Kr2IF4Eo2_MsV0VkUcfe3Qcs64oPadIWiYohUUJLxC8X9R4l1rApBn_2VHq7zp7yk2vHI_08qutXuyHF8xJLw7t6BmWV4olXTNvVfdHnroz3_reOB_D1l2iQQQtQJSTmNgYJ7qYwCR-ICtMGRux1KvPx50NyY-xyO6uzQdcWaZMmlH_uHQI7TYsG6YVBVhoo4lSHZmhetz2G_nEmLgcShkNPNCHLQEhnWaXe62WdXxcAmV686ZSvpagjJZx4nNdcIdEGzBvpyO1OC8VHXw8IdM-B81pkFVfznc4_oxEMhn2738GZOFPjIjEGQ1Y_cvEQ2fhAW6qmmqdEBuoFSsTuv8df6kiNaERGhweoNwRmqoR9MdkMzpoOnPN5ulWk3swl5eQXiWqwJkZlkhGL7yCWtAHjl6kdyAOpJAoCLjUAUNmN2QwgRw4tcyi0OoGge3lbxjcA0q8ipz9CzLDPhz5WMSj8MVUZPcjm-Ave7BJQ-gA0BrGzgX-XibtELfiz-ldnLPBJLDaofXAmjV8bAaoiyZPw-NZl6xZy8udxi9BPf_qB-9HZKNk1RHREzZCNN2llyUenZYUZUadSzqX5XbBgNJcvfYGKrP6G0b_BsPtj-aWDcdLSBgofIyofX4sl0Bi5bDu0GquYHzjSn1FZPTC4QvdqRnRRrRF7H4vDp4BgntMt6G9J2lH6CNVDIXEgqjreVDru0RRIhxfbEXV8wjagpYTWTrGmRo8rCjhP91J-fZxtNlmCeYo-V52iSHVOVxOaJP1juhBgDmQ0UoOqLFPxaX6KBJk0ZbUNEVOXKH0Xmh_yzlOQpFTv9LxoLEobVJJPGy2yjTogDVj4AVepOZbHdzdq4gBYc_CZhsICpGiy7JKYmFR8sLvTPPSAAkIbarS_6P_R82Dh0baRmMafYCESZ2rMfap4JIFmwqqhcb1EIERwSzZj300S3Mm1vM4OPwYsGzwihX0eI61DmetKE_K3EIJ7pNsbaKBO3aoZ9gq-w6BT4GOa4hSzGOAdXeNfw8G_NuqUHHyOg62qU8YHNzkv7fnUWO3FKOoJ8g-TcO1IUhEbotrhTs6ewwaB8-vI-79pruWnm4R_TRHJrxd0YgPsRnamRRL68_GS0pNqHINvKFnylHjh-jVATE5_LVAlaX2Noj7HS1atDTlNEH8ZLa3UL0O4SEbpwlSLZ7x3Rx5Z7_sRv0ipOC70fwuMmIIGdbmInbNrw2Bc5efbrytEpWoE_55orkTlc9P43l71kt9GaJj46k-7JdtcBEj7Eb1JLvSv3pHg0NX6eGBqiyT94ajaQXrBQVOTUPEpATUCeUqMYFxqum2boWAR-g0ZqHFQ2_93Xc1I5UWOgd9MAIcSPh6spYY3zYMPiX8eUVYif-snAYgDD28xSJtU1AxqvjT3dxH2k74s2tcfGEhOYNskw1gEJ0X3bZEVVHPTgEUcI1tIcOy8W95eGCjqvWN5ykYNcHcJpbPbFNVO4j5gDB71z9guKVDg1ja8eBE3PpITcf9l47fTjG6-EuAt-Pc2__A4jU2OKyQtJt0FSZ3AqgNEZPl3ff-vlFXLxKelTOIy5N9COdYmBIDsiWCXGbl7mL9oMtb7Y91Zf4zxKdBGhKL0yJV2K1CgUCYhqXxOo_yvXu9PwSHpOwvkriYGkOSCNKKSOJ2ciHBgiLV8zHgNenbiJyC3PZYBx2Jc1r0b4CbpYlj137lVYanHcuwGVNEeD1kchGnry4rC6qPfv_UTMXt66nEVZspmBvp7_M7rzbQREjeCa4WPU8FPRZjCrO2aLH9SPOXGK_Lb_VUPKUlkhcnu7dV0B8fQ_WbOki-TpEcJYZa7dPI4midO5JOskcSkrnyJFgIS64d9DsOG2ALXmKVWH2QtM8cxOfJULcSOxYiR-tXtgmeyJW-s5yedbnGTkuhmBUpsJQh5elXZIG6bF8L3QUdxURvaBMrwT_JdHwTCFhNHv4UOhx4eT3Q4uvIa4S3pHuuzvXqpyRCwEl09g6KidAhR1Ky9i-7vRAybbxHTDeLIbijm9vEd3vW_cSiCMdxqNZz3mRwUsbhHQQUSrEKYtGAHBrW70ZrgTquCZLMP5K9VN9VigyBHc_Av332KIq7abxywlHTR0wE6__yUyP04BuQYUqOFOT1Y5Ko3kPz1IkFUOiHJkL2LFSork5t9tIKafECwz6c28OOnes7I-aImA2ISwR24vm03f1umvfUzgSPWrBv7MBlIsJUeTE2qJEuLNzw0IkZfk0wdZKjHDS82i3fMV_b6B2KWU40ourOg3-h48yCVv-8wOgcxn98iM0xC0oAPdvr9ps2A8cxQaD2gG9POKn1SMssLFIi91UXEsaYThesN2tIOe9HU4-qNVQeL_4LjW5II1SMFcO_bGu--t9tMiqMwVv5Rsw_WLUsWrDysZkw5DjAIH1vOvlMgbbD7wu78lTrqWDhZyMTvGjpxaDIbqqpOTcNXyR93o6el2czFOA9AFD88pz3n0A9CO7l1k0tiQXIGOW0WQF4YIJhdaZQCkCHpIwAQn7aj76ovcbeXbiUgFD43sxR6ecmlkYNwOePVtZ2Y_3hzcJz44MweXmKojkT9GfIqtQgOcPWPul78oByKj3a9s55BA2kjpubQBMySqg0jZMspeYHkGsGqXCL2yDGqBvjl3eDwS-H35sGKOZB7V58Q660xMBU1t0se7L926kC4-jK4gdb1lBjapA_ixmZKfVEoV6cpP-NyI-YE5bmWhh1FxJAUD6iPntKkW7N2pfznKvY6nUGmmTHAPWRLu2vrfTV_SG4VOCa_3Hs95qK05yawA5xck3tSULKyo331PZUwiVUTBJ7dQxyZ8iXMUdPPI60vWJ4WaeEHL7qZpGZ--h4U7F3Cz1qJXKNd6obOgloCWs4iM22GTtKzatbc5IDkG8IUw3bZuEDHWFP47o7Q64ounovwgoG0rtxO1LQGGjLwQ_1PGNBorMIxe02Kj27UxIhen1z_5fmRnLlQ-VFSrki6J9Gv510ZqgAlkvX9TWPw3J8EevvCDCIk6jQ3nf2klCRUrxoP8jE1DRJB6eiv9gPLNmV4IRmN1EjfuXdkfyL9iJH93QmpjWo82_qfWo-7Xod7iUxiWQ2KFCbJWHBhPIbwzT3Oy8EarAjWsY1eod4C9eqHDEh4wU6MKX2F0d1oUN138PDamRJRobIyUnatGY8lAwWR_0e1fxNYAIDsQtg1U6CYCBpiFMlEWl00cyVzYdu3MsOmYmMGC-k7qvyU5DvxPZJVNPX6hxFyla06_MFv3X3sNJqrXTGnkbFyiBEIdEHsLKTR3laXyDWN9Djan7Jsey5dzVFUZAWAgJcCk-fK-KXLI69FdZ846wq1i9WVp26JFDEJ6g2So7C6JsvpK6OtjeOtTiNA5HTLzXHZ_nVF9WP3wzRR-k0Y4jdgDnvq3csBSFowiHFQZy50n1fEazrvq-CRtYxQ_7AryzuDZEGyjhaIDWlneQ5ZSgq7XH8SkIYDdz0CxkA4WZ2VyoAqnffdfDi4GkVXPao8IPARIrThVp1ZkAtOoQ_zdEpHcKNUK_e9ZAt7oKIBvcdFv2Iy3wed1kqmY7hpjFYpkbhuNRyktHkKs4acG7pZu8gwkT7c6U7_bw_yaXF47hLbzyNhzvaFldFsx0oypAy1Hk72jIGVDqrOdQK5LEt9h87y5YQo7XjY5hC0EiYCiDLX82ddchHFhYefIJwyQr618eurJc6BiOti3yVbc_HOJOHXpcplFpLQ-BenYbjfN40xeEDBK7UTEUUXwtxEzWOQfhMdZRj1O6HLjprF8oHMrxoosTvUjTTUie2bK1C9pDoTrSUtqjBRGlOULsdyLIbGFIEZQi43GrYXboAkYoVK8AkqQWBPbsv0JGrkzUSMzAusBbUuZ4W6TRwgElUt0bUMbRi7c9tNZ-FYuSdT6QA3L-NYLCPNOJONpU_HnvTycAFm7nkihPDMko3mqLRXn9P7o_2PNUmrNXUS0iRVOrQSnm19ZXj-A3CyXQRr5yQOCtSp8XgB5g6fBZBeEAfjUTIZ1xvFnroXJBvhSlLkMeRbtvR-mVvJlHmVDdyRrT3tJxnRzFKTXDHpjqtDepVHu7ayVeFp0tJ2EAoaaQU1BH5FEh6zUKiHp-lHnkx-xucnwDx-jiEXKrQ3otjLsgkl6WzOltwbHhiSS0i5-WDU6t7sWy7sgoixxSVduHmyaD97ASDyfB5EtZHKvZfyL83D_B1W1PfWUNGjWPV5W89zJcsM8sgN621YOcQWHVkVN3Vv29NySv0I_vtnyWRjudkANFsoTBsA78SRHn5wTZmqJc5RdwtO3zuHy92H40L2YOZ-HpLt6V71kqudJB7WVwuUFIEtZt8VlVP1YQaQTbt1oZRAIQNOAXlqs3cKbjqdADHvRrJ4k2rpYJ3Zu3scjykdCF8ZAGFYZNar7DKHmvoSkQfnT70uU8ETnVLg0LwbyxmMXAkE8AP9DAK-0zcAyw13aQHfihtiT99uiXA8UT_3kLzHS7TDCiduQz-CGguSjzFwB3fkBhm8MmCbfQPlJMQ1LYyyXptXBuCVO7xkYigdrCqADjlMCjX9fN3dDuSukZQXGnNrUImJA2f85usTff8vtB6lxCOIvKmWXqiEpNNwi4NFljpgIXFYieio3vQVYxo__Qke5hjbomk2MfoKVe-3hmQsn1sCJdY7Pnhp7yc-JY9pYeBeS5Oku0_mLhNapfgy3ua-pbqIx32v1Way4QzWciVR2FLuLZT40Oxh3l4kyTFE60kMAs35xgqeYWes7IDBilqoQgWHK7PBNPaR7WmJj4P5ldrjzBCC9xaLc8LV1Q7ywGV3svcEsQat-drwk3UYrSnqvxfDcW9-2AZo1_X1_r65ZD9TAxL6HgxEYJANFeVCVC_FlzYtP2gmotrCcJXzchqvIQEUEmO6tcIugcGmiT2XXZghrYinSqk9CYW_4xbGzJhFm6swGI7BsO4_wbO1h51za2MWmShwXUmKXZNM56lLpmorPs5b8kE7ehNPPCqDnGpiHypeTxjnynUL5rtX8QAiuN8Y4r5zpRXQuQ3ltXScqsJZ0NLFejSFoZr8ODeus-DrNSxfv_sG4bQJJXCtWbiriX7kjdM6W9YJ0YLiD85UcTt0r7FHkPfJrLOYSGxrONmanFXH9ar01t_2kH1Ea1uvkHH8yQsN4K0FI05HM4Ogrnye2vmyX5X7o2ic0_2qhTKO5fJxvgDQiLGzRvrXAPVqmNW1tRQ77U4w4JGaLYwFahgr8Rqc4Ivfg09xDbS-_YvZnlfNX9wP6cj2VgNl6F1Cq4UxqiviLkAMIZjqiHDXNYHPh4YBC2eL-bUnyz_1OJqb6979eczc0qoANpvBLV1AYCVqV-LXAEMPkfLvvtM9h30omWtLy7PWeb7sVZPT4vc41xYxqRBOQS5EUNmGnGnlj7BKOIiC9cww7HTBz9MvMPKSz0oPry_dkfSNVtaZOWhSED8DE-Ka2p02LRpXWN3qYwiKIuhfeCw7np8GmpLJAXbICtTUThaeem19-p__vCyesWLjC1tV-ju51000nGj_qaoaIPQk3PHD8hR3B9h3MT7DZM5XhU_vQY-O0eHZPJ9P0U3WkffQAijMswZmbyZc_DAfbjKbo380wkthYofEvHDFYByvB0fopkn2KneyqiFBucliw91zbIfbULP733AQkAhaXw6WzfcxC-1Nc0eXx3nS-QQO-WbuQEKLwgMjSyOtLb_PuimnQT2WogDO-7aZ5DnVHd1EK-1PRWHOlxqG7WPeCPPRHYdSREHnqog0aeTxkwC1vvYfxE7p1e2on0G8OMcOP6R5A_pZQdxb2BGbXr8s2vfTAE2lLhcaQCpX4sutevMdzU76tfCqiwHElbaHy98QkeKo1YArIEhpUVSNLIZ4GQxZzSK4v7X2mIUiaKf7h14Lr1AagqlRIov-Uaulh_GVZoLiJUk6d6U2fo1xZygKnqIIm_MLW8xCqZyhwJtfG3pIx9N3XPqFdNWa3HshabW5cMgZZRTrSyTYOesPVShu4UmPA6_rMgk8FMsCQD2k4uC5mXVFEigbTPJn1Z-FJRf_no3GuiG4_mrWFgoiP6K7PWeDjV3smipkLDy68Knii6LIHk2fJwYCgM95Vxaygc7krw766m38XjS710Q1nKnQMy7gQJIGmpRpBwatD2ENU2I19bfj0znMvfO1kC3GqVoyf9fCvkHhmW3sZWUewAhAgpn3SvucxiZvmkTTkwsxlBT2SQwRXD9hWFa8Oypqc1fE0QYQXxnt7bLXQYjnDG2q0Cw_TuSmABZx-co9WRL27xxlGSKTeeexOvPfcUuCJGYtWtagQPcit3jAUMCRImq52uS8uRdpAWu7mQkWfSPiwv3U5JHs4xS4R_KXAhTxS1YsCHLj2Jcg8fmro5s8ZFz_tnoxPN4YFXwCH27tvOntf_VkjQD3cbO1eWmQqmi4vJK1UHL8Qj-zrh3ePgVj8nblkw5nW0hLmY7OfTVCNM_8MHOh69tZ3mkbIjmpXiud0gHLsF0o_KlhCr9t4v_qAhHlf6cryaQ7J5YnV9pOfYHLeZwwDcvZ5vBDMcO4bQtLcsxE6FilomFYtTrnxKtc0mitrDB3VopOHT4QcgZaB3AKYH7Wpf0hJAYsye4Hfw2jlYVSD31WoiEmnmZ79lb1-8gLUmKZG9rtAlvr7MrInK_tKTVYidwBZPFnYYqWwM4gbw6aFQ_Ntml3wn267rWDaXx8BDOULpDKXTAMnL48BREAl13TJ5guXXJIYMqW3IV3Bk00E7FUVWHb1cDdniCJamilg7y7XTcSo0t6OgyOQqHow8TNON3K0PIuTtkeiAC4Is8HHF436vyTbBCqAhmET0sc-UJnHrjiMriYg0xxnAkIl_R7ymv1RUdX1AhDStgR0XIJ_LDixLRzk2jJbJ8-jAQ4TsccNtriTzGgKcjYq2tseXtimSVkSXSjLSKmmRXyOL-i3bm_uE3YtNe23KKnxLQqLNIzia5VnS-PYAv8raCI-0I3x_w-k0bmPiDQkiDBrHGPz_bPd6qCoi-lucJM0RE="
            }
          },
          "time": {
            "start": 1771212945642,
            "end": 1771212962902
          },
          "id": "prt_c6484b8ea001LgaD5FqgxteA40",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6484aff1001hFwqGa4PHzae7Q"
        },
        {
          "type": "tool",
          "callID": "call_Yzq7zlMm0Xqurzk7uIERKooT",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Add File: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n+#!/usr/bin/env bun\n+\n+import { mkdirSync } from \"node:fs\";\n+import { dirname, resolve } from \"node:path\";\n+import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n+\n+type ScrapeResult = {\n+  url: string;\n+  ok: boolean;\n+  markdown?: string;\n+  error?: string;\n+};\n+\n+const SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\n+const DOCS_ROOT = \"https://moonrepo.dev/docs\";\n+const DEFAULT_OUTPUT_RELATIVE =\n+  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\n+const CONCURRENCY = 4;\n+\n+function decodeEntities(value: string): string {\n+  return value\n+    .replaceAll(\"&amp;\", \"&\")\n+    .replaceAll(\"&quot;\", '\"')\n+    .replaceAll(\"&#x27;\", \"'\")\n+    .replaceAll(\"&#39;\", \"'\")\n+    .replaceAll(\"&lt;\", \"<\")\n+    .replaceAll(\"&gt;\", \">\");\n+}\n+\n+function stripJinaEnvelope(markdown: string): string {\n+  return markdown\n+    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n+    .trim();\n+}\n+\n+function extractDocsUrls(sitemapXml: string): string[] {\n+  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n+    decodeEntities(match[1]?.trim() ?? \"\"),\n+  )\n+    .filter((url) => url.startsWith(DOCS_ROOT))\n+    .filter((url) => !url.includes(\"/docs/tags\"))\n+    .filter((url) => !url.includes(\"#\"));\n+\n+  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n+}\n+\n+async function fetchText(url: string): Promise<string> {\n+  const response = await fetch(url, {\n+    headers: {\n+      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n+    },\n+  });\n+\n+  if (!response.ok) {\n+    throw new Error(`Request failed (${response.status}) for ${url}`);\n+  }\n+\n+  return await response.text();\n+}\n+\n+async function mapConcurrent<T, R>(\n+  values: T[],\n+  limit: number,\n+  map: (value: T, index: number) => Promise<R>,\n+): Promise<R[]> {\n+  const results = new Array<R>(values.length);\n+  let index = 0;\n+\n+  async function worker(): Promise<void> {\n+    while (true) {\n+      const currentIndex = index;\n+      index += 1;\n+\n+      if (currentIndex >= values.length) {\n+        return;\n+      }\n+\n+      results[currentIndex] = await map(values[currentIndex], currentIndex);\n+    }\n+  }\n+\n+  const workerCount = Math.min(limit, values.length);\n+  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n+  return results;\n+}\n+\n+async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n+  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n+\n+  try {\n+    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n+    const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n+\n+    if (!markdown) {\n+      return {\n+        url,\n+        ok: false,\n+        error: \"No markdown content returned\",\n+      };\n+    }\n+\n+    return {\n+      url,\n+      ok: true,\n+      markdown,\n+    };\n+  } catch (error) {\n+    return {\n+      url,\n+      ok: false,\n+      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n+    };\n+  }\n+}\n+\n+function buildHeader(urlCount: number, capturedAt: string): string {\n+  return [\n+    \"----\",\n+    \"## External Docs Snapshot // moonrepo\",\n+    \"\",\n+    `- Captured: ${capturedAt}`,\n+    `- Source root: ${DOCS_ROOT}`,\n+    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)` ,\n+    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n+    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+function buildFooter(successCount: number, failureCount: number): string {\n+  return [\n+    \"\",\n+    \"----\",\n+    \"## Notes / Comments / Lessons\",\n+    \"\",\n+    \"- Collection method: sitemap URL discovery + markdown conversion through r.jina.ai.\",\n+    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n+    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n+    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+function buildPageSection(result: ScrapeResult): string {\n+  if (!result.ok) {\n+    return [\n+      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n+      \"\",\n+      `Source: ${result.url}`,\n+      \"\",\n+      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n+      \"\",\n+    ].join(\"\\n\");\n+  }\n+\n+  return [\n+    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n+    \"\",\n+    `Source: ${result.url}`,\n+    \"\",\n+    result.markdown?.trim() ?? \"\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+const repoRoot = findRepoRoot(import.meta.dir);\n+const outputArg = Bun.argv[2];\n+const outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n+\n+const sitemapXml = await fetchText(SITEMAP_URL);\n+const docsUrls = extractDocsUrls(sitemapXml);\n+\n+if (docsUrls.length === 0) {\n+  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n+}\n+\n+const results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n+  scrapeDocsPage(url, index + 1, docsUrls.length),\n+);\n+\n+const successCount = results.filter((result) => result.ok).length;\n+const failureCount = results.length - successCount;\n+const capturedAt = new Date().toISOString();\n+\n+const content = [\n+  buildHeader(docsUrls.length, capturedAt),\n+  ...results.map(buildPageSection),\n+  buildFooter(successCount, failureCount),\n+].join(\"\\n\");\n+\n+mkdirSync(dirname(outputPath), { recursive: true });\n+await Bun.write(outputPath, content);\n+\n+console.log(\n+  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n+);\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nA scripts/scrape_moon_docs.sh.ts",
            "title": "Success. Updated the following files:\nA scripts/scrape_moon_docs.sh.ts",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n@@ -0,0 +1,198 @@\n+#!/usr/bin/env bun\n+\n+import { mkdirSync } from \"node:fs\";\n+import { dirname, resolve } from \"node:path\";\n+import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n+\n+type ScrapeResult = {\n+  url: string;\n+  ok: boolean;\n+  markdown?: string;\n+  error?: string;\n+};\n+\n+const SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\n+const DOCS_ROOT = \"https://moonrepo.dev/docs\";\n+const DEFAULT_OUTPUT_RELATIVE =\n+  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\n+const CONCURRENCY = 4;\n+\n+function decodeEntities(value: string): string {\n+  return value\n+    .replaceAll(\"&amp;\", \"&\")\n+    .replaceAll(\"&quot;\", '\"')\n+    .replaceAll(\"&#x27;\", \"'\")\n+    .replaceAll(\"&#39;\", \"'\")\n+    .replaceAll(\"&lt;\", \"<\")\n+    .replaceAll(\"&gt;\", \">\");\n+}\n+\n+function stripJinaEnvelope(markdown: string): string {\n+  return markdown\n+    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n+    .trim();\n+}\n+\n+function extractDocsUrls(sitemapXml: string): string[] {\n+  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n+    decodeEntities(match[1]?.trim() ?? \"\"),\n+  )\n+    .filter((url) => url.startsWith(DOCS_ROOT))\n+    .filter((url) => !url.includes(\"/docs/tags\"))\n+    .filter((url) => !url.includes(\"#\"));\n+\n+  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n+}\n+\n+async function fetchText(url: string): Promise<string> {\n+  const response = await fetch(url, {\n+    headers: {\n+      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n+    },\n+  });\n+\n+  if (!response.ok) {\n+    throw new Error(`Request failed (${response.status}) for ${url}`);\n+  }\n+\n+  return await response.text();\n+}\n+\n+async function mapConcurrent<T, R>(\n+  values: T[],\n+  limit: number,\n+  map: (value: T, index: number) => Promise<R>,\n+): Promise<R[]> {\n+  const results = new Array<R>(values.length);\n+  let index = 0;\n+\n+  async function worker(): Promise<void> {\n+    while (true) {\n+      const currentIndex = index;\n+      index += 1;\n+\n+      if (currentIndex >= values.length) {\n+        return;\n+      }\n+\n+      results[currentIndex] = await map(values[currentIndex], currentIndex);\n+    }\n+  }\n+\n+  const workerCount = Math.min(limit, values.length);\n+  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n+  return results;\n+}\n+\n+async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n+  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n+\n+  try {\n+    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n+    const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n+\n+    if (!markdown) {\n+      return {\n+        url,\n+        ok: false,\n+        error: \"No markdown content returned\",\n+      };\n+    }\n+\n+    return {\n+      url,\n+      ok: true,\n+      markdown,\n+    };\n+  } catch (error) {\n+    return {\n+      url,\n+      ok: false,\n+      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n+    };\n+  }\n+}\n+\n+function buildHeader(urlCount: number, capturedAt: string): string {\n+  return [\n+    \"----\",\n+    \"## External Docs Snapshot // moonrepo\",\n+    \"\",\n+    `- Captured: ${capturedAt}`,\n+    `- Source root: ${DOCS_ROOT}`,\n+    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)` ,\n+    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n+    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+function buildFooter(successCount: number, failureCount: number): string {\n+  return [\n+    \"\",\n+    \"----\",\n+    \"## Notes / Comments / Lessons\",\n+    \"\",\n+    \"- Collection method: sitemap URL discovery + markdown conversion through r.jina.ai.\",\n+    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n+    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n+    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+function buildPageSection(result: ScrapeResult): string {\n+  if (!result.ok) {\n+    return [\n+      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n+      \"\",\n+      `Source: ${result.url}`,\n+      \"\",\n+      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n+      \"\",\n+    ].join(\"\\n\");\n+  }\n+\n+  return [\n+    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n+    \"\",\n+    `Source: ${result.url}`,\n+    \"\",\n+    result.markdown?.trim() ?? \"\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+const repoRoot = findRepoRoot(import.meta.dir);\n+const outputArg = Bun.argv[2];\n+const outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n+\n+const sitemapXml = await fetchText(SITEMAP_URL);\n+const docsUrls = extractDocsUrls(sitemapXml);\n+\n+if (docsUrls.length === 0) {\n+  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n+}\n+\n+const results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n+  scrapeDocsPage(url, index + 1, docsUrls.length),\n+);\n+\n+const successCount = results.filter((result) => result.ok).length;\n+const failureCount = results.length - successCount;\n+const capturedAt = new Date().toISOString();\n+\n+const content = [\n+  buildHeader(docsUrls.length, capturedAt),\n+  ...results.map(buildPageSection),\n+  buildFooter(successCount, failureCount),\n+].join(\"\\n\");\n+\n+mkdirSync(dirname(outputPath), { recursive: true });\n+await Bun.write(outputPath, content);\n+\n+console.log(\n+  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n+);\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts",
                  "relativePath": "scripts/scrape_moon_docs.sh.ts",
                  "type": "add",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n@@ -0,0 +1,198 @@\n+#!/usr/bin/env bun\n+\n+import { mkdirSync } from \"node:fs\";\n+import { dirname, resolve } from \"node:path\";\n+import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n+\n+type ScrapeResult = {\n+  url: string;\n+  ok: boolean;\n+  markdown?: string;\n+  error?: string;\n+};\n+\n+const SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\n+const DOCS_ROOT = \"https://moonrepo.dev/docs\";\n+const DEFAULT_OUTPUT_RELATIVE =\n+  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\n+const CONCURRENCY = 4;\n+\n+function decodeEntities(value: string): string {\n+  return value\n+    .replaceAll(\"&amp;\", \"&\")\n+    .replaceAll(\"&quot;\", '\"')\n+    .replaceAll(\"&#x27;\", \"'\")\n+    .replaceAll(\"&#39;\", \"'\")\n+    .replaceAll(\"&lt;\", \"<\")\n+    .replaceAll(\"&gt;\", \">\");\n+}\n+\n+function stripJinaEnvelope(markdown: string): string {\n+  return markdown\n+    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n+    .trim();\n+}\n+\n+function extractDocsUrls(sitemapXml: string): string[] {\n+  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n+    decodeEntities(match[1]?.trim() ?? \"\"),\n+  )\n+    .filter((url) => url.startsWith(DOCS_ROOT))\n+    .filter((url) => !url.includes(\"/docs/tags\"))\n+    .filter((url) => !url.includes(\"#\"));\n+\n+  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n+}\n+\n+async function fetchText(url: string): Promise<string> {\n+  const response = await fetch(url, {\n+    headers: {\n+      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n+    },\n+  });\n+\n+  if (!response.ok) {\n+    throw new Error(`Request failed (${response.status}) for ${url}`);\n+  }\n+\n+  return await response.text();\n+}\n+\n+async function mapConcurrent<T, R>(\n+  values: T[],\n+  limit: number,\n+  map: (value: T, index: number) => Promise<R>,\n+): Promise<R[]> {\n+  const results = new Array<R>(values.length);\n+  let index = 0;\n+\n+  async function worker(): Promise<void> {\n+    while (true) {\n+      const currentIndex = index;\n+      index += 1;\n+\n+      if (currentIndex >= values.length) {\n+        return;\n+      }\n+\n+      results[currentIndex] = await map(values[currentIndex], currentIndex);\n+    }\n+  }\n+\n+  const workerCount = Math.min(limit, values.length);\n+  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n+  return results;\n+}\n+\n+async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n+  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n+\n+  try {\n+    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n+    const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n+\n+    if (!markdown) {\n+      return {\n+        url,\n+        ok: false,\n+        error: \"No markdown content returned\",\n+      };\n+    }\n+\n+    return {\n+      url,\n+      ok: true,\n+      markdown,\n+    };\n+  } catch (error) {\n+    return {\n+      url,\n+      ok: false,\n+      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n+    };\n+  }\n+}\n+\n+function buildHeader(urlCount: number, capturedAt: string): string {\n+  return [\n+    \"----\",\n+    \"## External Docs Snapshot // moonrepo\",\n+    \"\",\n+    `- Captured: ${capturedAt}`,\n+    `- Source root: ${DOCS_ROOT}`,\n+    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)` ,\n+    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n+    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+function buildFooter(successCount: number, failureCount: number): string {\n+  return [\n+    \"\",\n+    \"----\",\n+    \"## Notes / Comments / Lessons\",\n+    \"\",\n+    \"- Collection method: sitemap URL discovery + markdown conversion through r.jina.ai.\",\n+    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n+    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n+    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+function buildPageSection(result: ScrapeResult): string {\n+  if (!result.ok) {\n+    return [\n+      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n+      \"\",\n+      `Source: ${result.url}`,\n+      \"\",\n+      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n+      \"\",\n+    ].join(\"\\n\");\n+  }\n+\n+  return [\n+    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n+    \"\",\n+    `Source: ${result.url}`,\n+    \"\",\n+    result.markdown?.trim() ?? \"\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+const repoRoot = findRepoRoot(import.meta.dir);\n+const outputArg = Bun.argv[2];\n+const outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n+\n+const sitemapXml = await fetchText(SITEMAP_URL);\n+const docsUrls = extractDocsUrls(sitemapXml);\n+\n+if (docsUrls.length === 0) {\n+  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n+}\n+\n+const results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n+  scrapeDocsPage(url, index + 1, docsUrls.length),\n+);\n+\n+const successCount = results.filter((result) => result.ok).length;\n+const failureCount = results.length - successCount;\n+const capturedAt = new Date().toISOString();\n+\n+const content = [\n+  buildHeader(docsUrls.length, capturedAt),\n+  ...results.map(buildPageSection),\n+  buildFooter(successCount, failureCount),\n+].join(\"\\n\");\n+\n+mkdirSync(dirname(outputPath), { recursive: true });\n+await Bun.write(outputPath, content);\n+\n+console.log(\n+  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n+);\n",
                  "before": "",
                  "after": "#!/usr/bin/env bun\n\nimport { mkdirSync } from \"node:fs\";\nimport { dirname, resolve } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n\ntype ScrapeResult = {\n  url: string;\n  ok: boolean;\n  markdown?: string;\n  error?: string;\n};\n\nconst SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\nconst DOCS_ROOT = \"https://moonrepo.dev/docs\";\nconst DEFAULT_OUTPUT_RELATIVE =\n  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\nconst CONCURRENCY = 4;\n\nfunction decodeEntities(value: string): string {\n  return value\n    .replaceAll(\"&amp;\", \"&\")\n    .replaceAll(\"&quot;\", '\"')\n    .replaceAll(\"&#x27;\", \"'\")\n    .replaceAll(\"&#39;\", \"'\")\n    .replaceAll(\"&lt;\", \"<\")\n    .replaceAll(\"&gt;\", \">\");\n}\n\nfunction stripJinaEnvelope(markdown: string): string {\n  return markdown\n    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n    .trim();\n}\n\nfunction extractDocsUrls(sitemapXml: string): string[] {\n  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n    decodeEntities(match[1]?.trim() ?? \"\"),\n  )\n    .filter((url) => url.startsWith(DOCS_ROOT))\n    .filter((url) => !url.includes(\"/docs/tags\"))\n    .filter((url) => !url.includes(\"#\"));\n\n  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n}\n\nasync function fetchText(url: string): Promise<string> {\n  const response = await fetch(url, {\n    headers: {\n      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Request failed (${response.status}) for ${url}`);\n  }\n\n  return await response.text();\n}\n\nasync function mapConcurrent<T, R>(\n  values: T[],\n  limit: number,\n  map: (value: T, index: number) => Promise<R>,\n): Promise<R[]> {\n  const results = new Array<R>(values.length);\n  let index = 0;\n\n  async function worker(): Promise<void> {\n    while (true) {\n      const currentIndex = index;\n      index += 1;\n\n      if (currentIndex >= values.length) {\n        return;\n      }\n\n      results[currentIndex] = await map(values[currentIndex], currentIndex);\n    }\n  }\n\n  const workerCount = Math.min(limit, values.length);\n  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n  return results;\n}\n\nasync function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n\n  try {\n    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n    const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n\n    if (!markdown) {\n      return {\n        url,\n        ok: false,\n        error: \"No markdown content returned\",\n      };\n    }\n\n    return {\n      url,\n      ok: true,\n      markdown,\n    };\n  } catch (error) {\n    return {\n      url,\n      ok: false,\n      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n    };\n  }\n}\n\nfunction buildHeader(urlCount: number, capturedAt: string): string {\n  return [\n    \"----\",\n    \"## External Docs Snapshot // moonrepo\",\n    \"\",\n    `- Captured: ${capturedAt}`,\n    `- Source root: ${DOCS_ROOT}`,\n    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)` ,\n    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildFooter(successCount: number, failureCount: number): string {\n  return [\n    \"\",\n    \"----\",\n    \"## Notes / Comments / Lessons\",\n    \"\",\n    \"- Collection method: sitemap URL discovery + markdown conversion through r.jina.ai.\",\n    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildPageSection(result: ScrapeResult): string {\n  if (!result.ok) {\n    return [\n      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n      \"\",\n      `Source: ${result.url}`,\n      \"\",\n      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n      \"\",\n    ].join(\"\\n\");\n  }\n\n  return [\n    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n    \"\",\n    `Source: ${result.url}`,\n    \"\",\n    result.markdown?.trim() ?? \"\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nconst repoRoot = findRepoRoot(import.meta.dir);\nconst outputArg = Bun.argv[2];\nconst outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n\nconst sitemapXml = await fetchText(SITEMAP_URL);\nconst docsUrls = extractDocsUrls(sitemapXml);\n\nif (docsUrls.length === 0) {\n  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n}\n\nconst results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n  scrapeDocsPage(url, index + 1, docsUrls.length),\n);\n\nconst successCount = results.filter((result) => result.ok).length;\nconst failureCount = results.length - successCount;\nconst capturedAt = new Date().toISOString();\n\nconst content = [\n  buildHeader(docsUrls.length, capturedAt),\n  ...results.map(buildPageSection),\n  buildFooter(successCount, failureCount),\n].join(\"\\n\");\n\nmkdirSync(dirname(outputPath), { recursive: true });\nawait Bun.write(outputPath, content);\n\nconsole.log(\n  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n);\n",
                  "additions": 198,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771212988404,
              "end": 1771212988435
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_01de2a232dee44d101699290a2d19c81908a211bf68c30aaa1"
            }
          },
          "id": "prt_c6484fc59001bVFNhEiA2UBtFv",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6484aff1001hFwqGa4PHzae7Q"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "5147fb7468d78f726061bbed9b56e547e848c4bd",
          "cost": 0,
          "tokens": {
            "total": 51257,
            "input": 1361,
            "output": 3048,
            "reasoning": 1063,
            "cache": {
              "read": 46848,
              "write": 0
            }
          },
          "id": "prt_c64856015001R6RiK11tY3ZqFs",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6484aff1001hFwqGa4PHzae7Q"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212988477,
          "completed": 1771212993117
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 51392,
          "input": 213,
          "output": 107,
          "reasoning": 68,
          "cache": {
            "read": 51072,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6485603d001PPtkNsU0HSiO3C",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "5147fb7468d78f726061bbed9b56e547e848c4bd",
          "id": "prt_c64856989001Xe61pwulkl4XGI",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6485603d001PPtkNsU0HSiO3C"
        },
        {
          "type": "reasoning",
          "text": "**Checking trailing commas spacing**",
          "metadata": {
            "openai": {
              "itemId": "rs_0f17fbb188effb3501699290bf6ad08197a3e6af42f3589aa8",
              "reasoningEncryptedContent": "gAAAAABpkpDAQy_RLIDLligMntlio2Ugxa1BSs9sY_Ugb1SCVTalteUgOK9_FzbRiUvpXDICq9UJe933RzZ6ML7erII4S3N8Vg80BwYGGT7ut2VSzwpr1khS353cUJrNSSLkGadVCp7rNFM2HjS2wMl2-yazCVQCg_48P8IR-H7ev0g1fiCw2XFbsxEef91yopyS_xNh4Y6KkuO5_pVGdZbg58xHpwKIwgLIHgzDyALvcIU5698vE1Mru6gnp_ImhXnTRJ2aauWnM-4IjXUez0Jsblbc-fyNbSXZkO0d7D_jr8kUy60leE1QsFKsTawjQlKOatHl4QgEJgFGOPCpsnGTPzntjq3em5dmNGrzf4066oV-8rgOh0NqnKTwyX7iRd9pWpD4tfD2BrsfqzWK9BoI800ypSouLbOWXaE8c2mqbob8UA9mPinp-b2kdSxZeZk58MQL6QZ6uCRwykm4-P5K9uZuW9vbwRQAwi9Grmk_L9j94BgAXaDHiVrXu5SBqy1U9pJwdUzs71yi9TAOx7gXk_L_j4_w1mbW3TO4emASxAyKkBPcqa86_MRlthayloSFELQ9ghDLs6QPivP_1vgkkS1tStOjDEDZKGjL1YmNWr0A0JRVq70rJVk2eyJpIdIhLQcSQAXrwB6kDX39i89juNnIYewDLNGS0hPXnJDCQa2mSdIYe1PZow-_N-7tJXcCMSb3eNnb0xlXrNIvmTs0Ek0tf7Omsyo4HqJRKxSiEknfRpRDt3JRv49IRp2l96ETy9lciAhhz9CC2jJh-zEpF6M_nLG6rElenBK_ppoSR5JZkjxOUsVVPDgIeV_G8BZ19wpwecOxuuzYJERHJecbkDj-0VVoiDojYKRhuFgMuM7gDEnFD5dKmEH3xuIaQZ9pcLp2lGLxA0dw2gM9Cw7fdIh7TKjYQjS73lWdrcqphfSMj5ABKaLA9uExaLcySt-zh9BIMLirgbaE-_qNhvLya_-DLXMlcdWRz_FIVuQE7vPGfiV3BXRCVXD3Iy5zlg8z0UWLynIu7IOSJ5BJUxH32fvFr_dCuy60Q9Cohxy0xei52S6zKiKdOMF_REQaNQGTd8icoxBzxOz2HBlxuZnG12mHHpy5yW4lhdl_6YTdhC1i2-EajdjX-U9mY0l45ONtfJFr8sO_53xhODIArRtx6w_2nxAXP1RZZAjRH-hY6xSfM9JDH7uQJskIz4R2-3bLfHUAtwiyb5R1ThwqVggS8D941uzgQA=="
            }
          },
          "time": {
            "start": 1771212991453,
            "end": 1771212992873
          },
          "id": "prt_c64856bdd001blIUMWNqAkEPKx",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6485603d001PPtkNsU0HSiO3C"
        },
        {
          "type": "tool",
          "callID": "call_3vwkmW4aC1CCRzrQJT8yLD6j",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts</path>\n<type>file</type>\n<content>1: #!/usr/bin/env bun\n2: \n3: import { mkdirSync } from \"node:fs\";\n4: import { dirname, resolve } from \"node:path\";\n5: import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n6: \n7: type ScrapeResult = {\n8:   url: string;\n9:   ok: boolean;\n10:   markdown?: string;\n11:   error?: string;\n12: };\n13: \n14: const SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\n15: const DOCS_ROOT = \"https://moonrepo.dev/docs\";\n16: const DEFAULT_OUTPUT_RELATIVE =\n17:   \"docs/external/moonrepo/moonrepo_docs.ext.md\";\n18: const CONCURRENCY = 4;\n19: \n20: function decodeEntities(value: string): string {\n21:   return value\n22:     .replaceAll(\"&amp;\", \"&\")\n23:     .replaceAll(\"&quot;\", '\"')\n24:     .replaceAll(\"&#x27;\", \"'\")\n25:     .replaceAll(\"&#39;\", \"'\")\n26:     .replaceAll(\"&lt;\", \"<\")\n27:     .replaceAll(\"&gt;\", \">\");\n28: }\n29: \n30: function stripJinaEnvelope(markdown: string): string {\n31:   return markdown\n32:     .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n33:     .trim();\n34: }\n35: \n36: function extractDocsUrls(sitemapXml: string): string[] {\n37:   const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n38:     decodeEntities(match[1]?.trim() ?? \"\"),\n39:   )\n40:     .filter((url) => url.startsWith(DOCS_ROOT))\n41:     .filter((url) => !url.includes(\"/docs/tags\"))\n42:     .filter((url) => !url.includes(\"#\"));\n43: \n44:   return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n45: }\n46: \n47: async function fetchText(url: string): Promise<string> {\n48:   const response = await fetch(url, {\n49:     headers: {\n50:       \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n51:     },\n52:   });\n53: \n54:   if (!response.ok) {\n55:     throw new Error(`Request failed (${response.status}) for ${url}`);\n56:   }\n57: \n58:   return await response.text();\n59: }\n60: \n61: async function mapConcurrent<T, R>(\n62:   values: T[],\n63:   limit: number,\n64:   map: (value: T, index: number) => Promise<R>,\n65: ): Promise<R[]> {\n66:   const results = new Array<R>(values.length);\n67:   let index = 0;\n68: \n69:   async function worker(): Promise<void> {\n70:     while (true) {\n71:       const currentIndex = index;\n72:       index += 1;\n73: \n74:       if (currentIndex >= values.length) {\n75:         return;\n76:       }\n77: \n78:       results[currentIndex] = await map(values[currentIndex], currentIndex);\n79:     }\n80:   }\n81: \n82:   const workerCount = Math.min(limit, values.length);\n83:   await Promise.all(Array.from({ length: workerCount }, () => worker()));\n84:   return results;\n85: }\n86: \n87: async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n88:   const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n89: \n90:   try {\n91:     console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n92:     const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n93: \n94:     if (!markdown) {\n95:       return {\n96:         url,\n97:         ok: false,\n98:         error: \"No markdown content returned\",\n99:       };\n100:     }\n101: \n102:     return {\n103:       url,\n104:       ok: true,\n105:       markdown,\n106:     };\n107:   } catch (error) {\n108:     return {\n109:       url,\n110:       ok: false,\n111:       error: error instanceof Error ? error.message : \"Unknown scrape error\",\n112:     };\n113:   }\n114: }\n115: \n116: function buildHeader(urlCount: number, capturedAt: string): string {\n117:   return [\n118:     \"----\",\n119:     \"## External Docs Snapshot // moonrepo\",\n120:     \"\",\n121:     `- Captured: ${capturedAt}`,\n122:     `- Source root: ${DOCS_ROOT}`,\n123:     `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)` ,\n124:     \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n125:     \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n126:     \"----\",\n127:     \"\",\n128:   ].join(\"\\n\");\n129: }\n130: \n131: function buildFooter(successCount: number, failureCount: number): string {\n132:   return [\n133:     \"\",\n134:     \"----\",\n135:     \"## Notes / Comments / Lessons\",\n136:     \"\",\n137:     \"- Collection method: sitemap URL discovery + markdown conversion through r.jina.ai.\",\n138:     \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n139:     \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n140:     `- Capture results: success=${successCount}, failed=${failureCount}.`,\n141:     \"----\",\n142:     \"\",\n143:   ].join(\"\\n\");\n144: }\n145: \n146: function buildPageSection(result: ScrapeResult): string {\n147:   if (!result.ok) {\n148:     return [\n149:       `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n150:       \"\",\n151:       `Source: ${result.url}`,\n152:       \"\",\n153:       `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n154:       \"\",\n155:     ].join(\"\\n\");\n156:   }\n157: \n158:   return [\n159:     `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n160:     \"\",\n161:     `Source: ${result.url}`,\n162:     \"\",\n163:     result.markdown?.trim() ?? \"\",\n164:     \"\",\n165:   ].join(\"\\n\");\n166: }\n167: \n168: const repoRoot = findRepoRoot(import.meta.dir);\n169: const outputArg = Bun.argv[2];\n170: const outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n171: \n172: const sitemapXml = await fetchText(SITEMAP_URL);\n173: const docsUrls = extractDocsUrls(sitemapXml);\n174: \n175: if (docsUrls.length === 0) {\n176:   throw new Error(\"No docs URLs found in moonrepo sitemap\");\n177: }\n178: \n179: const results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n180:   scrapeDocsPage(url, index + 1, docsUrls.length),\n181: );\n182: \n183: const successCount = results.filter((result) => result.ok).length;\n184: const failureCount = results.length - successCount;\n185: const capturedAt = new Date().toISOString();\n186: \n187: const content = [\n188:   buildHeader(docsUrls.length, capturedAt),\n189:   ...results.map(buildPageSection),\n190:   buildFooter(successCount, failureCount),\n191: ].join(\"\\n\");\n192: \n193: mkdirSync(dirname(outputPath), { recursive: true });\n194: await Bun.write(outputPath, content);\n195: \n196: console.log(\n197:   `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n198: );\n199: \n\n(End of file - total 199 lines)\n</content>",
            "title": "scripts/scrape_moon_docs.sh.ts",
            "metadata": {
              "preview": "#!/usr/bin/env bun\n\nimport { mkdirSync } from \"node:fs\";\nimport { dirname, resolve } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n\ntype ScrapeResult = {\n  url: string;\n  ok: boolean;\n  markdown?: string;\n  error?: string;\n};\n\nconst SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\nconst DOCS_ROOT = \"https://moonrepo.dev/docs\";\nconst DEFAULT_OUTPUT_RELATIVE =\n  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\nconst CONCURRENCY = 4;\n\nfunction decodeEntities(value: string): string {",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771212993037,
              "end": 1771212993046
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0f17fbb188effb3501699290c0d4f881979dd902feb97b9e83"
            }
          },
          "id": "prt_c64857173001RlnSA2W2ntJ6Fl",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6485603d001PPtkNsU0HSiO3C"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "5147fb7468d78f726061bbed9b56e547e848c4bd",
          "cost": 0,
          "tokens": {
            "total": 51392,
            "input": 213,
            "output": 107,
            "reasoning": 68,
            "cache": {
              "read": 51072,
              "write": 0
            }
          },
          "id": "prt_c64857222001KB9JeeIH0WQpT8",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6485603d001PPtkNsU0HSiO3C"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771212993120,
          "completed": 1771213028083
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 53476,
          "input": 2089,
          "output": 187,
          "reasoning": 128,
          "cache": {
            "read": 51200,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64857260001mk7qbVL5VAhNCR",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "5147fb7468d78f726061bbed9b56e547e848c4bd",
          "id": "prt_c64857a7f0015RxK0heC3fonIi",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64857260001mk7qbVL5VAhNCR"
        },
        {
          "type": "reasoning",
          "text": "**Preparing script execution with timeout**",
          "metadata": {
            "openai": {
              "itemId": "rs_031bc869aea07c4e01699290c3a0788190b90e7450714f7978",
              "reasoningEncryptedContent": "gAAAAABpkpDGw8i6m0jahaOXdkqrMEkSXgAna1LG5hLFvbs9DmeAnQkIOir5KeXP8WFsLVBrnSZuJ4CNBFehJrcQoCU60DEcDygnmUNaLj79ivT1zTiLldoNOdfNgW1QBvrwVrngEYqLZA505LqWKxEmq8poFvFrGk90Kvg7kZu9jDqCtOvNgm1j7W7YdOiHkJQCV7J5Ls0rX45mtrLSlqr1Ab-CVZdoJP70L7Vbx3A0sZ70jBbXolMhq9QVuk2jqHF5_Be7A78L_jjC0adlII0jAVJqiLwB-SRVkjYdCHw63V8LbfvQKXq1Bxrk0g-Os2nkZnRISZqtE_SSSvYKvSTgr8AEEc8m4WOe6pT4yaHNt-vr7ithGlL2ewXSHcESptsZvsWXxEaJ0LYSRhjJfUbc8yjR5hBSahc5DxEItOmnlSEtG80ewc7lu1cvcSTUEkeEp6q2IzLCiGsr2wkU9w3iXojis7W1C5HMLa2OKMweheBLA7U4OlYhVJIySWdrh8tGAp1EenIgUmL99ph51jquXuPm0WT2QBbqe-bWfJ2C6PmNY0yHuGE5qBSorTVTQrq8jwegrbJbu9aExjsn6MIhBz1sN4HeWzykiIWGr2p55ZjNV8BhdI_BUq48Tk4lbobB5ab6NYrqEtKGiWTK1A-H6ok3ukdVzigjHUgIzjKible1vPXM_if-TGpiv7Z_Lg6lAuGfr6vKLXdfFKT6xRX-tTTTugo3jd3uv3RdGJVKBlZkWUqEu3H5ndCR0153gEoivSap2wynFY8MIGdM3mWn262kwJOZN8nZ5N3EFAp6PaYoUwny48-AmAbch2ZJ_eVTzne3L-EAh70IPGFzm8s3LeQgDQNokbIv8zZqbqOuRaoeklpCn4uqwFSD02VEqnZ_frbXwyPzbxY8aLl93rEQT7RhSgEiIK9Zieevp9n3jH0f6EbCLiwFHDK1b2Whvo2qbWHXEo6kZOdnTloU_ftN_XWYsbzJ1n9L5B3cqUEtY_uL_pfYStTLnhEIIJJp185LsL6fS6U5vGseqm9dkLsv6fKvIfye0uMSeprW3Zu_2nqSI1urx4jTTYNXE3SInzHNbgzv9gdH3EgM1FGP65PSVHzZKE0aBZtei1uv0BSxNA6m4VioSUcJqA4bdG60XGy-Gma6XlKC-pwftv6fFTGHaOp1ABf-ymBiaMX_FPQTvWNIhPvLl5nHfmB9WV9fqrsxGo97B9WouU2xLMf_x8zpefpS0kGI_xkSBhdY3Pfr4mmwO4dRmFieR1kPzSydPMS7dZEfIoSvbydb270lC6p2DobZIlsxm4dLCEZA-DheT9g3H3YEeSWetFPLMfCa3voh8FGQzDd1g5twnR7amm6CqKg55ztf2DbEPMaumJpiAAIjuk1gQzoDAqp9ZPsUU3Jk4_JI494OYf3LBD-74GzOy2-CSAg33ZOsnaPCtu74_gNUbrVmGYQ8-Chy177tnVg8zYW7X-iS09sxf0dfT2rvSKVSLIFn-foQS5G5g_E9AveoCRr1BetTR8VhiFHFICjdvBHa1J9dHovdyv5qCuQ_lAbQMzAVNIXhzqXMONTwbUkKYQmIpRsYA35qBFcT1o5oqvOfcmpJ"
            }
          },
          "time": {
            "start": 1771212995660,
            "end": 1771212998449
          },
          "id": "prt_c64857c4c001IvGDinKyibdKsx",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64857260001mk7qbVL5VAhNCR"
        },
        {
          "type": "tool",
          "callID": "call_QhFXbTousg0abEAhwzIhrWo4",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "chmod +x \"scripts/scrape_moon_docs.sh.ts\" && bun \"scripts/scrape_moon_docs.sh.ts\"",
              "description": "Run moon docs scraping script",
              "timeout": 600000
            },
            "output": "Docs // Scrape // 1/171 https://moonrepo.dev/docs\nDocs // Scrape // 2/171 https://moonrepo.dev/docs/cheat-sheet\nDocs // Scrape // 3/171 https://moonrepo.dev/docs/commands\nDocs // Scrape // 4/171 https://moonrepo.dev/docs/commands/action-graph\nDocs // Scrape // 5/171 https://moonrepo.dev/docs/commands/bin\nDocs // Scrape // 6/171 https://moonrepo.dev/docs/commands/check\nDocs // Scrape // 7/171 https://moonrepo.dev/docs/commands/ci\nDocs // Scrape // 8/171 https://moonrepo.dev/docs/commands/clean\nDocs // Scrape // 9/171 https://moonrepo.dev/docs/commands/completions\nDocs // Scrape // 10/171 https://moonrepo.dev/docs/commands/docker\nDocs // Scrape // 11/171 https://moonrepo.dev/docs/commands/docker/file\nDocs // Scrape // 12/171 https://moonrepo.dev/docs/commands/docker/prune\nDocs // Scrape // 13/171 https://moonrepo.dev/docs/commands/docker/scaffold\nDocs // Scrape // 14/171 https://moonrepo.dev/docs/commands/docker/setup\nDocs // Scrape // 15/171 https://moonrepo.dev/docs/commands/exec\nDocs // Scrape // 16/171 https://moonrepo.dev/docs/commands/ext\nDocs // Scrape // 17/171 https://moonrepo.dev/docs/commands/extension\nDocs // Scrape // 18/171 https://moonrepo.dev/docs/commands/extension/add\nDocs // Scrape // 19/171 https://moonrepo.dev/docs/commands/extension/info\nDocs // Scrape // 20/171 https://moonrepo.dev/docs/commands/generate\nDocs // Scrape // 21/171 https://moonrepo.dev/docs/commands/hash\nDocs // Scrape // 22/171 https://moonrepo.dev/docs/commands/init\nDocs // Scrape // 23/171 https://moonrepo.dev/docs/commands/mcp\nDocs // Scrape // 24/171 https://moonrepo.dev/docs/commands/overview\nDocs // Scrape // 25/171 https://moonrepo.dev/docs/commands/project\nDocs // Scrape // 26/171 https://moonrepo.dev/docs/commands/project-graph\nDocs // Scrape // 27/171 https://moonrepo.dev/docs/commands/projects\nDocs // Scrape // 28/171 https://moonrepo.dev/docs/commands/query\nDocs // Scrape // 29/171 https://moonrepo.dev/docs/commands/query/affected\nDocs // Scrape // 30/171 https://moonrepo.dev/docs/commands/query/changed-files\nDocs // Scrape // 31/171 https://moonrepo.dev/docs/commands/query/projects\nDocs // Scrape // 32/171 https://moonrepo.dev/docs/commands/query/tasks\nDocs // Scrape // 33/171 https://moonrepo.dev/docs/commands/run\nDocs // Scrape // 34/171 https://moonrepo.dev/docs/commands/setup\nDocs // Scrape // 35/171 https://moonrepo.dev/docs/commands/sync\nDocs // Scrape // 36/171 https://moonrepo.dev/docs/commands/sync/code-owners\nDocs // Scrape // 37/171 https://moonrepo.dev/docs/commands/sync/config-schemas\nDocs // Scrape // 38/171 https://moonrepo.dev/docs/commands/sync/projects\nDocs // Scrape // 39/171 https://moonrepo.dev/docs/commands/sync/vcs-hooks\nDocs // Scrape // 40/171 https://moonrepo.dev/docs/commands/task\nDocs // Scrape // 41/171 https://moonrepo.dev/docs/commands/task-graph\nDocs // Scrape // 42/171 https://moonrepo.dev/docs/commands/tasks\nDocs // Scrape // 43/171 https://moonrepo.dev/docs/commands/teardown\nDocs // Scrape // 44/171 https://moonrepo.dev/docs/commands/template\nDocs // Scrape // 45/171 https://moonrepo.dev/docs/commands/templates\nDocs // Scrape // 46/171 https://moonrepo.dev/docs/commands/toolchain\nDocs // Scrape // 47/171 https://moonrepo.dev/docs/commands/toolchain/add\nDocs // Scrape // 48/171 https://moonrepo.dev/docs/commands/toolchain/info\nDocs // Scrape // 49/171 https://moonrepo.dev/docs/commands/upgrade\nDocs // Scrape // 50/171 https://moonrepo.dev/docs/comparison\nDocs // Scrape // 51/171 https://moonrepo.dev/docs/concepts\nDocs // Scrape // 52/171 https://moonrepo.dev/docs/concepts/cache\nDocs // Scrape // 53/171 https://moonrepo.dev/docs/concepts/file-group\nDocs // Scrape // 54/171 https://moonrepo.dev/docs/concepts/file-pattern\nDocs // Scrape // 55/171 https://moonrepo.dev/docs/concepts/project\nDocs // Scrape // 56/171 https://moonrepo.dev/docs/concepts/query-lang\nDocs // Scrape // 57/171 https://moonrepo.dev/docs/concepts/target\nDocs // Scrape // 58/171 https://moonrepo.dev/docs/concepts/task\nDocs // Scrape // 59/171 https://moonrepo.dev/docs/concepts/task-inheritance\nDocs // Scrape // 60/171 https://moonrepo.dev/docs/concepts/token\nDocs // Scrape // 61/171 https://moonrepo.dev/docs/concepts/toolchain\nDocs // Scrape // 62/171 https://moonrepo.dev/docs/concepts/workspace\nDocs // Scrape // 63/171 https://moonrepo.dev/docs/config\nDocs // Scrape // 64/171 https://moonrepo.dev/docs/config/extensions\nDocs // Scrape // 65/171 https://moonrepo.dev/docs/config/overview\nDocs // Scrape // 66/171 https://moonrepo.dev/docs/config/project\nDocs // Scrape // 67/171 https://moonrepo.dev/docs/config/tasks\nDocs // Scrape // 68/171 https://moonrepo.dev/docs/config/template\nDocs // Scrape // 69/171 https://moonrepo.dev/docs/config/toolchain\nDocs // Scrape // 70/171 https://moonrepo.dev/docs/config/workspace\nDocs // Scrape // 71/171 https://moonrepo.dev/docs/create-project\nDocs // Scrape // 72/171 https://moonrepo.dev/docs/create-task\nDocs // Scrape // 73/171 https://moonrepo.dev/docs/editors\nDocs // Scrape // 74/171 https://moonrepo.dev/docs/editors/vscode\nDocs // Scrape // 75/171 https://moonrepo.dev/docs/faq\nDocs // Scrape // 76/171 https://moonrepo.dev/docs/guides/ci\nDocs // Scrape // 77/171 https://moonrepo.dev/docs/guides/codegen\nDocs // Scrape // 78/171 https://moonrepo.dev/docs/guides/codeowners\nDocs // Scrape // 79/171 https://moonrepo.dev/docs/guides/debug-task\nDocs // Scrape // 80/171 https://moonrepo.dev/docs/guides/docker\nDocs // Scrape // 81/171 https://moonrepo.dev/docs/guides/examples/angular\nDocs // Scrape // 82/171 https://moonrepo.dev/docs/guides/examples/astro\nDocs // Scrape // 83/171 https://moonrepo.dev/docs/guides/examples/eslint\nDocs // Scrape // 84/171 https://moonrepo.dev/docs/guides/examples/jest\nDocs // Scrape // 85/171 https://moonrepo.dev/docs/guides/examples/nest\nDocs // Scrape // 86/171 https://moonrepo.dev/docs/guides/examples/next\nDocs // Scrape // 87/171 https://moonrepo.dev/docs/guides/examples/nuxt\nDocs // Scrape // 88/171 https://moonrepo.dev/docs/guides/examples/packemon\nDocs // Scrape // 89/171 https://moonrepo.dev/docs/guides/examples/prettier\nDocs // Scrape // 90/171 https://moonrepo.dev/docs/guides/examples/react\nDocs // Scrape // 91/171 https://moonrepo.dev/docs/guides/examples/remix\nDocs // Scrape // 92/171 https://moonrepo.dev/docs/guides/examples/solid\nDocs // Scrape // 93/171 https://moonrepo.dev/docs/guides/examples/storybook\nDocs // Scrape // 94/171 https://moonrepo.dev/docs/guides/examples/sveltekit\nDocs // Scrape // 95/171 https://moonrepo.dev/docs/guides/examples/typescript\nDocs // Scrape // 96/171 https://moonrepo.dev/docs/guides/examples/vite\nDocs // Scrape // 97/171 https://moonrepo.dev/docs/guides/examples/vue\nDocs // Scrape // 98/171 https://moonrepo.dev/docs/guides/extensions\nDocs // Scrape // 99/171 https://moonrepo.dev/docs/guides/javascript/bun-handbook\nDocs // Scrape // 100/171 https://moonrepo.dev/docs/guides/javascript/deno-handbook\nDocs // Scrape // 101/171 https://moonrepo.dev/docs/guides/javascript/node-handbook\nDocs // Scrape // 102/171 https://moonrepo.dev/docs/guides/javascript/typescript-eslint\nDocs // Scrape // 103/171 https://moonrepo.dev/docs/guides/javascript/typescript-project-refs\nDocs // Scrape // 104/171 https://moonrepo.dev/docs/guides/mcp\nDocs // Scrape // 105/171 https://moonrepo.dev/docs/guides/node/examples\nDocs // Scrape // 106/171 https://moonrepo.dev/docs/guides/notifications\nDocs // Scrape // 107/171 https://moonrepo.dev/docs/guides/offline-mode\nDocs // Scrape // 108/171 https://moonrepo.dev/docs/guides/open-source\nDocs // Scrape // 109/171 https://moonrepo.dev/docs/guides/pkl-config\nDocs // Scrape // 110/171 https://moonrepo.dev/docs/guides/profile\nDocs // Scrape // 111/171 https://moonrepo.dev/docs/guides/remote-cache\nDocs // Scrape // 112/171 https://moonrepo.dev/docs/guides/root-project\nDocs // Scrape // 113/171 https://moonrepo.dev/docs/guides/rust/handbook\nDocs // Scrape // 114/171 https://moonrepo.dev/docs/guides/sharing-config\nDocs // Scrape // 115/171 https://moonrepo.dev/docs/guides/vcs-hooks\nDocs // Scrape // 116/171 https://moonrepo.dev/docs/guides/wasm-plugins\nDocs // Scrape // 117/171 https://moonrepo.dev/docs/guides/webhooks\nDocs // Scrape // 118/171 https://moonrepo.dev/docs/how-it-works\nDocs // Scrape // 119/171 https://moonrepo.dev/docs/how-it-works/action-graph\nDocs // Scrape // 120/171 https://moonrepo.dev/docs/how-it-works/languages\nDocs // Scrape // 121/171 https://moonrepo.dev/docs/how-it-works/project-graph\nDocs // Scrape // 122/171 https://moonrepo.dev/docs/how-it-works/task-graph\nDocs // Scrape // 123/171 https://moonrepo.dev/docs/install\nDocs // Scrape // 124/171 https://moonrepo.dev/docs/migrate-to-moon\nDocs // Scrape // 125/171 https://moonrepo.dev/docs/migrate/2.0\nDocs // Scrape // 126/171 https://moonrepo.dev/docs/proto\nDocs // Scrape // 127/171 https://moonrepo.dev/docs/proto/commands/activate\nDocs // Scrape // 128/171 https://moonrepo.dev/docs/proto/commands/alias\nDocs // Scrape // 129/171 https://moonrepo.dev/docs/proto/commands/bin\nDocs // Scrape // 130/171 https://moonrepo.dev/docs/proto/commands/clean\nDocs // Scrape // 131/171 https://moonrepo.dev/docs/proto/commands/completions\nDocs // Scrape // 132/171 https://moonrepo.dev/docs/proto/commands/debug\nDocs // Scrape // 133/171 https://moonrepo.dev/docs/proto/commands/debug/config\nDocs // Scrape // 134/171 https://moonrepo.dev/docs/proto/commands/debug/env\nDocs // Scrape // 135/171 https://moonrepo.dev/docs/proto/commands/diagnose\nDocs // Scrape // 136/171 https://moonrepo.dev/docs/proto/commands/exec\nDocs // Scrape // 137/171 https://moonrepo.dev/docs/proto/commands/install\nDocs // Scrape // 138/171 https://moonrepo.dev/docs/proto/commands/list\nDocs // Scrape // 139/171 https://moonrepo.dev/docs/proto/commands/list-remote\nDocs // Scrape // 140/171 https://moonrepo.dev/docs/proto/commands/outdated\nDocs // Scrape // 141/171 https://moonrepo.dev/docs/proto/commands/pin\nDocs // Scrape // 142/171 https://moonrepo.dev/docs/proto/commands/plugin\nDocs // Scrape // 143/171 https://moonrepo.dev/docs/proto/commands/plugin/add\nDocs // Scrape // 144/171 https://moonrepo.dev/docs/proto/commands/plugin/info\nDocs // Scrape // 145/171 https://moonrepo.dev/docs/proto/commands/plugin/list\nDocs // Scrape // 146/171 https://moonrepo.dev/docs/proto/commands/plugin/remove\nDocs // Scrape // 147/171 https://moonrepo.dev/docs/proto/commands/plugin/search\nDocs // Scrape // 148/171 https://moonrepo.dev/docs/proto/commands/regen\nDocs // Scrape // 149/171 https://moonrepo.dev/docs/proto/commands/run\nDocs // Scrape // 150/171 https://moonrepo.dev/docs/proto/commands/setup\nDocs // Scrape // 151/171 https://moonrepo.dev/docs/proto/commands/status\nDocs // Scrape // 152/171 https://moonrepo.dev/docs/proto/commands/unalias\nDocs // Scrape // 153/171 https://moonrepo.dev/docs/proto/commands/uninstall\nDocs // Scrape // 154/171 https://moonrepo.dev/docs/proto/commands/unpin\nDocs // Scrape // 155/171 https://moonrepo.dev/docs/proto/commands/upgrade\nDocs // Scrape // 156/171 https://moonrepo.dev/docs/proto/commands/use\nDocs // Scrape // 157/171 https://moonrepo.dev/docs/proto/commands/versions\nDocs // Scrape // 158/171 https://moonrepo.dev/docs/proto/config\nDocs // Scrape // 159/171 https://moonrepo.dev/docs/proto/detection\nDocs // Scrape // 160/171 https://moonrepo.dev/docs/proto/faq\nDocs // Scrape // 161/171 https://moonrepo.dev/docs/proto/install\nDocs // Scrape // 162/171 https://moonrepo.dev/docs/proto/non-wasm-plugin\nDocs // Scrape // 163/171 https://moonrepo.dev/docs/proto/plugins\nDocs // Scrape // 164/171 https://moonrepo.dev/docs/proto/tool-spec\nDocs // Scrape // 165/171 https://moonrepo.dev/docs/proto/tools\nDocs // Scrape // 166/171 https://moonrepo.dev/docs/proto/wasm-plugin\nDocs // Scrape // 167/171 https://moonrepo.dev/docs/proto/workflows\nDocs // Scrape // 168/171 https://moonrepo.dev/docs/run-task\nDocs // Scrape // 169/171 https://moonrepo.dev/docs/setup-toolchain\nDocs // Scrape // 170/171 https://moonrepo.dev/docs/setup-workspace\nDocs // Scrape // 171/171 https://moonrepo.dev/docs/terminology\nDocs // Scrape // Wrote external docs snapshot (pages=171,ok=21,failed=150,path=/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md)\n",
            "title": "Run moon docs scraping script",
            "metadata": {
              "output": "Docs // Scrape // 1/171 https://moonrepo.dev/docs\nDocs // Scrape // 2/171 https://moonrepo.dev/docs/cheat-sheet\nDocs // Scrape // 3/171 https://moonrepo.dev/docs/commands\nDocs // Scrape // 4/171 https://moonrepo.dev/docs/commands/action-graph\nDocs // Scrape // 5/171 https://moonrepo.dev/docs/commands/bin\nDocs // Scrape // 6/171 https://moonrepo.dev/docs/commands/check\nDocs // Scrape // 7/171 https://moonrepo.dev/docs/commands/ci\nDocs // Scrape // 8/171 https://moonrepo.dev/docs/commands/clean\nDocs // Scrape // 9/171 https://moonrepo.dev/docs/commands/completions\nDocs // Scrape // 10/171 https://moonrepo.dev/docs/commands/docker\nDocs // Scrape // 11/171 https://moonrepo.dev/docs/commands/docker/file\nDocs // Scrape // 12/171 https://moonrepo.dev/docs/commands/docker/prune\nDocs // Scrape // 13/171 https://moonrepo.dev/docs/commands/docker/scaffold\nDocs // Scrape // 14/171 https://moonrepo.dev/docs/commands/docker/setup\nDocs // Scrape // 15/171 https://moonrepo.dev/docs/commands/exec\nDocs // Scrape // 16/171 https://moonrepo.dev/docs/commands/ext\nDocs // Scrape // 17/171 https://moonrepo.dev/docs/commands/extension\nDocs // Scrape // 18/171 https://moonrepo.dev/docs/commands/extension/add\nDocs // Scrape // 19/171 https://moonrepo.dev/docs/commands/extension/info\nDocs // Scrape // 20/171 https://moonrepo.dev/docs/commands/generate\nDocs // Scrape // 21/171 https://moonrepo.dev/docs/commands/hash\nDocs // Scrape // 22/171 https://moonrepo.dev/docs/commands/init\nDocs // Scrape // 23/171 https://moonrepo.dev/docs/commands/mcp\nDocs // Scrape // 24/171 https://moonrepo.dev/docs/commands/overview\nDocs // Scrape // 25/171 https://moonrepo.dev/docs/commands/project\nDocs // Scrape // 26/171 https://moonrepo.dev/docs/commands/project-graph\nDocs // Scrape // 27/171 https://moonrepo.dev/docs/commands/projects\nDocs // Scrape // 28/171 https://moonrepo.dev/docs/commands/query\nDocs // Scrape // 29/171 https://moonrepo.dev/docs/commands/query/affected\nDocs // Scrape // 30/171 https://moonrepo.dev/docs/commands/query/changed-files\nDocs // Scrape // 31/171 https://moonrepo.dev/docs/commands/query/projects\nDocs // Scrape // 32/171 https://moonrepo.dev/docs/commands/query/tasks\nDocs // Scrape // 33/171 https://moonrepo.dev/docs/commands/run\nDocs // Scrape // 34/171 https://moonrepo.dev/docs/commands/setup\nDocs // Scrape // 35/171 https://moonrepo.dev/docs/commands/sync\nDocs // Scrape // 36/171 https://moonrepo.dev/docs/commands/sync/code-owners\nDocs // Scrape // 37/171 https://moonrepo.dev/docs/commands/sync/config-schemas\nDocs // Scrape // 38/171 https://moonrepo.dev/docs/commands/sync/projects\nDocs // Scrape // 39/171 https://moonrepo.dev/docs/commands/sync/vcs-hooks\nDocs // Scrape // 40/171 https://moonrepo.dev/docs/commands/task\nDocs // Scrape // 41/171 https://moonrepo.dev/docs/commands/task-graph\nDocs // Scrape // 42/171 https://moonrepo.dev/docs/commands/tasks\nDocs // Scrape // 43/171 https://moonrepo.dev/docs/commands/teardown\nDocs // Scrape // 44/171 https://moonrepo.dev/docs/commands/template\nDocs // Scrape // 45/171 https://moonrepo.dev/docs/commands/templates\nDocs // Scrape // 46/171 https://moonrepo.dev/docs/commands/toolchain\nDocs // Scrape // 47/171 https://moonrepo.dev/docs/commands/toolchain/add\nDocs // Scrape // 48/171 https://moonrepo.dev/docs/commands/toolchain/info\nDocs // Scrape // 49/171 https://moonrepo.dev/docs/commands/upgrade\nDocs // Scrape // 50/171 https://moonrepo.dev/docs/comparison\nDocs // Scrape // 51/171 https://moonrepo.dev/docs/concepts\nDocs // Scrape // 52/171 https://moonrepo.dev/docs/concepts/cache\nDocs // Scrape // 53/171 https://moonrepo.dev/docs/concepts/file-group\nDocs // Scrape // 54/171 https://moonrepo.dev/docs/concepts/file-pattern\nDocs // Scrape // 55/171 https://moonrepo.dev/docs/concepts/project\nDocs // Scrape // 56/171 https://moonrepo.dev/docs/concepts/query-lang\nDocs // Scrape // 57/171 https://moonrepo.dev/docs/concepts/target\nDocs // Scrape // 58/171 https://moonrepo.dev/docs/concepts/task\nDocs // Scrape // 59/171 https://moonrepo.dev/docs/concepts/task-inheritance\nDocs // Scrape // 60/171 https://moonrepo.dev/docs/concepts/token\nDocs // Scrape // 61/171 https://moonrepo.dev/docs/concepts/toolchain\nDocs // Scrape // 62/171 https://moonrepo.dev/docs/concepts/workspace\nDocs // Scrape // 63/171 https://moonrepo.dev/docs/config\nDocs // Scrape // 64/171 https://moonrepo.dev/docs/config/extensions\nDocs // Scrape // 65/171 https://moonrepo.dev/docs/config/overview\nDocs // Scrape // 66/171 https://moonrepo.dev/docs/config/project\nDocs // Scrape // 67/171 https://moonrepo.dev/docs/config/tasks\nDocs // Scrape // 68/171 https://moonrepo.dev/docs/config/template\nDocs // Scrape // 69/171 https://moonrepo.dev/docs/config/toolchain\nDocs // Scrape // 70/171 https://moonrepo.dev/docs/config/workspace\nDocs // Scrape // 71/171 https://moonrepo.dev/docs/create-project\nDocs // Scrape // 72/171 https://moonrepo.dev/docs/create-task\nDocs // Scrape // 73/171 https://moonrepo.dev/docs/editors\nDocs // Scrape // 74/171 https://moonrepo.dev/docs/editors/vscode\nDocs // Scrape // 75/171 https://moonrepo.dev/docs/faq\nDocs // Scrape // 76/171 https://moonrepo.dev/docs/guides/ci\nDocs // Scrape // 77/171 https://moonrepo.dev/docs/guides/codegen\nDocs // Scrape // 78/171 https://moonrepo.dev/docs/guides/codeowners\nDocs // Scrape // 79/171 https://moonrepo.dev/docs/guides/debug-task\nDocs // Scrape // 80/171 https://moonrepo.dev/docs/guides/docker\nDocs // Scrape // 81/171 https://moonrepo.dev/docs/guides/examples/angular\nDocs // Scrape // 82/171 https://moonrepo.dev/docs/guides/examples/astro\nDocs // Scrape // 83/171 https://moonrepo.dev/docs/guides/examples/eslint\nDocs // Scrape // 84/171 https://moonrepo.dev/docs/guides/examples/jest\nDocs // Scrape // 85/171 https://moonrepo.dev/docs/guides/examples/nest\nDocs // Scrape // 86/171 https://moonrepo.dev/docs/guides/examples/next\nDocs // Scrape // 87/171 https://moonrepo.dev/docs/guides/examples/nuxt\nDocs // Scrape // 88/171 https://moonrepo.dev/docs/guides/examples/packemon\nDocs // Scrape // 89/171 https://moonrepo.dev/docs/guides/examples/prettier\nDocs // Scrape // 90/171 https://moonrepo.dev/docs/guides/examples/react\nDocs // Scrape // 91/171 https://moonrepo.dev/docs/guides/examples/remix\nDocs // Scrape // 92/171 https://moonrepo.dev/docs/guides/examples/solid\nDocs // Scrape // 93/171 https://moonrepo.dev/docs/guides/examples/storybook\nDocs // Scrape // 94/171 https://moonrepo.dev/docs/guides/examples/sveltekit\nDocs // Scrape // 95/171 https://moonrepo.dev/docs/guides/examples/typescript\nDocs // Scrape // 96/171 https://moonrepo.dev/docs/guides/examples/vite\nDocs // Scrape // 97/171 https://moonrepo.dev/docs/guides/examples/vue\nDocs // Scrape // 98/171 https://moonrepo.dev/docs/guides/extensions\nDocs // Scrape // 99/171 https://moonrepo.dev/docs/guides/javascript/bun-handbook\nDocs // Scrape // 100/171 https://moonrepo.dev/docs/guides/javascript/deno-handbook\nDocs // Scrape // 101/171 https://moonrepo.dev/docs/guides/javascript/node-handbook\nDocs // Scrape // 102/171 https://moonrepo.dev/docs/guides/javascript/typescript-eslint\nDocs // Scrape // 103/171 https://moonrepo.dev/docs/guides/javascript/typescript-project-refs\nDocs // Scrape // 104/171 https://moonrepo.dev/docs/guides/mcp\nDocs // Scrape // 105/171 https://moonrepo.dev/docs/guides/node/examples\nDocs // Scrape // 106/171 https://moonrepo.dev/docs/guides/notifications\nDocs // Scrape // 107/171 https://moonrepo.dev/docs/guides/offline-mode\nDocs // Scrape // 108/171 https://moonrepo.dev/docs/guides/open-source\nDocs // Scrape // 109/171 https://moonrepo.dev/docs/guides/pkl-config\nDocs // Scrape // 110/171 https://moonrepo.dev/docs/guides/profile\nDocs // Scrape // 111/171 https://moonrepo.dev/docs/guides/remote-cache\nDocs // Scrape // 112/171 https://moonrepo.dev/docs/guides/root-project\nDocs // Scrape // 113/171 https://moonrepo.dev/docs/guides/rust/handbook\nDocs // Scrape // 114/171 https://moonrepo.dev/docs/guides/sharing-config\nDocs // Scrape // 115/171 https://moonrepo.dev/docs/guides/vcs-hooks\nDocs // Scrape // 116/171 https://moonrepo.dev/docs/guides/wasm-plugins\nDocs // Scrape // 117/171 https://moonrepo.dev/docs/guides/webhooks\nDocs // Scrape // 118/171 https://moonrepo.dev/docs/how-it-works\nDocs // Scrape // 119/171 https://moonrepo.dev/docs/how-it-works/action-graph\nDocs // Scrape // 120/171 https://moonrepo.dev/docs/how-it-works/languages\nDocs // Scrape // 121/171 https://moonrepo.dev/docs/how-it-works/project-graph\nDocs // Scrape // 122/171 https://moonrepo.dev/docs/how-it-works/task-graph\nDocs // Scrape // 123/171 https://moonrepo.dev/docs/install\nDocs // Scrape // 124/171 https://moonrepo.dev/docs/migrate-to-moon\nDocs // Scrape // 125/171 https://moonrepo.dev/docs/migrate/2.0\nDocs // Scrape // 126/171 https://moonrepo.dev/docs/proto\nDocs // Scrape // 127/171 https://moonrepo.dev/docs/proto/commands/activate\nDocs // Scrape // 128/171 https://moonrepo.dev/docs/proto/commands/alias\nDocs // Scrape // 129/171 https://moonrepo.dev/docs/proto/commands/bin\nDocs // Scrape // 130/171 https://moonrepo.dev/docs/proto/commands/clean\nDocs // Scrape // 131/171 https://moonrepo.dev/docs/proto/commands/completions\nDocs // Scrape // 132/171 https://moonrepo.dev/docs/proto/commands/debug\nDocs // Scrape // 133/171 https://moonrepo.dev/docs/proto/commands/debug/config\nDocs // Scrape // 134/171 https://moonrepo.dev/docs/proto/commands/debug/env\nDocs // Scrape // 135/171 https://moonrepo.dev/docs/proto/commands/diagnose\nDocs // Scrape // 136/171 https://moonrepo.dev/docs/proto/commands/exec\nDocs // Scrape // 137/171 https://moonrepo.dev/docs/proto/commands/install\nDocs // Scrape // 138/171 https://moonrepo.dev/docs/proto/commands/list\nDocs // Scrape // 139/171 https://moonrepo.dev/docs/proto/commands/list-remote\nDocs // Scrape // 140/171 https://moonrepo.dev/docs/proto/commands/outdated\nDocs // Scrape // 141/171 https://moonrepo.dev/docs/proto/commands/pin\nDocs // Scrape // 142/171 https://moonrepo.dev/docs/proto/commands/plugin\nDocs // Scrape // 143/171 https://moonrepo.dev/docs/proto/commands/plugin/add\nDocs // Scrape // 144/171 https://moonrepo.dev/docs/proto/commands/plugin/info\nDocs // Scrape // 145/171 https://moonrepo.dev/docs/proto/commands/plugin/list\nDocs // Scrape // 146/171 https://moonrepo.dev/docs/proto/commands/plugin/remove\nDocs // Scrape // 147/171 https://moonrepo.dev/docs/proto/commands/plugin/search\nDocs // Scrape // 148/171 https://moonrepo.dev/docs/proto/commands/regen\nDocs // Scrape // 149/171 https://moonrepo.dev/docs/proto/commands/run\nDocs // Scrape // 150/171 https://moonrepo.dev/docs/proto/commands/setup\nDocs // Scrape // 151/171 https://moonrepo.dev/docs/proto/commands/status\nDocs // Scrape // 152/171 https://moonrepo.dev/docs/proto/commands/unalias\nDocs // Scrape // 153/171 https://moonrepo.dev/docs/proto/commands/uninstall\nDocs // Scrape // 154/171 https://moonrepo.dev/docs/proto/commands/unpin\nDocs // Scrape // 155/171 https://moonrepo.dev/docs/proto/commands/upgrade\nDocs // Scrape // 156/171 https://moonrepo.dev/docs/proto/commands/use\nDocs // Scrape // 157/171 https://moonrepo.dev/docs/proto/commands/versions\nDocs // Scrape // 158/171 https://moonrepo.dev/docs/proto/config\nDocs // Scrape // 159/171 https://moonrepo.dev/docs/proto/detection\nDocs // Scrape // 160/171 https://moonrepo.dev/docs/proto/faq\nDocs // Scrape // 161/171 https://moonrepo.dev/docs/proto/install\nDocs // Scrape // 162/171 https://moonrepo.dev/docs/proto/non-wasm-plugin\nDocs // Scrape // 163/171 https://moonrepo.dev/docs/proto/plugins\nDocs // Scrape // 164/171 https://moonrepo.dev/docs/proto/tool-spec\nDocs // Scrape // 165/171 https://moonrepo.dev/docs/proto/tools\nDocs // Scrape // 166/171 https://moonrepo.dev/docs/proto/wasm-plugin\nDocs // Scrape // 167/171 https://moonrepo.dev/docs/proto/workflows\nDocs // Scrape // 168/171 https://moonrepo.dev/docs/run-task\nDocs // Scrape // 169/171 https://moonrepo.dev/docs/setup-toolchain\nDocs // Scrape // 170/171 https://moonrepo.dev/docs/setup-workspace\nDocs // Scrape // 171/171 https://moonrepo.dev/docs/terminology\nDocs // Scrape // Wrote external docs snapshot (pages=171,ok=21,failed=150,path=/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md)\n",
              "exit": 0,
              "description": "Run moon docs scraping script",
              "truncated": false
            },
            "time": {
              "start": 1771212999927,
              "end": 1771213027975
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_031bc869aea07c4e01699290c66a288190886753b8e7f5806d"
            }
          },
          "id": "prt_c64858734001pE3xPzD8JOguwf",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64857260001mk7qbVL5VAhNCR"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "0078d4e53cc1364054c37f47ef8616804a7a4271",
          "cost": 0,
          "tokens": {
            "total": 53476,
            "input": 2089,
            "output": 187,
            "reasoning": 128,
            "cache": {
              "read": 51200,
              "write": 0
            }
          },
          "id": "prt_c6485fa8b0015cGA4PvSdDUO5F",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64857260001mk7qbVL5VAhNCR"
        },
        {
          "type": "patch",
          "hash": "5147fb7468d78f726061bbed9b56e547e848c4bd",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/docs/designs/core_gen1.design.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md",
            "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts"
          ],
          "id": "prt_c6485faef001JCYcknF8Or4brX",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64857260001mk7qbVL5VAhNCR"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213028087,
          "completed": 1771213032978
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 57221,
          "input": 3696,
          "output": 149,
          "reasoning": 99,
          "cache": {
            "read": 53376,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6485faf7001KV2BZ27lrlUPJX",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "0078d4e53cc1364054c37f47ef8616804a7a4271",
          "id": "prt_c64860236001qkaoIaTOrkUpds",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6485faf7001KV2BZ27lrlUPJX"
        },
        {
          "type": "reasoning",
          "text": "**Planning fallback fetch method**",
          "metadata": {
            "openai": {
              "itemId": "rs_0cd4b802678a8ee501699290e63ed88193be9df17d4de1ba9d",
              "reasoningEncryptedContent": "gAAAAABpkpDoDsEhyjrwmIU2d-XbeJkpe-A9vlpMewL_k9hWxyn1fOTbf68sDqmc9jN7VwbqA6J1nvGAfe6SQRTT7W8wAKtfu3kwS3LQ7yLTS93Wd_MEgWrbcxV6x1ECoTP_cy18QO3A-eWPNAv9uSvnrTzr5nBgFCwWlDWuRZUWLDSxYD-_v2UIfDhaTAHs0HyPnPCmDCVTA_zbOYyMylRjeHRrmEl2CDV183bSw6wPfYoVgP4szmE8fKSVjg8lqV8570WMLqNpHJs_NFOTn9q6zNDcThAZ14zCqwpOqKeXJZiW6kRNf4bY3tEqSfSJSOWpC_WiNb-Dv4FKxVorFDeJBB3u3Ovm2nWhr-LhpxZk9uYFjr6CIdUk0YPKfoCnvpMXzdABtV4kaQ2YRq6Llw0ytcmu1gX8V0iPCXQ7r198jt1DVTZym3dr7t5GI4KfkkEBk5iRx8RIWQqM4gIheHPNFDDdY3Aal3QTHKogQfhowmck9IN-_u1YfHQvwXUNFcSiB_QeYcqtAW0X8lD1y51RHBQDj-v1X_zVhAANXXCdG4FMgbTFR5_jKyR1m5Q4M1Ni1bKuAo6Jqh6Aukw9whSZWy-yZ5X7rDBP1nKfea2TxiwE-Pps6UfX5jBxCAAOK-LYFIE0mWn_-RKGi2x_8FyTlsFIZkS4c-5BKwMmzOuxq4B0Yr84HwSU8pt1bF9QA4Od0oxAmn4SVw1-YM7KkeGzeCGVbTZ-MIaPl0IIjOckClV9Y_kwBQmPAfLRTa1BHqHKPHBuNmbfdDo1jZ6-BPm443RrexE-68wFPeEIGhzvgJhPdmYGlz1VPxXpwoJqscINbIuldgsTlnObf_Z62G0rr7qpjNFgAlVHNgu00vgB0Jl-AHjRUoeuHhmsYcb2lzYuu_pwjs8TC-R6lBvgWhbYjxgac72CXl3BUx4xtVR-BQ7x_Q9TxRKcmSncNiE7QfsPf5PPoHsa9xxbXU500RTULc0avEt5ZcUDsolctilqIIYwexfSqV7RMZ3sh6NxlsbQNKJs8MGqYaCJZtJH-SfQ8ioym8nmN3QvGFJ40B9jm9e-y_3GLj7QAxT14quE_xWf-UO1Utmp6UkPSpqM2ycbK1uaxEObGmXu6eFjZvHMO8zi-aFZOhjVnw_yDeeHLTxVDjZDM8cBV5D1HGFSgaMchjx5UxPl7geYWMQtv1WC4pxWRK_t3Y3-FSlfrCcotP-_X5S0XI0BjLXbkgNMsHs6W560tHIn1VFxTdohrzqZ4NX79dKCb2p7k5rtWdyF5VlCH0FZlqmcV5ioJKF1q9-o5FJPrw4mJgBkVuSEIPusuzK9WZJJPxPKS_-uw-UOkfeyy41JGZegVrfnBS0X5PNUeGgeV68NUAa4wCD5zoPwU-OnI5dXvMg2RXHkLUi2oIajmX4nGnsAIRlTzLbQFoHKFTQ1MDc5EYUyJFYD_QN8K6frW5J1V09SjKXhDUXhPzrwI9zfJyN6ByqnSeXca184MBsUK6sDog=="
            }
          },
          "time": {
            "start": 1771213030328,
            "end": 1771213032716
          },
          "id": "prt_c648603b8001AMjii0fAffm7xy",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6485faf7001KV2BZ27lrlUPJX"
        },
        {
          "type": "tool",
          "callID": "call_nmRhDuzDXzxpWJwYHx6dWkGW",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md",
              "offset": 1,
              "limit": 120
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md</path>\n<type>file</type>\n<content>1: ----\n2: ## External Docs Snapshot // moonrepo\n3: \n4: - Captured: 2026-02-16T03:37:07.965Z\n5: - Source root: https://moonrepo.dev/docs\n6: - Scope: 171 pages under /docs (excluding /docs/tags)\n7: - Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\n8: - Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\n9: ----\n10: \n11: ## /docs\n12: \n13: Source: https://moonrepo.dev/docs\n14: \n15: moonrepo is a productivity platform that aims to eliminate pain points for both developers and companies, by automating tiresome and complex workflows, and improving the overall developer experience.\n16: \n17: We currently achieve this through the following tools and services:\n18: \n19: moon[](http://moonrepo.dev/docs#moon \"Direct link to moon\")\n20: ------------------------------------------------------------\n21: \n22: [moon](https://moonrepo.dev/moon) is a repository _m_ anagement, _o_ rganization, _o_ rchestration, and _n_ otification tool for the web ecosystem, written in Rust. Many of the concepts within moon are heavily inspired from Bazel and other popular build systems, but tailored for our [supported languages](http://moonrepo.dev/docs#supported-languages).\n23: \n24: You can think of a moon as a tool that sits firmly in the middle between Bazel (high complexity, full structure), and make/just/etc scripts (low complexity, no structure).\n25: \n26: ### Why use moon?[](http://moonrepo.dev/docs#why-use-moon \"Direct link to Why use moon?\")\n27: \n28: Working in a language's ecosystem can be very involved, especially when it comes to managing a repository effectively. Which language version to use? Which dependency manager to use? How to use packages? Or how to build packages? So on and so forth. moon aims to streamline this entire process and provide a first-class developer experience.\n29: \n30: *   **Increased productivity** - With [Rust](https://www.rust-lang.org/) as our foundation, we can ensure robust speeds, high performance, and low memory usage. Instead of long builds blocking you, focus on your work.\n31: *   **Exceptional developer experience** - As veterans of developer tooling, we're well aware of the pain points and frustrations. Our goal is to mitigate and overcome these obstacles.\n32: *   **Incremental adoption** - At its core, moon has been designed to be adopted incrementally and is _not_ an \"all at once adoption\". Migrate project-by-project, or task-by-task, it's up to you!\n33: *   **Reduced tasks confusion** - Tasks (for example, `package.json` scripts) can become unwieldy, very quickly. No more duplicating the same task into every project, or reverse-engineering which root scripts to use. With moon, all you need to know is the project name, and a task name.\n34: *   **Ensure correct versions** - Whether it's a programming language or dependency manager, ensure the same version of each tool is the same across _every_ developer's environment. No more wasted hours of debugging.\n35: *   **Automation built-in** - When applicable, moon will automatically install dependencies (`node_modules`), or [sync project dependencies](https://moonrepo.dev/docs/config/toolchain#syncprojectworkspacedependencies), or even [sync TypeScript project references](https://moonrepo.dev/docs/config/toolchain#syncprojectreferences).\n36: *   And of course, the amazing list of [features](http://moonrepo.dev/docs#features) below!\n37: \n38: ### Supported languages[](http://moonrepo.dev/docs#supported-languages \"Direct link to Supported languages\")\n39: \n40: moon's long-term vision is to robustly support multiple programming languages (and dependency managers) so that a repository composed of projects with differing languages and tools can all work in unison. This is a lofty vision that requires a massive amount of time and resources to achieve, and as such, is not available on initial release, but will gradually be supported over time.\n41: \n42: To help achieve this vision, language support is broken down into 4 tiers, allowing us to incrementally integrate and improve them over time. The 4 tiers are as follows:\n43: \n44: *   Tier 0**No direct integration** - Tool is not directly supported in moon, but can still be run using the [\"system\" task toolchain](https://moonrepo.dev/docs/faq#can-we-run-other-languages), which expects the tool to exist in the current environment.\n45: *   Tier 1**Project categorization** - Projects can configure their primary [language in `moon.yml`](https://moonrepo.dev/docs/config/project#language), and have a dedicated Rust crate for metadata.\n46: *   Tier 2**Ecosystem platformization** - moon deeply integrates with the language's ecosystem by parsing manifests, lockfiles, and other semantic files to infer dependencies, tasks, and other necessary information.\n47: *   Tier 3**Toolchain integration** - Language is directly supported in the toolchain, configured in [`.moon/toolchains.yml`](https://moonrepo.dev/docs/config/toolchain), and will automatically be downloaded and installed.\n48: \n49: |  | Tier 0 | Tier 1 | Tier 2 | Tier 3 |\n50: | --- | --- | --- | --- | --- |\n51: | Bash/Batch |  |  |  |  |\n52: | Bun (JavaScript, TypeScript) |  |  |  |  |\n53: | Deno (JavaScript, TypeScript) |  |  |  |  |\n54: | Go |  |  |  |  |\n55: | Node (JavaScript, TypeScript) |  |  |  |  |\n56: |  npm, pnpm, yarn |  |  |  |  |\n57: | PHP |  |  |  |  |\n58: |  Composer |  |  |  |  |\n59: | Python |  |  |  |  |\n60: |  Pip |  |  |  |  |\n61: | Ruby |  |  |  |  |\n62: |  Gems, Bundler |  |  |  |  |\n63: | Rust |  |  |  |  |\n64: |  Cargo |  |  |  |  |\n65: | Other (Kotlin, Java, C#, ...) |  |  |  |  |\n66: \n67: *    Not applicable\n68: *    Partially supported (experimental)\n69: *    Fully Supported\n70: \n71: ### Supported targets[](http://moonrepo.dev/docs#supported-targets \"Direct link to Supported targets\")\n72: \n73: Because moon is written in Rust, we only support targets that are explicitly compiled for, which are currently:\n74: \n75: | Operating system | Architecture | Target |\n76: | --- | --- | --- |\n77: | macOS 64-bit | Intel | `x86_64-apple-darwin` |\n78: | macOS 64-bit | ARM | `aarch64-apple-darwin` |\n79: | Linux 64-bit | Intel GNU | `x86_64-unknown-linux-gnu` |\n80: | Linux 64-bit | Intel musl | `x86_64-unknown-linux-musl` |\n81: | Linux 64-bit | ARM GNU | `aarch64-unknown-linux-gnu` |\n82: | Linux 64-bit | ARM musl | `aarch64-unknown-linux-musl` |\n83: | Windows 64-bit | Intel | `x86_64-pc-windows-msvc` |\n84: \n85: ### Features[](http://moonrepo.dev/docs#features \"Direct link to Features\")\n86: \n87: #### Management[](http://moonrepo.dev/docs#management \"Direct link to Management\")\n88: \n89: *   **Smart hashing** - Collects inputs from multiple sources to ensure builds are deterministic and reproducible.\n90: *   **Remote caching** - Persists builds, hashes, and caches between teammates and CI/CD environments.\n91: *   **Integrated toolchain** - Automatically downloads and installs explicit versions of Node.js and other tools for consistency across the entire workspace or per project.\n92: *   **Multi-platform** - Runs on common development platforms: Linux, macOS, and Windows.\n93: \n94: #### Organization[](http://moonrepo.dev/docs#organization \"Direct link to Organization\")\n95: \n96: *   **Project graph** - Generates a project graph for dependency and dependent relationships.\n97: *   **Code generation** - Easily scaffold new applications, libraries, tooling, and more!\n98: *   **Dependency workspaces** - Works alongside package manager workspaces so that projects have distinct dependency trees.\n99: *   **Code ownership** - Declare owners, maintainers, support channels, and more. Generate CODEOWNERS.\n100: \n101: #### Orchestration[](http://moonrepo.dev/docs#orchestration \"Direct link to Orchestration\")\n102: \n103: *   **Dependency graph** - Generates a dependency graph to increase performance and reduce workloads.\n104: *   **Action pipeline** - Executes actions in parallel and in order using a thread pool and our dependency graph.\n105: *   **Action distribution**Coming soon - Distributes actions across multiple machines to increase throughput.\n106: *   **Incremental builds** - With our smart hashing, only rebuild projects that have been touched since the last build.\n107: \n108: #### Notification[](http://moonrepo.dev/docs#notification \"Direct link to Notification\")\n109: \n110: *   **Flakiness detection** - Reduce flaky builds with automatic retries and passthrough settings.\n111: *   **Webhook events**Experimental - Receive a webhook for every event in the pipeline. Useful for metrics gathering and insights.\n112: *   **Terminal notifications**Experimental - Receives notifications in your chosen terminal when builds are successful... or are not.\n113: *   **Git hooks** - Manage Git hooks to enforce workflows and requirements for contributors.\n114: \n115: proto[](http://moonrepo.dev/docs#proto \"Direct link to proto\")\n116: ---------------------------------------------------------------\n117: \n118: [proto](https://moonrepo.dev/proto) is a version manager for your favorite programming languages. [View proto documentation](https://moonrepo.dev/docs/proto).\n119: \n120: ## /docs/cheat-sheet\n\n(File has more lines. Use 'offset' parameter to read beyond line 120)\n</content>",
            "title": "docs/external/moonrepo/moonrepo_docs.ext.md",
            "metadata": {
              "preview": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:37:07.965Z\n- Source root: https://moonrepo.dev/docs\n- Scope: 171 pages under /docs (excluding /docs/tags)\n- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\n- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\n----\n\n## /docs\n\nSource: https://moonrepo.dev/docs\n\nmoonrepo is a productivity platform that aims to eliminate pain points for both developers and companies, by automating tiresome and complex workflows, and improving the overall developer experience.\n\nWe currently achieve this through the following tools and services:\n\nmoon[](http://moonrepo.dev/docs#moon \"Direct link to moon\")\n------------------------------------------------------------",
              "truncated": true,
              "loaded": []
            },
            "time": {
              "start": 1771213032904,
              "end": 1771213032907
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0cd4b802678a8ee501699290e8acb88193965c0ef89b356602"
            }
          },
          "id": "prt_c64860d22001Q7RfGusIojXXUN",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6485faf7001KV2BZ27lrlUPJX"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "0078d4e53cc1364054c37f47ef8616804a7a4271",
          "cost": 0,
          "tokens": {
            "total": 57221,
            "input": 3696,
            "output": 149,
            "reasoning": 99,
            "cache": {
              "read": 53376,
              "write": 0
            }
          },
          "id": "prt_c64860de0001qmPTfPcYcOERjE",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6485faf7001KV2BZ27lrlUPJX"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213032981,
          "completed": 1771213037905
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 59803,
          "input": 2637,
          "output": 78,
          "reasoning": 27,
          "cache": {
            "read": 57088,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64860e15001tSpoNie0VU2c6o",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "0078d4e53cc1364054c37f47ef8616804a7a4271",
          "id": "prt_c64861afa001GALnN6Cb0I1Vw2",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64860e15001tSpoNie0VU2c6o"
        },
        {
          "type": "reasoning",
          "text": "**Inspecting failure log entries**",
          "metadata": {
            "openai": {
              "itemId": "rs_0562c423eebe1ec301699290ec9a588196872a5d1a420d0a0e",
              "reasoningEncryptedContent": "gAAAAABpkpDtUL7bxGEfYWC54nHaXtMwlexek1R_0ZO74HQAwo6FQniiES956o7-fkyCxBlnjgNw_3lQ_FUmJgLwxDt1yDpcz8YXsCCMkXwsvXK_J_LwKMSiEeEbj1tI0FhORkaG30nLFwxNPGPWYyb35Gg6qYgI5nj3K-ZxGWpkaCmMdcozQW1ItA5x0V5oC6DC5c2wmzqW69lUI9jFm51eIPqbRdM87ibfGm5U8l38UencI0s9c7GgqmbSdd7TqzmBGwGlZCWZuXJcbPj-x6f__EWe6c2Y-vuBhSVZCMokHCLd_E4RK1h74QYL84x5gpvQjSe2mtmK_c_fBKDevV_GfmcgUPn_iMFfXuceJpU1dRLsOPXFVmadOJGAycmrf8jT2-Lm7B48v3_GFIaieyxOrSDlB-r221Fo8A7wdoWqEx3Jj7qKEtG6D82BgOAWkFbFdGoSjo3GFcbCDh40a-0iCYcJk4MmobXWLEQRj8Mm96o28HNyXRUpyr4XqF2FapvaW4W0LKt3rZ8qLVIA3jy_vIIem8KthI8L0Sm6l-KIyR3t1pLfYWcPceESwuCeBpUiZ9sFvVYYzIsQJFbxbtvh4qZDY2ZRe4j9Jq8sEh0YOOK5BB3gYBpFEph9CNY6MSzuFu21E9gIfPHkGpYH8pCJGSZeQYhvyVEhP7S1j_mzNDR72gLBCk--1-eMVr8ShaU6lwyTm-mAElfvK8z7hYdk6jt2lvxBbJ8WkUnrasXSnp1x8UBtAhF3HU-ifHj1unyqHBO8UjhUE4PlD0i5ksTf2S5G-ELTCRn3h54SYotUWKVB2qNyj-VVzJ1oxvVSPRzD0YraJN2LQ3q2BOb4yBIAe-SGg9HFyA3K457knwlZlxaKmhjsPQi4GRFb7wVd12knH8fgy8WQ_KCgechljyFJRGioGpEPdJ_QhWcvSMpAqLZ99YBwdgnZ9HAtgpFB15bx_95E-HdbpVVgOLGIGtuzuMquAB47KS_YOY1pEyP3jbsVRGl3cgY="
            }
          },
          "time": {
            "start": 1771213036634,
            "end": 1771213037394
          },
          "id": "prt_c64861c5a001eO93RVHHS6Rg2m",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64860e15001tSpoNie0VU2c6o"
        },
        {
          "type": "tool",
          "callID": "call_I9G3rIxjHbubJMNQae9NN4vP",
          "tool": "grep",
          "state": {
            "status": "completed",
            "input": {
              "pattern": "> Scrape failed: .*",
              "path": "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo",
              "include": "*.ext.md"
            },
            "output": "Found 150 matches (showing first 100)\n/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md:\n  Line 2867: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/init\n  Line 2873: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/mcp\n  Line 2879: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/overview\n  Line 2885: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/project\n  Line 2891: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/project-graph\n  Line 2897: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/projects\n  Line 2903: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/query\n  Line 2909: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/query/affected\n  Line 2915: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/query/changed-files\n  Line 2921: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/query/projects\n  Line 2927: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/query/tasks\n  Line 2933: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/run\n  Line 2939: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/setup\n  Line 2945: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/sync\n  Line 2951: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/sync/code-owners\n  Line 2957: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/sync/config-schemas\n  Line 2963: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/sync/projects\n  Line 2969: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/sync/vcs-hooks\n  Line 2975: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/task\n  Line 2981: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/task-graph\n  Line 2987: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/tasks\n  Line 2993: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/teardown\n  Line 2999: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/template\n  Line 3005: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/templates\n  Line 3011: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/toolchain\n  Line 3017: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/toolchain/add\n  Line 3023: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/toolchain/info\n  Line 3029: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/commands/upgrade\n  Line 3035: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/comparison\n  Line 3041: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts\n  Line 3047: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/cache\n  Line 3053: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/file-group\n  Line 3059: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/file-pattern\n  Line 3065: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/project\n  Line 3071: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/query-lang\n  Line 3077: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/target\n  Line 3083: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/task\n  Line 3089: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/task-inheritance\n  Line 3095: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/token\n  Line 3101: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/toolchain\n  Line 3107: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/concepts/workspace\n  Line 3113: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/config\n  Line 3119: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/config/extensions\n  Line 3125: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/config/overview\n  Line 3131: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/config/project\n  Line 3137: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/config/tasks\n  Line 3143: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/config/template\n  Line 3149: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/config/toolchain\n  Line 3155: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/config/workspace\n  Line 3161: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/create-project\n  Line 3167: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/create-task\n  Line 3173: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/editors\n  Line 3179: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/editors/vscode\n  Line 3185: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/faq\n  Line 3191: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/ci\n  Line 3197: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/codegen\n  Line 3203: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/codeowners\n  Line 3209: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/debug-task\n  Line 3215: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/docker\n  Line 3221: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/angular\n  Line 3227: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/astro\n  Line 3233: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/eslint\n  Line 3239: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/jest\n  Line 3245: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/nest\n  Line 3251: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/next\n  Line 3257: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/nuxt\n  Line 3263: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/packemon\n  Line 3269: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/prettier\n  Line 3275: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/react\n  Line 3281: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/remix\n  Line 3287: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/solid\n  Line 3293: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/storybook\n  Line 3299: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/sveltekit\n  Line 3305: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/typescript\n  Line 3311: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/vite\n  Line 3317: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/examples/vue\n  Line 3323: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/extensions\n  Line 3329: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/javascript/bun-handbook\n  Line 3335: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/javascript/deno-handbook\n  Line 3341: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/javascript/node-handbook\n  Line 3347: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/javascript/typescript-eslint\n  Line 3353: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/javascript/typescript-project-refs\n  Line 3359: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/mcp\n  Line 3365: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/node/examples\n  Line 3371: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/notifications\n  Line 3377: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/offline-mode\n  Line 3383: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/open-source\n  Line 3389: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/pkl-config\n  Line 3395: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/profile\n  Line 3401: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/remote-cache\n  Line 3407: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/root-project\n  Line 3413: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/rust/handbook\n  Line 3419: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/sharing-config\n  Line 3425: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/vcs-hooks\n  Line 3431: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/wasm-plugins\n  Line 3437: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/guides/webhooks\n  Line 3443: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/how-it-works\n  Line 3449: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/how-it-works/action-graph\n  Line 3455: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/how-it-works/languages\n  Line 3461: > Scrape failed: Request failed (429) for https://r.jina.ai/http://moonrepo.dev/docs/how-it-works/project-graph\n\n(Results truncated: showing 100 of 150 matches (50 hidden). Consider using a more specific path or pattern.)",
            "title": "> Scrape failed: .*",
            "metadata": {
              "matches": 150,
              "truncated": true
            },
            "time": {
              "start": 1771213037811,
              "end": 1771213037847
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0562c423eebe1ec301699290ed5b408196bd6d4ff35306aa12"
            }
          },
          "id": "prt_c64861f53001m6lP6ef6Zpk5rn",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64860e15001tSpoNie0VU2c6o"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "0078d4e53cc1364054c37f47ef8616804a7a4271",
          "cost": 0,
          "tokens": {
            "total": 59803,
            "input": 2637,
            "output": 78,
            "reasoning": 27,
            "cache": {
              "read": 57088,
              "write": 0
            }
          },
          "id": "prt_c6486211d0010uewFHF0ljmjxQ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64860e15001tSpoNie0VU2c6o"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213037909,
          "completed": 1771213096618
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 67338,
          "input": 3694,
          "output": 3996,
          "reasoning": 1908,
          "cache": {
            "read": 59648,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64862155001Ues1vrnSXRm4I6",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "0078d4e53cc1364054c37f47ef8616804a7a4271",
          "id": "prt_c648629690019HfDKP0D1cMC3z",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64862155001Ues1vrnSXRm4I6"
        },
        {
          "type": "reasoning",
          "text": "**Implementing HTML fallback parsing**",
          "metadata": {
            "openai": {
              "itemId": "rs_0c7c8a6f5bc3b72101699290f0798881908ef63ebdc98df0a8",
              "reasoningEncryptedContent": "gAAAAABpkpEPweAyKuF2ATvGKhnmEgbTDUbs_bd434QiXeZrxt-1eHGguDfDOactcpJetvHCtm9vZI2puoYWoBFjGwcQM6gSs-I6pikSpketfGSmqRrV56kTB7Q51-6tV43K331TXNXhGfjp3kx5n_sLta5HOVFUDP6Okngb-KwPVrrIpGptSS4NPhlgBFW4b2B1kplzODml38Dn8w6vCAsc-TNdW-ZWDeM9BEey8kzboWQxoOa7n-uSYi8BjrUaSpvrxwdvbb8ilyGkCC7Bi_wtws8OY6mkw49d8Ag8cJm6K5CC4JVNJZ4VgeAR5z3NEVkHlKus8amt43Xs8JwpkWdZsCx71-SfgRPVz1daxZF105DOBTM1griuadIovmNlu1B1eNpmbhznAR_VGibLDBfjHIV1kKFK9EYCCOK3Xk5tcqyESJoPMktuyQ707h5wHoiX0daszTcqnaKTNsvhNmcZNdOT7qh4pQpAY7bOtyk6hupt7X9wfrwa50H5qTcyQhKha-C_potGzYgrESs1BQaMx9TeGY3HEYY2NEQ3HdeXt8J48PkT4Zb21d9t01dmpGuiXM8unJVD2tvCEPVeUChDC_HnBhzDFTEi0gm4FCZJnx2rEJ8R3R0isSOdLNSkfnsrKvOt1gG43VdwaJflClIrUJ68gPgKBcsAQorLhsgUx6F41psdtRx4MxiAx5j5JnbLnJdnOwquagmVVwICe2swi4A3TB2ZkaFDleHHk5HoAx-uH3T7lrFRyjF_GS-86O9fRW342j_wae89RNTRzTtacuP26hujL71zJ2oT_dz5jhub1Uttod7g8SBJrlv-SYB2mxgkxspQj1FijN5mOE0lzsF4twhbf2HZaT6n-_1EYoJP4cBOAAI35oL9BCTk3UOJ4RNZamretXqNkDSJlBiyWTA_8NUD0ExobGqnEJ1cmXs1v8UPgvxeTanQWVKuYr3TCZAfpCeo5RLC5y5SL_VYmSiZ4dxPGgLQkzDF1qZWfWoDKfjqIizrN5_db41C6c1nC_RFWvLr9w2SE99pBtMkJ9lDkK-cmRAp5_N9lFCOIZSNFPIeAyRdOcq7ypNY38VajiLE9uSbt5_-N0qebrUOEA2HQg9c48UY-be35ZWqPKUrpeQOrqcNfr3VbwCVCd2Okg8SuZTRa4ujk82XRCPNI0u0qSXkklCglACyNGd-FcXLJlEsztF7H3LId9EUQ1wYmVXg71YuspQfB-y2fDD5IHEtpbDgPcWgRblcg-j0isgKNfYoUKPLBPGrGS5gQmqMxomYruDdVh7WHu2mebnX8ZDGJuym6xDQPjSZFOPp_NEj0qsyINVBZFCf35nLUlGXipNNGWXcZmHArt3R1PbuXxEnxbIu7uHn_dT2j-owkm5Nz94uId5NYAvwMgTKJd74U23rkUVhkOHQE4lhuX0c8GL2IoIzu2wFjNgHNWGP9KSGWuZd06zAqFcoqEu-WJ25STvQRnrvv0ZoYEnPVa_qcNZeiG4OI0hhIHJf6l2HsNwO_cCoPzwyaNWxU-pRePUCZM4FfUbrWbTIfMSICX0V5OhUBMtL_aUzvtprvB1_nLaguY7lf4uX7IikLuB-cR3XaEUa2K86XSeTGTnx0Ru9QQpUQTuV2p8yubUidecHz2jMN9kBPq91kx4nCvj87eDswTaN4oW86sPDnr16KWs-QqZimOXyNtHxpbY2NLE2yLGTRDSLNKzduunbeFLgJH78soMzMBa_DlD6__Z1wu1d2i0hMVrPs2zMdk37X-fu6yUWsYJfB_MZMXNchO5k-XXNkwMzk0t46ZMk98hr806A8RNORTUTG30PJ2tefADY1cITnMt_9VnvkMICPEhX6AurEl14hGna_IcVT5R4NzntQYlSGE5W3wrggV-ujbBLirboKDy5TY8IsM0ZI5VmK2m9cnicsJDtQGvXvGRcZ0pcjb00f8sBBg7ayzq0OjujGuLDfKjcV-hmpFfmH9nV6mPuZXTNjijm6nH-EYCSAXgTMfEHmMly1DV_E1B1g2kzT-gbVE5JsxESh5sO04yMWqCb7PlYrXkbtQHVEwvlAwIR4vfNhr721_hUjAdx4qefSeDPvgZwW9MTGf_0h2rhL46pA82Oku1iejy_eRdMTJ43ESu5BkD2667erRRvqy5chUJzQbogZs_ktp0-2WEwTwNqBQS-4QHsi-4W6HKhoTeGDV11oW6MtXANRIYw3-oTlMYz5Cfm3TvkQjgbb-REPdtrkrzoPkeAkBzPtOJ8VzQb8BaA9o-57z7ZQ2qzWbMdGrPNqp8gQMq1y4a3ZZHSEqW5pEu5ukuLGO9Qi53If9UTTmlHtPzChbdT3x4SjaZ4aLLUPDGfIeLOt4UQmt1_7Fphkd0igLE5Mb1JWgm2_d_cqBMYXzVZ6tMww7Gj_7esN2tKkg43f4-g2FYQST0OS2l25bgpF5duSyZqjV9nX_Q03eFjKjUO8BZl3fb82wUPct_FZzeB3WqufLJfp-hqlJJHYTUurHI7eL87DUnv5dSKfo3raFyBhJw_FZhXfm1Ifk64P8bPzI3EnxbIeusKZduK8DaZU_NV5DfGgH9rmjS8CjfOPjEmmoNYpk0A2q31axhLYqthWqrLhr7UB-1CrYniiWq6nCOWxnIC4JP3rE8rIBDJU-eRG5yBN2yKpbDuUuao5cWGU5dMHzu_Qh1QeIgTqK_nRvPGqgi4K3s6NNyJuRNhXVTvPcbXCwitg714kqDVvzpAmEzAZ1bP7PetUcWpb3BDmgJzPjTlgACdE0Iwk4w0wTfvzWqnfowRfChRmWnHashAKn8MHwnBhoEs3JVVF-GgS7RtIhaEQfDmXuVO2BbFxA3KqUaJ7JoFkt_yOGxO1sPc4UoxHVzrGqD3nZe1xX3KvU2nPSjbYpgjYn0585NcJLIxTg_zNxYWzbz1iVcNbKDx6ozuvZ5zugT_qjY89Vs6Id8sH19KVb-9HMpCCdZwDkpRd985qy_KFbqXc_KjguFZVnI9mDLvNT2fz1YaV8Qayq4Qkz73rpZ3Q3bUy-4Q3RgKVkASywiXporTsoSAvix1NinNr9os87tsbqP2kTPhQsXCFT5tMdFmq8IAPdezj4THWkSOlIQcEvBrcin9cGGqSm8YnKQVLHj9a8-LTKOATzqK8z6JPy0Gx0GOPCzqXHLHohBpul-cSGIhpk6Jyo0JU5xeqesty9tp6pimMj5zG1d7v8rjhaDZMNAcmrj0xhmX4BD7Q6AOn2QnP1WdRSfiLI-HLuBndUJecssnREDHEmoiSjrKT_t_Ps_wWhJoLZrzhhzTYzisCvPqAZ0kt6WpQfwrRl13br01UvMpKkSJmuDyyXgsYrEObyvuTK9HAlaGK33Cx4xs9QXa63ec9_If6vGc5aJpBYZvYZ5z83RGuxn0I1aFxinrdUFnCp5zs_fAcq7NZQ-GG7j3Gc_BhE5XVbUUmOrx3fpRb7sVWrlNqER_9jq3TSFvt6mbF10_o7I6INzz6IdFI82QbB3yi0SPl0quSjH2J4EYzBhxP_0C0AhDGjsEmVdvN_Gr96tmvbTsI3lJLStwNuEJgxaQkWzQakF7GUXbNDGJdWW-dUiOE-OzvIcuIULO_I6W4c0zdQA9nvy8LC4QinJUrld307_BovZxtVTOeoC7BtLTdDdir3SKc1goVvGWV9qiMo4dEdDVMv40enz0jFuGMH0vMNem1Cr1q_jSOFC2zGEqzOFxal2jniRvcfnrZi1MtV5WDfc9PxdJ_LD-Jiybjhtsnn-tX_uP7oCMUkdHRhx8Oca5rPoDHr4D3n6Uskl9PvzgM0weZWadCxl0I2ZqTMJpgLuvreoey9Mxkl1mex7Pz6zUoZpKFWdswMrvTp01XzCTgalEYHmBUvTCmzQwnIUvm5TI3ne3G3EYytgMS9Rail6lzyXNax4CwBut9ReMq-VKfgY6d7WIS6HLKtu0LuwlOXIDTR4CPb6U2Yz05lIAnVDotSW63VbH-ViphFfZ5ZInU83VNkwy4wK74fF0AmCfPKkl6bGBJUJFBl83SBcNhB0id1Ysl2-fU3jazC3iDdilN_F5eA90uFjVlhMtXoJoP1Q7-2OVJRYZkKHSpPDaiVRvLW2iEFafh2_Q9KbYt_F3m1B1Li9_evOH2IWKBkN4KS9lZsr5rl2o1P1TVI2MmWWhmnqNhrtx6AnORYvM9PucwaOtzPK13vKN5HCVLgDE0VspJmaHnOZgfa5WHdGA-lJhOsz8C4xBvz33CcwJ3yHn6s-4JN-2uRddsxxqp5JfCc2hWuJsn9PsqP_otJu8AldaBHC-n2AXt86cfXKoLT5UTTjhb9LNIwlQCY4XkTq5sEIqxqziWvQ6RBB5qd0MIV6ITq4ZEp3hss0Tz4-Ah9N-aWJmtYuZ3UQ3ZHuPomY4cnM_JZbnZuQadFlE-V7fwL_RxHwNNRRt-Z5m-n2Df77oR2_5GPkU-EMOUEE9hAMTSioZA22IagyeH0aGrQEIW54Tg2Nq46XrThTgBsluyJEG7VS-vKfNEFZswLRdDyF7D2bHyVqAPziWiIuiIzYWMMLjo3FUCwsbxeYo9l2-O-fkW7PsyOWTpfMEn98bsS3LFkq8uTbB7QmopHa37_Bw9eKYiUS0b4FjcKqhq2QPY7fjIABfY46_U7R0HjTEMsZJONPXScmhkJvDpAq_zsZzOZ9T2VwvAafNKJS8NoY6NJ11uR-mhKhN3bODJz99mdWCidTF9BK6LreDAKco_obIRQEys68UyDBv3_IULNhnm59IrtqTf1cive3ty2WjXrM8MQCbJeR6wvtdjSbH_o-p2yHZpNvVoxqva_yJjBChxSOBt3MnuH-Lfr5Ke1QnquoZ5ucRKygztVO3hUiNBiBQpimuYldAW-cITTtD4BejePB-C1OfFcvarlWhD-AUbozslyQlNOLi_ttHD9at4gBnmycf6hqXE7ncCaTzmBFF26fs8CQ3BCL0UdeCrVP1kCHPu2JWs4C5pS7EnNhZUgi9umPpHE5EJie7ePMgJk2UpGvwx_jDG__pTHtUNNE9maTPB_AmhnB7Ee2mqZyxUH_iSOjqDdscWMFm4NpRVMNxIQjSgOwtGkT9qh0YWEMJ0lkpx_Uxa_qtKtSEd31lBilUmVmaPIHUm_iriuUYIPqOhGVzaPMiupGwfRtmUJZ9ca-8QEuQ7AQ9ru8MccGc_1JqcMMJDt50ZthKmfMuqKvjPGDkccvDDUyoSANE6mt9zagd1JW4mrd4K5iVIFbYnCXOfj0Rvjgz2PmfjWqNOXXvYar1TJsBQgyrEoUizzU67XWUz2aRwGWneYHUrt1_mjwR81fTa3-TiXy3bTgA4JkVhSDBzX-ZcMwayxL4Z7fQNB3Wmn2lV8yMjLq6ui9Swbm5Zwwfr8kB8uVsylEgGisZWt_LKyqjB5A7ChS3Qhf846hyaL-ZQ4okLkEAhWlnGCVjT6GZ-qacMH8S7h3fy5D2HhMSdjEUm-rN5LcsMMva5tquRlDDnh27-SLXrgHSK0boaxty2LB9nVvDcLiyDsxbClNOEKt_b1hp9mOGJte_zO62ClTU14e7_8HvgGyzmmWS8gD0G7S1-MBFAzKILLgk7BRLpm6RWuZnP0CUaTDSlVJPM-rWxordtuUAgKE4ZHl9e-D16V2AFHstE2Er4-jayyH14D6apdcMTot5yi0kLf-tQDNezypQmP_tvI6dQ9taHquVWSLrSG4_dg3G0x7OJYQRu4KYsoQUzdugdtAWmvLt-HpVOibzZ6GjcvQPKAxLbKDFkxcbdu4SOB3fseQfmBb_gevq_5YbUX_BpncdrX_CTeUeMt6qHI0Q24r8jJjuPV_Zm5gjmIU1fNwFqwQrT8UV0KF4ZN8TIpaxHit_BkHTI1nI5V5tl7ulHG_XDsCrSaGRvgn-YmCt_KfNzksPC-bcJngUIBf_gVk6WQsTcN7oeyeqI2x6BmEiDkbtrBx8SI8muc1jSew5pRJid1lHcSyJ8OSQfgeIUo6Nyt_N3nEswJz1TYM9yD0sT1NbFMkgIXAMJnP7xJe9ukIy2HDCTGUEGHFiXdAI5J0lhhBNqwndSn6s0HMwnIq8MtD9mAmkGOxwh_BOODcdikHozlNUpzy33IRtRRNI5gTSE61yO-jZarbH7HHq_7roMCdnuCXC8XUUtN3dwGEu3Td4yTcOdaSDHKJsVhVLfdBXCdfOpNU2dwqZCVDcz8iELBGIkraEWX9K78ngO_3dScvbtCv7FcCqFPINmVf5BBb7Es9GhC9biWEta8dtMSq_1MNug2iAjRynRJmauxjhVKTUC3xsdDpPwZRXAhFKJeBr7pXBNL6eMCGze0IbHZFAwUzB4ugJYudL6_x4tgQ1xH6zUukgVpyScmVwiAt-QpbBn2Ak0pPZPynqQfra8FO5H72JTSKwAHJuTOC0sU6iZpt2ONgn9TofHcS-ohh-dae9KGChw8QcerfsnREdNhBsV6YQXd1U37IvQGanqKyl1oEUA0rdzYdIHArFTzB7w3PdmnjqnvYMuhQptAXMwfgrzGolWU-XqJh6QIKlKhGav1hR-sbtxiN5q8xQgwlbfrY-lT6hl11vQClp6gTNA2RrNpGmcCloE6R0cELGuT_3PYn4F7YCTgr9R0QC2n6gzKlaXtnJLaZAf9g4L8URbTdIUQtZaaTQMLHutD_Hsgs67suOChUTM-3oQh8OIL7AeEAW1EMBA1LU-nbjATJx6By1AJHfunKXnPNqwxkpktuCU5bThuAEANOG8nEfdcfDmL0x-MwN8ULCL6La0b1-OqPUYlP3oSer18D30P1AsXlR678uRqMQVNBmCwibPxhnAZsTFlZvtjPAMqq3xa64vgv4hqJCag977P4eBWJQwuPW-UpDQI6bwHoe32sIVVNTJMt9M-fIF9E545OMFyvYfCmWgr45zHUw7N2QcyH0hfBJaC2hRnmxdMvcmNxcG6ujJmCA2Gddgxbg3IJVSs6m0W5fwu6z9qGobENCPqKqP-3dvRexKamTqgVwYq6wWfHRohqypcGhCOsxyyM8ae50o-pFysRDGoCLWmWRKR0jTsP-rRuZFRU1J2ov2gPR30tK1MMQfS54pV8AjyoZCcikeqN-vJDEfRjtOQX3SmWgPxHz7F4nvRBwOpJ7WzDp3Q9w9X1y6fcOIMWhbBtH2CyZmrl2cw2Cm4dPp4lpx5-IF_5IWP4MeOrnweFAPbyla5I4YzfxgGn4q2LlzIqvMzAEGAjBwdl_V5Ncx4pv_x2fdMnfAHUDyzTOhb9-620Y8iAuI_oxMZZPRbSzqm7wToLTF4tuN-1wvS4_z0ETZdYYMwamM5GFvB1eFY7O7drG1h4_UyhJFk-tR0KJkHync6S6obcphI-aQ_3xRujeYvs-xNdUaDCq2JOQj0D9zPSNhqX2ncgkxrj-EAGUrPY6ReWqPa33VOIJk2aqxw2902UDZSYmdtjFQYlA5HT-Zyi-u5neVfmNPa5kTfIriPuVTa--GlB4uUex684zXnQ2mkSSHLCRoPoY9jwRx1ilpw45gmxNAjecFouQuWuB3fih2tu6XqGrk4i6j1XipOckqSM7fuENJo9LUahxAtI1z415mNoL6LYECuSwPkQiZod_dawHHb8Ch0uRy-NhrxTWF-F8vhXgb_3LLUVs0jhx71vKXEi22YfqREUSycwiYbsi2uWuLt5uryTQtPmObF1XQmM1f9E-k9yvQXQDtIGuMEsyPJl2NZgRd8RBA9D-VP4PV2hv6T_x3CXuZ-yuvmhEc7_RIqj_Fej9OjwCqa94MmqdzxSwDOKsXtYfiQSuT7zm33mF-2L_wqxbYGcPn-H5u3DN7_hqgB1Va6h_GHZSk3gt8vNMTpPK93flOeCwBPslLWbhL6-4uZ7kv3C2JvxTjgakEIrW0Z-SdddLUhmj5KV2iNUukDPCnkjLuRZA1Q_tNerZCrhVHqnMyAdfwih0iZ1cYI-K-m7xbxq5QtW_Wl0sJuGxO6t71xgm7hI0tCx8h6RQcT9zoj-57WsF6QCO8LyIWZrxtXSnMw6GN-Ba8Ps-XnDLQIQPb_22XV8gGAsp0dhwWwm8Wh2LLxtX6CQuDVan_kK3w7oJa0lgZkzVHFcHSJw14a7J1XF9fyvmzlwYlUYtR9XZOBnCivcsWeTcCJd8pyVNgb-V7ylApqulHCT8ZnlKSLLji0Dt-DXtnMOTJcaEl-0Jza30gtNAf_59jbYcW80Mhzkp9lga0x76GHJ_8v5Ax1CKaYh52vhjNrc2C_6TqURveJv03Y4BrKnHyjLKpsdlYNaVpPmMiBMTtZ8byqvGsDWhaxQaNAxT5_QPLC6uz-i7UDpnqh-hlDEG47_w25wWlPFwD1s17zFnk3VjiW0P93EBH8EDptUnK7t8uJJ-kuPCDZWJXbIuSBDfM6Jr5rczv1Y1Zn_QND5YIwoAR6NeOgbzpWVG1tVqAQlNtwhAeZiHoiRGdy32aiN0SY3MzMdF0LoYOI-l5uf0CjMbcQw-FZMX3z0eaQamgDS9l_n9yTPmipD9CibopxyCKwvI_6T7oWkrPS8RRa7AVn5K05ZO9y6ipo-7Z8KeilLCf16RrQON9rHauQcwfkDfXO0N4VHP3eTmJDjpoRMhM_GsgVQ0a5MfU-mW9wa_PCFH9Qf-AP6-BpQWox7lnhUMJN33sW4ZPUHmtB5kJnOSzRbMYYM_o8Cqgqyh1l0lR6iBORW-5dFzIDmoEnYhkg3XR0cofWpqxvw7qeE4EQvk6mLTyeVCPTnwalQsdaEzo5PcAtoqO_VAUB7bbD4-9KkbdVymXp9jZpAzJ_kqPFoYkq85AXrBkjKzgM_7aPJ8A4YRa83Jz-xFnmYRfbbAqYOHTkj8OJo_cC5CbYYnyHO_egKUeQA934yEI8ny7o2RXEuRR4ALLR2riyd4OaN2eKNfm19Ta1BaElaYUJ32CWY28LK0JLe1ok54yAr08YJJJGlgPItoewWjy5zEat0aGssXuBqtOlJU9z1mrqe0x7rchiaqDTuC4JzWmhdVeTi6YWtHxrGunEnXNTg4nmx7QDpTIM4N5dg6EfMQlcg29BGrsltFwn8k0_wtXJXmCnSaM-KqAxk2NwlwLKKSPyifeWNb3IauyBjAUyxbllo_Nt4oWPMHnY1-66rvlq3a97RrqS_oudHP0pVnUw7GsfkleWs4a_y444ZMCO_VDu6ZFtJH0C2dwwKebNJ7S7bX5NlJhil3FeAKML8sbyIpDulq5XukKJCWgeF78_zeVOHZiyoWdYcTt-6bOdXm67I8L993ZDdloFu_5-0bXRu_fvqn2PenaeK-qA1wfT4GcQ7FAhXSwlv5JGnSaNgfXXUkKfc12pb_Ma0kqfkSj8NTP4VfMiiMJBWIVnYDa0KsNmL2N9A5xYVlD9QH5Ahz9SpDNTN9LigfyBXIrqEx2IwmUnp7pErmUXp5XLBhF3RQ7UDbfzZU_xhT-I4Jb4hRPOexTp7xAeILUa2G5RZcyNaqHiHaANbA1JsRwiFUW4s_bdHrz4YV_OXBd0hGWswaaroojedNPtAPt5HK07gs1vzzfXlCZ0yrDh90Igmp5LGkGxGliMD14CT4xSkr_WQoEHX_PS3ibO1xTv8f4na9i3DPKNbNJt6z0FbPjbU7Q_JANf9MaSqnnWEraMGt7UOs9-LfLrFK__oXVE7L9Z1NSfzc--_1a--1_MLOfvvgxHAyRQzi-xrETn6aVmS9qumxaxt8jAAXF1d8_zEj4KUL9f_bLJAocTn8g2YYInghtGhENg8T4Mw2rVYzmoHDrQTc5m7PiTeW2oPcOeuYNA8FCQVoZ4JJ_7TCWsIUKKiX0zsSXHTVR2m4uEyuoeXwONdiJI71qhorXjABi1rw3TY-hkIwP_D5VUEzZxg1yTFVN-M_um-cPQRynVCfQQdqeYCflh5WJ-1N3dv__DeKebfDPMsIP6gWp076_Fb0ADvuMGMc3M_PGOADobZub3LuYw-jjEEJklxTd12jhwXPFeMA1qX1X88G76CA79EpFPmcunQYJJd8uu61EUirI0yE-dHHag-lyOa8VpVph0db2SYNVaSaQYHhTQpS25tdLthnfY1Xy0B2IYR1wEr36qpxmuSnDHOMbwJWPzuV7Uk-hTTxOknH2_qvBsUPDAPLmP1gXAOOIp02X04XMDjpiO-uVFerOuC5NL72guFS5jncr55f6iDYI4zJfTjA61U98_aYZo9uEs8Y9Ths-260vWDiOA-MO_l-N98aBq7buhzrq96LKWYPn5mAaNV9VjnJOP1hu7ZprldufQZMeaRp6Hc8Y5McgTZT7SGzcmcNVIXMymVa-jK0F_wQrDUL2_kg3cOWdOYnKgQfz7JhZ5XKmo5RJRlrLFSe79mmHbvN1wwBPFKfgmiL_5BTNjbkRE106JXTw_GebpkaJHtgDic2UBL91i9FkUDd75_X8hMWDzQjdGJK264Ho2MwgWrWnD43gdy8ZFTVH_5DbPR25XJVSHqlYL20EffV6rWc7wgAuvmmhhqefZYb6baFQih5q3YdtPQh0BUBqjtqzXPLJVbSq6792XbCs657nLDMsAo5YVZOhUh6M-Hq1MSDSUCIO_xe30WG2fcLc7w5ScIAarrZRBvaKx4jlRZdbAW77IHxOrYGuksiRVaFFMpPJT9SufmGE2Jx5q_QqfcPS5Wpw3VOkVSahVwEZrRYF2NQ0LUD_sJaB2uEWdaRTXynBpMyq1JwbJDYfKhGRgJKI0Pe-PF3F3CQzT_ZiR3DKSsOxeHxcIQTPRIcB8qJUKU4BGUkSn9sYzcj-4z77de7XFJ4hUAfZJuDSQsX18XBJfJJQwIEbdKFMZflZewVYf96oAIiBpy6i61CpzW7lJ2qh6IuKGk9134p6C6HHllHQc_8bafq9ATnB8fOzMvWZUClSpXKqlurc1CsP7SKpfJwmmhXMTPqKyoFUbmiSHGbGy0Rneo6VRkFzTcnOXiiHjMz5ADYpreEbcvXf8MQdP00YcAapChzZsnHV2-tiDqd_uiVa8e2THeRiCpY-88Yyo_vwzggI4JJhVt-7LRgQpn0Xa9NhMlPCXikRrIIeMM5lCBZw-JyRTIgxStRBP81vbMvEL1zE5lGqqKZOlQGUgfkVzy4CcSKCYIeVoR4E4wc4W7tPqtDcZs2Fn4lp3B7JTVaLoAgFXAMF8MgOFOpC5O52TlNfZgJc8ezrC8GgrJHtcCJkpzVNU-4y-tnxA737mnwqDne85utyEVPRn-75lRLuso3fX0XqPJ_-RiuzZqA3jSZSlVjaAQ7J1w1o66qNPsG7Yekbd4ffCU8LTVVZA2Q2oAClbmHrWJya8Unj-Loc-NvfYuN3rgetnxbPVis-xPiEdy_CraDKkr10MqSSMqsKGOVazJXolG5lCGaZDzcehttmewOHqPPwVl6Lv8q9dak-4XezFcPM0a0zBFr_VgJKZIJyB3Kqk4P4AoyeNRuZtJV4NMIJX3kZj6C9SQBfK0nbRzEOeha2pLxpp1cuSYKD7zHA_hT__kPG3Utf07IonNExkFxEa4UwAeJCg7aoUrWgtCEW5xyI8NQPPLmOYkljaHVy5UhTxQAV4khwvQ53WRW-57sG3f5CyD-TNhkVHuDe9rchRCtr0Vfv099lxzovH5isAECGaZ8HElos4oF5QnbftefLZ47p4Fw_EZKVlzsNLaGOjC9pBQHZjPw0Kb9DYXTGPYX8z975jQVUegKJY6mjgRAuzKxk7UHJAg4vYdR9qY3lj6II-CdWUaCddxvLGpqKT5SXpWY3zDCcTcSTTU3jNa5aBwQqHqkgsSBvGRblfdrNFWCul6_zyeNYriUidOVuSc4WyrALMRvyZOLx041a-nnXZFQu4pko-b2WCJvD80AftJZbJsrWlrnjpGgmyGYP6MMVgSeMygUzxvWeydBiD9iTpeJ_hv1NXNzXDHIN5DlHIca"
            }
          },
          "time": {
            "start": 1771213040512,
            "end": 1771213071748
          },
          "id": "prt_c64862b8000126zroskb9FYN6Y",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64862155001Ues1vrnSXRm4I6"
        },
        {
          "type": "tool",
          "callID": "call_AQOZHPTgQBaY5A1WyPNZcrcL",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n@@\n const CONCURRENCY = 4;\n@@\n function decodeEntities(value: string): string {\n   return value\n     .replaceAll(\"&amp;\", \"&\")\n     .replaceAll(\"&quot;\", '\"')\n+    .replaceAll(\"&apos;\", \"'\")\n     .replaceAll(\"&#x27;\", \"'\")\n     .replaceAll(\"&#39;\", \"'\")\n+    .replaceAll(\"&nbsp;\", \" \")\n     .replaceAll(\"&lt;\", \"<\")\n     .replaceAll(\"&gt;\", \">\");\n }\n@@\n function stripJinaEnvelope(markdown: string): string {\n   return markdown\n     .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n     .trim();\n }\n+\n+function stripTags(value: string): string {\n+  return value.replace(/<[^>]+>/g, \"\");\n+}\n+\n+function plainTextFromHtml(value: string): string {\n+  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n+}\n+\n+function extractMainHtml(html: string): string {\n+  const markdownBlockMatch = html.match(\n+    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n+  );\n+\n+  if (markdownBlockMatch?.[1]) {\n+    return markdownBlockMatch[1];\n+  }\n+\n+  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n+  if (articleMatch?.[1]) {\n+    return articleMatch[1];\n+  }\n+\n+  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n+  return mainMatch?.[1] ?? html;\n+}\n+\n+function htmlToMarkdown(html: string): string {\n+  let content = extractMainHtml(html);\n+\n+  content = content\n+    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n+    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n+    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n+    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n+\n+  content = content.replace(\n+    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n+    (_match, code) => {\n+      const normalizedCode = decodeEntities(\n+        stripTags(code)\n+          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+          .replace(/\\n{3,}/g, \"\\n\\n\")\n+          .trim(),\n+      );\n+\n+      if (!normalizedCode) {\n+        return \"\";\n+      }\n+\n+      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n+    },\n+  );\n+\n+  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n+    const normalizedCode = decodeEntities(stripTags(code)).trim();\n+    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n+  });\n+\n+  content = content.replace(/<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi, (_m, href, label) => {\n+    const text = plainTextFromHtml(label);\n+    if (!text) {\n+      return \"\";\n+    }\n+\n+    return `[${text}](${decodeEntities(href)})`;\n+  });\n+\n+  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n+    const heading = plainTextFromHtml(inner);\n+    if (!heading) {\n+      return \"\";\n+    }\n+\n+    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n+  });\n+\n+  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n+    const line = plainTextFromHtml(inner);\n+    return line ? `- ${line}\\n` : \"\";\n+  });\n+\n+  content = content\n+    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n+    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n+    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n+      const cell = plainTextFromHtml(inner);\n+      return cell ? `${cell} ` : \"\";\n+    });\n+\n+  content = decodeEntities(content)\n+    .replace(/<[^>]+>/g, \"\")\n+    .replace(/[ \\t]+\\n/g, \"\\n\")\n+    .replace(/\\n{3,}/g, \"\\n\\n\")\n+    .trim();\n+\n+  return content;\n+}\n@@\n async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n   const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n@@\n   try {\n     console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n-    const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n-\n-    if (!markdown) {\n-      return {\n-        url,\n-        ok: false,\n-        error: \"No markdown content returned\",\n-      };\n-    }\n-\n-    return {\n-      url,\n-      ok: true,\n-      markdown,\n-    };\n-  } catch (error) {\n-    return {\n-      url,\n-      ok: false,\n-      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n-    };\n+    try {\n+      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n+\n+      if (markdown) {\n+        return {\n+          url,\n+          ok: true,\n+          markdown,\n+        };\n+      }\n+    } catch {\n+      // Fall through to direct HTML scrape.\n+    }\n+\n+    const html = await fetchText(url);\n+    const markdown = htmlToMarkdown(html);\n+\n+    if (!markdown) {\n+      return {\n+        url,\n+        ok: false,\n+        error: \"No markdown content returned from HTML fallback\",\n+      };\n+    }\n+\n+    return {\n+      url,\n+      ok: true,\n+      markdown,\n+    };\n+  } catch (error) {\n+    return {\n+      url,\n+      ok: false,\n+      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n+    };\n   }\n }\n@@\n     `- Captured: ${capturedAt}`,\n     `- Source root: ${DOCS_ROOT}`,\n-    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)` ,\n+    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)`,\n@@\n     \"\",\n     \"----\",\n     \"## Notes / Comments / Lessons\",\n     \"\",\n-    \"- Collection method: sitemap URL discovery + markdown conversion through r.jina.ai.\",\n+    \"- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\",\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM scripts/scrape_moon_docs.sh.ts",
            "title": "Success. Updated the following files:\nM scripts/scrape_moon_docs.sh.ts",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n@@ -20,10 +20,12 @@\n function decodeEntities(value: string): string {\n   return value\n     .replaceAll(\"&amp;\", \"&\")\n     .replaceAll(\"&quot;\", '\"')\n+    .replaceAll(\"&apos;\", \"'\")\n     .replaceAll(\"&#x27;\", \"'\")\n     .replaceAll(\"&#39;\", \"'\")\n+    .replaceAll(\"&nbsp;\", \" \")\n     .replaceAll(\"&lt;\", \"<\")\n     .replaceAll(\"&gt;\", \">\");\n }\n \n@@ -32,8 +34,107 @@\n     .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n     .trim();\n }\n \n+function stripTags(value: string): string {\n+  return value.replace(/<[^>]+>/g, \"\");\n+}\n+\n+function plainTextFromHtml(value: string): string {\n+  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n+}\n+\n+function extractMainHtml(html: string): string {\n+  const markdownBlockMatch = html.match(\n+    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n+  );\n+\n+  if (markdownBlockMatch?.[1]) {\n+    return markdownBlockMatch[1];\n+  }\n+\n+  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n+  if (articleMatch?.[1]) {\n+    return articleMatch[1];\n+  }\n+\n+  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n+  return mainMatch?.[1] ?? html;\n+}\n+\n+function htmlToMarkdown(html: string): string {\n+  let content = extractMainHtml(html);\n+\n+  content = content\n+    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n+    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n+    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n+    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n+\n+  content = content.replace(\n+    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n+    (_match, code) => {\n+      const normalizedCode = decodeEntities(\n+        stripTags(code)\n+          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+          .replace(/\\n{3,}/g, \"\\n\\n\")\n+          .trim(),\n+      );\n+\n+      if (!normalizedCode) {\n+        return \"\";\n+      }\n+\n+      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n+    },\n+  );\n+\n+  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n+    const normalizedCode = decodeEntities(stripTags(code)).trim();\n+    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n+  });\n+\n+  content = content.replace(/<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi, (_m, href, label) => {\n+    const text = plainTextFromHtml(label);\n+    if (!text) {\n+      return \"\";\n+    }\n+\n+    return `[${text}](${decodeEntities(href)})`;\n+  });\n+\n+  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n+    const heading = plainTextFromHtml(inner);\n+    if (!heading) {\n+      return \"\";\n+    }\n+\n+    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n+  });\n+\n+  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n+    const line = plainTextFromHtml(inner);\n+    return line ? `- ${line}\\n` : \"\";\n+  });\n+\n+  content = content\n+    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n+    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n+    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n+      const cell = plainTextFromHtml(inner);\n+      return cell ? `${cell} ` : \"\";\n+    });\n+\n+  content = decodeEntities(content)\n+    .replace(/<[^>]+>/g, \"\")\n+    .replace(/[ \\t]+\\n/g, \"\\n\")\n+    .replace(/\\n{3,}/g, \"\\n\\n\")\n+    .trim();\n+\n+  return content;\n+}\n+\n function extractDocsUrls(sitemapXml: string): string[] {\n   const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n     decodeEntities(match[1]?.trim() ?? \"\"),\n   )\n@@ -88,15 +189,30 @@\n   const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n \n   try {\n     console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n-    const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n+    try {\n+      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n \n+      if (markdown) {\n+        return {\n+          url,\n+          ok: true,\n+          markdown,\n+        };\n+      }\n+    } catch {\n+      // Fall through to direct HTML scrape.\n+    }\n+\n+    const html = await fetchText(url);\n+    const markdown = htmlToMarkdown(html);\n+\n     if (!markdown) {\n       return {\n         url,\n         ok: false,\n-        error: \"No markdown content returned\",\n+        error: \"No markdown content returned from HTML fallback\",\n       };\n     }\n \n     return {\n@@ -119,9 +235,9 @@\n     \"## External Docs Snapshot // moonrepo\",\n     \"\",\n     `- Captured: ${capturedAt}`,\n     `- Source root: ${DOCS_ROOT}`,\n-    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)` ,\n+    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)`,\n     \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n     \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n     \"----\",\n     \"\",\n@@ -133,9 +249,9 @@\n     \"\",\n     \"----\",\n     \"## Notes / Comments / Lessons\",\n     \"\",\n-    \"- Collection method: sitemap URL discovery + markdown conversion through r.jina.ai.\",\n+    \"- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\",\n     \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n     \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n     `- Capture results: success=${successCount}, failed=${failureCount}.`,\n     \"----\",\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts",
                  "relativePath": "scripts/scrape_moon_docs.sh.ts",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n@@ -20,10 +20,12 @@\n function decodeEntities(value: string): string {\n   return value\n     .replaceAll(\"&amp;\", \"&\")\n     .replaceAll(\"&quot;\", '\"')\n+    .replaceAll(\"&apos;\", \"'\")\n     .replaceAll(\"&#x27;\", \"'\")\n     .replaceAll(\"&#39;\", \"'\")\n+    .replaceAll(\"&nbsp;\", \" \")\n     .replaceAll(\"&lt;\", \"<\")\n     .replaceAll(\"&gt;\", \">\");\n }\n \n@@ -32,8 +34,107 @@\n     .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n     .trim();\n }\n \n+function stripTags(value: string): string {\n+  return value.replace(/<[^>]+>/g, \"\");\n+}\n+\n+function plainTextFromHtml(value: string): string {\n+  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n+}\n+\n+function extractMainHtml(html: string): string {\n+  const markdownBlockMatch = html.match(\n+    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n+  );\n+\n+  if (markdownBlockMatch?.[1]) {\n+    return markdownBlockMatch[1];\n+  }\n+\n+  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n+  if (articleMatch?.[1]) {\n+    return articleMatch[1];\n+  }\n+\n+  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n+  return mainMatch?.[1] ?? html;\n+}\n+\n+function htmlToMarkdown(html: string): string {\n+  let content = extractMainHtml(html);\n+\n+  content = content\n+    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n+    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n+    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n+    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n+\n+  content = content.replace(\n+    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n+    (_match, code) => {\n+      const normalizedCode = decodeEntities(\n+        stripTags(code)\n+          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+          .replace(/\\n{3,}/g, \"\\n\\n\")\n+          .trim(),\n+      );\n+\n+      if (!normalizedCode) {\n+        return \"\";\n+      }\n+\n+      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n+    },\n+  );\n+\n+  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n+    const normalizedCode = decodeEntities(stripTags(code)).trim();\n+    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n+  });\n+\n+  content = content.replace(/<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi, (_m, href, label) => {\n+    const text = plainTextFromHtml(label);\n+    if (!text) {\n+      return \"\";\n+    }\n+\n+    return `[${text}](${decodeEntities(href)})`;\n+  });\n+\n+  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n+    const heading = plainTextFromHtml(inner);\n+    if (!heading) {\n+      return \"\";\n+    }\n+\n+    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n+  });\n+\n+  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n+    const line = plainTextFromHtml(inner);\n+    return line ? `- ${line}\\n` : \"\";\n+  });\n+\n+  content = content\n+    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n+    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n+    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n+      const cell = plainTextFromHtml(inner);\n+      return cell ? `${cell} ` : \"\";\n+    });\n+\n+  content = decodeEntities(content)\n+    .replace(/<[^>]+>/g, \"\")\n+    .replace(/[ \\t]+\\n/g, \"\\n\")\n+    .replace(/\\n{3,}/g, \"\\n\\n\")\n+    .trim();\n+\n+  return content;\n+}\n+\n function extractDocsUrls(sitemapXml: string): string[] {\n   const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n     decodeEntities(match[1]?.trim() ?? \"\"),\n   )\n@@ -88,15 +189,30 @@\n   const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n \n   try {\n     console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n-    const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n+    try {\n+      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n \n+      if (markdown) {\n+        return {\n+          url,\n+          ok: true,\n+          markdown,\n+        };\n+      }\n+    } catch {\n+      // Fall through to direct HTML scrape.\n+    }\n+\n+    const html = await fetchText(url);\n+    const markdown = htmlToMarkdown(html);\n+\n     if (!markdown) {\n       return {\n         url,\n         ok: false,\n-        error: \"No markdown content returned\",\n+        error: \"No markdown content returned from HTML fallback\",\n       };\n     }\n \n     return {\n@@ -119,9 +235,9 @@\n     \"## External Docs Snapshot // moonrepo\",\n     \"\",\n     `- Captured: ${capturedAt}`,\n     `- Source root: ${DOCS_ROOT}`,\n-    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)` ,\n+    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)`,\n     \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n     \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n     \"----\",\n     \"\",\n@@ -133,9 +249,9 @@\n     \"\",\n     \"----\",\n     \"## Notes / Comments / Lessons\",\n     \"\",\n-    \"- Collection method: sitemap URL discovery + markdown conversion through r.jina.ai.\",\n+    \"- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\",\n     \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n     \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n     `- Capture results: success=${successCount}, failed=${failureCount}.`,\n     \"----\",\n",
                  "before": "#!/usr/bin/env bun\n\nimport { mkdirSync } from \"node:fs\";\nimport { dirname, resolve } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n\ntype ScrapeResult = {\n  url: string;\n  ok: boolean;\n  markdown?: string;\n  error?: string;\n};\n\nconst SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\nconst DOCS_ROOT = \"https://moonrepo.dev/docs\";\nconst DEFAULT_OUTPUT_RELATIVE =\n  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\nconst CONCURRENCY = 4;\n\nfunction decodeEntities(value: string): string {\n  return value\n    .replaceAll(\"&amp;\", \"&\")\n    .replaceAll(\"&quot;\", '\"')\n    .replaceAll(\"&#x27;\", \"'\")\n    .replaceAll(\"&#39;\", \"'\")\n    .replaceAll(\"&lt;\", \"<\")\n    .replaceAll(\"&gt;\", \">\");\n}\n\nfunction stripJinaEnvelope(markdown: string): string {\n  return markdown\n    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n    .trim();\n}\n\nfunction extractDocsUrls(sitemapXml: string): string[] {\n  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n    decodeEntities(match[1]?.trim() ?? \"\"),\n  )\n    .filter((url) => url.startsWith(DOCS_ROOT))\n    .filter((url) => !url.includes(\"/docs/tags\"))\n    .filter((url) => !url.includes(\"#\"));\n\n  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n}\n\nasync function fetchText(url: string): Promise<string> {\n  const response = await fetch(url, {\n    headers: {\n      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Request failed (${response.status}) for ${url}`);\n  }\n\n  return await response.text();\n}\n\nasync function mapConcurrent<T, R>(\n  values: T[],\n  limit: number,\n  map: (value: T, index: number) => Promise<R>,\n): Promise<R[]> {\n  const results = new Array<R>(values.length);\n  let index = 0;\n\n  async function worker(): Promise<void> {\n    while (true) {\n      const currentIndex = index;\n      index += 1;\n\n      if (currentIndex >= values.length) {\n        return;\n      }\n\n      results[currentIndex] = await map(values[currentIndex], currentIndex);\n    }\n  }\n\n  const workerCount = Math.min(limit, values.length);\n  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n  return results;\n}\n\nasync function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n\n  try {\n    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n    const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n\n    if (!markdown) {\n      return {\n        url,\n        ok: false,\n        error: \"No markdown content returned\",\n      };\n    }\n\n    return {\n      url,\n      ok: true,\n      markdown,\n    };\n  } catch (error) {\n    return {\n      url,\n      ok: false,\n      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n    };\n  }\n}\n\nfunction buildHeader(urlCount: number, capturedAt: string): string {\n  return [\n    \"----\",\n    \"## External Docs Snapshot // moonrepo\",\n    \"\",\n    `- Captured: ${capturedAt}`,\n    `- Source root: ${DOCS_ROOT}`,\n    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)` ,\n    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildFooter(successCount: number, failureCount: number): string {\n  return [\n    \"\",\n    \"----\",\n    \"## Notes / Comments / Lessons\",\n    \"\",\n    \"- Collection method: sitemap URL discovery + markdown conversion through r.jina.ai.\",\n    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildPageSection(result: ScrapeResult): string {\n  if (!result.ok) {\n    return [\n      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n      \"\",\n      `Source: ${result.url}`,\n      \"\",\n      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n      \"\",\n    ].join(\"\\n\");\n  }\n\n  return [\n    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n    \"\",\n    `Source: ${result.url}`,\n    \"\",\n    result.markdown?.trim() ?? \"\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nconst repoRoot = findRepoRoot(import.meta.dir);\nconst outputArg = Bun.argv[2];\nconst outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n\nconst sitemapXml = await fetchText(SITEMAP_URL);\nconst docsUrls = extractDocsUrls(sitemapXml);\n\nif (docsUrls.length === 0) {\n  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n}\n\nconst results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n  scrapeDocsPage(url, index + 1, docsUrls.length),\n);\n\nconst successCount = results.filter((result) => result.ok).length;\nconst failureCount = results.length - successCount;\nconst capturedAt = new Date().toISOString();\n\nconst content = [\n  buildHeader(docsUrls.length, capturedAt),\n  ...results.map(buildPageSection),\n  buildFooter(successCount, failureCount),\n].join(\"\\n\");\n\nmkdirSync(dirname(outputPath), { recursive: true });\nawait Bun.write(outputPath, content);\n\nconsole.log(\n  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n);\n",
                  "after": "#!/usr/bin/env bun\n\nimport { mkdirSync } from \"node:fs\";\nimport { dirname, resolve } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n\ntype ScrapeResult = {\n  url: string;\n  ok: boolean;\n  markdown?: string;\n  error?: string;\n};\n\nconst SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\nconst DOCS_ROOT = \"https://moonrepo.dev/docs\";\nconst DEFAULT_OUTPUT_RELATIVE =\n  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\nconst CONCURRENCY = 4;\n\nfunction decodeEntities(value: string): string {\n  return value\n    .replaceAll(\"&amp;\", \"&\")\n    .replaceAll(\"&quot;\", '\"')\n    .replaceAll(\"&apos;\", \"'\")\n    .replaceAll(\"&#x27;\", \"'\")\n    .replaceAll(\"&#39;\", \"'\")\n    .replaceAll(\"&nbsp;\", \" \")\n    .replaceAll(\"&lt;\", \"<\")\n    .replaceAll(\"&gt;\", \">\");\n}\n\nfunction stripJinaEnvelope(markdown: string): string {\n  return markdown\n    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n    .trim();\n}\n\nfunction stripTags(value: string): string {\n  return value.replace(/<[^>]+>/g, \"\");\n}\n\nfunction plainTextFromHtml(value: string): string {\n  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n}\n\nfunction extractMainHtml(html: string): string {\n  const markdownBlockMatch = html.match(\n    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n  );\n\n  if (markdownBlockMatch?.[1]) {\n    return markdownBlockMatch[1];\n  }\n\n  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n  if (articleMatch?.[1]) {\n    return articleMatch[1];\n  }\n\n  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n  return mainMatch?.[1] ?? html;\n}\n\nfunction htmlToMarkdown(html: string): string {\n  let content = extractMainHtml(html);\n\n  content = content\n    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n\n  content = content.replace(\n    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n    (_match, code) => {\n      const normalizedCode = decodeEntities(\n        stripTags(code)\n          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n          .replace(/\\n{3,}/g, \"\\n\\n\")\n          .trim(),\n      );\n\n      if (!normalizedCode) {\n        return \"\";\n      }\n\n      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n    },\n  );\n\n  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n    const normalizedCode = decodeEntities(stripTags(code)).trim();\n    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n  });\n\n  content = content.replace(/<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi, (_m, href, label) => {\n    const text = plainTextFromHtml(label);\n    if (!text) {\n      return \"\";\n    }\n\n    return `[${text}](${decodeEntities(href)})`;\n  });\n\n  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n    const heading = plainTextFromHtml(inner);\n    if (!heading) {\n      return \"\";\n    }\n\n    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n  });\n\n  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n    const line = plainTextFromHtml(inner);\n    return line ? `- ${line}\\n` : \"\";\n  });\n\n  content = content\n    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n      const cell = plainTextFromHtml(inner);\n      return cell ? `${cell} ` : \"\";\n    });\n\n  content = decodeEntities(content)\n    .replace(/<[^>]+>/g, \"\")\n    .replace(/[ \\t]+\\n/g, \"\\n\")\n    .replace(/\\n{3,}/g, \"\\n\\n\")\n    .trim();\n\n  return content;\n}\n\nfunction extractDocsUrls(sitemapXml: string): string[] {\n  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n    decodeEntities(match[1]?.trim() ?? \"\"),\n  )\n    .filter((url) => url.startsWith(DOCS_ROOT))\n    .filter((url) => !url.includes(\"/docs/tags\"))\n    .filter((url) => !url.includes(\"#\"));\n\n  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n}\n\nasync function fetchText(url: string): Promise<string> {\n  const response = await fetch(url, {\n    headers: {\n      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Request failed (${response.status}) for ${url}`);\n  }\n\n  return await response.text();\n}\n\nasync function mapConcurrent<T, R>(\n  values: T[],\n  limit: number,\n  map: (value: T, index: number) => Promise<R>,\n): Promise<R[]> {\n  const results = new Array<R>(values.length);\n  let index = 0;\n\n  async function worker(): Promise<void> {\n    while (true) {\n      const currentIndex = index;\n      index += 1;\n\n      if (currentIndex >= values.length) {\n        return;\n      }\n\n      results[currentIndex] = await map(values[currentIndex], currentIndex);\n    }\n  }\n\n  const workerCount = Math.min(limit, values.length);\n  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n  return results;\n}\n\nasync function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n\n  try {\n    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n    try {\n      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n\n      if (markdown) {\n        return {\n          url,\n          ok: true,\n          markdown,\n        };\n      }\n    } catch {\n      // Fall through to direct HTML scrape.\n    }\n\n    const html = await fetchText(url);\n    const markdown = htmlToMarkdown(html);\n\n    if (!markdown) {\n      return {\n        url,\n        ok: false,\n        error: \"No markdown content returned from HTML fallback\",\n      };\n    }\n\n    return {\n      url,\n      ok: true,\n      markdown,\n    };\n  } catch (error) {\n    return {\n      url,\n      ok: false,\n      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n    };\n  }\n}\n\nfunction buildHeader(urlCount: number, capturedAt: string): string {\n  return [\n    \"----\",\n    \"## External Docs Snapshot // moonrepo\",\n    \"\",\n    `- Captured: ${capturedAt}`,\n    `- Source root: ${DOCS_ROOT}`,\n    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)`,\n    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildFooter(successCount: number, failureCount: number): string {\n  return [\n    \"\",\n    \"----\",\n    \"## Notes / Comments / Lessons\",\n    \"\",\n    \"- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\",\n    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildPageSection(result: ScrapeResult): string {\n  if (!result.ok) {\n    return [\n      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n      \"\",\n      `Source: ${result.url}`,\n      \"\",\n      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n      \"\",\n    ].join(\"\\n\");\n  }\n\n  return [\n    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n    \"\",\n    `Source: ${result.url}`,\n    \"\",\n    result.markdown?.trim() ?? \"\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nconst repoRoot = findRepoRoot(import.meta.dir);\nconst outputArg = Bun.argv[2];\nconst outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n\nconst sitemapXml = await fetchText(SITEMAP_URL);\nconst docsUrls = extractDocsUrls(sitemapXml);\n\nif (docsUrls.length === 0) {\n  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n}\n\nconst results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n  scrapeDocsPage(url, index + 1, docsUrls.length),\n);\n\nconst successCount = results.filter((result) => result.ok).length;\nconst failureCount = results.length - successCount;\nconst capturedAt = new Date().toISOString();\n\nconst content = [\n  buildHeader(docsUrls.length, capturedAt),\n  ...results.map(buildPageSection),\n  buildFooter(successCount, failureCount),\n].join(\"\\n\");\n\nmkdirSync(dirname(outputPath), { recursive: true });\nawait Bun.write(outputPath, content);\n\nconsole.log(\n  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n);\n",
                  "additions": 120,
                  "deletions": 4
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771213096544,
              "end": 1771213096567
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0c7c8a6f5bc3b721016992910fa3ec81909168671d8b0d18e7"
            }
          },
          "id": "prt_c6486a589001Jivhchnnhg7u2C",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64862155001Ues1vrnSXRm4I6"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "65512a0af380c5c49d1e4833c2b9e482ffc870ad",
          "cost": 0,
          "tokens": {
            "total": 67338,
            "input": 3694,
            "output": 3996,
            "reasoning": 1908,
            "cache": {
              "read": 59648,
              "write": 0
            }
          },
          "id": "prt_c6487067a001k0Yupnos5J5YYl",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64862155001Ues1vrnSXRm4I6"
        },
        {
          "type": "patch",
          "hash": "0078d4e53cc1364054c37f47ef8616804a7a4271",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts"
          ],
          "id": "prt_c648706a6001frMT0FMm6axxX1",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64862155001Ues1vrnSXRm4I6"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213096622,
          "completed": 1771213102028
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 67579,
          "input": 166,
          "output": 213,
          "reasoning": 42,
          "cache": {
            "read": 67200,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648706ae001Q7RZJ0lV3KASi8",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "65512a0af380c5c49d1e4833c2b9e482ffc870ad",
          "id": "prt_c64870e39001dlCG2ojwLL4GTw",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648706ae001Q7RZJ0lV3KASi8"
        },
        {
          "type": "reasoning",
          "text": "**Updating documentation for new script**",
          "metadata": {
            "openai": {
              "itemId": "rs_052a0920b1bc45b5016992912ad88481969c5ce31b958e41be",
              "reasoningEncryptedContent": "gAAAAABpkpEr3gouKaioo_jT5c6J62VPbvlOtC7YOHyiAuUFuRdC85_lO3MW_c3YCQxCicRcOz0DdsVXssFvOUaI-NzjPSOOLLDzvKG_0dxhJOdH87Rf6lkylSHJhCCa6Vk9u8lyxQBB8XEKHRDCfK0Be1Zq-C_pP6NCBT_dH7X2LoCURAUOtonPT0E6og4tyfy9K6YvSD8yKI0gNOiQGsDlrBo17scMzRPtc65kDwy2XV5s8TlbAK-BGtyR9Eq65VeMsDiK608LxRp7tXBbIRyO7LCW6YgYUhNZsY8amrNQcQyQLREfPY0C39JeyE3ECA5ihBL1imHjtqrR40lU1nIavX2w78EPf6jgt-hm2vzp55kw1fGidWjQEF2BRDy8_VAXkrx9_sU77rOSsHBR7LE-AS3Sv_5ZMhmyl0zV-yAEKcNIS_IfXb_bXOFk3LBRKEg28_xJuH9vZKYYgIMMthFh7zYKbh29kDTcnjXxV6uez9QHK30fDxvBy4uX4hFwQaiRvUoHdU-AV7pHInBy1gzCUFXwViWCki57iAAE-39Qp7lZUtodIGVtKOXBUqxeIUDU3dO57v4W2STKi8AXmwtCMRUx7amVakjTUFpBahlpWtPXPoEBZimLURkwRERzzkZwHQXU4pt54ptc4jRrDUj8kt2SEV5-_dDOHhYaDcRfwQg_gGuVWLLpOzA_DM_yEk2m_q5JID2_-8FnwM0rn4jCUDLEOZI2n_cqjCsys4vEFj-jdHyRIrqW4UPJYXy9nWXzC7R_6hyIQWM5w9p7-a5diyS0u7uaG48rkcQkmY2PSqwMQCYX-TwquVWaRbWQcCDx9CnrXud1lFG0sIQdFse2Kp11RJ82T2sQDbHJ7O-WKl4ZExM2Puox-wtbmdMPZaNn9pT8eIalIVNfqtf1Ck2YbCeCvIv7eBBhKLkltlUEqyCZirmdW9QmzmwMzzTCibTm3PZdXPAbYJWS3KR_EQL5SOWCo9kTB9BgQRNkdyfyV5alts7sNwdTAWlbMnykT9RKMztj2Wz2DjFn_hoLck5Rhrz74zzFIYkoE8YwreXhwTX9p3rANA6RdVMWDyInoenSo9KlpmT6"
            }
          },
          "time": {
            "start": 1771213098932,
            "end": 1771213099980
          },
          "id": "prt_c64870fb3001rNkRxjbOGolWVu",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648706ae001Q7RZJ0lV3KASi8"
        },
        {
          "type": "tool",
          "callID": "call_9AkzbqhpsZhsKKCXN2hUKFTv",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/README.md\n@@\n - Shared helpers live in `scripts/helpers/`.\n - `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n+- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM README.md",
            "title": "Success. Updated the following files:\nM README.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/README.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/README.md\n+++ /Users/alex/repos/vfp/dark-factory/README.md\n@@ -37,8 +37,9 @@\n - Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n - Shared helpers live in `scripts/helpers/`.\n - `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n+- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n \n # Components\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/README.md",
                  "relativePath": "README.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/README.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/README.md\n+++ /Users/alex/repos/vfp/dark-factory/README.md\n@@ -37,8 +37,9 @@\n - Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n - Shared helpers live in `scripts/helpers/`.\n - `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n+- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n \n # Components\n",
                  "before": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
                  "after": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
                  "additions": 1,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771213101944,
              "end": 1771213101974
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_052a0920b1bc45b5016992912bd80c819684a2dd71bbc75988"
            }
          },
          "id": "prt_c648713cd001ooCLBpR1MEO0kO",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648706ae001Q7RZJ0lV3KASi8"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "1f4e0adea3d4664acb7175240e4b250c128fa9f0",
          "cost": 0,
          "tokens": {
            "total": 67579,
            "input": 166,
            "output": 213,
            "reasoning": 42,
            "cache": {
              "read": 67200,
              "write": 0
            }
          },
          "id": "prt_c64871b98001dzQXXY0hAeOZmx",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648706ae001Q7RZJ0lV3KASi8"
        },
        {
          "type": "patch",
          "hash": "65512a0af380c5c49d1e4833c2b9e482ffc870ad",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/README.md"
          ],
          "id": "prt_c64871bc9001SRBs4bQxm7ewiW",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648706ae001Q7RZJ0lV3KASi8"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213102031,
          "completed": 1771213106641
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 67761,
          "input": 144,
          "output": 161,
          "reasoning": 0,
          "cache": {
            "read": 67456,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64871bcf001cI6vhZq3dxlfyR",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "1f4e0adea3d4664acb7175240e4b250c128fa9f0",
          "id": "prt_c6487234d001axvZ3kVDLd8VnQ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64871bcf001cI6vhZq3dxlfyR"
        },
        {
          "type": "tool",
          "callID": "call_Dta8WVDJPiW5tJr6r6ux8J4u",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@\n - Shared script helpers live under `scripts/helpers/`.\n - `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n+- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM AGENTS.md",
            "title": "Success. Updated the following files:\nM AGENTS.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/AGENTS.md\n+++ /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@ -74,8 +74,9 @@\n - Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n - Shared script helpers live under `scripts/helpers/`.\n - `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n+- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n \n ## 9) Keep This File Updated\n \n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/AGENTS.md",
                  "relativePath": "AGENTS.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/AGENTS.md\n+++ /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@ -74,8 +74,9 @@\n - Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n - Shared script helpers live under `scripts/helpers/`.\n - `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n+- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n \n ## 9) Keep This File Updated\n \n",
                  "before": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
                  "after": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
                  "additions": 1,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771213106528,
              "end": 1771213106541
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0d27a5ce25004fc201699291304e548193ad1f84f5088f2c1b"
            }
          },
          "id": "prt_c648724cc001aTwO7J6ZFFt1Oo",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64871bcf001cI6vhZq3dxlfyR"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "7992029e5998ec3dc2f0e370de893aaf9e2fc6f5",
          "cost": 0,
          "tokens": {
            "total": 67761,
            "input": 144,
            "output": 161,
            "reasoning": 0,
            "cache": {
              "read": 67456,
              "write": 0
            }
          },
          "id": "prt_c64872d91001XOMMZ0Pwynq92Q",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64871bcf001cI6vhZq3dxlfyR"
        },
        {
          "type": "patch",
          "hash": "1f4e0adea3d4664acb7175240e4b250c128fa9f0",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/AGENTS.md"
          ],
          "id": "prt_c64872dcb001s4Ehj2rinjJavw",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64871bcf001cI6vhZq3dxlfyR"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213106645,
          "completed": 1771213126290
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 67921,
          "input": 67812,
          "output": 109,
          "reasoning": 63,
          "cache": {
            "read": 0,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64872dd5001p3gWfDNT3dwxFS",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "1e56dd45b1817916ddef7672044e41588cb2ad61",
          "id": "prt_c648736c7001BXZuLT59Fka4Zg",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64872dd5001p3gWfDNT3dwxFS"
        },
        {
          "type": "reasoning",
          "text": "**Rerunning docs generation script**",
          "metadata": {
            "openai": {
              "itemId": "rs_08b0a1fd7234202c0169929136c6f081969cad4f1bbd16b84a",
              "reasoningEncryptedContent": "gAAAAABpkpE5-LDe0lMCMiN040X55SJuSzbj_TVBuLd4ewShfIlJxveCTc63hb-MDNS3XkPEx9ZsxriVLagc_ma5j4o0ZISqZjrn0s1YKvYsPuFqnof7K2Uo_YCkA10yN6Vio7LEhBQuarKseuid6_ictwq14UN-A4YrWXzJhQVt4MRRUivkI9_MtndO01ssQuoRTOYmmkv5PNkASiCQE23qrep-biHRT5tdALLokS41M9_Q3vBWITBPvSjiJNKwb95mvqpUOZxdLm3fY5JqgA7u-IA2qBtIIcHQFFNOkbyLHqfIP4SwZdUXZ97n0gpVsgOaW_pba5OTmc1-Zd1c5aHyRp0ePjtsNOdId4oUTvC70rt_QKmv_PKaXA47IuN1VQzVJFsw1qJ3SVmTrH0NrYaB_Z0Tk-hwKPSgJFksPPOxwKTdiIKFEhv2ts-LIpvCH2X6IouNEdUqOb91ioq7QYoHxMGwAisxSENWHsnRcBCbLe3rnuLCp4ufyfEysYLQMPrlHuqTIvE9DSjhC42mlzyrlsLLhxKNxUCwRxp5pHtcMvf6QeAYTJUJfn6R78z-73NbJCFZPNEg3oqL13fWg4go1tlcz4tfdGtB9VGPk5YlkNilqGOQIUHYfrdWb6a7MtgKo3esvgXeCPQkTy5NKpY_l7glIngsd5aSLlgdd5s_-AiwyUc_LzmiZADzDypcgFsuEFV9RiWbIlYm3-DBPComMWHAeBluX31kIxBpSl7--FLCMjZ_UGq8KPEaY_eGvSb0dfvFyfBcvs7UI9sqqLfTMiAhqaeZ4DN10gEWVPpEzFO8ojC7FidWJ6opSJjQ_9I5n7cUzP0vms8V1QNuB20qc62gr1UhUanNDzOXfbFFZ1KLbQ9XLTonRE3ZpIF8X4hzelBEYWuhIju4sJjmIqG8dGowziGS1nYOcQ_mGQ930dh7t2VcymLz5rtvMylOlsvusZVOl91THeEEBh2Le-p0x6Cl9Ur1RCEPlgESJAHcfEuCJwGIw0JG-ZSyw-rAfWgA0ZpOdOE9UQyaUH95NSpEUtQuCAeBjr5zVz2hDsuKlIZ9A6BBXm7lQTcELpRw75upf6pT9n5JbdjGlqBSDvUAMESi6etZqFSTzsdIUn9GAcJtLZHzrWSQSZKswb1ik9FpDQB86IlxhQ2VXpO6STNeN_c3OUJOyveH7vIK5fMElh39fkob45mQttwivy-y2szFoZeae_jm4eZVBSCXC154pExlN6AVJeEwdwJMYCzTF0FRgzUlnVM="
            }
          },
          "time": {
            "start": 1771213110808,
            "end": 1771213113252
          },
          "id": "prt_c64873e18001pH7OJahieV6arx",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64872dd5001p3gWfDNT3dwxFS"
        },
        {
          "type": "tool",
          "callID": "call_6M2M6S591OP4H14YzTGXdMAy",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "bun \"scripts/scrape_moon_docs.sh.ts\"",
              "description": "Regenerate moon docs external markdown snapshot",
              "timeout": 600000
            },
            "output": "Docs // Scrape // 1/171 https://moonrepo.dev/docs\nDocs // Scrape // 2/171 https://moonrepo.dev/docs/cheat-sheet\nDocs // Scrape // 3/171 https://moonrepo.dev/docs/commands\nDocs // Scrape // 4/171 https://moonrepo.dev/docs/commands/action-graph\nDocs // Scrape // 5/171 https://moonrepo.dev/docs/commands/bin\nDocs // Scrape // 6/171 https://moonrepo.dev/docs/commands/check\nDocs // Scrape // 7/171 https://moonrepo.dev/docs/commands/ci\nDocs // Scrape // 8/171 https://moonrepo.dev/docs/commands/clean\nDocs // Scrape // 9/171 https://moonrepo.dev/docs/commands/completions\nDocs // Scrape // 10/171 https://moonrepo.dev/docs/commands/docker\nDocs // Scrape // 11/171 https://moonrepo.dev/docs/commands/docker/file\nDocs // Scrape // 12/171 https://moonrepo.dev/docs/commands/docker/prune\nDocs // Scrape // 13/171 https://moonrepo.dev/docs/commands/docker/scaffold\nDocs // Scrape // 14/171 https://moonrepo.dev/docs/commands/docker/setup\nDocs // Scrape // 15/171 https://moonrepo.dev/docs/commands/exec\nDocs // Scrape // 16/171 https://moonrepo.dev/docs/commands/ext\nDocs // Scrape // 17/171 https://moonrepo.dev/docs/commands/extension\nDocs // Scrape // 18/171 https://moonrepo.dev/docs/commands/extension/add\nDocs // Scrape // 19/171 https://moonrepo.dev/docs/commands/extension/info\nDocs // Scrape // 20/171 https://moonrepo.dev/docs/commands/generate\nDocs // Scrape // 21/171 https://moonrepo.dev/docs/commands/hash\nDocs // Scrape // 22/171 https://moonrepo.dev/docs/commands/init\nDocs // Scrape // 23/171 https://moonrepo.dev/docs/commands/mcp\nDocs // Scrape // 24/171 https://moonrepo.dev/docs/commands/overview\nDocs // Scrape // 25/171 https://moonrepo.dev/docs/commands/project\nDocs // Scrape // 26/171 https://moonrepo.dev/docs/commands/project-graph\nDocs // Scrape // 27/171 https://moonrepo.dev/docs/commands/projects\nDocs // Scrape // 28/171 https://moonrepo.dev/docs/commands/query\nDocs // Scrape // 29/171 https://moonrepo.dev/docs/commands/query/affected\nDocs // Scrape // 30/171 https://moonrepo.dev/docs/commands/query/changed-files\nDocs // Scrape // 31/171 https://moonrepo.dev/docs/commands/query/projects\nDocs // Scrape // 32/171 https://moonrepo.dev/docs/commands/query/tasks\nDocs // Scrape // 33/171 https://moonrepo.dev/docs/commands/run\nDocs // Scrape // 34/171 https://moonrepo.dev/docs/commands/setup\nDocs // Scrape // 35/171 https://moonrepo.dev/docs/commands/sync\nDocs // Scrape // 36/171 https://moonrepo.dev/docs/commands/sync/code-owners\nDocs // Scrape // 37/171 https://moonrepo.dev/docs/commands/sync/config-schemas\nDocs // Scrape // 38/171 https://moonrepo.dev/docs/commands/sync/projects\nDocs // Scrape // 39/171 https://moonrepo.dev/docs/commands/sync/vcs-hooks\nDocs // Scrape // 40/171 https://moonrepo.dev/docs/commands/task\nDocs // Scrape // 41/171 https://moonrepo.dev/docs/commands/task-graph\nDocs // Scrape // 42/171 https://moonrepo.dev/docs/commands/tasks\nDocs // Scrape // 43/171 https://moonrepo.dev/docs/commands/teardown\nDocs // Scrape // 44/171 https://moonrepo.dev/docs/commands/template\nDocs // Scrape // 45/171 https://moonrepo.dev/docs/commands/templates\nDocs // Scrape // 46/171 https://moonrepo.dev/docs/commands/toolchain\nDocs // Scrape // 47/171 https://moonrepo.dev/docs/commands/toolchain/add\nDocs // Scrape // 48/171 https://moonrepo.dev/docs/commands/toolchain/info\nDocs // Scrape // 49/171 https://moonrepo.dev/docs/commands/upgrade\nDocs // Scrape // 50/171 https://moonrepo.dev/docs/comparison\nDocs // Scrape // 51/171 https://moonrepo.dev/docs/concepts\nDocs // Scrape // 52/171 https://moonrepo.dev/docs/concepts/cache\nDocs // Scrape // 53/171 https://moonrepo.dev/docs/concepts/file-group\nDocs // Scrape // 54/171 https://moonrepo.dev/docs/concepts/file-pattern\nDocs // Scrape // 55/171 https://moonrepo.dev/docs/concepts/project\nDocs // Scrape // 56/171 https://moonrepo.dev/docs/concepts/query-lang\nDocs // Scrape // 57/171 https://moonrepo.dev/docs/concepts/target\nDocs // Scrape // 58/171 https://moonrepo.dev/docs/concepts/task\nDocs // Scrape // 59/171 https://moonrepo.dev/docs/concepts/task-inheritance\nDocs // Scrape // 60/171 https://moonrepo.dev/docs/concepts/token\nDocs // Scrape // 61/171 https://moonrepo.dev/docs/concepts/toolchain\nDocs // Scrape // 62/171 https://moonrepo.dev/docs/concepts/workspace\nDocs // Scrape // 63/171 https://moonrepo.dev/docs/config\nDocs // Scrape // 64/171 https://moonrepo.dev/docs/config/extensions\nDocs // Scrape // 65/171 https://moonrepo.dev/docs/config/overview\nDocs // Scrape // 66/171 https://moonrepo.dev/docs/config/project\nDocs // Scrape // 67/171 https://moonrepo.dev/docs/config/tasks\nDocs // Scrape // 68/171 https://moonrepo.dev/docs/config/template\nDocs // Scrape // 69/171 https://moonrepo.dev/docs/config/toolchain\nDocs // Scrape // 70/171 https://moonrepo.dev/docs/config/workspace\nDocs // Scrape // 71/171 https://moonrepo.dev/docs/create-project\nDocs // Scrape // 72/171 https://moonrepo.dev/docs/create-task\nDocs // Scrape // 73/171 https://moonrepo.dev/docs/editors\nDocs // Scrape // 74/171 https://moonrepo.dev/docs/editors/vscode\nDocs // Scrape // 75/171 https://moonrepo.dev/docs/faq\nDocs // Scrape // 76/171 https://moonrepo.dev/docs/guides/ci\nDocs // Scrape // 77/171 https://moonrepo.dev/docs/guides/codegen\nDocs // Scrape // 78/171 https://moonrepo.dev/docs/guides/codeowners\nDocs // Scrape // 79/171 https://moonrepo.dev/docs/guides/debug-task\nDocs // Scrape // 80/171 https://moonrepo.dev/docs/guides/docker\nDocs // Scrape // 81/171 https://moonrepo.dev/docs/guides/examples/angular\nDocs // Scrape // 82/171 https://moonrepo.dev/docs/guides/examples/astro\nDocs // Scrape // 83/171 https://moonrepo.dev/docs/guides/examples/eslint\nDocs // Scrape // 84/171 https://moonrepo.dev/docs/guides/examples/jest\nDocs // Scrape // 85/171 https://moonrepo.dev/docs/guides/examples/nest\nDocs // Scrape // 86/171 https://moonrepo.dev/docs/guides/examples/next\nDocs // Scrape // 87/171 https://moonrepo.dev/docs/guides/examples/nuxt\nDocs // Scrape // 88/171 https://moonrepo.dev/docs/guides/examples/packemon\nDocs // Scrape // 89/171 https://moonrepo.dev/docs/guides/examples/prettier\nDocs // Scrape // 90/171 https://moonrepo.dev/docs/guides/examples/react\nDocs // Scrape // 91/171 https://moonrepo.dev/docs/guides/examples/remix\nDocs // Scrape // 92/171 https://moonrepo.dev/docs/guides/examples/solid\nDocs // Scrape // 93/171 https://moonrepo.dev/docs/guides/examples/storybook\nDocs // Scrape // 94/171 https://moonrepo.dev/docs/guides/examples/sveltekit\nDocs // Scrape // 95/171 https://moonrepo.dev/docs/guides/examples/typescript\nDocs // Scrape // 96/171 https://moonrepo.dev/docs/guides/examples/vite\nDocs // Scrape // 97/171 https://moonrepo.dev/docs/guides/examples/vue\nDocs // Scrape // 98/171 https://moonrepo.dev/docs/guides/extensions\nDocs // Scrape // 99/171 https://moonrepo.dev/docs/guides/javascript/bun-handbook\nDocs // Scrape // 100/171 https://moonrepo.dev/docs/guides/javascript/deno-handbook\nDocs // Scrape // 101/171 https://moonrepo.dev/docs/guides/javascript/node-handbook\nDocs // Scrape // 102/171 https://moonrepo.dev/docs/guides/javascript/typescript-eslint\nDocs // Scrape // 103/171 https://moonrepo.dev/docs/guides/javascript/typescript-project-refs\nDocs // Scrape // 104/171 https://moonrepo.dev/docs/guides/mcp\nDocs // Scrape // 105/171 https://moonrepo.dev/docs/guides/node/examples\nDocs // Scrape // 106/171 https://moonrepo.dev/docs/guides/notifications\nDocs // Scrape // 107/171 https://moonrepo.dev/docs/guides/offline-mode\nDocs // Scrape // 108/171 https://moonrepo.dev/docs/guides/open-source\nDocs // Scrape // 109/171 https://moonrepo.dev/docs/guides/pkl-config\nDocs // Scrape // 110/171 https://moonrepo.dev/docs/guides/profile\nDocs // Scrape // 111/171 https://moonrepo.dev/docs/guides/remote-cache\nDocs // Scrape // 112/171 https://moonrepo.dev/docs/guides/root-project\nDocs // Scrape // 113/171 https://moonrepo.dev/docs/guides/rust/handbook\nDocs // Scrape // 114/171 https://moonrepo.dev/docs/guides/sharing-config\nDocs // Scrape // 115/171 https://moonrepo.dev/docs/guides/vcs-hooks\nDocs // Scrape // 116/171 https://moonrepo.dev/docs/guides/wasm-plugins\nDocs // Scrape // 117/171 https://moonrepo.dev/docs/guides/webhooks\nDocs // Scrape // 118/171 https://moonrepo.dev/docs/how-it-works\nDocs // Scrape // 119/171 https://moonrepo.dev/docs/how-it-works/action-graph\nDocs // Scrape // 120/171 https://moonrepo.dev/docs/how-it-works/languages\nDocs // Scrape // 121/171 https://moonrepo.dev/docs/how-it-works/project-graph\nDocs // Scrape // 122/171 https://moonrepo.dev/docs/how-it-works/task-graph\nDocs // Scrape // 123/171 https://moonrepo.dev/docs/install\nDocs // Scrape // 124/171 https://moonrepo.dev/docs/migrate-to-moon\nDocs // Scrape // 125/171 https://moonrepo.dev/docs/migrate/2.0\nDocs // Scrape // 126/171 https://moonrepo.dev/docs/proto\nDocs // Scrape // 127/171 https://moonrepo.dev/docs/proto/commands/activate\nDocs // Scrape // 128/171 https://moonrepo.dev/docs/proto/commands/alias\nDocs // Scrape // 129/171 https://moonrepo.dev/docs/proto/commands/bin\nDocs // Scrape // 130/171 https://moonrepo.dev/docs/proto/commands/clean\nDocs // Scrape // 131/171 https://moonrepo.dev/docs/proto/commands/completions\nDocs // Scrape // 132/171 https://moonrepo.dev/docs/proto/commands/debug\nDocs // Scrape // 133/171 https://moonrepo.dev/docs/proto/commands/debug/config\nDocs // Scrape // 134/171 https://moonrepo.dev/docs/proto/commands/debug/env\nDocs // Scrape // 135/171 https://moonrepo.dev/docs/proto/commands/diagnose\nDocs // Scrape // 136/171 https://moonrepo.dev/docs/proto/commands/exec\nDocs // Scrape // 137/171 https://moonrepo.dev/docs/proto/commands/install\nDocs // Scrape // 138/171 https://moonrepo.dev/docs/proto/commands/list\nDocs // Scrape // 139/171 https://moonrepo.dev/docs/proto/commands/list-remote\nDocs // Scrape // 140/171 https://moonrepo.dev/docs/proto/commands/outdated\nDocs // Scrape // 141/171 https://moonrepo.dev/docs/proto/commands/pin\nDocs // Scrape // 142/171 https://moonrepo.dev/docs/proto/commands/plugin\nDocs // Scrape // 143/171 https://moonrepo.dev/docs/proto/commands/plugin/add\nDocs // Scrape // 144/171 https://moonrepo.dev/docs/proto/commands/plugin/info\nDocs // Scrape // 145/171 https://moonrepo.dev/docs/proto/commands/plugin/list\nDocs // Scrape // 146/171 https://moonrepo.dev/docs/proto/commands/plugin/remove\nDocs // Scrape // 147/171 https://moonrepo.dev/docs/proto/commands/plugin/search\nDocs // Scrape // 148/171 https://moonrepo.dev/docs/proto/commands/regen\nDocs // Scrape // 149/171 https://moonrepo.dev/docs/proto/commands/run\nDocs // Scrape // 150/171 https://moonrepo.dev/docs/proto/commands/setup\nDocs // Scrape // 151/171 https://moonrepo.dev/docs/proto/commands/status\nDocs // Scrape // 152/171 https://moonrepo.dev/docs/proto/commands/unalias\nDocs // Scrape // 153/171 https://moonrepo.dev/docs/proto/commands/uninstall\nDocs // Scrape // 154/171 https://moonrepo.dev/docs/proto/commands/unpin\nDocs // Scrape // 155/171 https://moonrepo.dev/docs/proto/commands/upgrade\nDocs // Scrape // 156/171 https://moonrepo.dev/docs/proto/commands/use\nDocs // Scrape // 157/171 https://moonrepo.dev/docs/proto/commands/versions\nDocs // Scrape // 158/171 https://moonrepo.dev/docs/proto/config\nDocs // Scrape // 159/171 https://moonrepo.dev/docs/proto/detection\nDocs // Scrape // 160/171 https://moonrepo.dev/docs/proto/faq\nDocs // Scrape // 161/171 https://moonrepo.dev/docs/proto/install\nDocs // Scrape // 162/171 https://moonrepo.dev/docs/proto/non-wasm-plugin\nDocs // Scrape // 163/171 https://moonrepo.dev/docs/proto/plugins\nDocs // Scrape // 164/171 https://moonrepo.dev/docs/proto/tool-spec\nDocs // Scrape // 165/171 https://moonrepo.dev/docs/proto/tools\nDocs // Scrape // 166/171 https://moonrepo.dev/docs/proto/wasm-plugin\nDocs // Scrape // 167/171 https://moonrepo.dev/docs/proto/workflows\nDocs // Scrape // 168/171 https://moonrepo.dev/docs/run-task\nDocs // Scrape // 169/171 https://moonrepo.dev/docs/setup-toolchain\nDocs // Scrape // 170/171 https://moonrepo.dev/docs/setup-workspace\nDocs // Scrape // 171/171 https://moonrepo.dev/docs/terminology\nDocs // Scrape // Wrote external docs snapshot (pages=171,ok=171,failed=0,path=/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md)\n",
            "title": "Regenerate moon docs external markdown snapshot",
            "metadata": {
              "output": "Docs // Scrape // 1/171 https://moonrepo.dev/docs\nDocs // Scrape // 2/171 https://moonrepo.dev/docs/cheat-sheet\nDocs // Scrape // 3/171 https://moonrepo.dev/docs/commands\nDocs // Scrape // 4/171 https://moonrepo.dev/docs/commands/action-graph\nDocs // Scrape // 5/171 https://moonrepo.dev/docs/commands/bin\nDocs // Scrape // 6/171 https://moonrepo.dev/docs/commands/check\nDocs // Scrape // 7/171 https://moonrepo.dev/docs/commands/ci\nDocs // Scrape // 8/171 https://moonrepo.dev/docs/commands/clean\nDocs // Scrape // 9/171 https://moonrepo.dev/docs/commands/completions\nDocs // Scrape // 10/171 https://moonrepo.dev/docs/commands/docker\nDocs // Scrape // 11/171 https://moonrepo.dev/docs/commands/docker/file\nDocs // Scrape // 12/171 https://moonrepo.dev/docs/commands/docker/prune\nDocs // Scrape // 13/171 https://moonrepo.dev/docs/commands/docker/scaffold\nDocs // Scrape // 14/171 https://moonrepo.dev/docs/commands/docker/setup\nDocs // Scrape // 15/171 https://moonrepo.dev/docs/commands/exec\nDocs // Scrape // 16/171 https://moonrepo.dev/docs/commands/ext\nDocs // Scrape // 17/171 https://moonrepo.dev/docs/commands/extension\nDocs // Scrape // 18/171 https://moonrepo.dev/docs/commands/extension/add\nDocs // Scrape // 19/171 https://moonrepo.dev/docs/commands/extension/info\nDocs // Scrape // 20/171 https://moonrepo.dev/docs/commands/generate\nDocs // Scrape // 21/171 https://moonrepo.dev/docs/commands/hash\nDocs // Scrape // 22/171 https://moonrepo.dev/docs/commands/init\nDocs // Scrape // 23/171 https://moonrepo.dev/docs/commands/mcp\nDocs // Scrape // 24/171 https://moonrepo.dev/docs/commands/overview\nDocs // Scrape // 25/171 https://moonrepo.dev/docs/commands/project\nDocs // Scrape // 26/171 https://moonrepo.dev/docs/commands/project-graph\nDocs // Scrape // 27/171 https://moonrepo.dev/docs/commands/projects\nDocs // Scrape // 28/171 https://moonrepo.dev/docs/commands/query\nDocs // Scrape // 29/171 https://moonrepo.dev/docs/commands/query/affected\nDocs // Scrape // 30/171 https://moonrepo.dev/docs/commands/query/changed-files\nDocs // Scrape // 31/171 https://moonrepo.dev/docs/commands/query/projects\nDocs // Scrape // 32/171 https://moonrepo.dev/docs/commands/query/tasks\nDocs // Scrape // 33/171 https://moonrepo.dev/docs/commands/run\nDocs // Scrape // 34/171 https://moonrepo.dev/docs/commands/setup\nDocs // Scrape // 35/171 https://moonrepo.dev/docs/commands/sync\nDocs // Scrape // 36/171 https://moonrepo.dev/docs/commands/sync/code-owners\nDocs // Scrape // 37/171 https://moonrepo.dev/docs/commands/sync/config-schemas\nDocs // Scrape // 38/171 https://moonrepo.dev/docs/commands/sync/projects\nDocs // Scrape // 39/171 https://moonrepo.dev/docs/commands/sync/vcs-hooks\nDocs // Scrape // 40/171 https://moonrepo.dev/docs/commands/task\nDocs // Scrape // 41/171 https://moonrepo.dev/docs/commands/task-graph\nDocs // Scrape // 42/171 https://moonrepo.dev/docs/commands/tasks\nDocs // Scrape // 43/171 https://moonrepo.dev/docs/commands/teardown\nDocs // Scrape // 44/171 https://moonrepo.dev/docs/commands/template\nDocs // Scrape // 45/171 https://moonrepo.dev/docs/commands/templates\nDocs // Scrape // 46/171 https://moonrepo.dev/docs/commands/toolchain\nDocs // Scrape // 47/171 https://moonrepo.dev/docs/commands/toolchain/add\nDocs // Scrape // 48/171 https://moonrepo.dev/docs/commands/toolchain/info\nDocs // Scrape // 49/171 https://moonrepo.dev/docs/commands/upgrade\nDocs // Scrape // 50/171 https://moonrepo.dev/docs/comparison\nDocs // Scrape // 51/171 https://moonrepo.dev/docs/concepts\nDocs // Scrape // 52/171 https://moonrepo.dev/docs/concepts/cache\nDocs // Scrape // 53/171 https://moonrepo.dev/docs/concepts/file-group\nDocs // Scrape // 54/171 https://moonrepo.dev/docs/concepts/file-pattern\nDocs // Scrape // 55/171 https://moonrepo.dev/docs/concepts/project\nDocs // Scrape // 56/171 https://moonrepo.dev/docs/concepts/query-lang\nDocs // Scrape // 57/171 https://moonrepo.dev/docs/concepts/target\nDocs // Scrape // 58/171 https://moonrepo.dev/docs/concepts/task\nDocs // Scrape // 59/171 https://moonrepo.dev/docs/concepts/task-inheritance\nDocs // Scrape // 60/171 https://moonrepo.dev/docs/concepts/token\nDocs // Scrape // 61/171 https://moonrepo.dev/docs/concepts/toolchain\nDocs // Scrape // 62/171 https://moonrepo.dev/docs/concepts/workspace\nDocs // Scrape // 63/171 https://moonrepo.dev/docs/config\nDocs // Scrape // 64/171 https://moonrepo.dev/docs/config/extensions\nDocs // Scrape // 65/171 https://moonrepo.dev/docs/config/overview\nDocs // Scrape // 66/171 https://moonrepo.dev/docs/config/project\nDocs // Scrape // 67/171 https://moonrepo.dev/docs/config/tasks\nDocs // Scrape // 68/171 https://moonrepo.dev/docs/config/template\nDocs // Scrape // 69/171 https://moonrepo.dev/docs/config/toolchain\nDocs // Scrape // 70/171 https://moonrepo.dev/docs/config/workspace\nDocs // Scrape // 71/171 https://moonrepo.dev/docs/create-project\nDocs // Scrape // 72/171 https://moonrepo.dev/docs/create-task\nDocs // Scrape // 73/171 https://moonrepo.dev/docs/editors\nDocs // Scrape // 74/171 https://moonrepo.dev/docs/editors/vscode\nDocs // Scrape // 75/171 https://moonrepo.dev/docs/faq\nDocs // Scrape // 76/171 https://moonrepo.dev/docs/guides/ci\nDocs // Scrape // 77/171 https://moonrepo.dev/docs/guides/codegen\nDocs // Scrape // 78/171 https://moonrepo.dev/docs/guides/codeowners\nDocs // Scrape // 79/171 https://moonrepo.dev/docs/guides/debug-task\nDocs // Scrape // 80/171 https://moonrepo.dev/docs/guides/docker\nDocs // Scrape // 81/171 https://moonrepo.dev/docs/guides/examples/angular\nDocs // Scrape // 82/171 https://moonrepo.dev/docs/guides/examples/astro\nDocs // Scrape // 83/171 https://moonrepo.dev/docs/guides/examples/eslint\nDocs // Scrape // 84/171 https://moonrepo.dev/docs/guides/examples/jest\nDocs // Scrape // 85/171 https://moonrepo.dev/docs/guides/examples/nest\nDocs // Scrape // 86/171 https://moonrepo.dev/docs/guides/examples/next\nDocs // Scrape // 87/171 https://moonrepo.dev/docs/guides/examples/nuxt\nDocs // Scrape // 88/171 https://moonrepo.dev/docs/guides/examples/packemon\nDocs // Scrape // 89/171 https://moonrepo.dev/docs/guides/examples/prettier\nDocs // Scrape // 90/171 https://moonrepo.dev/docs/guides/examples/react\nDocs // Scrape // 91/171 https://moonrepo.dev/docs/guides/examples/remix\nDocs // Scrape // 92/171 https://moonrepo.dev/docs/guides/examples/solid\nDocs // Scrape // 93/171 https://moonrepo.dev/docs/guides/examples/storybook\nDocs // Scrape // 94/171 https://moonrepo.dev/docs/guides/examples/sveltekit\nDocs // Scrape // 95/171 https://moonrepo.dev/docs/guides/examples/typescript\nDocs // Scrape // 96/171 https://moonrepo.dev/docs/guides/examples/vite\nDocs // Scrape // 97/171 https://moonrepo.dev/docs/guides/examples/vue\nDocs // Scrape // 98/171 https://moonrepo.dev/docs/guides/extensions\nDocs // Scrape // 99/171 https://moonrepo.dev/docs/guides/javascript/bun-handbook\nDocs // Scrape // 100/171 https://moonrepo.dev/docs/guides/javascript/deno-handbook\nDocs // Scrape // 101/171 https://moonrepo.dev/docs/guides/javascript/node-handbook\nDocs // Scrape // 102/171 https://moonrepo.dev/docs/guides/javascript/typescript-eslint\nDocs // Scrape // 103/171 https://moonrepo.dev/docs/guides/javascript/typescript-project-refs\nDocs // Scrape // 104/171 https://moonrepo.dev/docs/guides/mcp\nDocs // Scrape // 105/171 https://moonrepo.dev/docs/guides/node/examples\nDocs // Scrape // 106/171 https://moonrepo.dev/docs/guides/notifications\nDocs // Scrape // 107/171 https://moonrepo.dev/docs/guides/offline-mode\nDocs // Scrape // 108/171 https://moonrepo.dev/docs/guides/open-source\nDocs // Scrape // 109/171 https://moonrepo.dev/docs/guides/pkl-config\nDocs // Scrape // 110/171 https://moonrepo.dev/docs/guides/profile\nDocs // Scrape // 111/171 https://moonrepo.dev/docs/guides/remote-cache\nDocs // Scrape // 112/171 https://moonrepo.dev/docs/guides/root-project\nDocs // Scrape // 113/171 https://moonrepo.dev/docs/guides/rust/handbook\nDocs // Scrape // 114/171 https://moonrepo.dev/docs/guides/sharing-config\nDocs // Scrape // 115/171 https://moonrepo.dev/docs/guides/vcs-hooks\nDocs // Scrape // 116/171 https://moonrepo.dev/docs/guides/wasm-plugins\nDocs // Scrape // 117/171 https://moonrepo.dev/docs/guides/webhooks\nDocs // Scrape // 118/171 https://moonrepo.dev/docs/how-it-works\nDocs // Scrape // 119/171 https://moonrepo.dev/docs/how-it-works/action-graph\nDocs // Scrape // 120/171 https://moonrepo.dev/docs/how-it-works/languages\nDocs // Scrape // 121/171 https://moonrepo.dev/docs/how-it-works/project-graph\nDocs // Scrape // 122/171 https://moonrepo.dev/docs/how-it-works/task-graph\nDocs // Scrape // 123/171 https://moonrepo.dev/docs/install\nDocs // Scrape // 124/171 https://moonrepo.dev/docs/migrate-to-moon\nDocs // Scrape // 125/171 https://moonrepo.dev/docs/migrate/2.0\nDocs // Scrape // 126/171 https://moonrepo.dev/docs/proto\nDocs // Scrape // 127/171 https://moonrepo.dev/docs/proto/commands/activate\nDocs // Scrape // 128/171 https://moonrepo.dev/docs/proto/commands/alias\nDocs // Scrape // 129/171 https://moonrepo.dev/docs/proto/commands/bin\nDocs // Scrape // 130/171 https://moonrepo.dev/docs/proto/commands/clean\nDocs // Scrape // 131/171 https://moonrepo.dev/docs/proto/commands/completions\nDocs // Scrape // 132/171 https://moonrepo.dev/docs/proto/commands/debug\nDocs // Scrape // 133/171 https://moonrepo.dev/docs/proto/commands/debug/config\nDocs // Scrape // 134/171 https://moonrepo.dev/docs/proto/commands/debug/env\nDocs // Scrape // 135/171 https://moonrepo.dev/docs/proto/commands/diagnose\nDocs // Scrape // 136/171 https://moonrepo.dev/docs/proto/commands/exec\nDocs // Scrape // 137/171 https://moonrepo.dev/docs/proto/commands/install\nDocs // Scrape // 138/171 https://moonrepo.dev/docs/proto/commands/list\nDocs // Scrape // 139/171 https://moonrepo.dev/docs/proto/commands/list-remote\nDocs // Scrape // 140/171 https://moonrepo.dev/docs/proto/commands/outdated\nDocs // Scrape // 141/171 https://moonrepo.dev/docs/proto/commands/pin\nDocs // Scrape // 142/171 https://moonrepo.dev/docs/proto/commands/plugin\nDocs // Scrape // 143/171 https://moonrepo.dev/docs/proto/commands/plugin/add\nDocs // Scrape // 144/171 https://moonrepo.dev/docs/proto/commands/plugin/info\nDocs // Scrape // 145/171 https://moonrepo.dev/docs/proto/commands/plugin/list\nDocs // Scrape // 146/171 https://moonrepo.dev/docs/proto/commands/plugin/remove\nDocs // Scrape // 147/171 https://moonrepo.dev/docs/proto/commands/plugin/search\nDocs // Scrape // 148/171 https://moonrepo.dev/docs/proto/commands/regen\nDocs // Scrape // 149/171 https://moonrepo.dev/docs/proto/commands/run\nDocs // Scrape // 150/171 https://moonrepo.dev/docs/proto/commands/setup\nDocs // Scrape // 151/171 https://moonrepo.dev/docs/proto/commands/status\nDocs // Scrape // 152/171 https://moonrepo.dev/docs/proto/commands/unalias\nDocs // Scrape // 153/171 https://moonrepo.dev/docs/proto/commands/uninstall\nDocs // Scrape // 154/171 https://moonrepo.dev/docs/proto/commands/unpin\nDocs // Scrape // 155/171 https://moonrepo.dev/docs/proto/commands/upgrade\nDocs // Scrape // 156/171 https://moonrepo.dev/docs/proto/commands/use\nDocs // Scrape // 157/171 https://moonrepo.dev/docs/proto/commands/versions\nDocs // Scrape // 158/171 https://moonrepo.dev/docs/proto/config\nDocs // Scrape // 159/171 https://moonrepo.dev/docs/proto/detection\nDocs // Scrape // 160/171 https://moonrepo.dev/docs/proto/faq\nDocs // Scrape // 161/171 https://moonrepo.dev/docs/proto/install\nDocs // Scrape // 162/171 https://moonrepo.dev/docs/proto/non-wasm-plugin\nDocs // Scrape // 163/171 https://moonrepo.dev/docs/proto/plugins\nDocs // Scrape // 164/171 https://moonrepo.dev/docs/proto/tool-spec\nDocs // Scrape // 165/171 https://moonrepo.dev/docs/proto/tools\nDocs // Scrape // 166/171 https://moonrepo.dev/docs/proto/wasm-plugin\nDocs // Scrape // 167/171 https://moonrepo.dev/docs/proto/workflows\nDocs // Scrape // 168/171 https://moonrepo.dev/docs/run-task\nDocs // Scrape // 169/171 https://moonrepo.dev/docs/setup-toolchain\nDocs // Scrape // 170/171 https://moonrepo.dev/docs/setup-workspace\nDocs // Scrape // 171/171 https://moonrepo.dev/docs/terminology\nDocs // Scrape // Wrote external docs snapshot (pages=171,ok=171,failed=0,path=/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md)\n",
              "exit": 0,
              "description": "Regenerate moon docs external markdown snapshot",
              "truncated": false
            },
            "time": {
              "start": 1771213113472,
              "end": 1771213126213
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_08b0a1fd7234202c016992913931fc8196aea6cd45d7005331"
            }
          },
          "id": "prt_c648747a5001mLDdopd6zcr8vT",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64872dd5001p3gWfDNT3dwxFS"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "19b993142ce158b60de59003563366cf0d0e99c3",
          "cost": 0,
          "tokens": {
            "total": 67921,
            "input": 67812,
            "output": 109,
            "reasoning": 63,
            "cache": {
              "read": 0,
              "write": 0
            }
          },
          "id": "prt_c64877a47001PjFUVDycKsSzfS",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64872dd5001p3gWfDNT3dwxFS"
        },
        {
          "type": "patch",
          "hash": "1e56dd45b1817916ddef7672044e41588cb2ad61",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md"
          ],
          "id": "prt_c64877a8e001mbA8WbV6VAiRqk",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64872dd5001p3gWfDNT3dwxFS"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213126294,
          "completed": 1771213130968
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 71638,
          "input": 3677,
          "output": 121,
          "reasoning": 75,
          "cache": {
            "read": 67840,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64877a96001fSp3b2V1Ag7vOp",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "19b993142ce158b60de59003563366cf0d0e99c3",
          "id": "prt_c64878332001MH5a1tVJ16iTWj",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64877a96001fSp3b2V1Ag7vOp"
        },
        {
          "type": "reasoning",
          "text": "**Planning file line count check**",
          "metadata": {
            "openai": {
              "itemId": "rs_0bcebdc71f734c430169929148cb70819491145f2e44126100",
              "reasoningEncryptedContent": "gAAAAABpkpFKDYLs3OX9VFLAb-hmHphhF4a0S6ZxI2l_lHeU9IV13e8wsdQQXMuHJR4DMTLP9yHziBzncREFXexwsiZVXCF757YuywjuPdlY6gjeTOUf8RISBnX2R5N2FkKiRiw-5KhcMZsNv6C57C57EUzeSnwZu5QBeuIIYCt8zGWLgUvc-DAH4UnN5TQ-TQnmYcu2Z2luTpQG4VYWcN_o7K9jvEC_FVQMkROpb5zQMw8LbyzOCxkco1glHFVHlUAuC-chhc-Qnhb0izCTQa117UlCK9OdVRIGLaBHBS4yM2yTh36DkUdSwPFrwMFpw0rlUnSDIQdpQzt0X7CNTlwyCNW-roMw0VLl4rCohIb2MTpLtvvLn5n7qs9skpC9xYCdaXY6Bvra24pqTWKyB6SNyno324iDTzWf8B5kJAgk71Z3G7REGIrG5CQQesUGiFCdZHjGbDiR7U-1zAk07R-dW4A2hPJk9K6ADvr9S6gYb9KCITiBQGQg5uVLgnK5s4-VKzfUc3yIWn6jBwqqsacHnQlXey0y1UprShcqPGrgZEiSupt5drwb2E-iUAbeOMgelElxnMKjPD_h3xZOHKnbkLwCNZVK_3FqVULMiyRZI9jnO-lrYu8BarZ02iBPt7avABg-7Xr6eSNo6KTjMCEHIu5RrmCJNeScjSxOQSYXRlSOmrJKp2LapXEG1TQa_J9PdJ8JScBQ1zlpZ89HpiXfeXyLvjJYLuZskNBdsYLUv54ba0ctVlckS8Tvd8v2rM1ViieNTxHOsstG5mxU9QebOpUwfLRD5GwbW0bwCH607v5dNdNg0KrO2o3HLrFwojH8tt2EcvNqHvE32dx5dMKK_x2TDCBWbf6YMlfixepO02rafBMqYvH43LQzLG6ibns_N2QGScEV68Fc6IoH3_ljvup0Z2gPWp_eUPa2o1e-FJsX609mg89Kubp3El5WhBdK6vINTbpEA7Nq9XK1dMeSa0U8mLJYqlMAdWoHrs1wpfF7Vs96CcW1JaRVyn__8RdyF5Rjts_f9JlRYaT_J6TREfjK-EMkZDgEp-0MsfV1N4biieijMev9h18Pr3wxM3JBoF15Cm4-UFsQRsr7clJIPpChOIRnAz77TFqnQUoa3XXEeeZer1Obsv1JMFIdBU9kGkft25t8e9xOTHix3QN1zP0SNXSy6orP3eY4Aaqtp0ogu8rJtfBeo9A1PpS1_rswuulyH8zK-MHVCfTKGfgip17-pW7USmXBMSepguRHqWHnar4Jmjo="
            }
          },
          "time": {
            "start": 1771213128827,
            "end": 1771213130470
          },
          "id": "prt_c6487847a001gbuzgB88mfaBtO",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64877a96001fSp3b2V1Ag7vOp"
        },
        {
          "type": "tool",
          "callID": "call_9vV1HEJfByPcvdOKVvu1Mpd4",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "wc -l \"docs/external/moonrepo/moonrepo_docs.ext.md\"",
              "description": "Count lines in scraped moon docs file"
            },
            "output": "   19948 docs/external/moonrepo/moonrepo_docs.ext.md\n",
            "title": "Count lines in scraped moon docs file",
            "metadata": {
              "output": "   19948 docs/external/moonrepo/moonrepo_docs.ext.md\n",
              "exit": 0,
              "description": "Count lines in scraped moon docs file",
              "truncated": false
            },
            "time": {
              "start": 1771213130804,
              "end": 1771213130829
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0bcebdc71f734c43016992914a6ee48194b6f4d7f006baf55a"
            }
          },
          "id": "prt_c64878ae7001vzm4Ay5hqAfJ0p",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64877a96001fSp3b2V1Ag7vOp"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "19b993142ce158b60de59003563366cf0d0e99c3",
          "cost": 0,
          "tokens": {
            "total": 71638,
            "input": 3677,
            "output": 121,
            "reasoning": 75,
            "cache": {
              "read": 67840,
              "write": 0
            }
          },
          "id": "prt_c64878ca6001YcZ7BPJQY8MAta",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64877a96001fSp3b2V1Ag7vOp"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213130973,
          "completed": 1771213134652
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 71727,
          "input": 114,
          "output": 61,
          "reasoning": 10,
          "cache": {
            "read": 71552,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64878cdd001RcMLKYtGLvFLed",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "19c5089de435342262b4ffc46f59fbfc3533018b",
          "id": "prt_c648795d00018rvnzet5CikNZo",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64878cdd001RcMLKYtGLvFLed"
        },
        {
          "type": "reasoning",
          "text": "**Inspecting footer implementation**",
          "metadata": {
            "openai": {
              "itemId": "rs_07759decf611d8af016992914d8f288197a728a9ca70e19bf1",
              "reasoningEncryptedContent": "gAAAAABpkpFOJiREm2OLu9gABsZWOk4Xot8ymW1658UGPajkC3OjVRoAfgKQyL-mri90l5BKbcq0CWiUm8OpvtD6QI0yoF0s8_8LrG1RD4_Gt1eE5eBL0EU21EsOiLcUhg74Juwvbthz9eYcdjaFCzjlHzCexo3yh2Ckx5IeL84GmodDRiM-UAN_YWAWhR9s65rdDAHEUtYOHpV9-8MmYr9_-JamuoQzQv-ARHv_TrkJ4OxZ8-7a5mtABVKwZ6Tn_SU5jV0RSRr9bXjrIdA3ut6JRH6iUHeFNOfr1rDLurrMATUJ_VPmOTJhFXVntRWO2IF7h7LaPTjG4OnAgKf8dO4ttmRgEyr1w56jXDKZuw85y7KLgryaV_wR1dBRHDDveVdfDYSnEme6da1P0GzxdCsJTnFXT54hQPer8gg9zodtQ4O3gdW3QaPHPxs58aVGQ_wOV43nbnBaUnr54MfLlhS0w_wob6tcpgA2PR0r3aoaB3IVl5qWJKREr-BXM1lzYYRtxtoGkR6i7Pll64gjppivRO7tbVLepvhKg4UGdOqd8h1mZXPt3hbtqP0F-MXPIYwmU8zXpYunuhYe4i-7j9le-ukkvlOl2mqTZj3NK0iJ6WzRG7mrwN1VjWrQ3xQfKSoPCQF5lFtgZjjlBWT4qpQvZaBwjkNNKV-nRRuRlzf-T1_rngxhJE4AsEiV7QipXLTxxv6NuzMnyKkSkGBY6dpMUkZyBFOLto5E1rn8J-b8Ng-iOFkyIW4qKGutdcAphtAeJxblX4U64hrMIIy7pAFrOp7Z0vG6NgBKVLMDxNWNVgDZS6zjXaySFjJUSKt8tT0GweokFb8eG2EdihzbfudtRS8QV2A6d0ke7NvHio4aD4vFg2Ncq6c="
            }
          },
          "time": {
            "start": 1771213133591,
            "end": 1771213134175
          },
          "id": "prt_c648797170017U6iZpXFAWb5jc",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64878cdd001RcMLKYtGLvFLed"
        },
        {
          "type": "tool",
          "callID": "call_6o6tjmcx2L7PoHHTmYhKCQYq",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md",
              "offset": 19920,
              "limit": 40
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md</path>\n<type>file</type>\n<content>19920: Template file An individual file within a template.\n19921: \n19922: Template variable A value that is interpolated within a template file and its file system path.\n19923: \n19924: [Token](/docs/concepts/token) A value within task configuration that is substituted at runtime.\n19925: \n19926: Tool A programming language or dependency manager within the [toolchain](/docs/concepts/toolchain).\n19927: \n19928: [Toolchain](/docs/concepts/toolchain) Installs and manages tools within the [workspace](/docs/concepts/workspace).\n19929: \n19930: Transitive target A target that is the dependency of the primary target, and must be ran before the primary.\n19931: \n19932: Touched A file that has been created, modified, deleted, or changed in any way.\n19933: \n19934: Upstream Dependencies or producers of the item in question.\n19935: \n19936: VCS Version control system (like Git or SVN).\n19937: \n19938: [Workspace](/docs/concepts/workspace) Root of the moon installation, and houses one or many [projects](/docs/concepts/project). Also refers to package manager workspaces (like Yarn).\n19939: \n19940: \n19941: ----\n19942: ## Notes / Comments / Lessons\n19943: \n19944: - Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\n19945: - Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\n19946: - For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\n19947: - Capture results: success=171, failed=0.\n19948: ----\n19949: \n\n(End of file - total 19949 lines)\n</content>",
            "title": "docs/external/moonrepo/moonrepo_docs.ext.md",
            "metadata": {
              "preview": "Template file An individual file within a template.\n\nTemplate variable A value that is interpolated within a template file and its file system path.\n\n[Token](/docs/concepts/token) A value within task configuration that is substituted at runtime.\n\nTool A programming language or dependency manager within the [toolchain](/docs/concepts/toolchain).\n\n[Toolchain](/docs/concepts/toolchain) Installs and manages tools within the [workspace](/docs/concepts/workspace).\n\nTransitive target A target that is the dependency of the primary target, and must be ran before the primary.\n\nTouched A file that has been created, modified, deleted, or changed in any way.\n\nUpstream Dependencies or producers of the item in question.\n\nVCS Version control system (like Git or SVN).\n\n[Workspace](/docs/concepts/workspace) Root of the moon installation, and houses one or many [projects](/docs/concepts/project). Also refers to package manager workspaces (like Yarn).\n",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771213134589,
              "end": 1771213134593
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_07759decf611d8af016992914e22f0819780894210d1e07cfa"
            }
          },
          "id": "prt_c64879960001kr3jmCT5jdaetQ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64878cdd001RcMLKYtGLvFLed"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "19c5089de435342262b4ffc46f59fbfc3533018b",
          "cost": 0,
          "tokens": {
            "total": 71727,
            "input": 114,
            "output": 61,
            "reasoning": 10,
            "cache": {
              "read": 71552,
              "write": 0
            }
          },
          "id": "prt_c64879b020010fHPEFZXxHeMtH",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64878cdd001RcMLKYtGLvFLed"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213134657,
          "completed": 1771213139083
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 72239,
          "input": 626,
          "output": 61,
          "reasoning": 13,
          "cache": {
            "read": 71552,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64879b41001cyIfI11kiq7X0c",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "19c5089de435342262b4ffc46f59fbfc3533018b",
          "id": "prt_c6487a760001TOdMfPUQznUrZN",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64879b41001cyIfI11kiq7X0c"
        },
        {
          "type": "reasoning",
          "text": "**Verifying test success**",
          "metadata": {
            "openai": {
              "itemId": "rs_05b90c0f65b5f7830169929151fcc481939e8178b7e996db57",
              "reasoningEncryptedContent": "gAAAAABpkpFSSLPVo96TQYSnmokSJMV1u2lhUwdBY14KNCklecHIvBROzJLRPD7tBVyUmaPLAqlc6uCl7XteyP02LxQ1T2xa6xrojatDT7cH2Zko9hsxlwG_hIi6tSRrolCQJcSmCAl19wmppMieI1dwOaqWIydt0r8LpldAQcFb_aVbWhG3I8dhFGc6GFum6rGQU3JFRJ-oDeBpSKa4o53Dae9Spm5BCc4FNT99srr5qJnpu9E037VEIkjU9u-nnb84bqa6XL-wqigvVADHSD2Wwhg1cfkaRDml0qVdQqdJkAXrUhdBPYQVLEx_-CYWGc2UFaIpczq8GOUsxGwUBJIP_tNCF89cA1c5Vw5KFaSSW7PiiGV-QZVYNb-p41UWAmqyaGEuSXDn7KZvccnpL_Uxys3ZtcQaoRxf6Q3VhurqVvBwpOVYiB44miKeNE7OVYJP0u9Hg0XkPcoCswiR1geDm8f3vGjLVpu9aCBpimrgsCoFw15af-8BmgWAu3gAHGZ2vyR0Hqk6GTAYYm8qIE-lJQYr_wUElT-trkECkcBIag2l6rtazFJDsMunc-CwjYWfbMztaHQw5o5xgViuPLE5kkVqsBdV6izOOm8irDcMUo35rjA1g9ViOQbWi3nu7JKGkIrMgdevCX8_UujO1b0U8AP-OB6LD51WNQ2-70HpXfQG9jVcdT2umN7BAt7a1mkJt5Mwd8ZQ8iwFj7BCXSjVJ06mBWVbzCvf-XeRuk2EhzvO59P26R3aKZZXOtA4wLTvbWf4t9aOdpUPUG6VPe_x2Q1eyf2CL-rrpQga38LiAYE5IWIMTJAgX1HbbGkcPUb6s3DmUK-S3MefwkXXVOJ9FQHw8bNcJyxotqwGyy7dnj8upoMo0vIUd2QYQfBPJn_LHxdg8SwO"
            }
          },
          "time": {
            "start": 1771213138019,
            "end": 1771213138635
          },
          "id": "prt_c6487a863001XwXGmVuNzjtkmW",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64879b41001cyIfI11kiq7X0c"
        },
        {
          "type": "tool",
          "callID": "call_MTKI7Q2gnONPomR3TPARaui5",
          "tool": "grep",
          "state": {
            "status": "completed",
            "input": {
              "pattern": "Scrape failed",
              "path": "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo",
              "include": "*.ext.md"
            },
            "output": "No files found",
            "title": "Scrape failed",
            "metadata": {
              "matches": 0,
              "truncated": false
            },
            "time": {
              "start": 1771213138962,
              "end": 1771213138983
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_05b90c0f65b5f7830169929152973c819394a1014bc9555975"
            }
          },
          "id": "prt_c6487aacd001ogUHcNJff7YUx4",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64879b41001cyIfI11kiq7X0c"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "19c5089de435342262b4ffc46f59fbfc3533018b",
          "cost": 0,
          "tokens": {
            "total": 72239,
            "input": 626,
            "output": 61,
            "reasoning": 13,
            "cache": {
              "read": 71552,
              "write": 0
            }
          },
          "id": "prt_c6487ac48001T9G9VQ0FKnKTnJ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64879b41001cyIfI11kiq7X0c"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213139089,
          "completed": 1771213143821
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 72369,
          "input": 189,
          "output": 116,
          "reasoning": 71,
          "cache": {
            "read": 72064,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6487ac91001aIRERPkaIpZE28",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "19c5089de435342262b4ffc46f59fbfc3533018b",
          "id": "prt_c6487b4cc001Lr8JZmMqJqoq46",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487ac91001aIRERPkaIpZE28"
        },
        {
          "type": "reasoning",
          "text": "**Clarifying grep no-match output**",
          "metadata": {
            "openai": {
              "itemId": "rs_0ad4b2e234124c3d01699291557f988194af1a8628d5bbe19e",
              "reasoningEncryptedContent": "gAAAAABpkpFXwqqfjp7ojndjm_IHE4koo7mdIGt_ck8hug_azz7xyIELS84rg9I_g8QzxgAF6E-SarpeYvG9YBJ57b17ZBqFtSDm8FXMUgC0-aAfJ3KUPlULdNZEv_SOeld0WwkC3Mwji_TXr-WC299U1n95WkrMEJzMgTkfXE-J0hGGsn-itCHOTohjFBvWrgTAMhB-_S5iVvlsFJM5ZsQh3HGYeliePhv0yKGzmATf1YC_XhhyOJsgvG0G7BnNY9T1BwHGQjf4VAvaWjaJiKVG2TgdcfzG9haszWQqzjdr5HzvhUQBPRJFVefmXAPnEJrvrKiR9QYtO6kC-Op37l17bkVvRTZaZ6SeDbvgEhe-ycelRVOCJGYPq1t1lBDbAH4KAeSAMPhNiia0noQA666DMyCI_0ZqCQC0hBwuMXbuUZlojameXbEnQSCww_4oeLpNPqgLPKlikx47Y_TxUZp9GjzfsYv75ppHUwGbFZFIWmS_rmMPHIMj6Wl0f7bYr0g-nzbtugVib1Saxone3f-5kgwjiVUZBDq_axInaQjj6eWR5XIJCCJuiPmhhs1-if0OGEVWkGTa2zbyackxP8KQj4lnjSv_OKUDYJFWgqWt6JXMtbAMLd7mhqHx3DGiDhizKfNpiHNV7RfUKSmmo7QI8VAk3ggu8xQpN6X-4xecmIsaj8ihg0Zi4PfkqVp83h74GulqsYvwiPYLShVQ3wKXB7Ue2Erqusk6nk5ObUtcvOb6hvEVu0Xxx97TBpMUq64w__AAnCzHy6mUHLNcobAr20YJEbLSyyxuxJoAkKJKPCQP4XVHnLvUVVvfKotYNtqUb2k-LW1KdggoBgIoVlZ8prWFQRP4yHeqTJhHdK6m_psmxA_gAOBGUNocm9AXex4IpTUXyNNptlzL158E-D2y-PI8NelfSIr8b9Dk1bPqEG6VCphnlEs8HcNmD3I8X2NVnco08eLGyA77v8C_U1H-JxJnBHxz1Hpatvdv84xq-vvpA9ZSuh-rMXvfKsggDQS51r3KumqmJtFzhINTvXT2NFib8-HE2sqNX3nFWaNYSSQo1l_035nZ-ZwWctXH8TPnCSNANXzhWRyNZ19oSA7kBamCXDeG_yBI_JSYj273lwKtbuaQJV_uJA62owD06iznYPEDlKJJO6P4Axwg0oZKkYQyg3y-dL4RqdEFq3547SF09L1m0EWs40GFiuhFYdDWDoSNr2drxRQb9ZJtp_wWvDd4W5SH4cWYiNjWOfbA83rHWTrX8kC9skT9jAo5U9UYiojN6JA9"
            }
          },
          "time": {
            "start": 1771213141533,
            "end": 1771213143542
          },
          "id": "prt_c6487b61d001K8o7cx78oyNvLF",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487ac91001aIRERPkaIpZE28"
        },
        {
          "type": "tool",
          "callID": "call_sqJIL0F1HuzWym3ctcfasxZQ",
          "tool": "grep",
          "state": {
            "status": "completed",
            "input": {
              "pattern": "## Notes / Comments / Lessons",
              "path": "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo"
            },
            "output": "Found 1 matches\n/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md:\n  Line 19942: ## Notes / Comments / Lessons",
            "title": "## Notes / Comments / Lessons",
            "metadata": {
              "matches": 1,
              "truncated": false
            },
            "time": {
              "start": 1771213143698,
              "end": 1771213143717
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0ad4b2e234124c3d016992915781ec81949a09107eba8aa2e3"
            }
          },
          "id": "prt_c6487bdf7001tQPcpLyGWwruV4",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487ac91001aIRERPkaIpZE28"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "19c5089de435342262b4ffc46f59fbfc3533018b",
          "cost": 0,
          "tokens": {
            "total": 72369,
            "input": 189,
            "output": 116,
            "reasoning": 71,
            "cache": {
              "read": 72064,
              "write": 0
            }
          },
          "id": "prt_c6487bea8001eVRvUrNnvCLSwa",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487ac91001aIRERPkaIpZE28"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213143838,
          "completed": 1771213148098
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 72522,
          "input": 229,
          "output": 101,
          "reasoning": 44,
          "cache": {
            "read": 72192,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6487bf1e001bsohuOy5Xj4I3l",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "19c5089de435342262b4ffc46f59fbfc3533018b",
          "id": "prt_c6487c7a9001QW7qo1JQ5blEQB",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487bf1e001bsohuOy5Xj4I3l"
        },
        {
          "type": "reasoning",
          "text": "**Adding executable permission**",
          "metadata": {
            "openai": {
              "itemId": "rs_0cef522953edfb21016992915a4da881908c1568dc72f024bd",
              "reasoningEncryptedContent": "gAAAAABpkpFbdfR2GSKVH4Q4W9YtrPK7M4I0HvGxDYKcD4odo7BMVlKtV5bBGjl0Sh8K2vyC97UemwSCxIlLUIxxc58xQ_v7Z-4gvseuC9E6KCgXQsUECr__wH73RD0HuFjdkfjYvNlrDGjPdC72g8PsX-93k39g0OD-R6CKX9gCU1-YDJsxiKFZqbNIXEGKpPvl821-Y3GWwo7sdcDXFXeDpf9fdgcfzZhkqQJGFSHBs8deOmpnWD8yXGABqTn_Zo7g4Jjy_q80Da1lHLtdzFBwKl1UVS5K5iGXzEqyYm0lLbxBSsrtYFUCgnJn7vvGApiXbBJgE5p3HHsLbKkSk7WXGo_S4AY_vaBLrF477bSla6kOT5r12HqwaPrVeOmkz6EVUrcPLwT1NWkLnUlFMiSNwBflWTASXseIukSpAH4grAOwgxDWXLBwQ7dc0OXwutuNgoGOFaTLEuKxHViDahoPaYXdcKUvasdDMnRVKTOKugwz8szY84NBVCG7c6_ZMlztnEa7CI6USLLrgRk4mAF-W_ydFwo3lPCI_Q_a-7bI7bzvTvKgxcvGYmZvNMdwQyM0L4eDbUPRtywPRQaV4Vr3hMdC7EGJsyEQWRUnZOEJsYhgWns1f2Mm5oocQ-sril4jqXLwWm3XYf3wEtiItOZW7S9EnrJYGuAZxVJynns4FnonadiNGPQTYrSUIZvjf_qUmP1W02ffjWheZz-JmSXz7t3sdoAwzp6yIhKnch6fuaJS-lS-Mox1jO6zLuNRtUnjqdFjCC_WaqfY2T_2emEKCx2eKIVKkhXFCS1MDa5QZlnF4qQzUJrsulAlvE5h6mPJgWH7M53bqEqjzevHa8hxMKNbyc6_6gyHmmjimKrOucpi9pBZDfyb3Tz72NR6OW6GohWIBHr8a4-qnv8-FhviRBP55UkABSJ-JOJIPZGUQfoRJ0y-jinR8lNG2pLlvxrcem2DWusz28KWiZk9vXOJRPnWC6WvnZ-R00pSfv8lnBEl28qBQcaxDX0nTkAeDNmChezdxmV9NYm8IoPJKj9mBOJRztxkXseJk3L_gTemSGbDyuWA0PHictzUn7lZiHLRM2sdSNbl"
            }
          },
          "time": {
            "start": 1771213146335,
            "end": 1771213147835
          },
          "id": "prt_c6487c8df001OxH90o3w01w986",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487bf1e001bsohuOy5Xj4I3l"
        },
        {
          "type": "tool",
          "callID": "call_E8E42nNDwMDGgYbDmOlouuoi",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "chmod +x \"scripts/scrape_moon_docs.sh.ts\" && ls -l \"scripts/scrape_moon_docs.sh.ts\"",
              "description": "Set executable bit on scrape script"
            },
            "output": "-rwxr-xr-x  1 alex  staff  8858 Feb 15 19:38 scripts/scrape_moon_docs.sh.ts\n",
            "title": "Set executable bit on scrape script",
            "metadata": {
              "output": "-rwxr-xr-x  1 alex  staff  8858 Feb 15 19:38 scripts/scrape_moon_docs.sh.ts\n",
              "exit": 0,
              "description": "Set executable bit on scrape script",
              "truncated": false
            },
            "time": {
              "start": 1771213148000,
              "end": 1771213148046
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0cef522953edfb21016992915bc94881909856b35a0fb9c5f5"
            }
          },
          "id": "prt_c6487cebd001LZnbR03seBA68P",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487bf1e001bsohuOy5Xj4I3l"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "19c5089de435342262b4ffc46f59fbfc3533018b",
          "cost": 0,
          "tokens": {
            "total": 72522,
            "input": 229,
            "output": 101,
            "reasoning": 44,
            "cache": {
              "read": 72192,
              "write": 0
            }
          },
          "id": "prt_c6487cf92001GVyZFu73ZHMGUF",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487bf1e001bsohuOy5Xj4I3l"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213148102,
          "completed": 1771213152308
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 72632,
          "input": 246,
          "output": 66,
          "reasoning": 35,
          "cache": {
            "read": 72320,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6487cfc6001E8vE5EboTJ9mWF",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "19c5089de435342262b4ffc46f59fbfc3533018b",
          "id": "prt_c6487d931001eyi7850imdMYaf",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487cfc6001E8vE5EboTJ9mWF"
        },
        {
          "type": "reasoning",
          "text": "**Checking git status brief**",
          "metadata": {
            "openai": {
              "itemId": "rs_0f4f4082174c4001016992915ed8988193a4f1e992878aa142",
              "reasoningEncryptedContent": "gAAAAABpkpFgKw2BKLcDDwApK4hzQ2N-pUql38lDNaE4i19R_cIGrG8J9yv1XDtlJoD_hXv-FsJhOSHBtik12RHv2gHOlGU7PlcF-3VyFwdqvZ72Mi7Hx_1iky_KRRtPkG8pOkYeO8KkGDPn7kWyQfs2oxdq2M4EdlfvKjWpVS7Wg_hbmfpXOeHyAn0HKSzpZ8PQQuD9PDApf6b0FxBwk4y6aEPljisNLV7p-EQIY8dtA9JeptoOeIxDJ_kriG38XyNnldZ6f7X5PPYKs1OpJUzr-5XbIbZdW4KbLEiMCRwA4nE5HMWdQEPXqG8ANgmENjxwjsiydbjTC2Ei5WaXjAFdIOeSYd-N1u8J0KJHuMAhTu3yo-l9zcoInhhIiGeP8_x8Dp6nipxhpeq4TbBCERIF74m_Tu8VbKNvch4lhoiCae6X7IicIcph5n9PzWcKXi-95Ne2uH1KluSXeuUYblc7-ZKJxN3OU6JKD8JezruppCapMzsJkb2J005d07EDazUb0nWLOFaQsdvZz4CmIz0Ude_8LDW0upiH7f013oe3uBGqfYc9nr9Do4LLkrl3GL1yR6aC_tRrrKvt1b7Or38lQ0dwMR3jYl_zJQZAh0Nxh0SRguZN-OcAzSLNEgK1d8JKl5ZGHYGZmwi62Ufd9RBxaCFpApwti4aQgUsrridUEZic9C3OWNAcOIttwLfAjrSkct0ch_SqfAUhik0pllJm2KfS6hp-tM_MibCawSf3kGeFMXSL2jvOUDIA0mhnFt6ZxcFYA8q_dxFNEYjszfK5FE1u_PNLf419rCEm1dykwQT6Wzldxy8cDOcYOorcTmYqsMR_qonZwC1r5bPqvxq8lY9y8mhfxKFpgclfGzyRpbFrrTMTtuYpESiFSJ9O5G2wyMzJKQ_rpjqVqozvPIbIYdpOVJOzzgV9N7iznjNN836nqgfU2mBR7B43ULgduYAcP9ZwGmRtom5ESdu_h6SZpIwVydblhi18wWGQul3bPtl1GSq4AO9240NNrOZh1wUFw0tYFO_8vY93FPEInLz__O4_8IQqTg=="
            }
          },
          "time": {
            "start": 1771213150872,
            "end": 1771213152076
          },
          "id": "prt_c6487da980017CfuG4mW61e4ww",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487cfc6001E8vE5EboTJ9mWF"
        },
        {
          "type": "tool",
          "callID": "call_ynsgmgJtzFNl63Ixazp5HmwK",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "git status --short",
              "description": "Show changed and new files"
            },
            "output": " M AGENTS.md\n M README.md\n M docs/designs/core_gen1.design.md\n?? .opencode/skills/protobuf-schema-authoring/\n?? docs/external/\n?? docs/readmes/protobuf-schema-research.md\n?? scripts/scrape_moon_docs.sh.ts\n",
            "title": "Show changed and new files",
            "metadata": {
              "output": " M AGENTS.md\n M README.md\n M docs/designs/core_gen1.design.md\n?? .opencode/skills/protobuf-schema-authoring/\n?? docs/external/\n?? docs/readmes/protobuf-schema-research.md\n?? scripts/scrape_moon_docs.sh.ts\n",
              "exit": 0,
              "description": "Show changed and new files",
              "truncated": false
            },
            "time": {
              "start": 1771213152234,
              "end": 1771213152259
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0f4f4082174c400101699291600b18819394ac5a6ba4ac42cd"
            }
          },
          "id": "prt_c6487df50001dZfuJvekZ2TaaO",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487cfc6001E8vE5EboTJ9mWF"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "ef7c88dd3456ac1f44cca818a644bb0a19dc1e60",
          "cost": 0,
          "tokens": {
            "total": 72632,
            "input": 246,
            "output": 66,
            "reasoning": 35,
            "cache": {
              "read": 72320,
              "write": 0
            }
          },
          "id": "prt_c6487e003001bZ9WOBgeYxCL7O",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487cfc6001E8vE5EboTJ9mWF"
        },
        {
          "type": "patch",
          "hash": "19c5089de435342262b4ffc46f59fbfc3533018b",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/skills/protobuf-schema-authoring/SKILL.md"
          ],
          "id": "prt_c6487e02f001zl86uDD5tX3c3G",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487cfc6001E8vE5EboTJ9mWF"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213152313,
          "completed": 1771213166889
        },
        "parentID": "msg_c6482a8db001Hr7xDkYcxWeSRO",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 73395,
          "input": 253,
          "output": 694,
          "reasoning": 403,
          "cache": {
            "read": 72448,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "stop",
        "id": "msg_c6487e039001VTrdZKE7h2g2RT",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "ef7c88dd3456ac1f44cca818a644bb0a19dc1e60",
          "id": "prt_c6487e909001c4YgFaIwTUxYaH",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487e039001VTrdZKE7h2g2RT"
        },
        {
          "type": "reasoning",
          "text": "**Summarizing final deliverables and verification**",
          "metadata": {
            "openai": {
              "itemId": "rs_09c5abf6576a211b0169929163dd488197a15ea0bceba3e6a2",
              "reasoningEncryptedContent": "gAAAAABpkpFqoxIbMMnsz-kyX8DroNXXASZLfD-m4O9UB_no7Pk5al0JPwR7xl2PxoQ3gzejqdP_lnGubRpKVjGoSLlRgJAZtJYTSHIuGt7ha1V9e-m9C55N196Aaoh2SjENIWvUsaf9qKGiWYsfwh3rXjPHWBf5PK7AWkAVJVH75LDgcKnFi3iOgmm5L-DeO27gpUot7Wq9fwctFh54CqEAY6sev-DmLN16I4mxfpSeAKGKc7yAfH_RUO13zvZ7SNPphMcCRjtuXwaI3Mj_d40_ZduW5w5uWI9AJ-hAkAIBUwKRTCvJEaq_makNDsHq3k0KgbBmCHvR6AUnr3witY_3sv4cKIsBT4hMk0j0hnxvD48lIQU1hudehDsyxT99YjUaUW4A58zCSyUZA-Ya4AfkUtTqxAjNL8Is87Swkjya-YANlGZZVy_0NbzKlhO29Ao4cKGU5WwJXFeik1p5KOdgaMgBbnAQhCTMTlqqkBzzBDIYf8Ac-LnDDx7K_OUf81QMnLOGkLvWnV9d1dbrqr6y0TFUe6mrAxv2zpVyF7TrhK7SOZIWvIL3dqyQrziP0YgDJNCXsDuJnNOqTk7jKTLlRZvfgh6VIcn_eb5Jo4O0NcHHvExJz4z946elv6-cEMC5URYl8CiZ4Tnb7ZCQQNHeuOb0_jSBNBtGoPYML9vhR4Z13cHM7W37BUoy09-HCdJVU-6eyfzsrfHA28TQrdhN-NhXlfbHjGhcuLPObq6JmqWE8qKckXPdBdSfuBTgWjt2iZxUITTnDW-XDcIX586F7QsDxFa5U2uM5_jpUzq5H-2JWjJFrj1Zx0FxgtBaEJuA9jtndepliNKroUz9GzksoCUxxtmHyj2vpebNYgqAXOATLlXLtz5lFj-ZjBJsl9XSxHoyspZM88GB5n-oM0LgcY8GjA_uS2iFqO8gkN08JGOEpi3ZwGgUaLGD6Uu7TSlZWmbHx8YvLWx5FMsEtOiEumqCLJ3BG8lNqajrr27JSb0qPB0Sk62A5X40-uGVNMsvh7MUYyOeBgcSPoPIKry8sKaI6lF9VTnjtvYjF_dXho58_jQyanECdMMMBDYV4ZCgVFBSu2vqp7NQmIRwEKXa57BeSyIWkf8dSPClBZPDymEIa2r-uQlYpUplWTQ48_0fc2dcX6l_mWE8LVA-VSPa-3caQW2I0ABu2LzILjIRbQw0h_f837LZu3OcimYqBWXCiCn_S094MwDea82L4plPxTzVgj_eeXhCc4zp9GnqDe1G1Sqvuk07PmNekxLMLOV6YYFNFBCxE4I4rZ5iOdYdqeLbEL2WQNB8yWGvKFeXc0dUrrquHZ32O204eM-Zw3PHGfVxGTfIy1Q7jKzJh8JyD1-ujq2aZ_tLZfEBq7HjPF6tetGIYAwdgFqtLr3NzTqGX3eT3ZGkZ53xaqhYDDVX7jMJc6COLjeb_Z-nVehjJIo679vwNtyPTepW_jvQ0bJA39M0b4wK2S75hR1VAsKG4U55roEB4fMurCxVmsNzmHBevE3ePFfDsryYHKukSkSv2zaSNupuLXw4xb6n9O5mOBf1agClk-1U1-6tiEUh4Na5CqqadFwX5GJWtblPGnR5O1vsqH0sibQNFiQu1i_7SwYWtdYUTh-3vq8ndDDhV-k1mHyH04eOH3QI6gdOvAWG1XTXPk4pwVsMh4Lc_5kWNz3W8vQ8QYIT2v82aSpn1HPdxUgbUJNBv4lfNjmrTUF0SapByd_gwbTUJclg25cKULe-tWk9O36ERBnkkckM1nSUy1sdktM3HpMy_QHLxs1Ube2mxppflYPsLVOiRL8ljIu1egSSp5y5UuQ-coWf3V6x-ZJggr4FpoyYHIV3sIpWsAaxE_4GHj6gd1YD4fylq1bLxd_R4pYTfYu-TAYxAOahcdqHu0gvuKtJfWAkyWlIHfEh1U9F4sijGefx-OmqNvrrVXmi_iWYq83g82fkcWxkcW1TEi_mJkiewPuTMj6Gu1mt0cQD1Cdg1GzWW56n4L95bNHDwplvTqOfwz3AdI_0FB9sIMj7jYdZKGsQhrpzYbKt1bFPemxoA4_SAhxp1KVYiW8uWfwXJLYwsAlBSBVb9_4wThHKCTGpatVOzgAvXhfj4FvhglsjFJ6-dMt4aORipv2E98u7Bgm8CsHmCqSPfJ1Sj3bd1MKn5_dAjJldcs1lAjH7J3Cxw6MeIT7EqSCFNdLTqWZKmGMcTbG7NntVFu9cUqksNq8CWZP7BXTrrO_WRNsRyK2XQIg-alSG_USvTKxjg6NgCvdTw-Snd--0dhYwm5j_wULf_A2ZQSfib2XPBiflTxxPQp1mPWi3V4D1UpiPdZIOQH6A29ce5cpMt5Wa1DnyxX9449KfG8UshAJuaj_GY2ms3scVVXIC3-ILMEhGqry1JhmP-ECg7cltOWB4Zuxe4G9HZzg9Sj_2nCq5Rn5sSa1x8_4LXdrOIN-s1EUiG7Y-eGj3-BmOuCFO1hdV-qzb7B1YuznAKJf8cC1RcmjMq1dtCR17k4P05SQFCoTjLrgqRBwnKHaK8f19LEOG4-IHvolcmQaLP2bD_mevsIXIK2toeCzROuwD_x4S5kRf2eEcGtsRMKg_jQFB7zfm3iBFuwZp6FrvkIQ7P0ED3VHRuPSnkgsCYovoygIB_3MtbPBO7xWBQKcoXavaCxSDOxEyskmHKnXOURX3KUUi8V0LG_5YGx-djnn-l18q4dam3hTix1E_xNoHkaQIUd6vFVcpdTGaETy9qe7g70XJSYzQXoTLuqwhBrLFPgB7POGZoseuv6OjtJAD5zIo1gdgqb9NXerkhr3XGs397f-ZCokDqa6R3nHZpB0WVGbZb9xqh7pO5UcHsPRhvVAdSgOHDUb__KUQ0-1h32mmxN3c9wf4hACqbHpbUkMZG7YByQLFX4y8Q6YpBFJdsL38bAbKSgmbjYbC3ovvqgcnehOyzb6VMspAHIFniCFUK57u64kcQiA2dHsXhrvJZsJ7pQw9nmdy9j4ai3a2QswKvdbgLG2HyBHKMX8VDaObHBm15AE47SjWUYKJwfHL8DMvoBuKmUFNU5kWLemgXKa7YgHIwtTtq2GtvyoKz5-PB0w18HhEJ6oJHCb5zMZjc6mLolRcUzV8NIj9bxrzwj2mMcG9qm3yoJFrdEwC-5x9aJWNT85_MkwgoRx5QUlq8lQc1ce7oYl51nvykBvpEXMiuxw0BUu6HerAUdG6Na8vNivN02kBPchlMFRw73KgM-CqRsiRjg1V9_hkHyd_0bqJqT-b0K44P2CpRU-5efpho8MPkiEaT_oWJ5QW8NUHWYNnz3irZCrNIqj_Q1DzZchQFf2fuE7fA9XPisnb2DL7-aRi8E8ltoKHC9_1TS6wtayyqY5WzDi6Kpfa7qhfu2UaIFe3RIyAP58q4isQtVb4hS99bXol_sd9oiF6rgqmZBqPBsZzFLMnnyklHKvrrBKvc8bDNEidtZYNJUxfDmuc7DGIwwtzQ8mOecyltAh_tAZoV6Xt_Z94zz0hfKZBvosygHtBLSxfBMH8WcjZxThoC-98jR0jMbmeEBte5_OiVIQK3U_7gdM="
            }
          },
          "time": {
            "start": 1771213155932,
            "end": 1771213163022
          },
          "id": "prt_c6487ee5c001VztFzLOV7ws67M",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487e039001VTrdZKE7h2g2RT"
        },
        {
          "type": "text",
          "text": "Done  I used the `script-authoring` workflow and scraped moonrepo docs into `docs/external/moonrepo` as `.ext.md`, with your requested `----` header and footer sections.\n\n- New script: `scripts/scrape_moon_docs.sh.ts`\n- Output file: `docs/external/moonrepo/moonrepo_docs.ext.md`\n- Reused helper: `scripts/helpers/run_root.sh.ts`\n- New helper files: none\n- Docs updated for new entrypoint: `README.md`, `AGENTS.md`\n\nSource input used:\n- `prompt` (your request + target URL `https://moonrepo.dev/docs`)\n\nWhat I scraped:\n- All sitemap-discovered `/docs` pages (excluding `/docs/tags`)\n- Total captured pages: 171\n- Capture result: success=171, failed=0\n\nVerification commands run:\n- `chmod +x \"scripts/scrape_moon_docs.sh.ts\"`\n- `bun \"scripts/scrape_moon_docs.sh.ts\"`\n- `wc -l \"docs/external/moonrepo/moonrepo_docs.ext.md\"` (confirmed file written)\n- Spot-check footer/header in generated file (confirmed `----` demarkers and notes section present)\n\nIf you want, I can also split this into per-page files like `docs/external/moonrepo/<slug>.ext.md` in a follow-up pass.",
          "time": {
            "start": 1771213166803,
            "end": 1771213166803
          },
          "metadata": {
            "openai": {
              "itemId": "msg_09c5abf6576a211b016992916af8d081979f63b0b3989b0a72"
            }
          },
          "id": "prt_c64880a0f001OIB4VK17QlNeq8",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487e039001VTrdZKE7h2g2RT"
        },
        {
          "type": "step-finish",
          "reason": "stop",
          "snapshot": "6fcaf1d4f278d8c8334034c54e2c27d3628e959a",
          "cost": 0,
          "tokens": {
            "total": 73395,
            "input": 253,
            "output": 694,
            "reasoning": 403,
            "cache": {
              "read": 72448,
              "write": 0
            }
          },
          "id": "prt_c648818ee001QHnYuYSnZxv9kF",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487e039001VTrdZKE7h2g2RT"
        },
        {
          "type": "patch",
          "hash": "ef7c88dd3456ac1f44cca818a644bb0a19dc1e60",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/AGENTS.md"
          ],
          "id": "prt_c64881924001860xdFJEwQ3IIB",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6487e039001VTrdZKE7h2g2RT"
        }
      ]
    },
    {
      "info": {
        "role": "user",
        "time": {
          "created": 1771213467806
        },
        "summary": {
          "title": "Pagination for directory pages and adjust last pull notes",
          "diffs": [
            {
              "file": "docs/readmes/protobuf-schema-research.md",
              "before": "# Protobuf Schema Research Notes\n\nLast reviewed: 2026-02-15\n\n## Scope\n\n- Capture practical notes for authoring new `.proto` schemas.\n- Support both `proto2` and `proto3` workflows.\n- Document `protoc` usage for Rust and TypeScript generation paths.\n\n## Primary web sources\n\n- OpenCode skills docs: https://opencode.ai/docs/skills/\n- Protoc install docs: https://protobuf.dev/installation/\n- Proto2 guide: https://protobuf.dev/programming-guides/proto2/\n- Proto3 guide: https://protobuf.dev/programming-guides/proto3/\n- Field presence note: https://protobuf.dev/programming-guides/field_presence/\n- Rust generated code guide: https://protobuf.dev/reference/rust/rust-generated/\n- Rust build reference: https://protobuf.dev/reference/rust/building-rust-protos/\n- `prost-build` docs: https://docs.rs/prost-build/latest/prost_build/\n- `tonic-prost-build` docs: https://docs.rs/tonic-prost-build/latest/tonic_prost_build/\n- `ts-proto` README: https://github.com/stephenh/ts-proto\n- `protobuf-ts` README: https://github.com/timostamm/protobuf-ts\n\n## Proto2 vs proto3 (what matters most)\n\n- **Syntax line**\n  - `proto2`: `syntax = \"proto2\";`\n  - `proto3`: `syntax = \"proto3\";`\n- **Cardinality labels**\n  - `proto2`: `optional`, `required` (strongly discouraged), `repeated`, `map`.\n  - `proto3`: `optional` (recommended), implicit singular (legacy style), `repeated`, `map`.\n- **Required fields**\n  - `proto2` only, but strongly discouraged for new schemas.\n  - Not available in `proto3`.\n- **Scalar default overrides**\n  - `proto2`: supports `[default = ...]` on singular non-message fields.\n  - `proto3`: no custom scalar defaults; language defaults apply.\n- **Field presence**\n  - `proto2`: explicit presence for singular fields.\n  - `proto3`: explicit presence only with `optional` (or oneof/message); otherwise implicit for basic scalars.\n  - Proto docs recommend using `optional` in proto3 for smoother compatibility.\n- **Enum zero value**\n  - `proto3`: first enum value must be `0`.\n  - `proto2`: first value is default; using `_UNSPECIFIED = 0` is still safest.\n- **Extensions and groups**\n  - `proto2`: supports extensions; groups exist but are deprecated.\n  - `proto3`: no general extension fields/groups in the same way.\n- **Repeated scalar packing**\n  - `proto2`: use `[packed = true]` for new repeated numeric fields.\n  - `proto3`: repeated scalar numerics are packed by default.\n- **Unknown fields**\n  - Preserved in both proto2 and proto3 (binary format).\n- **Interop note**\n  - Proto2 and proto3 messages can interoperate across imports, but proto2 enums cannot be used directly in proto3 syntax.\n\n## Safe schema evolution checklist\n\n- Never renumber existing fields.\n- Never reuse deleted field numbers.\n- Reserve removed field numbers and names using `reserved`.\n- Prefer additive changes: add new fields, do not mutate existing wire meaning.\n- Avoid `required` for new work.\n- Use `oneof` when exactly one field must be present.\n\n## Protoc usage basics\n\n- Verify installation:\n\n```bash\nprotoc --version\n```\n\n- General compile shape:\n\n```bash\nprotoc -I proto --<LANG>_out=gen/<lang> proto/path/to/file.proto\n```\n\n- Validate schema and emit descriptor set (useful for CI checks):\n\n```bash\nprotoc -I proto --include_imports --descriptor_set_out=gen/schema.pb proto/path/to/file.proto\n```\n\n## Rust generation patterns\n\nRust codegen is commonly done in `build.rs` wrappers that call `protoc` for you.\n\n- `prost-build` example (`build.rs`):\n\n```rust\nfn main() -> std::io::Result<()> {\n    prost_build::compile_protos(&[\"proto/service.proto\"], &[\"proto\"])?;\n    Ok(())\n}\n```\n\n- `tonic-prost-build` example (`build.rs`):\n\n```rust\nfn main() {\n    tonic_prost_build::configure()\n        .compile_protos(&[\"proto/service.proto\"], &[\"proto\"])\n        .unwrap();\n}\n```\n\n- `protobuf` crate ecosystem example (`build.rs`, from protobuf-example):\n\n```rust\nuse protobuf_codegen::CodeGen;\n\nfn main() {\n    CodeGen::new()\n        .inputs([\"proto_example/foo.proto\", \"proto_example/bar/bar.proto\"])\n        .include(\"proto\")\n        .dependency(protobuf_well_known_types::get_dependency(\"protobuf_well_known_types\"))\n        .generate_and_compile()\n        .unwrap();\n}\n```\n\n## TypeScript generation patterns\n\nTypeScript typically uses `protoc` plugins.\n\n- `ts-proto` quickstart:\n\n```bash\nprotoc \\\n  --plugin=./node_modules/.bin/protoc-gen-ts_proto \\\n  --ts_proto_out=gen/ts \\\n  --ts_proto_opt=esModuleInterop=true \\\n  -I proto \\\n  proto/path/to/file.proto\n```\n\n- `@protobuf-ts/plugin` quickstart:\n\n```bash\nnpx protoc --ts_out gen/ts --proto_path proto proto/path/to/file.proto\n```\n\n## Agent defaults for new schema requests\n\n- Ask which syntax to use: `proto2` or `proto3`.\n- If unspecified, recommend `proto3` with explicit `optional` for scalar presence.\n- Ask which TypeScript generator to target: `ts-proto` or `@protobuf-ts/plugin`.\n- If unspecified, recommend `ts-proto` for idiomatic TS interfaces and flexible options.\n- Always call out features that are syntax-specific (for example `required`/extensions/default overrides in proto2).\n",
              "after": "# Protobuf Schema Research Notes\n\nLast reviewed: 2026-02-15\n\n## Scope\n\n- Capture practical notes for authoring new `.proto` schemas.\n- Support both `proto2` and `proto3` workflows.\n- Document `protoc` usage for Rust and TypeScript generation paths.\n\n## Primary web sources\n\n- OpenCode skills docs: https://opencode.ai/docs/skills/\n- Protoc install docs: https://protobuf.dev/installation/\n- Proto2 guide: https://protobuf.dev/programming-guides/proto2/\n- Proto3 guide: https://protobuf.dev/programming-guides/proto3/\n- Field presence note: https://protobuf.dev/programming-guides/field_presence/\n- Rust generated code guide: https://protobuf.dev/reference/rust/rust-generated/\n- Rust build reference: https://protobuf.dev/reference/rust/building-rust-protos/\n- `prost-build` docs: https://docs.rs/prost-build/latest/prost_build/\n- `tonic-prost-build` docs: https://docs.rs/tonic-prost-build/latest/tonic_prost_build/\n- `ts-proto` README: https://github.com/stephenh/ts-proto\n- `protobuf-ts` README: https://github.com/timostamm/protobuf-ts\n\n## Proto2 vs proto3 (what matters most)\n\n- **Syntax line**\n  - `proto2`: `syntax = \"proto2\";`\n  - `proto3`: `syntax = \"proto3\";`\n- **Cardinality labels**\n  - `proto2`: `optional`, `required` (strongly discouraged), `repeated`, `map`.\n  - `proto3`: `optional` (recommended), implicit singular (legacy style), `repeated`, `map`.\n- **Required fields**\n  - `proto2` only, but strongly discouraged for new schemas.\n  - Not available in `proto3`.\n- **Scalar default overrides**\n  - `proto2`: supports `[default = ...]` on singular non-message fields.\n  - `proto3`: no custom scalar defaults; language defaults apply.\n- **Field presence**\n  - `proto2`: explicit presence for singular fields.\n  - `proto3`: explicit presence only with `optional` (or oneof/message); otherwise implicit for basic scalars.\n  - Proto docs recommend using `optional` in proto3 for smoother compatibility.\n- **Enum zero value**\n  - `proto3`: first enum value must be `0`.\n  - `proto2`: first value is default; using `_UNSPECIFIED = 0` is still safest.\n- **Extensions and groups**\n  - `proto2`: supports extensions; groups exist but are deprecated.\n  - `proto3`: no general extension fields/groups in the same way.\n- **Repeated scalar packing**\n  - `proto2`: use `[packed = true]` for new repeated numeric fields.\n  - `proto3`: repeated scalar numerics are packed by default.\n- **Unknown fields**\n  - Preserved in both proto2 and proto3 (binary format).\n- **Interop note**\n  - Proto2 and proto3 messages can interoperate across imports, but proto2 enums cannot be used directly in proto3 syntax.\n\n## Complete valid type list\n\n### Scalar field types (all proto syntaxes)\n\n- `double`\n- `float`\n- `int32`\n- `int64`\n- `uint32`\n- `uint64`\n- `sint32`\n- `sint64`\n- `fixed32`\n- `fixed64`\n- `sfixed32`\n- `sfixed64`\n- `bool`\n- `string`\n- `bytes`\n\n### Non-scalar field type forms\n\n- Message type (local or imported), for example `my.pkg.User`.\n- Enum type (local or imported), for example `Status`.\n- `map<K, V>` field form.\n  - Valid map key types: `int32`, `int64`, `uint32`, `uint64`, `sint32`, `sint64`, `fixed32`, `fixed64`, `sfixed32`, `sfixed64`, `bool`, `string`.\n  - Map values can be scalar, enum, or message types.\n- `oneof` members (each member is a normal singular field declaration).\n\n### Well-known imported message types (common in schemas)\n\n- `google.protobuf.Any`\n- `google.protobuf.Timestamp`\n- `google.protobuf.Duration`\n- `google.protobuf.Empty`\n- `google.protobuf.FieldMask`\n- `google.protobuf.Struct`\n- Wrapper messages in `google/protobuf/wrappers.proto`\n\n## Complete schema definition layout (reference)\n\nThe grammar allows flexible ordering in many places, but this layout is the safest boilerplate for new files.\n\n### Top-level statements\n\n- `syntax = \"proto2\";` or `syntax = \"proto3\";` (first non-comment line)\n- `package ...;` (optional, recommended)\n- `import \"...\";`, `import public \"...\";`, or `import weak \"...\";`\n- `option ... = ...;`\n- `message ... { ... }`\n- `enum ... { ... }`\n- `service ... { ... }`\n- `extend ... { ... }` (proto2 and custom-option patterns)\n\n### Message body statements\n\n- Field declarations (`optional`/`required`/`repeated` in proto2, `optional`/implicit/repeated in proto3)\n- `oneof ... { ... }`\n- `map<key, value> ... = N;`\n- Nested `message` and nested `enum`\n- `reserved ...;` (numbers and/or names)\n- `option ... = ...;`\n- `extensions ...;` (proto2)\n- `group` (proto2 legacy, deprecated)\n- `extend ... { ... }`\n\n### Enum body statements\n\n- Enum values: `NAME = N;`\n- `option allow_alias = true;` and other enum options\n- `reserved ...;` (numbers and/or names)\n\n### Service body statements\n\n- Unary RPC:\n\n```proto\nrpc GetThing(GetThingRequest) returns (GetThingResponse);\n```\n\n- Streaming RPC:\n\n```proto\nrpc Chat(stream ChatMessage) returns (stream ChatMessage);\n```\n\n- RPC with method options block:\n\n```proto\nrpc GetThing(GetThingRequest) returns (GetThingResponse) {\n  option deprecated = true;\n}\n```\n\n## Boilerplate templates\n\n### Proto3 boilerplate\n\n```proto\nsyntax = \"proto3\";\n\npackage example.v1;\n\nimport \"google/protobuf/timestamp.proto\";\n\noption java_multiple_files = true;\n\nmessage User {\n  // Use optional for explicit scalar presence in proto3.\n  optional string display_name = 1;\n  string email = 2;\n  google.protobuf.Timestamp created_at = 3;\n\n  oneof contact_method {\n    string phone = 4;\n    string slack = 5;\n  }\n\n  map<string, string> labels = 6;\n\n  reserved 7, 8;\n  reserved \"legacy_id\";\n}\n\nenum UserState {\n  USER_STATE_UNSPECIFIED = 0;\n  USER_STATE_ACTIVE = 1;\n  USER_STATE_DISABLED = 2;\n}\n\nservice UserService {\n  rpc GetUser(GetUserRequest) returns (GetUserResponse);\n}\n\nmessage GetUserRequest {\n  string user_id = 1;\n}\n\nmessage GetUserResponse {\n  User user = 1;\n}\n```\n\n### Proto2 boilerplate\n\n```proto\nsyntax = \"proto2\";\n\npackage example.v1;\n\nmessage User {\n  optional string display_name = 1 [default = \"unknown\"];\n  optional string email = 2;\n  repeated string tags = 3;\n\n  // Required is proto2-only and discouraged for new design.\n  // required string id = 4;\n\n  extensions 100 to max;\n\n  reserved 5;\n  reserved \"legacy_id\";\n}\n\nenum UserState {\n  USER_STATE_UNSPECIFIED = 0;\n  USER_STATE_ACTIVE = 1;\n}\n\nextend User {\n  optional string external_profile = 100;\n}\n```\n\n## Numbering and wire constraints quick reference\n\n- Field numbers must be in `1..536870911`.\n- Field numbers `19000..19999` are reserved by protobuf implementation.\n- Never renumber existing fields.\n- Never reuse removed field numbers or names.\n\n## Safe schema evolution checklist\n\n- Never renumber existing fields.\n- Never reuse deleted field numbers.\n- Reserve removed field numbers and names using `reserved`.\n- Prefer additive changes: add new fields, do not mutate existing wire meaning.\n- Avoid `required` for new work.\n- Use `oneof` when exactly one field must be present.\n\n## Protoc usage basics\n\n- Verify installation:\n\n```bash\nprotoc --version\n```\n\n- General compile shape:\n\n```bash\nprotoc -I proto --<LANG>_out=gen/<lang> proto/path/to/file.proto\n```\n\n- Validate schema and emit descriptor set (useful for CI checks):\n\n```bash\nprotoc -I proto --include_imports --descriptor_set_out=gen/schema.pb proto/path/to/file.proto\n```\n\n## Rust generation patterns\n\nRust codegen is commonly done in `build.rs` wrappers that call `protoc` for you.\n\n- `prost-build` example (`build.rs`):\n\n```rust\nfn main() -> std::io::Result<()> {\n    prost_build::compile_protos(&[\"proto/service.proto\"], &[\"proto\"])?;\n    Ok(())\n}\n```\n\n- `tonic-prost-build` example (`build.rs`):\n\n```rust\nfn main() {\n    tonic_prost_build::configure()\n        .compile_protos(&[\"proto/service.proto\"], &[\"proto\"])\n        .unwrap();\n}\n```\n\n- `protobuf` crate ecosystem example (`build.rs`, from protobuf-example):\n\n```rust\nuse protobuf_codegen::CodeGen;\n\nfn main() {\n    CodeGen::new()\n        .inputs([\"proto_example/foo.proto\", \"proto_example/bar/bar.proto\"])\n        .include(\"proto\")\n        .dependency(protobuf_well_known_types::get_dependency(\"protobuf_well_known_types\"))\n        .generate_and_compile()\n        .unwrap();\n}\n```\n\n## TypeScript generation patterns\n\nTypeScript typically uses `protoc` plugins.\n\n- `ts-proto` quickstart:\n\n```bash\nprotoc \\\n  --plugin=./node_modules/.bin/protoc-gen-ts_proto \\\n  --ts_proto_out=gen/ts \\\n  --ts_proto_opt=esModuleInterop=true \\\n  -I proto \\\n  proto/path/to/file.proto\n```\n\n- `@protobuf-ts/plugin` quickstart:\n\n```bash\nnpx protoc --ts_out gen/ts --proto_path proto proto/path/to/file.proto\n```\n\n## Agent defaults for new schema requests\n\n- Ask which syntax to use: `proto2` or `proto3`.\n- If unspecified, recommend `proto3` with explicit `optional` for scalar presence.\n- Ask which TypeScript generator to target: `ts-proto` or `@protobuf-ts/plugin`.\n- If unspecified, recommend `ts-proto` for idiomatic TS interfaces and flexible options.\n- Always call out features that are syntax-specific (for example `required`/extensions/default overrides in proto2).\n",
              "additions": 181,
              "deletions": 0,
              "status": "modified"
            }
          ]
        },
        "agent": "build",
        "model": {
          "providerID": "openai",
          "modelID": "gpt-5.3-codex"
        },
        "variant": "high",
        "id": "msg_c648cb09900136tN0NYvnleTmF",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "text",
          "text": "Oh yeah I wanted it split into pages in that directory - adjust our last pull and any skills/rules/commandds with this note",
          "id": "prt_c648cb09a001A4pBZzZan4Lk86",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cb09900136tN0NYvnleTmF"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213467814,
          "completed": 1771213487298
        },
        "parentID": "msg_c648cb09900136tN0NYvnleTmF",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 65413,
          "input": 64507,
          "output": 906,
          "reasoning": 766,
          "cache": {
            "read": 0,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648cb0a6001hJjTDASzbpeVoA",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "37f68ceed79b1d94d2e8dd2c56dfe86f08c21423",
          "id": "prt_c648cba8d0016QjwmB757xhnuz",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cb0a6001hJjTDASzbpeVoA"
        },
        {
          "type": "reasoning",
          "text": "**Planning per-page output update**",
          "metadata": {
            "openai": {
              "itemId": "rs_04996a0ee47d4dc601699292a030f8819583e1cd980cbf03c5",
              "reasoningEncryptedContent": "gAAAAABpkpKvbPnDNRhn_qADWtsKGkW6HZbqi-A02CjC_g4YuGwIDQTmoNcbPh68nBIABh1ymnDa19bvhpxFnYjYz-Wxe-eCLc8D4nBjlVluo_qvXmRFHbT6p4p0r7MnSA1nknl6JlRyRcK1hOgSkMAzAfwgmnBPgGcHxeq-QYdO6riIRiyEYtR_8mIOjrc4r3LFSP7UiZXNN1bWBQijOxDXAzunhF70qWeMiQOW2TUDKiIfWOFNMkkZqb92yLTrQNTZ9NtAS0oN2vMSYJH2R89bIbi61c2zo_FLR9NFDbKfy7LrqiT7Bdvl4mIsqbikFGM_AXKNsLsVEjubpUosarugtRWZyruyIEUP-XRKpLtmPGTntT2t1YWmDEF3IJpwC5WMgHtR0U5-twYZSEllqyJ6pkGmIMHhV-elZtGgd7rBQoov4IN7Rbc9BCiDmgJSB9FC2B_IKHiF1lbEtHyDUu2oIr1wZ5QEef-yFHJQ1DZ4Iu3I-2KMI8CgtnLnZWNMVarLcH2og7iMfCQS4iVT2cYe9KsPczRSwZh4T6CdllGEP0-kf0KZUtP44pBEZlDSD1WqczcKowWo5OEikhV7l4HQIvAbez53NskxqRgohsaXb-wCkl3xSRwhZugy3LAoeWFZCEKYOI_sMJ9NkG4HMRDkjVIU51gSHxYykg38k0zDF2lJykT6qRkguNhh94EVfjv-vLASImcCnWPjtD9VR_1q8oOPjQwcp97q763hX0KLtZha-8vP0aPW_I-MmRV-6y6QpXdqbBrA5_tbUzVcZmCHMeceoqYgFNT2U10Jmy6FBOiofuGzSsS49Fpsphsb9VXPnmzWFXmQS87_Li-QZlXKZTTMXrwtVnapiBiLFaIS0J6xMTaV38lSZE74G1s_m2bTzCUYMqWfZrcL1YO-biq_wF1ehSvp5ovD3DEh8RcAcum0P-CSdJtMSx3yWOUaeUmV0YVaoiBhRDrkCpYy6bh3UrwqsT5JzdZExBCii83dnR0iFuIGVqdP97otP_xRVw0A0Jh-kGHtv1TMOfr_QcVm6Uj82dJ-c8bTM27zprFOG1URT3jzLCMoDM-CdfZZocLclWlTwHc2oN1KltRLmfX-I2ijIkEpYjVZJnd5h5b9ZIRYHPymys0YedXjneQN8FFIO0Ira3ESpoY4SdMtZcF6ekXVkpR3w6XF4biH1Ug_IAew2bKa63Ad5j3DJybY0tf2wDgrP6Qh0pIqygfEgw4HDXHm9nQDAEONdTlINWpbxbPrj6OJENmCaF3mWklg7kVBlcZB2QZK5LNU3tSG5s70x7-83-EBoHHKtV8G5csLmLbQLM_uTSb-851mAuyF2wLyH25gQBgeHX863wNG_PqlUp1ICBnX7fBUKWcEng8sNJA8w8N0_-JAGS4l5_hUTcbFv29WKLNm4iYkNl94ekv5AmgX13yh32lIROxELoR3Ij7_Ak5qZBKCkIFa9rsdmQgulomey-mi2FvIy4MsdqLsflZpjt7ndLqVE-zBvNaF462LXKpmM_WOyv_Va4qfTA6DWVegVzUvFd6RQNjvOxvn_tcbODtD_Hd2uHSShErRj3SiR34PuWHi1KHWTRfpjGmqUIN7FdE-fKMcS87Qwb32tMWIf8bdTCByXbFwGcUybiewtORWfM0OhkBPiA1YZXbsNr4d08oWgXIUTQLBkhmF0hx4LHziyol4Z8LVrC41MopMzsNENb342rnKrLDSYodNiRdFm_59IW6MR_SNvRmj9vTzQeZy0pdo9QMttadCZJpFEp9B9cFt1T8CtldBpoXdOsyWojADBTDFaoF_3HWRsUWCkMidNNLf8gICx1Xu-Iboekq_6AVrg_qMYceAYoUJu8rD4T4sny1-QeJXDjFsciSjdo2Zm0jmDPCfkFJBEOdFYKmy0yU5nS42whqQWiJhd68NNJjzM5GA0ijNb8Yvu2XB3if3_0Fk1a5TMStpZfgBFOAjHSLqMpxxoH9FtU4g_-f9W2uKrsLE6xv4F3REm1b84B1p0vjLrNKydwrwtnglIWcJuN9pMVM1NOHwi3kqPUhtAJe5j4IgOIOHAiPzCumsn0UeqpM3U3RjOhiM-N-uNZOcUldWT4ld0e_XHkYpIVZP-kD9W0ERfuHc-l-eMv3UMsbSIE8FfzMBnJ3bpfjgZjZCOYMxRe59tdHXYwAAxY_xlcluS-CMJm22RNh7eA55fqz2pJ_FbVOYmH9fEtnpa4t_z1FwzE74qAPf9qvXULiqF20okw30sJusiiVbhNdq3cZ2-WMv4Jo-8MqhctWJ5fdirLwgijz-6TjyfQeRjtUXqBeG2c5CbgeRF8Jzjt0TXzGqg7-sNvJ0ZyXkZqHU8J1ip2U8Q5idld_BtcKmQvGyKlLp2Y0bQrzqaZ37wowRWsc6OEJJkxA8Y3Jm1fEiRxme4RaxiGjyE0kQ8sxvEd3VoXNj9aT3FbUNH3EhiY0oMvKgizDZ4--qBiKpDFclO-tLoIjMf1naS1GAcCefAI9iQvSIujCa71OnLGqZVWWf4dPNqeSdoAZdCKuaFKRkSUFop4j2Sjbqvf39wejqcIiK8eoum28By_GM_Qp2hADG1c2e92yqzrzf2xWBWmZyxj6P3xHHkAny9BaLhb_RXEr-Iq1w0kDvutDTM0uz99sTlUzu61DdC9YiAax3UDwl9hX1qYNwiqbZ0JIwjvoD-LSRwEcy7q_R2ek19fIv6E91O58g3WcQRHf31qIlkiMnOpd_qcVmXk3aB98W7NeWZnUcApTGq_SbXi9PkFf6p-YAhV7bHpq0M9vFlbpzVZyjBGB48D606LLCIeTwb9ICNRwjQvNwU6JJQ83mNxsSdzb5PHe4rBFT3kZ90xoiaJQbYy0SO4EHN32U2Rl_14jytERtkIDrLRQRD3UD8rnUehhnmIOUIPjJg3rR_6dvWmHw83vNG84vJLHmypX-MpbkGA78r_uciwSLhy9LAjjFovXZ6RFbFAkJzBDLAtbG9ZJSQ7HYsNikND5zda9zpWcEO6yioeEKBDXNfxnkhkPhvJB-L0GpIjFR0hCxWmOdi_XZHmho9GbS0lMkiOQUeQFPMrOfwrPuvFRXPTbVrMlqY8iiEL45gI-GwmKfExKg2AcLc7K7K2ROjQuKPlSPdqLg4HrFHVlugPuUOonPZhnqSjEWJ-rcksp4D2NeHVp51f1ahs3TrUbhSyJ49d7qclAqueK38oJYcVEmf0PXAwXgr0VQEHQ4v-zW6IybOUlXd--f6HuKXJCBySPmXknArXN24fLqOdVytRXLOXQobq7E0WXqbOgp89yEdz2dagZL-RgCmp6FarrVmAuTjBCXFVilEymcKmPlO8Dn_-KBqiETTOQLI5IjzGIdJ63h2YnBvDbfgacT-sR2dUJaj8dkeZlgW6YSujxF-6tlbGqYYny_NNWURxVA3OWP6TJkQQllzDuCvwb7bPt2ua4Jmum7ccwMUzR9PXoKk0zRuJ2KjMiprAy4fB5Wpurot7aMcAwcNzrmxHDOPVzvDhUmhzI5rDujSgN7IRqcypdpi9m56sfACT5BEFpq0hZ-jXddgy_Ql5oYS-k_E3Jw-RYQAPCQcDd1_aToNyNyrOfKm4DJEuzyJ4Xxudtc2-Kz7j6a1343m6jxasxTSoAIqDc5OB0OfHGHT89FCHaDfBHRU09WPMIe4FRASYRzeaqXdgeY1UT2jMQ1dT6XGUP4qa-pirD0RGzrlKJJd-oZldSHoZTPVEcKzXZaZ2vW5ymyNDvI40RqBQMzTzvEcMNXWEXNVEVKcYrjUjt4zW8bBQ-TiY156XprZ98sk3ECNe-MRO6XCaXbBd-i2udwLIgWDlrJMO1B-L5XdfUVZ9vwvmd2UfthSusgpkHWFFOo0S4NX0Mc-SYTmx0-sgc4EbpS2HOYO-BfCrVVJ4q--3r0iBz5EvYVdDD6INtJLu54RYBCDCZkECAKqG53OhzFsGKGbA7Peo2QuyVDpxkkG6zZoxBKKD6tKHVto9SzpUGFqDKdgf0uYd10jriQfYGzvjqV4ai-tp1MIOJfDrqgOnJrh_Htk2lJnZRIQzwHXBiZHAjSlWX54TbdRFGi8LJgY0YOlSWFnADNFTM3ejmMWgumw2MLL8fINXYtq_e4vpjrXIfhGObeWimqVbtrg-vnfokJG3B6yGJrssGjLLAA8qJA_en_bf0l_f0xVL7blLej-z_uSpg-7xPGFmJucmoVbzdjDmF94hoGTddhL452HJeZnFJwMWaSa0dkTvZFkrgO0Z89BCG4J7ZpMRCBdlP8juL2KdIEAryvzL8aJ4zlryHusFFGWmTWbo74B_e6TOWZdnOT1apdEtxOKut0hOnskYSeUQ-3qa9pGtWzpx70V0nDj9CPZ1Ms9LXxh0FHN_t5Hvr1mfuV8S6Jg--H8gH-fM36FD_-95EZt1QrcaFu44Tp4dYcws5GDDCP15IVkgH7ifdgeB0uvns8MoEmKPxSdIGBgsEyltfKWOgiZ-UDpKKrFIbdJburFG4PIUgUvhJ6PaB_2YjkHhYr7B9-aEvjvhZnd0YVfyID-OpsRXSs41Zog5CngH0QdlFQOlziUj7bHVXNrg3Nl8888ustp2UNplL8N14CsJ7AUgzlBS9jC03yFuuif_gjQDC60x-slDZjMkWiTzUpf2NpO6KOLAqnKNAqS9sr0ZZowyEiWQfCH2IDIA0DhAmTVM7A29zVhE3gyf3da77VBeeqijfHqPvSXmJtr3LEQId00CD8ffjic7kuFEmZYIkSNCz_3XAz5pBHRuKHJQwpagGtarkoTKN6TxrdOLuwumPFJZttw3vzzVsVbfDZLyejS7kbjVrfOvKFOY3RBWsoW92dCJ2G-vFUiJUAoiOwr7oe9voQS1EPivu84aR2TKf3hsnlT1pv6kaCzSXLoySNqW3OiUrngigomei06klM4bTK2V4Xk0ToU_IaBPf_UqYR5GSvQWjn02ZcpqyfQz7Q4i2X7pV7FOqyVlgv6qtrjFsrA53vIheDvC83-Ef-kNDEbUNRQXzjxnSor72CzupIDoEOClndceqA5LpdM6-EfgMJu0tAVhNb_la7QC0skjIR7NMbxhfvfblmV2hNye6sJw6y7zKzhwFMQL5Hn8miy1MKPG9TYQ-cKH46ZBXRgBLpU9GW41UDmTAHmF2TIV3lJ1a6xCNRhloGdc3JDjQpylvAGwacNUAO2826c3mprXenUWn4-dMbnVYe1vAGLMUBF706-AU8ndjeUD7Ph962crkPuwJZZpUfychVITY_EfqQ2Yk-6L6ak65TvupKIhhh_Ct7TcQQQKTnDuRSxYcLb_QAJtTEyINfYm5OAmogV2BBpmA9iAIbQwDIJkDwGFri1GExUu-4JIEFVu8ZkaaV6pk9yTi3pErh8Nv6pjrez9IerSwjc_GtmyI6vFag3su8s57zVf79gpn3GPMUN41W5AmhJkhglwa6J7aVyzkWTmODF53zMZpYju0mvByWai_dExVRs15D938pJFWRcj2JW3NBZNYKISeT6n2L0j12ZAN1Ws3Hcw8KBvyB1htJF2kQPP913RzU9R7Bh98X7GiZld--0nH4-OKRLn78Srfj-drrN0qPkE8Y4sSZlqdQ95XojwWehqS1cV-S5_l1XRdpEzeiBnCYYR4XOFSV6oXVS1rNtkzFBMcEY7Xw0ksdYvBmrV1SLZEzTfYfiQQK8xj7LU1eYIcM3hziOt2GBHiwBbnfwbTLxtHPUNgI1w-p-BkFFYrktGP6_I18KDL3C0w5ixkqmfe-4YGZi_FHDF6-LCQ25KYwdTk4oNZPo2ROmSGTBdDUvIzgfqTZhksLzp-qSCrAj5BgdaVxlOHk66dyhVQtQXjnQDFyP3g_q3NeWALIOfaFiZB5EPvPJX74vEBj9Y5rnxT0uVJNmaKIVxha5DR_Pd09Y9LtPpwUrA=="
            }
          },
          "time": {
            "start": 1771213472230,
            "end": 1771213487131
          },
          "id": "prt_c648cc1e6001jUNmE52uA6Cqul",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cb0a6001hJjTDASzbpeVoA"
        },
        {
          "type": "tool",
          "callID": "call_4C0cQ1tLC5XTuMi6nEleabLQ",
          "tool": "glob",
          "state": {
            "status": "completed",
            "input": {
              "pattern": ".opencode/**/*",
              "path": "/Users/alex/repos/vfp/dark-factory"
            },
            "output": "/Users/alex/repos/vfp/dark-factory/.opencode/skills/protobuf-schema-authoring/SKILL.md\n/Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md\n/Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md\n/Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md\n/Users/alex/repos/vfp/dark-factory/.opencode/skills/proto-install/SKILL.md\n/Users/alex/repos/vfp/dark-factory/.opencode/commands/commit_all.md\n/Users/alex/repos/vfp/dark-factory/.opencode/commands/rule.md\n/Users/alex/repos/vfp/dark-factory/.opencode/bun.lock\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/index.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/types.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/types.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/sdk.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/index.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/server.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/server.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/types.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/types.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/utils.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/queryKeySerializer.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/serverSentEvents.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/serverSentEvents.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/utils.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/queryKeySerializer.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/pathSerializer.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/sdk.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/bodySerializer.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/pathSerializer.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/params.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/params.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/bodySerializer.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/client/types.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/client/types.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/client/utils.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/client/utils.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/auth.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/core/auth.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/client.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/client.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/client/client.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/client/index.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/client/client.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/client/index.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/gen/client.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/v2/client.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/server.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/index.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/server.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/types.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/types.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/index.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/types.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/utils.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/utils.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/sdk.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/sdk.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/types.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/pathSerializer.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/serverSentEvents.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/serverSentEvents.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/pathSerializer.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/bodySerializer.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/auth.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/auth.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/params.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/params.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/core/bodySerializer.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/client/client.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/client/types.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/client/index.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/client/types.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/client/utils.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/client/index.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/client/utils.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/package.json\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/client.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/client.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/client.gen.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/client/client.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/sdk/dist/gen/client.gen.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/plugin/package.json\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/plugin/dist/index.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/plugin/dist/example.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/plugin/dist/tool.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/plugin/dist/shell.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/plugin/dist/index.js\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/plugin/dist/example.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/plugin/dist/tool.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/@opencode-ai/plugin/dist/shell.js\n/Users/alex/repos/vfp/dark-factory/.opencode/package.json\n/Users/alex/repos/vfp/dark-factory/.opencode/agents/gitter.md\n/Users/alex/repos/vfp/dark-factory/.opencode/.gitignore\n/Users/alex/repos/vfp/dark-factory/.opencode/skills/gitter-commit/SKILL.md\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/zod/src/v3/helpers/util.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/zod/src/v3/helpers/partialUtil.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/zod/src/v3/helpers/parseUtil.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/zod/src/index.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/zod/src/v4-mini/index.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/zod/index.d.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/zod/src/v3/helpers/enumUtil.ts\n/Users/alex/repos/vfp/dark-factory/.opencode/node_modules/zod/index.cjs\n\n(Results are truncated: showing first 100 results. Consider using a more specific path or pattern.)",
            "title": "",
            "metadata": {
              "count": 100,
              "truncated": true
            },
            "time": {
              "start": 1771213487175,
              "end": 1771213487202
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_04996a0ee47d4dc601699292af156c8195b880c2f957af12ed"
            }
          },
          "id": "prt_c648cfc1c001uSAjmYwzr7WzW7",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cb0a6001hJjTDASzbpeVoA"
        },
        {
          "type": "tool",
          "callID": "call_3RzkqlIYb62W0nZWPMU6GWqF",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts</path>\n<type>file</type>\n<content>1: #!/usr/bin/env bun\n2: \n3: import { mkdirSync } from \"node:fs\";\n4: import { dirname, resolve } from \"node:path\";\n5: import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n6: \n7: type ScrapeResult = {\n8:   url: string;\n9:   ok: boolean;\n10:   markdown?: string;\n11:   error?: string;\n12: };\n13: \n14: const SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\n15: const DOCS_ROOT = \"https://moonrepo.dev/docs\";\n16: const DEFAULT_OUTPUT_RELATIVE =\n17:   \"docs/external/moonrepo/moonrepo_docs.ext.md\";\n18: const CONCURRENCY = 4;\n19: \n20: function decodeEntities(value: string): string {\n21:   return value\n22:     .replaceAll(\"&amp;\", \"&\")\n23:     .replaceAll(\"&quot;\", '\"')\n24:     .replaceAll(\"&apos;\", \"'\")\n25:     .replaceAll(\"&#x27;\", \"'\")\n26:     .replaceAll(\"&#39;\", \"'\")\n27:     .replaceAll(\"&nbsp;\", \" \")\n28:     .replaceAll(\"&lt;\", \"<\")\n29:     .replaceAll(\"&gt;\", \">\");\n30: }\n31: \n32: function stripJinaEnvelope(markdown: string): string {\n33:   return markdown\n34:     .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n35:     .trim();\n36: }\n37: \n38: function stripTags(value: string): string {\n39:   return value.replace(/<[^>]+>/g, \"\");\n40: }\n41: \n42: function plainTextFromHtml(value: string): string {\n43:   return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n44: }\n45: \n46: function extractMainHtml(html: string): string {\n47:   const markdownBlockMatch = html.match(\n48:     /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n49:   );\n50: \n51:   if (markdownBlockMatch?.[1]) {\n52:     return markdownBlockMatch[1];\n53:   }\n54: \n55:   const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n56:   if (articleMatch?.[1]) {\n57:     return articleMatch[1];\n58:   }\n59: \n60:   const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n61:   return mainMatch?.[1] ?? html;\n62: }\n63: \n64: function htmlToMarkdown(html: string): string {\n65:   let content = extractMainHtml(html);\n66: \n67:   content = content\n68:     .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n69:     .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n70:     .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n71:     .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n72: \n73:   content = content.replace(\n74:     /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n75:     (_match, code) => {\n76:       const normalizedCode = decodeEntities(\n77:         stripTags(code)\n78:           .replace(/<br\\s*\\/?>/gi, \"\\n\")\n79:           .replace(/\\n{3,}/g, \"\\n\\n\")\n80:           .trim(),\n81:       );\n82: \n83:       if (!normalizedCode) {\n84:         return \"\";\n85:       }\n86: \n87:       return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n88:     },\n89:   );\n90: \n91:   content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n92:     const normalizedCode = decodeEntities(stripTags(code)).trim();\n93:     return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n94:   });\n95: \n96:   content = content.replace(/<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi, (_m, href, label) => {\n97:     const text = plainTextFromHtml(label);\n98:     if (!text) {\n99:       return \"\";\n100:     }\n101: \n102:     return `[${text}](${decodeEntities(href)})`;\n103:   });\n104: \n105:   content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n106:     const heading = plainTextFromHtml(inner);\n107:     if (!heading) {\n108:       return \"\";\n109:     }\n110: \n111:     return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n112:   });\n113: \n114:   content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n115:     const line = plainTextFromHtml(inner);\n116:     return line ? `- ${line}\\n` : \"\";\n117:   });\n118: \n119:   content = content\n120:     .replace(/<br\\s*\\/?>/gi, \"\\n\")\n121:     .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n122:     .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n123:     .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n124:       const cell = plainTextFromHtml(inner);\n125:       return cell ? `${cell} ` : \"\";\n126:     });\n127: \n128:   content = decodeEntities(content)\n129:     .replace(/<[^>]+>/g, \"\")\n130:     .replace(/[ \\t]+\\n/g, \"\\n\")\n131:     .replace(/\\n{3,}/g, \"\\n\\n\")\n132:     .trim();\n133: \n134:   return content;\n135: }\n136: \n137: function extractDocsUrls(sitemapXml: string): string[] {\n138:   const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n139:     decodeEntities(match[1]?.trim() ?? \"\"),\n140:   )\n141:     .filter((url) => url.startsWith(DOCS_ROOT))\n142:     .filter((url) => !url.includes(\"/docs/tags\"))\n143:     .filter((url) => !url.includes(\"#\"));\n144: \n145:   return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n146: }\n147: \n148: async function fetchText(url: string): Promise<string> {\n149:   const response = await fetch(url, {\n150:     headers: {\n151:       \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n152:     },\n153:   });\n154: \n155:   if (!response.ok) {\n156:     throw new Error(`Request failed (${response.status}) for ${url}`);\n157:   }\n158: \n159:   return await response.text();\n160: }\n161: \n162: async function mapConcurrent<T, R>(\n163:   values: T[],\n164:   limit: number,\n165:   map: (value: T, index: number) => Promise<R>,\n166: ): Promise<R[]> {\n167:   const results = new Array<R>(values.length);\n168:   let index = 0;\n169: \n170:   async function worker(): Promise<void> {\n171:     while (true) {\n172:       const currentIndex = index;\n173:       index += 1;\n174: \n175:       if (currentIndex >= values.length) {\n176:         return;\n177:       }\n178: \n179:       results[currentIndex] = await map(values[currentIndex], currentIndex);\n180:     }\n181:   }\n182: \n183:   const workerCount = Math.min(limit, values.length);\n184:   await Promise.all(Array.from({ length: workerCount }, () => worker()));\n185:   return results;\n186: }\n187: \n188: async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n189:   const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n190: \n191:   try {\n192:     console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n193:     try {\n194:       const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n195: \n196:       if (markdown) {\n197:         return {\n198:           url,\n199:           ok: true,\n200:           markdown,\n201:         };\n202:       }\n203:     } catch {\n204:       // Fall through to direct HTML scrape.\n205:     }\n206: \n207:     const html = await fetchText(url);\n208:     const markdown = htmlToMarkdown(html);\n209: \n210:     if (!markdown) {\n211:       return {\n212:         url,\n213:         ok: false,\n214:         error: \"No markdown content returned from HTML fallback\",\n215:       };\n216:     }\n217: \n218:     return {\n219:       url,\n220:       ok: true,\n221:       markdown,\n222:     };\n223:   } catch (error) {\n224:     return {\n225:       url,\n226:       ok: false,\n227:       error: error instanceof Error ? error.message : \"Unknown scrape error\",\n228:     };\n229:   }\n230: }\n231: \n232: function buildHeader(urlCount: number, capturedAt: string): string {\n233:   return [\n234:     \"----\",\n235:     \"## External Docs Snapshot // moonrepo\",\n236:     \"\",\n237:     `- Captured: ${capturedAt}`,\n238:     `- Source root: ${DOCS_ROOT}`,\n239:     `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)`,\n240:     \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n241:     \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n242:     \"----\",\n243:     \"\",\n244:   ].join(\"\\n\");\n245: }\n246: \n247: function buildFooter(successCount: number, failureCount: number): string {\n248:   return [\n249:     \"\",\n250:     \"----\",\n251:     \"## Notes / Comments / Lessons\",\n252:     \"\",\n253:     \"- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\",\n254:     \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n255:     \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n256:     `- Capture results: success=${successCount}, failed=${failureCount}.`,\n257:     \"----\",\n258:     \"\",\n259:   ].join(\"\\n\");\n260: }\n261: \n262: function buildPageSection(result: ScrapeResult): string {\n263:   if (!result.ok) {\n264:     return [\n265:       `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n266:       \"\",\n267:       `Source: ${result.url}`,\n268:       \"\",\n269:       `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n270:       \"\",\n271:     ].join(\"\\n\");\n272:   }\n273: \n274:   return [\n275:     `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n276:     \"\",\n277:     `Source: ${result.url}`,\n278:     \"\",\n279:     result.markdown?.trim() ?? \"\",\n280:     \"\",\n281:   ].join(\"\\n\");\n282: }\n283: \n284: const repoRoot = findRepoRoot(import.meta.dir);\n285: const outputArg = Bun.argv[2];\n286: const outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n287: \n288: const sitemapXml = await fetchText(SITEMAP_URL);\n289: const docsUrls = extractDocsUrls(sitemapXml);\n290: \n291: if (docsUrls.length === 0) {\n292:   throw new Error(\"No docs URLs found in moonrepo sitemap\");\n293: }\n294: \n295: const results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n296:   scrapeDocsPage(url, index + 1, docsUrls.length),\n297: );\n298: \n299: const successCount = results.filter((result) => result.ok).length;\n300: const failureCount = results.length - successCount;\n301: const capturedAt = new Date().toISOString();\n302: \n303: const content = [\n304:   buildHeader(docsUrls.length, capturedAt),\n305:   ...results.map(buildPageSection),\n306:   buildFooter(successCount, failureCount),\n307: ].join(\"\\n\");\n308: \n309: mkdirSync(dirname(outputPath), { recursive: true });\n310: await Bun.write(outputPath, content);\n311: \n312: console.log(\n313:   `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n314: );\n315: \n\n(End of file - total 315 lines)\n</content>",
            "title": "scripts/scrape_moon_docs.sh.ts",
            "metadata": {
              "preview": "#!/usr/bin/env bun\n\nimport { mkdirSync } from \"node:fs\";\nimport { dirname, resolve } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n\ntype ScrapeResult = {\n  url: string;\n  ok: boolean;\n  markdown?: string;\n  error?: string;\n};\n\nconst SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\nconst DOCS_ROOT = \"https://moonrepo.dev/docs\";\nconst DEFAULT_OUTPUT_RELATIVE =\n  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\nconst CONCURRENCY = 4;\n\nfunction decodeEntities(value: string): string {",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771213487177,
              "end": 1771213487182
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_04996a0ee47d4dc601699292af157c819595e3d0d3ff61114b"
            }
          },
          "id": "prt_c648cfc48001ZAJ9vMHQIllVEZ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cb0a6001hJjTDASzbpeVoA"
        },
        {
          "type": "tool",
          "callID": "call_We62b4tR5KkkAQUJWaGFpgJI",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/README.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/README.md</path>\n<type>file</type>\n<content>1: # Dark Factory - Autonomous Agentic Development At Scale\n2: \n3: # Concept\n4: \n5: - A central `dark-factory` \"core\" is used to track `worlds`\n6: - A `world` is an `env` + `actor`(s)\n7: - `env` is like a project and represents where an `actor` is spawned.\n8:   - Similar to `projets` in OpenCode or other agent orchestrators\n9:   - `env` may be a directory on host (simplest and most common) or later expanded to:\n10:     - Remote directory on a SSH-connected machine\n11:     - Dockershell w/ virutal FS\n12:     - Git Worktree\n13: - `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n14:   - we call this concept `dimensions`\n15:   - Examples:\n16:     - Multiple cloned directories of the same root project\n17:     - Git worktree supportds\n18:     - Instanced Docker shells\n19: - When an agent is spawned - it is linked to a given env\n20:   - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n21:   - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n22: - `actor` is a spawned agent that operates on an env.\n23:   - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n24:   - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n25: \n26: # Stack + Tools\n27: \n28: - Agentic Coding: `opencode`\n29: - Main languages: `rust` and `bun` / `typscript`\n30: - Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n31: - Optional build system: `moon` / `proto`\n32: - Common Schema Defintion: `prisma`\n33:   - [ ] TODO: Investigate use of protobuff\n34: \n35: # Scripts\n36: \n37: - Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n38: - Shared helpers live in `scripts/helpers/`.\n39: - `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n40: - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n41: - `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n42: - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n43: - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n44: \n45: # Components\n46: \n47: ## Core\n48: \n49: - Central service that manages tracking of all worlds/envs/settigns etc.\n50:   - TBD: will either be stateless w/ DB and route all commands just to the agents\n51:     - OR: a background API service (Rest even) we can query from frontends\n52: - Currently looking lile will be Bun + Elysia JS\n53: \n54: ## Frontends\n55: \n56: - Various frontends that invoke / connect to Core\n57: - Main way of iterating with the system\n58: - Uses the Core API to communicate (REST / WS or GRPC in the future)\n59: - Some Frontends:\n60:   - Rust TUI (Ratatui.rs) - First One\n61:   - Web Client (Bun + Vite + Shadcn + React)\n62:   - Pure CLI (Rust)\n63: \n64: ## Agents\n65: \n66: - Abstracted communication with actual agents doing work\n67: - First is OpenCode\n68: \n\n(End of file - total 68 lines)\n</content>",
            "title": "README.md",
            "metadata": {
              "preview": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771213487177,
              "end": 1771213487182
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_04996a0ee47d4dc601699292af15888195a309460782b1cccc"
            }
          },
          "id": "prt_c648cfc49001jaGJLKHOmYH6i1",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cb0a6001hJjTDASzbpeVoA"
        },
        {
          "type": "tool",
          "callID": "call_VnfWIfP4h3OhMQI5AFa2Cevu",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/AGENTS.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/AGENTS.md</path>\n<type>file</type>\n<content>1: # Dark Factory - Agent Operating Guide\n2: \n3: This file is for coding agents working in `dark-factory`.\n4: It reflects only what is currently true in this repository.\n5: \n6: ## 1) Current Repository Context\n7: \n8: - The repo is early-stage and mostly docs/config right now.\n9: - Tracked project files currently include:\n10:   - `README.md`\n11:   - `TODO.md`\n12:   - `AGENTS.md`\n13:   - `opencode.jsonc`\n14:   - `.opencode/agents/gitter.md`\n15:   - `.opencode/skills/gitter-commit/SKILL.md`\n16: - No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n17: \n18: ## 2) Build/Lint/Test Status (Current Truth)\n19: \n20: - There are no validated build, lint, typecheck, or test commands yet.\n21: - Do not invent or assume project commands in commits or PR notes.\n22: - If new tooling is added, document only commands that are verified in this repo.\n23: \n24: ## 3) Cursor and Copilot Rules\n25: \n26: - Checked and currently absent:\n27:   - `.cursor/rules/`\n28:   - `.cursorrules`\n29:   - `.github/copilot-instructions.md`\n30: - If any of these files appear later, treat them as authoritative and update this guide.\n31: \n32: ## 4) Coding Style (Minimal Baseline)\n33: \n34: Until language/tool-specific configs exist, follow pragmatic defaults:\n35: \n36: - Favor readable, explicit code over clever shortcuts.\n37: - Keep functions focused and avoid hidden side effects.\n38: - Avoid dead code, unused imports, and speculative abstractions.\n39: - Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n40: - Handle errors with context; do not swallow exceptions silently.\n41: - Never log secrets or credentials.\n42: - Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n43:   - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n44: \n45: ## 5) Git Workflow\n46: \n47: - Commit meaningful units of work; avoid giant mixed commits.\n48: - Do not push unless the user explicitly requests it.\n49: - Commit message format:\n50:   - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n51: - Examples:\n52:   - `Docs // Added converted PDF docs`\n53:   - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n54: - In commit body, add a short rationale and signature when possible:\n55:   - `// Chappie/Model (your model if known)`\n56: \n57: ## 6) OpenCode Integration\n58: \n59: - `.opencode/agents/gitter.md` is the git-focused subagent.\n60: - `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n61: - `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n62: - `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n63: - `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n64: - Use `@gitter` when the user asks for commit support or cleanup.\n65: \n66: ## 7) Local Fork Workflow (`elysia-protobuf`)\n67: \n68: - `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n69: - If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n70: - Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n71: \n72: ## 8) Script Conventions\n73: \n74: - Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n75: - Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n76: - Shared script helpers live under `scripts/helpers/`.\n77: - `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n78: - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n79: - `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n80: - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n81: \n82: ## 9) Keep This File Updated\n83: \n84: - Update this file when real code, tooling, or CI is added.\n85: - Keep instructions tied to verified repository behavior.\n86: - Prefer short, accurate guidance over aspirational process docs.\n87: \n\n(End of file - total 87 lines)\n</content>",
            "title": "AGENTS.md",
            "metadata": {
              "preview": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771213487178,
              "end": 1771213487181
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_04996a0ee47d4dc601699292af15908195806f309ba55206c6"
            }
          },
          "id": "prt_c648cfc4a001fSgGM6VfWQuDJO",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cb0a6001hJjTDASzbpeVoA"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "6fb77aae5b3312bd8dda6d40d22b34a2aaf81514",
          "cost": 0,
          "tokens": {
            "total": 65413,
            "input": 64507,
            "output": 906,
            "reasoning": 766,
            "cache": {
              "read": 0,
              "write": 0
            }
          },
          "id": "prt_c648cfc91001aFrR9YQtRDtdL8",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cb0a6001hJjTDASzbpeVoA"
        },
        {
          "type": "patch",
          "hash": "37f68ceed79b1d94d2e8dd2c56dfe86f08c21423",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/docs/readmes/protobuf-schema-research.md"
          ],
          "id": "prt_c648cfcbd001iwZ53yBChQDh1m",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cb0a6001hJjTDASzbpeVoA"
        }
      ]
    },
    {
      "info": {
        "role": "user",
        "time": {
          "created": 1771213472348
        },
        "summary": {
          "title": "Include index in summary task",
          "diffs": [
            {
              "file": ".opencode/commands/capture_script_from_context.md",
              "before": "---\ndescription: Convert successful conversation steps into a reusable script\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Turn a successful sequence from this conversation into a reusable Bun script in `scripts/`.\n- Include only the final working flow; do not include troubleshooting attempts.\n\nProcess:\n\n1. Summarize candidate steps from conversation history.\n2. Mark each as one of: `successful`, `failed`, `diagnostic`, or `optional`.\n3. Build the script using only `successful` steps required for deterministic execution.\n4. Keep `failed` and `diagnostic` steps out of executable script logic.\n5. Reuse helpers from `scripts/helpers/` and follow `*.sh.ts` + shebang conventions.\n6. Add short usage notes and explicit verification steps in the response.\n\nReturn:\n\n- Script and helper paths added/updated\n- Included successful steps\n- Excluded failed/diagnostic steps and why\n- Verification command(s) run (or manual verification instructions)\n",
              "after": "---\ndescription: Convert successful conversation steps into a reusable script\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Turn a successful sequence from this conversation into a reusable Bun script in `scripts/`.\n- Include only the final working flow; do not include troubleshooting attempts.\n\nProcess:\n\n1. Summarize candidate steps from conversation history.\n2. Mark each as one of: `successful`, `failed`, `diagnostic`, or `optional`.\n3. Build the script using only `successful` steps required for deterministic execution.\n4. Keep `failed` and `diagnostic` steps out of executable script logic.\n5. Reuse helpers from `scripts/helpers/` and follow `*.sh.ts` + shebang conventions.\n6. Add short usage notes and explicit verification steps in the response.\n7. For external docs scraping workflows, emit split per-page `.ext.md` files and include an `index.ext.md` file.\n\nReturn:\n\n- Script and helper paths added/updated\n- Included successful steps\n- Excluded failed/diagnostic steps and why\n- Verification command(s) run (or manual verification instructions)\n",
              "additions": 1,
              "deletions": 0,
              "status": "modified"
            },
            {
              "file": ".opencode/commands/make_script.md",
              "before": "---\ndescription: Create a new Bun shebang script from prompt/example/bash/context\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Create a reusable script under `scripts/` based on one of these input types:\n  - user prompt\n  - provided example script\n  - provided bash script/command sequence\n  - agent-summarized successful context from the current conversation\n\nProcess:\n\n1. Identify the source input type and extract required behavior.\n2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.\n4. If input includes troubleshooting history, filter out failed/diagnostic steps and keep only confirmed working steps.\n5. Keep scripts explicit, readable, and safe (no embedded secrets).\n6. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n\nReturn:\n\n- New/updated script paths\n- Helper paths (if any)\n- What source input was used (prompt/example/bash/context)\n- Any excluded failed/diagnostic steps (if applicable)\n- Verification command(s) run or exact manual verify steps\n",
              "after": "---\ndescription: Create a new Bun shebang script from prompt/example/bash/context\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Create a reusable script under `scripts/` based on one of these input types:\n  - user prompt\n  - provided example script\n  - provided bash script/command sequence\n  - agent-summarized successful context from the current conversation\n\nProcess:\n\n1. Identify the source input type and extract required behavior.\n2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.\n4. If input includes troubleshooting history, filter out failed/diagnostic steps and keep only confirmed working steps.\n5. Keep scripts explicit, readable, and safe (no embedded secrets).\n6. For external docs scraping workflows, output split per-page `.ext.md` files and an `index.ext.md` manifest.\n7. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n\nReturn:\n\n- New/updated script paths\n- Helper paths (if any)\n- What source input was used (prompt/example/bash/context)\n- Any excluded failed/diagnostic steps (if applicable)\n- Verification command(s) run or exact manual verify steps\n",
              "additions": 2,
              "deletions": 1,
              "status": "modified"
            },
            {
              "file": ".opencode/skills/protobuf-schema-authoring/SKILL.md",
              "before": "---\nname: protobuf-schema-authoring\ndescription: Author proto2/proto3 schemas and provide protoc generation workflows for Rust and TypeScript.\n---\n\n## What I do\n\n- Turn user requirements into clear, evolvable `.proto` schemas.\n- Support both `proto2` and `proto3` syntax.\n- Ask for syntax preference when not explicitly provided, and explain version-specific constraints.\n- Provide practical `protoc` workflows for Rust and TypeScript.\n\n## When to use me\n\nUse this when the task includes any of the following:\n\n- Create a new protobuf schema from product or API requirements.\n- Update an existing `.proto` safely.\n- Explain if a feature is `proto2`-only or `proto3`-only.\n- Generate Rust or TypeScript artifacts from `.proto` files.\n\n## Required clarification flow\n\nIf not already specified, ask these in order:\n\n1. Which schema syntax should be used: `proto2` or `proto3`?\n   - Recommended default: `proto3` with explicit `optional` on scalar fields when presence matters.\n2. For TypeScript generation, which plugin should be targeted: `ts-proto` or `@protobuf-ts/plugin`?\n   - Recommended default: `ts-proto`.\n\nWhen answering, always note version-specific features involved in the request.\n\n## Proto2 vs proto3 guardrails\n\n- `required` fields are proto2-only and should be avoided for new design.\n- Explicit scalar defaults (`[default = ...]`) are proto2-only.\n- Extensions are proto2-oriented; not a general proto3 field pattern.\n- Groups are deprecated legacy proto2 and should not be introduced.\n- Proto3 enums must start with a zero-valued first entry.\n- Proto3 scalar presence should use `optional` when presence semantics are needed.\n- Repeated scalar numerics are packed-by-default in proto3; in proto2, use `[packed = true]` for new fields.\n\n## Schema authoring workflow\n\n1. Confirm syntax version and target language outputs.\n2. Propose package and file layout.\n3. Define messages/enums/services with stable field numbering.\n4. Add comments only where semantics are non-obvious.\n5. Reserve removed field numbers and names.\n6. Validate with `protoc` descriptor output when possible.\n7. Provide generation commands for Rust and TypeScript.\n\n## Command templates\n\n- Validate schema and emit descriptor:\n\n```bash\nprotoc -I proto --include_imports --descriptor_set_out=gen/schema.pb proto/path/to/file.proto\n```\n\n- Rust via `prost-build` (`build.rs`):\n\n```rust\nfn main() -> std::io::Result<()> {\n    prost_build::compile_protos(&[\"proto/service.proto\"], &[\"proto\"])?;\n    Ok(())\n}\n```\n\n- Rust via `tonic-prost-build` (`build.rs`):\n\n```rust\nfn main() {\n    tonic_prost_build::configure()\n        .compile_protos(&[\"proto/service.proto\"], &[\"proto\"])\n        .unwrap();\n}\n```\n\n- TypeScript via `ts-proto`:\n\n```bash\nprotoc \\\n  --plugin=./node_modules/.bin/protoc-gen-ts_proto \\\n  --ts_proto_out=gen/ts \\\n  --ts_proto_opt=esModuleInterop=true \\\n  -I proto \\\n  proto/path/to/file.proto\n```\n\n- TypeScript via `@protobuf-ts/plugin`:\n\n```bash\nnpx protoc --ts_out gen/ts --proto_path proto proto/path/to/file.proto\n```\n\n## Output expectations\n\n- Deliver the requested `.proto` file(s) and a short note on compatibility choices.\n- Explicitly call out any use of proto2-only/proto3-only features.\n- Include exact generation commands for the selected Rust and TypeScript toolchains.\n",
              "after": "---\nname: protobuf-schema-authoring\ndescription: Author proto2/proto3 schemas and provide protoc generation workflows for Rust and TypeScript.\n---\n\n## What I do\n\n- Turn user requirements into clear, evolvable `.proto` schemas.\n- Support both `proto2` and `proto3` syntax.\n- Ask for syntax preference when not explicitly provided, and explain version-specific constraints.\n- Provide practical `protoc` workflows for Rust and TypeScript.\n- Use the full type/layout reference in `docs/readmes/protobuf-schema-research.md`.\n\n## When to use me\n\nUse this when the task includes any of the following:\n\n- Create a new protobuf schema from product or API requirements.\n- Update an existing `.proto` safely.\n- Explain if a feature is `proto2`-only or `proto3`-only.\n- Generate Rust or TypeScript artifacts from `.proto` files.\n\n## Required clarification flow\n\nIf not already specified, ask these in order:\n\n1. Which schema syntax should be used: `proto2` or `proto3`?\n   - Recommended default: `proto3` with explicit `optional` on scalar fields when presence matters.\n2. For TypeScript generation, which plugin should be targeted: `ts-proto` or `@protobuf-ts/plugin`?\n   - Recommended default: `ts-proto`.\n\nWhen answering, always note version-specific features involved in the request.\n\n## Proto2 vs proto3 guardrails\n\n- `required` fields are proto2-only and should be avoided for new design.\n- Explicit scalar defaults (`[default = ...]`) are proto2-only.\n- Extensions are proto2-oriented; not a general proto3 field pattern.\n- Groups are deprecated legacy proto2 and should not be introduced.\n- Proto3 enums must start with a zero-valued first entry.\n- Proto3 scalar presence should use `optional` when presence semantics are needed.\n- Repeated scalar numerics are packed-by-default in proto3; in proto2, use `[packed = true]` for new fields.\n\n## Complete valid type reference (inline)\n\n### Scalar field types\n\n- `double`\n- `float`\n- `int32`\n- `int64`\n- `uint32`\n- `uint64`\n- `sint32`\n- `sint64`\n- `fixed32`\n- `fixed64`\n- `sfixed32`\n- `sfixed64`\n- `bool`\n- `string`\n- `bytes`\n\n### Non-scalar forms\n\n- Message type fields (local or imported), for example `my.pkg.User`.\n- Enum type fields (local or imported).\n- `map<K, V>` fields.\n  - Valid map key types: `int32`, `int64`, `uint32`, `uint64`, `sint32`, `sint64`, `fixed32`, `fixed64`, `sfixed32`, `sfixed64`, `bool`, `string`.\n  - Map value types: scalar, enum, or message.\n- `oneof` blocks.\n\n## Complete schema layout reference (inline)\n\n### Top-level statements\n\n- `syntax = \"proto2\";` or `syntax = \"proto3\";` (first non-comment line)\n- `package ...;`\n- `import \"...\";`, `import public \"...\";`, `import weak \"...\";`\n- `option ... = ...;`\n- `message ... { ... }`\n- `enum ... { ... }`\n- `service ... { ... }`\n- `extend ... { ... }`\n\n### Message body statements\n\n- Field declarations (`optional`/`required`/`repeated` in proto2; `optional`/implicit/repeated in proto3)\n- `oneof ... { ... }`\n- `map<K, V> ... = N;`\n- Nested `message` and nested `enum`\n- `reserved ...;`\n- `option ... = ...;`\n- `extensions ...;` (proto2)\n- `group` (deprecated legacy proto2)\n- `extend ... { ... }`\n\n### Enum body statements\n\n- Enum values: `NAME = N;`\n- Enum options (for example `option allow_alias = true;`)\n- `reserved ...;`\n\n### Service body statements\n\n- `rpc Method(Request) returns (Response);`\n- `rpc Stream(stream Request) returns (stream Response);`\n- Method options blocks on RPC definitions.\n\n## Boilerplate stubs (inline)\n\n### Proto3 starter\n\n```proto\nsyntax = \"proto3\";\n\npackage example.v1;\n\nimport \"google/protobuf/timestamp.proto\";\n\nmessage Resource {\n  optional string display_name = 1;\n  string id = 2;\n  google.protobuf.Timestamp created_at = 3;\n  map<string, string> labels = 4;\n\n  oneof owner {\n    string user_id = 5;\n    string team_id = 6;\n  }\n\n  reserved 7;\n  reserved \"legacy_id\";\n}\n\nenum ResourceState {\n  RESOURCE_STATE_UNSPECIFIED = 0;\n  RESOURCE_STATE_ACTIVE = 1;\n}\n\nservice ResourceService {\n  rpc GetResource(GetResourceRequest) returns (GetResourceResponse);\n}\n\nmessage GetResourceRequest {\n  string id = 1;\n}\n\nmessage GetResourceResponse {\n  Resource resource = 1;\n}\n```\n\n### Proto2 starter\n\n```proto\nsyntax = \"proto2\";\n\npackage example.v1;\n\nmessage Resource {\n  optional string display_name = 1 [default = \"unknown\"];\n  optional string id = 2;\n  repeated string tags = 3;\n\n  extensions 100 to max;\n\n  reserved 4;\n  reserved \"legacy_id\";\n}\n\nenum ResourceState {\n  RESOURCE_STATE_UNSPECIFIED = 0;\n  RESOURCE_STATE_ACTIVE = 1;\n}\n\nextend Resource {\n  optional string external_profile = 100;\n}\n```\n\n## Complete reference location\n\nUse `docs/readmes/protobuf-schema-research.md` as the canonical in-repo reference for:\n\n- Complete valid scalar type list and non-scalar type forms.\n- Full schema definition layout (top-level, message, enum, service).\n- Proto2 and proto3 boilerplate templates.\n- Wire constraints and field numbering guardrails.\n\nWhen drafting schemas, follow that reference and include only the subset needed for the user request.\n\n## Schema authoring workflow\n\n1. Confirm syntax version and target language outputs.\n2. Propose package and file layout.\n3. Define messages/enums/services with stable field numbering.\n4. Add comments only where semantics are non-obvious.\n5. Reserve removed field numbers and names.\n6. Validate with `protoc` descriptor output when possible.\n7. Provide generation commands for Rust and TypeScript.\n\n## Command templates\n\n- Validate schema and emit descriptor:\n\n```bash\nprotoc -I proto --include_imports --descriptor_set_out=gen/schema.pb proto/path/to/file.proto\n```\n\n- Rust via `prost-build` (`build.rs`):\n\n```rust\nfn main() -> std::io::Result<()> {\n    prost_build::compile_protos(&[\"proto/service.proto\"], &[\"proto\"])?;\n    Ok(())\n}\n```\n\n- Rust via `tonic-prost-build` (`build.rs`):\n\n```rust\nfn main() {\n    tonic_prost_build::configure()\n        .compile_protos(&[\"proto/service.proto\"], &[\"proto\"])\n        .unwrap();\n}\n```\n\n- TypeScript via `ts-proto`:\n\n```bash\nprotoc \\\n  --plugin=./node_modules/.bin/protoc-gen-ts_proto \\\n  --ts_proto_out=gen/ts \\\n  --ts_proto_opt=esModuleInterop=true \\\n  -I proto \\\n  proto/path/to/file.proto\n```\n\n- TypeScript via `@protobuf-ts/plugin`:\n\n```bash\nnpx protoc --ts_out gen/ts --proto_path proto proto/path/to/file.proto\n```\n\n## Output expectations\n\n- Deliver the requested `.proto` file(s) and a short note on compatibility choices.\n- Explicitly call out any use of proto2-only/proto3-only features.\n- Include exact generation commands for the selected Rust and TypeScript toolchains.\n",
              "additions": 150,
              "deletions": 0,
              "status": "modified"
            },
            {
              "file": ".opencode/skills/script-authoring/SKILL.md",
              "before": "---\nname: script-authoring\ndescription: Create Bun shebang scripts from prompts, examples, bash snippets, or conversation context.\n---\n\n## What I do\n\n- Turn requested workflows into reusable scripts under `scripts/`.\n- Normalize script implementation to project conventions (`*.sh.ts` + shebang + helpers).\n- Capture successful ad-hoc command sequences as reusable script entrypoints.\n\n## Accepted inputs\n\nUse this skill when script requirements come from any of these sources:\n\n- User prompt only (goal and constraints)\n- Provided example script\n- Provided bash script or shell command sequence\n- Agent-summarized conversation context (for example, previously successful setup steps)\n\n## Output conventions\n\n- Primary scripts go in `scripts/` and use `*.sh.ts` naming.\n- Include shebang: `#!/usr/bin/env bun`.\n- Prefer shared helpers from `scripts/helpers/` instead of duplicating utility logic.\n- Default to explicit, readable command flow and fail fast on command errors.\n\n## Implementation workflow\n\n1. Identify script intent, inputs, and expected outputs from provided context.\n2. If input comes from troubleshooting history, separate successful steps from failed or diagnostic attempts.\n3. Exclude failed retries, dead-end commands, and one-off debugging probes from final reusable script logic.\n4. Choose script name and location under `scripts/`.\n5. Reuse or add helper utilities in `scripts/helpers/` when needed.\n6. Implement Bun-based script and run it once when safe to verify behavior.\n7. Update docs (`README.md` or `AGENTS.md`) when conventions or entrypoints change.\n\n## Context capture rules\n\n- When converting conversation history into a script, include only the final successful sequence.\n- Keep troubleshooting commands as optional notes in output, not in executable script flow.\n- If multiple working paths exist, prefer the shortest deterministic path.\n\n## Notes\n\n- Keep scripts idempotent where practical.\n- Avoid embedding secrets or environment-specific absolute paths.\n- If verification cannot be run safely, state exactly what should be executed by the user.\n",
              "after": "---\nname: script-authoring\ndescription: Create Bun shebang scripts from prompts, examples, bash snippets, or conversation context.\n---\n\n## What I do\n\n- Turn requested workflows into reusable scripts under `scripts/`.\n- Normalize script implementation to project conventions (`*.sh.ts` + shebang + helpers).\n- Capture successful ad-hoc command sequences as reusable script entrypoints.\n\n## Accepted inputs\n\nUse this skill when script requirements come from any of these sources:\n\n- User prompt only (goal and constraints)\n- Provided example script\n- Provided bash script or shell command sequence\n- Agent-summarized conversation context (for example, previously successful setup steps)\n\n## Output conventions\n\n- Primary scripts go in `scripts/` and use `*.sh.ts` naming.\n- Include shebang: `#!/usr/bin/env bun`.\n- Prefer shared helpers from `scripts/helpers/` instead of duplicating utility logic.\n- Default to explicit, readable command flow and fail fast on command errors.\n- For external docs scraping workflows, default output to split per-page `.ext.md` files and include an `index.ext.md` in the target directory.\n\n## Implementation workflow\n\n1. Identify script intent, inputs, and expected outputs from provided context.\n2. If input comes from troubleshooting history, separate successful steps from failed or diagnostic attempts.\n3. Exclude failed retries, dead-end commands, and one-off debugging probes from final reusable script logic.\n4. Choose script name and location under `scripts/`.\n5. Reuse or add helper utilities in `scripts/helpers/` when needed.\n6. Implement Bun-based script and run it once when safe to verify behavior.\n7. Update docs (`README.md` or `AGENTS.md`) when conventions or entrypoints change.\n\n## Context capture rules\n\n- When converting conversation history into a script, include only the final successful sequence.\n- Keep troubleshooting commands as optional notes in output, not in executable script flow.\n- If multiple working paths exist, prefer the shortest deterministic path.\n\n## Notes\n\n- Keep scripts idempotent where practical.\n- Avoid embedding secrets or environment-specific absolute paths.\n- If verification cannot be run safely, state exactly what should be executed by the user.\n",
              "additions": 1,
              "deletions": 0,
              "status": "modified"
            },
            {
              "file": "AGENTS.md",
              "before": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
              "after": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into split per-page `docs/external/moonrepo/*.ext.md` files and writes `docs/external/moonrepo/index.ext.md`.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
              "additions": 1,
              "deletions": 1,
              "status": "modified"
            },
            {
              "file": "README.md",
              "before": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
              "after": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
              "additions": 1,
              "deletions": 1,
              "status": "modified"
            },
            {
              "file": "docs/external/moonrepo/docs.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs\n- Keywords: moon, moonrepo, docs, monorepo, build\n- Summary: moonrepo is a productivity platform that aims to eliminate pain points for both developers and companies, by automating tiresome and complex workflows, and improving the overall developer experience.\n----\n\nSource: https://moonrepo.dev/docs\n\nmoonrepo is a productivity platform that aims to eliminate pain points for both developers and companies, by automating tiresome and complex workflows, and improving the overall developer experience.\n\nWe currently achieve this through the following tools and services:\n\nmoon[](http://moonrepo.dev/docs#moon \"Direct link to moon\")\n------------------------------------------------------------\n\n[moon](https://moonrepo.dev/moon) is a repository _m_ anagement, _o_ rganization, _o_ rchestration, and _n_ otification tool for the web ecosystem, written in Rust. Many of the concepts within moon are heavily inspired from Bazel and other popular build systems, but tailored for our [supported languages](http://moonrepo.dev/docs#supported-languages).\n\nYou can think of a moon as a tool that sits firmly in the middle between Bazel (high complexity, full structure), and make/just/etc scripts (low complexity, no structure).\n\n### Why use moon?[](http://moonrepo.dev/docs#why-use-moon \"Direct link to Why use moon?\")\n\nWorking in a language's ecosystem can be very involved, especially when it comes to managing a repository effectively. Which language version to use? Which dependency manager to use? How to use packages? Or how to build packages? So on and so forth. moon aims to streamline this entire process and provide a first-class developer experience.\n\n*   **Increased productivity** - With [Rust](https://www.rust-lang.org/) as our foundation, we can ensure robust speeds, high performance, and low memory usage. Instead of long builds blocking you, focus on your work.\n*   **Exceptional developer experience** - As veterans of developer tooling, we're well aware of the pain points and frustrations. Our goal is to mitigate and overcome these obstacles.\n*   **Incremental adoption** - At its core, moon has been designed to be adopted incrementally and is _not_ an \"all at once adoption\". Migrate project-by-project, or task-by-task, it's up to you!\n*   **Reduced tasks confusion** - Tasks (for example, `package.json` scripts) can become unwieldy, very quickly. No more duplicating the same task into every project, or reverse-engineering which root scripts to use. With moon, all you need to know is the project name, and a task name.\n*   **Ensure correct versions** - Whether it's a programming language or dependency manager, ensure the same version of each tool is the same across _every_ developer's environment. No more wasted hours of debugging.\n*   **Automation built-in** - When applicable, moon will automatically install dependencies (`node_modules`), or [sync project dependencies](https://moonrepo.dev/docs/config/toolchain#syncprojectworkspacedependencies), or even [sync TypeScript project references](https://moonrepo.dev/docs/config/toolchain#syncprojectreferences).\n*   And of course, the amazing list of [features](http://moonrepo.dev/docs#features) below!\n\n### Supported languages[](http://moonrepo.dev/docs#supported-languages \"Direct link to Supported languages\")\n\nmoon's long-term vision is to robustly support multiple programming languages (and dependency managers) so that a repository composed of projects with differing languages and tools can all work in unison. This is a lofty vision that requires a massive amount of time and resources to achieve, and as such, is not available on initial release, but will gradually be supported over time.\n\nTo help achieve this vision, language support is broken down into 4 tiers, allowing us to incrementally integrate and improve them over time. The 4 tiers are as follows:\n\n*   Tier 0**No direct integration** - Tool is not directly supported in moon, but can still be run using the [\"system\" task toolchain](https://moonrepo.dev/docs/faq#can-we-run-other-languages), which expects the tool to exist in the current environment.\n*   Tier 1**Project categorization** - Projects can configure their primary [language in `moon.yml`](https://moonrepo.dev/docs/config/project#language), and have a dedicated Rust crate for metadata.\n*   Tier 2**Ecosystem platformization** - moon deeply integrates with the language's ecosystem by parsing manifests, lockfiles, and other semantic files to infer dependencies, tasks, and other necessary information.\n*   Tier 3**Toolchain integration** - Language is directly supported in the toolchain, configured in [`.moon/toolchains.yml`](https://moonrepo.dev/docs/config/toolchain), and will automatically be downloaded and installed.\n\n|  | Tier 0 | Tier 1 | Tier 2 | Tier 3 |\n| --- | --- | --- | --- | --- |\n| Bash/Batch |  |  |  |  |\n| Bun (JavaScript, TypeScript) |  |  |  |  |\n| Deno (JavaScript, TypeScript) |  |  |  |  |\n| Go |  |  |  |  |\n| Node (JavaScript, TypeScript) |  |  |  |  |\n|  npm, pnpm, yarn |  |  |  |  |\n| PHP |  |  |  |  |\n|  Composer |  |  |  |  |\n| Python |  |  |  |  |\n|  Pip |  |  |  |  |\n| Ruby |  |  |  |  |\n|  Gems, Bundler |  |  |  |  |\n| Rust |  |  |  |  |\n|  Cargo |  |  |  |  |\n| Other (Kotlin, Java, C#, ...) |  |  |  |  |\n\n*    Not applicable\n*    Partially supported (experimental)\n*    Fully Supported\n\n### Supported targets[](http://moonrepo.dev/docs#supported-targets \"Direct link to Supported targets\")\n\nBecause moon is written in Rust, we only support targets that are explicitly compiled for, which are currently:\n\n| Operating system | Architecture | Target |\n| --- | --- | --- |\n| macOS 64-bit | Intel | `x86_64-apple-darwin` |\n| macOS 64-bit | ARM | `aarch64-apple-darwin` |\n| Linux 64-bit | Intel GNU | `x86_64-unknown-linux-gnu` |\n| Linux 64-bit | Intel musl | `x86_64-unknown-linux-musl` |\n| Linux 64-bit | ARM GNU | `aarch64-unknown-linux-gnu` |\n| Linux 64-bit | ARM musl | `aarch64-unknown-linux-musl` |\n| Windows 64-bit | Intel | `x86_64-pc-windows-msvc` |\n\n### Features[](http://moonrepo.dev/docs#features \"Direct link to Features\")\n\n#### Management[](http://moonrepo.dev/docs#management \"Direct link to Management\")\n\n*   **Smart hashing** - Collects inputs from multiple sources to ensure builds are deterministic and reproducible.\n*   **Remote caching** - Persists builds, hashes, and caches between teammates and CI/CD environments.\n*   **Integrated toolchain** - Automatically downloads and installs explicit versions of Node.js and other tools for consistency across the entire workspace or per project.\n*   **Multi-platform** - Runs on common development platforms: Linux, macOS, and Windows.\n\n#### Organization[](http://moonrepo.dev/docs#organization \"Direct link to Organization\")\n\n*   **Project graph** - Generates a project graph for dependency and dependent relationships.\n*   **Code generation** - Easily scaffold new applications, libraries, tooling, and more!\n*   **Dependency workspaces** - Works alongside package manager workspaces so that projects have distinct dependency trees.\n*   **Code ownership** - Declare owners, maintainers, support channels, and more. Generate CODEOWNERS.\n\n#### Orchestration[](http://moonrepo.dev/docs#orchestration \"Direct link to Orchestration\")\n\n*   **Dependency graph** - Generates a dependency graph to increase performance and reduce workloads.\n*   **Action pipeline** - Executes actions in parallel and in order using a thread pool and our dependency graph.\n*   **Action distribution**Coming soon - Distributes actions across multiple machines to increase throughput.\n*   **Incremental builds** - With our smart hashing, only rebuild projects that have been touched since the last build.\n\n#### Notification[](http://moonrepo.dev/docs#notification \"Direct link to Notification\")\n\n*   **Flakiness detection** - Reduce flaky builds with automatic retries and passthrough settings.\n*   **Webhook events**Experimental - Receive a webhook for every event in the pipeline. Useful for metrics gathering and insights.\n*   **Terminal notifications**Experimental - Receives notifications in your chosen terminal when builds are successful... or are not.\n*   **Git hooks** - Manage Git hooks to enforce workflows and requirements for contributors.\n\nproto[](http://moonrepo.dev/docs#proto \"Direct link to proto\")\n---------------------------------------------------------------\n\n[proto](https://moonrepo.dev/proto) is a version manager for your favorite programming languages. [View proto documentation](https://moonrepo.dev/docs/proto).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 124,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__cheat-sheet.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/cheat-sheet\n- Keywords: moon, moonrepo, docs, monorepo, build, cheat sheet\n- Summary: Don't have time to read the docs? Here's a quick cheat sheet to get you started.\n----\n\nSource: https://moonrepo.dev/docs/cheat-sheet\n\nDon't have time to read the docs? Here's a quick cheat sheet to get you started.\n\nTasks[](http://moonrepo.dev/docs/cheat-sheet#tasks \"Direct link to Tasks\")\n---------------------------------------------------------------------------\n\nLearn more about [tasks](https://moonrepo.dev/docs/concepts/task) and [targets](https://moonrepo.dev/docs/concepts/target).\n\n#### Run all build and test tasks for all projects[](http://moonrepo.dev/docs/cheat-sheet#run-all-build-and-test-tasks-for-all-projects \"Direct link to Run all build and test tasks for all projects\")\n\n`moon check --all`\n\n#### Run all build and test tasks in a project[](http://moonrepo.dev/docs/cheat-sheet#run-all-build-and-test-tasks-in-a-project \"Direct link to Run all build and test tasks in a project\")\n\n`moon check project`\n\n#### Run all build and test tasks for closest project based on working directory[](http://moonrepo.dev/docs/cheat-sheet#run-all-build-and-test-tasks-for-closest-project-based-on-working-directory \"Direct link to Run all build and test tasks for closest project based on working directory\")\n\n`moon check`\n\n#### Run a task in all projects[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-all-projects \"Direct link to Run a task in all projects\")\n\n`moon run :task`\n\n#### Run a task in all projects with a tag[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-all-projects-with-a-tag \"Direct link to Run a task in all projects with a tag\")\n\n`moon run '#tag:task'# ORmoon run \\#tag:task# ORmoon run :task --query \"tag=tag\"`\n\n#### Run a task in a project[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-a-project \"Direct link to Run a task in a project\")\n\n`moon run project:task`\n\n#### Run multiple tasks in all projects[](http://moonrepo.dev/docs/cheat-sheet#run-multiple-tasks-in-all-projects \"Direct link to Run multiple tasks in all projects\")\n\n`moon run :task1 :task2`\n\n#### Run multiple tasks in any project[](http://moonrepo.dev/docs/cheat-sheet#run-multiple-tasks-in-any-project \"Direct link to Run multiple tasks in any project\")\n\n`moon run projecta:task1 projectb:task2`\n\n#### Run a task in applications, libraries, or tools[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-applications-libraries-or-tools \"Direct link to Run a task in applications, libraries, or tools\")\n\n`moon run :task --query \"projectLayer=application\"`\n\n#### Run a task in projects of a specific language[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-projects-of-a-specific-language \"Direct link to Run a task in projects of a specific language\")\n\n`moon run :task --query \"language=typescript\"`\n\n#### Run a task in projects matching a keyword[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-projects-matching-a-keyword \"Direct link to Run a task in projects matching a keyword\")\n\n`moon run :task --query \"project~react-*\"`\n\n#### Run a task in projects based on file path[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-projects-based-on-file-path \"Direct link to Run a task in projects based on file path\")\n\n`moon run :task --query \"projectSource~packages/*\"`\n\nTask configuration[](http://moonrepo.dev/docs/cheat-sheet#task-configuration \"Direct link to Task configuration\")\n------------------------------------------------------------------------------------------------------------------\n\nLearn more about [available options](https://moonrepo.dev/docs/config/project#tasks).\n\n#### Disable caching[](http://moonrepo.dev/docs/cheat-sheet#disable-caching \"Direct link to Disable caching\")\n\nmoon.yml\n\n`tasks:  example:    # ...    options:      cache: false`\n\n#### Re-run flaky tasks[](http://moonrepo.dev/docs/cheat-sheet#re-run-flaky-tasks \"Direct link to Re-run flaky tasks\")\n\nmoon.yml\n\n`tasks:  example:    # ...    options:      retryCount: 3`\n\n#### Depend on tasks from parent project's dependencies[](http://moonrepo.dev/docs/cheat-sheet#depend-on-tasks-from-parent-projects-dependencies \"Direct link to Depend on tasks from parent project's dependencies\")\n\nmoon.yml\n\n`# Also inferred from the languagedependsOn:  - 'project-a'  - 'project-b'tasks:  example:    # ...    deps:      - '^:build'`\n\n#### Depend on tasks from arbitrary projects[](http://moonrepo.dev/docs/cheat-sheet#depend-on-tasks-from-arbitrary-projects \"Direct link to Depend on tasks from arbitrary projects\")\n\nmoon.yml\n\n`tasks:  example:    # ...    deps:      - 'other-project:task'`\n\n#### Run dependencies serially[](http://moonrepo.dev/docs/cheat-sheet#run-dependencies-serially \"Direct link to Run dependencies serially\")\n\nmoon.yml\n\n`tasks:  example:    # ...    deps:      - 'first'      - 'second'      - 'third'    options:      runDepsInParallel: false`\n\nmoon.yml\n\n`tasks:  example:    command: 'noop'    deps:      - 'app:watch'      - 'backend:start'      - 'tailwind:watch'    preset: 'server'`\n\n> The `local` or `persistent` settings are required for this to work.\n\nLanguages[](http://moonrepo.dev/docs/cheat-sheet#languages \"Direct link to Languages\")\n---------------------------------------------------------------------------------------\n\n#### Run system binaries available on `PATH`[](http://moonrepo.dev/docs/cheat-sheet#run-system-binaries-available-on-path \"Direct link to run-system-binaries-available-on-path\")\n\nmoon.yml\n\n`language: 'bash' # batch, etctasks:  example:    command: 'printenv'`\n\nmoon.yml\n\n`tasks:  example:    command: 'printenv'    toolchain: 'system'`\n\n#### Run language binaries not supported in moon's toolchain[](http://moonrepo.dev/docs/cheat-sheet#run-language-binaries-not-supported-in-moons-toolchain \"Direct link to Run language binaries not supported in moon's toolchain\")\n\nmoon.yml\n\n`language: 'ruby'tasks:  example:    command: 'rubocop'    toolchain: 'system'`\n\n#### Run npm binaries (Node.js)[](http://moonrepo.dev/docs/cheat-sheet#run-npm-binaries-nodejs \"Direct link to Run npm binaries (Node.js)\")\n\nmoon.yml\n\n`language: 'javascript' # typescripttasks:  example:    command: 'eslint'`\n\nmoon.yml\n\n`tasks:  example:    command: 'eslint'    toolchain: 'node'`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 144,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands\n- Keywords: moon, moonrepo, docs, monorepo, build, commands\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands\n\n[Skip to main content](http://moonrepo.dev/docs/commands#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](https://moonrepo.dev/img/logo.svg)](https://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands#)\n\n*   [**moon** Build system for managing codebases](https://moonrepo.dev/moon)\n*   [**proto** Multi-language version manager](https://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands#)\n\n*   [**moon**](https://moonrepo.dev/docs)\n*   [**proto**](https://moonrepo.dev/docs/proto)\n\n[Guides](https://moonrepo.dev/docs/guides/ci)[Blog](https://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\n1.   [Home](https://moonrepo.dev/)\n2.   [Commands](https://moonrepo.dev/docs/commands) \n\nwarning\n\nDocumentation is currently for [moon v2](https://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\n[Overview ----------- The following options are available for all moon commands.](https://moonrepo.dev/docs/commands/overview)[action-graph --------------- The moon action-graph [target] (or moon ag) command will generate and serve a visual graph of](https://moonrepo.dev/docs/commands/action-graph)[bin ------ The moon bin command will return an absolute path to a tool's binary within the](https://moonrepo.dev/docs/commands/bin)[check -------- The moon check [...projects] (or moon c) command will run all](https://moonrepo.dev/docs/commands/check)[ci ----- The moon ci command is a special command that should be ran in a continuous integration (CI)](https://moonrepo.dev/docs/commands/ci)[clean -------- The moon clean command will clean the current workspace by deleting stale cache. For the most](https://moonrepo.dev/docs/commands/clean)[completions -------------- The moon completions command will generate moon command and argument completions for your current](https://moonrepo.dev/docs/commands/completions)[docker --------- 4 items](https://moonrepo.dev/docs/commands/docker)[exec ------- The moon exec (or moon x, or moonx) command is a low-level command for executing tasks in the](https://moonrepo.dev/docs/commands/exec)[ext ------ The moon ext command will execute an extension (a WASM plugin) that has been configured with](https://moonrepo.dev/docs/commands/ext)[extension ------------ 2 items](https://moonrepo.dev/docs/commands/extension)[generate ----------- The moon generate (or moon g) command will generate code (files and folders) from a](https://moonrepo.dev/docs/commands/generate)[hash ------- Use the moon hash command to inspect the contents and sources of a generated hash, also known as](https://moonrepo.dev/docs/commands/hash)[init ------- The moon init command will initialize moon into a repository and scaffold necessary config files](https://moonrepo.dev/docs/commands/init)[mcp ------ The moon mcp command will start an MCP server that listens for](https://moonrepo.dev/docs/commands/mcp)[project ---------- The moon project [id] (or moon p) command will display all available information about a project](https://moonrepo.dev/docs/commands/project)[projects ----------- The moon projects command will list all projects configured in the workspace as a table of](https://moonrepo.dev/docs/commands/projects)[project-graph ---------------- The moon project-graph [id] (or moon pg) command will generate and serve a visual graph of all](https://moonrepo.dev/docs/commands/project-graph)[query -------- 4 items](https://moonrepo.dev/docs/commands/query)[run ------ The moon run (or moon r) command will run one or many targets and all of](https://moonrepo.dev/docs/commands/run)[setup -------- The moon setup command can be used to setup the developer and pipeline environments. It achieves](https://moonrepo.dev/docs/commands/setup)[sync ------- 4 items](https://moonrepo.dev/docs/commands/sync)[task ------- The moon task [target] (or moon t) command will display information about a task that has been](https://moonrepo.dev/docs/commands/task)[tasks -------- The moon tasks command will list all tasks available in the workspace as a table of information.](https://moonrepo.dev/docs/commands/tasks)[task-graph ------------- The moon task-graph [target] (or moon tg) command will generate and serve a visual graph of all](https://moonrepo.dev/docs/commands/task-graph)[teardown ----------- The moon teardown command, as its name infers, will teardown and clean the current environment,](https://moonrepo.dev/docs/commands/teardown)[template ----------- The moon template [id] command will display information about a template, its files, and](https://moonrepo.dev/docs/commands/template)[templates ------------ The moon templates command will list all templates available for code generation.](https://moonrepo.dev/docs/commands/templates)[toolchain ------------ 2 items](https://moonrepo.dev/docs/commands/toolchain)[upgrade ---------- The moon upgrade command can be used to upgrade your current moon binary (if installed globally)](https://moonrepo.dev/docs/commands/upgrade)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 44,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__action-graph.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/action-graph\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, action graph\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/action-graph#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/action-graph\n\naction-graph | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/action-graph#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/action-graph#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/action-graph#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/action-graph#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/action-graph#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [action-graph](http://moonrepo.dev/docs/commands/action-graph) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\naction-graph\n============\n\nv1.15.0\nThe `moon action-graph [target]` (or `moon ag`) command will generate and serve a visual graph of all actions and tasks within the workspace, known as the [action graph](http://moonrepo.dev/docs/how-it-works/action-graph). In other tools, this is sometimes referred to as a dependency graph or task graph.\n\n`# Run the visualizer locally$ moon action-graph# Export to DOT format$ moon action-graph --dot > graph.dot`\n\n> A target can be passed to focus the graph, including dependencies _and_ dependents. For example, `moon action-graph app:build`.\n\n### Arguments[](http://moonrepo.dev/docs/commands/action-graph#arguments \"Direct link to Arguments\")\n\n*   `[target]` - Optional target to focus.\n\n### Options[](http://moonrepo.dev/docs/commands/action-graph#options \"Direct link to Options\")\n\n*   `--dependents` - Include dependents of the focused target.\n*   `--dot` - Print the graph in DOT format.\n*   `--host` - The host address. Defaults to `127.0.0.1`. v1.36.0\n*   `--json` - Print the graph in JSON format.\n*   `--port` - The port to bind to. Defaults to a random port. v1.36.0\n\n### Configuration[](http://moonrepo.dev/docs/commands/action-graph#configuration \"Direct link to Configuration\")\n\n*   [`runner`](http://moonrepo.dev/docs/config/workspace#runner) in `.moon/workspace.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/project#tasks) in `moon.yml`\n\nExample output[](http://moonrepo.dev/docs/commands/action-graph#example-output \"Direct link to Example output\")\n----------------------------------------------------------------------------------------------------------------\n\nThe following output is an example of the graph in DOT format.\n\n`digraph {    0 [ label=\"SetupToolchain(node)\" style=filled, shape=oval, fillcolor=black, fontcolor=white]    1 [ label=\"InstallWorkspaceDeps(node)\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    2 [ label=\"SyncProject(node, node)\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    3 [ label=\"RunTask(node:standard)\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    1 -> 0 [ arrowhead=box, arrowtail=box]    2 -> 0 [ arrowhead=box, arrowtail=box]    3 -> 1 [ arrowhead=box, arrowtail=box]    3 -> 2 [ arrowhead=box, arrowtail=box]}`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/action-graph.mdx)\n\n[Overview](http://moonrepo.dev/docs/commands/overview)\n\n[bin](http://moonrepo.dev/docs/commands/bin)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/action-graph#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/action-graph#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/action-graph#configuration)\n*   [Example output](http://moonrepo.dev/docs/commands/action-graph#example-output)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 183,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__bin.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/bin\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, bin\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/bin#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/bin\n\nbin | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/bin#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/bin#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/bin#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/bin#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/bin#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [bin](http://moonrepo.dev/docs/commands/bin) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nbin\n===\n\nThe `moon bin <toolchain>` command will return an absolute path to a tool's binary within the toolchain. If a tool has not been configured or installed, this will return a 1 or 2 exit code with no value respectively.\n\n`$ moon bin node/Users/example/.proto/tools/node/x.x.x/bin/node`\n\n> A tool is considered \"not configured\" when not in use, for example, querying yarn/pnpm when the package manager is configured for \"npm\". A tool is considered \"not installed\", when it has not been downloaded and installed into the tools directory.\n\n### Arguments[](http://moonrepo.dev/docs/commands/bin#arguments \"Direct link to Arguments\")\n\n*   `<toolchain>` - Name of the toolchain to query.\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/bin.mdx)\n\n[action-graph](http://moonrepo.dev/docs/commands/action-graph)\n\n[check](http://moonrepo.dev/docs/commands/check)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/bin#arguments)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 158,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__check.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/check\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, check\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/check#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/check\n\ncheck | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/check#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/check#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/check#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/check#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/check#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [check](http://moonrepo.dev/docs/commands/check) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ncheck\n=====\n\nThe `moon check [...projects]` (or `moon c`) command will run _all_[build and test tasks](http://moonrepo.dev/docs/concepts/task#types) for one or many projects. This is a convenience command for verifying the current state of a project, instead of running multiple [`moon run`](http://moonrepo.dev/docs/commands/run) commands.\n\n`# Check project by name$ moon check app# Check multiple projects by name$ moon check client server# Check project at current working directory$ moon check --closest# Check ALL projects (may be costly)$ moon check --all`\n\n### Arguments[](http://moonrepo.dev/docs/commands/check#arguments \"Direct link to Arguments\")\n\n*   `[...id]` - List of project IDs or aliases to explicitly check, as defined in [`projects`](http://moonrepo.dev/docs/config/workspace#projects).\n\n### Options[](http://moonrepo.dev/docs/commands/check#options \"Direct link to Options\")\n\nInherits all options from [`moon exec`](http://moonrepo.dev/docs/commands/exec) except for `--on-failure`.\n\n*   `--all` - Run check for all projects in the workspace.\n*   `--closest` - Run check for the closest project starting from the current working directory.\n\n### Configuration[](http://moonrepo.dev/docs/commands/check#configuration \"Direct link to Configuration\")\n\n*   [`projects`](http://moonrepo.dev/docs/config/workspace#projects) in `.moon/workspace.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/project#tasks) in `moon.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/check.mdx)\n\n[bin](http://moonrepo.dev/docs/commands/bin)\n\n[ci](http://moonrepo.dev/docs/commands/ci)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/check#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/check#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/check#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 171,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__ci.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/ci\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, ci\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/ci#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/ci\n\nci | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/ci#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/ci#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/ci#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/ci#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/ci#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [ci](http://moonrepo.dev/docs/commands/ci) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nci\n==\n\nThe `moon ci` command is a special command that should be ran in a continuous integration (CI) environment, as it does all the heavy lifting necessary for effectively running tasks.\n\nBy default this will run all tasks that are affected by touched files and have the [`runInCI`](http://moonrepo.dev/docs/config/project#runinci) task option enabled.\n\n`$ moon ci`\n\nHowever, you can also provide a list of targets to explicitly run, which will still be filtered down by `runInCI`.\n\n`$ moon ci :build :lint`\n\n> View the official [continuous integration guide](http://moonrepo.dev/docs/guides/ci) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/ci#arguments \"Direct link to Arguments\")\n\n*   `...[target]` - [Targets](http://moonrepo.dev/docs/concepts/target) to run.\n\n### Options[](http://moonrepo.dev/docs/commands/ci#options \"Direct link to Options\")\n\nInherits all options from [`moon exec`](http://moonrepo.dev/docs/commands/exec) except for `--affected`, `--on-failure`, and `--only-ci-tasks`.\n\n### Configuration[](http://moonrepo.dev/docs/commands/ci#configuration \"Direct link to Configuration\")\n\n*   [`tasks`](http://moonrepo.dev/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/project#tasks) in `moon.yml`\n*   [`tasks.*.options.runInCI`](http://moonrepo.dev/docs/config/project#runinci) in `moon.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/ci.mdx)\n\n[check](http://moonrepo.dev/docs/commands/check)\n\n[clean](http://moonrepo.dev/docs/commands/clean)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/ci#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/ci#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/ci#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 176,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__clean.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/clean\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, clean\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/clean#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/clean\n\nclean | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/clean#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/clean#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/clean#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/clean#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/clean#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [clean](http://moonrepo.dev/docs/commands/clean) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nclean\n=====\n\nThe `moon clean` command will clean the current workspace by deleting stale cache. For the most part, the action pipeline will clean automatically, but this command can be used to reset the workspace entirely.\n\n`$ moon clean# Delete cache with a custom lifetime$ moon clean --lifetime '24 hours'`\n\n### Options[](http://moonrepo.dev/docs/commands/clean#options \"Direct link to Options\")\n\n*   `--lifetime` - The maximum lifetime of cached artifacts before being marked as stale. Defaults to \"7 days\".\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/clean.mdx)\n\n[ci](http://moonrepo.dev/docs/commands/ci)\n\n[completions](http://moonrepo.dev/docs/commands/completions)\n\n*   [Options](http://moonrepo.dev/docs/commands/clean#options)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 156,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__completions.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/completions\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, completions\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/completions#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/completions\n\ncompletions | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/completions#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/completions#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/completions#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/completions#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/completions#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [completions](http://moonrepo.dev/docs/commands/completions) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ncompletions\n===========\n\nThe `moon completions` command will generate moon command and argument completions for your current shell. This command will write to stdout, which can then be redirected to a file of your choice.\n\n`$ moon completions > ./path/to/write/to`\n\n### Options[](http://moonrepo.dev/docs/commands/completions#options \"Direct link to Options\")\n\n*   `--shell` - Shell to explicitly generate for.\n\n### Examples[](http://moonrepo.dev/docs/commands/completions#examples \"Direct link to Examples\")\n\n*   Bash\n*   Fish\n*   Zsh\n\nIf using [bash-completion](https://github.com/scop/bash-completion).\n\n`mkdir -p ~/.bash_completion.dmoon completions > ~/.bash_completion.d/moon.sh`\n\nOtherwise write the file to a common location, and source it in your profile.\n\n`mkdir -p ~/.bash_completionsmoon completions > ~/.bash_completions/moon.sh# In your profilesource ~/.bash_completions/moon.sh`\n\nWrite the file to Fish's completions directory.\n\n`mkdir -p ~/.config/fish/completionsmoon completions > ~/.config/fish/completions/moon.fish`\n\nIf using [oh-my-zsh](https://ohmyz.sh/) (the `_` prefix is required).\n\n`mkdir -p ~/.oh-my-zsh/completionsmoon completions > ~/.oh-my-zsh/completions/_moon# Reload shell (or restart terminal)omz reload`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/completions.mdx)\n\n[clean](http://moonrepo.dev/docs/commands/clean)\n\n[docker](http://moonrepo.dev/docs/commands/docker)\n\n*   [Options](http://moonrepo.dev/docs/commands/completions#options)\n*   [Examples](http://moonrepo.dev/docs/commands/completions#examples)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 179,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__docker.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/docker\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, docker\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/docker#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/docker\n\ndocker | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/docker#__docusaurus_skipToContent_fallback)\n\n[![Image 2: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/docker#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/docker#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/docker#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n        *   [file](http://moonrepo.dev/docs/commands/docker/file)\n        *   [prune](http://moonrepo.dev/docs/commands/docker/prune)\n        *   [scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n        *   [setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/docker#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [docker](http://moonrepo.dev/docs/commands/docker) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\ndocker\n======\n\nOperations for integrating with Docker and Dockerfiles.\n\n[file ------- The moon docker file command can be used to generate a multi-staged Dockerfile for a](http://moonrepo.dev/docs/commands/docker/file)[prune -------- The moon docker prune command will reduce the overall filesize of the Docker environment by](http://moonrepo.dev/docs/commands/docker/prune)[scaffold ----------- The moon docker scaffold command creates multiple repository skeletons for use](http://moonrepo.dev/docs/commands/docker/scaffold)[setup -------- The moon docker setup command will efficiently install dependencies for focused projects. This is](http://moonrepo.dev/docs/commands/docker/setup)\n\n[completions](http://moonrepo.dev/docs/commands/completions)\n\n[file](http://moonrepo.dev/docs/commands/docker/file)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 151,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__docker__file.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/docker/file\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, docker, file\n- Summary: 1.   [Home](https://moonrepo.dev/)\n----\n\nSource: https://moonrepo.dev/docs/commands/docker/file\n\n1.   [Home](https://moonrepo.dev/)\n\nwarning\n\nDocumentation is currently for [moon v2](https://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nv1.27.0\n\nThe `moon docker file <project>` command can be used to generate a multi-staged `Dockerfile` for a project, that takes full advantage of Docker's layer caching, and is primarily for production deploys (this should not be used for development).\n\n`$ moon docker file <project>`\n\nAs mentioned above, the generated `Dockerfile` uses a multi-stage approach, where each stage is broken up into the following:\n\n*   `base` - The base stage, which simply installs moon for a chosen Docker image. This stage requires Bash.\n*   `skeleton` - Scaffolds workspace and sources repository skeletons using [`moon docker scaffold`](https://moonrepo.dev/docs/commands/docker/scaffold).\n*   `build` - Copies required sources, installs the toolchain using [`moon docker setup`](https://moonrepo.dev/docs/commands/docker/setup), optionally builds the project, and optionally prunes the image using [`moon docker prune`](https://moonrepo.dev/docs/commands/docker/prune).\n*   `start` - Runs the project after it has been built. This is typically starting an HTTP server, or executing a binary.\n\ninfo\n\nView the official [Docker usage guide](https://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/docker/file#arguments \"Direct link to Arguments\")\n\n*   `<name>` - Name or alias of a project, as defined in [`projects`](https://moonrepo.dev/docs/config/workspace#projects).\n*   `[dest]` - Destination to write the file, relative from the project root. Defaults to `Dockerfile`.\n\n### Options[](http://moonrepo.dev/docs/commands/docker/file#options \"Direct link to Options\")\n\n*   `--defaults` - Use default options instead of prompting in the terminal.\n*   `--build-task` - Name of a task to build the project. Defaults to the [`docker.file.buildTask`](https://moonrepo.dev/docs/config/project#buildtask) setting, or prompts in the terminal.\n*   `--image` - Base Docker image to use. Defaults to an image derived from the toolchain, or prompts in the terminal.\n*   `--no-prune` - Do not prune the workspace in the build stage.\n*   `--no-toolchain` - Do not use the toolchain and instead use system binaries.\n*   `--start-task` - Name of a task to start the project. Defaults to the [`docker.file.startTask`](https://moonrepo.dev/docs/config/project#starttask) setting, or prompts in the terminal.\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/file#configuration \"Direct link to Configuration\")\n\n*   [`docker.file`](https://moonrepo.dev/docs/config/project#file) in `moon.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 60,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__docker__prune.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/docker/prune\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, docker, prune\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/docker/prune#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/docker/prune\n\ndocker prune | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/docker/prune#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/docker/prune#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/docker/prune#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/docker/prune#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n        *   [file](http://moonrepo.dev/docs/commands/docker/file)\n        *   [prune](http://moonrepo.dev/docs/commands/docker/prune)\n        *   [scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n        *   [setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/docker/prune#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [docker](http://moonrepo.dev/docs/commands/docker) \n4.   [prune](http://moonrepo.dev/docs/commands/docker/prune) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ndocker prune\n============\n\nThe `moon docker prune` command will reduce the overall filesize of the Docker environment by installing production only dependencies for projects that were scaffolded, and removing any applicable extraneous files.\n\n`$ moon docker prune`\n\ninfo\n\nView the official [Docker usage guide](http://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\ncaution\n\nThis command _must be_ ran after [`moon docker scaffold`](http://moonrepo.dev/docs/commands/docker/scaffold) and is typically ran within a `Dockerfile`! The [`moon docker file`](http://moonrepo.dev/docs/commands/docker/file) command can be used to generate a `Dockerfile`.\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/prune#configuration \"Direct link to Configuration\")\n\n*   [`docker.prune`](http://moonrepo.dev/docs/config/workspace#prune) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/docker/prune.mdx)\n\n[file](http://moonrepo.dev/docs/commands/docker/file)\n\n[scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n\n*   [Configuration](http://moonrepo.dev/docs/commands/docker/prune#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 170,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__docker__scaffold.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/docker/scaffold\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, docker, scaffold\n- Summary: The `moon docker scaffold <...projects>` command creates multiple repository skeletons for use within `Dockerfile`s, to effectively take advantage of Docker's layer caching. It utilizes the [project graph](https://moonrepo.dev/docs/confi...\n----\n\nSource: https://moonrepo.dev/docs/commands/docker/scaffold\n\nThe `moon docker scaffold <...projects>` command creates multiple repository skeletons for use within `Dockerfile`s, to effectively take advantage of Docker's layer caching. It utilizes the [project graph](https://moonrepo.dev/docs/config/workspace#projects) to copy only critical files, like manifests, lockfiles, and configuration.\n\n`# Scaffold a skeleton to .moon/docker$ moon docker scaffold <project>`\n\ninfo\n\nView the official [Docker usage guide](https://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/docker/scaffold#arguments \"Direct link to Arguments\")\n\n*   `<...projects>` - List of project names or aliases to scaffold sources for, as defined in [`projects`](https://moonrepo.dev/docs/config/workspace#projects).\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/scaffold#configuration \"Direct link to Configuration\")\n\n*   [`docker.scaffold`](https://moonrepo.dev/docs/config/workspace#scaffold) in `.moon/workspace.yml` (entire workspace)\n*   [`docker.scaffold`](https://moonrepo.dev/docs/config/project#scaffold) in `moon.yml` (per project)\n\nHow it works[](http://moonrepo.dev/docs/commands/docker/scaffold#how-it-works \"Direct link to How it works\")\n-------------------------------------------------------------------------------------------------------------\n\nThis command may seem like magic, but it's relative simple thanks to moon's infrastructure and its project graph. When the command is ran, we generate 2 skeleton structures in `.moon/docker` (be sure to gitignore this). One for the workspace, and the other for sources.\n\nwarning\n\nBecause scaffolding uses the project graph, it requires all projects with a `package.json` to be [configured in moon](https://moonrepo.dev/docs/config/workspace#projects). Otherwise, moon will fail to copy all required files and builds may fail.\n\n### Workspace[](http://moonrepo.dev/docs/commands/docker/scaffold#workspace \"Direct link to Workspace\")\n\nThe workspace skeleton mirrors the project folder structure of the repository 1:1, and only copies files required for dependencies to install. This is typically manifests (`package.json`), lockfiles (`yarn.lock`, etc), other critical configs, and `.moon` itself. This is necessary for package managers to install dependencies (otherwise they will fail), and for dependencies to be layer cached in Docker.\n\nAn example of this skeleton using Yarn may look like the following:\n\n`.moon/docker/workspace/ .moon/ .yarn/ apps/    client/       package.json    server/        package.json packages/    foo/       package.json    bar/       package.json    baz/        package.json .yarnrc.yml package.json yarn.lock`\n\n### Sources[](http://moonrepo.dev/docs/commands/docker/scaffold#sources \"Direct link to Sources\")\n\nThe sources skeleton is not a 1:1 mirror of the repository, and instead is the source files of a project (passed as an argument to the command), and all of its dependencies. This allows [`moon run`](https://moonrepo.dev/docs/commands/run) and other commands to work within the `Dockerfile`, and avoid having to `COPY . .` the entire repository.\n\nUsing our example workspace above, our sources skeleton would look like the following, assuming our `client` project is passed as an argument, and this project depends on the `foo` and `baz` projects.\n\n`.moon/docker/sources/ apps/    client/|        src/|        tests/|        public/|        package.json|        tsconfig.json        (anything else) packages/     foo/        lib/        src/        package.json        tsconfig.json        (anything else)     baz/         lib/         src/         package.json         tsconfig.json         (anything else)`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 61,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__docker__setup.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/docker/setup\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, docker, setup\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/docker/setup#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/docker/setup\n\ndocker setup | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/docker/setup#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/docker/setup#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/docker/setup#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/docker/setup#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n        *   [file](http://moonrepo.dev/docs/commands/docker/file)\n        *   [prune](http://moonrepo.dev/docs/commands/docker/prune)\n        *   [scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n        *   [setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/docker/setup#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [docker](http://moonrepo.dev/docs/commands/docker) \n4.   [setup](http://moonrepo.dev/docs/commands/docker/setup) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ndocker setup\n============\n\nThe `moon docker setup` command will efficiently install dependencies for focused projects. This is an all-in-one command for tool and dependency installations, and should replace `npm install` and other commands.\n\n`$ moon docker setup`\n\ninfo\n\nView the official [Docker usage guide](http://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\ncaution\n\nThis command _must be_ ran after [`moon docker scaffold`](http://moonrepo.dev/docs/commands/docker/scaffold) and is typically ran within a `Dockerfile`! The [`moon docker file`](http://moonrepo.dev/docs/commands/docker/file) command can be used to generate a `Dockerfile`.\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/setup#configuration \"Direct link to Configuration\")\n\n*   [`*`](http://moonrepo.dev/docs/config/toolchain) in `.moon/toolchains.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/docker/setup.mdx)\n\n[scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n\n[exec](http://moonrepo.dev/docs/commands/exec)\n\n*   [Configuration](http://moonrepo.dev/docs/commands/docker/setup#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 170,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__exec.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/exec\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, exec\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/exec#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/exec\n\nexec | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/exec#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/exec#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/exec#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/exec#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/exec#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [exec](http://moonrepo.dev/docs/commands/exec) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nexec\n====\n\nv2.0.0\nThe `moon exec` (or `moon x`, or `moonx`) command is a low-level command for executing tasks in the action pipeline. It provides fine-grained control over how tasks are selected and executed, through command line options, making it ideal for custom workflows and advanced use cases.\n\nThe [`moon check`](http://moonrepo.dev/docs/commands/check), [`moon ci`](http://moonrepo.dev/docs/commands/ci), and [`moon run`](http://moonrepo.dev/docs/commands/run) commands are all built on top of `moon exec`, so be sure to check those out for more user-friendly abstractions!\n\n`# Run `lint` in project `app`$ moon exec app:lint$ moonx app:lint# Run `dev` in project `client` and `server`$ moon exec client:dev server:dev$ moonx client:dev server:dev# Run `test` in all projects$ moon exec :test$ moonx :test# Run `test` in all projects with tag `frontend`$ moon exec '#frontend:test'$ moonx '#frontend:test'# Run `format` in the default project$ moon exec format$ moonx format# Run `build` in projects matching the query$ moon exec :build --query \"language=javascript && projectLayer=library\"`\n\nArguments[](http://moonrepo.dev/docs/commands/exec#arguments \"Direct link to Arguments\")\n-----------------------------------------------------------------------------------------\n\n*   `...<target>` - [Targets](http://moonrepo.dev/docs/concepts/target) or project relative tasks to run.\n*   `[-- <args>]` - Additional arguments to [pass to the underlying command](http://moonrepo.dev/docs/run-task#passing-arguments-to-the-underlying-command).\n\nOptions[](http://moonrepo.dev/docs/commands/exec#options \"Direct link to Options\")\n-----------------------------------------------------------------------------------\n\n*   `-f`, `--force` - Force run and bypass cache, ignore changed files, and skip affected checks.\n*   `-i`, `--interactive` - Run the pipeline and tasks interactively.\n*   `-s`, `--summary [LEVEL]` - Print a summary of all actions that were ran in the pipeline.\n\n### Workflow[](http://moonrepo.dev/docs/commands/exec#workflow \"Direct link to Workflow\")\n\n*   `--on-failure <ON>` - When a task fails, either bail the pipeline, or continue executing.\n*   `--only-ci-tasks` - Filter tasks to those that only run in CI.\n*   `--query <QUERY>` - Filter tasks based on the result of a query.\n*   `--no-actions` - Run the pipeline without sync and setup related actions.\n\n### Affected[](http://moonrepo.dev/docs/commands/exec#affected \"Direct link to Affected\")\n\n*   `--affected [BY]` - Only run tasks if affected by changed files. Optionally accepts \"local\" or \"remote\".\n*   `--base <BASE>` - Base branch, commit, or revision to compare against.\n*   `--head <HEAD>` - Current branch, commit, or revision to compare with.\n*   `--status <STATUS>` - Filter changed files based on a changed status.\n*   `--stdin` - Accept changed files from stdin for affected checks.\n\n### Graph[](http://moonrepo.dev/docs/commands/exec#graph \"Direct link to Graph\")\n\n*   `--downstream <DEPTH>`, `--dependents <DEPTH>` - Control the depth of downstream dependents.\n*   `--upstream <DEPTH>`, `--dependencies <DEPTH>` - Control the depth of upstream dependencies.\n\n### Parallelism[](http://moonrepo.dev/docs/commands/exec#parallelism \"Direct link to Parallelism\")\n\n*   `--job <INDEX>` - Index of the current job (0 based).\n*   `--job-total <TOTAL>` - Total amount of jobs to run.\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/exec.mdx)\n\n[setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n[ext](http://moonrepo.dev/docs/commands/ext)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/exec#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/exec#options)\n    *   [Workflow](http://moonrepo.dev/docs/commands/exec#workflow)\n    *   [Affected](http://moonrepo.dev/docs/commands/exec#affected)\n    *   [Graph](http://moonrepo.dev/docs/commands/exec#graph)\n    *   [Parallelism](http://moonrepo.dev/docs/commands/exec#parallelism)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 198,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__ext.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/ext\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, ext\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/ext#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/ext\n\next | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/ext#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/ext#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/ext#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/ext#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/ext#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [ext](http://moonrepo.dev/docs/commands/ext) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\next\n===\n\nv1.20.0\nThe `moon ext <id>` command will execute an extension (a WASM plugin) that has been configured with the [`extensions`](http://moonrepo.dev/docs/config/workspace#extensions) setting in [`.moon/workspace.yml`](http://moonrepo.dev/docs/config). View our official [extensions guide](http://moonrepo.dev/docs/guides/extensions) for more information.\n\n`$ moon ext download -- --url https://github.com/moonrepo/moon/archive/refs/tags/v1.19.3.zip`\n\nExtensions typically support command line arguments, which _must_ be passed after a `--` separator (as seen above). Any arguments before the separator will be passed to the `moon ext` command itself.\n\ncaution\n\nThis command requires an internet connection if the extension's `.wasm` file must be downloaded from a URL, and it hasn't been cached locally.\n\n### Arguments[](http://moonrepo.dev/docs/commands/ext#arguments \"Direct link to Arguments\")\n\n*   `<id>` - Name of the extension to execute.\n*   `[-- <args>]` - Arguments to pass to the extension.\n\n### Configuration[](http://moonrepo.dev/docs/commands/ext#configuration \"Direct link to Configuration\")\n\n*   [`extensions`](http://moonrepo.dev/docs/config/workspace#extensions) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/ext.mdx)\n\n[exec](http://moonrepo.dev/docs/commands/exec)\n\n[extension](http://moonrepo.dev/docs/commands/extension)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/ext#arguments)\n*   [Configuration](http://moonrepo.dev/docs/commands/ext#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 169,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__extension.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/extension\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, extension\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/extension#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/extension\n\nextension | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/extension#__docusaurus_skipToContent_fallback)\n\n[![Image 2: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/extension#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/extension#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/extension#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n        *   [add](http://moonrepo.dev/docs/commands/extension/add)\n        *   [info](http://moonrepo.dev/docs/commands/extension/info)\n\n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/extension#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [extension](http://moonrepo.dev/docs/commands/extension) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nextension\n=========\n\nManage extension plugins.\n\n[add ------ The moon extension add [plugin] command will add a extension to the workspace by injecting a](http://moonrepo.dev/docs/commands/extension/add)[info ------- The moon extension info [plugin] command will display detailed information about a extension.](http://moonrepo.dev/docs/commands/extension/info)\n\n[ext](http://moonrepo.dev/docs/commands/ext)\n\n[add](http://moonrepo.dev/docs/commands/extension/add)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 149,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__extension__add.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/extension/add\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, extension, add\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/extension/add#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/extension/add\n\nextension add | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/extension/add#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/extension/add#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/extension/add#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/extension/add#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n        *   [add](http://moonrepo.dev/docs/commands/extension/add)\n        *   [info](http://moonrepo.dev/docs/commands/extension/info)\n\n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/extension/add#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [extension](http://moonrepo.dev/docs/commands/extension) \n4.   [add](http://moonrepo.dev/docs/commands/extension/add) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nextension add\n=============\n\nv2.0.0\nThe `moon extension add <id> [plugin]` command will add a extension to the workspace by injecting a configuration block into `.moon/extensions.yml`. To do this, the command will download the WASM plugin, extract information, and call initialize functions.\n\nFor built-in extensions, the [plugin locator](http://moonrepo.dev/docs/guides/wasm-plugins#configuring-plugin-locations) argument is optional, and will be derived from the identifier.\n\n`$ moon extension add download`\n\nFor third-party extensions, the [plugin locator](http://moonrepo.dev/docs/guides/wasm-plugins#configuring-plugin-locations) argument is required, and must point to the WASM plugin.\n\n`$ moon extension add custom https://example.com/path/to/plugin.wasm`\n\n### Arguments[](http://moonrepo.dev/docs/commands/extension/add#arguments \"Direct link to Arguments\")\n\n*   `<id>` - ID of the extension to use.\n*   `[plugin]` - Optional [plugin locator](http://moonrepo.dev/docs/guides/wasm-plugins#configuring-plugin-locations) for third-party extensions.\n\n### Options[](http://moonrepo.dev/docs/commands/extension/add#options \"Direct link to Options\")\n\n*   `--minimal` - Generate minimal configurations and sane defaults.\n*   `--yes` - Skip all prompts and enables tools based on file detection.\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/extension/add.mdx)\n\n[extension](http://moonrepo.dev/docs/commands/extension)\n\n[info](http://moonrepo.dev/docs/commands/extension/info)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/extension/add#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/extension/add#options)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 174,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__extension__info.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/extension/info\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, extension, info\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/extension/info#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/extension/info\n\nextension info | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/extension/info#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/extension/info#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/extension/info#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/extension/info#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n        *   [add](http://moonrepo.dev/docs/commands/extension/add)\n        *   [info](http://moonrepo.dev/docs/commands/extension/info)\n\n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/extension/info#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [extension](http://moonrepo.dev/docs/commands/extension) \n4.   [info](http://moonrepo.dev/docs/commands/extension/info) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nextension info\n==============\n\nv2.0.0\nThe `moon extension info <id> [plugin]` command will display detailed information about a extension. To do this, the command will download the WASM plugin, extract information, and call specific functions.\n\nFor built-in extensions, the [plugin locator][locator] argument is optional, and will be derived from the identifier.\n\n`$ moon extension info download`\n\nFor third-party extensions, the [plugin locator][locator] argument is required, and must point to the WASM plugin.\n\n`$ moon extension info custom https://example.com/path/to/plugin.wasm`\n\n### Arguments[](http://moonrepo.dev/docs/commands/extension/info#arguments \"Direct link to Arguments\")\n\n*   `<id>` - ID of the extension to view.\n*   `[plugin]` - Optional [plugin locator][locator] for third-party extensions.\n\nExample output[](http://moonrepo.dev/docs/commands/extension/info#example-output \"Direct link to Example output\")\n------------------------------------------------------------------------------------------------------------------\n\n`Extension   Download a file from a URL into the current working directory.  ID: download  Title: Download  Version: 1.0.0APIs    define_extension_config   execute_extension   extend_command   extend_project_graph   extend_task_command   extend_task_script   initialize_extension   register_extension (required)   sync_project   sync_workspace`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/extension/info.mdx)\n\n[add](http://moonrepo.dev/docs/commands/extension/add)\n\n[generate](http://moonrepo.dev/docs/commands/generate)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/extension/info#arguments)\n*   [Example output](http://moonrepo.dev/docs/commands/extension/info#example-output)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 174,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__generate.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/generate\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, generate\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/generate#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/generate\n\ngenerate | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/generate#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/generate#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/generate#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/generate#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/generate#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [generate](http://moonrepo.dev/docs/commands/generate) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ngenerate\n========\n\nThe `moon generate <id>` (or `moon g`) command will generate code (files and folders) from a pre-defined template of the same name, using an interactive series of prompts. Templates are located based on the [`generator.templates`](http://moonrepo.dev/docs/config/workspace#templates) setting.\n\n`# Generate code from a template$ moon generate npm-package# Generate code from a template to a target directory$ moon generate npm-package --to ./packages/example# Generate code while declaring custom variable values$ moon generate npm-package --to ./packages/example -- --name \"@company/example\"# Create a new template$ moon generate react-app --template`\n\n> View the official [code generation guide](http://moonrepo.dev/docs/guides/codegen) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/generate#arguments \"Direct link to Arguments\")\n\n*   `<id>` - ID of the template to generate.\n*   `[-- <vars>]` - Additional arguments to override default variable values.\n\n### Options[](http://moonrepo.dev/docs/commands/generate#options \"Direct link to Options\")\n\n*   `--defaults` - Use the default value of all variables instead of prompting the user.\n*   `--dry-run` - Run entire generator process without writing files.\n*   `--force` - Force overwrite any existing files at the destination.\n*   `--template` - Create a new template with the provided name.\n*   `--to` - Destination to write files to, relative from the current working directory. If not defined, will be prompted during generation.\n\n### Configuration[](http://moonrepo.dev/docs/commands/generate#configuration \"Direct link to Configuration\")\n\n*   [`generator`](http://moonrepo.dev/docs/config/workspace#generator) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/generate.mdx)\n\n[info](http://moonrepo.dev/docs/commands/extension/info)\n\n[hash](http://moonrepo.dev/docs/commands/hash)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/generate#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/generate#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/generate#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 173,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__hash.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/hash\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, hash\n- Summary: [Skip to main content](http://moonrepo.dev/docs/commands/hash#__docusaurus_skipToContent_fallback)\n----\n\nSource: https://moonrepo.dev/docs/commands/hash\n\nhash | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/hash#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/hash#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/hash#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/hash#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/hash#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [hash](http://moonrepo.dev/docs/commands/hash) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nhash\n====\n\nv2.0.0\nUse the `moon hash` command to inspect the contents and sources of a generated hash, also known as the hash manifest. This is extremely useful in debugging task inputs.\n\n`$ moon hash 0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fdde# Query hash using short form$ moon hash 0b55b234`\n\nBy default, this will output the contents of the hash manifest (which is JSON), and the fully qualified resolved hash.\n\n`Hash: 0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fdde{  \"command\": \"build\",  \"args\": [\"./build\"]  // ...}`\n\nThe command can also be output raw JSON by passing the `--json` flag.\n\n### Comparing hashes[](http://moonrepo.dev/docs/commands/hash#comparing-hashes \"Direct link to Comparing hashes\")\n\nThe command can also be used to compare two hashes by diffing their contents. Simply pass two hashes as arguments.\n\n`# Diff between 2 hashes$ moon hash 0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fdde 2388552fee5a02062d0ef402bdc7232f0a447458b058c80ce9c3d0d4d7cfe171# Diff between 2 hashes using short form$ moon hash 0b55b234 2388552f`\n\nBy default, this will output the contents of a hash file (which is JSON), highlighting the differences between the left and right hashes. Lines that match will be printed in white, while the left differences printed in green, and right differences printed in red. If you use `git diff`, this will feel familiar to you.\n\n`Left:  0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fddeRight: 2388552fee5a02062d0ef402bdc7232f0a447458b058c80ce9c3d0d4d7cfe171{\t\"command\": \"build\",\t\"args\": [+\t\t\"./dist\"-\t\t\"./build\"\t],\t...}`\n\nThe differences can also be output in JSON by passing the `--json` flag. The output has the following structure:\n\n`{\tleft: string,\tleft_hash: string,\tleft_diffs: string[],\tright: string,\tright_hash: string,\tright_diffs: string[],}`\n\n### Options[](http://moonrepo.dev/docs/commands/hash#options \"Direct link to Options\")\n\n*   `--json` - Display the diff in JSON format.\n\n### Configuration[](http://moonrepo.dev/docs/commands/hash#configuration \"Direct link to Configuration\")\n\n*   [`hasher`](http://moonrepo.dev/docs/config/workspace#hasher) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/hash.mdx)\n\n[generate](http://moonrepo.dev/docs/commands/generate)\n\n[init](http://moonrepo.dev/docs/commands/init)\n\n*   [Comparing hashes](http://moonrepo.dev/docs/commands/hash#comparing-hashes)\n*   [Options](http://moonrepo.dev/docs/commands/hash#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/hash#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: r.jina.ai markdown proxy.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 183,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__init.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/init\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, init\n- Summary: The `moon init` command will initialize moon into a repository and scaffold necessary config files\n----\n\nSource: https://moonrepo.dev/docs/commands/init\n\n# init\n\nThe `moon init` command will initialize moon into a repository and scaffold necessary config files\nby creating a `.moon` folder.\n\n```\n$ moon init# In another directory$ moon init ./app\n```\n\n### Arguments\n\n- `[dest]` - Destination to initialize and scaffold into. Defaults to `.` (current working directory).\n\n### Options\n\n- `--force` - Overwrite existing config files if they exist.\n\n- `--minimal` - Generate minimal configurations and sane defaults.\n\n- `--yes` - Skip all prompts and enables tools based on file detection.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 40,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__mcp.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/mcp\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, mcp\n- Summary: The `moon mcp` command will start an [MCP](https://modelcontextprotocol.io) server that listens for\n----\n\nSource: https://moonrepo.dev/docs/commands/mcp\n\n# mcp\n\nv1.37.0\n\nThe `moon mcp` command will start an [MCP](https://modelcontextprotocol.io) server that listens for\nrequests from AI assistants. This allows for agentic workflows in your favorite editor.\n\n```\n$ moon mcp\n```\n\ninfo\n\nThis command should not be ran manually and instead should be integrated into your editor. View the\n[MCP guide](/docs/guides/mcp) for more information.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 35,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__overview.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/overview\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, overview\n- Summary: The following options are available for all moon commands.\n----\n\nSource: https://moonrepo.dev/docs/commands/overview\n\n# Overview\n\nThe following options are available for all moon commands.\n\n- `--cache ` - The mode for [cache operations](#caching).\n\n- `--color` - Force [colored output](#colors) for moon (not tasks).\n\n- `--concurrency`, `-c` - Maximum number of threads to utilize.\n\n- `--dump` - Dump a [trace profile](#profiling) to the working directory.\n\n- `--help` - Display the help menu for the current command.\n\n- `--log ` - The lowest [log level to output](#logging).\n\n- `--log-file ` - Write logs to the defined file.\n\n- `--quiet`, `-q` - Hide all non-important moon specific terminal output.\n\n- `--theme` - Terminal theme to write output in. v1.35.0\n\n- `--version` - Display the version of the CLI.\n\n## Caching\n\nWe provide a powerful [caching layer](/docs/concepts/cache), but sometimes you need to debug failing or\nbroken tasks, and this cache may get in the way. To circumvent this, we support the `--cache` global\noption, or the `MOON_CACHE` environment variable, both of which accept one of the following values.\n\n- `off` - Turn off caching entirely. Every task will run fresh, including dependency installs.\n\n- `read` - Read existing items from the cache, but do not write to them.\n\n- `read-write` (default) - Read and write items to the cache.\n\n- `write` - Do not read existing cache items, but write new items to the cache.\n\n```\n$ moon run app:build --cache off# Or$ MOON_CACHE=off moon run app:build\n```\n\n## Colors\n\nColored output is a complicated subject, with differing implementations and standards across tooling\nand operating systems. moon aims to normalize this as much as possible, by doing the following:\n\n- By default, moon colors are inherited from your terminal settings (`TERM` and `COLORTERM` environment variables).\n\n- Colors can be force enabled by passing the `--color` option (preferred), or `MOON_COLOR` or `FORCE_COLOR` environment variables.\n\n```\n$ moon app:build --color run# Or$ MOON_COLOR=2 moon run app:build\n```\n\nWhen forcing colors with `MOON_COLOR` or `FORCE_COLOR`, you may set it to one of the following\nnumerical values for the desired level of color support. This is automatically inferred if you use\n`--color`.\n\n- `0` - No colors\n\n- `1` - 16 colors (standard terminal colors)\n\n- `2` - 256 colors\n\n- `3` - 16 million colors (truecolor)\n\n### Themesv1.35.0\n\nBy default, moon assumes a dark themed terminal is being used, and will output colors accordingly.\nHowever, if you use a light theme, these colors are hard to read. To mitigate this, we support\nchanging the theme with the `--theme` global option, or the `MOON_THEME` environment variable.\n\n```\n$ moon run app:build --theme light# Or$ MOON_THEME=light moon run app:build\n```\n\n### Piped output\n\nWhen tasks (child processes) are piped, colors and ANSI escape sequences are lost, since the target\nis not a TTY and we do not implement a PTY. This is a common pattern this is quite annoying.\nHowever, many tools and CLIs support a `--color` option to work around this limitation and to always\nforce colors, even when not a TTY.\n\nTo mitigate this problem as a whole, and to avoid requiring `--color` for every task, moon supports\nthe [`pipeline.inheritColorsForPipedTasks`](/docs/config/workspace#inheritcolorsforpipedtasks)\nconfiguration setting. When enabled, all piped child processes will inherit the color settings of\nthe currently running terminal.\n\n## Concurrency\n\nThe `--concurrency` option or `MOON_CONCURRENCY` environment variable can be used to control the\nmaximum amount of threads to utilize in our thread pool. If not defined, defaults to the number of\noperating system cores.\n\n```\n$ moon run app:build --concurrency 1# Or$ MOON_CONCURRENCY=1 moon run app:build\n```\n\n## Debugging\n\nAt minimum, most debugging can be done by passing [`--log trace`](#logging) on the command line and\nsifting through the logs. We also provide the following environment variables to toggle output.\n\n- `MOON_DEBUG_PROCESS_ENV` - By default moon hides the environment variables (except for `MOON_`) passed to processes to avoid leaking sensitive information. However, knowing what environment variables are passed around is helpful in debugging. Declare this variable to reveal the entire environment.\n\n- `MOON_DEBUG_PROCESS_INPUT` - By default moon truncates the stdin passed to processes to avoid thrashing the console with a large input string. However, knowing what input is passed around is helpful in debugging. Declare this variable to reveal the entire input.\n\n- `MOON_DEBUG_PROTO_INSTALL` - Debug the proto installation process.\n\n- `MOON_DEBUG_REMOTE` - Debug our remote caching implementation by including additional logging output, and printing internal connection errors.\n\n- `MOON_DEBUG_WASM` - Debug our WASM plugins by including additional logging output, and optionally dumping memory/core profiles.\n\n## Logging\n\nBy default, moon aims to output as little as possible, as we want to preserve the original output of\nthe command's being ran, excluding warnings and errors. This is managed through log levels, which\ncan be defined with the `--log` global option, or the `MOON_LOG` environment variable. The following\nlevels are supported, in priority order.\n\n- `off` - Turn off logging entirely.\n\n- `error` - Only show error logs.\n\n- `warn` - Only show warning logs and above.\n\n- `info` (default) - Only show info logs and above.\n\n- `debug` - Only show debug logs and above.\n\n- `trace` - Show all logs, including network requests and child processes.\n\n- `verbose` - Like `trace` but also includes span information. v1.35.0\n\n```\n$ moon run app:build --log trace# Or$ MOON_LOG=trace moon run app:build\n```\n\n### Writing logs to a file\n\nmoon can dump the logs from a command to a file using the `--logFile` option, or the `MOON_LOG_FILE`\nenvironment variable. The dumped logs will respect the `--log` option and filter the logs piped to\nthe output file.\n\n```\n$ moon run app:build --logFile=output.log# Or$ MOON_LOG_FILE=output.log moon run app:build\n```\n\n## Profilingv1.26.0\n\nWhen the `--dump` option or `MOON_DUMP` environment variable is set, moon will generate a trace\nprofile and dump it to the current working directory. This profile can be opened with Chrome (via\n`chrome://tracing`) or [Perfetto](https://ui.perfetto.dev/).\n\nThis profile will display many of the operations within moon as a flame chart, allowing you to\ninspect and debug slow operations.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 177,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__project-graph.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/project-graph\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, project graph\n- Summary: The `moon project-graph [id]` (or `moon pg`) command will generate and serve a visual graph of all\n----\n\nSource: https://moonrepo.dev/docs/commands/project-graph\n\n# project-graph\n\nThe `moon project-graph [id]` (or `moon pg`) command will generate and serve a visual graph of all\nconfigured projects as nodes, with dependencies between as edges, and can also output the graph in\n[Graphviz DOT format](https://graphviz.org/doc/info/lang.html).\n\n```\n# Run the visualizer locally$ moon project-graph# Export to DOT format$ moon project-graph --dot > graph.dot\n```\n\nA project name can be passed to focus the graph to only that project and its dependencies. For\nexample, `moon project-graph app`.\n\n### Arguments\n\n- `[id]` - Optional ID or alias of a project to focus, as defined in [`projects`](/docs/config/workspace#projects).\n\n### Options\n\n- `--dependents` - Include direct dependents of the focused project.\n\n- `--dot` - Print the graph in DOT format.\n\n- `--host` - The host address. Defaults to `127.0.0.1`. v1.36.0\n\n- `--json` - Print the graph in JSON format.\n\n- `--port` - The port to bind to. Defaults to a random port. v1.36.0\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n## Example output\n\nThe following output is an example of the graph in DOT format.\n\n```\ndigraph {    0 [ label=\"(workspace)\" style=filled, shape=circle, fillcolor=black, fontcolor=white]    1 [ label=\"runtime\" style=filled, shape=circle, fillcolor=gray, fontcolor=black]    2 [ label=\"website\" style=filled, shape=circle, fillcolor=gray, fontcolor=black]    0 -> 1 [ arrowhead=none]    0 -> 2 [ arrowhead=none]}\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 60,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__project.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/project\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, project\n- Summary: The `moon project [id]` (or `moon p`) command will display all available information about a project\n----\n\nSource: https://moonrepo.dev/docs/commands/project\n\n# project\n\nThe `moon project [id]` (or `moon p`) command will display all available information about a project\nthat has been configured and exists within the graph. If a project does not exist, the program will\nreturn with a 1 exit code.\n\n```\n$ moon project web\n```\n\n### Arguments\n\n- `[id]` - ID or alias of a project, as defined in [`projects`](/docs/config/workspace#projects).\n\n### Options\n\n- `--json` - Print the project and its configuration as JSON.\n\n- `--no-tasks` - Do not list tasks for the project.\n\n## Example output\n\nThe following output is an example of what this command prints, using our very own\n`@moonrepo/runtime` package.\n\n```\nRUNTIMEProject: runtimeAlias: @moonrepo/runtimeSource: packages/runtimeRoot: ~/Projects/moon/packages/runtimeToolchain: nodeLanguage: typescriptStack: unknownType: libraryDEPENDS ON  - types (implicit, production)INHERITS FROM  - .moon/tasks/node.ymlTASKSbuild:   packemon build --addFiles --addExports --declarationformat:   prettier --check --config ../../prettier.config.js --ignore-path ../../.prettierignore --no-error-on-unmatched-pattern .lint:   eslint --cache --cache-location ./.eslintcache --color --ext .js,.ts,.tsx --ignore-path ../../.eslintignore --exit-on-fatal-error --no-error-on-unmatched-pattern --report-unused-disable-directives .lint-fix:   eslint --cache --cache-location ./.eslintcache --color --ext .js,.ts,.tsx --ignore-path ../../.eslintignore --exit-on-fatal-error --no-error-on-unmatched-pattern --report-unused-disable-directives . --fixtest:   jest --cache --color --preset jest-preset-moon --passWithNoTeststypecheck:   tsc --buildFILE GROUPSconfigs:  - packages/runtime/*.{js,json}sources:  - packages/runtime/src/**/*  - packages/runtime/types/**/*tests:  - packages/runtime/tests/**/*\n```\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n- [`project`](/docs/config/project#project) in `moon.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 54,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__projects.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/projects\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, projects\n- Summary: The `moon projects` command will list all projects configured in the workspace as a table of\n----\n\nSource: https://moonrepo.dev/docs/commands/projects\n\n# projects\n\nv2.0.0\n\nThe `moon projects` command will list all projects configured in the workspace as a table of\ninformation.\n\n```\nProject          Source                    Stack             Layer             Toolchains                                Description                                                   types            packages/types            frontend          library           javascript, node, typescript, yarn                                                                      website          website                   frontend          application       javascript, node, typescript, yarn        A static website powered by Docusaurus.                       \n```\n\ninfo\n\nUse [`moon query projects`](/docs/commands/query/projects) for advanced querying and filtering of projects.\n\n### Options\n\n- `--json` - Print the projects as JSON.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 38,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__query.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/query\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, query\n- Summary: Documentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n----\n\nSource: https://moonrepo.dev/docs/commands/query\n\n- [Home](/)\n- [Commands](/docs/commands)\n- [query](/docs/commands/query)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# query\n\nQuery information about moon, its projects, their tasks, the environment, the pipeline, and many other aspects of the workspace.\n\n[ affectedUse the moon query affected sub-command to query for all affected projects and tasks based on the](/docs/commands/query/affected)\n\n[ changed-filesUse the moon query changed-files sub-command to query for a list of changed files (added,](/docs/commands/query/changed-files)\n\n[ projectsUse the moon query projects sub-command to query information about all projects in the project](/docs/commands/query/projects)\n\n[ tasksUse the moon query tasks sub-command to query task information for all projects in the project](/docs/commands/query/tasks)\n\n[project-graph](/docs/commands/project-graph)\n\n[affected](/docs/commands/query/affected)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 43,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__query__affected.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/query/affected\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, query, affected\n- Summary: Use the `moon query affected` sub-command to query for all affected projects and tasks based on the\n----\n\nSource: https://moonrepo.dev/docs/commands/query/affected\n\n# query affected\n\nv2.0.0\n\nUse the `moon query affected` sub-command to query for all affected projects and tasks based on the\nstate of the workspace and VCS.\n\n```\n# Return affected$ moon query affected# Return affected including dependency relationships$ moon query affected --upstream deep\n```\n\nThis will output a map of projects and tasks as JSON. The output has the following structure:\n\n```\n{\tprojects: Record,\ttasks: Record,}\n```\n\n### Options\n\n- `--downstream` - Include downstream dependents. Supports \"none\" (default), \"direct\", \"deep\".\n\n- `--upstream` - Include upstream dependencies. Supports \"none\", \"direct\", \"deep\" (default).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 42,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__query__changed-files.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/query/changed-files\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, query, changed files\n- Summary: Use the `moon query changed-files` sub-command to query for a list of changed files (added,\n----\n\nSource: https://moonrepo.dev/docs/commands/query/changed-files\n\n# query changed-files\n\nUse the `moon query changed-files` sub-command to query for a list of changed files (added,\nmodified, deleted, etc) using the current VCS state. These are the same queries that\n[`moon ci`](/docs/commands/ci) and [`moon run`](/docs/commands/run) use under the hood.\n\nTouches files are determined using the following logic:\n\n- If `--defaultBranch` is provided, and the current branch is the [`vcs.defaultBranch`](/docs/config/workspace#defaultbranch), then compare against the previous revision of the default branch (`HEAD~1`). This is what [continuous integration](/docs/guides/ci) uses.\n\n- If `--local` is provided, changed files are based on your local index only (`git status`).\n\n- Otherwise, then compare the defined base (`--base`) against head (`--head`).\n\n```\n# Return all files$ moon query changed-files# Return deleted files$ moon query changed-files --status deleted# Return all files between 2 revisions$ moon query changed-files --base  --head\n```\n\nThis will output a list of workspace relative files as JSON. The output has the following structure:\n\n```\n{\tfiles: string[],\toptions: QueryOptions,}\n```\n\n### Options\n\n- `--default-branch` - When on the default branch, compare against the previous revision.\n\n- `--base ` - Base branch, commit, or revision to compare against. Defaults to [`vcs.defaultBranch`](/docs/config/workspace#defaultbranch).\n\n- `--head ` - Current branch, commit, or revision to compare with. Defaults to `HEAD`.\n\n- `--local` - Gather files from the local state instead of remote.\n\n- `--remote` - Gather files from the remote state instead of local.\n\n- `--status ` - Filter files based on a changed status. Can be passed multiple times. Types: `all` (default), `added`, `deleted`, `modified`, `staged`, `unstaged`, `untracked`\n\n### Configuration\n\n- [`vcs`](/docs/config/workspace#vcs) in `.moon/workspace.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 61,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__query__projects.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/query/projects\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, query, projects\n- Summary: Use the `moon query projects` sub-command to query information about all projects in the project\n----\n\nSource: https://moonrepo.dev/docs/commands/query/projects\n\n# query projects\n\nUse the `moon query projects` sub-command to query information about all projects in the project\ngraph. The project list can be filtered by passing a [query statement](/docs/concepts/query-lang) as\nan argument, or by using [options](#options) arguments.\n\n```\n# Find all projects$ moon query projects# Find all projects with an id that matches \"react\"$ moon query projects --id react$ moon query projects \"project~react\"# Find all projects with a `lint` or `build` task$ moon query projects --tasks \"lint|build\"$ moon query projects \"task=[lint,build]\"\n```\n\nThis will output a list of projects as JSON. The output has the following structure:\n\n```\n{\tprojects: Project[],\toptions: QueryOptions,}\n```\n\n### Affected projects\n\nThis command can also be used to query for affected projects, based on the state of the VCS working\ntree. For advanced control, you can also pass the results of `moon query changed-files` to stdin.\n\n```\n# Find all affected projects$ moon query projects --affected# Find all affected projects using the results of another query$ moon query changed-files | moon query projects --affected\n```\n\n### Arguments\n\n- `[query]` - An optional [query statement](/docs/concepts/query-lang) to filter projects with. When provided, all [filter options](#filters) are ignored. v1.4.0\n\n### Options\n\n#### Affected\n\n- `--affected` - Filter projects that have been affected by touched files.\n\n- `--downstream` - Include downstream dependents of queried projects. Supports \"none\" (default), \"direct\", \"deep\". v1.29.0\n\n- `--upstream` - Include upstream dependencies of queried projects. Supports \"none\", \"direct\", \"deep\" (default). v1.29.0\n\n#### Filters\n\nAll option values are case-insensitive regex patterns.\n\n- `--alias ` - Filter projects that match this alias.\n\n- `--id ` - Filter projects that match this ID/name.\n\n- `--language ` - Filter projects of this programming language.\n\n- `--layer ` - Filter project of this layer.\n\n- `--source ` - Filter projects that match this source path.\n\n- `--stack ` - Filter projects of the tech stack.\n\n- `--tags ` - Filter projects that have the following tags.\n\n- `--tasks ` - Filter projects that have the following tasks.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 82,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__query__tasks.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/query/tasks\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, query, tasks\n- Summary: Use the `moon query tasks` sub-command to query task information for all projects in the project\n----\n\nSource: https://moonrepo.dev/docs/commands/query/tasks\n\n# query tasks\n\nUse the `moon query tasks` sub-command to query task information for all projects in the project\ngraph. The tasks list can be filtered by passing a [query statement](/docs/concepts/query-lang) as\nan argument, or by using [options](#options) arguments.\n\n```\n# Find all tasks grouped by project$ moon query tasks# Find all tasks from projects with an id that matches \"react\"$ moon query tasks --id react$ moon query tasks \"task~react\"\n```\n\nThis will output a list of projects as JSON. The output has the following structure:\n\n```\n{\ttasks: Record>,\toptions: QueryOptions,}\n```\n\n### Arguments\n\n- `[query]` - An optional [query statement](/docs/concepts/query-lang) to filter projects with. When provided, all [filter options](#filters) are ignored. v1.4.0\n\n### Options\n\n#### Affected\n\n- `--affected` - Filter tasks that have been affected by touched files.\n\n- `--downstream` - Include downstream dependents of queried tasks. Supports \"none\" (default), \"direct\", \"deep\". v1.30.0\n\n- `--upstream` - Include upstream dependencies of queried tasks. Supports \"none\", \"direct\", \"deep\" (default). v1.30.0\n\n#### Filtersv1.30.0\n\nAll option values are case-insensitive regex patterns.\n\n- `--command ` - Filter tasks that match this command.\n\n- `--id ` - Filter tasks that match this ID.\n\n- `--project ` - Filter tasks that belong to this project.\n\n- `--script ` - Filter tasks that match this script.\n\n- `--toolchain ` - Filter tasks of this toolchain. v1.31.0\n\n- `--type ` - Filter tasks of this type.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n- [`tasks`](/docs/config/project#tasks) in `moon.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 71,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__run.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/run\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, run\n- Summary: The `moon run` (or `moon r`) command will run one or many [targets](/docs/concepts/target) and all of\n----\n\nSource: https://moonrepo.dev/docs/commands/run\n\n# run\n\nThe `moon run` (or `moon r`) command will run one or many [targets](/docs/concepts/target) and all of\nits dependencies in topological order. Each run will incrementally cache each task, improving speed\nand development times... over time. View the official [Run a task](/docs/run-task) and\n[Cheat sheet](/docs/cheat-sheet#tasks) articles for more information!\n\n```\n# Run `lint` in project `app`$ moon run app:lint# Run `dev` in project `client` and `server`$ moon run client:dev server:dev# Run `test` in all projects$ moon run :test# Run `test` in all projects with tag `frontend`$ moon run '#frontend:test'# Run `format` in default project$ moon run format# Run `build` in projects matching the query$ moon run :build --query \"language=javascript && projectLayer=library\"\n```\n\ninfo\n\nThe default behavior for `moon run` is to \"fail fast\", meaning that any failed task will immediately\nabort execution of the entire action graph. Use `moon exec --on-failure continue` for alternative\nbehavior.\n\n### Arguments\n\n- `...` - [Targets](/docs/concepts/target) or project relative tasks to run.\n\n- `[-- ]` - Additional arguments to [pass to the underlying command](/docs/run-task#passing-arguments-to-the-underlying-command).\n\n### Options\n\nInherits all options from [`moon exec`](/docs/commands/exec) except for `--on-failure`.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n- [`tasks`](/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n\n- [`tasks`](/docs/config/project#tasks) in `moon.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 54,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__setup.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/setup\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, setup\n- Summary: The `moon setup` command can be used to setup the developer and pipeline environments. It achieves\n----\n\nSource: https://moonrepo.dev/docs/commands/setup\n\n# setup\n\nThe `moon setup` command can be used to setup the developer and pipeline environments. It achieves\nthis by downloading and installing all configured tools into the toolchain.\n\n```\n$ moon setup\n```\n\ninfo\n\nThis command should rarely be used, as the environment is automatically setup when running other\ncommands, like detecting affected projects, running a task, or generating a build artifact.\n\n### Configuration\n\n- [`*`](/docs/config/toolchain) in `.moon/toolchains.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 37,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__sync.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/sync\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, sync\n- Summary: Documentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n----\n\nSource: https://moonrepo.dev/docs/commands/sync\n\n- [Home](/)\n- [Commands](/docs/commands)\n- [sync](/docs/commands/sync)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# sync\n\nOperations for syncing the workspace to a healthy state.\n\n[ code-ownersThe moon sync code-owners command will manually sync code owners, by aggregating all owners from](/docs/commands/sync/code-owners)\n\n[ config-schemasThe moon sync config-schemas command will manually generate JSON schemas to .moon/cache/schemas](/docs/commands/sync/config-schemas)\n\n[ projectsThe moon sync projects command will force sync all projects in the workspace to help achieve a](/docs/commands/sync/projects)\n\n[ vcs-hooksThe moon sync vcs-hooks command will manually sync hooks for the configured](/docs/commands/sync/vcs-hooks)\n\n[setup](/docs/commands/setup)\n\n[code-owners](/docs/commands/sync/code-owners)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 43,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__sync__code-owners.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/sync/code-owners\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, sync, code owners\n- Summary: The `moon sync code-owners` command will manually sync code owners, by aggregating all owners from\n----\n\nSource: https://moonrepo.dev/docs/commands/sync/code-owners\n\n# sync code-owners\n\nv1.8.0\n\nThe `moon sync code-owners` command will manually sync code owners, by aggregating all owners from\nprojects, and generating a single `CODEOWNERS` file. Refer to the official\n[code owners](/docs/guides/codeowners) guide for more information.\n\n```\n$ moon sync code-owners\n```\n\n### Options\n\n- `--clean` - Clean and remove previously generated file.\n\n- `--force` - Bypass cache and force create file.\n\n### Configuration\n\n- [`codeowners`](/docs/config/workspace#codeowners) in `.moon/workspace.yml`\n\n- [`owners`](/docs/config/project#owners) in `moon.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 43,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__sync__config-schemas.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/sync/config-schemas\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, sync, config schemas\n- Summary: The `moon sync config-schemas` command will manually generate JSON schemas to `.moon/cache/schemas`\n----\n\nSource: https://moonrepo.dev/docs/commands/sync/config-schemas\n\n# sync config-schemas\n\nv1.27.0\n\nThe `moon sync config-schemas` command will manually generate JSON schemas to `.moon/cache/schemas`\nfor all our different configuration files.\n\n```\n$ moon sync config-schemas\n```\n\n### Options\n\n- `--force` - Bypass cache and force create files.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 34,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__sync__projects.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/sync/projects\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, sync, projects\n- Summary: The `moon sync projects` command will force sync all projects in the workspace to help achieve a\n----\n\nSource: https://moonrepo.dev/docs/commands/sync/projects\n\n# sync projects\n\nv1.8.0\n\nThe `moon sync projects` command will force sync all projects in the workspace to help achieve a\n[healthy repository state](/docs/faq#what-should-be-considered-the-source-of-truth). This applies\nthe following:\n\n- Ensures cross-project dependencies are linked based on [`dependsOn`](/docs/config/project#dependson).\n\n- Ensures language specific configuration files are present and accurate (`package.json`, `tsconfig.json`, etc).\n\n- Ensures root configuration and project configuration are in sync.\n\n- Any additional language specific semantics that may be required.\n\n```\n$ moon sync projects\n```\n\nThis command should rarely be ran, as [`moon run`](/docs/commands/run) will sync affected projects\nautomatically! However, when migrating or refactoring, manual syncing may be necessary.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 46,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__sync__vcs-hooks.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/sync/vcs-hooks\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, sync, vcs hooks\n- Summary: The `moon sync vcs-hooks` command will manually sync hooks for the configured\n----\n\nSource: https://moonrepo.dev/docs/commands/sync/vcs-hooks\n\n# sync vcs-hooks\n\nv1.9.0\n\nThe `moon sync vcs-hooks` command will manually sync hooks for the configured\n[VCS](/docs/config/workspace#vcs), by generating and referencing hook scripts from the\n[`vcs.hooks`](/docs/config/workspace#hooks) setting. Refer to the official\n[VCS hooks](/docs/guides/vcs-hooks) guide for more information.\n\n```\n$ moon sync vcs-hooks\n```\n\n### Options\n\n- `--clean` - Clean and remove previously generated hooks.\n\n- `--force` - Bypass cache and force create hooks.\n\n### Configuration\n\n- [`vcs.hooks`](/docs/config/workspace#hooks) in `.moon/workspace.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 42,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__task-graph.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/task-graph\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, task graph\n- Summary: The `moon task-graph [target]` (or `moon tg`) command will generate and serve a visual graph of all\n----\n\nSource: https://moonrepo.dev/docs/commands/task-graph\n\n# task-graph\n\nv1.30.0\n\nThe `moon task-graph [target]` (or `moon tg`) command will generate and serve a visual graph of all\nconfigured tasks as nodes, with dependencies between as edges, and can also output the graph in\n[Graphviz DOT format](https://graphviz.org/doc/info/lang.html).\n\n```\n# Run the visualizer locally$ moon task-graph# Export to DOT format$ moon task-graph --dot > graph.dot\n```\n\nA task target can be passed to focus the graph to only that task and its dependencies. For\nexample, `moon task-graph app:build`.\n\n### Arguments\n\n- `[target]` - Optional target of task to focus.\n\n### Options\n\n- `--dependents` - Include direct dependents of the focused task.\n\n- `--dot` - Print the graph in DOT format.\n\n- `--host` - The host address. Defaults to `127.0.0.1`. v1.36.0\n\n- `--json` - Print the graph in JSON format.\n\n- `--port` - The port to bind to. Defaults to a random port. v1.36.0\n\n## Example output\n\nThe following output is an example of the graph in DOT format.\n\n```\ndigraph {    0 [ label=\"types:build\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    1 [ label=\"runtime:build\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    2 [ label=\"website:build\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    1 -> 0 [ label=\"required\" arrowhead=box, arrowtail=box]    2 -> 1 [ label=\"required\" arrowhead=box, arrowtail=box]    2 -> 0 [ label=\"required\" arrowhead=box, arrowtail=box]}\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 58,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__task.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/task\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, task\n- Summary: The `moon task [target]` (or `moon t`) command will display information about a task that has been\n----\n\nSource: https://moonrepo.dev/docs/commands/task\n\n# task\n\nv1.1.0\n\nThe `moon task [target]` (or `moon t`) command will display information about a task that has been\nconfigured and exists within a project. If a task does not exist, the program will return with a 1\nexit code.\n\n```\n$ moon task web:build\n```\n\n### Arguments\n\n- `[target]` - Fully qualified project + task target.\n\n### Options\n\n- `--json` - Print the task and its configuration as JSON.\n\n## Example output\n\nThe following output is an example of what this command prints, using our very own\n`@moonrepo/runtime` package.\n\n```\nRUNTIME:BUILDTask: buildProject: runtimeToolchain: nodeType: buildPROCESSCommand: packemon build --addFiles --addExports --declarationEnvironment variables:  - NODE_ENV = productionWorking directory: ~/Projects/moon/packages/runtimeRuns dependencies: ConcurrentlyRuns in CI: YesDEPENDS ON  - types:buildINHERITS FROM  - .moon/tasks/node.ymlINPUTS  - .moon/*.yml  - .moon/tasks/node.yml  - packages/runtime/package.json  - packages/runtime/src/**/*  - packages/runtime/tsconfig.*.json  - packages/runtime/tsconfig.json  - packages/runtime/types/**/*  - tsconfig.options.jsonOUTPUTS  - packages/runtime/cjs\n```\n\n### Configuration\n\n- [`tasks`](/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n\n- [`tasks`](/docs/config/project#tasks) in `moon.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 54,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__tasks.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/tasks\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, tasks\n- Summary: The `moon tasks` command will list all tasks available in the workspace as a table of information.\n----\n\nSource: https://moonrepo.dev/docs/commands/tasks\n\n# tasks\n\nv2.0.0\n\nThe `moon tasks` command will list all tasks available in the workspace as a table of information.\n\n```\nTask                          Command          Type        Preset      Toolchains                                Description                                                           website:build                 docusaurus       build                   typescript, javascript, node, yarn        Builds the Docusaurus app.                                            website:format                prettier         test                    javascript, node, yarn                                                                                          website:format-write          prettier         test                    javascript, node, yarn                                                                                          website:lint                  eslint           test                    javascript, node, yarn                                                                                          website:lint-fix              eslint           test                    javascript, node, yarn                                                                                          website:start                 docusaurus       run         server      typescript, javascript, node, yarn                                                                              website:test                  jest             test                    javascript, node, yarn                                                                                          website:typecheck             tsc              test                    typescript, javascript, node, yarn                                                                              \n```\n\ninfo\n\nUse [`moon query tasks`](/docs/commands/query/tasks) for advanced querying and filtering of tasks.\n\n### Arguments\n\n- `[id]` - Filter tasks to a specific project ID.\n\n### Options\n\n- `--json` - Print the projects as JSON.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 41,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__teardown.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/teardown\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, teardown\n- Summary: The `moon teardown` command, as its name infers, will teardown and clean the current environment,\n----\n\nSource: https://moonrepo.dev/docs/commands/teardown\n\n# teardown\n\nThe `moon teardown` command, as its name infers, will teardown and clean the current environment,\nopposite the [`setup`](/docs/commands/setup) command. It achieves this by doing the following:\n\n- Uninstalling all configured tools in the toolchain.\n\n- Removing any download or temporary files/folders.\n\n```\n$ moon teardown\n```\n\n### Configuration\n\n- [`*`](/docs/config/toolchain) in `.moon/toolchains.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 36,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__template.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/template\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, template\n- Summary: The `moon template [id]` command will display information about a template, its files, and\n----\n\nSource: https://moonrepo.dev/docs/commands/template\n\n# template\n\nv2.0.0\n\nThe `moon template [id]` command will display information about a template, its files, and\nvariables.\n\n```\nTemplate title   Some description of the template and its files.About   Template: package  Location: /templates/package  Destination: packages/[name | kebab_case]  Extends:   Assets:   Files:    - package.jsonVariables   name: string\n```\n\n### Arguments\n\n- `[id]` - The template ID.\n\n### Options\n\n- `--json` - Print the template as JSON.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 38,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__templates.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/templates\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, templates\n- Summary: The `moon templates` command will list all templates available for [code generation](/docs/commands/generate).\n----\n\nSource: https://moonrepo.dev/docs/commands/templates\n\n# templates\n\nv1.24.0\n\nThe `moon templates` command will list all templates available for [code generation](/docs/commands/generate).\nThis list will include the template title, description, default destination, where it's source files\nare located, and more.\n\n```\n$ moon templates\n```\n\n### Options\n\n- `--filter` - Filter templates by a search term.\n\n- `--json` - Print templates in JSON format.\n\n### Configuration\n\n- [`generator`](/docs/config/workspace#generator) in `.moon/workspace.yml`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 41,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__toolchain.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/toolchain\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, toolchain\n- Summary: Documentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n----\n\nSource: https://moonrepo.dev/docs/commands/toolchain\n\n- [Home](/)\n- [Commands](/docs/commands)\n- [toolchain](/docs/commands/toolchain)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# toolchain\n\nManage toolchain plugins.\n\n[ addThe moon toolchain add [plugin] command will add a toolchain to the workspace by injecting a](/docs/commands/toolchain/add)\n\n[ infoThe moon toolchain info [plugin] command will display detailed information about a toolchain,](/docs/commands/toolchain/info)\n\n[templates](/docs/commands/templates)\n\n[add](/docs/commands/toolchain/add)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 39,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__toolchain__add.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/toolchain/add\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, toolchain, add\n- Summary: The `moon toolchain add  [plugin]` command will add a toolchain to the workspace by injecting a\n----\n\nSource: https://moonrepo.dev/docs/commands/toolchain/add\n\n# toolchain add\n\nv1.38.0\n\nThe `moon toolchain add  [plugin]` command will add a toolchain to the workspace by injecting a\nconfiguration block into `.moon/toolchains.yml`. To do this, the command will download the WASM\nplugin, extract information, and call initialize functions.\n\nFor built-in toolchains, the [plugin locator](/docs/guides/wasm-plugins#configuring-plugin-locations) argument is optional, and will be derived\nfrom the identifier.\n\n```\n$ moon toolchain add typescript\n```\n\nFor third-party toolchains, the [plugin locator](/docs/guides/wasm-plugins#configuring-plugin-locations) argument is required, and must point to\nthe WASM plugin.\n\n```\n$ moon toolchain add custom https://example.com/path/to/plugin.wasm\n```\n\n### Arguments\n\n- `` - ID of the toolchain to use.\n\n- `[plugin]` - Optional [plugin locator](/docs/guides/wasm-plugins#configuring-plugin-locations) for third-party toolchains.\n\n### Options\n\n- `--minimal` - Generate minimal configurations and sane defaults.\n\n- `--yes` - Skip all prompts and enables tools based on file detection.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 53,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__toolchain__info.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/toolchain/info\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, toolchain, info\n- Summary: The `moon toolchain info  [plugin]` command will display detailed information about a toolchain,\n----\n\nSource: https://moonrepo.dev/docs/commands/toolchain/info\n\n# toolchain info\n\nv1.38.0\n\nThe `moon toolchain info  [plugin]` command will display detailed information about a toolchain,\nlike what files are scanned, what configuration settings are available, and what tier APIs are\nsupported. To do this, the command will download the WASM plugin, extract information, and call\nspecific functions.\n\nFor built-in toolchains, the [plugin locator][locator] argument is optional, and will be derived\nfrom the identifier.\n\n```\n$ moon toolchain info typescript\n```\n\nFor third-party toolchains, the [plugin locator][locator] argument is required, and must point to\nthe WASM plugin.\n\n```\n$ moon toolchain info custom https://example.com/path/to/plugin.wasm\n```\n\n### Arguments\n\n- `` - ID of the toolchain to view.\n\n- `[plugin]` - Optional [plugin locator][locator] for third-party toolchains.\n\n## Example output\n\n```\nToolchain   Provides sync operations that keep tsconfig.json's in a healthy state.  ID: typescript  Name: TypeScript  Version: 0.2.0Configuration   createMissingConfig: bool  When `syncProjectReferences` is enabled, will create a `tsconfig.json`  in referenced projects if it does not exist.  includeProjectReferenceSources: bool  Appends sources of project reference to `include` in `tsconfig.json`,  for each project.  includeSharedTypes: bool  Appends shared types to `include` in `tsconfig.json`, for each project.  projectConfigFileName: string  Name of the `tsconfig.json` file within each project.  root: string  The relative root to the TypeScript root. Primarily used for  resolving project references.  rootConfigFileName: string  Name of the `tsconfig.json` file at the workspace root.  rootOptionsConfigFileName: string  Name of the shared compiler options `tsconfig.json` file  at the workspace root.  routeOutDirToCache: bool  Updates and routes `outDir` in `tsconfig.json` to moon's cache,  for each project.  syncProjectReferences: bool  Syncs all project dependencies as `references` in `tsconfig.json`,  for each project.  syncProjectReferencesToPaths: bool  Syncs all project dependencies as `paths` in `tsconfig.json`,  for each project.Tier 1 - Usage detection   Config files: tsconfig.json, tsconfig.*.json, *.tsconfig.json, .tsbuildinfo, *.tsbuildinfo  Executable names: tsc, tsserver  APIs:     register_toolchain (required)     define_toolchain_config     initialize_toolchain     detect_version_files     parse_version_file     define_docker_metadata     scaffold_docker     prune_docker     sync_project     sync_workspaceTier 2 - Ecosystem integration   APIs:     extend_project_graph     extend_task_command     extend_task_script     locate_dependencies_root     install_dependencies     hash_task_contents     parse_lock     parse_manifest     setup_environmentTier 3 - Tool management   APIs:     register_tool (required)     load_versions     resolve_version     download_prebuilt (required)     unpack_archive     locate_executables (required)     setup_toolchain     teardown_toolchain\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 54,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__commands__upgrade.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/commands/upgrade\n- Keywords: moon, moonrepo, docs, monorepo, build, commands, upgrade\n- Summary: The `moon upgrade` command can be used to upgrade your current moon binary (if installed globally)\n----\n\nSource: https://moonrepo.dev/docs/commands/upgrade\n\n# upgrade\n\nThe `moon upgrade` command can be used to upgrade your current moon binary (if installed globally)\nto the latest version.\n\n```\n$ moon upgrade\n```\n\ncaution\n\nThis command will only work if moon was installed in the `~/.moon` directory, using our official\n[installation script](/docs/install). If installed through Node.js, you'll need to upgrade manually.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 33,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__comparison.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/comparison\n- Keywords: moon, moonrepo, docs, monorepo, build, comparison\n- Summary: The following comparisons are not an exhaustive list of features, and may be inaccurate or out of\n----\n\nSource: https://moonrepo.dev/docs/comparison\n\n# Feature comparison\n\nThe following comparisons are not an exhaustive list of features, and may be inaccurate or out of\ndate, but represent a good starting point for investigation. If something is not correct, please\n[create an issue](https://github.com/moonrepo/moon/issues) or\n[submit a patch](https://github.com/moonrepo/moon/blob/master/website/src/components/ComparisonTable.tsx).\n\nBefore diving into our comparisons below, we highly suggest reading\n[monorepo.tools](https://monorepo.tools/) for a deeper insight into monorepos and available tooling.\nIt's a great resource for learning about the current state of things and the ecosystem.\n\ninfo\n\nLooking to migrate from Nx or Turborepo to moon? Use our\n[`moon ext migrate-nx`](/docs/guides/extensions#migrate-nx) or\n[`moon ext migrate-turborepo`](/docs/guides/extensions#migrate-turborepo) commands for a (somewhat)\nseamless migration!\n\n## Unique features\n\nAlthough moon is still in its infancy, we provide an array of powerful features that other frontend\ncentric task runners do not, such as...\n\n- [Integrated toolchain](/docs/concepts/toolchain) - moon manages its own version of programming languages and dependency managers behind the scenes, so that every task is executed with the exact same version, across all machines.\n\n- [Task inheritance](/docs/concepts/task-inheritance) - Instead of defining the same tasks (lint, test, etc) over and over again for every project in the monorepo, moon supports a task inheritance model where it only needs to be defined once at the top-level. Projects can then merge with, exclude, or override if need be.\n\n- [Continuous integration](/docs/guides/ci) - By default, all moon tasks will run in CI, as we want to encourage every facet of a project or repository to be continually tested and verified. This can be turned off on a per-task basis.\n\nCurious to learn more? Check out the \"[Why use moon?](/docs/)\" or \"[Features](/docs/)\" sections for more\ninformation, or these wonderful articles provided by the community:\n\n- [A review of moon + Packemon](https://azu.github.io/slide/2022/moa/moon-packemon.html) by [azu](https://twitter.com/azu_re)\n\n- [Improve repo management with moon](https://blog.logrocket.com/improve-repo-management-moon/) by [James Sinkala](https://jamesinkala.com/)\n\n## Comparison\n\n### Turborepo\n\nAt a high-level, Turborepo and moon seem very similar as they both claim to be task runners. They\nboth support incremental builds, content/smart hashing, local and remote caching1,\nparallel execution, and everything else you'd expect from a task runner. But that's where the\nsimilarities stop, because in the end, Turborepo is nothing more than a `package.json` scripts\norchestrator with a caching layer. While moon also supports this, it\n[aims to be far more](#unique-features) with a heavy focus on the developer experience.\n\nIn the next section, we'll be talking about a few key areas that we deem important to consumers. If\nyou'd prefer a more granular comparison, jump down to the [comparison tables](#comparison-tables).\n\n#### Configuration\n\nTurborepo only supports the Node.js ecosystem, so implicitly uses a conventions based approach. It provides very little to no configuration for customizing Turborepo to your needs.\n\nmoon is language agnostic, with initial support for Node.js and its ecosystem. Because of this, moon provides a ton of configuration for customizing moon to your needs. It prefers a configuration over conventions approach, as every repository is different.\n\n#### Projects\n\nTurborepo infers projects from `package.json` workspaces, and does not support non-JavaScript based projects.\n\nmoon requires projects to be defined in `.moon/workspace.yml`, and supports any programming language2.\n\n#### Tasks\n\nTurborepo requires `package.json` scripts to be defined for every project. This results in the same scripts being repeated constantly.\n\nmoon avoids this overhead by using [task inheritance](#unique-features). No more repetition.\n\n#### CI\n\nEach pipeline in `turbo.json` must be individually ran as a step in CI. Scripts not configured as pipeline tasks are never ran.\n\nmoon runs every task automatically using `moon ci`, which also supports parallelism/sharding.\n\n#### Long-term\n\nTurborepo is in the process of being rewritten in Rust, with its codebase being shared and coupled with the new Turbopack library, a Rust based bundler. Outside of this, there are no publicly available plans for Turborepo's future.\n\nmoon plans to be so much more than a task runner, with one such facet being a repository management tool. This includes code ownership, dependency management and auditing, repository linting, in-repo secrets, and anything else we deem viable. We also plan to support additional languages as first-class citizens within our toolchain.\n\n- Turborepo remote caching is powered by Vercel. moon provides its own paid service.\n\n- moon projects may run commands for any language, but not all languages are supported in the toolchain.\n\n### Lerna\n\nLerna was a fantastic tool that helped the JavaScript ecosystem grow and excelled at package\nversioning and publishing (and still does), but it offered a very rudimentary task runner. While\nLerna was able to run scripts in parallel, it wasn't the most efficient, as it did not support\ncaching, hashing, or performant scheduling.\n\nHowever, the reason Lerna is not compared in-depth, is that Lerna was unowned and unmaintained for\nquite some time, and has recently fallen under the Nx umbrella. Lerna is basically Nx lite now.\n\n## Comparison tables\n\n Supported  Partially supported  Similarly supported  Not supported\n\n### Workspace\n\nmoon (11) nx (11) turborepo (8)\n\nCore/CLI written in Rust Node.js & Rust (for hot paths) Rust / Go\n\nPlugins written in WASM (any compatible language) TypeScript \n\nWorkspace configured with `.moon/workspace.yml` `nx.json` `turbo.json`\n\nProject list configured in `.moon/workspace.yml` `workspace.json` / `package.json` workspaces `package.json` workspaces\n\nRepo / folder structure loose loose loose\n\nIgnore file support  via `hasher.ignorePatterns`  .nxignore  via `--ignore`\n\nSupports dependencies inherited by all tasks  via `implicitDeps`  via `targetDefaults` \n\nSupports inputs inherited by all tasks  via `implicitInputs`  via `implicitDependencies`  via `globalDependencies`\n\nSupports tasks inherited by all projects   via `plugins` \n\nIntegrates with a version control system  git  git  git\n\nSupports scaffolding / generators   \n\n### Toolchain\n\nmoon (6) nx (2) turborepo (2)\n\nSupported languages in task runner All languages available on `PATH` All languages via plugins. OOTB TS/JS, existing plugins for Rust, Go, Dotnet and more JavaScriptTypeScript via `package.json` scripts\n\nSupported dependency managers npm, pnpm, yarn, bun npm, pnpm, yarn npm, pnpm, yarn\n\nSupported toolchain languages (automatic dev envs) Bun, Deno, Node.js, Rust  \n\nHas a built-in toolchain   \n\nDownloads and installs languages (when applicable)   \n\nConfigures explicit language/dependency manager versions   \n\n### Projects\n\nmoon (8) nx (5) turborepo (2)\n\nDependencies on other projects  implicit from `package.json` or explicit in `moon.yml`  implicit from `package.json` or explicit in `project.json` and code imports/exports  implicit from `package.json`\n\nOwnership metadata   \n\nPrimary programming language   \n\nProject type (app, lib, etc)  app, lib, tool, automation, config, scaffold  app, lib \n\nProject tech stack  frontend, backend, infra, systems  \n\nProject-level file groups   via `namedInputs` \n\nProject-level tasks   \n\nTags and scopes (boundaries)  native for all languages  boundaries via ESLint (TS and JS), tags for filtering for all languages \n\n### Tasks\n\nmoon (24) nx (24) turborepo (17)\n\nKnown as tasks targets tasks\n\nDefines tasks in `moon.yml` or `package.json` scripts `nx.json`, `project.json` or `package.json` scripts `package.json` scripts\n\nRun a single task with `moon run project:task` `nx target project` or `nx run project:target` `turbo run task --filter=project`\n\nRun multiple tasks with `moon run :task` or `moon run a:task b:task` or `moon check` `nx run-many -t task1 task2 task3` `turbo run task` or `turbo run a b c`\n\nRun tasks based on a query/filter `moon run :task --query \"...\"` `nx run-many -t task -p \"tag:..\" -p \"dir/*\" -p \"name*\" -p \"!negation\"` \n\nCan define tasks globally  with `.moon/tasks/all.yml`  with `targetDefaults` \n\nMerges or overrides global tasks   \n\nRuns a command with args    within the script\n\nRuns commands from project or workspace root current working directory, or wherever desired via config project root\n\nSupports pipes, redirects, etc, in configured tasks  encapsulated in a file  within the executor or script  within the script\n\nDependencies on other tasks  via `deps`  via `dependsOn`  via `dependsOn`\n\nCan provide extra params for task dependencies   \n\nCan mark a task dependency as optional  via `optional`  \n\nCan depend on arbitrary or unrelated tasks    dependent projects only\n\nRuns task dependencies in parallel   \n\nCan run task dependencies in serial   via `parallel=1`  via `concurrency=1`\n\nFile groups   via `namedInputs` \n\nEnvironment variables  via `env`, `envFile`  automatically via `.env` files and/or inherited from shell  within the script\n\nInputs  files, globs, env vars  files, globs, env vars, runtime  files, globs\n\nOutputs  files, globs  files, globs  files, globs\n\nOutput logging style  via `outputStyle`  via `--output-style`  via `outputMode`\n\nCustom hash inputs   via `runtime` inputs  via `globalDependencies`\n\nToken substitution  token functions and variable syntax  `{workspaceRoot}`, `{projectRoot}`, `{projectName}`, arbitrary patterns `namedInputs` \n\nConfiguration presets  via task `extends`  via `configurations` \n\nConfigurable options   \n\n### Task runner\n\nmoon (9) nx (11) turborepo (7)\n\nKnown as action pipeline task runner pipeline\n\nGenerates a dependency graph   \n\nRuns in topological order   \n\nAutomatically retries failed tasks   when flakiness detected on Nx Cloud \n\nCaches task outputs via a unique hash   \n\nCan customize the underlying runner   \n\nCan profile running tasks  cpu, heap  cpu  cpu\n\nCan generate run reports   free in Nx Cloud & GitHub App Comment \n\nContinuous integration (CI) support   \n\nContinuous deployment (CD) support   via `nx release` \n\nRemote / cloud caching and syncing  with Bazel REAPI (free / paid)  with nx.app Nx Cloud (free / paid)  requires a Vercel account (free)\n\n### Generator\n\nmoon (14) nx (14) turborepo (11)\n\nKnown as generator generator generator\n\nTemplates are configured with a schema  via `template.yml`  \n\nTemplate file extensions (optional)  .tera, .twig  fully under user control, built in utility for .ejs templates  .hbs\n\nTemplate files support frontmatter   fully under user control \n\nCreates/copies files to destination   \n\nUpdates/merges with existing files  JSON/YAML only  via TypeScript/JavaScript plugins \n\nRenders with a template engine  via Tera  fully under user control, built in utility for .ejs templates  via Handlebars\n\nVariable interpolation in file content   \n\nVariable interpolation in file paths   \n\nCan define variable values via interactive prompts   using JSON schema \n\nCan define variable values via command line args   using JSON schema \n\nSupports dry runs   \n\nSupports render helpers, filters, and built-ins   \n\nGenerators can compose other generators  via `extends`  fully under user control, author in TypeScript/JavaScript  using JavaScript\n\n### Other systems\n\nmoon (6) nx (0) turborepo (1)\n\nCan send webhooks for critical pipeline events   \n\nGenerates run reports with granular stats/metrics   \n\nCan define and manage code owners   \n\nCan generate a `CODEOWNERS` file   \n\nCan define and manage VCS (git) hooks   \n\nSupports git worktrees   \n\n### JavaScript ecosystem\n\nmoon (10) nx (1) turborepo (0)\n\nWill automatically install node modules when lockfile changes   \n\nCan automatically dedupe when lockfile changes   \n\nCan alias `package.json` names for projects   \n\nCan add `engines` constraint to root `package.json`   \n\nCan sync version manager configs (`.nvmrc`, etc)   \n\nCan sync cross-project dependencies to `package.json`   \n\nCan sync project references to applicable `tsconfig.json`   \n\nCan auto-create missing `tsconfig.json`   \n\nCan sync dependencies as `paths` to `tsconfig.json`   \n\nCan route `outDir` to a shared cached in `tsconfig.json`   \n\n### Docker integration\n\nmoon (3) nx (2) turborepo (2)\n\nEfficient scaffolding for Dockerfile layer caching   via custom generator \n\nAutomatic production-only dependency installation   generated automatically by first party plugin \n\nEnvironment pruning to reduce image/container sizes   \n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 341,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts\n- Summary: Documentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n----\n\nSource: https://moonrepo.dev/docs/concepts\n\n- [Home](/)\n- [Concepts](/docs/concepts)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Concepts\n\n[ Cachemoon's able to achieve high performance and blazing speeds by implementing a cache that's powered by](/docs/concepts/cache)\n\n[ File groupsFile groups are a mechanism for grouping similar types of files and environment variables within a](/docs/concepts/file-group)\n\n[ File patternsGlobs](/docs/concepts/file-pattern)\n\n[ Query languagemoon supports an integrated query language, known as MQL, that can be used to filter and select](/docs/concepts/query-lang)\n\n[ ProjectsA project is a library, application, package, binary, tool, etc, that contains source files, test](/docs/concepts/project)\n\n[ TargetsA target is a compound identifier that pairs a scope to a task,](/docs/concepts/target)\n\n[ TasksTasks are commands that are ran in the context of a project. Underneath the hood, a](/docs/concepts/task)\n\n[ Task inheritanceUnlike other task runners that require the same tasks to be repeatedly defined for every project,](/docs/concepts/task-inheritance)\n\n[ TokensTokens are variables and functions that can be used by command,](/docs/concepts/token)\n\n[ ToolchainThe toolchain is an internal layer for downloading, installing, and managing tools (languages,](/docs/concepts/toolchain)\n\n[ WorkspaceA workspace is a directory that contains projects, manages a toolchain,](/docs/concepts/workspace)\n\n[Migrate to moon](/docs/migrate-to-moon)\n\n[Cache](/docs/concepts/cache)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 54,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__cache.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/cache\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, cache\n- Summary: moon's able to achieve high performance and blazing speeds by implementing a cache that's powered by\n----\n\nSource: https://moonrepo.dev/docs/concepts/cache\n\n# Cache\n\nmoon's able to achieve high performance and blazing speeds by implementing a cache that's powered by\nour own unique smart hashing layer. All cache is stored in `.moon/cache`, relative from the\nworkspace root (be sure to git ignore this folder).\n\n## Hashing\n\nIncremental builds are possible through a concept known as hashing, where in multiple sources are\naggregated to generate a unique hash. In the context of moon, each time a target is ran we generate\na hash, and if this hash already exists we abort early (cache hit), otherwise we continue the run\n(cache miss).\n\nThe tiniest change may trigger a different hash, for example, changing a line of code (when an\ninput), or updating a package version, so don't worry if you see a lot of hashes.\n\nOur smart hashing currently takes the following sources into account:\n\n- Command (`command`) being ran and its arguments (`args`).\n\n- Input sources (`inputs`).\n\n- Output targets (`outputs`).\n\n- Environment variables (`env`).\n\n- Dependencies between projects (`dependsOn`) and tasks (`deps`).\n\n- For Deno tasks: Deno version.\n\n- `deno.json`/`deps.ts` imports, import maps, and scopes.\n\n- `tsconfig.json` compiler options (when applicable).\n\n- For Bun and Node.js tasks: Bun/Node.js version.\n\n- `package.json` dependencies (including development and peer).\n\n- `tsconfig.json` compiler options (when applicable).\n\ncaution\n\nBe aware that greedy inputs (`**/*`, the default) will include everything in the target directory\nas a source. We do our best to filter out VCS ignored files, and `outputs` for the current task, but\nfiles may slip through that you don't expect. We suggest using explicit `inputs` and routinely\nauditing the hash files for accuracy!\n\n## Archiving & hydration\n\nOn top of our hashing layer, we have another concept known as archiving, where in we create a\ntarball archive of a task's outputs and store it in `.moon/cache/outputs`. These are akin to build\nartifacts.\n\nWhen we encounter a cache hit on a hash, we trigger a mechanism known as hydration, where we\nefficiently unpack an existing tarball archive into a task's outputs. This can be understood as a\ntimeline, where every point in time will have its own hash + archive that moon can play back.\n\nFurthermore, if we receive a cache hit on the hash, and the hash is the same as the last run, and\noutputs exist, we exit early without hydrating and assume the project is already hydrated. In the\nterminal, you'll see a message for \"cached\".\n\n## File structure\n\nThe following diagram outlines our cache folder structure and why each piece exists.\n\n```\n.moon/cache/\t# Stores hash manifests of every ran task. Exists purely for debugging purposes.\thashes/\t\t# Contents includes all sources used to generate the hash.\t\t.json\t# Stores `tar.gz` archives of a task's outputs based on its generated hash.\toutputs/\t\t.tar.gz\t# State information about anything and everything within moon. Toolchain,\t# dependencies, projects, running targets, etc.\tstates/\t\t# Files at the root pertain to the entire workspace.\t\t.json\t\t# Files for a project are nested within a folder by the project name.\n/\t\t\t# Informational snapshot of the project, its tasks, and its configs.\t\t\t# Can be used at runtime by tasks that require this information.\t\t\tsnapshot.json\t\t\t/\t\t\t\t# Contents of the child process, including the exit code and\t\t\t\t# unique hash that is referenced above.\t\t\t\tlastRun.json\t\t\t\t# Outputs of last run target.\t\t\t\tstderr.log\t\t\t\tstdout.log\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 89,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__file-group.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/file-group\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, file group\n- Summary: File groups are a mechanism for grouping similar types of files and environment variables within a\n----\n\nSource: https://moonrepo.dev/docs/concepts/file-group\n\n# File groups\n\nFile groups are a mechanism for grouping similar types of files and environment variables within a\nproject using [file glob patterns or literal file paths](/docs/concepts/file-pattern). These groups are then used\nby [tasks](/docs/concepts/task) to calculate functionality like cache computation, affected files since last\nchange, deterministic builds, and more.\n\n## Configuration\n\nFile groups can be configured per project through [`moon.yml`](/docs/config/project), or for many\nprojects through [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n### Token functions\n\nFile groups can be referenced in [tasks](/docs/concepts/task) using [token functions](/docs/concepts/token). For example, the\n`@group(name)` token will expand to all paths configured in the `sources` file group.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'vite build'    inputs:      - '@group(sources)'\n```\n\n## Inheritance and merging\n\nWhen a file group of the same name exists in both [configuration files](#configuration), the\nproject-level group will override the workspace-level group, and all other workspace-level groups\nwill be inherited as-is.\n\nA primary scenario in which to define file groups at the project-level is when you want to\noverride file groups defined at the workspace-level. For example, say we want to override the\n`sources` file group because our source folder is named \"lib\" and not \"src\", we would define our\nfile groups as followed.\n\n.moon/tasks/all.yml\n\n```\nfileGroups:  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*.test.*'    - '**/__tests__/**/*'\n```\n\nmoon.yml\n\n```\nfileGroups:  # Overrides global  sources:    - 'lib/**/*'    - 'types/**/*'  # Inherited as-is  tests:    - 'tests/**/*.test.*'    - '**/__tests__/**/*'\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 65,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__file-pattern.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/file-pattern\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, file pattern\n- Summary: Globs in moon are [Rust-based globs](https://github.com/olson-sean-k/wax), not JavaScript-based.\n----\n\nSource: https://moonrepo.dev/docs/concepts/file-pattern\n\n# File patterns\n\n## Globs\n\nGlobs in moon are [Rust-based globs](https://github.com/olson-sean-k/wax), not JavaScript-based.\nThis may result in different or unexpected results. The following guidelines must be met when using\nglobs:\n\n- Must use forward slashes (`/`) for path separators, even on Windows.\n\n- Must not start with or use any relative path parts, `.` or `..`.\n\n### Supported syntax\n\n- `*` - Matches zero or more characters, but does not match the `/` character. Will attempt to match the longest possible text (eager).\n\n- `$` - Like `*`, but will attempt to match the shortest possible text (lazy).\n\n- `**` - Matches zero or more directories.\n\n- `?` - Matches exactly one character, but not `/`.\n\n- `[abc]` - Matches one case-sensitive character listed in the brackets.\n\n- `[!xyz]` - Like the above, but will match any character not listed.\n\n- `[a-z]` - Matches one case-sensitive character in range in the brackets.\n\n- `[!x-z]` - Like the above, but will match any character not in range.\n\n- `{glob,glob}` - Matches one or more comma separated list of sub-glob patterns.\n\n- `` - Matches a sub-glob within a defined bounds.\n\n- `!` - At the start of a pattern, will negate previous positive patterns.\n\n### Examples\n\n```\nREADME.{md,mdx,txt}src/**/*tests/**/*.?js!**/__tests__/**/*logs/--.log\n```\n\n## Project relative\n\nWhen configuring [`fileGroups`](/docs/config/project#filegroups), [`inputs`](/docs/config/project#inputs),\nand [`outputs`](/docs/config/project#outputs), all listed file paths and globs are relative from the\nproject root they will be ran in. They must not traverse upwards with `..`.\n\n```\n# Validsrc/**/*./src/**/*package.json# Invalid../utils\n```\n\n## Workspace relative\n\nWhen configuring [`fileGroups`](/docs/config/project#filegroups), [`inputs`](/docs/config/project#inputs),\nand [`outputs`](/docs/config/project#outputs), a listed file path or glob can be prefixed with `/` to\nresolve relative from the workspace root, and not the project root.\n\n```\n# In projectpackage.json# In workspace/package.json\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 81,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__project.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/project\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, project\n- Summary: A project is a library, application, package, binary, tool, etc, that contains source files, test\n----\n\nSource: https://moonrepo.dev/docs/concepts/project\n\n# Projects\n\nA project is a library, application, package, binary, tool, etc, that contains source files, test\nfiles, assets, resources, and more. A project must exist and be configured within a\n[workspace](/docs/concepts/workspace).\n\n## IDs\n\nA project identifier (or name) is a unique resource for locating a project. The ID is explicitly\nconfigured within [`.moon/workspace.yml`](/docs/config/workspace), as a key within the\n[`projects`](/docs/config/workspace#projects) setting, and can be written in camel/kebab/snake case.\nIDs support alphabetic unicode characters, `0-9`, `_`, `-`, `/`, `.`, and must start with a\ncharacter.\n\nIDs are used heavily by configuration and the command line to link and reference everything. They're\nalso a much easier concept for remembering projects than file system paths, and they typically can\nbe written with less key strokes.\n\nLastly, a project ID can be paired with a task ID to create a [target](/docs/concepts/target).\n\n## Aliases\n\nAliases are a secondary approach for naming projects, and can be used as a drop-in replacement for\nstandard names. What this means is that an alias can also be used when configuring dependencies, or\ndefining [targets](/docs/concepts/target).\n\nHowever, the difference between aliases and names is that aliases can not be explicit configured\nin moon. Instead, they are specific to a project's primary programming language, and are inferred\nbased on that context (when enabled in settings). For example, a JavaScript or TypeScript project\nwill use the `name` field from its `package.json` as the alias.\n\nBecause of this, a project can either be referenced by its name or alias, or both. Choose the\npattern that makes the most sense for your company or team!\n\n## Dependencies\n\nProjects can depend on other projects within the [workspace](/docs/concepts/workspace) to build a\n[project graph](/docs/how-it-works/action-graph), and in turn, an action graph for executing\n[tasks](/docs/concepts/task). Project dependencies are divided into 2 categories:\n\n- Explicit dependencies - These are dependencies that are explicitly defined in a project's [`moon.yml`](/docs/config/project) config file, using the [`dependsOn`](/docs/config/project#dependson) setting.\n\n- Implicit dependencies - These are dependencies that are implicitly discovered by moon when scanning the repository. How an implicit dependency is discovered is based on the project's [`language`](/docs/config/project#language) setting, and how that language's ecosystem functions.\n\n## Configuration\n\nProjects can be configured with an optional [`moon.yml`](/docs/config/project) in the project root, or\nthrough the optional workspace-level [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 68,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__query-lang.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/query-lang\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, query lang\n- Summary: moon supports an integrated query language, known as MQL, that can be used to filter and select\n----\n\nSource: https://moonrepo.dev/docs/concepts/query-lang\n\n# Query language\n\nv1.3.0\n\nmoon supports an integrated query language, known as MQL, that can be used to filter and select\nprojects from the project graph, using an SQL-like syntax. MQL is primarily used by\n[`moon run`](/docs/commands/run) with the `--query` option.\n\n## Syntax\n\n### Comparisons\n\nA comparison (also known as an assignment) is an expression that defines a piece of criteria, and is\na building block of a query. This criteria maps a [field](#fields) to a value, with an explicit\ncomparison operator.\n\n#### Equals, Not equals\n\nThe equals (`=`) and not equals (`!=`) comparison operators can be used for exact value matching.\n\n```\nprojectLayer=library && language!=javascript\n```\n\nYou can also define a list of values using square bracket syntax, that will match against one of the\nvalues.\n\n```\nlanguage=[javascript, typescript]\n```\n\n#### Like, Not like\n\nThe like (`~`) and not like (`!~`) comparison operators can be used for wildcard value matching,\nusing [glob syntax](/docs/concepts/file-pattern#globs).\n\n```\nprojectSource~packages/* && tag!~*-app\n```\n\nLike comparisons can only be used on non-enum fields.\n\n### Conditions\n\nThe `&&` and `||` logical operators can be used to combine multiple comparisons into a condition.\nThe `&&` operator is used to combine comparisons into a logical AND, and the `||` operator is used\nfor logical OR.\n\n```\ntaskToolchain=system || taskToolchain=node\n```\n\nFor readability concerns, you can also use `AND` or `OR`.\n\n```\ntaskToolchain=system OR taskToolchain=node\n```\n\nMixing both operators in the same condition is not supported.\n\n### Grouping\n\nFor advanced queries and complex conditions, you can group comparisons using parentheses to create\nlogical groupings. Groups can also be nested within other groups.\n\n```\nlanguage=javascript && (taskType=test || taskType=build)\n```\n\n## Fields\n\nThe following fields can be used as criteria, and are related to [task tokens](/docs/concepts/token#variables).\n\n### `language`\n\nProgramming language the project is written in, as defined in\n[`moon.yml`](/docs/config/project#language).\n\n```\nlanguage=rust\n```\n\n### `project`\n\nName OR alias of the project.\n\n```\nproject=server\n```\n\n### `projectAlias`\n\nAlias of the project. For example, the `package.json` name.\n\n```\nprojectAlias~@scope/*\n```\n\n### `projectLayer`v1.39.0\n\nThe project layer, as defined in [`moon.yml`](/docs/config/project#layer).\n\n```\nprojectLayer=application\n```\n\n### `projectId`\n\nName of the project, as defined in [`.moon/workspace.yml`](/docs/config/workspace), or `id` in\n[`moon.yml`](/docs/config/project#id).\n\n```\nprojectId=server\n```\n\n### `projectSource`\n\nRelative file path from the workspace root to the project root, as defined in\n[`.moon/workspace.yml`](/docs/config/workspace).\n\n```\nprojectSource~packages/*\n```\n\n### `projectStack`v1.22.0\n\nThe project stack, as defined in [`moon.yml`](/docs/config/project#stack).\n\n```\nprojectStack=frontend\n```\n\n### `tag`\n\nA tag within the project, as defined in [`moon.yml`](/docs/config/project#tags).\n\n```\ntag~react-*\n```\n\n### `task`\n\nID/name of a task within the project.\n\n```\ntask=[build,test]\n```\n\n### `taskToolchain`v1.31.0\n\nThe toolchain a task will run against, as defined in [`moon.yml`](/docs/config/project).\n\n```\ntaskToolchain=node\n```\n\n### `taskType`\n\nThe [type of task](/docs/concepts/task#types), based on its configured settings.\n\n```\ntaskType=build\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 183,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__target.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/target\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, target\n- Summary: A target is a compound identifier that pairs a [scope](#common-scopes) to a [task](/docs/concepts/task),\n----\n\nSource: https://moonrepo.dev/docs/concepts/target\n\n# Targets\n\nA target is a compound identifier that pairs a [scope](#common-scopes) to a [task](/docs/concepts/task),\nseparated by a `:`, in the format of `scope:task`.\n\nTargets are used by terminal commands...\n\n```\n$ moon run designSystem:build\n```\n\nAnd configurations for declaring cross-project or cross-task dependencies.\n\n```\ntasks:  build:    command: 'webpack'    deps:      - 'designSystem:build'\n```\n\n## Common scopes\n\nThese scopes are available for both running targets and configuring them.\n\n### By project\n\nThe most common scope is the project scope, which requires the name of a project, as defined in\n[`.moon/workspace.yml`](/docs/config/workspace). When paired with a task name, it will run a specific\ntask from that project.\n\n```\n# Run `lint` in project `app`$ moon run app:lint\n```\n\n### By tagv1.4.0\n\nAnother way to target projects is with the tag scope, which requires the name of a tag prefixed with\n`#`, and will run a specific task in all projects with that tag.\n\n```\n# Run `lint` in projects with the tag `frontend`$ moon run '#frontend:lint'\n```\n\ncaution\n\nBecause `#` is a special character in the terminal (is considered a comment), you'll need to wrap\nthe target in quotes, or escape it like so `\\#`.\n\n## Run scopes\n\nThese scopes are only available on the command line when running tasks with `moon run` or `moon ci`.\n\n### All projects\n\nFor situations where you want to run a specific target in all projects, for example `lint`ing, you\ncan utilize the all projects scope by omitting the project name from the target: `:lint`.\n\n```\n# Run `lint` in all projects$ moon run :lint\n```\n\n### Closest project `~`v1.33.0\n\nIf you are within a project folder, or an arbitrarily nested folder, and want to run a task in the\nclosest project (traversing upwards), the `~` scope can be used.\n\n```\n# Run `lint` in the closest project$ moon run ~:lint\n```\n\n## Config scopes\n\nThese scopes are only available when configuring a task.\n\n### Dependencies `^`\n\nWhen you want to include a reference for each project [that's depended on](/docs/concepts/project#dependencies),\nyou can utilize the `^` scope. This will be expanded to all depended on projects. If you do not\nwant all projects, then you'll need to explicitly define them.\n\nmoon.yml\n\n```\ndependsOn:  - 'apiClients'  - 'designSystem'# Configured astasks:  build:    command: 'webpack'    deps:      - '^:build'# Resolves totasks:  build:    command: 'webpack'    deps:      - 'apiClients:build'      - 'designSystem:build'\n```\n\n### Self `~`\n\nWhen referring to another task within the current project, you can utilize the `~` scope, or omit\nthe `~:` prefix altogether, which will be expanded to the current project's name. This is useful for\nsituations where the name is unknown, for example, when configuring\n[`.moon/tasks/all.yml`](/docs/config/tasks), or if you just want a shortcut!\n\n.moon/tasks/all.yml\n\n```\n# Configured astasks:  lint:    command: 'eslint'    deps:      - '~:typecheck'      # OR      - 'typecheck'  typecheck:    command: 'tsc'# Resolves to (assuming project is \"foo\")tasks:  lint:    command: 'eslint'    deps:      - 'foo:typecheck'  typecheck:    command: 'tsc'\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 115,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__task-inheritance.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/task-inheritance\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, task inheritance\n- Summary: Unlike other task runners that require the same tasks to be repeatedly defined for every project,\n----\n\nSource: https://moonrepo.dev/docs/concepts/task-inheritance\n\n# Task inheritance\n\nUnlike other task runners that require the same tasks to be repeatedly defined for every project,\nmoon uses an inheritance model where tasks can be defined once at the workspace-level, and are then\ninherited by many or all projects.\n\nWorkspace-level tasks (also known as global tasks) are defined in [`.moon/tasks/**/*.yml`](/docs/config/tasks),\nand are inherited by based on conditions. However, projects are able to include, exclude, or rename\ninherited tasks using the [`workspace.inheritedTasks`](/docs/config/project#inheritedtasks) in\n[`moon.yml`](/docs/config/project).\n\n## Conditional inheritance\n\nTask inheritance is powered by the [`inheritedBy`](/docs/config/tasks#inheritedby) setting in global\ntask configurations (those in [`.moon/tasks/**/*`](/docs/config/tasks)). This setting defines conditions that a\nproject must meet in order for inheritance to occur. If the setting is not defined, or no conditions\nare defined, the configuration is inherited by all projects.\n\nThe following conditions are supported:\n\n- `file`, `files` - Inherit for projects that contain specific files.\n\n- `language`, `languages` - Inherit for projects that belong to specific [`language`](/docs/config/project#language)s.\n\n- `layer`, `layers` - Inherit for projects that belong to specific [`layer`](/docs/config/project#layer)s.\n\n- `stack`, `stacks` - Inherit for projects that belong to specific [`stack`](/docs/config/project#stack)s.\n\n- `tag`, `tags` - Inherit for projects that have specific [`tags`](/docs/config/project#tags).\n\n- `toolchain`, `toolchains` - Inherit for projects that belong to specific [`toolchains`](/docs/config/project#toolchains).\n\nOne or many conditions can be defined, and all conditions must be met for inheritance to occur. For\nexample, the following configuration will only be inherited by Node.js frontend libraries.\n\n.moon/tasks/node-frontend-library.yml\n\n```\ninheritedBy:  toolchain: 'node'  stack: 'frontend'  layer: 'library'\n```\n\nEach condition supports a single value or an array of values. For example, the previous example\ncould be rewritten to inherit for both Node.js or Deno frontend libraries.\n\n.moon/tasks/js-frontend-library.yml\n\n```\ninheritedBy:  toolchains: ['node', 'deno']  stack: 'frontend'  layer: 'library'\n```\n\n### Clauses\n\nThe `tags` and `toolchains` conditions support special clauses `and`, `or` (the default), and `not`\nfor matching more complex scenarios.\n\n```\ninheritedBy:  toolchains:    or: ['javascript', 'typescript']    not: ['ruby']  layer: 'library'\n```\n\n## Merge strategies\n\nWhen a [global task](/docs/config/tasks#tasks) and [local task](/docs/config/project#tasks) of the same\nname exist, they are merged into a single task. To accomplish this, one of many\n[merge strategies](/docs/config/project#options) can be used.\n\nMerging is applied to the parameters [`args`](/docs/config/project#args),\n[`deps`](/docs/config/project#deps), [`env`](/docs/config/project#env-1),\n[`inputs`](/docs/config/project#inputs), [`outputs`](/docs/config/project#outputs), and\n[`toolchains`](/docs/config/project#toolchains), using the [`merge`](/docs/config/project#merge),\n[`mergeArgs`](/docs/config/project#mergeargs), [`mergeDeps`](/docs/config/project#mergedeps),\n[`mergeEnv`](/docs/config/project#mergeenv), [`mergeInputs`](/docs/config/project#mergeinputs),\n[`mergeOutputs`](/docs/config/project#mergeoutputs) and\n[`mergeToolchains`](/docs/config/project#mergetoolchains) options respectively. Each of these options\nsupport one of the following strategy values.\n\n- `append` (default) - Values found in the local task are merged after the values found in the global task. For example, this strategy is useful for toggling flag arguments.\n\n- `prepend` - Values found in the local task are merged before the values found in the global task. For example, this strategy is useful for applying option arguments that must come before positional arguments.\n\n- `preserve` - Preserve the original global task values. This should rarely be used, but exists for situations where an inheritance chain is super long and complex, but we simply want to the base values. v1.29.0\n\n- `replace` - Values found in the local task entirely replaces the values in the global task. This strategy is useful when you need full control.\n\nAll 3 of these strategies are demonstrated below, with a somewhat contrived example, but you get the\npoint.\n\n```\n# Globaltasks:  build:    command:      - 'webpack'      - '--mode'      - 'production'      - '--color'    deps:      - 'designSystem:build'    inputs:      - '/webpack.config.js'    outputs:      - 'build/'# Localtasks:  build:    args: '--no-color --no-stats'    deps:      - 'reactHooks:build'    inputs:      - 'webpack.config.js'    options:      mergeArgs: 'append'      mergeDeps: 'prepend'      mergeInputs: 'replace'# Merged resulttasks:  build:    command:      - 'webpack'      - '--mode'      - 'production'      - '--color'      - '--no-color'      - '--no-stats'    deps:      - 'reactHooks:build'      - 'designSystem:build'    inputs:      - 'webpack.config.js'    outputs:      - 'build/'    options:      mergeArgs: 'append'      mergeDeps: 'prepend'      mergeInputs: 'replace'\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 109,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__task.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/task\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, task\n- Summary: Tasks are commands that are ran in the context of a [project](/docs/concepts/project). Underneath the hood, a\n----\n\nSource: https://moonrepo.dev/docs/concepts/task\n\n# Tasks\n\nTasks are commands that are ran in the context of a [project](/docs/concepts/project). Underneath the hood, a\ntask is simply a binary or system command that is ran as a child process.\n\n## IDs\n\nA task identifier (or name) is a unique resource for locating a task within a project. The ID is\nexplicitly configured as a key within the [`tasks`](/docs/config/project#tasks) setting, and can be\nwritten in camel/kebab/snake case. IDs support alphabetic unicode characters, `0-9`, `_`, `-`, `/`,\n`.`, and must start with a character.\n\nA task ID can be paired with a scope to create a [target](/docs/concepts/target).\n\n## Types\n\nTasks are grouped into 1 of the following types based on their configured parameters.\n\n- Build - Task generates one or many artifacts, and is derived from the [`outputs`](/docs/config/project#outputs) setting.\n\n- Run - Task runs a one-off, long-running, or never-ending process, and is derived from the [`local`](/docs/config/project#local) setting.\n\n- Test - Task asserts code is correct and behaves as expected. This includes linting, typechecking, unit tests, and any other form of testing. Is the default.\n\n## Modes\n\nAlongside types, tasks can also grouped into a special mode that provides unique handling within the\naction graph and pipelines.\n\n### Local only\n\nTasks either run locally, in CI (continuous integration pipelines), or both. For tasks that should\nonly be ran locally, for example, development servers and watchers, we provide a mechanism for\nmarking a task as local only. When enabled, caching is turned off, the task will not run in CI,\nterminal output is not captured, and the task is marked as [persistent](#persistent).\n\nTo mark a task as local only, enable the [`local`](/docs/config/project#local) setting.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev-server'    preset: 'server'\n```\n\n### Internal onlyv1.23.0\n\nInternal tasks are tasks that are not meant to be ran explicitly by the user (via\n[`moon check`](/docs/commands/check) or [`moon run`](/docs/commands/run)), but are used internally as\ndependencies of other tasks. Additionally, internal tasks are not displayed in a project's tasks\nlist, but can be inspected with [`moon task`](/docs/commands/task).\n\nTo mark a task as internal, enable the [`options.internal`](/docs/config/project#internal) setting.\n\nmoon.yml\n\n```\ntasks:  prepare:    command: 'intermediate-step'    options:      internal: true\n```\n\n### Interactivev1.12.0\n\nTasks that need to interact with the user via terminal prompts are known as interactive tasks.\nBecause interactive tasks require stdin, and it's not possible to have multiple parallel running\ntasks interact with stdin, we isolate interactive tasks from other tasks in the action graph. This\nensures that only 1 interactive task is ran at a time.\n\nTo mark a task as interactive, enable the [`options.interactive`](/docs/config/project#interactive)\nsetting.\n\nmoon.yml\n\n```\ntasks:  init:    command: 'init-app'    options:      interactive: true\n```\n\n### Persistentv1.6.0\n\nTasks that never complete, like servers and watchers, are known as persistent tasks. Persistent\ntasks are typically problematic when it comes to dependency graphs, because if they run in the\nmiddle of the graph, subsequent tasks will never run because the persistent task never completes!\n\nHowever in moon, this is a non-issue, as we collect all persistent tasks within the action graph and\nrun them last as a batch. This is perfect for a few reasons:\n\n- All persistent tasks are ran in parallel, so they don't block each other.\n\n- Running both the backend API and frontend webapp in parallel is a breeze.\n\n- Dependencies of persistent tasks are guaranteed to have ran and completed.\n\nTo mark a task as persistent, enable the [`local`](/docs/config/project#local) or\n[`options.persistent`](/docs/config/project#persistent) settings.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev-server'    preset: 'server'    # OR    options:      persistent: true\n```\n\n## Configuration\n\nTasks can be configured per project through [`moon.yml`](/docs/config/project), or for many projects\nthrough [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n### Commands vs Scripts\n\nA task is either a command or script, but not both. So what's the difference exactly? In the context\nof a moon task, a command is a single binary execution with optional arguments, configured with the\n[`command`](/docs/config/project#command) and [`args`](/docs/config/project#args) settings (which both\nsupport a string or array). While a script is one or many binary executions, with support for pipes\nand redirects, and configured with the [`script`](/docs/config/project#script) setting (which is only a\nstring).\n\nA command also supports merging during task inheritance, while a script does not and will always\nreplace values. Refer to the table below for more differences between the 2.\n\nCommand Script\n\nConfigured as string, array string\n\nInheritance merging  via `mergeArgs` option  always replaces\n\nAdditional args  via `args` setting \n\nPassthrough args (from CLI)  \n\nMultiple commands (with `&&` or `;`)  \n\nPipes, redirects, etc  \n\nAlways ran in a shell  \n\nCustom platform/toolchain  \n\n[Token](/docs/concepts/token) functions and variables  \n\n### Inheritance\n\nView the official documentation on [task inheritance](/docs/concepts/task-inheritance).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 159,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__token.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/token\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, token\n- Summary: Tokens are variables and functions that can be used by [`command`](/docs/config/project#command),\n----\n\nSource: https://moonrepo.dev/docs/concepts/token\n\n# Tokens\n\nTokens are variables and functions that can be used by [`command`](/docs/config/project#command),\n[`args`](/docs/config/project#args), [`env`](/docs/config/project#env) (>= v1.12),\n[`inputs`](/docs/config/project#inputs), and [`outputs`](/docs/config/project#outputs) when configuring a\ntask. They provide a way of accessing file group paths, referencing values from other task fields,\nand referencing metadata about the project and task itself.\n\n## Functions\n\nA token function is labeled as such as it takes a single argument, starts with an `@`, and is\nformatted as `@name(arg)`. The following token functions are available, grouped by their\nfunctionality.\n\ncaution\n\nToken functions must be the only content within a value, as they expand to multiple files. When\nused in an `env` value, multiple files are joined with a comma (`,`).\n\n### File groups\n\nThese functions reference file groups by name, where the name is passed as the argument.\n\n### `@group`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@group(file_group)` token is a standard token that will be replaced with the file group items\nas-is, for both file paths and globs. This token merely exists for reusability purposes.\n\n```\nfileGroups:  storybook:    - '.storybook/**/*'    - 'src/**/*'    - '**/*.stories.*'# Configured astasks:  build:    command: 'build-storybook'    inputs:      - '@group(storybook)'  start:    command: 'start-storybook'    inputs:      - '@group(storybook)'# Resolves totasks:  build:    command: 'build-storybook'    inputs:      - '/path/to/project/.storybook/**/*'      - '/path/to/project/src/**/*'      - '/path/to/project/**/*.stories.*'  start:    command: 'start-storybook'    inputs:      - '/path/to/project/.storybook/**/*'      - '/path/to/project/src/**/*'      - '/path/to/project/**/*.stories.*'\n```\n\n### `@dirs`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@dirs(file_group)` token will be replaced with an expanded list of directory paths, derived\nfrom the file group of the same name. If a glob pattern is detected within the file group, it will\naggregate all directories found.\n\nwarning\n\nThis token walks the file system to verify each directory exists, and filters out those that don't.\nIf using within `outputs`, you're better off using [`@group`](#group) instead.\n\n```\nfileGroups:  lintable:    - 'src'    - 'tests'    - 'scripts'    - '*.config.js'# Configured astasks:  lint:    command: 'eslint @dirs(lintable) --color'    inputs:      - '@dirs(lintable)'# Resolves totasks:  lint:    command:      - 'eslint'      - 'src'      - 'tests'      - 'scripts'      - '--color'    inputs:      - '/path/to/project/src'      - '/path/to/project/tests'      - '/path/to/project/scripts'\n```\n\n### `@files`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@files(file_group)` token will be replaced with an expanded list of file paths, derived from\nthe file group of the same name. If a glob pattern is detected within the file group, it will\naggregate all files found.\n\nwarning\n\nThis token walks the file system to verify each file exists, and filters out those that don't. If\nusing within `outputs`, you're better off using [`@group`](#group) instead.\n\n```\nfileGroups:  config:    - '*.config.js'    - 'package.json'# Configured astasks:  build:    command: 'webpack build @files(config)'    inputs:      - '@files(config)'# Resolves totasks:  build:    command:      - 'webpack'      - 'build'      - 'babel.config.js'      - 'webpack.config.js'      - 'package.json'    inputs:      - '/path/to/project/babel.config.js'      - '/path/to/project/webpack.config.js'      - '/path/to/project/package.json'\n```\n\n### `@globs`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@globs(file_group)` token will be replaced with the list of glob patterns as-is, derived from\nthe file group of the same name. If a non-glob pattern is detected within the file group, it will be\nignored.\n\n```\nfileGroups:  tests:    - 'tests/**/*'    - '**/__tests__/**/*'# Configured astasks:  test:    command: 'jest --testMatch @globs(tests)'    inputs:      - '@globs(tests)'# Resolves totasks:  test:    command:      - 'jest'      - '--testMatch'      - 'tests/**/*'      - '**/__tests__/**/*'    inputs:      - '/path/to/project/tests/**/*'      - '/path/to/project/**/__tests__/**/*'\n```\n\n### `@root`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@root(file_group)` token will be replaced with the lowest common directory, derived from the\nfile group of the same name. If a glob pattern is detected within the file group, it will walk the\nfile system and aggregate all directories found before reducing.\n\n```\nfileGroups:  sources:    - 'src/app'    - 'src/packages'    - 'src/scripts'# Configured astasks:  format:    command: 'prettier --write @root(sources)'    inputs:      - '@root(sources)'# Resolves totasks:  format:    command:      - 'prettier'      - '--write'      - 'src'    inputs:      - '/path/to/project/src'\n```\n\nWhen there's no directies, or too many directories, this function will return the project root\nusing `.`.\n\n### `@envs`v1.21.0\n\nUsable in `inputs`.\n\nThe `@envs(file_group)` token will be replaced with all environment variables that have been\nconfigured in the group of the provided name.\n\n```\nfileGroups:  sources:    - 'src/**/*'    - '$NODE_ENV'# Configured astasks:  build:    command: 'vite build'    inputs:      - '@envs(sources)'# Resolves totasks:  build:    command: 'vite build'    inputs:      - '$NODE_ENV'\n```\n\n### Inputs & outputs\n\n### `@in`\n\nUsable in `script` and `args` only.\n\nThe `@in(index)` token will be replaced with a single path, derived from\n[`inputs`](/docs/config/project#inputs) by numerical index. If a glob pattern is referenced by index,\nthe glob will be used as-is, instead of returning the expanded list of files.\n\n```\n# Configured astasks:  build:    command:      - 'babel'      - '--copy-files'      - '--config-file'      - '@in(1)'      - '@in(0)'    inputs:      - 'src'      - 'babel.config.js'# Resolves totasks:  build:    command:      - 'babel'      - '--copy-files'      - '--config-file'      - 'babel.config.js'      - 'src'    inputs:      - '/path/to/project/src'      - '/path/to/project/babel.config.js'\n```\n\n### `@out`\n\nUsable in `script` and `args` only.\n\nThe `@out(index)` token will be replaced with a single path, derived from\n[`outputs`](/docs/config/project#outputs) by numerical index.\n\n```\n# Configured astasks:  build:    command:      - 'babel'      - '.'      - '--out-dir'      - '@out(0)'    outputs:      - 'lib'# Resolves totasks:  build:    command:      - 'babel'      - '.'      - '--out-dir'      - 'lib'    outputs:      - '/path/to/project/lib'\n```\n\n### Miscellaneous\n\n### `@meta`v1.28.0\n\nUsable in `command`, `script`, `args`, `env`, `inputs`, and `outputs` only.\n\nThe `@meta(key)` token can be used to access project metadata and will be replaced with a value\nderived from [`project`](/docs/config/project#project) in [`moon.yml`](/docs/config/project).\n\nThe top-level fields (like `name` and `description`) will be used as-is (no quotes). If the setting\nis not defined, it will default to nothing or an empty string. For lists of values, they will be\njoined with `,`.\n\nCustom metadata defined in [`project`](/docs/config/project#project) can also be accessed by key, but\nwill return a JSON stringified value. For example, a custom string value of `example` will be\nstringified to `\"example\"` (with quotes).\n\n```\nproject:  title: 'example'  index: 123# Configured astasks:  build:    script: 'build --name @meta(title) --index @meta(index)'# Resolves totasks:  build:    script: 'build --name example --index 123'\n```\n\n## Variables\n\nA token variable is a value that starts with `$` and is substituted to a value derived from the\ncurrent workspace, project, and task. And unlike token functions, token variables can be placed\nwithin content when necessary, and supports multiple variables within the same content.\n\n### Environmentv1.30.0\n\n- `$arch` - The current host architecture, derived from the Rust [`ARCH` constant](https://doc.rust-lang.org/std/env/consts/constant.ARCH.html).\n\n- `$os` - The current operating system, derived from the Rust [`OS` constant](https://doc.rust-lang.org/std/env/consts/constant.OS.html).\n\n- `$osFamily` - The current operating system family, either `unix` or `windows`.\n\n```\n# Configured astasks:  build:    command: 'example --arch $arch'# Resolves totasks:  build:    command:      - 'example'      - '--arch'      - 'aarch64'\n```\n\n### Workspace\n\n- `$workingDir` - The current working directory.\n\n- `$workspaceRoot` - Absolute file path to the workspace root.\n\n```\n# Configured astasks:  build:    command:      - 'example'      - '--cwd'      - '$workspaceRoot'# Resolves totasks:  build:    command:      - 'example'      - '--cwd'      - '/path/to/repo'\n```\n\n### Project\n\nMost values are derived from settings in [`moon.yml`](/docs/config/project). When a setting is not\ndefined, or does not have a config, the variable defaults to \"unknown\" (for enums) or an empty\nstring.\n\n- `$language` Programming language the project is written in, as defined with [`language`](/docs/config/project#language).\n\n- `$project` - ID of the project that owns the currently running task, as defined in [`.moon/workspace.yml`](/docs/config/workspace).\n\n- `$projectAlias` - Alias of the project that owns the currently running task.\n\n- `$projectChannel` - The discussion channel for the project, as defined with [`project.channel`](/docs/config/project#channel). v1.28.0\n\n- `$projectLayer` - The project layer, as defined with [`layer`](/docs/config/project#layer). v1.39.0\n\n- `$projectTitle` - The human-readable name of the project, as defined with [`project.title`](/docs/config/project#title). v1.28.0\n\n- `$projectOwner` - The owner of the project, as defined with [`project.owner`](/docs/config/project#name). v1.28.0\n\n- `$projectRoot` - Absolute file path to the project root.\n\n- `$projectSource` - Relative file path from the workspace root to the project root, as defined in [`.moon/workspace.yml`](/docs/config/workspace).\n\n- `$projectStack` - The stack of the project, as defined with [`stack`](/docs/config/project#stack). v1.22.0\n\n```\n# Configured astasks:  build:    command: 'example debug $language'# Resolves totasks:  build:    command:      - 'example'      - 'debug'      - 'node'\n```\n\n### Task\n\n- `$target` - Fully-qualified target that is currently running.\n\n- `$task` - ID of the task that is currently running. Does not include the project ID.\n\n- `$taskToolchain` - The toolchain that task will run against, as defined in [`moon.yml`](/docs/config/project). v1.31.0\n\n- `$taskType` - The [type of task](/docs/concepts/task#types), based on its configured settings.\n\n```\n# Configured astasks:  build:    command: 'example $target'# Resolves totasks:  build:    command:      - 'example'      - 'web:build'\n```\n\n### Date/Time\n\n- `$date` - The current date in the format of `YYYY-MM-DD`.\n\n- `$datetime` - The current date and time in the format of `YYYY-MM-DD_HH:MM:SS`.\n\n- `$time` - The current time in the format of `HH:MM:SS`.\n\n- `$timestamp` - The current date and time as a UNIX timestamp in seconds.\n\n```\n# Configured astasks:  build:    command: 'example --date $date'# Resolves totasks:  build:    command:      - 'example'      - '--date'      - '2023-03-17'\n```\n\n### VCSv1.30.0\n\n- `$vcsBranch` - The current branch.\n\n- `$vcsRepository` - The repository slug, in the format of `owner/repo`.\n\n- `$vcsRevision` - The current revision (commit, etc).\n\n```\n# Configured astasks:  build:    command: 'example --branch $vcsBranch'# Resolves totasks:  build:    command:      - 'example'      - '--branch'      - 'master'\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 269,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__toolchain.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/toolchain\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, toolchain\n- Summary: The toolchain is an internal layer for downloading, installing, and managing tools (languages,\n----\n\nSource: https://moonrepo.dev/docs/concepts/toolchain\n\n# Toolchain\n\nThe toolchain is an internal layer for downloading, installing, and managing tools (languages,\ndependency managers, libraries, and binaries) that are required at runtime. We embrace this approach\nover relying on these tools \"existing\" in the current environment, as it ensures the following\nacross any environment or machine:\n\n- The version and enabled features of a tool are identical.\n\n- Tools are isolated and unaffected by external sources.\n\n- Builds are consistent, reproducible, and hopefully deterministic.\n\nFurthermore, this avoids a developer, pipeline, machine, etc, having to pre-install all the\nnecessary tools, and to keep them in sync as time passes.\n\n## How it works\n\nThe toolchain is built around [proto](/proto), our stand-alone multi-language version manager. moon\nwill piggyback of proto's toolchain found at `~/.proto` and reuse any tools available, or download\nand install them if they're missing.\n\n### Force disabling\n\nThe `MOON_TOOLCHAIN_FORCE_GLOBALS` environment variable can be set to `true` to force moon to use\ntool binaries available on `PATH`, instead of downloading and installing them. This is useful for\npre-configured environments, like CI and Docker.\n\n```\nMOON_TOOLCHAIN_FORCE_GLOBALS=true\n```\n\nAdditionally, the name of one or many tools can be passed to this variable to only force globals for\nthose tools, and use the toolchain for the remaining tools.\n\n```\nMOON_TOOLCHAIN_FORCE_GLOBALS=node,yarn\n```\n\n## Configuration\n\nThe tools that are managed by the toolchain are configured through the\n[`.moon/toolchains.yml`](/docs/config/toolchain) file, but can be overridden in each project with\n[`moon.yml`](/docs/config/project#toolchain).\n\n### Version specification\n\nAs mentioned above, tools within the toolchain are managed by version for consistency across\nmachines. These versions are configured on a per-tool basis in\n[`.moon/toolchains.yml`](/docs/config/toolchain). So what kinds of versions are allowed?\n\n- Full versions - A full version is a semantic version that is fully specified, such as `1.2.3` or `2.0.0-rc.1`. This is the most common way to specify a version, and is preferred to avoid subtle deviations.\n\n- Partial versions - A partial version is a version that is either missing a patch number, minor number, or both, such as `1.2` or `1`. These can also be represented with requirement syntax, such as `^1.2` or `~1`. If using partials, we suggest having a major and minor number to reduce the deviation of versions across machines.\n\n- Aliases - An alias is a human-readable word that maps to a specific version. For example, `latest` or `stable` maps to the latest version of a tool, or `canary` which maps to applicable canary release, or even a completely custom alias like `berry`. Aliases are language specific, are not managed by moon, and are not suggested for use since they can change at any time (or even daily!).\n\nThis sounds great, but how exactly does this work? For full versions and aliases, it's straight\nforward, as the resolved version is used as-is (assuming it's a legitimate version), and can be\nfound at `~/.proto/tools//`.\n\nFor partial versions, we first check locally installed versions for a match, by scanning\n`~/.proto/tools/`. For example, if the requested version is `1.2` and we have `1.2.10`\ninstalled locally, we'll use that version instead of downloading the latest `1.2.*` version.\nOtherwise, we'll download the latest version that matches the partial version, and install it\nlocally.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 86,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__concepts__workspace.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/concepts/workspace\n- Keywords: moon, moonrepo, docs, monorepo, build, concepts, workspace\n- Summary: A workspace is a directory that contains [projects](/docs/concepts/project), manages a [toolchain](/docs/concepts/toolchain),\n----\n\nSource: https://moonrepo.dev/docs/concepts/workspace\n\n# Workspace\n\nA workspace is a directory that contains [projects](/docs/concepts/project), manages a [toolchain](/docs/concepts/toolchain),\nruns [tasks](/docs/concepts/task), and is coupled with a VCS repository. The root of a workspace is denoted by a\n`.moon` folder.\n\nBy default moon has been designed for monorepos, but can also be used for polyrepos.\n\n## Configuration\n\nConfiguration that's applied to the entire workspace is defined in\n[`.moon/workspace.yml`](/docs/config/workspace).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 32,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__config.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/config\n- Keywords: moon, moonrepo, docs, monorepo, build, config\n- Summary: Documentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n----\n\nSource: https://moonrepo.dev/docs/config\n\n- [Home](/)\n- [Config files](/docs/config)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Config files\n\n[ OverviewSupported formats](/docs/config/overview)\n\n[ .moon/workspaceThe .moon/workspace.yml file configures projects and services in the workspace. This file is](/docs/config/workspace)\n\n[ .moon/extensionsThe .moon/extensions.yml file configures extensions that can hook into pipeline events, or be](/docs/config/extensions)\n\n[ .moon/toolchainsThe .moon/toolchains.yml file configures the toolchain and the workspace development environment.](/docs/config/toolchain)\n\n[ .moon/tasksThe .moon/tasks//* files configures file groups and tasks that are inherited by every project](/docs/config/tasks)\n\n[ moonThe moon.yml configuration file is not required but can be used to define additional metadata](/docs/config/project)\n\n[ templateThe template.yml file configures metadata and variables for a template,](/docs/config/template)\n\n[Workspace](/docs/concepts/workspace)\n\n[Overview](/docs/config/overview)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 46,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__config__extensions.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/config/extensions\n- Keywords: moon, moonrepo, docs, monorepo, build, config, extensions\n- Summary: The `.moon/extensions.yml` file configures extensions that can hook into pipeline events, or be\n----\n\nSource: https://moonrepo.dev/docs/config/extensions\n\n# .moon/extensions\n\nv2.0.0\n\nThe `.moon/extensions.yml` file configures extensions that can hook into pipeline events, or be\nexecuted directly. This file is optional.\n\n## `extends`\n\nDefines one or many external `.moon/extensions.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/extensions.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/extensions.yml'\n```\n\ncaution\n\nSettings will be merged recursively for blocks, with values defined in the local configuration\ntaking precedence over those defined in the extended configuration.\n\n## How it works\n\nA mapping of extensions that can be downloaded and executed with the [`moon ext`](/docs/commands/ext)\ncommand. An extension is a WASM plugin, and the location of the WASM file must be defined with the\n`plugin` field, which requires a\n[plugin locator string](/docs/guides/wasm-plugins#configuring-plugin-locations).\n\n.moon/extensions.yml\n\n```\nexample:  plugin: 'file://./path/to/example.wasm'  # or  plugin: 'https://example.com/path/to/example.wasm'\n```\n\nAdditionally, extensions support custom configuration that is passed to the WASM runtime when the\nplugin is instantiated. This configuration is defined by inserting additional fields under the\nextension name, relative to the `plugin` field. Each extension may have its own settings, so refer\nto their documentation for more information.\n\n.moon/extensions.yml\n\n```\nexample:  plugin: 'file://./path/to/example.wasm'  setting1: true  setting2: 'abc'\n```\n\n## Supported extensions\n\nView the [official guide](/docs/guides/extensions) for all built-in extensions.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 71,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__config__overview.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/config/overview\n- Keywords: moon, moonrepo, docs, monorepo, build, config, overview\n- Summary: In moon, you can define configuration files in a variety of formats. We currently support the\n----\n\nSource: https://moonrepo.dev/docs/config/overview\n\n# Overview\n\n## Supported formatsv2.0.0\n\nIn moon, you can define configuration files in a variety of formats. We currently support the\nfollowing:\n\n- JSON (`.json`)\n\n- JSON with comments (`.jsonc`)\n\n- [HCL](https://github.com/hashicorp/hcl) (`.hcl`)\n\n- [Pkl](https://pkl-lang.org/) (`.pkl`)\n\n- [TOML](https://toml.io/en/) (`.toml`)\n\n- YAML (`.yml`, `.yaml`)\n\ninfo\n\nIn moon v1, only YAML (`.yml`) and Pkl (`.pkl`) configuration files were supported.\n\n## Schema validationv1.33.0\n\nWe support schema validation for all configuration files through\n[JSON Schema](https://json-schema.org/), even for formats that are not JSON (depends on tool/editor\nsupport). To reference the schema for a specific configuration file, configure the `$schema`\nproperty at the top of the file with the appropriate schema found at `.moon/cache/schemas`.\n\n- .moon/workspace\n- .moon/extensions\n- .moon/toolchains\n- .moon/tasks\n- moon\n- template\n\n.moon/workspace.yml\n\n```\n$schema: './cache/schemas/workspace.json'\n```\n\n.moon/extensions.yml\n\n```\n$schema: './cache/schemas/extensions.json'\n```\n\n.moon/toolchains.yml\n\n```\n$schema: './cache/schemas/toolchains.json'\n```\n\n.moon/tasks/all.yml\n\n```\n$schema: '../cache/schemas/tasks.json'\n```\n\nmoon.yml\n\n```\n$schema: '../path/to/.moon/cache/schemas/project.json'\n```\n\ntemplate.yml\n\n```\n$schema: '../path/to/.moon/cache/schemas/template.json'\n```\n\ninfo\n\nThe schemas are automatically created when running a task. If they do not exist yet, you can run\n[`moon sync config-schemas`](/docs/commands/sync/config-schemas) to generate them manually.\n\ndanger\n\nIn older versions of moon, the schema files were located at `https://moonrepo.dev/schemas`. These\nURLs are now deprecated, as they do not support dynamic settings. Please update your `$schema`\nreferences to point to the local schema files in `.moon/cache/schemas`.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 103,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__config__project.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/config/project\n- Keywords: moon, moonrepo, docs, monorepo, build, config, project\n- Summary: The `moon.yml` configuration file is not required but can be used to define additional metadata\n----\n\nSource: https://moonrepo.dev/docs/config/project\n\n# moon\n\nThe `moon.yml` configuration file is not required but can be used to define additional metadata\nfor a project, override inherited tasks, and more at the project-level. When used, this file must\nexist in a project's root, as configured in [`projects`](/docs/config/workspace#projects).\n\n## `dependsOn`\n\nExplicitly defines other projects that this project depends on, primarily when generating the\nproject and task graphs. The most common use case for this is building those projects before\nbuilding this one. When defined, this setting requires an array of project names, which are the keys\nfound in the [`projects`](/docs/config/workspace#projects) map.\n\nmoon.yml\n\n```\ndependsOn:  - 'apiClients'  - 'designSystem'\n```\n\nA dependency object can also be defined, where a specific `scope` can be assigned, which accepts\n\"production\" (default), \"development\", \"build\", or \"peer\".\n\nmoon.yml\n\n```\ndependsOn:  - id: 'apiClients'    scope: 'production'  - id: 'designSystem'    scope: 'peer'\n```\n\nLearn more about [implicit and explicit dependencies](/docs/concepts/project#dependencies).\n\n## Metadata\n\n## `id`v1.18.0\n\nOverrides the name (identifier) of the project, which was configured in or derived from the\n[`projects`](/docs/config/workspace#projects) setting in [`.moon/workspace.yml`](/docs/config/workspace). This setting is\nuseful when using glob based project location, and want to avoid using the folder name as the\nproject name.\n\nmoon.yml\n\n```\nid: 'custom-id'\n```\n\ninfo\n\nAll references to the project must use the new identifier, including project and task dependencies.\n\n## `language`\n\nThe primary programming language the project is written in. This setting is required for\n[task inheritance](/docs/config/tasks), editor extensions, and more. Supports the following values:\n\n- `bash` - A [Bash](https://en.wikipedia.org/wiki/Bash_(Unix_shell)) based project (Unix only).\n\n- `batch` - A [Batch](https://en.wikibooks.org/wiki/Windows_Batch_Scripting)/PowerShell based project (Windows only).\n\n- `go` - A [Go](https://go.dev/) based project.\n\n- `javascript` - A [JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript) based project.\n\n- `php` - A [PHP](https://www.php.net) based project.\n\n- `python` - A [Python](https://www.python.org/) based project.\n\n- `ruby` - A [Ruby](https://www.ruby-lang.org/en/) based project.\n\n- `rust` - A [Rust](https://www.rust-lang.org/) based project.\n\n- `typescript` - A [TypeScript](https://www.typescriptlang.org/) based project.\n\n- `unknown` (default) - When not configured or inferred.\n\n- `*` - A custom language. Values will be converted to kebab-case.\n\nmoon.yml\n\n```\nlanguage: 'javascript'# Customlanguage: 'kotlin'\n```\n\nFor convenience, when this setting is not defined, moon will attempt to detect the language based\non configuration files found in the project root. This only applies to non-custom languages!\n\n## `owners`v1.8.0\n\nDefines ownership of source code within the current project, by mapping file system paths to owners.\nAn owner is either a user, team, or group.\n\nCurrently supports\n[GitHub](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners),\n[GitLab](https://docs.gitlab.com/ee/user/project/codeowners/reference.html), and\n[Bitbucket](https://marketplace.atlassian.com/apps/1218598/code-owners-for-bitbucket?tab=overview&hosting=cloud)\n(via app).\n\n### `customGroups`Bitbucket\n\nWhen using the\n[Code Owners for Bitbucket](https://marketplace.atlassian.com/apps/1218598/code-owners-for-bitbucket?tab=overview&hosting=cloud)\napp, this setting provides a way to define custom groups that will be injected at the top of the\n`CODEOWNERS` file. These groups must be unique across all projects.\n\nmoon.yml\n\n```\nowners:  customGroups:    '@@@backend': ['@\"user name\"', '@@team']\n```\n\n### `defaultOwner`\n\nThe default owner for all [`paths`](#paths). This setting is optional in some cases but helps to\navoid unnecessary repetition.\n\nmoon.yml\n\n```\nowners:  defaultOwner: '@frontend'\n```\n\n### `optional`GitLab\n\nFor GitLab, marks the project's\n[code owners section](https://docs.gitlab.com/ee/user/project/codeowners/reference.html#optional-sections)\nas optional. Defaults to `false`.\n\nmoon.yml\n\n```\nowners:  optional: true\n```\n\n### `paths`\n\nThe primary setting for defining ownership of source code within the current project. This setting\nsupports 2 formats, the first being a list of file paths relative from the current project. This\nformat requires [`defaultOwner`](#defaultowner) to be defined, and only supports 1 owner for every\npath (the default owner).\n\nmoon.yml\n\n```\nowners:  defaultOwner: '@frontend'  paths:    - '**/*.ts'    - '**/*.tsx'    - '*.config.js'\n```\n\nThe second format provides far more granularity, allowing for multiple owners per path. This format\nrequires a map, where the key is a file path relative from the current project, and the value is a\nlist of owners. Paths with an empty list of owners will fallback to [`defaultOwner`](#defaultowner).\n\nmoon.yml\n\n```\nowners:  defaultOwner: '@frontend'  paths:    '**/*.rs': ['@backend']    '**/*.js': []    '*.config.js': ['@frontend', '@frontend-infra']\n```\n\nThe syntax for owners is dependent on the provider you are using for version control (GitHub,\nGitLab, Bitbucket). moon provides no validation or guarantees that these are correct.\n\n### `requiredApprovals`Bitbucket / GitLab\n\nRequires a specific number of approvals for a pull/merge request to be satisfied. Defaults to `1`.\n\n- For Bitbucket, defines the [`Check()` condition](https://docs.mibexsoftware.com/codeowners/merge-checks#MergeChecks-2.MergeChecks:HowmanyoftheseCodeOwnersneedtoapprovebeforeapullrequestcanbemerged?) when using a [`defaultOwner`](#defaultowner).\n\n- For GitLab, defines a requirement on the [code owners section](https://docs.gitlab.com/ee/user/project/codeowners/reference.html#sections-requiring-multiple-approvals).\n\nmoon.yml\n\n```\nowners:  requiredApprovals: 2\n```\n\n## `layer`\n\nThe layer within a [stack](#stack). Supports the following values:\n\n- `application` - An application of any kind.\n\n- `automation` - An automated testing suite, like E2E, integration, or visual tests. v1.16.0\n\n- `configuration` - Configuration files or infrastructure. v1.22.0\n\n- `library` - A self-contained, shareable, and publishable set of code.\n\n- `scaffolding` - Templates or generators for scaffolding. v1.22.0\n\n- `tool` - An internal tool, CLI, one-off script, etc.\n\n- `unknown` (default) - When not configured.\n\nmoon.yml\n\n```\nlayer: 'application'\n```\n\ninfo\n\nThe project layer is used in [task inheritance](/docs/concepts/task-inheritance),\n[constraints and boundaries](/docs/config/workspace#constraints), editor extensions, and more!\n\n## `project`\n\nThe `project` setting defines metadata about the project itself.\n\nmoon.yml\n\n```\nproject:  title: 'moon'  description: 'A monorepo management tool.'  channel: '#moon'  owner: 'infra.platform'  maintainers: ['miles.johnson']\n```\n\nThe information listed within `project` is purely informational and primarily displayed within the\nCLI. However, this setting exists for you, your team, and your company, as a means to identify and\norganize all projects. Feel free to build your own tooling around these settings!\n\n### `channel`\n\nThe Slack, Discord, Teams, IRC, etc channel name (with leading #) in which to discuss the project.\n\n### `description`Required\n\nA description of what the project does and aims to achieve. Be as descriptive as possible, as this\nis the kind of information search engines would index on.\n\n### `maintainers`\n\nA list of people/developers that maintain the project, review code changes, and can provide support.\nCan be a name, email, LDAP name, GitHub username, etc, the choice is yours.\n\n### `title`\n\nA human readable name of the project. This is different from the unique project name configured in\n[`projects`](/docs/config/workspace#projects).\n\n### `owner`\n\nThe team or organization that owns the project. Can be a title, LDAP name, GitHub team, etc. We\nsuggest not listing people/developers as the owner, use [maintainers](#maintainers) instead.\n\n### Custom fieldsv2.0.0\n\nAdditional fields can be configured as custom metadata to associate to this project. Supports all\nvalue types that are valid JSON.\n\nmoon.yml\n\n```\nproject:  # ...  deprecated: true\n```\n\n## `stack`v1.22.0\n\nThe technology stack this project belongs to, primarily for categorization. Supports the following\nvalues:\n\n- `backend` - Server-side APIs, etc.\n\n- `data` - Data sources, database layers, etc. v2.0.0\n\n- `frontend` - Client-side user interfaces, etc.\n\n- `infrastructure` - Cloud/server infrastructure, Docker, etc.\n\n- `systems` - Low-level systems programming.\n\n- `unknown` (default) - When not configured.\n\nmoon.yml\n\n```\nstack: 'frontend'\n```\n\ninfo\n\nThe project stack is also used in [constraints and boundaries](/docs/config/workspace#constraints)!\n\n## `tags`\n\nTags are a simple mechanism for categorizing projects. They can be used to group projects together\nfor [easier querying](/docs/commands/query/projects), enforcing of\n[project boundaries and constraints](/docs/config/workspace#constraints),\n[task inheritance](/docs/concepts/task-inheritance), and more.\n\nmoon.yml\n\n```\ntags:  - 'react'  - 'prisma'\n```\n\n## Integrations\n\n## `docker`v1.27.0\n\nConfigures Docker integration for the current project.\n\n### `file`\n\nConfigures the `Dockerfile` generation process when [`moon docker file`](/docs/commands/docker/file) is\nexecuted.\n\n#### `buildTask`\n\nThe name of a task within the current project that will be used for building the project before\nrunning it. If not defined, does nothing.\n\nmoon.yml\n\n```\ndocker:  file:    buildTask: 'build'\n```\n\n#### `image`\n\nThe Docker image to use in the base stage. Defaults to an image based on the project's toolchain, as\noutlined below.\n\n- `oven/bun:latest` for Bun\n\n- `denoland/deno:latest` for Deno\n\n- `node:latest` for Node.js\n\n- `python:latest` for Python\n\n- `rust:latest` for Rust\n\n- `scratch` for everything else\n\nmoon.yml\n\n```\ndocker:  file:    image: 'node:latest'\n```\n\n#### `startTask`\n\nThe name of a task within the current project that will run the project after it has been built (if\nrequired). This task will be used as `CMD` within the `Dockerfile`.\n\nmoon.yml\n\n```\ndocker:  file:    startTask: 'start'\n```\n\n### `scaffold`\n\nConfigures aspects of the Docker scaffolding process when\n[`moon docker scaffold`](/docs/commands/docker/scaffold) is executed. Only applies to the\n[sources skeleton](/docs/commands/docker/scaffold#sources).\n\n#### `sourcesPhaseGlobs`\n\nList of globs in which to copy project-relative files into the `.moon/docker/sources` skeleton. When\nnot defined, defaults to `**/*`.\n\nmoon.yml\n\n```\ndocker:  scaffold:    sourcesPhaseGlobs:      - 'src/**/*'\n```\n\n## Tasks\n\n## `env`\n\nThe `env` field is map of strings that are passed as environment variables to all tasks within the\ncurrent project. Project-level variables will not override task-level variables of the same name.\n\nmoon.yml\n\n```\nenv:  NODE_ENV: 'production'\n```\n\nView the task [`env`](#env-1) setting for more usage examples and information.\n\n## `fileGroups`\n\nDefines [file groups](/docs/concepts/file-group) to be used by local tasks. By default, this setting\nis not required for the following reasons:\n\n- File groups are an optional feature, and are designed for advanced use cases.\n\n- File groups defined in [`.moon/tasks/all.yml`](/docs/config/tasks) will be inherited by all projects.\n\nWhen defined this setting requires a map, where the key is the file group name, and the value is a\nlist of [globs or file paths](/docs/concepts/file-pattern), or environment variables. Globs and paths\nare [relative to a project](/docs/concepts/file-pattern#project-relative) (even when defined\n[globally](/docs/config/tasks)).\n\nmoon.yml\n\n```\n# Example groupsfileGroups:  configs:    - '*.config.{js,cjs,mjs}'    - '*.json'  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*'    - '**/__tests__/**/*'  assets:    - 'assets/**/*'    - 'images/**/*'    - 'static/**/*'    - '**/*.{scss,css}'\n```\n\nOnce your groups have been defined, you can reference them within [`args`](#args),\n[`inputs`](#inputs), [`outputs`](#outputs), and more, using\n[token functions and variables](/docs/concepts/token).\n\nmoon.yml\n\n```\ntasks:  build:    command: 'vite build'    inputs:      - '@group(configs)'      - '@group(sources)'\n```\n\n## `tasks`\n\nTasks are actions that are ran within the context of a [project](/docs/concepts/project), and commonly\nwrap an npm binary or system command. This setting requires a map, where the key is a unique name\nfor the task, and the value is an object of task parameters.\n\nmoon.yml\n\n```\ntasks:  format:    command: 'prettier'  lint:    command: 'eslint'  test:    command: 'jest'  typecheck:    command: 'tsc'\n```\n\n### `extends`v1.12.0\n\nThe `extends` field can be used to extend the settings from a sibling task within the same project,\nor [inherited from the global scope](/docs/concepts/task-inheritance). This is useful for composing\nsimilar tasks with different arguments or options.\n\nWhen extending another task, the same\n[merge strategies](/docs/concepts/task-inheritance#merge-strategies) used for inheritance are applied.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint .'    inputs:      - 'src/**/*'  lint-fix:    extends: 'lint'    args: '--fix'    preset: 'utility'\n```\n\n### `description`v1.22.0\n\nA human-readable description of what the task does. This information is displayed within the\n[`moon project`](/docs/commands/project) and [`moon task`](/docs/commands/task) commands.\n\nmoon.yml\n\n```\ntasks:  build:    description: 'Builds the project using Vite'    command: 'vite build'\n```\n\n### `command`\n\nThe `command` field is a single command to execute for the task, including the command binary/name\n(must be first) and any optional [arguments](#args). This field supports task inheritance and\nmerging of arguments.\n\nThis setting can be defined using a string, or an array of strings. We suggest using arrays when\ndealing with many args, or the args string cannot be parsed easily.\n\nmoon.yml\n\n```\ntasks:  format:    # Using a string    command: 'prettier --check .'    # Using an array    command:      - 'prettier'      - '--check'      - '.'\n```\n\ninfo\n\nIf you need to support pipes, redirects, or multiple commands, use [`script`](#script) instead.\nLearn more about [commands vs scripts](/docs/concepts/task#commands-vs-scripts).\n\n#### Special commands\n\nFor interoperability reasons, the following command names have special handling.\n\n- `noop`, `no-op`, `nop` - Marks the task as a \"no operation\". Will not execute a command in the action pipeline but can define dependencies.\n\n- When `toolchain` is \"bun\": `bun`, `bunx` - Uses the binaries from the toolchain.\n\n- When `toolchain` is \"deno\": Will execute with `deno` binary.\n\n- When `toolchain` is \"node\": `node`, `npm`, `pnpm`, `yarn` - Uses the binaries from the toolchain.\n\n- When `toolchain` is \"rust\": Will execute with `cargo` binary.\n\n### `args`\n\nThe `args` field is a collection of additional arguments to append to the [`command`](#command)\nwhen executing the task. This field exists purely to provide arguments for\n[inherited tasks](/docs/config/tasks#tasks).\n\nThis setting can be defined using a string, or an array of strings. We suggest using arrays when\ndealing with many args, or the args string cannot be parsed easily.\n\nmoon.yml\n\n```\ntasks:  test:    command: 'jest'    # Using a string    args: '--color --maxWorkers 3'    # Using an array    args:      - '--color'      - '--maxWorkers'      - '3'\n```\n\nHowever, for the array approach to work correctly, each argument must be its own distinct item,\nincluding argument values. For example:\n\nmoon.yml\n\n```\ntasks:  test:    command: 'jest'    args:      # Valid      - '--maxWorkers'      - '3'      # Also valid      - '--maxWorkers=3'      # Invalid      - '--maxWorkers 3'\n```\n\n### `deps`\n\nThe `deps` field is a list of other tasks (known as [targets](/docs/concepts/target)), either within\nthis project or found in another project, that will be executed before this task. It achieves this\nby generating a directed task graph based on the project graph.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    deps:      - 'apiClients:build'      - 'designSystem:build'      # A task within the current project      - 'codegen'\n```\n\n#### Args & env\n\nFurthermore, for each dependency target, you can configure additional command line arguments and\nenvironment variables that'll be passed to the dependent task when it is ran. The `args` field\nsupports a list of strings, while `env` is an object of key-value pairs.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    deps:      - target: 'apiClients:build'        args: ['--env', 'production']        env:          NODE_ENV: 'production'\n```\n\nDependencies of inherited tasks will be excluded and renamed according to the\n[`workspace.inheritedTasks`](#inheritedtasks) setting. This process only uses filters from the\ncurrent project, and not filters from dependent projects. Furthermore, `args` and `env` are not\ndeeply merged.\n\n#### Optional\n\nBy default, all dependencies are required to exist when tasks are being built and expanded, but this\nisn't always true when dealing with composition and inheritance. For dependencies that may not exist\nbased on what's inherited, you can mark it as `optional`.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    deps:      - target: 'apiClients:build'        optional: true\n```\n\n### `env`\n\nThe `env` field is map of strings that are passed as environment variables when running the command.\nVariables defined here will take precedence over those loaded with [`envFile`](#envfile).\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    env:      NODE_ENV: 'production'\n```\n\nVariables also support substitution using the syntax `${VAR_NAME}`. When using substitution, only\nvariables in the current process can be referenced, and not those currently defined in `env`.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    env:      APP_TARGET: '${REGION}-${ENVIRONMENT}'\n```\n\n### `inputs`\n\nThe `inputs` field is a list of sources that calculate whether to execute this task based on the\nenvironment and files that have been touched since the last time the task has been ran. If not\ndefined or inherited, then all files within a project are considered an input (`**/*`), excluding\nroot-level tasks.\n\nInputs support the following source types:\n\n- Environment variables\n\n- Environment variable wildcards v1.22.0\n\n- Files, folders, and globs\n\n- [Token functions and variables](/docs/concepts/token)\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    inputs:      # Config files anywhere within the project      - '**/.eslintignore'      - '**/.eslintrc.js'      # Config files at the workspace root      - '/.eslintignore'      - '/.eslintrc.js'      # Tokens      - '$projectRoot'      - '@group(sources)'\n```\n\n#### Environment variables\n\nEnvironment variables can be used as inputs and must start with a `$`. Wildcard variables can use\n`*` to match any character.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      - '$FOO_CACHE'      - '$FOO_*'\n```\n\ncaution\n\nWhen using an environment variable, we assume it's not defined by default, and will trigger an\naffected state when it is defined. If the environment variable always exists, then the task will\nalways run and bypass the cache.\n\n#### File paths\n\nFile paths support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `file://` URI v1.39.0,\nor as an object with a `file` property v1.39.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `content`, `match`, `matches` (`string`) - When determining affected state, will match against the file's content using the defined regex pattern, instead of relying on file existence.\n\n- `optional` (`boolean`) - When hashing and set to `true` and the file is missing, will not log a warning. When set to `false` and the file is missing, will fail with an error. Defaults to logging a warning.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'project/relative/file.js'      - '/workspace/relative/file.js'      # Using file protocol      - 'file://project/relative/file.js?optional'      - 'file:///workspace/relative/file.js?content=a|b|c'      # Using an object      - file: 'project/relative/file.js'        optional: true      - file: '/workspace/relative/file.js'        content: 'a|b|c'\n```\n\n#### File groupsv1.41.0\n\nA file group input will reference the defined files/globs within from a file group in the current\nproject. It can be defined with a `group://` URI, or as an object with a `group` property.\nAdditionally, the following parameters are supported as a URI query or as object fields:\n\n- `format`, `as` (`string`) - The format in which to gather the file group results. Supported values are `static` (default), `files`, `dirs`, `globs`, `envs`, and `root`.\n\nmoon.yml\n\n```\nfileGroups:  sources:    - 'src/**/*'tasks:  build:    # ...    inputs:      # Using group protocol      - 'group://sources?format=dirs'      # Using an object      - group: 'sources'        format: 'dirs'\n```\n\n#### Glob patterns\n\nGlob patterns support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `glob://` URI v1.39.0,\nor as an object with a `glob` property v1.39.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `cache` (`boolean`) - When gathering inputs for hashing, defines whether the glob results should be cached for the duration of the moon process. Defaults to `true`.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'project/relative/file.*'      - '/workspace/relative/**/*'      # Using glob protocol      - 'glob://project/relative/file.*?cache=false'      - 'glob:///workspace/relative/**/*?cache'      # Using an object      - glob: 'project/relative/file.*'        cache: false      - glob: '/workspace/relative/**/*'\n```\n\nGlobs can also be negated by prefixing the path with `!`, which will exclude all files that match\nthe glob.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      - '!**/*.md'      - 'glob://!/workspace/relative/**/*'      - glob: '!/workspace/relative/**/*'\n```\n\nwarning\n\nGlob patterns that contain `?`, for example `*.tsx?`, cannot be used in URI format, as it conflicts\nwith the query string syntax. Use the path or object format instead.\n\ndanger\n\nBe aware that files that match the glob, but are ignored via `.gitignore` (or similar), will not\nbe considered an input. To work around this, use explicit file inputs.\n\n#### External projectsv1.41.0\n\nTasks can also depend on files and globs from other projects within the same workspace. This is\nuseful for handling cross-project relationships without needing to define explicit task\ndependencies.\n\nExternal projects can be defined as a `project://` URI, or as an object with a `project` property,\nboth of which require a project identifier, or `^` for all dependent projects. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `group`, `fileGroup` (`id`) - The name of a file group within the external project in which file and glob patterns will be used for matching. Takes precedence over `filter`.\n\n- `filter` (`string[]`) - A list of [project relative glob patterns](/docs/concepts/file-pattern#project-relative) that will be used for matching.\n\nIf neither `group` nor `filter` are defined, all files within the external project are considered a\nmatch (`**/*`).\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Using project protocol      - 'project://foo'      - 'project://bar?group=sources'      - 'project://baz?filter=src/**/*'      # Using an object      - project: 'foo'      - project: 'bar'        group: 'sources'      - project: 'baz'        filter: ['src/**/*']\n```\n\n### `outputs`\n\nThe `outputs` field is a list of [files and folders](/docs/concepts/file-pattern#project-relative) that\nare created as a result of executing this task, typically from a build or compilation related\ntask. Outputs are necessary for [incremental caching and hydration](/docs/concepts/cache). If you'd\nprefer to avoid that functionality, omit this field.\n\n#### File paths\n\nFile paths support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `file://` URI v1.41.0,\nor as an object with a `file` property v1.41.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `optional` (`boolean`) - When archiving and set to `true` and the file is missing, will not fail with a missing output error. Defaults to `false`.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'build/'      # Using file protocol      - 'file://build/'      # Using an object      - file: 'build/'        optional: true\n```\n\n#### Glob patterns\n\nGlob patterns support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `glob://` URI v1.41.0,\nor as an object with a `glob` property v1.41.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `optional` (`boolean`) - When archiving and set to `true` and the glob produced no results, will not fail with a missing output error. Defaults to `false`.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'build/**/*.js'      - '!build/internal.js'      # Using glob protocol      - 'glob://build/**/*.js'      # Using an object      - glob: 'build/**/*.js'\n```\n\nwarning\n\nGlob patterns that contain `?`, for example `*.tsx?`, cannot be used in URI format, as it conflicts\nwith the query string syntax. Use the path or object format instead.\n\ndanger\n\nWhen using globs and moon hydrates an output (a cache hit), all files not matching the glob will be\ndeleted. Ensure that all files critical for the build to function correctly are included.\n\n### `preset`v1.28.0\n\nApplies the chosen preset to the task. A preset defines a collection of task options that will be\ninherited as the default, and can then be overridden within the task itself. The following presets\nare available:\n\n- `server` [`cache`](#cache) -> Turned off\n\n- [`outputStyle`](#outputstyle) -> Set to \"stream\"\n\n- [`persistent`](#persistent) -> Turned on\n\n- [`runInCI`](#runinci) -> Turned off\n\n- `utility` v2.0.0 [`cache`](#cache) -> Turned off\n\n- [`interactive`](#interactive) -> Turned on\n\n- [`outputStyle`](#outputstyle) -> Set to \"stream\"\n\n- [`persistent`](#persistent) -> Turned off\n\n- [`runInCI`](#runinci) -> Skipped\n\nTasks named \"dev\", \"start\", or \"serve\" are marked as `server` automatically.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'webpack server'    preset: 'server'\n```\n\n### `script`v1.27.0\n\nThe `script` field is one or many commands to execute for the task, with support for pipes,\nredirects, and more. This field does not support task inheritance merging, and can only be defined\nwith a string.\n\nIf defined, will supersede [`command`](#command) and [`args`](#args).\n\nmoon.yml\n\n```\ntasks:  exec:    # Single command    script: 'cp ./in ./out'    # Multiple commands    script: 'rm -rf ./out && cp ./in ./out'    # Pipes    script: 'ps aux | grep 3000'    # Redirects    script: './gen.sh > out.json'\n```\n\ninfo\n\nIf you need to support merging during task inheritance, use [`command`](#command) instead. Learn\nmore about [commands vs scripts](/docs/concepts/task#commands-vs-scripts).\n\n### `toolchains`v1.31.0\n\nThe `toolchain` field defines additional [toolchain(s)](/docs/concepts/toolchain) the command runs on,\nwhere to locate its executable, and more. By default, moon will set to a value based on the\nproject's [`language`](#language), default [`toolchain.default`](#toolchain-1), or via detection.\n\nmoon.yml\n\n```\ntasks:  env:    command: 'printenv'    toolchains: 'system'\n```\n\nThis setting also supports multiple values.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'npm run build'    toolchains: ['javascript', 'node', 'npm']\n```\n\n### `options`\n\nThe `options` field is an object of configurable options that can be used to modify the task and its\nexecution. The following fields can be provided, with merge related fields supporting all\n[merge strategies](/docs/concepts/task-inheritance#merge-strategies).\n\nmoon.yml\n\n```\ntasks:  typecheck:    command: 'tsc --noEmit'    options:      mergeArgs: 'replace'      runFromWorkspaceRoot: true\n```\n\n#### `affectedFiles`\n\nWhen enabled and the [`--affected` option](/docs/run-task#running-based-on-affected-files-only) is\nprovided, all affected files that match this task's [`inputs`](#inputs) will be passed as relative\nfile paths as command line arguments, and as a `MOON_AFFECTED_FILES` environment variable.\n\nIf there are no affected files, `.` (current directory) will be passed instead for arguments, and an\nempty value for the environment variable. This functionality can be changed with the\n[`affectedPassInputs`](#affectedpassinputs) setting.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    options:      affectedFiles: true      # Only pass args      affectedFiles: 'args'      # Only set env var      affectedFiles: 'env'\n```\n\ncaution\n\nWhen using this option, ensure that explicit files or `.` are not present in the [`args`](#args)\nlist. Furthermore, this functionality will only work if the task's command supports an arbitrary\nlist of files being passed as arguments.\n\nThis setting also supports an object format with additional parameters. The `pass` field is\nrequired, which accepts a value described above.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    options:      affectedFiles:        pass: 'args'\n```\n\nThe following additional parameters are supported:\n\n- `passInputsWhenNoMatch` (`boolean`) - When no affected files are found, and `pass` includes `args`, will pass all configured [`inputs`](#inputs) as relative file paths instead of `.`. Defaults to `false`.\n\n#### `allowFailure`v1.13.0\n\nAllows a task to fail without failing the entire pipeline. When enabled, the following changes\noccur:\n\n- Other tasks cannot depend on this task, as we can't ensure it's side-effect free.\n\n- For [`moon run`](/docs/commands/run), the process will not bail early and will run to completion.\n\n- For [`moon ci`](/docs/commands/ci), the process will not exit with a non-zero exit code, if the only failing tasks are allowed to fail.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    options:      allowFailure: true\n```\n\n#### `cache`\n\nWhether to cache the task's execution result using our [smart hashing](/docs/concepts/cache#hashing)\nsystem. If disabled, will not create a cache hash, and will not persist a task's\n[outputs](#outputs). Supports the following values:\n\n- `true` (default) - Cache the task's output.\n\n- `false` - Do not cache the task's output.\n\n- `local` - Only cache locally. v1.40.0\n\n- `remote` - Only cache [remotely](/docs/guides/remote-cache). v1.40.0\n\nWe suggest disabling caching when defining cleanup tasks, one-off scripts, or file system heavy\noperations.\n\nmoon.yml\n\n```\ntasks:  clean:    command: 'rm -rf ./temp'    options:      cache: false\n```\n\n#### `cacheKey`v1.35.0\n\nA custom key to include in the cache and task hashing process. Can be used to invalidate local and\nremote caches.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'some-costly-build'    options:      cacheKey: 'v1'\n```\n\n#### `cacheLifetime`v1.29.0\n\nThe lifetime in which a [cached task](#cache) will live before being marked as stale and re-running.\nThis applies to a task even if it does not produce [outputs](#outputs).\n\nThe lifetime can be configured in a human-readable string format, for example, `1 day`, `3 hr`,\n`1m`, etc. If the lifetime is not defined, the cache will live forever, or until the task inputs are\ntouched.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'some-costly-build'    options:      cacheLifetime: '1 day'\n```\n\nString formats are powered by the\n[humantime](https://docs.rs/humantime/2.1.0/humantime/fn.parse_duration.html) crate.\n\n#### `envFile`\n\nA boolean or path to a `.env` file (also know as dotenv file) that defines a collection of\n[environment variables](#env-1) for the current task. Variables will be loaded on project creation,\nbut will not override those defined in [`env`](#env-1).\n\nVariables defined in the file support value substitution/expansion by wrapping the variable name in\ncurly brackets, such as `${VAR_NAME}`.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    options:      # Defaults to .env      envFile: true      # Or      envFile: '.env.production'      # Or from the workspace root      envFile: '/.env.shared'\n```\n\nWhen set to `true`, moon will load the following files in order, with later files taking precedence\nover earlier ones:\n\n- `/.env`\n\n- `/.env.local`\n\n- `.env`\n\n- `.env.local`\n\n- `.env.`\n\n- `.env..local`\n\nAdditionally, a list of file paths can also be provided. When using a list, the order of the files\nis important, as environment variables from all files will be aggregated into a single map, with\nsubsequent files taking precedence over previous ones. Once aggregated, the variables will be passed\nto the task, but will not override those defined in [`env`](#env-1).\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    options:      envFile:        - '.env'        - '.env.production'\n```\n\n#### `inferInputs`v1.31.0\n\nAutomatically infer [inputs](#inputs) based on the following parameters configured within the task's\n`command`, `script`, `args`, or `env`. Defaults to `false`.\n\n- File/glob paths derived from [file group based token functions](/docs/concepts/token#file-groups).\n\n- Environment variables being substituted within a command or script.\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      inferInputs: false\n```\n\n#### `internal`v1.23.0\n\nMarks the task as internal only. [Internal tasks](/docs/concepts/task#internal-only) can not be\nexplicitly ran on the command line, but can be depended on by other tasks.\n\nmoon.yml\n\n```\ntasks:  prepare:    # ...    options:      internal: true\n```\n\n#### `interactive`v1.12.0\n\nMarks the task as interactive. [Interactive tasks](/docs/concepts/task#interactive) run in isolation so\nthat they can interact with stdin.\n\nThis setting also disables caching, turns of CI, and other functionality, similar to the\n[`preset`](#preset) setting.\n\nmoon.yml\n\n```\ntasks:  init:    # ...    options:      interactive: true\n```\n\n#### `merge`v1.29.0\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging [`args`](#args),\n[`deps`](#deps), [`env`](#env-1), [`inputs`](#inputs), and [`outputs`](#outputs) with an inherited\ntask. This option can be overridden with the field specific merge options below.\n\n#### `mergeArgs`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`args`](#args) list with an inherited task. Defaults to \"append\".\n\n#### `mergeDeps`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`deps`](#deps) list with an inherited task. Defaults to \"append\".\n\n#### `mergeEnv`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`env`](#env-1) map with an inherited task. Defaults to \"append\".\n\n#### `mergeInputs`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`inputs`](#inputs) list with an inherited task. Defaults to \"append\".\n\n#### `mergeOutputs`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`outputs`](#outputs) list with an inherited task. Defaults to \"append\".\n\n#### `mergeToolchains`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`toolchains`](#toolchains) list with an inherited task. Defaults to \"append\".\n\n#### `mutex`v1.24.0\n\nCreates an exclusive lock on a \"virtual resource\", preventing other tasks using the same \"virtual\nresource\" from running concurrently.\n\nIf you have many tasks that require exclusive access to a resource that can't be tracked by moon\n(like a database, an ignored file, a file that's not part of the project, or a remote resource) you\ncan use the `mutex` option to prevent them from running at the same time.\n\nmoon.yml\n\n```\ntasks:  a:    # ...    options:      mutex: 'virtual_resource_name'  # b doesn't necessarily have to be in the same project  b:    # ...    options:      mutex: 'virtual_resource_name'\n```\n\n#### `os`v1.28.0\n\nWhen defined, the task will only run on the configured operating system. For other operating\nsystems, the task becomes a no-operation. Supports the values `linux`, `macos`, and `windows`.\n\nCan be defined as a single value, or a list of values.\n\nmoon.yml\n\n```\ntasks:  build-unix:    # ...    options:      os: ['linux', 'macos']  build-windows:    # ...    options:      os: 'windows'\n```\n\n#### `outputStyle`\n\nControls how stdout/stderr is displayed when the task is ran as a transitive target. By default,\nthis setting is not defined and defers to the action pipeline, but can be overridden with one of the\nfollowing values:\n\n- `buffer` - Buffers output and displays after the task has exited (either success or failure).\n\n- `buffer-only-failure` - Like `buffer`, but only displays on failures.\n\n- `hash` - Ignores output and only displays the generated [hash](/docs/concepts/cache#hashing).\n\n- `none` - Ignores output.\n\n- `stream` - Streams output directly to the terminal. Will prefix each line of output with the target.\n\nmoon.yml\n\n```\ntasks:  test:    # ...    options:      outputStyle: 'stream'\n```\n\n#### `persistent`v1.6.0\n\nMarks the task as persistent (continuously running). [Persistent tasks](/docs/concepts/task#persistent)\nare handled differently than non-persistent tasks in the action graph. When running a target, all\npersistent tasks are ran last and in parallel, after all their dependencies have completed.\n\nThis is extremely useful for running a server (or a watcher) in the background while other tasks are\nrunning.\n\nmoon.yml\n\n```\ntasks:  dev:    # ...    options:      persistent: true\n```\n\nWe suggest using the [`preset`](#preset) setting instead, which enables this setting, amongst\nother useful settings.\n\n#### `priority`v1.35.0\n\nThe priority level determines the position of the task within the action pipeline queue. A task with\na higher priority will run sooner rather than later, while still respecting the topological order.\nSupports the following levels:\n\n- `critical`\n\n- `high`\n\n- `normal` (default)\n\n- `low`\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      priority: 'high'\n```\n\n#### `retryCount`\n\nThe number of attempts the task will retry execution before returning a failure. This is especially\nuseful for flaky tasks. Defaults to `0`.\n\nmoon.yml\n\n```\ntasks:  test:    # ...    options:      retryCount: 3\n```\n\n#### `runDepsInParallel`\n\nWhether to run the task's direct [`deps`](#deps) in parallel or serial (in order). Defaults to\n`true`.\n\nWhen disabled, this does not run dependencies of dependencies in serial, only direct dependencies.\n\nmoon.yml\n\n```\ntasks:  start:    # ...    deps:      - '~:clean'      - '~:build'    options:      runDepsInParallel: false\n```\n\n#### `runInCI`\n\nWhether to run the task automatically in a CI (continuous integration) environment when affected by\ntouched files using the [`moon ci`](/docs/commands/ci) command. Supports the following values:\n\n- `always` - Always run in CI, regardless if affected or not. v1.31.0\n\n- `affected`, `true` (default) - Only run in CI if affected by touched files.\n\n- `false` - Never run in CI.\n\n- `only` - Only run in CI, and not locally, if affected by touched files. v1.41.0\n\n- `skip` - Skip running in CI but run locally and allow task relationships to be valid. v1.41.0\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      runInCI: false\n```\n\n#### `runFromWorkspaceRoot`\n\nWhether to use the workspace root as the working directory when executing a task. Defaults to\n`false` and runs from the task's project root.\n\nmoon.yml\n\n```\ntasks:  typecheck:    # ...    options:      runFromWorkspaceRoot: true\n```\n\n#### `shell`\n\nWhether to run the command within a shell or not. Defaults to `true` for system toolchain or\nWindows, and `false` otherwise. The shell to run is determined by the [`unixShell`](#unixshell) and\n[`windowsShell`](#windowsshell) options respectively.\n\nmoon.yml\n\n```\ntasks:  native:    command: 'echo $SHELL'    options:      shell: true\n```\n\nHowever, if you'd like to use a different shell, or customize the shell's arguments, or have\ngranular control, you can set `shell` to false and configure a fully qualified command.\n\nmoon.yml\n\n```\ntasks:  native:    command: '/bin/zsh -c \"echo $SHELL\"'    options:      shell: false\n```\n\n#### `timeout`v1.26.0\n\nThe maximum time in seconds that the task is allowed to run, before it is force cancelled. If not\ndefined, will run indefinitely.\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      timeout: 120\n```\n\n#### `unixShell`v1.21.0\n\nCustomize the shell to run with when on a Unix operating system. Accepts `bash`, `elvish`, `fish`,\n`ion`, `murex`, `nu`, `pwsh`, `xonsh`, or `zsh`. If not defined, will derive the shell from the\n`SHELL` environment variable, or defaults to `bash`.\n\nmoon.yml\n\n```\ntasks:  native:    command: 'echo $SHELL'    options:      unixShell: 'fish'\n```\n\n#### `windowsShell`v1.21.0\n\nCustomize the shell to run with when on a Windows operating system. Accepts `bash` (typically via\nGit), `elvish`, `fish`, `murex`, `nu`, `pwsh`, or `xonsh`. If not defined, defaults to `pwsh`.\n\nmoon.yml\n\n```\ntasks:  native:    command: 'echo $SHELL'    options:      windowsShell: 'bash'\n```\n\n## Overrides\n\nDictates how a project interacts with settings defined at the top-level.\n\n## `toolchains`\n\n### `default`v1.31.0\n\nThe default [`toolchain`](#toolchain-1) for all task's within the current project. When a task's\n`toolchain` has not been explicitly configured, the toolchain will fallback to this configured\nvalue, otherwise the toolchain will be detected from the project's environment.\n\nmoon.yml\n\n```\ntoolchains:  default: 'node'\n```\n\n### `bun`\n\nConfigures Bun for this project and overrides the top-level [`bun`](/docs/config/toolchain#bun) setting.\n\n#### `version`\n\nDefines the explicit Bun [version specification](/docs/concepts/toolchain#version-specification) to use\nwhen running tasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  bun:    version: '1.0.0'\n```\n\n### `deno`\n\nConfigures Deno for this project and overrides the top-level [`deno`](/docs/config/toolchain#deno) setting.\n\n#### `version`\n\nDefines the explicit Deno [version specification](/docs/concepts/toolchain#version-specification) to\nuse when running tasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  deno:    version: '1.40.0'\n```\n\n### `node`\n\nConfigures Node.js for this project and overrides the top-level [`node`](/docs/config/toolchain#node) setting.\nCurrently, only the Node.js version can be overridden per-project, not the package manager.\n\n#### `version`\n\nDefines the explicit Node.js [version specification](/docs/concepts/toolchain#version-specification) to\nuse when running tasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  node:    version: '12.12.0'\n```\n\n### `python`\n\nConfigures Python for this project and overrides the top-level [`python`](/docs/config/toolchain#python)\nsetting.\n\n#### `version`\n\nDefines the explicit Python\n[version/channel specification](/docs/concepts/toolchain#version-specification) to use when running\ntasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  python:    version: '3.12.0'\n```\n\n### `rust`\n\nConfigures Rust for this project and overrides the top-level [`rust`](/docs/config/toolchain#rust) setting.\n\n#### `version`\n\nDefines the explicit Rust\n[version/channel specification](/docs/concepts/toolchain#version-specification) to use when running\ntasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  rust:    version: '1.68.0'\n```\n\n### `typescript`\n\n#### `includeProjectReferenceSources`v1.17.0\n\nOverrides the workspace-level\n[`includeProjectReferenceSources`](/docs/config/toolchain#includeprojectreferencesources) setting. Defaults to\nundefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    includeProjectReferenceSources: false\n```\n\n#### `includeSharedTypes`v1.17.0\n\nOverrides the workspace-level [`includeSharedTypes`](/docs/config/toolchain#includesharedtypes) setting.\nDefaults to undefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    includeSharedTypes: false\n```\n\n#### `routeOutDirToCache`\n\nOverrides the workspace-level [`routeOutDirToCache`](/docs/config/toolchain#routeoutdirtocache) setting.\nDefaults to undefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    routeOutDirToCache: false\n```\n\n#### `syncProjectReferences`\n\nOverrides the workspace-level [`syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting.\nDefaults to undefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    syncProjectReferences: false\n```\n\n#### `syncProjectReferencesToPaths`\n\nOverrides the workspace-level\n[`syncProjectReferencesToPaths`](/docs/config/toolchain#syncprojectreferencestopaths) setting. Defaults to\nundefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    syncProjectReferencesToPaths: false\n```\n\n## `workspace`\n\n### `inheritedTasks`\n\nProvides a layer of control when inheriting tasks from [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n#### `exclude`\n\nThe optional `exclude` setting permits a project to exclude specific tasks from being inherited. It\naccepts a list of strings, where each string is the name of a global task to exclude.\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    # Exclude the inherited `test` task for this project    exclude: ['test']\n```\n\nExclusion is applied after inclusion and before renaming.\n\n#### `include`\n\nThe optional `include` setting permits a project to only include specific inherited tasks (works\nlike an allow/white list). It accepts a list of strings, where each string is the name of a global\ntask to include.\n\nWhen this field is not defined, the project will inherit all tasks from the global project config.\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    # Include *no* tasks (works like a full exclude)    include: []    # Only include the `lint` and `test` tasks for this project    include:      - 'lint'      - 'test'\n```\n\nInclusion is applied before exclusion and renaming.\n\n#### `rename`\n\nThe optional `rename` setting permits a project to rename the inherited task within the current\nproject. It accepts a map of strings, where the key is the original name (found in the global\nproject config), and the value is the new name to use.\n\nFor example, say we have 2 tasks in the global project config called `buildPackage` and\n`buildApplication`, but we only need 1, and since we're an application, we should omit and rename.\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['buildPackage']    rename:      buildApplication: 'build'\n```\n\nRenaming occurs after inclusion and exclusion.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 1474,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__config__tasks.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/config/tasks\n- Keywords: moon, moonrepo, docs, monorepo, build, config, tasks\n- Summary: The `.moon/tasks/**/*` files configures file groups and tasks that are inherited by every project\n----\n\nSource: https://moonrepo.dev/docs/config/tasks\n\n# .moon/tasks\n\nThe `.moon/tasks/**/*` files configures file groups and tasks that are inherited by every project\nin the workspace based on inheritance conditions.\n[Learn more about task inheritance!](/docs/concepts/task-inheritance)\n\nProjects can override or merge with these settings within their respective [`moon.yml`](/docs/config/project).\n\n## `extends`\n\nDefines one or many external `.moon/tasks/all.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/tasks/all.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/tasks/all.yml'\n```\n\ncaution\n\nFor map-based settings, `fileGroups` and `tasks`, entries from both the extended configuration and\nlocal configuration are merged into a new map, with the values of the local taking precedence. Map\nvalues are not deep merged!\n\n## `fileGroups`\n\nFor more information on file group configuration, refer to the\n[`fileGroups`](/docs/config/project#filegroups) section in the [`moon.yml`](/docs/config/project) doc.\n\nDefines [file groups](/docs/concepts/file-group) that will be inherited by projects, and also enables\nenforcement of organizational patterns and file locations. For example, encourage projects to place\nsource files in a `src` folder, and all test files in `tests`.\n\n.moon/tasks/all.yml\n\n```\nfileGroups:  configs:    - '*.config.{js,cjs,mjs}'    - '*.json'  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*'    - '**/__tests__/**/*'  assets:    - 'assets/**/*'    - 'images/**/*'    - 'static/**/*'    - '**/*.{scss,css}'\n```\n\ninfo\n\nFile paths and globs used within a file group are relative from the inherited project's root, and\nnot the workspace root.\n\n## `implicitDeps`\n\nDefines task [`deps`](/docs/config/project#deps) that are implicitly inserted into all inherited tasks within\na project. This is extremely useful for pre-building projects that are used extensively throughout\nthe repo, or always building project dependencies. Defaults to an empty list.\n\n.moon/tasks/all.yml\n\n```\nimplicitDeps:  - '^:build'\n```\n\ninfo\n\nImplicit dependencies are always inherited, regardless of the [`mergeDeps`](/docs/config/project#mergedeps)\noption.\n\n## `implicitInputs`\n\nDefines task [`inputs`](/docs/config/project#inputs) that are implicitly inserted into all inherited tasks\nwithin a project. This is extremely useful for the \"changes to these files should always trigger a\ntask\" scenario.\n\nLike `inputs`, file paths/globs defined here are relative from the inheriting project.\n[Project and workspace relative file patterns](/docs/concepts/file-pattern#project-relative) are\nsupported and encouraged.\n\n.moon/tasks/node.yml\n\n```\nimplicitInputs:  - 'package.json'\n```\n\ninfo\n\nImplicit inputs are always inherited, regardless of the [`mergeInputs`](/docs/config/project#mergeinputs)\noption.\n\n## `inheritedBy`v2.0.0\n\nA map of conditions that must be met for the configuration within the file to be inherited by a\nproject. When this field is not defined, or is an empty map, the configuration will be inherited by\nall projects.\n\n.moon/tasks/custom.yml\n\n```\ninheritedBy:  # Project belongs to either javascript or typescript toolchain, but not the ruby toolchain  toolchains:    or: ['javascript', 'typescript']    not: ['ruby']  # And project is either a frontend or backend stack  stacks: ['frontend', 'backend']  # And project is either a library or tool layer  layers: ['library', 'tool']\n```\n\ninfo\n\nView the [official task inheritance guide](/docs/concepts/task-inheritance) for more information!\n\n## `tasks`\n\nFor more information on task configuration, refer to the [`tasks`](/docs/config/project#tasks) section in the\n[`moon.yml`](/docs/config/project) doc.\n\nAs mentioned in the link above, [tasks](/docs/concepts/task) are actions that are ran within the\ncontext of a project, and commonly wrap a command. For most workspaces, every project should have\nlinting, typechecking, testing, code formatting, so on and so forth. To reduce the amount of\nboilerplate that every project would require, this setting offers the ability to define tasks that\nare inherited by many projects within the workspace, but can also be overridden per project.\n\n.moon/tasks/all.yml\n\n```\ntasks:  format:    command: 'prettier --check .'  lint:    command: 'eslint --no-error-on-unmatched-pattern .'  test:    command: 'jest --passWithNoTests'  typecheck:    command: 'tsc --build'\n```\n\ninfo\n\nRelative file paths and globs used within a task are relative from the inherited project's root, and\nnot the workspace root.\n\n## `taskOptions`v1.20.0\n\nFor more information on task options, refer to the [`options`](/docs/config/project#options) section in the\n[`moon.yml`](/docs/config/project) doc.\n\nLike [tasks](#tasks), this setting allows you to define task options that will be inherited by all\ntasks within the configured file, and by all project-level inherited tasks. This setting is the 1st\nlink in the inheritance chain, and can be overridden within each task.\n\n.moon/tasks/all.yml\n\n```\ntaskOptions:  # Never cache builds  cache: false  # Always re-run flaky tests  retryCount: 2tasks:  build:    # ...    options:      # Override the default cache setting      cache: true\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 156,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__config__template.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/config/template\n- Keywords: moon, moonrepo, docs, monorepo, build, config, template\n- Summary: The `template.yml` file configures metadata and variables for a template,\n----\n\nSource: https://moonrepo.dev/docs/config/template\n\n# template\n\nThe `template.yml` file configures metadata and variables for a template,\n[used by the generator](/docs/guides/codegen), and must exist at the root of a named template folder.\n\n## `id`v1.23.0\n\nOverrides the name (identifier) of the template, instead of inferring the name from the template\nfolder. Be aware that template names must be unique across the workspace, and across all template\nlocations that have been configured in [`generator.templates`](/docs/config/workspace#templates).\n\ntemplate.yml\n\n```\nid: 'npm-package'\n```\n\n## `title`Required\n\nA human readable title that will be displayed during the [`moon generate`](/docs/commands/generate)\nprocess.\n\ntemplate.yml\n\n```\ntitle: 'npm package'\n```\n\n## `description`Required\n\nA description of why the template exists, what its purpose is, and any other relevant information.\n\ntemplate.yml\n\n```\ndescription: |  Scaffolds the initial structure for an npm package,  including source and test folders, a package.json, and more.\n```\n\n## `destination`v1.19.0\n\nAn optional file path in which this template should be generated into. This provides a mechanism for\nstandardizing a destination location, and avoids having to manually pass a destination to\n[`moon generate`](/docs/commands/generate).\n\nIf the destination is prefixed with `/`, it will be relative from the workspace root, otherwise it\nis relative from the current working directory.\n\ntemplate.yml\n\n```\ndestination: 'packages/[name]'\n```\n\nThis setting supports [template variables](#variables) through `[varName]` syntax. Learn more in\nthe [code generation documentation](/docs/guides/codegen#interpolation).\n\n## `extends`v1.19.0\n\nOne or many other templates that this template should extend. Will deeply inherit all template files\nand variables.\n\ntemplate.yml\n\n```\nextends: ['base', 'configs']\n```\n\n## `variables`\n\nA mapping of variables that will be interpolated into all template files and file system paths when\n[rendering with Tera](https://tera.netlify.app/docs/#variables). The map key is the variable name\n(in camelCase or snake_case), while the value is a configuration object, as described with the\nsettings below.\n\ntemplate.yml\n\n```\nvariables:  name:    type: 'string'    default: ''    required: true    prompt: 'Package name?'\n```\n\n### `type`Required\n\nThe type of value for the variable. Accepts `array`, `boolean`, `string`, `object`, `number`, or\n`enum`. Floats are not supported, use strings instead.\n\nFor arrays and objects, the value of each member must be a JSON compatible type.\n\n### `internal`v1.23.0\n\nMarks a variable as internal only, which avoids the variable value being overwritten by command line\narguments.\n\n### `order`v1.23.0\n\nThe order in which the variable will be prompted to the user. By default, variables are prompted in\nthe order they are defined in the `template.yml` file.\n\n### Primitives & collections\n\nYour basic primitives: boolean, numbers, strings, and collections: arrays, objects.\n\n- array\n- boolean\n- number\n- object\n- string\n\ntemplate.yml\n\n```\nvariables:  type:    type: 'array'    prompt: 'Type?'    default: ['app', 'lib']\n```\n\ntemplate.yml\n\n```\nvariables:  private:    type: 'boolean'    prompt: 'Private?'    default: false\n```\n\ntemplate.yml\n\n```\nvariables:  age:    type: 'number'    prompt: 'Age?'    default: 0    required: true\n```\n\ntemplate.yml\n\n```\nvariables:  metadata:    type: 'object'    prompt: 'Metadata?'    default:      type: 'lib'      dev: true\n```\n\ntemplate.yml\n\n```\nvariables:  name:    type: 'string'    prompt: 'Name?'    required: true\n```\n\n### `default`Required\n\nThe default value of the variable. When `--defaults` is passed to\n[`moon generate`](/docs/commands/generate) or [`prompt`](#prompt) is not defined, the default value\nwill be used, otherwise the user will be prompted to enter a custom value.\n\n### `prompt`\n\nWhen defined, will prompt the user with a message in the terminal to input a custom value, otherwise\n[`default`](#default) will be used.\n\nFor arrays and objects, a valid JSON string must be provided as the value.\n\n### `required`\n\nMarks the variable as required during prompting only. For arrays, strings, and objects, will error\nfor empty values (`''`). For numbers, will error for zero's (`0`).\n\n### Enums\n\nAn enum is an explicit list of string values that a user can choose from.\n\ntemplate.yml\n\n```\nvariables:  color:    type: 'enum'    values: ['red', 'green', 'blue', 'purple']    default: 'purple'    prompt: 'Favorite color?'\n```\n\n### `default`\n\nThe default value of the variable. When `--defaults` is passed to\n[`moon generate`](/docs/commands/generate) or [`prompt`](#prompt) is not defined, the default value\nwill be used, otherwise the user will be prompted to enter a custom value.\n\nFor enums, the default value can be a string when [`multiple`](#multiple) is false, or a string or\nan array of strings when `multiple` is true. Furthermore, each default value must exist in the\n[`values`](#values) list.\n\ntemplate.yml\n\n```\n# Singlevariables:  color:    type: 'enum'    values: ['red', 'green', 'blue', 'purple']    default: 'purple'    prompt: 'Favorite color?'# Multiplevariables:  color:    type: 'enum'    values: ['red', 'green', 'blue', 'purple']    default: ['red', 'purple']    multiple: true    prompt: 'Favorite color?'\n```\n\n### `prompt`\n\nWhen defined, will prompt the user with a message in the terminal to input a custom value, otherwise\n[`default`](#default) will be used.\n\n### `multiple`\n\nAllows multiple values to be chosen during prompting. In the template, an array or strings will be\nrendered, otherwise when not-multiple, a single string will be.\n\n### `values`Required\n\nList of explicit values to choose from. Can either be defined with a string, which acts as a value\nand label, or as an object, which defines an explicit value and label.\n\ntemplate.yml\n\n```\nvariables:  color:    type: 'enum'    values:      - 'red'      # OR      - value: 'red'        label: 'Red '    # ...\n```\n\n## Frontmatter\n\nThe following settings are not available in `template.yml`, but can be defined as frontmatter at\nthe top of a template file. View the [code generation guide](/docs/guides/codegen#frontmatter) for more\ninformation.\n\n### `force`\n\nWhen enabled, will always overwrite a file of the same name at the destination path, and will bypass\nany prompting in the terminal.\n\n```\n---force: true---Some template content!\n```\n\n### `to`\n\nDefines a custom file path, relative from the destination root, in which to create the file. This\nwill override the file path within the template folder, and allow for conditional rendering and\nengine filters to be used.\n\n```\n{% set component_name = name | pascal_case %}---to: components/{{ component_name }}.tsx---export function {{ component_name }}() {  return\n;}\n```\n\n### `skip`\n\nWhen enabled, the template file will be skipped while writing to the destination path. This setting\ncan be used to conditionally render a file.\n\n```\n---skip: {{ name == \"someCondition\" }}---Some template content!\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 256,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__config__toolchain.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/config/toolchain\n- Keywords: moon, moonrepo, docs, monorepo, build, config, toolchain\n- Summary: The `.moon/toolchains.yml` file configures the toolchain and the workspace development environment.\n----\n\nSource: https://moonrepo.dev/docs/config/toolchain\n\n# .moon/toolchains\n\nThe `.moon/toolchains.yml` file configures the toolchain and the workspace development environment.\nThis file is optional.\n\nManaging tool version's within the toolchain ensures a deterministic environment across any machine\n(whether a developer, CI, or production machine).\n\n## `extends`\n\nDefines one or many external `.moon/toolchains.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/toolchains.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/toolchains.yml'\n```\n\ncaution\n\nSettings will be merged recursively for blocks, with values defined in the local configuration\ntaking precedence over those defined in the extended configuration.\n\n## `moon`v1.29.0\n\nConfigures how moon will receive information about latest releases and download locations.\n\n### `manifestUrl`\n\nDefines an HTTPS URL in which to fetch the current version information from.\n\n.moon/toolchains.yml\n\n```\nmoon:  manifestUrl: 'https://proxy.corp.net/moon/version'\n```\n\n### `downloadUrl`\n\nDefines an HTTPS URL in which the moon binary can be downloaded from. The download file name is\nhard-coded and will be appended to the provided URL.\n\nDefaults to downloading from GitHub: [https://github.com/moonrepo/moon/releases](https://github.com/moonrepo/moon/releases)\n\n.moon/toolchains.yml\n\n```\nmoon:  downloadUrl: 'https://github.com/moonrepo/moon/releases/latest/download'\n```\n\n## `proto`v1.39.0\n\nConfigures how moon integrates with and utilizes [proto](/proto).\n\n### `version`\n\nThe version of proto to install and run toolchains with. If proto or this version of proto has not\nbeen installed yet, it will be installed automatically when running a task.\n\n.moon/toolchains.yml\n\n```\nproto:  version: '0.51.0'\n```\n\n## Go\n\n## `go`v1.38.0\n\nRun `moon toolchain info go` for all available settings.\n\n## JavaScript\n\n## `javascript`v1.40.0\n\nRun `moon toolchain info javascript` for all available settings.\n\n## `bun`v1.40.0\n\nRun `moon toolchain info bun` for all available settings.\n\ninfo\n\nThis toolchain requires the [`javascript`](#javascript) toolchain to also be enabled.\n\n## `deno`v1.41.0\n\nRun `moon toolchain info deno` for all available settings.\n\ninfo\n\nThis toolchain requires the [`javascript`](#javascript) toolchain to also be enabled.\n\n## `node`v1.40.0\n\nRun `moon toolchain info node` for all available settings.\n\ninfo\n\nThis toolchain requires the [`javascript`](#javascript) toolchain to also be enabled.\n\n## `npm`v1.40.0\n\nRun `moon toolchain info npm` for all available settings.\n\ninfo\n\nThis toolchain requires the [`node`](#node) toolchain to also be enabled.\n\n## `pnpm`v1.40.0\n\nRun `moon toolchain info pnpm` for all available settings.\n\ninfo\n\nThis toolchain requires the [`node`](#node) toolchain to also be enabled.\n\n## `yarn`v1.40.0\n\nRun `moon toolchain info yarn` for all available settings.\n\ninfo\n\nThis toolchain requires the [`node`](#node) toolchain to also be enabled.\n\n## `typescript`\n\nRun `moon toolchain info typescript` for all available settings.\n\n## Pythonv1.30.0\n\ncaution\n\nPython support is currently a work in progress for v2!\n\n## `python`\n\nRun `moon toolchain info python` for all available settings.\n\n## Rust\n\n## `rust`v1.37.0\n\nRun `moon toolchain info rust` for all available settings.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 166,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__config__workspace.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/config/workspace\n- Keywords: moon, moonrepo, docs, monorepo, build, config, workspace\n- Summary: The `.moon/workspace.yml` file configures projects and services in the workspace. This file is\n----\n\nSource: https://moonrepo.dev/docs/config/workspace\n\n# .moon/workspace\n\nThe `.moon/workspace.yml` file configures projects and services in the workspace. This file is\nrequired.\n\n## `extends`\n\nDefines one or many external `.moon/workspace.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/workspace.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/workspace.yml'\n```\n\ninfo\n\nSettings will be merged recursively for blocks, with values defined in the local configuration\ntaking precedence over those defined in the extended configuration. However, the `projects` setting\ndoes not merge!\n\n## `projects`Required\n\nDefines the location of all [projects](/docs/concepts/project) within the workspace. Supports either a\nmanual map of projects (default), a list of globs in which to automatically locate projects, or\nboth.\n\ncaution\n\nProjects that depend on each other and form a cycle must be avoided! While we do our best to avoid\nan infinite loop and disconnect nodes from each other, there's no guarantee that tasks will run in\nthe correct order.\n\n### Using a map\n\nWhen using a map, each project must be manually configured and requires a unique\n[name](/docs/concepts/project#names) as the map key, where this name is used heavily on the command\nline and within the project graph for uniquely identifying the project amongst all projects. The map\nvalue (known as the project source) is a file system path to the project folder, relative from the\nworkspace root, and must be contained within the workspace boundary.\n\n.moon/workspace.yml\n\n```\nprojects:  admin: 'apps/admin'  apiClients: 'packages/api-clients'  designSystem: 'packages/design-system'  web: 'apps/web'\n```\n\n### Using globs\n\nIf manually mapping projects is too tedious or cumbersome, you may provide a list of\n[globs](/docs/concepts/file-pattern#globs) to automatically locate all project folders, relative from\nthe workspace root.\n\nWhen using this approach, the project name is derived from the project folder name, and is cleaned\nto our [supported characters](/docs/concepts/project#names), but can be customized with the\n[`id`](/docs/config/project#id) setting in [`moon.yml`](/docs/config/project). Furthermore, globbing does risk the\nchance of collision, and when that happens, we log a warning and skip the conflicting project from\nbeing configured in the project graph.\n\n.moon/workspace.yml\n\n```\nprojects:  - 'apps/*'  - 'packages/*'  # Only shared folders with a moon configuration  - 'shared/*/moon.yml'\n```\n\n### Using a map and globs\n\nFor those situations where you want to use both patterns, you can! The list of globs can be\ndefined under a `globs` field, while the map of projects under a `sources` field.\n\n.moon/workspace.yml\n\n```\nprojects:  globs:    - 'apps/*'    - 'packages/*'  sources:    www: 'www'\n```\n\nAdditionally, you can customize the format of project IDs for glob discovered projects. By default\nit inherits the fodler name, but this has a high chance of collision. Instead you can configure\n`globFormat` to use a different format, for example, using the full workspace relative path as the\nproject ID.\n\n.moon/workspace.yml\n\n```\nprojects:  globFormat: 'source-path'  globs:    - 'packages/**/moon.yml'\n```\n\n## `defaultProject`v2.0.0\n\nDefines the default project to focus on when no project scope is specified on the command line for\ntask targets.\n\n.moon/workspace.yml\n\n```\ndefaultProject: 'web'\n```\n\n## `codeowners`v1.8.0\n\nConfigures code owners (`CODEOWNERS`) integration across the entire workspace.\n\n### `globalPaths`\n\nThis setting defines file patterns and their owners at the workspace-level, and are applied to any\nmatching path, at any depth, within the entire workspace. This is useful for defining global or\nfallback owners when a granular [project-level path](/docs/config/project#paths) does not match or exist.\n\n.moon/workspace.yml\n\n```\ncodeowners:  globalPaths:    '*': ['@admins']    'config/': ['@infra']    '/.github/': ['@infra']\n```\n\n### `orderBy`\n\nThe order in which code owners, grouped by project, are listed in the `CODEOWNERS` file. Accepts\n\"file-source\" (default) or \"project-id\".\n\n.moon/workspace.yml\n\n```\ncodeowners:  orderBy: 'project-id'\n```\n\n### `sync`\n\nWill automatically generate a `CODEOWNERS` file by aggregating and syncing all project\n[`owners`](/docs/config/project#owners) in the workspace when a [target is run](/docs/concepts/target). The format\nand location of the `CODEOWNERS` file is based on the [`vcs.provider`](#provider) setting. Defaults\nto `false`.\n\n.moon/workspace.yml\n\n```\ncodeowners:  sync: true\n```\n\n## `constraints`\n\nConfigures constraints between projects that are enforced during project graph generation. This is\nalso known as project boundaries.\n\n### `enforceLayerRelationships`\n\nEnforces allowed relationships between a project and its dependencies based on the project's\n[`layer`](/docs/config/project#layer) and [`stack`](/docs/config/project#stack) settings. When a project depends on\nanother project of an invalid layer, a layering violation error will be thrown when attempting to\nrun a task.\n\nLayers are allowed to depend on lower layers in the same stack, but not higher layers. Additionally,\nlayers may depend on itself, excluding automations and applications. The following layers are\nstacked as such:\n\nLayer Description\n\n`automation` An automated testing suite, like E2E, integration, or visual tests.\n\n`application` An application of any kind.\n\n`tool` An internal tool, CLI, one-off script, etc.\n\n`library` A self-contained, shareable, and publishable set of code.\n\n`scaffolding` Templates or generators for scaffolding.\n\n`configuration` Configuration files or infrastructure.\n\n`unknown` When not configured.\n\nWhen the project `stack` setting is defined, it alters these rules to allow these kinds of\nrelationships. For example, a frontend application can depend on a backend application, but not\nanother frontend application.\n\n.moon/workspace.yml\n\n```\nconstraints:  enforceLayerRelationships: false\n```\n\nProjects with an unconfigured or unknown layer are ignored during enforcement.\n\n### `tagRelationships`\n\nEnforces allowed relationships between a project and its dependencies based on the project's\n[`tags`](/docs/config/project#tags) setting. This works in a similar fashion to `enforceLayerRelationships`,\nbut gives you far more control over what these relationships look like.\n\nFor example, let's enforce that Next.js projects using the `next` tag can only depend on React\nprojects using the `react` tag. If a dependency does not have one of the configured required tags,\nin this case `react`, an error will occur.\n\n.moon/workspace.yml\n\n```\nconstraints:  tagRelationships:    next: ['react']\n```\n\nOn the project side, we would configure [`moon.yml`](/docs/config/project#tags) like so:\n\napp/moon.yml\n\n```\ntags: ['next']dependsOn: ['components']\n```\n\npackages/components/moon.yml\n\n```\ntags: ['react']\n```\n\n## `docker`v1.27.0\n\nConfigures Docker integration for the entire workspace.\n\n### `prune`\n\nConfigures aspects of the Docker pruning process when\n[`moon docker prune`](/docs/commands/docker/prune) is executed.\n\n#### `deleteVendorDirectories`\n\nAutomatically delete vendor directories (package manager dependencies, build targets, etc) while\npruning. For example, `node_modules` for JavaScript, or `target` for Rust. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\ndocker:  prune:    deleteVendorDirectories: false\n```\n\nThis process happens before toolchain dependencies are installed.\n\n#### `installToolchainDependencies`\n\nAutomatically install production dependencies for all required toolchain's of the focused projects\nwithin the Docker build. For example, `node_modules` for JavaScript. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\ndocker:  prune:    installToolchainDependencies: false\n```\n\nThis process happens after vendor directories are deleted.\n\n### `scaffold`\n\nConfigures aspects of the Docker scaffolding process when\n[`moon docker scaffold`](/docs/commands/docker/scaffold) is executed. Only applies to the\n[workspace skeleton](/docs/commands/docker/scaffold#workspace).\n\n#### `configsPhaseGlobs`\n\nList of globs in which to copy additional workspace-relative files into the `.moon/docker/workspace`\nskeleton. When not defined, does nothing.\n\n.moon/workspace.yml\n\n```\ndocker:  scaffold:    configsPhaseGlobs:      - '**/package.json'\n```\n\n## `experiments`v1.11.0\n\nEnable or disable experiments that alter core functionality.\n\nwarning\n\nExperiments are a work in progress and may be buggy. Please report any issues you encounter!\n\n### `fasterGlobWalk`v1.34.0\n\nUtilizes a new concurrent glob walking implementation that is on average, 1.5-2x faster than the\ncurrent implementation. Additionally, common globs are now cached for the duration of the process.\nDefaults to `true`.\n\n.moon/workspace.yml\n\n```\nexperiments:  fasterGlobWalk: true\n```\n\n### `gitV2`v1.34.0\n\nUtilizes a Git implementation, that has better support for submodules, subtrees, and workspaces.\nAdditionally, processes are parallized when applicable. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\nexperiments:  gitV2: true\n```\n\n## `generator`\n\nConfigures aspects of the template generator.\n\n### `templates`\n\nA list of paths in which templates can be located. Supports the following types of paths, and\ndefaults to `./templates`.\n\n- File system paths, relative from the workspace root.\n\n- Git repositories and a revision, prefixed with `git://`. v1.23.0\n\n- npm packages and a version, prefixed with `npm://`. v1.23.0\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates'    - 'file://./other/templates'    - 'git://github.com/moonrepo/templates#master'    - 'npm://@moonrepo/templates#1.2.3'\n```\n\nLearn more about this in the official\n[code generation guide](/docs/guides/codegen#configuring-template-locations)!\n\n## `hasher`\n\nConfigures aspects of the smart hashing layer.\n\n### `ignoreMissingPatterns`v1.10.0\n\nWhen [`hasher.warnOnMissingInputs`](#warnonmissinginputs) is enabled, moon will log a warning to the\nterminal that an input is missing. This is useful for uncovering misconfigurations, but can be quite\nnoisy when inputs are truly optional.\n\nTo ignore warnings for missing inputs, a list of [glob patterns](/docs/concepts/file-pattern#globs) can\nbe configured to filter and ignore files. Files are matched against workspace relative paths, so\nprefixing patterns with `**/` is suggested.\n\n.moon/workspace.yml\n\n```\nhasher:  ignoreMissingPatterns:    - '**/.eslintrc.*'    - '**/*.config.*'\n```\n\n### `ignorePatterns`v1.10.0\n\nA list of [glob patterns](/docs/concepts/file-pattern#globs) used to filter and ignore files during the\ninputs hashing process. Files are matched against workspace relative paths, so prefixing patterns\nwith `**/` is suggested.\n\n.moon/workspace.yml\n\n```\nhasher:  ignorePatterns:    - '**/*.png'\n```\n\n### `optimization`\n\nDetermines the optimization level to utilize when hashing content before running targets.\n\n- `accuracy` (default) - When hashing dependency versions, utilize the resolved value in the lockfile. This requires parsing the lockfile, which may reduce performance.\n\n- `performance` - When hashing dependency versions, utilize the value defined in the manifest. This is typically a version range or requirement.\n\n.moon/workspace.yml\n\n```\nhasher:  optimization: 'performance'\n```\n\n### `walkStrategy`\n\nDefines the file system walking strategy to utilize when discovering inputs to hash.\n\n- `glob` - Walks the file system using glob patterns.\n\n- `vcs` (default) - Calls out to the [VCS](#vcs) to extract files from its working tree.\n\n.moon/workspace.yml\n\n```\nhasher:  walkStrategy: 'glob'\n```\n\n### `warnOnMissingInputs`\n\nWhen enabled, will log warnings to the console when attempting to hash an input that does not exist.\nThis is useful in uncovering misconfigured tasks. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\nhasher:  warnOnMissingInputs: false\n```\n\n## `notifier`\n\nConfigures how moon notifies and interacts with a developer or an external system.\n\n### `terminalNotifications`v1.38.0\n\nWhen defined, will display OS notifications for action pipeline events when running commands from a\nterminal. Supports the following values:\n\n- `always` - Display on pipeline success and failure.\n\n- `failure` - Display on pipeline failure only.\n\n- `success` - Display on pipeline success only.\n\n- `task-failure` - Display for each task failure.\n\n.moon/workspace.yml\n\n```\nnotifier:  terminalNotifications: 'always'\n```\n\n### `webhookUrl`\n\nDefines an HTTPS URL that all pipeline events will be posted to. View the\n[webhooks guide for more information](/docs/guides/webhooks) on available events.\n\n.moon/workspace.yml\n\n```\nnotifier:  webhookUrl: 'https://api.company.com/some/endpoint'\n```\n\n### `acknowledge`\n\nWhen enabled, webhook notifier will wait for request result and validates the return code for 2xx.\nDefaults to `false`.\n\nwarning\n\nActivating this setting will slow down your pipeline, because every webhook request will be\nevaluated!\n\n.moon/workspace.yml\n\n```\nnotifier:  webhookUrl: 'https://api.company.com/some/endpoint'  webhookAcknowledge: true\n```\n\n## `pipeline`\n\nConfigures aspects of task running and the action pipeline.\n\n### `autoCleanCache`v1.24.0\n\nAutomatically cleans cached artifacts older than [`cacheLifetime`](#cachelifetime) from the cache\ndirectory (`.moon/cache`) after every run. This is useful for keeping the cache directory lean.\nDefaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  autoCleanCache: false\n```\n\n### `cacheLifetime`\n\nThe maximum lifetime of cached artifacts before they're marked as stale and automatically removed by\nthe action pipeline. Defaults to \"7 days\". This field requires an integer and a timeframe unit that\ncan be [parsed as a duration](https://docs.rs/humantime/2.1.0/humantime/fn.parse_duration.html).\n\n.moon/workspace.yml\n\n```\npipeline:  cacheLifetime: '24 hours'\n```\n\n### `inheritColorsForPipedTasks`\n\nForce colors to be inherited from the current terminal for all tasks that are ran as a child process\nand their output is piped to the action pipeline. Defaults to `true`.\n[View more about color handling in moon](/docs/commands/overview#colors).\n\n.moon/workspace.yml\n\n```\npipeline:  inheritColorsForPipedTasks: true\n```\n\n### `installDependencies`v1.34.0\n\nWhen enabled, runs the\n[`InstallWorkspaceDeps` and `InstallProjectDeps` actions](/docs/how-it-works/action-graph#install-dependencies)\nwithin the pipeline before running an applicable task. Installation is determined based on changed\nmanifests and lockfiles. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  installDependencies: false\n```\n\nInstead of a boolean, a list of toolchain IDs can be provided to only allow those toolchains to\ninstall dependencies.\n\n.moon/workspace.yml\n\n```\npipeline:  installDependencies: ['node']\n```\n\n### `killProcessThreshold`v1.32.1\n\nThreshold in milliseconds in which to force kill running child processes after the pipeline receives\nan external signal (like `SIGINT` or `SIGTERM`). A value of 0 will not kill the process and let them\nrun to completion. Defaults to `2000` (2 seconds).\n\n.moon/workspace.yml\n\n```\npipeline:  killProcessThreshold: 5000\n```\n\n### `logRunningCommand`\n\nWhen enabled, will log the task's command, resolved arguments, and working directory when a target\nis ran. Defaults to `false`.\n\n.moon/workspace.yml\n\n```\npipeline:  logRunningCommand: true\n```\n\n### `syncProjects`v1.34.0\n\nWhen enabled, runs the [`SyncProject` action](/docs/how-it-works/action-graph#sync-project) within the\npipeline before running an applicable task. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  syncProjects: false\n```\n\nInstead of a boolean, a list of project IDs can be provided to only sync those projects.\n\n.moon/workspace.yml\n\n```\npipeline:  syncProjects: ['app']\n```\n\nThe [`moon sync projects`](/docs/commands/sync/projects) command can be executed to manually sync\nprojects.\n\n### `syncWorkspace`v1.34.0\n\nWhen enabled, runs the [`SyncWorkspace` action](/docs/how-it-works/action-graph#sync-workspace) within\nthe pipeline before all other actions. This syncing includes operations such as codeowners, VCS\nhooks, and more. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  syncWorkspace: false\n```\n\nThe [`moon sync ...`](/docs/commands/sync) sub-commands can be executed to manually sync features.\n\n## `remote`v1.30.0\n\nConfigures a remote service, primarily for cloud-based caching of artifacts. Learn more about this\nin the [remote caching](/docs/guides/remote-cache) guide.\n\n### `api`v1.32.0\n\nThe API format of the remote server. This format dictates which type of client moon uses for\ncommunicating with. Supports the following:\n\n- `grpc` (default) - Uses the gRPC API: [https://github.com/bazelbuild/remote-apis](https://github.com/bazelbuild/remote-apis)\n\n- `http` - Uses the HTTP API: [https://bazel.build/remote/caching#http-caching](https://bazel.build/remote/caching#http-caching)\n\n.moon/workspace.yml\n\n```\nremote:  api: 'grpc'\n```\n\n### `auth`v1.32.0\n\nConfigures authorization and authentication level features of our remote clients.\n\n#### `headers`v1.32.0\n\nA mapping of HTTP headers to include in all requests to the remote server. These headers are applied\nto all [API formats and protocols](#api), not just HTTP.\n\n.moon/workspace.yml\n\n```\nremote:  auth:    headers:      'X-Custom-Header': 'value'\n```\n\n#### `token`v1.32.0\n\nThe name of an environment variable in which to extract a token for\n[Bearer HTTP authorization](https://swagger.io/docs/specification/v3_0/authentication/bearer-authentication/).\nAn `Authorization` HTTP header will be included in all requests to the remote server.\n\nIf the token does not exist, or is not enabled, remote caching will be disabled.\n\n.moon/workspace.yml\n\n```\nremote:  auth:    token: 'ENV_VAR_NAME'\n```\n\n### `cache`\n\nConfigures aspects of the caching layer, primarily the action cache (AC) and content addressable\ncache (CAS).\n\n#### `compression`v1.31.0\n\nThe compression format to use when uploading/downloading blobs. Supports `none` and `zstd`, and\ndefaults to no compression (`identity` format in RE API).\n\n.moon/workspace.yml\n\n```\nremote:  cache:    compression: 'zstd'\n```\n\ninfo\n\nCompression is only applied to gRPC based APIs, not HTTP.\n\n#### `instanceName`\n\nA\n[unique identifier](https://github.com/bazelbuild/remote-apis/blob/main/build/bazel/remote/execution/v2/remote_execution.proto#L223)\nused to distinguish between the various instances on the host. This allows the same remote service\nto serve and partition multiple moon repositories. Defaults to `moon-outputs`.\n\n.moon/workspace.yml\n\n```\nremote:  cache:    instanceName: 'custom-dir-name'\n```\n\nWe suggest changing the instance name to the name of your repository!\n\n#### `localReadOnly`v1.40.0\n\nWhen enabled and developing locally, existing remote blobs will only be downloaded, but new local\nblobs will not be uploaded. Blobs will only be uploaded in CI environments.\n\n.moon/workspace.yml\n\n```\nremote:  cache:    localReadOnly: true\n```\n\n#### `verifyIntegrity`v1.36.0\n\nWhen downloading blobs, verify the digests/hashes in the response match the associated blob\ncontents. This will reduce performance but ensure partial or corrupted blobs won't cause failures.\nDefaults to `false`.\n\n.moon/workspace.yml\n\n```\nremote:  cache:    verifyIntegrity: true\n```\n\n### `host`\n\nThe host URL to communicate with when uploading and downloading artifacts. Supports both\n`grpc(s)://` and `http(s)://` protocols. This field is required!\n\n.moon/workspace.yml\n\n```\nremote:  host: 'grpcs://your-host.com:9092'\n```\n\n### `mtls`\n\nConnect to the host using server and client authentication with mTLS. This takes precedence over\nnormal TLS.\n\n.moon/workspace.yml\n\n```\nremote:  # ...  mtls:    caCert: 'certs/ca.pem'    clientCert: 'certs/client.pem'    clientKey: 'certs/client.key'    domain: 'your-host.com'\n```\n\n#### `assumeHttp2`\n\nIf true, assume that the host supports HTTP/2, even if it doesn't provide protocol negotiation via\nALPN.\n\n#### `caCert`\n\nA file path, relative from the workspace root, to the certificate authority PEM encoded X509\ncertificate (typically `ca.pem`).\n\n#### `clientCert`\n\nA file path, relative from the workspace root, to the client's PEM encoded X509 certificate\n(typically `client.pem`).\n\n#### `clientKey`\n\nA file path, relative from the workspace root, to the client's PEM encoded X509 private key\n(typically `client.key`).\n\n#### `domain`\n\nThe domain name in which to verify the TLS certificate.\n\n### `tls`\n\nConnect to the host using server-only authentication with TLS.\n\n.moon/workspace.yml\n\n```\nremote:  # ...  tls:    cert: 'certs/ca.pem'    domain: 'your-host.com'\n```\n\n#### `assumeHttp2`\n\nIf true, assume that the host supports HTTP/2, even if it doesn't provide protocol negotiation via\nALPN.\n\n#### `cert`\n\nA file path, relative from the workspace root, to the certificate authority PEM encoded X509\ncertificate (typically `ca.pem`).\n\n#### `domain`\n\nThe domain name in which to verify the TLS certificate.\n\n## `telemetry`\n\nWhen enabled, will check for a newer moon version and send anonymous usage data to the moonrepo\nteam. This data is used to improve the quality and reliability of the tool. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\ntelemetry: false\n```\n\n## `vcs`\n\nConfigures the version control system to utilize within the workspace (and repository). A VCS is\nrequired for determining touched (added, modified, etc) files, calculating file hashes, computing\naffected files, and much more.\n\n### `defaultBranch`\n\nDefines the default branch in the repository for comparing differences against. For git, this is\ntypically \"master\" (default) or \"main\".\n\n.moon/workspace.yml\n\n```\nvcs:  defaultBranch: 'master'\n```\n\n### `hooks`v1.9.0\n\nDefines a mapping of hooks to a list of commands to run when that event is triggered. There are no\nrestrictions to what commands can be run, but the binaries for each command must exist on each\nmachine that will be running hooks.\n\nFor Git, each [hook name](https://git-scm.com/docs/githooks#_hooks) must be a valid kebab-cased\nname. [Learn more about Git hooks](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks).\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    pre-commit:      - 'moon run :lint :format --affected --status=staged --no-bail'      - 'another-command'\n```\n\ninfo\n\nIf running `moon` commands directly, the `moon` binary must be installed globally!\n\n### `hookFormat`v1.29.0\n\nThe shell and file type in which generated hook files are formatted with. Supports the following:\n\n- `native` (default) - The format native to the current operating system. Bash on Unix, and PowerShell on Windows.\n\n- `bash` - Forces the format to Bash for all operating systems.\n\n.moon/workspace.yml\n\n```\nvcs:  hookFormat: 'bash'\n```\n\n### `client`\n\nDefines the VCS tool/binary that is being used for managing the repository. Accepts \"git\" (default).\nExpect more version control systems in the future!\n\n.moon/workspace.yml\n\n```\nvcs:  client: 'git'\n```\n\n### `provider`v1.8.0\n\nDefines the service provider that the repository is hosted on. Accepts \"github\" (default), \"gitlab\",\n\"bitbucket\", or \"other\".\n\n.moon/workspace.yml\n\n```\nvcs:  provider: 'github'\n```\n\n### `remoteCandidates`\n\n(Git only) Defines a list of remote candidates to query against to determine merge bases. Defaults\nto \"origin\" and \"upstream\".\n\n.moon/workspace.yml\n\n```\nvcs:  remoteCandidates:    - 'origin'    - 'upstream'\n```\n\n### `sync`v1.9.0\n\nWill automatically generate [hook scripts](#hooks) to `.moon/hooks` and sync the scripts to the\nlocal VCS checkout. The hooks format and location is based on the [`vcs.client`](#client) setting.\nDefaults to `false`.\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    # ...  sync: true\n```\n\ncaution\n\nWhen enabled, this will sync hooks for all users of the repository. For personal or small\nprojects, this may be fine, but for larger projects, this may be undesirable and disruptive!\n\n## `versionConstraint`\n\nDefines a version requirement for the currently running moon binary. This provides a mechanism for\nenforcing that the globally installed moon on every developers machine is using an applicable\nversion.\n\n.moon/workspace.yml\n\n```\nversionConstraint: '>=0.20.0'\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 882,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__create-project.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/create-project\n- Keywords: moon, moonrepo, docs, monorepo, build, create project\n- Summary: With a [workspace](/docs/setup-workspace), we can now house one or many [projects](/docs/concepts/project),\n----\n\nSource: https://moonrepo.dev/docs/create-project\n\n# Create a project\n\n3 min\n\nWith a [workspace](/docs/setup-workspace), we can now house one or many [projects](/docs/concepts/project),\nwith a project being an application, library, or tool. In the end, each project will have its own\nbuild layer, personal tasks, and custom configuration.\n\n## Declaring a project in the workspace\n\nAlthough a project may exist in your repository, it's not accessible from moon until it's been\nmapped in the [`projects`](/docs/config/workspace#projects) setting found in\n[`.moon/workspace.yml`](/docs/config/workspace). When mapping a project, we require a unique name for\nthe project, and a project source location (path relative from the workspace root).\n\nLet's say we have a frontend web application called \"client\", and a backend application called\n\"server\", our `projects` setting would look like the following.\n\n.moon/workspace.yml\n\n```\nprojects:  client: 'apps/client'  server: 'apps/server'\n```\n\nWe can now run [`moon project client`](/docs/commands/project) and\n[`moon project server`](/docs/commands/project) to display information about each project. If these\nprojects were not mapped, or were pointing to an invalid source, the command would throw an error.\n\nsuccess\n\nThe [`projects`](/docs/config/workspace#projects) setting also supports a list of globs, if you'd prefer\nto not manually curate the projects list!\n\n## Configuring a project\n\nA project can be configured in 1 of 2 ways:\n\n- Through the [`.moon/tasks/all.yml`](/docs/config/tasks) config file, which defines file groups and tasks that are inherited by all projects within the workspace. Perfect for standardizing common tasks like linting, typechecking, and code formatting.\n\n- Through the [`moon.yml`](/docs/config/project) config file, found at the root of each project, which defines files groups, tasks, dependencies, and more that are unique to that project.\n\nBoth config files are optional, and can be used separately or together, the choice is yours!\n\nNow let's continue with our client and server example above. If we wanted to configure both\nprojects, and define config that's also shared between the 2, we could do something like the\nfollowing:\n\n- Client\n- Server\n- Both (inherited)\n\napps/client/moon.yml\n\n```\ntasks:  build:    command: 'vite dev'    inputs:      - 'src/**/*'    outputs:      - 'dist'\n```\n\napps/server/moon.yml\n\n```\ntasks:  build:    command: 'babel src --out-dir build'    inputs:      - 'src/**/*'    outputs:      - 'build'\n```\n\n.moon/tasks/all.yml\n\n```\ntasks:  format:    command: 'prettier --check .'  lint:    command: 'eslint --no-error-on-unmatched-pattern .'  test:    command: 'jest --passWithNoTests .'  typecheck:    command: 'tsc --build'\n```\n\n### Adding optional metadata\n\nWhen utilizing moon in a large monorepo or organization, ownership becomes very important, but also\ndifficult to maintain. To combat this problem, moon supports the\n[`project`](/docs/config/project#project) field within a project's [`moon.yml`](/docs/config/project)\nconfig.\n\nThis field is optional by default, but when defined it provides metadata about the project,\nspecifically around team ownership, which developers maintain the project, where to discuss it, and\nmore!\n\nFurthermore, we also support the [`layer`](/docs/config/project#layer) and\n[`language`](/docs/config/project#language) settings for a more granular breakdown of what exists in the\nrepository.\n\n/moon.yml\n\n```\nlayer: 'tool'language: 'typescript'project:  name: 'moon'  description: 'A repo management tool.'  channel: '#moon'  owner: 'infra.platform'  maintainers: ['miles.johnson']\n```\n\n## Next steps\n\n[Setup toolchain](/docs/setup-toolchain)[Configure `.moon/workspace.yml` further](/docs/config/workspace)[Configure `.moon/tasks/all.yml` further](/docs/config/tasks)[Configure `moon.yml` further](/docs/config/project)[Learn about projects](/docs/concepts/project)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 113,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__create-task.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/create-task\n- Keywords: moon, moonrepo, docs, monorepo, build, create task\n- Summary: The primary focus of moon is a task runner, and for it to operate in any capacity, it requires tasks\n----\n\nSource: https://moonrepo.dev/docs/create-task\n\n# Create a task\n\n6 min\n\nThe primary focus of moon is a task runner, and for it to operate in any capacity, it requires tasks\nto run. In moon, a task is a binary or system command that is ran as a child process within the\ncontext of a project (is the current working directory). Tasks are defined per project with\n[`moon.yml`](/docs/config/project), or inherited by many projects with\n[`.moon/tasks/all.yml`](/docs/config/tasks), but can also be inferred from a language's ecosystem\n([we'll talk about this later](/docs/migrate-to-moon)).\n\ntip\n\nChange the language dropdown at the top right to switch the examples!\n\n## Configuring a task\n\nMost  if not all projects  utilize the same core tasks: linting, testing, code formatting,\ntypechecking, and building. Because these are so universal, let's implement the build task within\na project using [`moon.yml`](/docs/config/project).\n\nBegin by creating the `moon.yml` file at the root of a project and add `build` to the\n[`tasks`](/docs/config/project#tasks) field, with a [`command`](/docs/config/project#command) parameter.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build'\n```\n\nBy itself, this isn't doing much, so let's add some arguments. Arguments can also be defined with\nthe [`args`](/docs/config/project#args) setting.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build --mode production --no-stats'\n```\n\nWith this, the task can be ran from the command line with\n[`moon run :build`](/docs/commands/run)! This is tasks in its most simplest form, but continue\nreading on how to take full advantage of our task runner.\n\n### Inputs\n\nOur task above works, but isn't very efficient as it always runs, regardless of what has changed\nsince the last time it has ran. This becomes problematic in continuous integration environments, not\njust locally.\n\nTo mitigate this problem, moon provides a system known as inputs, which are file paths, globs, and\nenvironment variables that are used by the task when it's ran. moon will use and compare these\ninputs to calculate whether to run, or to return the previous run state from the cache.\n\nIf you're a bit confused, let's demonstrate this by expanding the task with the\n[`inputs`](/docs/config/project#inputs) setting.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build --mode production --no-stats'    inputs:      - 'src/**/*'      - 'webpack.config.js'      - '/webpack-shared.config.js'\n```\n\nThis list of inputs may look complicated, but they are merely run checks. For example, when moon\ndetects a change in...\n\n- Any files within the `src` folder, relative from the project's root.\n\n- A config file in the project's root.\n\n- A shared config file in the workspace root (denoted by the leading `/`).\n\n...the task will be ran! If the change occurs outside of the project or outside the list of\ninputs, the task will not be ran.\n\ntip\n\nInputs are a powerful feature that can be fine-tuned to your project's need. Be as granular or open\nas you want, the choice is yours!\n\n### Outputs\n\nOutputs are the opposite of [inputs](#inputs), as they are files and folders that are created as a\nresult of running the task. With that being said, outputs are optional, as not all tasks require\nthem, and the ones that do are typically build related.\n\nNow why is declaring outputs important? For incremental builds and smart caching! When moon\nencounters a build that has already been built, it hydrates all necessary outputs from the cache,\nthen immediately exits. No more waiting for long builds!\n\nContinuing our example, let's route the built files and expand our task with the\n[`outputs`](/docs/config/project#outputs) setting.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build --mode production --no-stats --output-path @out(0)'    inputs:      - 'src/**/*'      - 'webpack.config.js'      - '/webpack-shared.config.js'    outputs:      - 'build'\n```\n\n## Depending on other tasks\n\nFor scenarios where you need run a task before another task, as you're expecting some repository\nstate or artifact to exist, can be achieved with the [`deps`](/docs/config/project#deps) setting, which\nrequires a list of [targets](/docs/concepts/target):\n\n- `:` - Full canonical target.\n\n- `~:` or `` - A task within the current project.\n\n- `^:` - A task from all [depended on projects](/docs/concepts/project#dependencies).\n\n/moon.yml\n\n```\ndependsOn:  # ...tasks:  build:    # ...    deps:      - '^:build'\n```\n\n## Using file groups\n\nOnce you're familiar with configuring tasks, you may notice certain inputs being repeated\nconstantly, like source files, test files, and configuration. To reduce the amount of boilerplate\nrequired, moon provides a feature known as [file groups](/docs/concepts/file-group), which enables\ngrouping of similar file types within a project using\n[file glob patterns or literal file paths](/docs/concepts/file-pattern).\n\nFile groups are defined with the [`fileGroups`](/docs/config/project#filegroups) setting, which maps a\nlist of file paths/globs to a group, like so.\n\n/moon.yml\n\n```\nfileGroups:  configs:    - '*.config.js'  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*'\n```\n\nWe can then replace the inputs in our task above with these new file groups using a syntax known as\n[tokens](/docs/concepts/token), specifically the [`@globs`](/docs/concepts/token#globs) and\n[`@files`](/docs/concepts/token#files) token functions. Tokens are an advanced feature, so please refer\nto their documentation for more information!\n\n/moon.yml\n\n```\nlanguage: 'javascript'fileGroups:  # ...tasks:  build:    command: 'webpack build --mode production --no-stats --output-path @out(0)'    inputs:      - '@globs(sources)'      - 'webpack.config.js'      - '/webpack-shared.config.js'    outputs:      - 'build'\n```\n\nWith file groups (and tokens), you're able to reduce the amount of configuration required and\nencourage certain file structures for consuming projects!\n\n## Next steps\n\n[Run a task](/docs/run-task)[Configure `.moon/tasks/all.yml` further](/docs/config/tasks)[Configure `moon.yml` further](/docs/config/project)[Learn about tasks](/docs/concepts/task)[Learn about tokens](/docs/concepts/token)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 170,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__editors.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/editors\n- Keywords: moon, moonrepo, docs, monorepo, build, editors\n- Summary: Documentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n----\n\nSource: https://moonrepo.dev/docs/editors\n\n- [Home](/)\n- [Editors](/docs/editors)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Editors\n\n[ VS CodeEnhance your VS Code experience with our integrated moon console! Whether you're a fan of the](/docs/editors/vscode)\n\n[template](/docs/config/template)\n\n[VS Code](/docs/editors/vscode)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 34,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__editors__vscode.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/editors/vscode\n- Keywords: moon, moonrepo, docs, monorepo, build, editors, vscode\n- Summary: Enhance your VS Code experience with our integrated moon console! Whether you're a fan of the\n----\n\nSource: https://moonrepo.dev/docs/editors/vscode\n\n# VS Code extension\n\nEnhance your VS Code experience with our integrated moon console! Whether you're a fan of the\ncommand line, or prefer interactive interfaces, our console will be a welcome experience.\n\nThis extension is in its early stages. Expect more advanced features in the future, like\nautocompletion, config validation, and more!\n\n## Views\n\nAll views are available within the moon sidebar. Simply click the moon icon in the left activity\nbar!\n\n### Projects\n\nThe backbone of moon is the projects view. In this view, all moon configured projects will be\nlisted, categorized by their [`layer`](/docs/config/project#layer), [`stack`](/docs/config/project#stack),\nand designated with their [`language`](/docs/config/project#language).\n\nEach project can then be expanded to view all available tasks. Tasks can be ran by clicking the ``\nicon, or using the command palette.\n\nThis view is available in both the \"Explorer\" and \"moon\" sidebars.\n\n### Tags\n\nSimilar to the projects view, the tags view displays projects grouped by their\n[`tags`](/docs/config/project#tags).\n\nThis view is only available in the \"moon\" sidebar.\n\n### Last run\n\nInformation about the last ran task will be displayed in a beautiful table with detailed stats.\n\nThis table displays all actions that were ran alongside the primary target(s). They are ordered\ntopologically via the action graph.\n\n## Features\n\n### YAML validation\n\nTo enable accurate validation of our YAML configuration files, you'll need to update the\n`yaml.schemas` setting in `.vscode/settings.json` to point to the local schemas at\n`.moon/cache/schemas`.\n\nThis can be automated by running the \"moon: Append YAML schemas configuration to settings\" in the\ncommand palette, after the extension has been installed.\n\n## Troubleshooting\n\nView the\n[official VS Code marketplace](https://marketplace.visualstudio.com/items?itemName=moonrepo.moon-console)\nfor more information on the extension, its commands, available settings, and more!\n\nIf you encounter a bug, or have a feature request, please submit them to the\n[moonrepo/dev](https://github.com/moonrepo/dev/tree/master/packages/vscode-extension) repository!\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 77,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__faq.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/faq\n- Keywords: moon, moonrepo, docs, monorepo, build, faq\n- Summary: The first incarnation of the name was a misspelling of monorepo (= moonrepo). This is where the\n----\n\nSource: https://moonrepo.dev/docs/faq\n\n# FAQ\n\n## General\n\n### Where did the name \"moon\" come from?\n\nThe first incarnation of the name was a misspelling of monorepo (= moonrepo). This is where the\ndomain moonrepo.dev came from, and our official company, moonrepo, Inc.\n\nHowever, moonrepo is quite a long name with many syllables, and as someone who prefers short 1\nsyllable words, moon was perfect. The word moon also has great symmetry, as you can see in our logo!\n\nBut that's not all... moon is also an acronym. It originally stood for monorepo,\norganization, orchestration, and notification tool. But since moon can also be used for\npolyrepos, we replaced monorepo with management (as shown on the homepage). This is a great\nacronym, as it embraces what moon is trying to solve:\n\n- Manage repos, projects, and tasks with ease.\n\n- Organize projects and the repo to scale.\n\n- Orchestrate tasks as efficiently as possible.\n\n- Notify developers and systems about important events.\n\n### Will moon support other languages?\n\nYes! Although we're focusing right now on the web ecosystem (Node.js, Rust, Go, PHP, Python, etc),\nwe've designed moon to be language agnostic and easily pluggable in the future. View our\n[supported languages for more information](/docs#supported-languages).\n\n### Will moon support continuous deployment?\n\nYes! We plan to integrate CD with the current build and CI system, but we are focusing on the latter\n2 for the time being. Why not start using moon today so that you can easily adopt CD when it's\nready?\n\n### What should be considered the \"source of truth\"?\n\nIf you're a frontend developer, you'll assume that a `package.json` is the source of truth for a\nproject, as it defines scripts, dependencies, and repo-local relations. While true, this breaks down\nwith additional tooling, like TypeScript project references, as now you must maintain\n`tsconfig.json` as well as `package.json`. The risk of these falling out of sync is high.\n\nThis problem is further exacerbated by more tooling, or additional programming languages. What if\nyour frontend project is dependent on a backend project? This isn't easily modeled in\n`package.json`. What if the backend project needs to be built and ran before running the frontend\nproject? Again, while not impossible, it's quite cumbersome to model in `package.json` scripts. So\non and so forth.\n\nmoon aims to solve this with a different approach, by standardizing all projects in the workspace on\n[`moon.yml`](/docs/config/project). With this, the `moon.yml` is the source of truth for each project,\nand provides us with the following:\n\n- The configuration is language agnostic. All projects are configured in a similar manner.\n\n- Tasks can reference other tasks easily. For example, npm scripts referencing rake tasks, and vice verse, is a non-ideal experience.\n\n- Dependencies defined with [`dependsOn`](/docs/config/project#dependson) use moon project names, and not language specific semantics. This field also easily populates the dependency/project graphs.\n\n- For JavaScript projects: `package.json` dependencies (via `dependsOn`) are kept in sync when [`node.syncProjectWorkspaceDependencies`](/docs/config/toolchain#syncprojectworkspacedependencies) is enabled.\n\n- `tsconfig.json` project references (via `dependsOn`) are kept in sync when [`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) is enabled.\n\nBy using moon as the source of truth, we can ensure a healthy repository, by accurately keeping\neverything in sync, and modifying project/language configuration to operate effectively.\n\ninfo\n\nWith all that being said, moon supports\n[implicit dependency scanning](/docs/concepts/project#dependencies), if you'd prefer to continue\nutilizing language specific functionality, instead of migrating entirely to moon.\n\n### How to stop moon formatting JSON and YAML files?\n\nTo ensure a healthy repository state, moon constantly modifies JSON and YAML files, specifically\n`package.json` and `tsconfig.json`. This may result in a different formatting style in regards to\nindentation. While there is no way to stop or turn off this functionality, we respect\n[EditorConfig](https://editorconfig.org/) during this process.\n\nCreate a root `.editorconfig` file to enforce a consistent syntax.\n\n.editorconfig\n\n```\n[*.{json,yaml,yml}]indent_style = spaceindent_size = 4\n```\n\n## Projects & tasks\n\n### How to pipe or redirect tasks?\n\nPiping (`|`) or redirecting (`>`) the output of one moon task to another moon task, whether via\nstdin or through `inputs`, is not possible within our pipeline (task runner) directly.\n\nHowever, we do support this functionality on the command line, or within a task itself, using the\n[`script`](/docs/config/project#script) setting.\n\nmoon.yml\n\n```\ntasks:  pipe:    script: 'gen-json | jq ...'\n```\n\nAlternativaly, you can wrap this script in something like a Bash file, and execute that instead.\n\nscripts/pipe.sh\n\n```\n#!/usr/bin/env bashgen-json | jq ...\n```\n\nmoon.yml\n\n```\ntasks:  pipe:    command: 'bash ./scripts/pipe.sh'\n```\n\n### How to run multiple commands within a task?\n\nOnly [`script`](/docs/config/project#script) based tasks can run multiple commands via `&&` or `;`\nsyntax. This is possible as we execute the entire script within a shell, and not directly with the\ntoolchain.\n\nmoon.yml\n\n```\ntasks:  multiple:    script: 'mkdir test && cd test && do-something'\n```\n\n### How to run tasks in a shell?\n\nBy default, all tasks run in a shell, based on the task's [`shell`](/docs/config/project#shell) option,\nas demonstrated below:\n\nmoon.yml\n\n```\ntasks:  # Runs in a shell  global:    command: 'some-command-on-path'  # Custom shells  unix:    command: 'bash -c some-command'    options:      shell: false  windows:    command: 'pwsh.exe -c some-command'    options:      shell: false\n```\n\n### Can we run other languages?\n\nYes! Although our toolchain only supports a few languages at this time, you can still run other\nlanguages within tasks by setting their [`toolchain`](/docs/config/project#toolchain) to \"system\".\nSystem tasks are an escape hatch that will use any command available on the current machine.\n\nmoon.yml\n\n```\ntasks:  # Ruby  lint:    command: 'rubocop'    toolchain: 'system'  # PHP  test:    command: 'phpunit tests'    toolchain: 'system'\n```\n\nHowever, because these languages are not supported directly within our toolchain, they will not\nreceive the benefits of the toolchain. Some of which are:\n\n- Automatic installation of the language. System tasks expect the command to already exist in the environment, which requires the user to manually install them.\n\n- Consistent language and dependency manager versions across all machines.\n\n- Built-in cpu and heap profiling (language specific).\n\n- Automatic dependency installs when the lockfile changes.\n\n- And many more.\n\n## JavaScript ecosystem\n\n### Can we use `package.json` scripts?\n\nWe encourage everyone to define tasks in a [`moon.yml`](/docs/config/project#tasks) file, as it allows\nfor additional metadata like `inputs`, `outputs`, `options`, and more. However, if you'd like to\nkeep using `package.json` scripts, enable the\n[`node.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts) setting.\n\nView the [official documentation](/docs/migrate-to-moon) for more information on this approach,\nincluding risks, disadvantages, and caveats.\n\n### Can moon version/publish packages?\n\nAt this time, no, as we're focusing on the build and test aspect of development. With that being\nsaid, this is something we'd like to support first-class in the future, but until then, we suggest\nthe following popular tools:\n\n- [Yarn releases](https://yarnpkg.com/features/release-workflow) (requires >= v2)\n\n- [Changesets](https://github.com/changesets/changesets)\n\n- [Lerna](https://github.com/lerna/lerna)\n\n### Why is npm/pnpm/yarn install running twice when running a task?\n\nmoon will automatically install dependencies in a project or in the workspace root (when using\npackage workspaces) when the lockfile or `package.json` has been modified since the last time the\ninstall ran. If you are running a task and multiple installs are occurring (and it's causing\nissues), it can mean 1 of 2 things:\n\n- If you are using package workspaces, then one of the projects triggering the install is not listed within the `workspaces` field in the root `package.json` (for npm and yarn), or in `pnpm-workspace.yml` (for pnpm).\n\n- If the install is triggering in a non-JavaScript related project, then this project is incorrectly listed as a package workspace.\n\n- If you don't want a package included in the workspace, but do want to install its dependencies, then it'll need its own lockfile.\n\n## Troubleshooting\n\n### How to resolve the \"version 'GLIBC_X.XX' not found\" error?\n\nThis is typically caused by running moon in an old environment, like Ubuntu 18, and the minimum\nrequired libc doesn't exist or is too old. Since moon is Rust based, we're unable to support all\nenvironments and versions perpetually, and will only support relatively modern environments.\n\nThere's not an easy fix to this problem, but there are a few potential solutions, from easiest to\nhardest:\n\n- Run moon in a Docker container/image that has the correct environment and libs. For example, the `node:latest` image.\n\n- Upgrade the environment to a newer one. For example, Ubuntu 18 -> 22.\n\n- Try and install a newer libc ([more information](https://stackoverflow.com/questions/72513993/how-install-glibc-2-29-or-higher-in-ubuntu-18-04)).\n\nFor more information on this problem as a whole,\n[refer to this in-depth article](https://kobzol.github.io/rust/ci/2021/05/07/building-rust-binaries-in-ci-that-work-with-older-glibc.html).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 242,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__ci.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/ci\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, ci\n- Summary: All companies and projects rely on continuous integration (CI) to ensure high quality code and to\n----\n\nSource: https://moonrepo.dev/docs/guides/ci\n\n# Continuous integration (CI)\n\nAll companies and projects rely on continuous integration (CI) to ensure high quality code and to\navoid regressions. Because this is such a critical piece of every developer's workflow, we wanted to\nsupport it as a first-class feature within moon, and we do just that with the\n[`moon ci`](/docs/commands/ci) command.\n\n## How it works\n\nThe `ci` command does all the heavy lifting necessary for effectively running jobs. It achieves this\nby automatically running the following steps:\n\n- Determines touched files by comparing the current HEAD against a base.\n\n- Determines all [targets](/docs/concepts/target) that need to run based on touched files.\n\n- Additionally runs affected [targets](/docs/concepts/target) dependencies and dependents.\n\n- Generates an action and dependency graph.\n\n- Installs the toolchain, Node.js, and npm dependencies.\n\n- Runs all actions within the graph using a thread pool.\n\n- Displays stats about all passing, failed, and invalid actions.\n\n## Configuring tasks\n\nBy default, all tasks run in CI, as you should always be building, linting, typechecking, testing,\nso on and so forth. However, this isn't always true, so this can be disabled on a per-task basis\nthrough the [`runInCI`](/docs/config/project#runinci) or [`local`](/docs/config/project#local) options.\n\n```\ntasks:  dev:    command: 'webpack server'    options:      runInCI: false    # Or    preset: 'server'\n```\n\ncaution\n\nThis option must be set to false for tasks that spawn a long-running or never-ending process, like\nHTTP or development servers. To help mitigate this, tasks named `dev`, `start`, or `serve` are false\nby default. This can be easily controlled with the [`local`](/docs/config/project#local) setting.\n\n## Integrating\n\nThe following examples can be referenced for setting up moon and its CI workflow in popular\nproviders. For GitHub, we're using our\n[`setup-toolchain` action](https://github.com/moonrepo/setup-toolchain) to install moon. For other\nproviders, we assume moon is an npm dependency and must be installed with Node.js.\n\n- GitHub\n- Buildkite\n- CircleCI\n- TravisCI\n\n.github/workflows/ci.yml\n\n```\nname: 'Pipeline'on:  push:    branches:      - 'master'  pull_request:jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      - uses: 'actions/checkout@v4'        with:          fetch-depth: 0      - uses: 'moonrepo/setup-toolchain@v0'      - run: 'moon ci'\n```\n\n.buildkite/pipeline.yml\n\n```\nsteps:  - label: 'CI'    commands:      - 'yarn install --immutable'      - 'moon ci'\n```\n\n.circleci/config.yml\n\n```\nversion: 2.1orbs:  node: 'circleci/node@5.0.2'jobs:  ci:    docker:      - image: 'cimg/base:stable'    steps:      - checkout      - node/install:          install-yarn: true          node-version: '16.13'      - node/install-packages:          check-cache: 'always'          pkg-manager: 'yarn-berry'      - run: 'moon ci'workflows:  pipeline:    jobs:      - 'ci'\n```\n\n.travis.yml\n\n```\nlanguage: node_jsnode_js:  - 16cache: yarnscript: 'moon ci'\n```\n\n## Choosing targetsv1.14.0\n\nBy default `moon ci` will run all tasks from all projects that are affected by touched files and\nhave the [`runInCI`](/docs/config/project#runinci) task option enabled. This is a great catch-all\nsolution, but may not vibe with your workflow or requirements.\n\nIf you'd prefer more control, you can pass a list of targets to `moon ci`, instead of moon\nattempting to detect them. When providing targets, `moon ci` will still only run them if affected by\ntouched files, but will still filter with the `runInCI` option.\n\n```\n# Run all builds$ moon ci :build# In another job, run tests$ moon ci :test :lint\n```\n\n## Comparing revisions\n\nBy default the command will attempt to detect the base and head revisions automatically based on the\ncurrent CI provider (powered by the [`ci_env`](https://github.com/milesj/rust-cicd-env) Rust crate).\nIf nothing was detected, this will fallback to the configured\n[`vcs.defaultBranch`](/docs/config/workspace#defaultbranch) for the base revision, and `HEAD` for the\nhead revision.\n\nThese values can be customized with the `--base` and `--head` command line options, or the\n`MOON_BASE` and `MOON_HEAD` environment variables, which takes highest precedence.\n\n```\n$ moon ci --base  --head # Or$ MOON_BASE= MOON_HEAD= moon ci\n```\n\n## Parallelizing tasks\n\nIf your CI environment supports sharding across multiple jobs, then you can utilize moon's built in\nparallelism by passing `--jobTotal` and `--job` options. The `--jobTotal` option is an integer of\nthe total number of jobs available, and `--job` is the current index (0 based) amongst the total.\n\nWhen these options are passed, moon will only run affected [targets](/docs/concepts/target) based on\nthe current job slice.\n\n- GitHub\n- Buildkite\n- CircleCI\n- TravisCI\n\nGitHub Actions do not support native parallelism, but it can be emulated using it's matrix.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    # ...    strategy:      matrix:        index: [0, 1]    steps:      # ...      - run: 'moon ci --job ${{ matrix.index }} --jobTotal 2'\n```\n\n- [Documentation](https://docs.github.com/en/actions/using-jobs/using-a-matrix-for-your-jobs)\n\n.buildkite/pipeline.yml\n\n```\n# ...steps:  - label: 'CI'    parallelism: 10    commands:      # ...      - 'moon ci --job $$BUILDKITE_PARALLEL_JOB --jobTotal $$BUILDKITE_PARALLEL_JOB_COUNT'\n```\n\n- [Documentation](https://buildkite.com/docs/tutorials/parallel-builds#parallel-jobs)\n\n.circleci/config.yml\n\n```\n# ...jobs:  ci:    # ...    parallelism: 10    steps:      # ...      - run: 'moon ci --job $CIRCLE_NODE_INDEX --jobTotal $CIRCLE_NODE_TOTAL'\n```\n\n- [Documentation](https://circleci.com/docs/2.0/parallelism-faster-jobs/)\n\nTravisCI does not support native parallelism, but it can be emulated using it's matrix.\n\n.travis.yml\n\n```\n# ...env:  global:    - TRAVIS_JOB_TOTAL=2  jobs:    - TRAVIS_JOB_INDEX=0    - TRAVIS_JOB_INDEX=1script: 'moon ci --job $TRAVIS_JOB_INDEX --jobTotal $TRAVIS_JOB_TOTAL'\n```\n\n- [Documentation](https://docs.travis-ci.com/user/speeding-up-the-build/)\n\nYour CI environment may provide environment variables for these 2 values.\n\n## Caching artifacts\n\nWhen a CI pipeline reaches a certain scale, its run times increase, tasks are unnecessarily ran, and\nbuild artifacts are not shared. To combat this, we support [remote caching](/docs/guides/remote-cache), a\nmechanism where we store build artifacts in the cloud, and sync these artifacts to machines on\ndemand.\n\n### Manual persistence\n\nIf you'd prefer to not use remote caching at this time, you can cache artifacts yourself, by\npersisting the `.moon/cache/{hashes,outputs}` directories. All other files and folders in\n`.moon/cache` should not be persisted, as they are not safe/portable across machines.\n\nHowever, because tasks can generate a different hash each run, you'll need to manually invalidate\nyour cache. Blindly storing the `hashes` and `outputs` directories without a mechanism to invalidate\nwill simply not work, as the contents will drastically change between CI runs. This is the primary\nreason why the remote caching service exists.\n\n## Reporting run results\n\nIf you're using GitHub Actions as your CI provider, we suggest using our\n[`moonrepo/run-report-action`](https://github.com/marketplace/actions/moon-ci-run-reports). This\naction will report the results of a [`moon ci`](/docs/commands/ci) run to a pull request as a comment\nand workflow summary.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      # ...      - run: 'moon ci'      - uses: 'moonrepo/run-report-action@v1'        if: success() || failure()        with:          access-token: ${{ secrets.GITHUB_TOKEN }}\n```\n\nThe report looks something like the following:\n\n### Community offerings\n\nThe following GitHub actions are provided by the community:\n\n- [`appthrust/moon-ci-retrospect`](https://github.com/appthrust/moon-ci-retrospect) - Displays the results of a `moon ci` run in a more readable fashion.\n\n- [`kymckay/moon-ci-booster`](https://github.com/kymckay/moon-ci-booster) - Displays failing `moon ci` tasks as comments with error logs directly on your pull request.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 219,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__codegen.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/codegen\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, codegen\n- Summary: Code generation provides an easy mechanism for automating common development workflows and file\n----\n\nSource: https://moonrepo.dev/docs/guides/codegen\n\n# Code generation\n\nCode generation provides an easy mechanism for automating common development workflows and file\nstructures. Whether it's scaffolding a new library or application, updating configuration, or\nstandardizing patterns.\n\nTo accomplish this, we provide a generator, which is divided into two parts. The first being the\ntemplates and their files to be scaffolded. The second is our rendering engine that writes template\nfiles to a destination.\n\n## Creating a new template\n\nTo create a new template, run [`moon generate`](/docs/commands/generate) while passing the `--template` option. This\nwill create a template directory and [`template.yml`](/docs/config/template) file in the 1st file-based template\nlocation defined in [`generator.templates`](/docs/config/workspace#templates).\n\n```\n$ moon generate  --template\n```\n\n### Configuring `template.yml`\n\nEvery template requires a [`template.yml`](/docs/config/template) file in the template's directory root. This file\nacts as a schema and declares metadata and variables required by the generator.\n\ntemplate.yml\n\n```\ntitle: 'npm package'description: |  Scaffolds the initial structure for an npm package,  including source and test folders, a package.json, and more.variables:  name:    type: 'string'    default: ''    required: true    prompt: 'Package name?'\n```\n\n### Managing files\n\nFeel free to add any files and folders to the template that you'd like to be generated by consumers!\nThese files will then be scaffolded 1:1 in structure at the target destination.\n\nAn example of the templates folder structure may look something like the following:\n\n```\ntemplates/ npm-package/    src/    tests/    package.json    template.yml react-app/\n```\n\n#### Interpolation\n\nVariables can be interpolated into file paths using the form `[varName]`. For example, if you had a\ntemplate file `src/[type].ts`, and a variable `type` with a value of \"bin\", then the destination\nfile path would be `src/bin.ts`.\n\nThis syntax also supports [filters](#filters), such as `[varName | camel_case]`. However, spaces may\ncause issues with file path encoding, so this functionality is primarily recommended for the\n[`destination`](/docs/config/template#destination) setting.\n\n#### File extensions\n\nTo enable syntax highlighting for template engine syntax, you may use the `.tera` (preferred) or\n`.twig` file extensions. These extensions are optional, but will be removed when the files are\ngenerated.\n\nDepending on your preferred editor, these extensions may be supported through a plugin, or can be\nconfigured based on file type.\n\n- VS Code [Tera extension](https://marketplace.visualstudio.com/items?itemName=karunamurti.tera)\n\n- [Twig extension](https://marketplace.visualstudio.com/items?itemName=mblode.twig-language-2)\n\n- Atom [Twig package](https://atom.io/packages/atom-twig)\n\n- Webstorm [Twig plugin](https://plugins.jetbrains.com/plugin/7303-twig)\n\n#### Partials\n\nPartials are special template files that are used for\n[composition](https://keats.github.io/tera/docs/#include) and\n[inheritance](https://keats.github.io/tera/docs/#inheritance). Because of this, these files should\nnot be generated into the target destination, and do not support frontmatter.\n\nTo ensure they are not generated, include the word \"partial\" anywhere in the file path. For example,\n`partials/header.tpl` or `header.partial.tpl`.\n\n#### Rawsv1.11.0\n\nRaw template files are another special type of file that bypass all Tera rendering, and are used\nas-is instead. This is useful for files that contain syntax that conflicts with Tera.\n\nTo mark a file as raw, add a `.raw` extension, for example: `file.raw.js` or `file.js.raw`. When the\nfile is generated, the `.raw` extension will be removed.\n\n#### Frontmatter\n\nFrontmatter is a well-known concept for \"per-file configuration\", and is achieved by inserting YAML\nat the top of the file, delimited by wrapping `---`. This is a very powerful feature that provides\nmore control than the alternatives, and allows for some very cool integrations.\n\nmoon's frontmatter supports functionality like file skipping, force overwriting, and destination\npath rewriting.\n[View the configuration docs for a full list of supported fields](/docs/config/template#frontmatter).\n\npackage.json\n\n```\n---force: true---{  \"name\": \"{{ name | kebab_case }}\",  \"version\": \"0.0.1\"}\n```\n\nSince frontmatter exists in the file itself, you can take advantage of the rendering engine to\npopulate the field values dynamically. For example, if you're scaffolding a React component, you can\nconvert the component name and file name to PascalCase.\n\n```\n{% set component_name = name | pascal_case %}---to: components/{{ component_name }}.tsx---export function {{ component_name }}() {  return\n;}\n```\n\n#### Assets\n\nAssets are binary files that are copied as-is to the destination, without any rendering, and no\nsupport for frontmatter. This applies to all non-text based files, like images, audio, video, etc.\n\n### Template engine & syntax\n\nRendering templates is powered by [Tera](https://keats.github.io/tera/), a Rust based template\nengine with syntax similar to Twig, Liquid, Django, and more. We highly encourage everyone to read\nTera's documentation for an in-depth understanding, but as a quick reference, Tera supports the\nfollowing:\n\n- [Variable interpolation](https://keats.github.io/tera/docs/#variables) (defined with the [`variables`](/docs/config/template#variables) setting), with [built-in filters](https://keats.github.io/tera/docs/#built-in-filters).\n\n```\n{{ varName }} -> foo{{ varName | upper }} -> FOO\n```\n\n- [Conditional blocks](https://keats.github.io/tera/docs/#if) and [loops](https://keats.github.io/tera/docs/#for).\n\n```\n{% if price  1000 and not rich %}  That's expensive!{% else %}  N/A{% endif %}\n```\n\n```\n{% for item in items %}  {{ loop.index }} - {{ item.name }}{% endfor %}\n```\n\n- And many more features, like auto-escaping, white space control, and math operators!\n\n#### Filters\n\nFilters are a mechanism for transforming values during interpolation and are written using pipes\n(`|`). Tera provides many [built-in filters](https://keats.github.io/tera/docs/#built-in-filters),\nbut we also provide the following custom filters:\n\n- Strings - `camel_case`, `pascal_case`, `snake_case`, `upper_snake_case`, `kebab_case`, `upper_kebab_case`, `lower_case`, `upper_case`\n\n```\n{{ some_value | upper_case }}\n```\n\n- Paths - `path_join`, `path_relative`\n\n```\n{{ some_path | path_join(part = \"another/folder\") }}{{ some_path | path_relative(from = other_path) }}{{ some_path | path_relative(to = other_path) }}\n```\n\n#### Functions\n\nThe following functions are available within a template:\n\n- `variables()` - Returns an object containing all variables within the current template. v1.23.0\n\n#### Variables\n\nThe following variables are always available within a template:\n\n- `dest_dir` - Absolute path to the destination folder.\n\n- `dest_rel_dir` - Relative path to the destination folder from the working directory.\n\n- `working_dir` - Current working directory.\n\n- `workspace_root` - The moon workspace root.\n\n## Generating code from a template\n\nOnce a template has been created and configured, you can generate files based on it using the\n[`moon generate`](/docs/commands/generate) command! This is also know as scaffolding or code generation.\n\nThis command requires the name of a template as the 1st argument. The template name is the folder\nname on the file system that houses all the template files, or the [`id`](/docs/config/template#id)\nsetting configured in [`template.yml`](/docs/config/template).\n\n```\n$ moon generate npm-package\n```\n\nAn optional destination path, relative from the current working directory, can be provided as the\n2nd argument. If not provided, the [`destination`](/docs/config/template#destination) setting\nconfigured in [`template.yml`](/docs/config/template) will be used, or you'll be prompted during\ngeneration to provide one.\n\n```\n$ moon generate npm-package ./packages/example\n```\n\nThis command is extremely interactive, as we'll prompt you for the destination path, variable\nvalues, whether to overwrite files, and more. If you'd prefer to avoid interactions, pass\n`--defaults`, or `--force`, or both.\n\n### Configuring template locations\n\nTemplates can be located anywhere, especially when [being shared](#sharing-templates). Because of\nthis, our generator will loop through all template paths configured in\n[`generator.templates`](/docs/config/workspace#templates), in order, until a match is found.\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates'    # Or    - 'file://other/templates'\n```\n\nWhen using literal file paths, all paths are relative from the workspace root.\n\n#### Archive URLsv1.36.0\n\nTemplate locations can reference archives (zip, tar, etc) through https URLs. These archives should\ncontain templates and will be downloaded and unpacked. The list of\n[available archive formats can be found here](https://github.com/moonrepo/starbase/blob/master/crates/archive/src/lib.rs#L76).\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - 'https://domain.com/some/path/to/archive.zip'\n```\n\nArchives will be unpacked to `~/.moon/templates/archive/`, and will be cached for future\nuse.\n\n#### Globsv1.31.0\n\nIf you'd prefer more control over literal file paths (above), you can instead use glob paths or the\n`glob://` protocol. Globs are relative from the workspace root, and will only match directories, or\npatterns that end in `template.yml`.\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates/*'    # Or    - 'glob://projects/*/templates/*'\n```\n\n#### Git repositoriesv1.23.0\n\nTemplates locations can also reference templates in an external Git repository using the `git://`\nlocator protocol. This locator requires the Git host, repository path, and revision (branch, tag,\ncommit, etc).\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - 'git://github.com/moonrepo/templates#master'    - 'git://gitlab.com/org/repo#v1.2.3'\n```\n\nGit repositories will be cloned to `~/.moon/templates/git/` using an HTTPS URL (not a Git\nURL), and will be cached for future use.\n\n#### npm packagesv1.23.0\n\nAdditionally, template locations can also reference npm packages using the `npm://` locator\nprotocol. This locator requires a package name and published version.\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - 'npm://@moonrepo/templates#1.2.3'    - 'npm://other-templates#4.5.6'\n```\n\nnpm packages will be downloaded and unpacked to `~/.moon/templates/npm` and cached for future use.\n\n### Declaring variables with CLI arguments\n\nDuring generation, you'll be prompted in the terminal to provide a value for any configured\nvariables. However, you can pre-fill these variable values by passing arbitrary command line\narguments after `--` to [`moon generate`](/docs/commands/generate). Argument names must exactly match the variable\nnames.\n\nUsing the package template example above, we could pre-fill the `name` variable like so:\n\n```\n$ moon generate npm-package ./packages/example -- --name '@company/example' --private\n```\n\ninfo\n\n- Array variables support multiple options of the same name.\n\n- Boolean variables can be negated by prefixing the argument with `--no-`.\n\n- Object variables can not declare values through arguments.\n\n## Sharing templates\n\nAlthough moon is designed for a monorepo, you may be using multiple repositories and would like to\nuse the same templates across all of them. So how can we share templates across repositories? Why\nnot try...\n\n- Git submodules\n\n- Git repositories (using `git://` protocol)\n\n- File archives\n\n- Node.js modules\n\n- npm packages (using `npm://` protocol)\n\n- Another packaging system\n\nRegardless of the choice, simply configure [`generator.templates`](/docs/config/workspace#templates) to point to these\nlocations:\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates'    - 'file://./templates'    # Git    - './path/to/submodule'    - 'git://github.com/org/repo#branch'    # npm    - './node_modules/@company/shared-templates'    - 'npm://@company/shared-templates#1.2.3'\n```\n\n### Git and npm layout structure\n\nIf you plan to share templates using Git repositories (`git://`) or npm packages (`npm://`), then\nthe layout of those projects must follow these guidelines:\n\n- A project must support multiple templates\n\n- A template is denoted by a folder in the root of the project\n\n- Each template must have a [`template.yml`](/docs/config/template) file\n\n- Template names are derived from the folder name, or the `id` field in [`template.yml`](/docs/config/template)\n\nAn example of this layout structure may look something like the following:\n\n```\n template-one/    template.yml template-two/    template.yml template-three/    template.yml package.json, etc\n```\n\nThese templates can then be referenced by name, such as [`moon generate template-one`](/docs/commands/generate).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 361,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__codeowners.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/codeowners\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, codeowners\n- Summary: Code owners enables companies to define individuals, teams, or groups that are responsible for code\n----\n\nSource: https://moonrepo.dev/docs/guides/codeowners\n\n# Code owners\n\nv1.8.0\n\nCode owners enables companies to define individuals, teams, or groups that are responsible for code\nin a repository. This is useful in ensuring that pull/merge requests are reviewed and approved by a\nspecific set of contributors, before the branch is merged into the base branch.\n\nWith that being said, moon does not implement a custom code owners solution, and instead builds\nupon the popular `CODEOWNERS` integration in VCS providers, like GitHub, GitLab, and Bitbucket.\n\n## Defining owners\n\nWith moon, you do not modify a `CODEOWNERS` file directly. Instead you define owners per project\nwith [`moon.yml`](/docs/config/project), or globally with [`.moon/workspace.yml`](/docs/config/workspace).\nThese owners are then aggregated and automatically\n[synced to a `CODEOWNERS` file](#generating-codeowners).\n\ninfo\n\nAn owner is a user, team, or group unique to your VCS provider. Please refer to your provider's\ndocumentation for the correct format in which to define owners.\n\n### Project-level\n\nFor projects, we support an [`owners`](/docs/config/project#owners) setting in\n[`moon.yml`](/docs/config/project) that accepts file patterns/paths and their owners (contributors\nrequired to review), as well as operational settings for minimum required approvals, custom groups,\nand more.\n\nPaths configured here are relative from the project root, and will be prefixed with the project\nsource (path from workspace root to project root) when the file is synced.\n\npackages/components/moon.yml\n\n```\nowners:  requiredApprovals: 2  paths:    'src/': ['@frontend', '@design-system']    '*.config.js': ['@frontend-infra']    '*.json': ['@frontend-infra']\n```\n\nThe configuration above would generate the following:\n\n- GitHub\n- GitLab\n- Bitbucket\n\n.github/CODEOWNERS\n\n```\n# components/packages/components/src/ @frontend @design-system/packages/components/*.config.js @frontend-infra/packages/components/*.json @frontend-infra\n```\n\n.gitlab/CODEOWNERS\n\n```\n# components[components][2]/packages/components/src/ @frontend @design-system/packages/components/*.config.js @frontend-infra/packages/components/*.json @frontend-infra\n```\n\nCODEOWNERS\n\n```\n# components/packages/components/src/ @frontend @design-system/packages/components/*.config.js @frontend-infra/packages/components/*.json @frontend-infra\n```\n\n### Workspace-level\n\nProject scoped owners are great but sometimes you need to define owners for files that span across\nall projects, or files at any depth within the repository. With the\n[`codeowners.globalPaths`](/docs/config/workspace#globalpaths) setting in\n[`.moon/workspace.yml`](/docs/config/workspace), you can do just that.\n\nPaths configured here are used as-is, allowing for full control of what ownership is applied.\n\n.moon/workspace.yml\n\n```\ncodeowners:  globalPaths:    # All files    '*': ['@admins']    # Config folder at any depth    'config/': ['@app-platform']    # GitHub folder at the root    '/.github/': ['@infra']\n```\n\nThe configuration above would generate the following at the top of the file (is the same for all\nproviders):\n\n- GitHub\n- GitLab\n- Bitbucket\n\n.github/CODEOWNERS\n\n```\n# (workspace)* @adminsconfig/ @app-platform/.github/ @infra\n```\n\n.gitlab/CODEOWNERS\n\n```\n# (workspace)* @adminsconfig/ @app-platform/.github/ @infra\n```\n\nCODEOWNERS\n\n```\n# (workspace)* @adminsconfig/ @app-platform/.github/ @infra\n```\n\n## Generating `CODEOWNERS`\n\nCode owners is an opt-in feature, and as such, the `CODEOWNERS` file can be generated in a few ways.\nThe first is manually, with the [`moon sync codeowners`](/docs/commands/sync/code-owners) command.\n\n```\n$ moon sync codeowners\n```\n\nWhile this works, it is a manual process, and can easily be forgotten, resulting in an out-of-date\nfile.\n\nAn alternative solution is the [`codeowners.syncOnRun`](/docs/config/workspace#synconrun) setting in\n[`.moon/workspace.yml`](/docs/config/workspace#codeowners), that when enabled, moon will automatically\ngenerate a `CODEOWNERS` file when a [target](/docs/concepts/target) is ran.\n\n.moon/workspace.yml\n\n```\ncodeowners:  syncOnRun: true\n```\n\nThe format and location of the `CODEOWNERS` file is based on the\n[`vcs.provider`](/docs/config/workspace#provider) setting.\n\n## FAQ\n\n### What providers or formats are supported?\n\nThe following providers are supported, based on the [`vcs.provider`](/docs/config/workspace#provider)\nsetting.\n\n- [Bitbucket](https://marketplace.atlassian.com/apps/1218598/code-owners-for-bitbucket?tab=overview&hosting=cloud) (via a 3rd-party app)\n\n- [GitHub](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners)\n\n- [GitLab](https://docs.gitlab.com/ee/user/project/codeowners/reference.html)\n\n- Other (very basic syntax)\n\n### Where does the `CODEOWNERS` file get created?\n\nThe location of the file is dependent on the configured provider.\n\n- GitHub -> `.github/CODEOWNERS`\n\n- GitLab -> `.gitlab/CODEOWNERS`\n\n- Everything else -> `CODEOWNERS`\n\n### Why are owners defined in `moon.yml` and not an alternative like `OWNERS`?\n\nA very popular pattern for defining owners is through an `OWNERS` file, which can appear in any\nfolder, at any depth, within the repository. All of these files are then aggregated into a single\n`CODEOWNERS` file.\n\nWhile this is useful for viewing ownership of a folder at a glance, it incurs a massive performance\nhit as we'd have to constantly glob the entire repository to find all `OWNERS` files. We found it\nbest to define owners in `moon.yml` instead for the following reasons:\n\n- No performance hit, as we're already loading and parsing these config files.\n\n- Co-locates owners with the rest of moon's configuration.\n\n- Ownership is now a part of the project graph, enabling future features.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 188,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__debug-task.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/debug-task\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, debug task\n- Summary: Running [tasks](/docs/concepts/task) is the most common way to interact with moon, so what do you do\n----\n\nSource: https://moonrepo.dev/docs/guides/debug-task\n\n# Debugging a task\n\nRunning [tasks](/docs/concepts/task) is the most common way to interact with moon, so what do you do\nwhen your task isn't working as expected? Diagnose it of course! Diagnosing the root cause of a\nbroken task can be quite daunting, but do not fret, as the following steps will help guide you in\nthis endeavor.\n\n## Verify configuration\n\nBefore we dive into the internals of moon, we should first verify that the task is actually\nconfigured correctly. Our configuration layer is very strict, but it can't catch everything, so jump\nto the [`moon.yml`](/docs/config/project#tasks) documentation for more information.\n\nTo start, moon will create a snapshot of the project and its tasks, with all [tokens](/docs/concepts/token)\nresolved, and paths expanded. This snapshot is located at\n`.moon/cache/states/\n/snapshot.json`. With the snapshot open, inspect the root `tasks`\nobject for any inconsistencies or inaccuracies.\n\nSome issues to look out for:\n\n- Have `command` and `args` been parsed correctly?\n\n- Have [tokens](/docs/concepts/token) resolved correctly? If not, verify syntax or try another token type.\n\n- Have `inputFiles`, `inputGlobs`, and `inputVars` expanded correctly from [`inputs`](/docs/config/project#inputs)?\n\n- Have `outputFiles` and `outputGlobs` expanded correctly from [`outputs`](/docs/config/project#outputs)?\n\n- Is the `toolchain` (formerly `platform`) correct for the command? If incorrect, explicitly set the [`toolchain`](/docs/config/project#toolchain).\n\n- Are `options` and `flags` correct?\n\ninfo\n\nResolved information can also be inspected with the [`moon task --json`](/docs/commands/task)\ncommand.\n\n### Verify inherited configuration\n\nIf the configuration from the previous step looks correct, you can skip this step, otherwise let's\nverify that the inherited configuration is also correct. In the `snapshot.json` file, inspect the\nroot `inherited` object, which is structured as follows:\n\n- `order` - The order in which configuration files from `.moon` are loaded, from lowest to highest priority, and the order files are merged. The `*` entry is `.moon/tasks/all.yml`, while other entries map to `.moon/tasks/**/*.yml`.\n\n- `layers` - A mapping of configuration files that were loaded, derived from the `order`. Each layer represents a partial object (not expanded or resolved). Only files that exist will be mapped here.\n\n- `config` - A partial configuration object representing the state of all merged layers. This is what is merged with the project's `moon.yml` file.\n\nSome issues to look out for:\n\n- Is the order correct? If not, verify the project's [`language`](/docs/config/project#language) and the task's [`toolchain`](/docs/config/project#toolchain).\n\n- Does `config` correctly represent the merged state of all `layers`? Do note that tasks are shallow merged (by name), not deep merged.\n\n- Have the root `tasks` properly inherited [`implicitDeps`](/docs/config/tasks#implicitdeps), [`implicitInputs`](/docs/config/tasks#implicitinputs), and `fileGroups`?\n\n## Inspect trace logs\n\nIf configuration looks good, let's move on to inspecting the trace logs, which can be a non-trivial\namount of effort. Run the task to generate the logs, bypass the cache, and include debug\ninformation:\n\n```\nMOON_DEBUG_PROCESS_ENV=true MOON_DEBUG_PROCESS_INPUT=true moon run  --log trace --force\n```\n\nOnce ran, a large amount of information will be logged to the terminal. However, most of it can be\nignored, as we're only interested in the \"is this task affected by changes\" logs. This breaks down\nas follows:\n\n- First, we gather touched files from the local checkout, which is typically `git status --porcelain --untracked-files` (from the `moon_process::command_inspector` module). The logs do not output the list of files that are touched, but you can run this command locally to verify the output.\n\n- Secondly, we gather all files from the project directory, using the `git ls-files --full-name --cached --modified --others --exclude-standard --deduplicate` command (also from the `moon_process::command_inspector` module). This command can also be ran locally to verify the output.\n\n- Lastly, all files from the previous 2 commands will be hashed using the `git hash-object` command. If you passed the `MOON_DEBUG_PROCESS_INPUT` environment variable, you'll see a massive log entry of all files being hashed. This is what we use to generate moon's specific hash.\n\nIf all went well, you should see a log entry that looks like this:\n\n```\nmoon_task_runner::task_runner  Generated a unique hash  task_target=\"\" hash=\"\"\n```\n\nThe important piece is the hash, which is a 64-character SHA256 hash, and represents the unique hash\nof this task/target. This is what moon uses to determine a cache hit/miss, and whether or not to\nskip re-running a task.\n\nLet's copy the hash and move on to the next step.\n\n## Inspect the hash manifest\n\nWith the hash in hand, let's dig deeper into moon's internals, by inspecting the hash manifest at\n`.moon/cache/hashes/.json`, or running the [`moon hash`](/docs/commands/hash) command:\n\n```\nmoon hash\n```\n\nThe manifest is JSON and its contents are all the information used to generate its unique hash. This\ninformation is an array, and breaks down as follows:\n\n- The first item in the array is the task itself. The important fields to diagnose here are `deps` and `inputs`. Dependencies are other tasks (and their hash) that this task depends on.\n\n- Inputs are all the files (and their hash from `git hash-object`) this task requires to run.\n\n- The remaining items are toolchain/language specific, some examples are: Node.js - The current Node.js version and the resolved versions/hashes of all `package.json` dependencies.\n\n- Rust - The current Rust version and the resolved versions/hashes of all `Cargo.toml` dependencies.\n\n- TypeScript - Compiler options for changing compilation output.\n\nSome issues to look out for:\n\n- Do the dependencies match the task's configured [`deps`](/docs/config/project#deps) and [`implicitDeps`](/docs/config/tasks#implicitdeps)?\n\n- Do the inputs match the task's configured [`inputs`](/docs/config/project#inputs) and [`implicitInputs`](/docs/config/tasks#implicitinputs)? If not, try tweaking the config.\n\n- Are the toolchain/language specific items correct?\n\n- Are dependency versions/hashes correctly parsed from the appropriate lockfile?\n\n### Diffing a previous hash\n\nAnother avenue for diagnosing a task is to diff the hash against a hash from a previous run. Since\nwe require multiple hashes, we'll need to run the task multiple times,\n[inspect the logs](#inspect-trace-logs), and extract the hash for each. If you receive the same hash\nfor each run, you'll need to tweak configuration or change files to produce a different hash.\n\nOnce you have 2 unique hashes, we can pass them to the [`moon hash`](/docs/commands/hash) command. This\nwill produce a `git diff` styled output, allowing for simple line-by-line comparison debugging.\n\n```\nmoon hash\n```\n\n```\nLeft:  0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fddeRight: 2388552fee5a02062d0ef402bdc7232f0a447458b058c80ce9c3d0d4d7cfe171[\t{\t\t\"command\": \"build\",\t\t\"args\": [+\t\t\t\"./dist\"-\t\t\t\"./build\"\t\t],\t\t...\t}]\n```\n\nThis is extremely useful in diagnoising why a task is running differently than before, and is much\neasier than inspecting the hash manifest files manually!\n\n## Ask for help\n\nIf you've made it this far, and still can't figure out why a task is not working correctly, please\nask for help!\n\n- [Join the Discord community](https://discord.gg/qCh9MEynv2) (if lost)\n\n- [Report an issue](https://github.com/moonrepo/moon/issues/new/choose) (if an actual bug)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 171,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__docker.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/docker\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, docker\n- Summary: Using [Docker](https://www.docker.com/) to run your applications? Or build your artifacts? No\n----\n\nSource: https://moonrepo.dev/docs/guides/docker\n\n# Docker integration\n\nUsing [Docker](https://www.docker.com/) to run your applications? Or build your artifacts? No\nworries, moon can be utilized with Docker, and supports a robust integration layer.\n\nsuccess\n\nLooking to speed up your Docker builds? Want to build in the cloud?\n[Give Depot a try](https://depot.dev?ref=moonrepo)!\n\n## Requirements\n\nThe first requirement, which is very important, is adding `.moon/cache` to the workspace root\n`.dockerignore` (moon assumes builds are running from the root). Not all files in `.moon/cache` are\nportable across machines/environments, so copying these file into Docker will definitely cause\ninteroperability issues.\n\n.dockerignore\n\n```\n.moon/cache\n```\n\nThe other requirement depends on how you want to integrate Git with Docker. Since moon executes\n`git` commands under the hood, there are some special considerations to be aware of when running\nmoon within Docker. There's 2 scenarios to choose from:\n\n- (recommended) Add the `.git` folder to `.dockerignore`, so that it's not `COPY`'d. moon will continue to work just fine, albeit with some functionality disabled, like caching.\n\n- Ensure that the `git` library is installed in the container, and copy the `.git` folder with `COPY`. moon will work with full functionality, but it will increase the overall size of the image because of caching.\n\n## Creating a `Dockerfile`\n\ninfo\n\nOur [`moon docker file`](/docs/commands/docker/file) command can automatically generate a `Dockerfile` based on this\nguide! We suggest generating the file then reading the guide below to understand what's going on.\n\nWe're very familiar with how tedious `Dockerfile`s are to write and maintain, so in an effort to\nreduce this headache, we've built a handful of tools to make this process much easier. With moon,\nwe'll take advantage of Docker's layer caching and staged builds as much as possible.\n\nWith that being said, there's many approaches you can utilize, depending on your workflow (we'll\ndocument them below):\n\n- Running `moon docker` commands before running `docker run|build` commands.\n\n- Running `moon docker` commands within the `Dockerfile`.\n\n- Using multi-staged or non-staged (standard) builds.\n\n- Something else unique to your setup!\n\nwarning\n\nThis guide and our Docker approach is merely a suggestion and is not a requirement for using moon\nwith Docker! Feel free to use this as a starting point, or not at all. Choose the approach that\nworks best for you!\n\n### What we're trying to avoid\n\nBefore we dive into writing a perfect `Dockerfile`, we'll briefly talk about the pain points we're\ntrying to avoid. In the context of Node.js and monorepo's, you may be familiar with having to `COPY`\neach individual `package.json` in the monorepo before installing `node_modules`, to effectively use\nlayer caching. This is very brittle, as each new application or package is created, every\n`Dockerfile` in the monorepo will need to be modified to account for this new `package.json`.\n\nFurthermore, we'll have to follow a similar process for only copying source files necessary for\nthe build or `CMD` to complete. This is very tedious, so most developers simply use `COPY . .` and\nforget about it. Copying the entire monorepo is costly, especially as it grows.\n\nAs an example, we'll use moon's official repository. The `Dockerfile` would look something like the\nfollowing.\n\n```\nFROM node:latestWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli# Copy moon filesCOPY ./.moon ./.moon# Copy all package.json's and lockfilesCOPY ./packages/cli/package.json ./packages/cli/package.jsonCOPY ./packages/core-linux-arm64-gnu/package.json ./packages/core-linux-arm64-gnu/package.jsonCOPY ./packages/core-linux-arm64-musl/package.json ./packages/core-linux-arm64-musl/package.jsonCOPY ./packages/core-linux-x64-gnu/package.json ./packages/core-linux-x64-gnu/package.jsonCOPY ./packages/core-linux-x64-musl/package.json ./packages/core-linux-x64-musl/package.jsonCOPY ./packages/core-macos-arm64/package.json ./packages/core-macos-arm64/package.jsonCOPY ./packages/core-macos-x64/package.json ./packages/core-macos-x64/package.jsonCOPY ./packages/core-windows-x64-msvc/package.json ./packages/core-windows-x64-msvc/package.jsonCOPY ./packages/runtime/package.json ./packages/runtime/package.jsonCOPY ./packages/types/package.json ./packages/types/package.jsonCOPY ./package.json ./package.jsonCOPY ./yarn.lock ./yarn.lockCOPY ./.yarn ./.yarnCOPY ./.yarnrc.yml ./yarnrc.yml# Install toolchain and dependencies# In non-moon repos: yarn installRUN moon docker setup# Copy project and required files# Or COPY . .COPY ./packages/types ./packages/typesCOPY ./packages/runtime ./packages/runtime# Build the targetRUN moon run runtime:build\n```\n\nFor such a small monorepo, this already looks too confusing!!! Let's remedy this by utilizing moon\nitself to the fullest!\n\n### Scaffolding the bare minimum\n\nThe first step in this process is to only copy the bare minimum of files necessary for installing\ndependencies (Node.js modules, etc). This is typically manifests (`package.json`), lockfiles\n(`yarn.lock`, etc), and any configuration (`.yarnrc.yml`, etc).\n\nThis can all be achieved with the [`moon docker scaffold`](/docs/commands/docker/scaffold) command, which scaffolds a\nskeleton of the repository structure, with only necessary files (the above). Let's update our\n`Dockerfile` usage.\n\n- Non-staged\n- Multi-staged\n\nThis assumes [`moon docker scaffold `](/docs/commands/docker/scaffold) is ran outside of the `Dockerfile`.\n\n```\nFROM node:latestWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli# Copy workspace skeletonCOPY ./.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup\n```\n\n```\n#### BASEFROM node:latest AS baseWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli#### SKELETONFROM base AS skeleton# Copy entire repository and scaffoldCOPY . .RUN moon docker scaffold\n#### BUILDFROM base AS build# Copy workspace skeletonCOPY --from=skeleton /app/.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup\n```\n\nAnd with this, our dependencies will be layer cached effectively! Let's now move onto copying source\nfiles.\n\n### Copying necessary source files\n\nThe next step is to copy all source files necessary for `CMD` or any `RUN` commands to execute\ncorrectly. This typically requires copying all source files for the project and all source files\nof the project's dependencies... NOT the entire repository!\n\nLuckily our [`moon docker scaffold `](/docs/commands/docker/scaffold) command has already done this for us! Let's\ncontinue updating our `Dockerfile` to account for this, by appending the following:\n\n- Non-staged\n- Multi-staged\n\n```\n# Copy source filesCOPY ./.moon/docker/sources .# Build something (optional)RUN moon run\n:\n```\n\n```\n# Copy source filesCOPY --from=skeleton /app/.moon/docker/sources .# Build something (optional)RUN moon run\n:\n```\n\ninfo\n\nIf you need to copy additional files for your commands to run successfully, you can configure the\n`docker.scaffold.include` setting in [`.moon/workspace.yaml`](/docs/config/workspace#scaffold) (entire\nworkspace) or [`moon.yml`](/docs/config/project#scaffold) (per project).\n\n### Pruning extraneous files\n\nNow that we've ran a command or built an artifact, we should prune the Docker environment to remove\nunneeded files and folders. We can do this with the [`moon docker prune`](/docs/commands/docker/prune) command, which\nmust be ran within the context of a `Dockerfile`!\n\n```\n# Prune workspaceRUN moon docker prune\n```\n\nWhen ran, this command will do the following, in order:\n\n- Remove extraneous dependencies (`node_modules`) for unfocused projects.\n\n- Install production only dependencies for the projects that were scaffolded.\n\ninfo\n\nThis process can be customized using the `docker.prune` setting in\n[`.moon/workspace.yaml`](/docs/config/workspace#prune).\n\n### Final result\n\nAnd with this moon integration, we've reduced the original `Dockerfile` of 35 lines to 18 lines, a\nreduction of almost 50%. The original file can also be seen as `O(n)`, as each new manifest requires\ncascading updates, while the moon approach is `O(1)`!\n\n- Non-staged\n- Multi-staged\n\n```\nFROM node:latestWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli# Copy workspace skeletonCOPY ./.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup# Copy source filesCOPY ./.moon/docker/sources .# Build something (optional)RUN moon run\n:# Prune workspaceRUN moon docker prune# CMD\n```\n\n```\n#### BASEFROM node:latest AS baseWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli#### SKELETONFROM base AS skeleton# Copy entire repository and scaffoldCOPY . .RUN moon docker scaffold\n#### BUILDFROM base AS build# Copy workspace skeletonCOPY --from=skeleton /app/.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup# Copy source filesCOPY --from=skeleton /app/.moon/docker/sources .# Build something (optional)RUN moon run\n:# Prune workspaceRUN moon docker prune# CMD\n```\n\n## Running `docker` commands\n\nWhen running `docker` commands, they must be ran from moon's workspace root (typically the\nrepository root) so that the project graph and all `moon docker` commands resolve correctly.\n\n```\ndocker build .\n```\n\nIf you're `Dockerfile`s are located within each applicable project, use the `-f` argument.\n\n```\ndocker run -f ./apps/client/Dockerfile .\n```\n\n## Troubleshooting\n\n### Supporting `node:alpine` images\n\nIf you're trying to use the `node:alpine` image with moon's\n[integrated toolchain](/docs/concepts/toolchain), you'll need to set the `MOON_TOOLCHAIN_FORCE_GLOBALS`\nenvironment variable in the Docker image to disable moon's toolchain. This is required as Node.js\ndoes not provide pre-built binaries for the Alpine target, so installing the Node.js toolchain will\nfail.\n\n```\nFROM node:alpineENV MOON_TOOLCHAIN_FORCE_GLOBALS=true\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 225,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__angular.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/angular\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, angular\n- Summary: In this guide, you'll learn how to integrate [Angular](https://angular.io/) into moon.\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/angular\n\n# Angular example\n\nIn this guide, you'll learn how to integrate [Angular](https://angular.io/) into moon.\n\nBegin by creating a new Angular project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n```\ncd apps && npx -p @angular/cli@latest ng new angular-app\n```\n\nView the [official Angular docs](https://angular.io/start) for a more in-depth guide to getting\nstarted!\n\n## Setup\n\nSince Angular is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\n/moon.yml\n\n```\nfileGroups:  app:    - 'src/**/*'    - 'angular.*'tasks:  dev:    command: 'ng serve'    preset: 'server'  build:    command: 'ng build'    inputs:      - '@group(app)'      - '@group(sources)'    outputs:      - 'dist'  # Extends the top-level lint  lint:    args:      - '--ext'      - '.ts'\n```\n\n### ESLint integration\n\nAngular does not provide a built-in linting abstraction, but instead there is an\n[ESLint package](https://github.com/angular-eslint/angular-eslint), which is great, but complicates\nthings a bit. Because of this, you have two options for moving forward:\n\n- Use a [global `lint` task](/docs/guides/examples/eslint) and bypass Angular's solution (preferred).\n\n- Use Angular's ESLint package solution only.\n\nRegardless of which option is chosen, the following changes are applicable to all options and should\nbe made. Begin be installing the dependencies that the\n[`@angular-eslint`](https://nextjs.org/docs/basic-features/eslint#eslint-config) package need in the\napplication's `package.json`.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\nyarn workspace\n add --dev @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\nnpm install --save-dev --workspace\n @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\npnpm add --save-dev --filter\n @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\nbun install --dev @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\nSince Angular has some specific rules, we'll need to tell the ESLint package to overrides the\ndefault ones. This can be achieved with a project-level `.eslintrc.json` file.\n\n/.eslintrc.json\n\n```\n{  \"root\": true,  \"ignorePatterns\": [\"projects/**/*\"],  \"overrides\": [    {      \"files\": [\"*.ts\"],      \"extends\": [        \"eslint:recommended\",        \"plugin:@typescript-eslint/recommended\",        \"plugin:@angular-eslint/recommended\",        // This is required if you use inline templates in Components        \"plugin:@angular-eslint/template/process-inline-templates\"      ],      \"rules\": {        /**         * Any TypeScript source code (NOT TEMPLATE) related rules you wish to use/reconfigure over and above the         * recommended set provided by the @angular-eslint project would go here.         */        \"@angular-eslint/directive-selector\": [          \"error\",          { \"type\": \"attribute\", \"prefix\": \"app\", \"style\": \"camelCase\" }        ],        \"@angular-eslint/component-selector\": [          \"error\",          { \"type\": \"element\", \"prefix\": \"app\", \"style\": \"kebab-case\" }        ]      }    },    {      \"files\": [\"*.html\"],      \"extends\": [        \"plugin:@angular-eslint/template/recommended\",        \"plugin:@angular-eslint/template/accessibility\"      ],      \"rules\": {        /**         * Any template/HTML related rules you wish to use/reconfigure over and above the         * recommended set provided by the @angular-eslint project would go here.         */      }    }  ]}\n```\n\nWith the basics now setup, choose the option that works best for you.\n\n- Global lint\n- Angular lint\n\nWe encourage using the global `lint` task for consistency across all projects within the repository.\nWith this approach, the `eslint` command itself will be ran and the `ng lint` command will be\nignored, but the `@angular-eslint` rules will still be used.\n\nIf you'd prefer to use the `ng lint` command, add it as a task to the project's\n[`moon.yml`](/docs/config/project).\n\n/moon.yml\n\n```\ntasks:  lint:    command: 'ng lint'    inputs:      - '@group(angular)'\n```\n\nFurthermore, if a global `lint` task exists, be sure to exclude it from being inherited.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['lint']\n```\n\nIn addition to configuring `moon.yml`, you also need to add a lint target in the `angular.json` file\nfor linting to work properly. The lint target specifies which builder to use for linting, as well as\nthe file patterns that should be linted.\n\n/angular.json\n\n```\n{  \"projects\": {    \"angular-app\": {      \"architect\": {        \"lint\": {          \"builder\": \"@angular-eslint/builder:lint\",          \"options\": {            \"lintFilePatterns\": [\"src/**/*.ts\", \"src/**/*.html\"]          }        }      }    }  }}\n```\n\nAdding this lint target is crucial for ensuring that the linting process is properly configured and\nintegrated with Angular's build system.\n\n### TypeScript integration\n\nAngular has [built-in support for TypeScript](https://angular.io/guide/typescript-configuration), so\nthere is no need for additional configuration to enable TypeScript support.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository.\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Angular should be installed per-project, and the\n`ng` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Angular project, a [`angular.json`](https://angular.io/guide/workspace-config)\nis created, and must exist in the project root. This allows each project to configure Angular for\ntheir needs.\n\n/angular.json\n\n```\n{  \"$schema\": \"./node_modules/@angular/cli/lib/config/schema.json\",  \"version\": 1,  \"projects\": {    \"angular-app\": {      \"projectType\": \"application\",      ...    }  },  ...}\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 165,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__astro.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/astro\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, astro\n- Summary: In this guide, you'll learn how to integrate [Astro](https://docs.astro.build).\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/astro\n\n# Astro example\n\nIn this guide, you'll learn how to integrate [Astro](https://docs.astro.build).\n\nBegin by creating a new Astro project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n```\ncd apps && npm create astro@latest\n```\n\n## Setup\n\nSince Astro is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Astro tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/astro).\n\n/moon.yml\n\n```\n# Inherit tasks from the `astro` preset# https://github.com/moonrepo/moon-configstags: ['astro']# Disable project referencestoolchain:  typescript:    syncProjectReferences: false\n```\n\n### ESLint integration\n\nWhen using a [`lint`](/docs/guides/examples/eslint) task, the\n[`eslint-plugin-astro`](https://ota-meshi.github.io/eslint-plugin-astro/user-guide/) package must be\ninstalled to lint `.astro` files.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace  add --dev eslint-plugin-astro\n```\n\n```\nyarn workspace  add --dev eslint-plugin-astro\n```\n\n```\nnpm install --save-dev --workspace  eslint-plugin-astro\n```\n\n```\npnpm add --save-dev --filter  eslint-plugin-astro\n```\n\n```\nbun install --dev eslint-plugin-astro\n```\n\nOnce the dependency has been installed in the application's `package.json`. We can then enable this\nconfiguration by creating an `.eslintrc.js` file in the project root. Be sure this file is listed in\nyour lint task's inputs!\n\n/.eslintrc.js\n\n```\nmodule.exports = {  extends: ['plugin:astro/recommended'],  overrides: [    {      files: ['*.astro'],      parser: 'astro-eslint-parser',      // If using TypeScript      parserOptions: {        parser: '@typescript-eslint/parser',        extraFileExtensions: ['.astro'],        project: 'tsconfig.json',        tsconfigRootDir: __dirname,      },    },  ],};\n```\n\nAnd lastly, when linting through moon's command line, you'll need to include the `.astro` extension\nwithin the `lint` task. This can be done by extending the top-level task within the project (below),\nor by adding it to the top-level entirely.\n\n/moon.yml\n\n```\ntasks:  lint:    args:      - '--ext'      - '.ts,.tsx,.astro'\n```\n\n### Prettier integration\n\nWhen using a [`format`](/docs/guides/examples/prettier) task, the `prettier-plugin-astro` package must be installed to\nformat `.astro` files. View the official\n[Astro docs](https://docs.astro.build/en/editor-setup/#prettier) for more information.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace  add --dev prettier-plugin-astro\n```\n\n```\nyarn workspace  add --dev prettier-plugin-astro\n```\n\n```\nnpm install --save-dev --workspace  prettier-plugin-astro\n```\n\n```\npnpm add --save-dev --filter  prettier-plugin-astro\n```\n\n```\nbun install --dev prettier-plugin-astro\n```\n\n### TypeScript integration\n\nSince Astro utilizes custom `.astro` files, it requires a specialized TypeScript integration, and\nluckily Astro provides an [in-depth guide](https://docs.astro.build/en/guides/typescript/). With\nthat being said, we do have a few requirements and pointers!\n\n- Use the official [Astro `tsconfig.json`](https://docs.astro.build/en/guides/typescript/#setup) as a basis.\n\n- From our internal testing, the `astro check` command (that typechecks `.astro` files) does not support project references. If the `composite` compiler option is enabled, the checker will fail to find `.astro` files. To work around this, we disable `workspace.typescript` in our moon config above.\n\n- Since typechecking requires 2 commands, one for `.astro` files, and the other for `.ts`, `.tsx` files, we've added the [`typecheck`](/docs/guides/examples/typescript) task as a dependency for the `check` task. This will run both commands through a single task!\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Astro should be installed per-project, and the\n`astro` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Astro project, a\n[`astro.config.mjs`](https://docs.astro.build/en/reference/configuration-reference/) is created, and\nmust exist in the project root. This allows each project to configure Astro for their needs.\n\n/astro.config.mjs\n\n```\nimport { defineConfig } from 'astro/config';// https://astro.build/configexport default defineConfig({});\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 161,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__eslint.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/eslint\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, eslint\n- Summary: In this guide, you'll learn how to integrate [ESLint](https://eslint.org/) into moon.\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/eslint\n\n# ESLint example\n\nIn this guide, you'll learn how to integrate [ESLint](https://eslint.org/) into moon.\n\nBegin by installing `eslint` and any plugins in your root. We suggest using the same version across\nthe entire repository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev eslint eslint-config-moon\n```\n\n```\nyarn add --dev eslint eslint-config-moon# If using workspacesyarn add --dev -W eslint eslint-config-moon\n```\n\n```\nnpm install --save-dev eslint eslint-config-moon\n```\n\n```\npnpm add --save-dev eslint eslint-config-moon# If using workspacespnpm add --save-dev -w eslint eslint-config-moon\n```\n\n```\nbun install --dev eslint eslint-config-moon\n```\n\n## Setup\n\nSince linting is a universal workflow, add a `lint` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  lint:    command:      - 'eslint'      # Support other extensions      - '--ext'      - '.js,.jsx,.ts,.tsx'      # Always fix and run extra checks      - '--fix'      - '--report-unused-disable-directives'      # Dont fail if a project has nothing to lint      - '--no-error-on-unmatched-pattern'      # Do fail if we encounter a fatal error      - '--exit-on-fatal-error'      # Only 1 ignore file is supported, so use the root      - '--ignore-path'      - '@in(4)'      # Run in current dir      - '.'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Other config files      - '*.config.*'      # Project configs, any format, any depth      - '**/.eslintrc.*'      # Root configs, any format      - '/.eslintignore'      - '/.eslintrc.*'\n```\n\nProjects can extend this task and provide additional parameters if need be, for example.\n\n/moon.yml\n\n```\ntasks:  lint:    args:      # Enable caching for this project      - '--cache'\n```\n\n### TypeScript integration\n\nIf you're using the [`@typescript-eslint`](https://typescript-eslint.io) packages, and want to\nenable type-safety based lint rules, we suggest something similar to the official\n[monorepo configuration](https://typescript-eslint.io/docs/linting/monorepo).\n\nCreate a `tsconfig.eslint.json` in your repository root, extend your shared compiler options (we use\n[`tsconfig.options.json`](/docs/guides/examples/typescript)), and include all your project files.\n\ntsconfig.eslint.json\n\n```\n{  \"extends\": \"./tsconfig.options.json\",  \"compilerOptions\": {    \"emitDeclarationOnly\": false,    \"noEmit\": true  },  \"include\": [\"apps/**/*\", \"packages/**/*\"]}\n```\n\nAppend the following inputs to your `lint` task.\n\n.moon/tasks/node.yml\n\n```\ntasks:  lint:    # ...    inputs:      # TypeScript support      - 'types/**/*'      - 'tsconfig.json'      - '/tsconfig.eslint.json'      - '/tsconfig.options.json'\n```\n\nAnd lastly, add `parserOptions` to your [root-level config](#root-level).\n\n## Configuration\n\n### Root-level\n\nThe root-level ESLint config is required, as ESLint traverses upwards from each file to find\nconfigurations, and this denotes the stopping point. It's also used to define rules for the entire\nrepository.\n\n.eslintrc.js\n\n```\nmodule.exports = {  root: true, // Required!  extends: ['moon'],  rules: {    'no-console': 'error',  },  // TypeScript support  parser: '@typescript-eslint/parser',  parserOptions: {    project: 'tsconfig.eslint.json',    tsconfigRootDir: __dirname,  },};\n```\n\nThe `.eslintignore` file must also be defined at the root, as\n[only 1 ignore file](https://eslint.org/docs/user-guide/configuring/ignoring-code#the-eslintignore-file)\ncan exist in a repository. We ensure this ignore file is used by passing `--ignore-path` above.\n\n.eslintignore\n\n```\nnode_modules/*.min.js*.map*.snap\n```\n\n### Project-level\n\nA project-level ESLint config can be utilized by creating a `.eslintrc.` in the\nproject root. This is optional, but necessary when defining rules and ignore patterns unique to the\nproject.\n\n/.eslintrc.js\n\n```\nmodule.exports = {  // Patterns to ignore (alongside the root .eslintignore)  ignorePatterns: ['build', 'lib'],  // Project specific rules  rules: {    'no-console': 'off',  },};\n```\n\nThe\n[`extends`](https://eslint.org/docs/user-guide/configuring/configuration-files#extending-configuration-files)\nsetting should not extend the root-level config, as ESLint will automatically merge configs\nwhile traversing upwards!\n\n### Sharing\n\nTo share configuration across projects, you have 3 options:\n\n- Define settings in the [root-level config](#root-level). This only applies to the parent repository.\n\n- Create and publish an [`eslint-config`](https://eslint.org/docs/developer-guide/shareable-configs#using-a-shareable-config) or [`eslint-plugin`](https://eslint.org/docs/developer-guide/working-with-plugins) npm package. This can be used in any repository.\n\n- A combination of 1 and 2.\n\nFor options 2 and 3, if you're utilizing package workspaces, create a local package with the\nfollowing content.\n\npackages/eslint-config-company/index.js\n\n```\nmodule.exports = {  extends: ['airbnb'],};\n```\n\nWithin your root-level ESLint config, you can extend this package to inherit the settings.\n\n.eslintrc.js\n\n```\nmodule.exports = {  extends: 'eslint-config-company',};\n```\n\nWhen using this approach, the package must be built and symlinked into `node_modules` before the\nlinter will run correctly. Take this into account when going down this path!\n\n## FAQ\n\n### How to lint a single file or folder?\n\nUnfortunately, this isn't currently possible, as the `eslint` binary itself requires a file or\nfolder path to operate on, and in the task above we pass `.` (current directory). If this was not\npassed, then nothing would be linted.\n\nThis has the unintended side-effect of not being able to filter down lintable targets by passing\narbitrary file paths. This is something we hope to resolve in the future.\n\nTo work around this limitation, you can create another lint task.\n\n### Should we use `overrides`?\n\nProjects should define their own rules using an ESLint config in their project root. However, if you\nwant to avoid touching many ESLint configs (think migrations), then\n[overrides in the root](https://eslint.org/docs/user-guide/configuring/configuration-files#configuration-based-on-glob-patterns)\nare a viable option. Otherwise, we highly encourage project-level configs.\n\n.eslintrc.js\n\n```\nmodule.exports = {  // ...  overrides: [    // Only apply to apps \"foo\" and \"bar\", but not others    {      files: ['apps/foo/**/*', 'apps/bar/**/*'],      rules: {        'no-magic-numbers': 'off',      },    },  ],};\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 193,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__jest.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/jest\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, jest\n- Summary: In this guide, you'll learn how to integrate [Jest](https://jestjs.io/) into moon.\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/jest\n\n# Jest example\n\nIn this guide, you'll learn how to integrate [Jest](https://jestjs.io/) into moon.\n\nBegin by installing `jest` in your root. We suggest using the same version across the entire\nrepository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev jest\n```\n\n```\nyarn add --dev jest# If using workspacesyarn add --dev -W jest\n```\n\n```\nnpm install --save-dev jest\n```\n\n```\npnpm add --save-dev jest# If using workspacespnpm add --save-dev -w jest\n```\n\n```\nbun install --dev jest\n```\n\n## Setup\n\nSince testing is a universal workflow, add a `test` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  test:    command:      - 'jest'      # Always run code coverage      - '--coverage'      # Dont fail if a project has no tests      - '--passWithNoTests'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Project configs, any format      - 'jest.config.*'\n```\n\nProjects can extend this task and provide additional parameters if need be, for example.\n\n/moon.yml\n\n```\ntasks:  test:    args:      # Disable caching for this project      - '--no-cache'\n```\n\n## Configuration\n\n### Root-level\n\nA root-level Jest config is not required and should be avoided, instead, use a [preset](#sharing) to\nshare configuration.\n\n### Project-level\n\nA project-level Jest config can be utilized by creating a `jest.config.` in the\nproject root. This is optional, but necessary when defining project specific settings.\n\n/jest.config.js\n\n```\nmodule.exports = {  // Project specific settings  testEnvironment: 'node',};\n```\n\n### Sharing\n\nTo share configuration across projects, you can utilize Jest's built-in\n[`preset`](https://jestjs.io/docs/configuration#preset-string) functionality. If you're utilizing\npackage workspaces, create a local package with the following content, otherwise publish the npm\npackage for consumption.\n\npackages/company-jest-preset/jest-preset.js\n\n```\nmodule.exports = {  testEnvironment: 'jsdom',  watchman: true,};\n```\n\nWithin your project-level Jest config, you can extend the preset to inherit the settings.\n\n/jest.config.js\n\n```\nmodule.exports = {  preset: 'company-jest-preset',};\n```\n\nYou can take this a step further by passing the `--preset` option in the [task above](#setup), so\nthat all projects inherit the preset by default.\n\n## FAQ\n\n### How to test a single file or folder?\n\nYou can filter tests by passing a file name, folder name, glob, or regex pattern after `--`. Any\npassed files are relative from the project's root, regardless of where the `moon` command is being\nran.\n\n```\n$ moon run\n:test -- filename\n```\n\n### How to use `projects`?\n\nWith moon, there's no reason to use\n[`projects`](https://jestjs.io/docs/configuration#projects-arraystring--projectconfig) as the `test`\ntask is ran per project. If you'd like to test multiple projects, use\n[`moon run :test`](/docs/commands/run).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 133,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__nest.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/nest\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, nest\n- Summary: In this guide, you'll learn how to integrate [NestJS](https://nestjs.com/) into moon.\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/nest\n\n# Nest example\n\nIn this guide, you'll learn how to integrate [NestJS](https://nestjs.com/) into moon.\n\nBegin by creating a new NestJS project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n```\nnpx @nestjs/cli@latest new nestjs-app --skip-git\n```\n\nView the [official NestJS docs](https://docs.nestjs.com/first-steps) for a more in-depth guide to\ngetting started!\n\n## Setup\n\nSince NestJS is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\n/moon.yml\n\n```\nlayer: 'application'fileGroups:  app:    - 'nest-cli.*'tasks:  dev:    command: 'nest start --watch'    preset: 'server'  build:    command: 'nest build'    inputs:      - '@group(app)'      - '@group(sources)'\n```\n\n### TypeScript integration\n\nNestJS has [built-in support for TypeScript](https://NestJS.io/guide/typescript-configuration), so\nthere is no need for additional configuration to enable TypeScript support.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository.\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as NestJS should be installed per-project, and the\n`nest` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new NestJS project, a [`nest-cli.json`](https://docs.nestjs.com/cli/monorepo) is\ncreated, and must exist in the project root. This allows each project to configure NestJS for\ntheir needs.\n\n/nest-cli.json\n\n```\n{  \"$schema\": \"https://json.schemastore.org/nest-cli\",  \"collection\": \"@nestjs/schematics\",  \"type\": \"application\",  \"root\": \"./\",  \"sourceRoot\": \"src\",  \"compilerOptions\": {    \"tsConfigPath\": \"tsconfig.build.json\"  }}\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 72,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__next.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/next\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, next\n- Summary: In this guide, you'll learn how to integrate [Next.js](https://nextjs.org) into moon.\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/next\n\n# Next example\n\nIn this guide, you'll learn how to integrate [Next.js](https://nextjs.org) into moon.\n\nBegin by creating a new Next.js project at a specified folder path (this should not be created in\nthe workspace root, unless a polyrepo).\n\n```\ncd apps && npx create-next-app\n --typescript\n```\n\nView the [official Next.js docs](https://nextjs.org/learn/basics/create-nextjs-app/setup) for a\nmore in-depth guide to getting started!\n\n## Setup\n\nSince Next.js is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Next.js tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/next).\n\n/moon.yml\n\n```\n# Inherit tasks from the `next` preset# https://github.com/moonrepo/moon-configstags: ['next']\n```\n\n### ESLint integration\n\nNext.js has [built-in support for ESLint](https://nextjs.org/docs/basic-features/eslint), which is\ngreat, but complicates things a bit. Because of this, you have two options for moving forward:\n\n- Use a [global `lint` task](/docs/guides/examples/eslint) and bypass Next.js's solution (preferred).\n\n- Use Next.js's solution only.\n\nRegardless of which option is chosen, the following changes are applicable to all options and should\nbe made. Begin be installing the\n[`eslint-config-next`](https://nextjs.org/docs/basic-features/eslint#eslint-config) dependency in\nthe application's `package.json`.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev eslint-config-next\n```\n\n```\nyarn workspace\n add --dev eslint-config-next\n```\n\n```\nnpm install --save-dev --workspace\n eslint-config-next\n```\n\n```\npnpm add --save-dev --filter\n eslint-config-next\n```\n\n```\nbun install --dev eslint-config-next\n```\n\nSince the Next.js app is located within a subfolder, we'll need to tell the ESLint plugin where to\nlocate it. This can be achieved with a project-level `.eslintrc.js` file.\n\n/.eslintrc.js\n\n```\nmodule.exports = {  extends: 'next', // or 'next/core-web-vitals'  settings: {    next: {      rootDir: __dirname,    },  },};\n```\n\nWith the basics now setup, choose the option that works best for you.\n\n- Global lint\n- Next.js lint\n\nWe encourage using the global `lint` task for consistency across all projects within the repository.\nWith this approach, the `eslint` command itself will be ran and the `next lint` command will be\nignored, but the `eslint-config-next` rules will still be used.\n\nAdditionally, we suggest disabling the linter during the build process, but is not a requirement. As\na potential alternative, add the `lint` task as a dependency for the `build` task.\n\n/next.config.js\n\n```\nmodule.exports = {  eslint: {    ignoreDuringBuilds: true,  },};\n```\n\nIf you'd prefer to use the `next lint` command, add it as a task to the project's\n[`moon.yml`](/docs/config/project).\n\n/moon.yml\n\n```\ntasks:  lint:    command: 'next lint'    inputs:      - '@group(next)'\n```\n\nFurthermore, if a global `lint` task exists, be sure to exclude it from being inherited.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['lint']\n```\n\n### TypeScript integration\n\nNext.js also has\n[built-in support for TypeScript](https://nextjs.org/docs/basic-features/typescript), but has\nsimilar caveats to the [ESLint integration](#eslint-integration). TypeScript itself is a bit\ninvolved, so we suggest reading the official Next.js documentation before continuing.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository.\n\nAdditionally, we suggest disabling the typechecker during the build process, but is not a\nrequirement. As a potential alternative, add the `typecheck` task as a dependency for the `build`\ntask.\n\n/next.config.js\n\n```\nmodule.exports = {  typescript: {    ignoreBuildErrors: true,  },};\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Next.js should be installed per-project, and the\n`next` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Next.js project, a\n[`next.config.`](https://nextjs.org/docs/api-reference/next.config.js/introduction) is\ncreated, and must exist in the project root. This allows each project to configure Next.js for\ntheir needs.\n\n/next.config.js\n\n```\nmodule.exports = {  compress: true,};\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 179,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__nuxt.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/nuxt\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, nuxt\n- Summary: In this guide, you'll learn how to integrate [Nuxt v3](https://nuxt.com), a [Vue](/docs/guides/examples/vue) framework,\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/nuxt\n\n# Nuxt example\n\nIn this guide, you'll learn how to integrate [Nuxt v3](https://nuxt.com), a [Vue](/docs/guides/examples/vue) framework,\ninto moon.\n\nBegin by creating a new Nuxt project at a specified folder path (this should not be created in the\nworkspace root, unless a polyrepo).\n\n```\ncd apps && npx nuxi init\n\n```\n\nView the [official Nuxt docs](https://nuxt.com/docs/getting-started/installation) for a more\nin-depth guide to getting started!\n\n## Setup\n\nSince Nuxt is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\n/moon.yml\n\n```\nfileGroups:  nuxt:    - 'assets/**/*'    - 'components/**/*'    - 'composables/**/*'    - 'content/**/*'    - 'layouts/**/*'    - 'middleware/**/*'    - 'pages/**/*'    - 'plugins/**/*'    - 'public/**/*'    - 'server/**/*'    - 'utils/**/*'    - '.nuxtignore'    - 'app.config.*'    - 'app.vue'    - 'nuxt.config.*'tasks:  nuxt:    command: 'nuxt'    preset: 'server'  # Production build  build:    command: 'nuxt build'    inputs:      - '@group(nuxt)'    outputs:      - '.nuxt'      - '.output'  # Development server  dev:    command: 'nuxt dev'    preset: 'server'  # Preview production build locally  preview:    command: 'nuxt preview'    deps:      - '~:build'    preset: 'server'\n```\n\nBe sure to keep the `postinstall` script in your project's `package.json`.\n\n/package.json\n\n```\n{  // ...  \"scripts\": {    \"postinstall\": \"nuxt prepare\"  }}\n```\n\n### ESLint integration\n\nRefer to our [Vue documentation](/docs/guides/examples/vue#eslint-integration) for more information on linting.\n\n### TypeScript integration\n\nNuxt requires `vue-tsc` for typechecking, so refer to our\n[Vue documentation](/docs/guides/examples/vue#typescript-integration) for more information.\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Nuxt should be installed per-project, and the\n`nuxt` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Nuxt project, a\n[`nuxt.config.ts`](https://v3.nuxtjs.org/api/configuration/nuxt-config) is created, and must exist\nin the project root. This allows each project to configure Next.js for their needs.\n\n/nuxt.config.ts\n\n```\nexport default defineNuxtConfig({});\n```\n\n## Testing\n\nNuxt supports testing through [Jest](https://jestjs.io/) or [Vitest](https://vitest.dev/). Refer to\nour [Jest documentation](/docs/guides/examples/jest) or [Vitest documentation](/docs/guides/examples/vite) for more information on testing.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 87,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__packemon.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/packemon\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, packemon\n- Summary: In this guide, you'll learn how to integrate [Packemon](https://packemon.dev/) into moon. Packemon\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/packemon\n\n# Packemon example\n\nIn this guide, you'll learn how to integrate [Packemon](https://packemon.dev/) into moon. Packemon\nis a tool for properly building npm packages for distribution, it does this by providing the\nfollowing functionality:\n\n- Compiles source code to popular formats: CJS, MJS, ESM, UMD, etc.\n\n- Validates the `package.json` for incorrect fields or values.\n\n- Generates `exports` mappings for `package.json` based on the define configuration.\n\n- And many more [optimizations and features](https://packemon.dev/docs/features)!\n\nBegin by installing `packemon` in your root. We suggest using the same version across the entire\nrepository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev packemon\n```\n\n```\nyarn add --dev packemon# If using workspacesyarn add --dev -W packemon\n```\n\n```\nnpm install --save-dev packemon\n```\n\n```\npnpm add --save-dev packemon# If using workspacespnpm add --save-dev -w packemon\n```\n\n```\nbun install --dev packemon\n```\n\n## Setup\n\nSince Packemon is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Packemon tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/packemon).\n\n/moon.yml\n\n```\n# Inherit tasks from the `packemon` preset# https://github.com/moonrepo/moon-configstags: ['packemon']# Set the output formatstasks:  build:    outputs:      - 'cjs'\n```\n\n### TypeScript integration\n\nPackemon has built-in support for TypeScript, but to not conflict with a\n[typecheck task](/docs/guides/examples/typescript), a separate `tsconfig.json` file is required, which is named\n`tsconfig..json`.\n\nThis config is necessary to only compile source files, and to not include unwanted files in the\ndeclaration output directory.\n\ntsconfig.esm.json\n\n```\n{  \"extends\": \"../../tsconfig.options.json\",  \"compilerOptions\": {    \"outDir\": \"esm\",    \"rootDir\": \"src\"  },  \"include\": [\"src/**/*\"],  \"references\": []}\n```\n\n### Build targets\n\nTo configure the target platform(s) and format(s), you must define a\n[`packemon` block](https://packemon.dev/docs/config) in the project's `package.json`. The chosen\nformats must also be listed as `outputs` in the task.\n\npackage.json\n\n```\n{  \"name\": \"package\",  // ...  \"packemon\": {    \"format\": \"esm\",    \"platform\": \"browser\"  }}\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 105,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__prettier.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/prettier\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, prettier\n- Summary: In this guide, you'll learn how to integrate [Prettier](https://prettier.io/) into moon.\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/prettier\n\n# Prettier example\n\nIn this guide, you'll learn how to integrate [Prettier](https://prettier.io/) into moon.\n\nBegin by installing `prettier` in your root. We suggest using the same version across the entire\nrepository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev prettier\n```\n\n```\nyarn add --dev prettier# If using workspacesyarn add --dev -W prettier\n```\n\n```\nnpm install --save-dev prettier\n```\n\n```\npnpm add --save-dev prettier# If using workspacespnpm add --save-dev -w prettier\n```\n\n```\nbun install --dev prettier\n```\n\n## Setup\n\nSince code formatting is a universal workflow, add a `format` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  format:    command:      - 'prettier'      # Use the same config for the entire repo      - '--config'      - '@in(4)'      # Use the same ignore patterns as well      - '--ignore-path'      - '@in(3)'      # Fail for unformatted code      - '--check'      # Run in current dir      - '.'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Config and other files      - '**/*.{md,mdx,yml,yaml,json}'      # Root configs, any format      - '/.prettierignore'      - '/.prettierrc.*'\n```\n\n## Configuration\n\n### Root-level\n\nThe root-level Prettier config is required, as it defines conventions and standards to apply to\nthe entire repository.\n\n.prettierrc.js\n\n```\nmodule.exports = {  arrowParens: 'always',  semi: true,  singleQuote: true,  tabWidth: 2,  trailingComma: 'all',  useTabs: true,};\n```\n\nThe `.prettierignore` file must also be defined at the root, as\n[only 1 ignore file](https://prettier.io/docs/en/ignore.html#ignoring-files-prettierignore) can\nexist in a repository. We ensure this ignore file is used by passing `--ignore-path` above.\n\n.prettierignore\n\n```\nnode_modules/*.min.js*.map*.snap\n```\n\n### Project-level\n\nWe suggest against project-level configurations, as the entire repository should be formatted\nusing the same standards. However, if you're migrating code and need an escape hatch,\n[overrides in the root](https://prettier.io/docs/en/configuration.html#configuration-overrides) will\nwork.\n\n## FAQ\n\n### How to use `--write`?\n\nUnfortunately, this isn't currently possible, as the `prettier` binary itself requires either the\n`--check` or `--write` options, and since we're configuring `--check` in the task above, that takes\nprecedence. This is also the preferred pattern as checks will run (and fail) in CI.\n\nTo work around this limitation, we suggest the following alternatives:\n\n- Configure your editor to run Prettier on save.\n\n- Define another task to write the formatted code, like `format-write`.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 107,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__react.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/react\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, react\n- Summary: React is an application or library concern, and not a build system one, since the bundling of React\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/react\n\n# React example\n\nReact is an application or library concern, and not a build system one, since the bundling of React\nis abstracted away through another tool like webpack. Because of this, moon has no guidelines around\nutilizing React directly. You can use React however you wish!\n\nHowever, with that being said, we do suggest the following:\n\n- Add `react` and related dependencies to each project, not the root. This includes `@types/react` as well. This will ensure accurate [hashing](/docs/concepts/cache#hashing).\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add react\n```\n\n```\nyarn workspace\n add react\n```\n\n```\nnpm install --workspace\n react\n```\n\n```\npnpm add --filter\n react\n```\n\n```\nbun install react\n```\n\n- Configure Babel with the `@babel/preset-react` preset.\n\n- Configure [TypeScript](/docs/guides/examples/typescript) compiler options with `\"jsx\": \"react-jsx\"`.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 63,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__remix.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/remix\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, remix\n- Summary: In this guide, you'll learn how to integrate [Remix](https://remix.run) into moon.\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/remix\n\n# Remix example\n\nIn this guide, you'll learn how to integrate [Remix](https://remix.run) into moon.\n\nBegin by creating a new Remix project at a specified folder path (this should not be created in the\nworkspace root, unless a polyrepo).\n\n```\ncd apps && npx create-remix\n```\n\nDuring this installation, Remix will ask a handful of questions, but be sure to answer \"No\" for the\n\"Do you want me to run `npm install`?\" question. We suggest installing dependencies at the workspace\nroot via package workspaces!\n\nView the [official Remix docs](https://remix.run/docs/en/v1) for a more in-depth guide to getting\nstarted!\n\n## Setup\n\nSince Remix is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Remix tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/remix).\n\n/moon.yml\n\n```\n# Inherit tasks from the `remix` preset# https://github.com/moonrepo/moon-configstags: ['remix']\n```\n\n### ESLint integration\n\nRemix does not provide a built-in linting abstraction, and instead provides a simple ESLint\nconfiguration package,\n[`@remix-run/eslint-config`](https://www.npmjs.com/package/@remix-run/eslint-config). For the rest\nof this section, we're going to assume that a [global `lint` task](/docs/guides/examples/eslint) has been configured.\n\nBegin be installing the `@remix-run/eslint-config` dependency in the application's `package.json`.\nWe can then enable this configuration by creating an `.eslintrc.js` file in the project root. Be\nsure this file is listed in your `lint` task's inputs!\n\n/.eslintrc.js\n\n```\nmodule.exports = {  extends: ['@remix-run/eslint-config', '@remix-run/eslint-config/node'],  // If using TypeScript  parser: '@typescript-eslint/parser',  parserOptions: {    project: 'tsconfig.json',    tsconfigRootDir: __dirname,  },};\n```\n\n### TypeScript integration\n\nRemix ships with TypeScript support (when enabled during installation), but the `tsconfig.json` it\ngenerates is not setup for TypeScript project references, which we suggest using with a\n[global `typecheck` task](/docs/guides/examples/typescript).\n\nWhen using project references, we suggest the following `tsconfig.json`, which is a mix of Remix and\nmoon. Other compiler options, like `isolatedModules` and `esModuleInterop`, should be declared in a\nshared configuration found in the workspace root (`tsconfig.projectOptions.json` in the example).\n\n/tsconfig.json\n\n```\n{  \"extends\": \"../../tsconfig.projectOptions.json\",  \"compilerOptions\": {    \"baseUrl\": \".\",    \"emitDeclarationOnly\": false,    \"jsx\": \"react-jsx\",    \"resolveJsonModule\": true,    \"moduleResolution\": \"node\",    \"noEmit\": true,    \"paths\": {      \"~/*\": [\"./app/*\"]    }  },  \"include\": [\".eslintrc.js\", \"remix.env.d.ts\", \"**/*\"],  \"exclude\": [\".cache\", \"build\", \"public\"]}\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Remix should be installed per-project, and the\n`remix` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Remix project, a\n[`remix.config.js`](https://remix.run/docs/en/v1/api/conventions) is created, and must exist in\nthe project root. This allows each project to configure Remix for their needs.\n\n/remix.config.js\n\n```\nmodule.exports = {  appDirectory: 'app',};\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 105,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__solid.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/solid\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, solid\n- Summary: [Solid](https://www.solidjs.com) (also known as SolidJS) is a JavaScript framework for building\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/solid\n\n# Solid example\n\n[Solid](https://www.solidjs.com) (also known as SolidJS) is a JavaScript framework for building\ninteractive web applications. Because of this, Solid is an application or library concern, and not a\nbuild system one, since the bundling of Solid is abstracted away through the application or a\nbundler.\n\nWith that being said, we do have some suggestions on utilizing Solid effectively in a monorepo. To\nbegin, install Solid to a project.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add solid-js\n```\n\n```\nyarn workspace\n add solid-js\n```\n\n```\nnpm install --workspace\n solid-js\n```\n\n```\npnpm add --filter\n solid-js\n```\n\n```\nbun install solid-js\n```\n\n## Setup\n\nSolid utilizes JSX for rendering markup, which requires\n[`babel-preset-solid`](https://www.npmjs.com/package/babel-preset-solid) for parsing and\ntransforming. To enable the preset for the entire monorepo, add the preset to a root\n`babel.config.js`, otherwise add it to a `.babelrc.js` in each project that requires it.\n\n```\nmodule.exports = {  presets: ['solid'],};\n```\n\n### TypeScript integration\n\nFor each project using Solid, add the following compiler options to the `tsconfig.json` found in the\nproject root.\n\n/tsconfig.json\n\n```\n{  \"compilerOptions\": {    \"jsx\": \"preserve\",    \"jsxImportSource\": \"solid-js\"  }}\n```\n\n### Vite integration\n\nIf you're using a [Vite](/docs/guides/examples/vite) powered application (Solid Start or starter templates), you should\nenable [`vite-plugin-solid`](https://www.npmjs.com/package/vite-plugin-solid) instead of configuring\nBabel. Be sure to read our [guide on Vite](/docs/guides/examples/vite) as well!\n\n/vite.config.js\n\n```\nimport { defineConfig } from 'vite';import solidPlugin from 'vite-plugin-solid';export default defineConfig({  // ...  plugins: [solidPlugin()],});\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 93,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__storybook.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/storybook\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, storybook\n- Summary: Storybook is a frontend workshop for building UI components and pages in isolation. Thousands of\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/storybook\n\n# Storybook example\n\nStorybook is a frontend workshop for building UI components and pages in isolation. Thousands of\nteams use it for UI development, testing, and documentation. Its open source and free.\n\n[Storybook v7](https://storybook.js.org/docs/7.0) is typically coupled with\n[Vite](https://vitejs.dev/). To scaffold a new Storybook project with Vite, run the following\ncommand in a project root. This guide assumes you are using React, however it is possible to use\nalmost any (meta) framework with Storybook.\n\n```\ncd\n && npx storybook init\n```\n\nWe highly suggest reading our documentation on [using Vite (and Vitest) with moon](/docs/guides/examples/vite) and\n[using Jest with moon](/docs/guides/examples/jest) for a more holistic view.\n\n## Setup\n\nThis section assumes Storybook is being used with Vite, and is integrated on a per-project basis.\n\nAfter setting up Storybook, ensure [`moon.yml`](/docs/config/project) has the following tasks:\n\n/moon.yml\n\n```\nfileGroups:  storybook:    - 'src/**/*'    - 'stories/**/*'    - 'tests/**/*'    - '.storybook/**/*'tasks:  buildStorybook:    command: 'build-storybook --output-dir @out(0)'    inputs:      - '@group(storybook)'    outputs:      - 'build'  storybook:    preset: 'server'    command: 'start-storybook'    inputs:      - '@group(storybook)'\n```\n\nTo run the Storybook development server:\n\n```\nmoon run\n:storybook\n```\n\n### Vite integration\n\nStorybook 7 uses Vite out of the box, and as such, no configuration is required, but should you\nchoose to extend the Vite config, you can do so by passing in `viteFinal`:\n\n.storybook/main.ts\n\n```\nimport { mergeConfig } from 'vite';export default {  stories: ['../stories/**/*.stories.mdx', '../stories/**/*.stories.@(js|jsx|ts|tsx)'],  addons: ['@storybook/addon-links', '@storybook/addon-essentials'],  core: {    builder: '@storybook/builder-vite',  },  async viteFinal(config) {    // Merge custom configuration into the default config    return mergeConfig(config, {      // Use the same \"resolve\" configuration as your app      resolve: (await import('../vite.config.js')).default.resolve,      // Add dependencies to pre-optimization      optimizeDeps: {        include: ['storybook-dark-mode'],      },    });  },};\n```\n\nFor more information on how to integrate Vite with Storybook see the\n[relevant documentation](https://storybook.js.org/docs/7.0/react/builders/vite#configuration).\n\n### Webpack integration\n\nIf you want to use Webpack with your Storybook project, you can do so by installing the relevant\npackage and updating configuration.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev @storybook/builder-webpack5\n```\n\n```\nyarn workspace\n add --dev @storybook/builder-webpack5\n```\n\n```\nnpm install --save-dev --workspace\n @storybook/builder-webpack5\n```\n\n```\npnpm add --save-dev --filter\n @storybook/builder-webpack5\n```\n\n```\nbun install --dev @storybook/builder-webpack5\n```\n\n.storybook/main.ts\n\n```\nexport default {  core: {    builder: '@storybook/builder-webpack5',  },};\n```\n\nFor more information on how to integrate Webpack with Storybook, see the\n[relevant documentation](https://storybook.js.org/docs/7.0/react/builders/webpack).\n\n### Jest integration\n\nYou can use Jest to test your stories, but isn't a requirement. Storybook ships with first-party\nplugins for improved developer experience.\n\nInstall the test runner and any relevant packages:\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\nyarn workspace\n add --dev @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\nnpm install --save-dev --workspace\n @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\npnpm add --save-dev --filter\n @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\nbun install --dev @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\nAdd the test task to your project:\n\n/moon.yml\n\n```\ntasks:  testStorybook:    command: 'test-storybook'    inputs:      - '@group(storybook)'\n```\n\nThen enable plugins and interactions in your Storybook project:\n\n.storybook/main.ts\n\n```\nexport default {  stories: ['../src/**/*.stories.mdx', '../src/**/*.stories.@(js|jsx|ts|tsx)'],  addons: [    // Other Storybook addons    '@storybook/addon-interactions', // Addon is registered here    '@storybook/addon-coverage',  ],  features: {    interactionsDebugger: true, // Enable playback controls  },};\n```\n\nYou can now start writing your tests. For an extended guide on how to write tests within your\nstories, see\n[writing an interaction test](https://storybook.js.org/docs/react/writing-tests/interaction-testing#write-an-interaction-test)\non the Storybook docs.\n\n## Configuration\n\nStorybook requires a `.storybook` folder relative to the project root. Because of this, Storybook\nshould be scaffolded in each project individually. Configuration may be shared through package\nimports.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 178,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__sveltekit.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/sveltekit\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, sveltekit\n- Summary: [SvelteKit](https://kit.svelte.dev) is built on [Svelte](https://svelte.dev), a UI framework that\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/sveltekit\n\n# SvelteKit example\n\n[SvelteKit](https://kit.svelte.dev) is built on [Svelte](https://svelte.dev), a UI framework that\nuses a compiler to let you write breathtakingly concise components that do minimal work in the\nbrowser, using languages you already know  HTML, CSS and JavaScript. It's a love letter to web\ndevelopment.\n\n```\ncd apps && npm create svelte@latest\n\n```\n\nYou will be prompted to choose between select templates, TypeScript, ESLint, Prettier, Playwright\nand Vitest among other options. moon supports and has guides for many of these tools.\n\nWe highly suggest reading our documentation on [using Vite (and Vitest) with moon](/docs/guides/examples/vite),\n[using ESLint with moon](/docs/guides/examples/eslint) and [using Prettier with moon](/docs/guides/examples/prettier) for a more holistic\nview.\n\n## Setup\n\nSince SvelteKit is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting SvelteKit tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/sveltekit).\n\n/moon.yml\n\n```\n# Inherit tasks from the `sveltekit` preset# https://github.com/moonrepo/moon-configstags: ['sveltekit']\n```\n\n### ESLint integration\n\nSvelteKit provides an option to setup ESLint along with your project, with moon you can use a\n[global `lint` task](/docs/guides/examples/eslint). We encourage using the global `lint` task for consistency across all\nprojects within the repository. With this approach, the `eslint` command itself will be ran and the\n`svelte3` rules will still be used.\n\n/moon.yml\n\n```\ntasks:  # Extends the top-level lint  lint:    args:      - '--ext'      - '.ts,.svelte'\n```\n\nBe sure to enable the Svelte parser and plugin in a project local ESLint configuration file.\n\n.eslintrc.cjs\n\n```\nmodule.exports = {  plugins: ['svelte3'],  ignorePatterns: ['*.cjs'],  settings: {    'svelte3/typescript': () => require('typescript'),  },  overrides: [{ files: ['*.svelte'], processor: 'svelte3/svelte3' }],};\n```\n\n### TypeScript integration\n\nSvelteKit also has built-in support for TypeScript, but has similar caveats to the\n[ESLint integration](#eslint-integration). TypeScript itself is a bit involved, so we suggest\nreading the official [SvelteKit documentation](https://kit.svelte.dev/docs/introduction) before\ncontinuing.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository. However, because Svelte isn't standard\nJavaScript, it requires the use of the `svelte-check` command for type-checking.\n\ninfo\n\nThe\n[moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/sveltekit)\nprovides the `check` task below.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['typecheck']tasks:  check:    command: 'svelte-check --tsconfig ./tsconfig.json'    deps:      - 'typecheck-sync'    inputs:      - '@group(svelte)'      - 'tsconfig.json'\n```\n\nIn case Svelte doesn't automatically create a `tsconfig.json`, you can use the following:\n\n/tsconfig.json\n\n```\n{  \"extends\": \"./.svelte-kit/tsconfig.json\",  \"compilerOptions\": {    \"allowJs\": true,    \"checkJs\": true,    \"esModuleInterop\": true,    \"forceConsistentCasingInFileNames\": true,    \"resolveJsonModule\": true,    \"skipLibCheck\": true,    \"sourceMap\": true,    \"strict\": true  }}\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as SvelteKit should be installed per-project, and the\n`vite` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new SvelteKit project, a\n[`svelte.config.js`](https://kit.svelte.dev/docs/configuration) is created, and must exist in the\nproject root. This allows each project to configure SvelteKit for their needs.\n\n/svelte.config.js\n\n```\nimport adapter from '@sveltejs/adapter-auto';import { vitePreprocess } from '@sveltejs/kit/vite';/** @type {import('@sveltejs/kit').Config} */const config = {  // Consult https://kit.svelte.dev/docs/integrations#preprocessors  // for more information about preprocessors  preprocess: vitePreprocess(),  kit: {    adapter: adapter(),  },};export default config;\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 126,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__typescript.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/typescript\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, typescript\n- Summary: In this guide, you'll learn how to integrate [TypeScript](https://www.typescriptlang.org/) into\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/typescript\n\n# TypeScript example\n\nIn this guide, you'll learn how to integrate [TypeScript](https://www.typescriptlang.org/) into\nmoon. We'll be using [project references](/docs/guides/javascript/typescript-project-refs), as it ensures that\nonly affected projects are built, and not the entire repository.\n\nBegin by installing `typescript` and any pre-configured tsconfig packages in your root. We suggest\nusing the same version across the entire repository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev typescript tsconfig-moon\n```\n\n```\nyarn add --dev typescript tsconfig-moon# If using workspacesyarn add --dev -W typescript tsconfig-moon\n```\n\n```\nnpm install --save-dev typescript tsconfig-moon\n```\n\n```\npnpm add --save-dev typescript tsconfig-moon# If using workspacespnpm add --save-dev -w typescript tsconfig-moon\n```\n\n```\nbun install --dev typescript tsconfig-moon\n```\n\n## Setup\n\nSince typechecking is a universal workflow, add a `typecheck` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  typecheck:    command:      - 'tsc'      # Use incremental builds with project references      - '--build'      # Always use pretty output      - '--pretty'      # Use verbose logging to see affected projects      - '--verbose'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Type declarations      - 'types/**/*'      # Project configs      - 'tsconfig.json'      - 'tsconfig.*.json'      # Root configs (extended from only)      - '/tsconfig.options.json'    outputs:      # Matches `compilerOptions.outDir`      - 'lib'\n```\n\nProjects can extend this task and provide additional parameters if need be, for example.\n\n/moon.yml\n\n```\ntasks:  typecheck:    args:      # Force build every time      - '--force'\n```\n\n## Configuration\n\n### Root-level\n\nMultiple root-level TypeScript configs are required, as we need to define compiler options that\nare shared across the repository, and we need to house a list of all project references.\n\nTo start, let's create a `tsconfig.options.json` that will contain our compiler options. In our\nexample, we'll extend [tsconfig-moon](https://www.npmjs.com/package/tsconfig-moon) for convenience.\nSpecifically, the `tsconfig.workspaces.json` config, which enables ECMAScript modules, composite\nmode, declaration emitting, and incremental builds.\n\ntsconfig.options.json\n\n```\n{  \"extends\": \"tsconfig-moon/tsconfig.projects.json\",  \"compilerOptions\": {    // Your custom options    \"moduleResolution\": \"nodenext\",    \"target\": \"es2022\"  }}\n```\n\nWe'll also need the standard `tsconfig.json` to house our project references. This is used by\neditors and tooling for deep integrations.\n\ntsconfig.json\n\n```\n{  \"extends\": \"./tsconfig.options.json\",  \"files\": [],  // All project references in the repo  \"references\": []}\n```\n\nThe [`typescript.rootConfigFileName`](/docs/config/toolchain#rootconfigfilename) setting can be\nused to change the root-level config name and the\n[`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting will\nautomatically keep project references in sync!\n\n### Project-level\n\nEvery project will require a `tsconfig.json`, as TypeScript itself requires it. The following\n`tsconfig.json` will typecheck the entire project, including source and test files.\n\n/tsconfig.json\n\n```\n{  // Extend the root compiler options  \"extends\": \"../../tsconfig.options.json\",  \"compilerOptions\": {    // Declarations are written here    \"outDir\": \"lib\"  },  // Include files in the project  \"include\": [\"src/**/*\", \"tests/**/*\"],  // Depends on other projects  \"references\": []}\n```\n\nThe [`typescript.projectConfigFileName`](/docs/config/toolchain#projectconfigfilename) setting can\nbe used to change the project-level config name.\n\n### Sharing\n\nTo share configuration across projects, you have 3 options:\n\n- Define settings in a [root-level config](#root-level). This only applies to the parent repository.\n\n- Create and publish an [`tsconfig base`](https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#tsconfig-bases) npm package. This can be used in any repository.\n\n- A combination of 1 and 2.\n\nFor options 2 and 3, if you're utilizing package workspaces, create a local package with the\nfollowing content.\n\npackages/tsconfig-company/tsconfig.json\n\n```\n{  \"compilerOptions\": {    // ...    \"lib\": [\"esnext\"]  }}\n```\n\nWithin another `tsconfig.json`, you can extend this package to inherit the settings.\n\ntsconfig.json\n\n```\n{  \"extends\": \"tsconfig-company/tsconfig.json\"}\n```\n\n## FAQ\n\n### How to preserve pretty output?\n\nTypeScript supports a pretty format where it includes codeframes and color highlighting for\nfailures. However, when `tsc` is piped or the terminal is not a TTY, the pretty format is lost. To\npreserve and always display the pretty format, be sure to pass the `--pretty` argument!\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 154,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__vite.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/vite\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, vite\n- Summary: In this guide, you'll learn how to integrate [Vite](https://vitejs.dev/) and\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/vite\n\n# Vite & Vitest example\n\nIn this guide, you'll learn how to integrate [Vite](https://vitejs.dev/) and\n[Vitest](https://vitest.dev/) into moon.\n\nBegin by creating a new Vite project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n\n```\nyarn create vite\n```\n\n```\nyarn create vite\n```\n\n```\nnpm create vite\n```\n\n```\npnpm create vite\n```\n\nIf you plan on using Vitest, run the following command to add the `vitest` dependency to a project,\notherwise skip to the setup section.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev vitest\n```\n\n```\nyarn workspace\n add --dev vitest\n```\n\n```\nnpm install --save-dev --workspace\n vitest\n```\n\n```\npnpm add --save-dev --filter\n vitest\n```\n\n```\nbun install --dev vitest\n```\n\n## Setup\n\nSince Vite is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Vite tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/vite).\n\n/moon.yml\n\n```\n# Inherit tasks from the `vite` and `vitest` presets# https://github.com/moonrepo/moon-configstags: ['vite', 'vitest']\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Vite should be installed per-project, and the\n`vite` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Vite project, a [`vite.config.`](https://vitejs.dev/config) is created,\nand must exist in the project root.\n\n/vite.config.js\n\n```\nimport { defineConfig } from 'vite';export default defineConfig({  // ...  build: {    // These must be `outputs` in the `build` task    outDir: 'dist',  },  test: {    // Vitest settings  },});\n```\n\nIf you'd prefer to configure Vitest in a\n[separate configuration file](https://vitest.dev/guide/#configuring-vitest), create a\n`vitest.config.` file.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 119,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__examples__vue.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/examples/vue\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, examples, vue\n- Summary: Vue is an application or library concern, and not a build system one, since the bundling of Vue is\n----\n\nSource: https://moonrepo.dev/docs/guides/examples/vue\n\n# Vue example\n\nVue is an application or library concern, and not a build system one, since the bundling of Vue is\nabstracted away through other tools. Because of this, moon has no guidelines around utilizing Vue\ndirectly. You can use Vue however you wish!\n\nHowever, with that being said, Vue is typically coupled with [Vite](https://vitejs.dev/). To\nscaffold a new Vue project with Vite, run the following command in a project root.\n\n```\nnpm init vue@latest\n```\n\nWe highly suggest reading our documentation on [using Vite (and Vitest) with moon](/docs/guides/examples/vite) for a\nmore holistic view.\n\n## Setup\n\nThis section assumes Vue is being used with Vite.\n\n### ESLint integration\n\nWhen linting with [ESLint](/docs/guides/examples/eslint) and the\n[`eslint-plugin-vue`](https://eslint.vuejs.org/user-guide/#installation) library, you'll need to\ninclude the `.vue` extension within the `lint` task. This can be done by extending the top-level\ntask within the project (below), or by adding it to the top-level entirely.\n\n/moon.yml\n\n```\ntasks:  lint:    args:      - '--ext'      - '.js,.ts,.vue'\n```\n\nFurthermore, when using TypeScript within ESLint, we need to make a few additional changes to the\n`.eslintrc.js` config found in the root (if the entire repo is Vue), or within the project (if only\nthe project is Vue).\n\n```\nmodule.exports = {  parser: 'vue-eslint-parser',  parserOptions: {    extraFileExtensions: ['.vue'],    parser: '@typescript-eslint/parser',    project: 'tsconfig.json', // Or another config    tsconfigRootDir: __dirname,  },};\n```\n\n### TypeScript integration\n\nVue does not use [TypeScript](/docs/guides/examples/typescript)'s `tsc` binary directly, but instead uses\n[`vue-tsc`](https://vuejs.org/guide/typescript/overview.html), which is a thin wrapper around `tsc`\nto support Vue components. Because of this, we should update the `typecheck` task in the project to\nutilize this command instead.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['typecheck']tasks:  typecheck:    command:      - 'vue-tsc'      - '--noEmit'      # Always use pretty output      - '--pretty'    inputs:      - 'env.d.ts'      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Project configs      - 'tsconfig.json'      - 'tsconfig.*.json'      # Root configs (extended from only)      - '/tsconfig.options.json'\n```\n\nBe sure `tsconfig.json` compiler options are based on\n[`@vue/tsconfig`](https://vuejs.org/guide/typescript/overview.html#configuring-tsconfig-json).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 76,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__extensions.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/extensions\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, extensions\n- Summary: An extension is a WASM plugin that allows you to extend moon with additional functionality, have\n----\n\nSource: https://moonrepo.dev/docs/guides/extensions\n\n# Extensions\n\nv1.20.0\n\nAn extension is a WASM plugin that allows you to extend moon with additional functionality, have\nwhitelisted access to the file system, and receive partial information about the current workspace.\nExtensions are extremely useful in offering new and unique functionality that doesn't need to be\nbuilt into moon's core. It also enables the community to build and share their own extensions!\n\n## Using extensions\n\nBefore an extension can be executed with the [`moon ext`](/docs/commands/ext) command, it must be\nconfigured with the [`extensions`](/docs/config/workspace#extensions) setting in\n[`.moon/workspace.yml`](/docs/config/workspace) (excluding [built-in's](#built-in-extensions)).\n\n.moon/workspace.yml\n\n```\nextensions:  example:    plugin: 'https://example.com/path/to/example.wasm'\n```\n\nOnce configured, it can be executed with [`moon ext`](/docs/commands/ext) by name. Arguments unique to\nthe extension must be passed after a `--` separator.\n\n```\n$ moon ext example -- --arg1 --arg2\n```\n\n## Built-in extensions\n\nmoon is shipped with a few built-in extensions that are configured and enabled by default. Official\nmoon extensions are built and published in our [moonrepo/moon-extensions](https://github.com/moonrepo/moon-extensions) repository.\n\n### `download`\n\nThe `download` extension can be used to download a file from a URL into the current workspace, as\ndefined by the `--url` argument. For example, say we want to download the latest [proto](/proto)\nbinary:\n\n```\n$ moon ext download --\\  --url https://github.com/moonrepo/proto/releases/latest/download/proto_cli-aarch64-apple-darwin.tar.xz\n```\n\nBy default this will download `proto_cli-aarch64-apple-darwin.tar.xz` into the current working\ndirectory. To customize the location, use the `--dest` argument. However, do note that the\ndestination must be within the current moon workspace, as only certain directories are whitelisted\nfor WASM.\n\n```\n$ moon ext download --\\  --url https://github.com/moonrepo/proto/releases/latest/download/proto_cli-aarch64-apple-darwin.tar.xz\\  --dest ./temp\n```\n\n#### Arguments\n\n- `--url` (required) - URL of a file to download.\n\n- `--dest` - Destination folder to save the file. Defaults to the current working directory.\n\n- `--name` - Override the file name. Defaults to the file name in the URL.\n\n### `migrate-nx`v1.22.0\n\nThis extension is currently experimental and will be improved over time.\n\nThe `migrate-nx` extension can be used to migrate an Nx powered repository to moon. This process\nwill convert the root `nx.json` and `workspace.json` files, and any `project.json` and\n`package.json` files found within the repository. The following changes are made:\n\n- Migrates `targetDefaults` as global tasks to [`.moon/tasks/node.yml`](/docs/config/tasks#tasks) (or `bun.yml`), `namedInputs` as file groups, `workspaceLayout` as projects, and more.\n\n- Migrates all `project.json` settings to [`moon.yml`](/docs/config/project#tasks) equivalent settings. Target to task conversion assumes the following: Target `executor` will be removed, and we'll attempt to extract the appropriate npm package command. For example, `@nx/webpack:build` -> `webpack build`.\n\n- Target `options` will be converted to task `args`.\n\n- The `{projectRoot}` and `{workspaceRoot}` interpolations will be replaced with moon tokens.\n\n```\n$ moon ext migrate-nx\n```\n\ncaution\n\nNx and moon are quite different, so many settings are either ignored when converting, or are not a\n1:1 conversion. We do our best to convert as much as possible, but some manual patching will most\nlikely be required! We suggest testing each converted task 1-by-1 to ensure it works as expected.\n\n#### Arguments\n\n- `--bun` - Migrate to Bun based commands instead of Node.js.\n\n- `--cleanup` - Remove Nx configs/files after migrating.\n\n#### Unsupported\n\nThe following features are not supported in moon, and are ignored when converting.\n\n- Most settings in `nx.json`.\n\n- Named input variants: external dependencies, dependent task output files, dependent project inputs, or runtime commands.\n\n- Target `configurations` and `defaultConfiguration`. Another task will be created instead that uses `extends`.\n\n- Project `root` and `sourceRoot`.\n\n### `migrate-turborepo`v1.21.0\n\nThe `migrate-turborepo` extension can be used to migrate a Turborepo powered repository to moon.\nThis process will convert the root `turbo.json` file, and any `turbo.json` files found within the\nrepository. The following changes are made:\n\n- Migrates `pipeline` (v1) and `tasks` (v2) global tasks to [`.moon/tasks/node.yml`](/docs/config/tasks#tasks) (or `bun.yml`) and project scoped tasks to [`moon.yml`](/docs/config/project#tasks). Task commands will execute `package.json` scripts through a package manager.\n\n- Migrates root `global*` settings to [`.moon/tasks/node.yml`](/docs/config/tasks#implicitinputs) (or `bun.yml`) as `implicitInputs`.\n\n```\n$ moon ext migrate-turborepo\n```\n\n#### Arguments\n\n- `--bun` - Migrate to Bun based commands instead of Node.js.\n\n- `--cleanup` - Remove Turborepo configs/files after migrating.\n\n### `unpack`v2.0.0\n\nThe `unpack` extension can be used to unpack an archive (zip/tar) from a file path or URL into a\ndestination folder.\n\n```\n$ moon ext unpack -- --src ./path/to/archive.zip --dest ./output --prefix path/to/strip\n```\n\n#### Arguments\n\n- `--src` (required) - Path or URL of a file to unpack.\n\n- `--dest` - Destination folder to unpack into. Defaults to the current working directory.\n\n- `--prefix` - A prefix path to strip from unpacked files.\n\n## Creating an extension\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins) for more information on how our WASM plugins\nwork, critical concepts to know, how to create a plugin, and more. Once you have a good\nunderstanding, you may continue this specific guide.\n\nnote\n\nRefer to our [moonrepo/moon-extensions](https://github.com/moonrepo/moon-extensions) repository for in-depth examples.\n\n### Registering metadata\n\nBefore we begin, we must implement the `register_extension` function, which simply provides some\nmetadata that we can bubble up to users, or to use for deeper integrations.\n\n```\nuse extism_pdk::*;use moon_pdk::*;#[plugin_fn]pub fn register_extension(Json(input): Json) -> FnResult> {   Ok(Json(ExtensionMetadataOutput {        name: \"Extension name\".into(),        description: Some(\"A description about what the extension does.\".into()),        plugin_version: env!(\"CARGO_PKG_VERSION\").into(),        ..ExtensionMetadataOutput::default()    }))}\n```\n\n#### Configuration schema\n\nIf you are using [configuration](#supporting-configuration), you can register the shape of the\nconfiguration using the [`schematic`](https://crates.io/crates/schematic) crate. This shape will be\nused to generate outputs such as JSON schemas, or TypeScript types.\n\n```\n#[plugin_fn]pub fn register_extension(_: ()) -> FnResult> {    Ok(Json(ExtensionMetadataOutput {        // ...        config_schema: Some(schematic::SchemaBuilder::generate::()),    }))}\n```\n\nSchematic is a heavy library, so we suggest adding the dependency like so:\n\n```\n[dependencies]schematic = { version = \"*\", default-features = false, features = [\"schema\"] }\n```\n\n### Implementing execution\n\nExtensions support a single plugin function, `execute_extension`, which is called by the\n[`moon ext`](/docs/commands/ext) command to execute the extension. This is where all your business\nlogic will reside.\n\n```\n#[host_fn]extern \"ExtismHost\" {    fn host_log(input: Json);}#[plugin_fn]pub fn execute_extension(Json(input): Json) -> FnResult {  host_log!(stdout, \"Executing extension!\");  Ok(())}\n```\n\n### Supporting arguments\n\nMost extensions will require arguments, as it provides a mechanism for users to pass information\ninto the WASM runtime. To parse arguments, we provide the\n[`Args`](https://docs.rs/clap/latest/clap/trait.Args.html) trait/macro from the\n[clap](https://crates.io/crates/clap) crate. Refer to their\n[official documentation on usage](https://docs.rs/clap/latest/clap/_derive/index.html) (we don't\nsupport everything).\n\n```\nuse moon_pdk::*;#[derive(Args)]pub struct ExampleExtensionArgs {  // --url, -u  #[arg(long, short = 'u', required = true)]  pub url: String,}\n```\n\nOnce your struct has been defined, you can parse the provided input arguments using the\n[`parse_args`](https://docs.rs/moon_pdk/latest/moon_pdk/args/fn.parse_args.html) function.\n\n```\n#[plugin_fn]pub fn execute_extension(Json(input): Json) -> FnResult {  let args = parse_args::(&input.args)?;  args.url; // --url  Ok(())}\n```\n\n### Supporting configuration\n\nUsers can configure [extensions](/docs/config/workspace#extensions) with additional settings in\n[`.moon/workspace.yml`](/docs/config/workspace). Do note that settings should be in camelCase for them\nto be parsed correctly!\n\n.moon/workspace.yml\n\n```\nextensions:  example:    plugin: 'file://./path/to/example.wasm'    someSetting: 'abc'    anotherSetting: 123\n```\n\nIn the plugin, we can map these settings (excluding `plugin`) into a struct. The `Default` trait\nmust be implemented to handle situations where settings were not configured, or some are missing.\n\n```\nconfig_struct!(  #[derive(Default)]  pub struct ExampleExtensionConfig {    pub some_setting: String,    pub another_setting: u32,  });\n```\n\nOnce your struct has been defined, you can access the configuration using the\n[`get_extension_config`](https://docs.rs/moon_pdk/latest/moon_pdk/extension/fn.get_extension_config.html)\nfunction.\n\n```\n#[plugin_fn]pub fn execute_extension(Json(input): Json) -> FnResult {  let config = get_extension_config::()?;  config.another_setting; // 123  Ok(())}\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 252,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__javascript__bun-handbook.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/javascript/bun-handbook\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, javascript, bun handbook\n- Summary: Utilizing JavaScript (and TypeScript) in a monorepo can be a daunting task, especially when using\n----\n\nSource: https://moonrepo.dev/docs/guides/javascript/bun-handbook\n\n# Bun handbook\n\nUtilizing JavaScript (and TypeScript) in a monorepo can be a daunting task, especially when using\nBun (or Node.js), as there are many ways to structure your code and to configure your tools. With\nthis handbook, we'll help guide you through this process.\n\ninfo\n\nThis guide is a living document and will continue to be updated over time!\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable JavaScript support via Bun, define the [`bun`](/docs/config/toolchain#bun) setting in\n[`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Bunbun: {}\n```\n\ninfo\n\nIn moon v1.40+, use `javascript` and `bun` instead of `bun` to enable the new WASM powered Bun\ntoolchain, which is far more accurate and efficient. The non-WASM toolchain will be deprecated in\nthe future.\n\nOr by pinning a `bun` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\nbun = \"1.0.0\"\n```\n\nThis will enable the Bun toolchain and provide the following automations around its ecosystem:\n\n- Node modules will automatically be installed if dependencies in `package.json` have changed, or the lockfile has changed, since the last time a task has ran. We'll also take `package.json` workspaces into account and install modules in the correct location; either the workspace root, in a project, or both.\n\n- Relationships between projects will automatically be discovered based on `dependencies`, `devDependencies`, and `peerDependencies` in `package.json`.\n\n### Utilizing the toolchain\n\nWhen a language is enabled, moon by default will assume that the language's binary is available\nwithin the current environment (typically on `PATH`). This has the downside of requiring all\ndevelopers and machines to manually install the correct version of the language, and to stay in\nsync.\n\nInstead, you can utilize [moon's toolchain](/docs/concepts/toolchain), which will download and\ninstall the language in the background, and ensure every task is executed using the exact version\nacross all machines.\n\nEnabling the toolchain is as simple as defining the [`bun.version`](/docs/config/toolchain#version)\nsetting.\n\n.moon/toolchains.yml\n\n```\n# Enable Bun toolchain with an explicit versionbun:  version: '1.0.0'\n```\n\nVersions can also be defined with [`.prototools`](/docs/proto/config).\n\n### Configuring the toolchain\n\nSince the JavaScript ecosystem supports multiple runtimes, moon is unable to automatically detect\nthe correct runtime for all scenarios. Does the existence of a `package.json` mean Node.js or Bun?\nWe don't know, and default to Node.js because of its popularity.\n\nTo work around this, you can set `toolchain` to \"bun\" at the task-level or project-level.\n\nmoon.yml\n\n```\n# For all tasks in the projecttoolchain:  default: 'bun'tasks:  build:    command: 'webpack'    # For this specific task    toolchain: 'bun'\n```\n\nThe task-level `toolchain.default` only needs to be set if executing a `node_modules` binary! The\n`bun` binary automatically sets the toolchain to Bun.\n\n### Using `package.json` scripts\n\nIf you're looking to prototype moon, or reduce the migration effort to moon tasks, you can configure\nmoon to inherit `package.json` scripts, and internally convert them to moon tasks. This can be\nachieved with the [`bun.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts)\nsetting.\n\n.moon/toolchains.yml\n\n```\nbun:  inferTasksFromScripts: true\n```\n\nOr you can run scripts through `bun run` calls.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'bun run build'\n```\n\n## Handbook\n\ninfo\n\nRefer to the [Node.js handbook](/docs/guides/javascript/node-handbook) for more information on repository structure,\ndependency management, and more. Since both runtimes are extremely similar, the information in that\nhandbook also applies to Bun!\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 134,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__javascript__deno-handbook.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/javascript/deno-handbook\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, javascript, deno handbook\n- Summary: Utilizing Deno in a TypeScript based monorepo can be a non-trivial task. With this handbook, we'll\n----\n\nSource: https://moonrepo.dev/docs/guides/javascript/deno-handbook\n\n# Deno handbook\n\nUtilizing Deno in a TypeScript based monorepo can be a non-trivial task. With this handbook, we'll\nhelp guide you through this process.\n\ninfo\n\nThis guide is a living document and will continue to be updated over time!\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable TypeScript support via Deno, define the [`deno`](/docs/config/toolchain#deno) setting in\n[`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Denodeno: {}# Enable Deno and override default settingsdeno:  lockfile: true\n```\n\nOr by pinning a `deno` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\ndeno = \"1.31.0\"\n```\n\nThis will enable the Deno toolchain and provide the following automations around its ecosystem:\n\n- Automatic handling and caching of lockfiles (when the setting is enabled).\n\n- Relationships between projects will automatically be discovered based on `imports`, `importMap`, and `deps.ts` (currently experimental).\n\n- And more to come!\n\n### Work in progress\n\ncaution\n\nDeno support is currently experimental while we finalize the implementation.\n\nThe following features are not supported:\n\n- `deno.jsonc` files (use `deno.json` instead).\n\n- `files.exclude` are currently considered an input. These will be filtered in a future release.\n\n## Coming soon!\n\nThe handbook is currently being written while we finalize our Deno integration support!\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 77,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__javascript__node-handbook.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/javascript/node-handbook\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, javascript, node handbook\n- Summary: Utilizing JavaScript (and TypeScript) in a monorepo can be a daunting task, especially when using\n----\n\nSource: https://moonrepo.dev/docs/guides/javascript/node-handbook\n\n# Node.js handbook\n\nUtilizing JavaScript (and TypeScript) in a monorepo can be a daunting task, especially when using\nNode.js, as there are many ways to structure your code and to configure your tools. With this\nhandbook, we'll help guide you through this process.\n\ninfo\n\nThis guide is a living document and will continue to be updated over time!\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable JavaScript support via Node.js, define the [`node`](/docs/config/toolchain#node) setting\nin [`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Node.jsnode: {}# Enable Node.js and override default settingsnode:  packageManager: 'pnpm'\n```\n\ninfo\n\nIn moon v1.40+, use `javascript` and `node` instead of `node` to enable the new WASM powered Node.js\ntoolchain, which is far more accurate and efficient. The non-WASM toolchain will be deprecated in\nthe future.\n\nOr by pinning a `node` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\nnode = \"18.0.0\"pnpm = \"7.29.0\"\n```\n\nThis will enable the Node.js toolchain and provide the following automations around its ecosystem:\n\n- Node modules will automatically be installed if dependencies in `package.json` have changed, or the lockfile has changed, since the last time a task has ran. We'll also take `package.json` workspaces into account and install modules in the correct location; either the workspace root, in a project, or both.\n\n- Relationships between projects will automatically be discovered based on `dependencies`, `devDependencies`, and `peerDependencies` in `package.json`. The versions of these packages will also be automatically synced when changed.\n\n- Tasks can be [automatically inferred](/docs/config/toolchain#infertasksfromscripts) from `package.json` scripts.\n\n- And much more!\n\n### Utilizing the toolchain\n\nWhen a language is enabled, moon by default will assume that the language's binary is available\nwithin the current environment (typically on `PATH`). This has the downside of requiring all\ndevelopers and machines to manually install the correct version of the language, and to stay in\nsync.\n\nInstead, you can utilize [moon's toolchain](/docs/concepts/toolchain), which will download and\ninstall the language in the background, and ensure every task is executed using the exact version\nacross all machines.\n\nEnabling the toolchain is as simple as defining the [`node.version`](/docs/config/toolchain#version)\nsetting.\n\n.moon/toolchains.yml\n\n```\n# Enable Node.js toolchain with an explicit versionnode:  version: '18.0.0'\n```\n\nVersions can also be defined with [`.prototools`](/docs/proto/config).\n\n### Using `package.json` scripts\n\nIf you're looking to prototype moon, or reduce the migration effort to moon tasks, you can configure\nmoon to inherit `package.json` scripts, and internally convert them to moon tasks. This can be\nachieved with the [`node.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts)\nsetting.\n\n.moon/toolchains.yml\n\n```\nnode:  inferTasksFromScripts: true\n```\n\nOr you can run scripts through `npm run` (or `pnpm`, `yarn`) calls.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'npm run build'\n```\n\n## Repository structure\n\nJavaScript monorepo's work best when projects are split into applications and packages, with each\nproject containing its own `package.json` and dependencies. A root `package.json` must also exist\nthat pieces all projects together through workspaces.\n\nFor small repositories, the following structure typically works well:\n\n```\n/ .moon/ package.json apps/    client/|   |    ...   |    package.json    server/|        ...        package.json packages/     components/    |    ...        package.json     theme/    |    ...        package.json     utils/         ...         package.json\n```\n\nFor large repositories, grouping projects by team or department helps with ownership and\norganization. With this structure, applications and libraries can be nested at any depth.\n\n```\n/ .moon/ package.json infra/    ... internal/    ... payments/    ... shared/     ...\n```\n\n### Applications\n\nApplications are runnable or executable, like an HTTP server, and are pieced together with packages\nand its own encapsulated code. They represent the whole, while packages are the pieces. Applications\ncan import and depend on packages, but they must not import and depend on other applications.\n\nIn moon, you can denote a project as an application using the [`layer`](/docs/config/project#layer)\nsetting in [`moon.yml`](/docs/config/project).\n\nmoon.yml\n\n```\nlayer: 'application'\n```\n\n### Packages\n\nPackages (also known as a libraries) are self-contained reusable pieces of code, and are the\nsuggested pattern for [code sharing](#code-sharing). Packages can import and depend on other\npackages, but they must not import and depend on applications!\n\nIn moon, you can denote a project as a library using the [`layer`](/docs/config/project#layer)\nsetting in [`moon.yml`](/docs/config/project).\n\nmoon.yml\n\n```\nlayer: 'library'\n```\n\n### Configuration\n\nEvery tool that you'll utilize in a repository will have its own configuration file. This will be a\nlot of config files, but regardless of what tool it is, where the config file should go will fall\ninto 1 of these categories:\n\n- Settings are inherited by all projects. These are known as universal tools, and enforce code consistency and quality across the entire repository. Their config file must exist in the repository root, but may support overrides in each project. Examples: Babel, [ESLint](/docs/guides/examples/eslint), [Prettier](/docs/guides/examples/prettier), [TypeScript](/docs/guides/examples/typescript)\n\n- Settings are unique per project. These are developers tools that must be configured separately for each project, as they'll have different concerns. Their config file must exist in each project, but a shared configuration may exist as a base (for example, Jest presets). Examples: [Jest](/docs/guides/examples/jest), [TypeScript](/docs/guides/examples/typescript) (with project references)\n\n- Settings are one-offs. These are typically for applications or tools that require their own config, but aren't prevalent throughout the entire repository. Examples: [Astro](/docs/guides/examples/astro), [Next](/docs/guides/examples/next), [Nuxt](/docs/guides/examples/nuxt), [Remix](/docs/guides/examples/remix), Tailwind\n\n## Dependency management\n\nDependencies, also known as node modules, are required by all projects, and are installed through a\npackage manager like npm, pnpm, or yarn. It doesn't matter which package manager you choose, but we\nhighly suggest choosing one that has proper workspaces support. If you're unfamiliar with\nworkspaces, they will:\n\n- Resolve all `package.json`'s in a repository using glob patterns.\n\n- Install dependencies from all `package.json`'s at once, in the required locations.\n\n- Create symlinks of local packages in `node_modules` (to emulate an installed package).\n\n- Deduplicate and hoist `node_modules` when applicable.\n\nAll of this functionality enables robust monorepo support, and can be enabled with the following:\n\n- npm\n- pnpm\n- Yarn\n- Yarn (classic)\n\npackage.json\n\n```\n{  // ...  \"workspaces\": [\"apps/*\", \"packages/*\"]}\n```\n\n.yarnrc.yml\n\n```\n# ...nodeLinker: 'node-modules'\n```\n\n- [Documentation](https://yarnpkg.com/features/workspaces)\n\npackage.json\n\n```\n{  // ...  \"workspaces\": [\"apps/*\", \"packages/*\"]}\n```\n\n- [Documentation](https://classic.yarnpkg.com/en/docs/workspaces)\n\npackage.json\n\n```\n{  // ...  \"workspaces\": [\"apps/*\", \"packages/*\"]}\n```\n\n- [Documentation](https://docs.npmjs.com/cli/v8/using-npm/workspaces)\n\npnpm-workspace.yaml\n\n```\npackages:  - 'apps/*'  - 'packages/*'\n```\n\n- [Documentation](https://pnpm.io/workspaces)\n\ncaution\n\nPackage workspaces are not a requirement for monorepos, but they do solve an array of problems\naround module resolution, avoiding duplicate packages in bundles, and general interoperability.\nProceed with caution for non-workspaces setups!\n\n### Workspace commands\n\nThe following common commands can be used for adding, removing, or managing dependencies in a\nworkspace. View the package manager's official documentation for a thorough list of commands.\n\n- npm\n- pnpm\n- Yarn\n- Yarn (classic)\n\nInstall dependencies:\n\n```\nnpm install\n```\n\nAdd a package:\n\n```\n# At the rootnpm install # In a projectnpm install  --workspace\n\n```\n\nRemove a package:\n\n```\n# At the rootnpm install # In a projectnpm install  --workspace\n\n```\n\nUpdate packages:\n\n```\nnpx npm-check-updates --interactive\n```\n\nInstall dependencies:\n\n```\npnpm install\n```\n\nAdd a package:\n\n```\n# At the rootpnpm add # In a projectpnpm add  --filter\n\n```\n\nRemove a package:\n\n```\n# At the rootpnpm remove # In a projectpnpm remove  --filter\n\n```\n\nUpdate packages:\n\n```\npnpm update -i -r --latest\n```\n\nInstall dependencies:\n\n```\nyarn install\n```\n\nAdd a package:\n\n```\n# At the rootyarn add # In a projectyarn workspace\n add\n```\n\nRemove a package:\n\n```\n# At the rootyarn remove # In a projectyarn workspace\n remove\n```\n\nUpdate packages:\n\n```\nyarn upgrade-interactive\n```\n\nInstall dependencies:\n\n```\nyarn install\n```\n\nAdd a package:\n\n```\n# At the rootyarn add  -w# In a projectyarn workspace\n add\n```\n\nRemove a package:\n\n```\n# At the rootyarn remove  -w# In a projectyarn workspace\n remove\n```\n\nUpdate packages:\n\n```\nyarn upgrade-interactive --latest\n```\n\n### Developer tools at the root\n\nWhile not a strict guideline to follow, we've found that installing universal developer tool related\ndependencies (Babel, ESLint, Jest, TypeScript, etc) in the root `package.json` as `devDependencies`\nto be a good pattern for consistency, quality, and the health of the repository. It provides the\nfollowing benefits:\n\n- It ensures all projects are utilizing the same version (and sometimes configuration) of a tool.\n\n- It allows the tool to easily be upgraded. Upgrade once, applied everywhere.\n\n- It avoids conflicting or outdated versions of the same package.\n\nWith that being said, this does not include development dependencies that are unique to a project!\n\n### Product libraries in a project\n\nProduct, application, and or framework specific packages should be installed as production\n`dependencies` in a project's `package.json`. We've found this pattern to work well for the\nfollowing reasons:\n\n- Application dependencies are pinned per project, avoiding accidental regressions.\n\n- Applications can upgrade their dependencies and avoid breaking neighbor applications.\n\n## Code sharing\n\nOne of the primary reasons to use a monorepo is to easily share code between projects. When code is\nco-located within the same repository, it avoids the overhead of the \"build -> version -> publish to\nregistry -> upgrade in consumer\" workflow (when the code is located in an external repository).\n\nCo-locating code also provides the benefit of fast iteration, fast adoption, and easier migration\n(when making breaking changes for example).\n\nWith [package workspaces](#dependency-management), code sharing is a breeze. As mentioned above,\nevery project that contains a `package.json` that is part of the workspace, will be symlinked into\n`node_modules`. Because of this, these packages can easily be imported using their `package.json`\nname.\n\n```\n// Imports from /packages/utils/package.jsonimport utils from '@company/utils';\n```\n\n### Depending on packages\n\nBecause packages are symlinked into `node_modules`, we can depend on them as if they were normal npm\npackages, but with 1 key difference. Since these packages aren't published, they do not have a\nversion to reference, and instead, we can use the special `workspace:^` version (yarn and pnpm only,\nuse `*` for npm).\n\n```\n{  \"name\": \"@company/consumer\",  \"dependencies\": {    \"@company/provider\": \"workspace:^\"  }}\n```\n\nThe `workspace:` version basically means \"use the package found in the current workspace\". The `:^`\ndetermines the version range to substitute with when publishing. For example, the `workspace:^`\nabove would be replaced with version of `@company/provider` as `^` when the\n`@company/consumer` package is published.\n\nThere's also `workspace:~` and `workspace:*` which substitutes to `~` and ``\nrespectively. We suggest using `:^` so that version ranges can be deduped.\n\n### Types of packages\n\nWhen sharing packages in a monorepo, there's typically 3 different kinds of packages:\n\n#### Local only\n\nA local only package is just that, it's only available locally to the repository and is not\npublished to a registry, and is not available to external repositories. For teams and companies\nthat utilize a single repository, this will be the most common type of package.\n\nA benefit of local packages is that they do not require a build step, as source files can be\nimported directly ([when configured correctly](#bundler-integration)). This avoids a lot of\n`package.json` overhead, especially in regards to `exports`, `imports`, and other import patterns.\n\n#### Internally published\n\nAn internal package is published to a private registry, and is not available to the public.\nPublished packages are far more strict than local packages, as the `package.json` structure plays a\nmuch larger role for downstream consumers, as it dictates how files are imported, where they can be\nfound, what type of formats are supported (CJS, ESM), so on and so forth.\n\nPublished packages require a build step, for both source code and TypeScript types (when\napplicable). We suggest using [esbuild](https://esbuild.github.io/) or\n[Packemon](/docs/guides/examples/packemon) to handle this entire flow. With that being said, local projects\ncan still [import their source files](#bundler-integration).\n\n#### Externally published\n\nAn external package is structured similarly to an internal package, but instead of publishing to a\nprivate registry, it's published to the npm public registry.\n\nExternal packages are primarily for open source projects, and require the repository to also be\npublic.\n\n### Bundler integration\n\nCo-locating packages is great, but how do you import and use them effectively? The easiest solution\nis to configure resolver aliases within your bundler (Webpack, Vite, etc). By doing so, you enable\nthe following functionality:\n\n- Avoids having to build (and rebuild) the package everytime its code changes.\n\n- Enables file system watching of the package, not just the application.\n\n- Allows for hot module reloading (HMR) to work.\n\n- Package code is transpiled and bundled alongside application code.\n\n- Vite\n- Webpack\n\nvite.config.ts\n\n```\nimport path from 'path';import { defineConfig } from 'vite';export default defineConfig({  // ...  resolve: {    alias: {      '@company/utils': path.join(__dirname, '../packages/utils/src'),    },  },});\n```\n\nwebpack.config.js\n\n```\nconst path = require('path');module.exports = {  // ...  resolve: {    alias: {      '@company/utils': path.join(__dirname, '../packages/utils/src'),    },  },};\n```\n\ninfo\n\nWhen configuring aliases, we suggest using the `package.json` name as the alias! This ensures that\non the consuming side, you're using the package as if it's a normal node module, and avoids\ndeviating from the ecosystem.\n\n### TypeScript integration\n\nWe suggest using TypeScript project references. Luckily, we have an\n[in-depth guide on how to properly and efficiently integrate them](/docs/guides/javascript/typescript-project-refs)!\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 490,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__javascript__typescript-eslint.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/javascript/typescript-eslint\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, javascript, typescript eslint\n- Summary: A handful of ESLint rules are not compatible with the TypeScript plugin, or they cause serious\n----\n\nSource: https://moonrepo.dev/docs/guides/javascript/typescript-eslint\n\n# typescript-eslint\n\n## ESLint integration\n\n### Disabling problematic rules\n\nA handful of ESLint rules are not compatible with the TypeScript plugin, or they cause serious\nperformance degradation, and should be disabled entirely. According to the\n[official typescript-eslint.io documentation](https://typescript-eslint.io/docs/linting/troubleshooting#eslint-plugin-import),\nmost of these rules come from the `eslint-plugin-import` plugin.\n\n.eslintrc.js\n\n```\nmodule.exports = {  // ...  rules: {    'import/default': 'off',    'import/named': 'off',    'import/namespace': 'off',    'import/no-cycle': 'off',    'import/no-deprecated': 'off',    'import/no-named-as-default': 'off',    'import/no-named-as-default-member': 'off',    'import/no-unused-modules': 'off',  },};\n```\n\n### Running from the command line\n\n### Running within editors\n\n#### ESLint\n\nUse the\n[dbaeumer.vscode-eslint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)\nextension. Too avoid poor performance, do not use ESLint for formatting code (via the\n`eslint-plugin-prettier` plugin or something similar), and only use it for linting. The difference\nin speed is comparable to 100ms vs 2000ms.\n\n.vscode/settings.json\n\n```\n{  // Automatically run all linting fixes on save as a concurrent code action,  // and avoid formatting with ESLint. Use another formatter, like Prettier.  \"editor.codeActionsOnSave\": [\"source.fixAll.eslint\"],  \"eslint.format.enable\": false,  // If linting is *too slow* while typing, uncomment the following line to  // only run the linter on save only.  // \"editor.run\": \"onSave\",  // Your package manager of choice.  \"eslint.packageManager\": \"yarn\",  // Use the newer and more performant `ESLint` class implementation.  \"eslint.useESLintClass\": true,  // List of directories that that linter should operate on.  \"eslint.workingDirectories\": [{ \"pattern\": \"apps/*\" }, { \"pattern\": \"packages/*\" }]}\n```\n\n#### Prettier\n\nUse the\n[esbenp.prettier-vscode](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)\nextension.\n\n.vscode/settings.json\n\n```\n{  // Use Prettier as the default formatter for all file types. Types not  // supported by Prettier can be overridden using bracket syntax, or ignore files.  \"editor.defaultFormatter\": \"esbenp.prettier-vscode\",  \"editor.formatOnSave\": true}\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 66,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__javascript__typescript-project-refs.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/javascript/typescript-project-refs\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, javascript, typescript project refs\n- Summary: The ultimate in-depth guide for using TypeScript in a monorepo effectively!\n----\n\nSource: https://moonrepo.dev/docs/guides/javascript/typescript-project-refs\n\n# TypeScript project references\n\nThe ultimate in-depth guide for using TypeScript in a monorepo effectively!\n\nHow to use TypeScript in a monorepo? What are project references? Why use project references? What\nis the best way to use project references? These are just a handful of questions that are\nconstantly asked on Twitter, forums, Stack Overflow, and even your workplace.\n\nBased on years of experience managing large-scale frontend repositories, we firmly believe that\nTypeScript project references are the proper solution for effectively scaling TypeScript in a\nmonorepo. The official\n[TypeScript documentation on project references](https://www.typescriptlang.org/docs/handbook/project-references.html)\nanswers many of these questions, but it basically boils down to the following:\n\n- Project references enforce project boundaries, disallowing imports to arbitrary projects unless they have been referenced explicitly in configuration. This avoids circular references / cycles.\n\n- It enables TypeScript to process individual units, instead of the entire repository as a whole. Perfect for reducing CI and local development times.\n\n- It supports incremental compilation, so only out-of-date or affected projects are processed. The more TypeScript's cache is warmed, the faster it will be.\n\n- It simulates how types work in the Node.js package ecosystem.\n\nThis all sounds amazing but there's got to be some downsides right? Unfortunately, there is:\n\n- Project references require generating declarations to resolve type information correctly. This results in a lot of compilation artifacts littered throughout the repository. There [are ways](#gitignore) [around this](/docs/config/toolchain#routeoutdirtocache).\n\n- This approach is a bit involved and may require some cognitive overhead based on your current level of TypeScript tooling knowledge.\n\nsuccess\n\nIf you'd like a real-world repository to reference, our\n[moonrepo/moon](https://github.com/moonrepo/moon), [moonrepo/dev](https://github.com/moonrepo/dev),\nand [moonrepo/examples](https://github.com/moonrepo/examples) repositories utilizes this\narchitecture!\n\n## Preface\n\nBefore you dive into this questionably long guide, we'd like to preface with:\n\n- This guide is a living document and will continually be updated with best practices and frequently asked questions. Keep returning to learn more!\n\n- This guide assumes a basic level knowledge of TypeScript and how it works.\n\n- The architecture outlined in this guide assumes that TypeScript is only used for typechecking and not compiling. However, supporting compilation should be as easy as modifying a handful of compiler options.\n\n- Although this guide exists within moon's documentation, it does not require moon. We've kept all implementation details generic enough for it be used in any repository, but have also included many notes on how moon would improve this experience.\n\n## Configuration\n\nThe most complicated part of integrating TypeScript in a monorepo is a proper configuration setup.\nBased on our extensive experience, we suggest the following architecture as a base! This is not\nperfect and can most definitely be expanded upon or modified to fit your needs.\n\n### Root-level\n\nIn a polyrepo, the root `tsconfig.json` is typically the only configuration file, as it defines\ncommon compiler options, and includes files to typecheck. In a monorepo, these responsibilities are\nnow split across multiple configuration files.\n\n#### `tsconfig.json`\n\nTo start, the root `tsconfig.json` file is nothing more than a list of all projects in the\nmonorepo, with each project being an individual entry in the `references` field. Each entry must\ncontain a `path` field with a relative file system path to the project root (that contains their\nconfig).\n\nWe also do not define compiler options in this file, as project-level configuration files would\nnot be able to extend this file, as it would trigger a circular reference. Instead, we define\ncommon compiler options in a root [`tsconfig.options.json`](#tsconfigoptionsjson) file, that this\nfile also `extends` from.\n\nIn the end, this file should only contain 3 fields: `extends`, `files` (an empty list), and\n`references`. This abides the\n[official guidance around structure](https://www.typescriptlang.org/docs/handbook/project-references.html#overall-structure).\n\n```\n{  \"extends\": \"./tsconfig.options.json\",  \"files\": [],  \"references\": [    {      \"path\": \"apps/foo\"    },    {      \"path\": \"packages/bar\"    }    // ... more  ]}\n```\n\nWhen using moon, the\n[`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting will\nkeep this `references` list automatically in sync, and the name of the file can be customized with\n[`typescript.rootConfigFileName`](/docs/config/toolchain#rootconfigfilename).\n\n#### `tsconfig.options.json`\n\nThis file will contain common compiler options that will be inherited by all projects in the\nmonorepo. For project references to work correctly, the following settings must be enabled at the\nroot, and typically should not be disabled in each project.\n\n- `composite` - Enables project references and informs the TypeScript program where to find referenced outputs.\n\n- `declaration` - Project references rely on the compiled declarations (`.d.ts`) of external projects. If declarations do not exist, TypeScript will generate them on demand.\n\n- `declarationMap` - Generate sourcemaps for declarations, so that language server integrations in editors like \"Go to\" resolve correctly.\n\n- `incremental` - Enables incremental compilation, greatly improving performance.\n\n- `noEmitOnError` - If the typechecker fails, avoid generating invalid or partial declarations.\n\n- `skipLibCheck` - Avoids eager loading and analyzing all declarations, greatly improving performance.\n\nFurthermore, we have 2 settings that should be enabled per project, depending on the project type.\n\n- `emitDeclarationOnly` - For packages: Emit declarations, as they're required for references, but avoid compiling to JavaScript.\n\n- `noEmit` - For applications: Don't emit declarations, as others should not be depending on the project.\n\nFor convenience, we provide the\n[`tsconfig-moon`](https://github.com/moonrepo/dev/tree/master/packages/tsconfig) package, which\ndefines common compiler options and may be used here.\n\n```\n{  \"compilerOptions\": {    \"composite\": true,    \"declaration\": true,    \"declarationMap\": true,    \"emitDeclarationOnly\": true,    \"incremental\": true,    \"noEmitOnError\": true,    \"skipLibCheck\": true    // ... others  }}\n```\n\nWhen using moon, the name of the file can be customized with\n[`typescript.rootOptionsConfigFileName`](/docs/config/toolchain#rootoptionsconfigfilename).\n\n##### ECMAScript interoperability\n\nECMAScript modules (ESM) have been around for quite a while now, but the default TypeScript settings\nare not configured for them. We suggest the following compiler options if you want proper ESM\nsupport with interoperability with the ecosystem.\n\n```\n{  \"compilerOptions\": {    \"allowSyntheticDefaultImports\": true,    \"esModuleInterop\": true,    \"isolatedModules\": true,    \"module\": \"esnext\",    \"moduleResolution\": \"bundler\",    \"strict\": true,    \"target\": \"esnext\"    // ... others  }}\n```\n\n#### `.gitignore`\n\nProject references unfortunately generate a ton of artifacts that typically shouldn't be committed\nto the repository (but could be if you so choose). We suggest ignoring the following:\n\n.gitignore\n\n```\n# The `outDir` for declarationslib/# Build cache manifests*.tsbuildinfo\n```\n\n### Project-level\n\nEach project that contains TypeScript files and will utilize the typechecker must contain a\n`tsconfig.json` in the project root, typically as a sibling to `package.json`.\n\n#### `tsconfig.json`\n\nA `tsconfig.json` in the root of a project (application or package) is required, as it informs\nTypeScript that this is a project, and that it can be referenced by other projects. In its simplest\nform, this file should extend the root [`tsconfig.options.json`](#tsconfigoptionsjson) to inherit\ncommon compiler options, define its own compiler options (below), define includes/excludes, and any\nnecessary references.\n\nWhen using moon, the name of the file can be customized with\n[`typescript.projectConfigFileName`](/docs/config/toolchain#projectconfigfilename).\n\n- Applications\n- Packages\n\nFor applications, declaration emitting can be disabled, since external projects should not be\nimporting files from an application. If this use case ever arises, move those files into a package.\n\napps/foo/tsconfig.json\n\n```\n{  \"extends\": \"../../../../tsconfig.options.json\",  \"compilerOptions\": {    \"noEmit\": true  },  \"include\": [],  \"references\": []}\n```\n\nFor packages, we must define the location in which to generate declarations. These are the\ndeclarations that external projects would reference. This location is typically\n[gitignored](#gitignore)!\n\npackages/bar/tsconfig.json\n\n```\n{  \"extends\": \"../../../../tsconfig.options.json\",  \"compilerOptions\": {    \"emitDeclarationOnly\": true,    \"outDir\": \"./lib\"  },  \"include\": [],  \"references\": []}\n```\n\nWhen using moon, the `outDir` can automatically be re-routed to a shared cache using\n[`typescript.routeOutDirToCache`](/docs/config/toolchain#routeoutdirtocache), to avoid littering\nthe repository with compilation artifacts.\n\n##### Includes and excludes\n\nBased on experience, we suggest defining `include` instead of `exclude`, as managing a whitelist of\ntypecheckable files is much easier. When dealing with excludes, there are far too many\npossibilities. To start, you have `node_modules`, and for applications maybe `dist`, `build`,\n`.next`, or another application specific folder, and then for packages you may have `lib`, `cjs`,\n`esm`, etc. It becomes very... tedious.\n\nThe other benefit of using `include` is that it forces TypeScript to only load what's necessary,\ninstead of eager loading everything into memory, and for typechecking files that aren't part of\nsource, like configuration.\n\n/tsconfig.json\n\n```\n{  // ...  \"include\": [\"src/**/*\", \"tests/**/*\", \"*.js\", \"*.ts\"]}\n```\n\n##### Depending on other projects\n\nWhen a project depends on another project (by importing code from it), either using relative paths,\n[path aliases](#using-paths-aliases), or its `package.json` name, it must be declared as a\nreference. If not declared, TypeScript will error with a message about importing outside the project\nboundary.\n\n/tsconfig.json\n\n```\n{  // ...  \"references\": [    {      \"path\": \"../../foo\"    },    {      \"path\": \"../../bar\"    },    {      \"path\": \"../../../../baz\"    }  ]}\n```\n\nTo make use of editor intellisense and auto-imports of deeply nested files, you'll most likely need\nto add includes for referenced projects as well.\n\n/tsconfig.json\n\n```\n{  // ...  \"include\": [    // ...    \"src/**/*\",    \"../../foo/src/**/*\",    \"../../bar/src/**/*\",    \"../../../../baz/src/**/*\"  ]}\n```\n\nWhen using moon, the\n[`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting will\nkeep this `references` list automatically in sync, and\n[`typescript.includeProjectReferenceSources`](/docs/config/toolchain#syncprojectreferences) for\n`include`.\n\n#### `tsconfig.*.json`\n\nAdditional configurations may exist in a project that serve a role outside of typechecking, with one\nsuch role being npm package publishing. These configs are sometimes named `tsconfig.build.json`,\n`tsconfig.types.json`, or `tsconfig.lib.json`. Regardless of what they're called, these configs are\noptional, so unless you have a business need for them, you may skip this section.\n\n##### Package publishing\n\nAs mentioned previously, these configs may be used for npm packages, primarily for generating\nTypeScript declarations that are mapped through the `package.json`\n[`types` (or `typings`) field](https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html).\n\nGiven this `package.json`...\n\n/package.json\n\n```\n{  // ...  \"types\": \"./lib/index.d.ts\"}\n```\n\nOur `tsconfig.build.json` may look like...\n\n/tsconfig.build.json\n\n```\n{  \"extends\": \"../../../../tsconfig.options.json\",  \"compilerOptions\": {    \"outDir\": \"lib\",    \"rootDir\": \"src\"  },  \"include\": [\"src/**/*\"]}\n```\n\nSimple right? But why do we need an additional configuration? Why not use the other `tsconfig.json`?\nGreat questions! The major reason is that we only want to publish declarations for source files,\nand the declarations file structure should match 1:1 with the sources structure. The `tsconfig.json`\ndoes not guarantee this, as it may include test, config, or arbitrary files, all of which may not\nexist in the sources directory (`src`), and will alter the output to an incorrect directory\nstructure. Our `tsconfig.build.json` solves this problem by only including source files, and by\nforcing the source root to `src` using the `rootDir` compiler option.\n\nHowever, there is a giant caveat with this approach! Because TypeScript utilizes Node.js's module\nresolution, it will reference the declarations defined by the `package.json` `types` or\n[`exports`](#supporting-packagejson-exports) fields, instead of the `outDir` compiler option, and\nthe other `tsconfig.json` does not guarantee these files will exist. This results in TypeScript\nfailing to find the appropriate types! To solve this, add the `tsconfig.build.json` as a project\nreference to `tsconfig.json`.\n\n/tsconfig.json\n\n```\n{  // ...  \"references\": [    {      \"path\": \"./tsconfig.build.json\"    }    // ... others  ]}\n```\n\n##### Vendor specific\n\nSome vendors, like [Vite](/docs/guides/examples/vite), [Vitest](/docs/guides/examples/vite), and\n[Astro](/docs/guides/examples/astro) may include additional `tsconfig.*.json` files unique to their ecosystem.\nWe suggest following their guidelines and implementation when applicable.\n\n## Running the typechecker\n\nNow that our configuration is place, we can run the typechecker, or attempt to at least! This can be\ndone with the `tsc --build` command, which acts as a\n[build orchestrator](https://www.typescriptlang.org/docs/handbook/project-references.html#build-mode-for-typescript).\nWe also suggest passing `--verbose` for insights into what projects are compiling, and which are\nout-of-date.\n\n### On all projects\n\nFrom the root of the repository, run `tsc --build --verbose` to typecheck all projects, as defined\nin [tsconfig.json](#tsconfigjson). TypeScript will generate a directed acyclic graph (DAG) and\ncompile projects in order so that dependencies and references are resolved correctly.\n\ninfo\n\nWhy run TypeScript in the root? Typically you would only want to run against projects, but for\nsituations where you need to verify that all projects still work, running in the root is the best\napproach. Some such situations are upgrading TypeScript itself, upgrading global `@types` packages,\nupdating shared types, reworking build processes, and more.\n\n### On an individual project\n\nTo only typecheck a single project (and its dependencies), there are 2 approaches. The first is to\nrun from the root, and pass a relative path to the project, such as\n`tsc --build --verbose packages/foo`. The second is to change the working directory to the project,\nand run from there, such as `cd packages/foo && tsc --build --verbose`.\n\nBoth approaches are viable, and either may be used based on your tooling, build system, task runner,\nso on and so forth. This is the approach moon suggests with its\n[`typecheck` task](/docs/guides/examples/typescript).\n\n### On affected projects\n\nIn CI environments, it's nice to only run the typechecker on affected projects  projects that\nhave changed files. While this isn't entirely possible with `tsc`, it is possible with moon! Head\nover to the\n[official docs for more information](/docs/run-task#running-based-on-affected-files-only).\n\n## Using `paths` aliases\n\nPath aliases, also known as path mapping or magic imports, is the concept of defining an import\nalias that re-maps its underlying location on the file system. In TypeScript, this is achieved with\nthe\n[`paths` compiler option](https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping).\n\nIn a monorepo world, we suggest using path aliases on a per-project basis, instead of defining them\n\"globally\" in the root. This gives projects full control of what's available and what they want to\nimport, and also plays nice with the mandatory `baseUrl` compiler option.\n\n/tsconfig.json\n\n```\n{  // ...  \"compilerOptions\": {    // ...    \"baseUrl\": \".\",    \"paths\": {      // Within the project      \":components/*\": [\"./src/components/*\"],      // To a referenced project      \":shared/*\": [\"../../shared/code/*\"]    }  },  \"references\": [    {      \"path\": \"../../shared/code\"    }  ]}\n```\n\nThe above aliases would be imported like the following:\n\n```\n// Beforeimport { Button } from '../../../../components/Button';import utils from '../../shared/code/utils';// Afterimport { Button } from ':components/Button';import utils from ':shared/utils';\n```\n\ninfo\n\nWhen using path aliases, we suggest prefixing or suffixing the alias with `:` so that it's apparent\nthat it's an alias (this also matches the new `node:` import syntax). Using no special character or\n`@` is problematic as it risks a chance of collision with a public npm package and may accidentally\nopen your repository to a\n[supply chain attack](https://snyk.io/blog/npm-security-preventing-supply-chain-attacks/). Other\ncharacters like `~` and `$` have an existing meaning in the ecosystem, so it's best to avoid them\naswell.\n\n### Importing source files from local packages\n\nIf you are importing from a project reference using a `package.json` name, then TypeScript will\nabide by Node.js module resolution logic, and will import using the\n[`main`/`types` or `exports` entry points](https://nodejs.org/api/packages.html#package-entry-points).\nThis means that you're importing compiled code instead of source code, and will require the\npackage to be constantly rebuilt if changes are made to it.\n\nHowever, why not simply import source files instead? With path aliases, you can do just that, by\ndefining a `paths` alias that maps the `package.json` name to its source files, like so.\n\n/tsconfig.json\n\n```\n{  // ...  \"compilerOptions\": {    // ...    \"paths\": {      // Index import      \"@scope/name\": [\"../../shared/package/src/index.ts\"],      // Deep imports      \"@scope/name/*\": [\"../../shared/package/src/*\"]    }  },  \"references\": [    {      \"path\": \"../../shared/package\"    }  ]}\n```\n\nWhen using moon, the\n[`typescript.syncProjectReferencesToPaths`](/docs/config/toolchain#syncprojectreferencestopaths)\nsetting will automatically create `paths` based on the local references.\n\n## Sharing and augmenting types\n\nDeclaring global types, augmenting node modules, and sharing reusable types is a common practice.\nThere are many ways to achieve this, so choose what works best for your repository. We use the\nfollowing pattern with great success.\n\nAt the root of the repository, create a `types` folder as a sibling to `tsconfig.json`. This folder\nmust only contain declarations (`.d.ts`) files for the following reasons:\n\n- Declarations can be `include`ed in a project without having to be a project reference.\n\n- Hard-coded declarations do not need to be compiled from TypeScript files.\n\nBased on the above, update your project's `tsconfig.json` to include all of these types, or just\nsome of these types.\n\n/tsconfig.json\n\n```\n{  // ...  \"include\": [\"src/**/*\", \"../../../../types/**/*\"]}\n```\n\nIn the future, moon will provide a setting to automate this workflow!\n\n## Supporting `package.json` exports\n\nIn Node.js v12, they introduced a new field to `package.json` called `exports` that aims to solve\nthe shortcomings of the `main` field. The `exports` field is very complicated, and instead of\nrepeating all of its implementation details, we suggest reading\n[the official Node.js docs on this topic](https://nodejs.org/api/packages.html#package-entry-points).\n\nWith that being said, TypeScript completely ignored the `exports` field until\n[v4.7](https://devblogs.microsoft.com/typescript/announcing-typescript-4-7/#esm-nodejs), and\nrespecting `exports` is still ignored unless the `moduleResolution` compiler option is set to\n\"nodenext\", \"node16\", or \"bundler\". If `moduleResolution` is set to \"node\", then your integration is\nresolving based on the `main` and `types` field, which are basically \"legacy\".\n\nwarning\n\nEnabling `package.json` imports/exports resolution is very complicated, and may be very tedious,\nespecially considering the state of the npm ecosystem. Proceed with caution!\n\n### State of the npm ecosystem\n\nAs mentioned above, the npm ecosystem (as of November 2022) is in a very fragile state in regards to\nimports/exports. Based on our experience attempting to utilize them in a monorepo, we ran into an\narray of problems, some of which are:\n\n- Published packages are simply utilizing imports/exports incorrectly. The semantics around CJS/ESM are very strict, and they may be configured wrong. This is exacerbated by the new `type` field.\n\n- The `exports` field overrides the `main` and `types` fields. If `exports` exists without type conditions, but the `types` field exists, the `types` entry point is completely ignored, resulting in TypeScript failures.\n\nWith that being said, there are [ways around this](#resolving-issues) and moving forward is\npossible, if you dare!\n\n### Enabling imports/exports resolution\n\nTo start, set the `moduleResolution` compiler option to \"nodenext\" (for packages) or \"bundler\" (for\napps) in the [`tsconfig.options.json`](#tsconfigoptionsjson) file.\n\n```\n{  \"compilerOptions\": {    // ...    \"moduleResolution\": \"nodenext\"  }}\n```\n\nNext, [run the typechecker from the root](#on-all-projects) against all projects. This will help\nuncover all potential issues with the dependencies you're using or the current configuration\narchitecture. If no errors are found, well congratulations, otherwise jump to the next section for\nmore information on [resolving them](#resolving-issues).\n\nIf you're trying to use `exports` in your own packages, ensure that the `types` condition is set,\nand it's the first condition in the mapping! We also suggest including `main` and the top-level\n`types` for tooling that do not support `exports` yet.\n\npackage.json\n\n```\n{  // ...  \"main\": \"./lib/index.js\",  \"types\": \"./lib/index.d.ts\",  \"exports\": {    \"./package.json\": \"./package.json\",    \".\": {      \"types\": \"./lib/index.d.ts\",      \"node\": \"./lib/index.js\"    }  }}\n```\n\ninfo\n\nManaging `exports` is non-trivial. If you'd prefer them to be automatically generated based on a set\nof inputs, we suggest using [Packemon](https://packemon.dev/)!\n\n### Resolving issues\n\nThere's only one way to resolve issues around incorrectly published `exports`, and that is package\npatching, either with [Yarn's patching feature](https://yarnpkg.com/features/protocols/#patch),\n[pnpm's patching feature](https://pnpm.io/cli/patch), or the\n[`patch-package` package](https://www.npmjs.com/package/patch-package). With patching, you can:\n\n- Inject the `types` condition/field if it's missing.\n\n- Re-structure the `exports` mapping if it's incorrect.\n\n- Fix incorrect entry point paths.\n\n- And even fix invalid TypeScript declarations or JavaScript code!\n\npackage.json\n\n```\n{  \"main\": \"./lib/index.js\",  \"types\": \"./lib/index.d.ts\",  \"exports\": {    \"./package.json\": \"./package.json\",-    \".\": \"./lib/index.js\"+    \".\": {+      \"types\": \"./lib/index.d.ts\",+      \"node\": \"./lib/index.js\"+    }  }}\n```\n\ninfo\n\nMore often than not, the owners of these packages may be unaware that their `exports` mapping is\nincorrect. Why not be a good member of the community and report an issue or even submit a pull\nrequest?\n\n## Editor integration\n\nUnfortunately, we only have experience with VS Code. If you prefer another editor and have guidance\nyou'd like to share with the community, feel free to submit a pull request and we'll include it\nbelow!\n\n### VS Code\n\n[VS Code](https://code.visualstudio.com/) has first-class support for TypeScript and project\nreferences, and should \"just work\" without any configuration. You can verify this by restarting the\nTypeScript server in VS Code (with the cmd + shift + p command palette) and navigating to\neach project. Pay attention to the status bar at the bottom, as you'll see this:\n\nWhen this status appears, it means that VS Code is compiling a project. It will re-appear multiple\ntimes, basically for each project, instead of once for the entire repository.\n\nFurthermore, ensure that VS Code is using the version of TypeScript from the `typescript` package in\n`node_modules`. Relying on the version that ships with VS Code may result in unexpected TypeScript\nfailures.\n\n.vscode/settings.json\n\n```\n{  \"typescript.tsdk\": \"node_modules/typescript/lib\"  // Or \"Select TypeScript version\" from the command palette}\n```\n\n## FAQ\n\n### I still have questions, where can I ask them?\n\nWe'd love to answer your questions and help anyway that we can. Feel free to...\n\n- Join the [moonrepo discord](https://discord.gg/qCh9MEynv2) and post your question in the `#typescript` channel.\n\n- Ping me, [Miles Johnson](https://twitter.com/mileswjohnson), on Twitter. I'll try my best to respond to every tweet.\n\n### Do I have to use project references?\n\nShort answer, no. If you have less than say 10 projects, references may be overkill. If your\nrepository is primarily an application, but then has a handful of shared npm packages, references\nmay also be unnecessary here. In the end, it really depends on how many projects exist in the\nmonorepo, and what your team/company is comfortable with.\n\nHowever, we do suggest using project references for very large monorepos (think 100s of projects),\nor repositories with a large number of contributors, or if you merely want to reduce CI typechecking\ntimes.\n\n### What about not using project references and only using source files?\n\nA popular alternative to project references is to simply use the source files as-is, by updating the\n`main` and `types` entry fields within each `package.json` to point to the original TypeScript\nfiles. This approach is also known as \"internal packages\".\n\npackage.json\n\n```\n{  // ...  \"main\": \"./src/index.tsx\",  \"types\": \"./src/index.tsx\"}\n```\n\nWhile this works, there are some downsides to this approach.\n\n- Loading declaration files are much faster than source files.\n\n- You'll lose all the benefits of TypeScript's incremental caching and compilation. TypeScript will consistently load, parse, and evaluate these source files every time. This is especially true for CI environments.\n\n- When using `package.json` workspaces, bundlers and other tools may consider these source files \"external\" as they're found in `node_modules`. This will require custom configuration to allow it.\n\n- It breaks consistency. Consistency with the npm ecosystem, and consistency with how packaging and TypeScript was designed to work. If all packages are internal, then great, but if you have some packages that are published, you now have 2 distinct patterns for \"using packages\" instead of 1.\n\nWith that being said, theres a 3rd alternative that may be the best of both worlds, using project\nreferences and source files,\n[by using `paths` aliases](#importing-source-files-from-local-packages).\n\nAll in all, this is a viable approach if you're comfortable with the downsides listed above. Use the\npattern that works best for your repository, team, or company!\n\n### How to integrate with ESLint?\n\nWe initially included ESLint integration in this guide, but it was very complex and in-depth on its\nown, so we've opted to push it to another guide. Unfortunately, that guide is not yet available, so\nplease come back soon! We'll announce when it's ready.\n\n### How to handle circular references?\n\nProject references do not support\n[circular references](https://github.com/microsoft/TypeScript/issues/33685) (cycles), which is\ngreat, as they are a code smell! If you find yourself arbitrarily importing code from random\nsources, or between 2 projects that depend on each other, then this highlights a problem with your\narchitecture. Projects should be encapsulated and isolated from outside sources, unless explicitly\nallowed through a dependency. Dependencies are \"upstream\", so having them depend on the current\nproject (the \"downstream\"), makes little to no sense.\n\nIf you're trying to adopt project references and are unfortunately hitting the circular reference\nproblem, don't fret, untangling is possible, although non-trivial depending on the size of your\nrepository. It basically boils down to creating an additional project to move coupled code to.\n\nFor example, if project A was importing from project B, and B from A, then the solution would be to\ncreate another project, C (typically a shared npm package), and move both pieces of code into C. A\nand B would then import from C, instead of from each other. We're not aware of any tools that would\nautomate this, or detect cycles, so you'll need to do it manually.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 608,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__mcp.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/mcp\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, mcp\n- Summary: [Model Context Protocol](https://modelcontextprotocol.io) (MCP) is an open standard that enables AI\n----\n\nSource: https://moonrepo.dev/docs/guides/mcp\n\n# MCP integration\n\nv1.37.0\n\n[Model Context Protocol](https://modelcontextprotocol.io) (MCP) is an open standard that enables AI\nmodels to interact with external tools and services through a unified interface. The moon CLI\ncontains an MCP server that you can register with your code editor to allow LLMs to use moon\ndirectly.\n\n## Setup\n\n### Claude Code\n\nTo use [MCP servers in Claude Code](https://docs.anthropic.com/en/docs/claude-code/mcp), run the\nfollowing command in your terminal:\n\n```\nclaude mcp add moon -s project -e MOON_WORKSPACE_ROOT=/absolute/path/to/your/moon/workspace -- moon mcp\n```\n\nOr create an `.mcp.json` file in your project directory.\n\n```\n{  \"mcpServers\": {    \"moon\": {      \"command\": \"moon\",      \"args\": [\"mcp\"],      \"env\": {        \"MOON_WORKSPACE_ROOT\": \"/absolute/path/to/your/moon/workspace\"      }    }  }}\n```\n\n### Cursor\n\nTo use [MCP servers in Cursor](https://docs.cursor.com/context/model-context-protocol), create a\n`.cursor/mcp.json` file in your project directory, or `~/.cursor/mcp.json` globally, with the\nfollowing content:\n\n.cursor/mcp.json\n\n```\n{  \"mcpServers\": {    \"moon\": {      \"command\": \"moon\",      \"args\": [\"mcp\"],      \"env\": {        \"MOON_WORKSPACE_ROOT\": \"/absolute/path/to/your/moon/workspace\"      }    }  }}\n```\n\nOnce configured, the moon MCP server should appear in the \"Available Tools\" section on the MCP\nsettings page in Cursor.\n\n### VS Code\n\nTo use MCP servers in VS Code, you must have the\n[Copilot Chat](https://code.visualstudio.com/docs/copilot/chat/copilot-chat) extension installed.\nOnce installed, create a `.vscode/mcp.json` file with the following content:\n\n.vscode/mcp.json\n\n```\n{  \"servers\": {    \"moon\": {      \"type\": \"stdio\",      \"command\": \"moon\",      \"args\": [\"mcp\"],      // >= 1.102 (June 2025)      \"cwd\": \"${workspaceFolder}\",      // Older versions      \"env\": {        \"MOON_WORKSPACE_ROOT\": \"${workspaceFolder}\"      }    }  }}\n```\n\nOnce your MCP server is configured, you can use it with\n[GitHub Copilots agent mode](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode):\n\n- Open the Copilot Chat view in VS Code\n\n- Enable agent mode using the mode select dropdown\n\n- Toggle on moon's MCP tools using the \"Tools\" button\n\n### Zed\n\nTo use [MCP servers in Zed](https://zed.dev/docs/ai/mcp), create a `.zed/settings.json` file in your\nproject directory, or `~/.config/zed/settings.json` globally, with the following content:\n\n.zed/settings.json\n\n```\n{  \"context_servers\": {    \"moon\": {      \"command\": {        \"path\": \"moon\",        \"args\": [\"mcp\"],        \"env\": {          \"MOON_WORKSPACE_ROOT\": \"/absolute/path/to/your/moon/workspace\"        }      }    }  }}\n```\n\nOnce your MCP server is configured, you'll need to enable the tools using the following steps:\n\n- Open the Agent panel in Zed\n\n- Click the Write/Ask toggle button and go to \"Configure Profiles\"\n\n- Click \"Customize\" in the Ask section\n\n- Click \"Configure MCP Tools\"\n\n- Enable each tool under the \"moon\" section\n\n## Available tools\n\nThe following tools are available in the moon MCP server and can be executed by LLMs using agent\nmode.\n\n- `get_project` - Get a project and its tasks by `id`.\n\n- `get_projects` - Get all projects.\n\n- `get_task` - Get a task by `target`.\n\n- `get_tasks` - Get all tasks.\n\n- `get_touched_files` - Gets touched files between base and head revisions. v1.38.0\n\n- `sync_projects` - Runs the `SyncProject` action for one or many projects by `id`. v1.38.0\n\n- `sync_workspace` - Runs the `SyncWorkspace` action. v1.38.0\n\ninfo\n\nThe\n[request and response shapes](https://github.com/moonrepo/moon/blob/master/packages/types/src/mcp.ts)\nfor these tools are defined as TypeScript types in the\n[`@moonrepo/types`](https://www.npmjs.com/package/@moonrepo/types) package.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 130,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__node__examples.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/node/examples\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, node, examples\n- Summary: Documentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n----\n\nSource: https://moonrepo.dev/docs/guides/node/examples\n\n- [Home](/)\n- JavaScript\n- [Examples](/docs/guides/node/examples)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Node.js examples\n\n[ AngularIn this guide, you'll learn how to integrate Angular into moon.](/docs/guides/examples/angular)\n\n[ AstroIn this guide, you'll learn how to integrate Astro.](/docs/guides/examples/astro)\n\n[ ESLintIn this guide, you'll learn how to integrate ESLint into moon.](/docs/guides/examples/eslint)\n\n[ JestIn this guide, you'll learn how to integrate Jest into moon.](/docs/guides/examples/jest)\n\n[ NestIn this guide, you'll learn how to integrate NestJS into moon.](/docs/guides/examples/nest)\n\n[ NextIn this guide, you'll learn how to integrate Next.js into moon.](/docs/guides/examples/next)\n\n[ NuxtIn this guide, you'll learn how to integrate Nuxt v3, a Vue framework,](/docs/guides/examples/nuxt)\n\n[ PackemonIn this guide, you'll learn how to integrate Packemon into moon. Packemon](/docs/guides/examples/packemon)\n\n[ PrettierIn this guide, you'll learn how to integrate Prettier into moon.](/docs/guides/examples/prettier)\n\n[ ReactReact is an application or library concern, and not a build system one, since the bundling of React](/docs/guides/examples/react)\n\n[ RemixIn this guide, you'll learn how to integrate Remix into moon.](/docs/guides/examples/remix)\n\n[ SolidSolid (also known as SolidJS) is a JavaScript framework for building](/docs/guides/examples/solid)\n\n[ StorybookStorybook is a frontend workshop for building UI components and pages in isolation. Thousands of](/docs/guides/examples/storybook)\n\n[ SvelteKitSvelteKit is built on Svelte, a UI framework that](/docs/guides/examples/sveltekit)\n\n[ TypeScriptIn this guide, you'll learn how to integrate TypeScript into](/docs/guides/examples/typescript)\n\n[ Vite & VitestIn this guide, you'll learn how to integrate Vite and](/docs/guides/examples/vite)\n\n[ VueVue is an application or library concern, and not a build system one, since the bundling of Vue is](/docs/guides/examples/vue)\n\n[TypeScript project references](/docs/guides/javascript/typescript-project-refs)\n\n[Angular](/docs/guides/examples/angular)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 67,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__notifications.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/notifications\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, notifications\n- Summary: moon is able to send operating system desktop notifications for specific events in the action\n----\n\nSource: https://moonrepo.dev/docs/guides/notifications\n\n# Terminal notifications\n\nv1.38.0\n\nmoon is able to send operating system desktop notifications for specific events in the action\npipeline, on behalf of your terminal application. This is useful for continuous feedback loops and\nreacting to long-running commands while multi-tasking.\n\nNotifications are opt-in and must be enabled with the\n[`notify.terminalNotifications`](/docs/config/workspace#terminalnotifications) setting.\n\n.moon/workspace.yml\n\n```\nnotifier:  terminalNotifications: 'always'\n```\n\n## Setup\n\nNotifications must be enabled at the operating system level.\n\n### Linux\n\nLinux support is based on the [XDG specification](https://en.wikipedia.org/wiki/XDG) and utilizes\nD-BUS APIs, primarily the\n[`org.freedesktop.Notifications.Notify`](https://www.galago-project.org/specs/notification/0.9/x408.html#command-notify)\nmethod. Refer to your desktop distribution for more information.\n\nNotifications will be sent using the `moon` application name (the current executable).\n\n### macOS\n\n- Open \"System Settings\" or \"System Preferences\"\n\n- Select \"Notifications\" in the left sidebar\n\n- Select your terminal application from the list (e.g., \"Terminal\", \"iTerm\", etc)\n\n- Ensure \"Allow notifications\" is enabled\n\n- Customize the other settings as desired\n\nNotifications will be sent from your currently running terminal application, derived from the\n`TERM_PROGRAM` environment variable. If we fail to detect the terminal, it will default to \"Finder\".\n\n### Windows\n\nRequires Windows 10 or later.\n\n- Open \"Settings\"\n\n- Go to the \"System\" panel\n\n- Select \"Notifications & Actions\" in the left sidebar\n\n- Ensure notifications are enabled\n\nNotifications will be sent from the \"Windows Terminal\" app if it's currently in use, otherwise from\n\"Microsoft PowerShell\".\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 79,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__offline-mode.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/offline-mode\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, offline mode\n- Summary: moon assumes that an internet connection is always available, as we download and install tools into\n----\n\nSource: https://moonrepo.dev/docs/guides/offline-mode\n\n# Offline mode\n\nmoon assumes that an internet connection is always available, as we download and install tools into\nthe toolchain, resolve versions against upstream manifests, and automatically install dependencies.\nWhile this is useful, having a constant internet connection isn't always viable.\n\nTo support workflows where internet isn't available or is spotty, moon will automatically check for\nan active internet connection, and drop into offline mode if necessary.\n\n## What's disabled when offline\n\nWhen offline, moon will skip or disable the following:\n\n- Automatic dependency installation will be skipped.\n\n- Toolchain will skip resolving, downloading, and installing tools, and instead use the local cache. If no local cache available, will fallback to binaries found on `PATH`.\n\n- If not available on `PATH`, will fail to run.\n\n- Upgrade and version checks will be skipped.\n\n## Toggling modes\n\nWhile we automatically check for an internet connection, both online and offline modes can be forced\nwith the `PROTO_OFFLINE` environment variable. Setting the variable to `1` or `true` will force\noffline mode, while `0` and `false` will force online mode.\n\n## Environment variables\n\nSome additional variables to interact with offline checks.\n\n- `PROTO_OFFLINE_TIMEOUT` - Customize the timeout for offline checks (in milliseconds). Defaults to `750`.\n\n- `PROTO_OFFLINE_HOSTS` - Customize additional hosts/IPs to check for offline status. Separate multiple hosts with a `,`.\n\n- `PROTO_OFFLINE_IP_VERSION` - Customize which IP version to support, `4` or `6`. If not defined, supports both.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 56,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__open-source.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/open-source\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, open source\n- Summary: Although moon was designed for large monorepos, it can also be used for open source projects,\n----\n\nSource: https://moonrepo.dev/docs/guides/open-source\n\n# Open source usage\n\nAlthough moon was designed for large monorepos, it can also be used for open source projects,\nespecially when coupled with our [built-in continuous integration support](/docs/guides/ci).\n\nHowever, a pain point with moon is that it has an explicitly configured version for each tool in the\n[toolchain](/docs/concepts/toolchain), but open source projects typically need to run checks against\nmultiple versions! To mitigate this problem, you can set the matrix value as an environment\nvariable, in the format of `MOON__VERSION`.\n\n.github/workflows/ci.yml\n\n```\nname: 'Pipeline'on:  push:    branches:      - 'master'  pull_request:jobs:  ci:    name: 'CI'    runs-on: ${{ matrix.os }}    strategy:      matrix:        os: ['ubuntu-latest', 'windows-latest']        node-version: [16, 18, 20]    steps:      # Checkout repository      - uses: 'actions/checkout@v4'        with:          fetch-depth: 0      # Install Node.js      - uses: 'actions/setup-node@v6'      # Install dependencies      - run: 'yarn install --immutable'      # Run moon and affected tasks      - run: 'yarn moon ci'        env:          MOON_NODE_VERSION: ${{ matrix.node-version }}\n```\n\ninfo\n\nThis example is only for GitHub actions, but the same mechanism can be applied to other CI\nenvironments.\n\n## Reporting run results\n\nWe also suggest using our\n[`moonrepo/run-report-action`](https://github.com/marketplace/actions/moon-ci-run-reports) GitHub\naction. This action will report the results of a [`moon ci`](/docs/commands/ci) run to a pull request\nas a comment and workflow summary.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      # ...      - run: 'yarn moon ci'      - uses: 'moonrepo/run-report-action@v1'        if: success() || failure()        with:          access-token: ${{ secrets.GITHUB_TOKEN }}\n```\n\nThe report looks something like the following:\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 55,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__pkl-config.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/pkl-config\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, pkl config\n- Summary: While YAML is our official configuration format, we want to support dynamic formats, and as such,\n----\n\nSource: https://moonrepo.dev/docs/guides/pkl-config\n\n# Pkl configuration\n\nv1.32.0\n\nWhile YAML is our official configuration format, we want to support dynamic formats, and as such,\nhave added support for Pkl. What is Pkl? If you haven't heard of Pkl yet,\n[Pkl is a programmable configuration format by Apple](https://pkl-lang.org/). We like Pkl, as it\nmeets the following requirements:\n\n- Is easy to read and write.\n\n- Is dynamic and programmable (loops, variables, etc).\n\n- Has type-safety / built-in schema support.\n\n- Has Rust serde integration.\n\nThe primary requirement that we are hoping to achieve is supporting a configuration format that is\nprogrammable. We want something that has native support for variables, loops, conditions, and\nmore, so that you could curate and compose your configuration very easily. Hacking this\nfunctionality into YAML is a terrible user experience in our opinion!\n\n## Installing Pkl\n\nPkl utilizes a client-server architecture, which means that the `pkl` binary must exist in the\nenvironment for parsing and evaluating `.pkl` files. Jump over to the\n[official documentation for instructions on how to install Pkl](https://pkl-lang.org/main/current/pkl-cli/index.html#installation).\n\nIf you are using [proto](/proto), you can install Pkl with the following commands.\n\n```\nproto plugin add pkl https://raw.githubusercontent.com/milesj/proto-plugins/refs/heads/master/pkl.tomlproto install pkl --pin\n```\n\n## Using Pkl\n\nTo start using Pkl in moon, simply:\n\n- Install [Pkl](#installing-pkl) and the [VS Code extension](https://pkl-lang.org/vscode/current/index.html)\n\n- Create configs with the `.pkl` extension instead of `.yml`\n\ninfo\n\nWe highly suggest reading the Pkl\n[language reference](https://pkl-lang.org/main/current/language-reference/index.html), the\n[standard library](https://pkl-lang.org/main/current/standard-library.html), or looking at our\n[example configurations](#example-configs) when using Pkl.\n\n### Caveats and restrictions\n\nSince this is an entirely new configuration format that is quite dynamic compared to YAML, there are\nsome key differences to be aware of!\n\n- Only files are supported. Cannot use or extend from URLs.\n\n- Each `.pkl` file is evaluated in isolation (loops are processed, variables assigned, etc). This means that task inheritance and file merging cannot extend or infer this native functionality.\n\n- `default` is a [special feature](https://pkl-lang.org/main/current/language-reference/index.html#default-element) in Pkl and cannot be used as a setting name. This only applies to [`template.pkl`](/docs/config/template#default), but can be worked around by using `defaultValue` instead.\n\ntemplate.pkl\n\n```\nvariables {  [\"age\"] {    type = \"number\"    prompt = \"Age?\"    defaultValue = 0}\n```\n\n- `local` is also a reserved word in Pkl. It can be worked around by escaping it with backticks, or you can simply use the [`preset` setting](/docs/config/project#preset) instead.\n\n```\ntasks {  [\"example\"] {    `local` = true    # Or    preset = \"server\"  }}\n```\n\n## Example configs\n\n### `.moon/workspace.pkl`\n\n```\nprojects {  globs = List(\"apps/*\", \"packages/*\")  sources {    [\"root\"] = \".\"  }}vcs {  defaultBranch = \"master\"}\n```\n\n### `.moon/toolchain.pkl`\n\n```\nnode {  version = \"20.15.0\"  packageManager = \"yarn\"  yarn {    version = \"4.3.1\"  }  addEnginesConstraint = false  inferTasksFromScripts = false}\n```\n\n### `moon.pkl`\n\n```\ntype = \"application\"language = \"typescript\"dependsOn = List(\"client\", \"ui\")tasks {  [\"build\"] {    command = \"docusaurus build\"    deps = List(\"^:build\")    outputs = List(\"build\")    options {      interactive = true      retryCount = 3    }  }  [\"typecheck\"] {    command = \"tsc --build\"    inputs = new Listing {      \"@globs(sources)\"      \"@globs(tests)\"      \"tsconfig.json\"      \"/tsconfig.options.json\"    }  }}\n```\n\n## Example functionality\n\n### Loops and conditionals\n\n```\ntasks {  for (_os in List(\"linux\", \"macos\", \"windows\")) {    [\"build-\\(_os)\"] {      command = \"cargo\"      args = List(        \"--target\",        if (_os == \"linux\") \"x86_64-unknown-linux-gnu\"          else if (_os == \"macos\") \"x86_64-apple-darwin\"          else \"i686-pc-windows-msvc\",        \"--verbose\"      )      options {        os = _os      }    }  }}\n```\n\n### Local variables\n\n```\nlocal _sharedInputs = List(\"src/**/*\")tasks {  [\"test\"] {    // ...    inputs = List(\"tests/**/*\") + _sharedInputs  }  [\"lint\"] {    // ...    inputs = List(\"**/*.graphql\") + _sharedInputs  }}\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 125,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__profile.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/profile\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, profile\n- Summary: Troubleshooting slow or unperformant tasks? Profile and diagnose them with ease!\n----\n\nSource: https://moonrepo.dev/docs/guides/profile\n\n# Task profiling\n\nTroubleshooting slow or unperformant tasks? Profile and diagnose them with ease!\n\ncaution\n\nProfiling is only supported by `node` based tasks, and is not supported by tasks that are created\nthrough `package.json` inference, or for packages that ship non-JavaScript code (like Rust or Go).\n\n## CPU snapshots\n\nCPU profiling helps you get a better understanding of which parts of your code require the most CPU\ntime, and how your code is executed and optimized by Node.js. The profiler will measure code\nexecution and activities performed by the engine itself, such as compilation, calls of system\nlibraries, optimization, and garbage collection.\n\n### Record a profile\n\nTo record a CPU profile, pass `--profile cpu` to the [`moon run`](/docs/commands/run) command. When\nsuccessful, the profile will be written to\n`.moon/cache/states/\n//snapshot.cpuprofile`.\n\n```\n$ moon run --profile cpu app:lint\n```\n\n### Analyze in Chrome\n\nCPU profiles can be reviewed and analyzed with\n[Chrome developer tools](https://developer.chrome.com/docs/devtools/) using the following steps.\n\n- Open Chrome and navigate to `chrome://inspect`.\n\n- Under \"Devices\", navigate to \"Open dedicated DevTools for Node\".\n\n- The following window will popup. Ensure the \"Profiler\" tab is selected.\n\n- Click \"Load\" and select the `snapshot.cpuprofile` that was [previously recorded](#record-a-profile). If successful, the snapshot will appear in the left column.\n\nOn macOS, press `command` + `shift` + `.` to display hidden files and folders, to locate the\n`.moon` folder.\n\n- Select the snapshot in the left column. From here, the snapshot can be analyzed and represented with [Bottom up](#bottom-up), [Top down](#top-down), or [Flame chart](#flame-chart) views.\n\n## Heap snapshots\n\nHeap profiling lets you detect memory leaks, dynamic memory problems, and locate the fragments of\ncode that caused them.\n\n### Record a profile\n\nTo record a heap profile, pass `--profile heap` to the [`moon run`](/docs/commands/run) command. When\nsuccessful, the profile will be written to\n`.moon/cache/states/\n//snapshot.heapprofile`.\n\n```\n$ moon run --profile heap app:lint\n```\n\n### Analyze in Chrome\n\nHeap profiles can be reviewed and analyzed with\n[Chrome developer tools](https://developer.chrome.com/docs/devtools/) using the following steps.\n\n- Open Chrome and navigate to `chrome://inspect`.\n\n- Under \"Devices\", navigate to \"Open dedicated DevTools for Node\".\n\n- The following window will popup. Ensure the \"Memory\" tab is selected.\n\n- Click \"Load\" and select the `snapshot.heapprofile` that was [previously recorded](#record-a-profile-1). If successful, the snapshot will appear in the left column.\n\nOn macOS, press `command` + `shift` + `.` to display hidden files and folders, to locate the\n`.moon` folder.\n\n- Select the snapshot in the left column. From here, the snapshot can be analyzed and represented with [Bottom up](#bottom-up), [Top down](#top-down), or [Flame chart](#flame-chart) views.\n\n## Views\n\nChrome DevTools provide 3 views for analyzing activities within a snapshot. Each view gives you a\ndifferent perspective on these activities.\n\n### Bottom up\n\nThe Bottom up view is helpful if you encounter a heavy function and want to find out where it was\ncalled from.\n\n- The \"Self Time\" column represents the aggregated time spent directly in that activity, across all of its occurrences.\n\n- The \"Total Time\" column represents aggregated time spent in that activity or any of its children.\n\n- The \"Function\" column is the function that was executed, including source location, and any children.\n\n### Top down\n\nThe Top down view works in a similar fashion to [Bottom up](#bottom-up), but displays functions\nstarting from the top-level entry points. These are also known as root activities.\n\n### Flame chart\n\nDevTools represents main thread activity with a flame chart. The x-axis represents the recording\nover time. The y-axis represents the call stack. The events on top cause the events below it.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 124,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__remote-cache.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/remote-cache\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, remote cache\n- Summary: Is your CI pipeline running slower than usual? Are you tired of running the same build over and over\n----\n\nSource: https://moonrepo.dev/docs/guides/remote-cache\n\n# Remote caching\n\nIs your CI pipeline running slower than usual? Are you tired of running the same build over and over\nalthough nothing has changed? Do you wish to reuse the same local cache across other machines and\nenvironments? These are just a few scenarios that remote caching aims to solve.\n\nRemote caching is a system that shares artifacts to improve performance, reduce unnecessary\ncomputation time, and alleviate resources. It achieves this by uploading hashed artifacts to a cloud\nstorage provider, like AWS S3 or Google Cloud, and downloading them on demand when a build matches a\nderived hash.\n\nTo make use of remote caching, we provide 2 solutions.\n\n## Self-hosted v1.30.0\n\nThis solution allows you to host any remote caching service that is compatible with the\n[Bazel Remote Execution v2 API](https://github.com/bazelbuild/remote-apis/tree/main/build/bazel/remote/execution/v2),\nsuch as [`bazel-remote`](https://github.com/buchgr/bazel-remote). When using this solution, the\nfollowing RE API features must be enabled:\n\n- Action result caching\n\n- Content addressable storage caching\n\n- SHA256 digest hashing\n\n- gRPC requests\n\nwarning\n\nThis feature and its implementation is currently unstable, and its documentation is incomplete.\nPlease report any issues on GitHub or through Discord!\n\n### Host your service\n\nWhen you have chosen (or built) a compatible service, host it and make it available through gRPC (we\ndo not support HTTP at this time). For example, if you plan to use `bazel-remote`, you can do\nsomething like the following:\n\n```\nbazel-remote --dir /path/to/moon-cache --max_size 10 --storage_mode uncompressed --grpc_address 0.0.0.0:9092\n```\n\nIf you've configured the [`remote.cache.compression`](/docs/config/workspace#compression) setting to\n\"zstd\", you'll need to run the binary with that storage mode as well.\n\n```\nbazel-remote --dir /path/to/moon-cache --max_size 10 --storage_mode zstd --grpc_address 0.0.0.0:9092\n```\n\ninfo\n\nView the official [`bazel-remote`](https://github.com/buchgr/bazel-remote#usage) documentation for\nall the available options, like storing artifacts in S3, configuring authentication (TLS/mTLS),\nproxies, and more.\n\n### Configure remote caching\n\nOnce your service is running, you can enable remote caching by configuring the\n[`remote`](/docs/config/workspace#remote) settings in [`.moon/workspace.yml`](/docs/config/workspace). At\nminimum, the only setting that is required is `host`.\n\n.moon/workspace.yml\n\n```\nremote:  host: 'grpc://your-host.com:9092'\n```\n\n#### TLS and mTLS\n\nWe have rudimentary support for TLS and mTLS, but it's very unstable, and has not been thoroughly\ntested. There's also [many](https://github.com/hyperium/tonic/issues/1652)\n[many](https://github.com/hyperium/tonic/issues/1989)\n[issues](https://github.com/hyperium/tonic/issues/1033) around authentication in Tonic.\n\n.moon/workspace.yml\n\n```\n# TLSremote:  host: 'grpcs://your-host.com:9092'  tls:    cert: 'certs/ca.pem'    domain: 'your-host.com'# mTLSremote:  host: 'grpcs://your-host.com:9092'  mtls:    caCert: 'certs/ca.pem'    clientCert: 'certs/client.pem'    clientKey: 'certs/client.key'    domain: 'your-host.com'\n```\n\n## Cloud-hosted: Depotv1.32.0\n\nIf you'd prefer not to host your own solution, you could use\n[Depot Cache](https://depot.dev/products/cache), a cloud-based caching solution. To make use of\nDepot, follow these steps:\n\n- Create an account on [depot.dev](https://depot.dev)\n\n- Create an organization\n\n- Go to organization settings -> API tokens\n\n- Create a new API token\n\n- Add the token as a `DEPOT_TOKEN` environment variable to your moon pipelines\n\nOnce these steps have been completed, you can enable remote caching in moon with the following\nconfiguration. If your Depot account has more than 1 organization, you'll need to set the\n`X-Depot-Org` header.\n\n.moon/workspace.yml\n\n```\nremote:  host: 'grpcs://cache.depot.dev'  auth:    token: 'DEPOT_TOKEN'    headers:      'X-Depot-Org': ''\n```\n\n## FAQ\n\n#### What is an artifact?\n\nIn the context of moon and remote caching, an artifact is the\n[outputs of a task](/docs/config/project#outputs), as well as the stdout and stderr of the task that\ngenerated the outputs. Artifacts are uniquely identified by the\n[moon generated hash](/docs/concepts/cache#hashing).\n\n#### Do I have to use remote caching?\n\nNo, remote caching is optional. It's intended purpose is to store long lived build artifacts to\nspeed up CI pipelines, and optionally local development. For the most part,\n[`moon ci`](/docs/commands/ci) does a great job of only running what's affected in pull requests, and\nis a great starting point.\n\n#### Does remote caching store source code?\n\nNo, remote caching does not store source code. It stores the\n[outputs of a task](/docs/config/project#outputs), which is typically built and compiled code. To\nverify this, you can inspect the tar archives in `.moon/cache/outputs`.\n\n#### Does moon collect any personally identifiable information?\n\nNo, moon does not collect any PII as part of the remote caching process.\n\n#### Are artifacts encrypted?\n\nWe do not encrypt on moon's side, as encryption is provided by your cloud storage provider.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 156,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__root-project.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/root-project\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, root project\n- Summary: Coming from other repositories or task runner, you may be familiar with tasks available at the\n----\n\nSource: https://moonrepo.dev/docs/guides/root-project\n\n# Root-level project\n\nComing from other repositories or task runner, you may be familiar with tasks available at the\nrepository root, in which one-off, organization, maintenance, or process oriented tasks can be ran.\nmoon supports this through a concept known as a root-level project.\n\nBegin by adding the root to [`projects`](/docs/config/workspace#projects) with a source value of `.`\n(current directory relative from the workspace).\n\n.moon/workspace.yml\n\n```\n# As a mapprojects:  root: '.'# As a list of globsprojects:  - '.'\n```\n\nWhen using globs, the root project's name will be inferred from the repository folder name. Be\nwary of this as it can change based on what a developer has checked out as.\n\nOnce added, create a [`moon.yml`](/docs/config/project) in the root of the repository. From here you\ncan define tasks that can be ran using this new root-level project name, for example,\n`moon run root:`.\n\nmoon.yml\n\n```\ntasks:  versionCheck:    command: 'yarn version check'    inputs: []    options:      cache: false\n```\n\nAnd that's it, but there are a few caveats to be aware of...\n\n## Caveats\n\n### Greedy inputs\n\nwarning\n\nIn moon v1.24, root-level tasks default to no inputs. In previous versions, inputs defaulted to\n`**/*`. This section is only applicable for older moon versions!\n\nTask [`inputs`](/docs/config/project#inputs) default to `**/*`, which would result in root-level tasks\nscanning all files in the repository. This will be a very expensive operation! We suggest\nrestricting inputs to a very succinct whitelist, or disabling inputs entirely.\n\nmoon.yml\n\n```\ntasks:  oneOff:    # ...    inputs: []\n```\n\n### Inherited tasks\n\nBecause a root project is still a project in the workspace, it will inherit all tasks defined in\n[`.moon/tasks/all.yml`](/docs/config/tasks), which may be unexpected. To mitigate this, you can exclude\nsome or all of these tasks in the root config with\n[`workspace.inheritedTasks`](/docs/config/project#inheritedtasks).\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    include: []\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 81,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__rust__handbook.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/rust/handbook\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, rust, handbook\n- Summary: Utilizing Rust in a monorepo is a trivial task, thanks to Cargo, and also moon. With this handbook,\n----\n\nSource: https://moonrepo.dev/docs/guides/rust/handbook\n\n# Rust handbook\n\nUtilizing Rust in a monorepo is a trivial task, thanks to Cargo, and also moon. With this handbook,\nwe'll help guide you through this process.\n\ninfo\n\nmoon is not a build system and does not replace Cargo. Instead, moon runs `cargo` commands, and\nefficiently orchestrates those tasks within the workspace.\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable Rust, define the [`rust`](/docs/config/toolchain#rust) setting in\n[`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Rustrust: {}# Enable Rust and override default settingsrust:  syncToolchainConfig: true\n```\n\nOr by pinning a `rust` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\nrust = \"1.69.0\"\n```\n\nThis will enable the Rust toolchain and provide the following automations around its ecosystem:\n\n- Manifests and lockfiles are parsed for accurate dependency versions for hashing purposes.\n\n- Cargo binaries (in `~/.cargo/bin`) are properly located and executed.\n\n- Automatically sync `rust-toolchain.toml` configuration files.\n\n- For non-workspaces, will inherit `package.name` from `Cargo.toml` as a project alias.\n\n- And more to come!\n\n### Utilizing the toolchain\n\nWhen a language is enabled, moon by default will assume that the language's binary is available\nwithin the current environment (typically on `PATH`). This has the downside of requiring all\ndevelopers and machines to manually install the correct version of the language, and to stay in\nsync.\n\nInstead, you can utilize [moon's toolchain](/docs/concepts/toolchain), which will download and\ninstall the language in the background, and ensure every task is executed using the exact version\nacross all machines.\n\nEnabling the toolchain is as simple as defining the\n[`rust.version`](/docs/config/toolchain#version-2) setting.\n\n.moon/toolchains.yml\n\n```\n# Enable Rust toolchain with an explicit versionrust:  version: '1.69.0'\n```\n\nVersions can also be defined with [`.prototools`](/docs/proto/config).\n\ncaution\n\nmoon requires `rustup` to exist in the environment, and will use this to install the necessary Rust\ntoolchains. This requires Rust to be manually installed on the machine, as moon does not\nauto-install the language, just the toolchains.\n\n## Repository structure\n\nRust/Cargo repositories come in two flavors: a single crate with one `Cargo.toml`, or multiple\ncrates with many `Cargo.toml`s using\n[Cargo workspaces](https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html). The latter is\nhighly preferred as it enables Cargo incremental caching.\n\nRegardless of which flavor your repository uses, in moon, both flavors are a single\n[moon project](/docs/concepts/project). This means that all Rust crates are grouped together into a\nsingle moon project, and the [`moon.yml`](/docs/config/project) file is located at the root relative\nto `Cargo.lock` and the `target` folder.\n\nAn example of this layout is demonstrated below:\n\n- Workspaces\n- Non-workspaces\n\n```\n/ .moon/ crates/    client/|       ...       Cargo.toml    server/|       ...       Cargo.toml    utils/|        ...        Cargo.toml target/ Cargo.lock Cargo.toml moon.yml\n```\n\n```\n/ .moon/ src/    lib.rs tests/    ... target/ Cargo.lock Cargo.toml moon.yml\n```\n\n### Example `moon.yml`\n\nThe following configuration represents a base that covers most Rust projects.\n\n- Workspaces\n- Non-workspaces\n\n/moon.yml\n\n```\nlanguage: 'rust'layer: 'application'env:  CARGO_TERM_COLOR: 'always'fileGroups:  sources:    - 'crates/*/src/**/*'    - 'crates/*/Cargo.toml'    - 'Cargo.toml'  tests:    - 'crates/*/benches/**/*'    - 'crates/*/tests/**/*'tasks:  build:    command: 'cargo build'    inputs:      - '@globs(sources)'  check:    command: 'cargo check --workspace'    inputs:      - '@globs(sources)'  format:    command: 'cargo fmt --all --check'    inputs:      - '@globs(sources)'      - '@globs(tests)'  lint:    command: 'cargo clippy --workspace'    inputs:      - '@globs(sources)'      - '@globs(tests)'  test:    command: 'cargo test --workspace'    inputs:      - '@globs(sources)'      - '@globs(tests)'\n```\n\n/moon.yml\n\n```\nlanguage: 'rust'layer: 'application'env:  CARGO_TERM_COLOR: 'always'fileGroups:  sources:    - 'src/**/*'    - 'Cargo.toml'  tests:    - 'benches/**/*'    - 'tests/**/*'tasks:  build:    command: 'cargo build'    inputs:      - '@globs(sources)'  check:    command: 'cargo check'    inputs:      - '@globs(sources)'  format:    command: 'cargo fmt --check'    inputs:      - '@globs(sources)'      - '@globs(tests)'  lint:    command: 'cargo clippy'    inputs:      - '@globs(sources)'      - '@globs(tests)'  test:    command: 'cargo test'    inputs:      - '@globs(sources)'      - '@globs(tests)'\n```\n\n## Cargo integration\n\nYou can't use Rust without Cargo -- well you could but why would you do that? With moon, we're doing\nour best to integrate with Cargo as much as possible. Here's a few of the benefits we currently\nprovide.\n\n### Global binaries\n\nCargo supports global binaries through the\n[`cargo install`](https://doc.rust-lang.org/cargo/commands/cargo-install.html) command, which\ninstalls a crate to `~/.cargo/bin`, or makes it available through the `cargo ` command. These\nare extremely beneficial for development, but they do require every developer to manually install\nthe crate (and appropriate version) to their machine.\n\nWith moon, this is no longer an issue with the [`rust.bins`](/docs/config/toolchain#bins) setting.\nThis setting requires a list of crates (with optional versions) to install, and moon will install\nthem as part of the task runner install dependencies action. Furthermore, binaries will be installed\nwith [`cargo-binstall`](https://crates.io/crates/cargo-binstall) in an effort to reduce build and\ncompilation times.\n\n.moon/toolchains.yml\n\n```\nrust:  bins:    - 'cargo-make@0.35.0'    - 'cargo-nextest'\n```\n\nAt this point, tasks can be configured to run this binary as a command. The `cargo` prefix is\noptional, as we'll inject it when necessary.\n\n/moon.yml\n\n```\ntasks:  test:    command: 'nextest run --workspace'    toolchain: 'rust'\n```\n\ntip\n\nThe `cargo-binstall` crate may require a `GITHUB_TOKEN` environment variable to make GitHub Releases\nAPI requests, especially in CI. If you're being rate limited, or fail to find a download, try\ncreating a token with necessary permissions.\n\n### Lockfile handling\n\nTo expand our integration even further, we also take `Cargo.lock` into account, and apply the\nfollowing automations when a target is being ran:\n\n- If the lockfile does not exist, we generate one with [`cargo generate-lockfile`](https://doc.rust-lang.org/cargo/commands/cargo-generate-lockfile.html).\n\n- We parse and extract the resolved checksums and versions for more accurate hashing.\n\n## FAQ\n\n### Should we cache the `target` directory as an output?\n\nNo, we don't believe so. Both moon and Cargo support incremental caching, but they're not entirely\ncompatible, and will most likely cause problems when used together.\n\nThe biggest factor is that moon's caching and hydration uses a tarball strategy, where each task\nwould unpack a tarball on cache hit, and archive a tarball on cache miss. The Cargo target directory\nis extremely large (moon's is around 50gb), and coupling this with our tarball strategy is not\nviable. This would cause massive performance degradation.\n\nHowever, at maximum, you could cache the compiled binary itself as an output, instead of the\nentire target directory. Example:\n\nmoon.yml\n\n```\ntasks:  build:    command: 'cargo build --release'    outputs: ['target/release/moon']\n```\n\n### How can we improve CI times?\n\nRust is known for slow build times and CI is no exception. With that being said, there are a few\npatterns to help alleviate this, both on the moon side and outside of it.\n\nTo start, you can cache Rust builds in CI. This is a non-moon solution to the `target` directory\nproblem above.\n\n- If you use GitHub Actions, feel free to use our [moonrepo/setup-rust](https://github.com/moonrepo/setup-rust) action, which has built-in caching.\n\n- A more integrated solution is [sccache](https://crates.io/crates/sccache), which stores build artifacts in a cloud storage provider.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 221,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__sharing-config.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/sharing-config\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, sharing config\n- Summary: For large companies, open source maintainers, and those that love reusability, more often than not\n----\n\nSource: https://moonrepo.dev/docs/guides/sharing-config\n\n# Sharing workspace configuration\n\nFor large companies, open source maintainers, and those that love reusability, more often than not\nyou'll want to use the same configuration across all repositories for consistency. This helps reduce\nthe maintenance burden while ensuring a similar developer experience.\n\nTo help streamline this process, moon provides an `extends` setting in both\n[`.moon/workspace.yml`](/docs/config/workspace#extends),\n[`.moon/toolchains.yml`](/docs/config/toolchain#extends), and\n[`.moon/tasks/all.yml`](/docs/config/tasks#extends). This setting requires a HTTPS URL or relative\nfile system path that points to a valid YAML document for the configuration in question.\n\nA great way to share configuration is by using GitHub's \"raw file view\", as demonstrated below using\nour very own [examples repository](https://github.com/moonrepo/examples).\n\n.moon/tasks/all.yml\n\n```\nextends: 'https://raw.githubusercontent.com/moonrepo/examples/master/.moon/tasks/all.yml'\n```\n\n## Versioning\n\nInheriting an upstream configuration can be dangerous, as the settings may change at any point,\nresulting in broken builds. To mitigate this, you can used a \"versioned\" upstream configuration,\nwhich is ideally a fixed point in time. How this is implemented is up to you or your company, but we\nsuggest the following patterns:\n\n### Using versioned filenames\n\nA rudimentary solution is to append a version to the upstream filename. When the file is modified, a\nnew version should be created, while the previous version remains untouched.\n\n```\n-extends: '../shared/project.yml'+extends: '../shared/project-v1.yml'\n```\n\n### Using branches, tags, or commits\n\nWhen using a version control platform, like GitHub above, you can reference the upstream\nconfiguration through a branch, tag, commit, or sha. Since these are a reference point in time, they\nare relatively safe.\n\n```\n-extends: 'https://raw.githubusercontent.com/moonrepo/examples/master/.moon/tasks/all.yml'+extends: 'https://raw.githubusercontent.com/moonrepo/examples/c3f10160bcd16b48b8d4d21b208bb50f6b09bd96/.moon/tasks/all.yml'\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 66,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__vcs-hooks.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/vcs-hooks\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, vcs hooks\n- Summary: VCS hooks (most popular with [Git](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks)) are a\n----\n\nSource: https://moonrepo.dev/docs/guides/vcs-hooks\n\n# VCS hooks\n\nv1.9.0\n\nVCS hooks (most popular with [Git](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks)) are a\nmechanism for running scripts at pre-defined phases in the VCS's lifecycle, most commonly\npre-commit, pre-push, or pre-merge. With moon, we provide a built-in solution for managing hooks,\nand syncing them across developers and machines.\n\n- [Learn more about Git hooks](https://git-scm.com/docs/githooks)\n\n## Defining hooks\n\nHooks can be configured with the [`vcs.hooks`](/docs/config/workspace#hooks) setting in\n[`.moon/workspace.yml`](/docs/config/workspace). This setting requires a map of hook names (in the\nformat required by your VCS), to a list of arbitrary commands to run within the hook script.\nCommands are used as-is and are not formatted or interpolated in any way.\n\nTo demonstrate this, let's configure a `pre-commit` hook that runs a moon `lint` task for affected\nprojects, and also verifies that the commit message abides by a specified format (using\n[pre-commit](https://pre-commit.com/) and the\n[commitlint hook](https://github.com/alessandrojcm/commitlint-pre-commit-hook), for example).\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    pre-commit:      - 'pre-commit run'      - 'moon run :lint --affected'    commit-msg:      - 'pre-commit run --hook-stage commit-msg --commit-msg-filename $ARG1'\n```\n\ninfo\n\nAll commands are executed from the repository root (not moon's workspace root) and must exist on\n`PATH`. If `moon` is installed locally, you can execute it using a repository relative path, like\n`./node_modules/@moonrepo/cli/moon`.\n\n### Accessing argumentsv1.40.3\n\nTo ease interoperability between operating systems and terminal shells, we set passed arguments as\nenvironment variables.\n\nIn your hook commands, you can access these arguments using the `$ARG` format, where `` is the\n1-indexed position of the argument. For example, to access the first argument, you would use\n`$ARG1`, the second argument would be `$ARG2`, and so on. `$ARG0` exists and points to the current\nscript.\n\n## Enabling hooks\n\nHooks are a divisive subject, as some developers love them, and others hate them. Finding a viable\nsolution for everyone can be difficult, so with moon, we opted to support 2 distinct options, but\nonly 1 can be used at a time. Choose the option that works best for your project, team, or company!\n\ncaution\n\nIf you have existing VCS hooks, back them up as moon's implementation will overwrite them! To\nmigrate your existing hooks, [configure them as commands to run](#defining-hooks).\n\n### Automatically for everyone\n\nIf you'd like hooks to be enforced for every contributor of the repository, then simply enable the\n[`vcs.syncHooks`](/docs/config/workspace#synchooks) setting in\n[`.moon/workspace.yml`](/docs/config/workspace). This will automatically generate hook scripts and link\nthem with the local VCS checkout, everytime a [target](/docs/concepts/target) is ran.\n\n.moon/workspace.yml\n\n```\nvcs:  hooks: [...]  syncHooks: true\n```\n\ncaution\n\nAutomatically activating hooks on everyone's computer is considered a sensitive action, because it\nenables the execution of arbitrary code on the computers of the team members. Be careful about the\nhook commands you define in the [`.moon/workspace.yml`](/docs/config/workspace) file.\n\n### Manually by each developer\n\nIf you'd prefer contributors to have a choice in whether or not they want to use hooks, then simply\ndo nothing, and guide them to run the [`moon sync hooks`](/docs/commands/sync/vcs-hooks) command. This\ncommand will generate hook scripts and link them with the local VCS checkout.\n\n```\n$ moon sync hooks\n```\n\n## Disabling hooks\n\nIf you choose to stop using hooks, you'll need to cleanup the previously generated hook scripts, and\nreset the VCS checkout. To start, disable the `vcs.syncHooks` setting.\n\n.moon/workspace.yml\n\n```\nvcs:  syncHooks: false\n```\n\nAnd then run the following command, which will delete files from your local filesystem. Every\ndeveloper that is using hooks will need to run this command.\n\n```\n$ moon sync hooks --clean\n```\n\n## How it works\n\nWhen hooks are [enabled](#enabling-hooks), the following processes will take place.\n\n- The configured [hooks](#defining-hooks) will be generated as individual script files in the `.moon/hooks` directory. Whether or not you commit or ignore these script files is your choice. They are written to the `.moon` directory so that they can be reviewed, audited, and easily tested, but are required.\n\n- We then sync these generated hook scripts with the current VCS. For Git, we create `.git/hooks` files that execute our generated scripts, using repository relative commands. Any existing VCS hooks will be overwritten.\n\ninfo\n\nThe `.moon/hooks` scripts are generated as Bash scripts (use a `.sh` file extension) on Unix, and\nPowerShell scripts (use a `.ps1` file extension) on Windows.\n\n### Git\n\nOn Unix based operating systems (Linux, macOS, etc), the `.moon/hooks` scripts are executed from\n`.git/hooks` Bash files. Because of this, `bash` should be available on the system (which is\ntypically the case).\n\nOn Windows, things get tricky. Since Git has a requirement that `.git/hooks` files must be\nextensionless, and older versions of PowerShell require an extension, we have to use a workaround.\nTo handle this, the `.git/hooks` files are Bash-like scripts (that should work on most machines)\nthat execute `.moon/hooks` using the `powershell.exe` (or `pwsh.exe`) executables. Because of this,\nPowerShell must be available on the system.\n\n## Examples\n\n### Pre-commit\n\nA perfect use case for the `pre-commit` hook is to check linting and formatting of the files being\ncommitted. If either of these tasks fail, the commit will abort until they are fixed. Be sure to use\nthe [`--affected`](/docs/run-task#running-based-on-affected-files-only) option so that we only run on\nchanged projects!\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    pre-commit:      - 'moon run :lint :format --affected --status=staged'\n```\n\nBy default this will run on the entire project (all files). If you want to filter it to only the\nchanged files, enable the [`affectedFiles`](/docs/config/project#affectedfiles) task option.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 165,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__wasm-plugins.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/wasm-plugins\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, wasm plugins\n- Summary: [moon](/moon) and [proto](/proto) plugins can be written in\n----\n\nSource: https://moonrepo.dev/docs/guides/wasm-plugins\n\n# WASM plugins\n\n[moon](/moon) and [proto](/proto) plugins can be written in\n[WebAssembly (WASM)](https://webassembly.org/), a portable binary format. This means that plugins\ncan be written in any language that compiles to WASM, like Rust, C, C++, Go, TypeScript, and more.\nBecause WASM based plugins are powered by a programming language, they implicitly support complex\nbusiness logic and behavior, have access to a sandboxed file system (via WASI), can execute child\nprocesses, and much more.\n\ndanger\n\nSince our WASM plugin implementations are still experimental, expect breaking changes to occur in\nnon-major releases.\n\n## Powered by Extism\n\nOur WASM plugin system is powered by [Extism](https://extism.org/), a Rust-based cross-language\nframework for building WASM plugins under a unified guest and host API. Under the hood, Extism uses\n[wasmtime](https://wasmtime.dev/) as its WASM runtime.\n\nFor the most part, you do not need to know about Extism's host SDK, as we have implemented the\nbulk of it within moon and proto directly. However, you should be familiar with the guest PDKs, as\nthis is what you'll be using to implement Rust-based plugins. We suggest reading the following\nmaterial:\n\n- [Plugin development kits](https://extism.org/docs/concepts/pdk) (PDKs)\n\n- The [extism-pdk](https://github.com/extism/rust-pdk) Rust crate\n\n- [Host functions](https://extism.org/docs/concepts/host-functions) (how they work)\n\n## Concepts\n\nBefore we begin, let's talk about a few concepts that are critical to WASM and our plugin systems.\n\n### Plugin identifier\n\nWhen implementing plugin functions, you'll need to access information about the current plugin. To\nget the current plugin identifier (the key the plugin was configured with), use the\n[`get_plugin_id`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.get_plugin_id.html) function.\n\n```\nlet id = get_plugin_id();\n```\n\n### Virtual paths\n\nWASM by default does not have access to the host file system, but through [WASI](https://wasi.dev/),\nwe can provide sandboxed access to a pre-defined list of allowed directories. We call these\n[virtual paths](https://docs.rs/warpgate_api/latest/warpgate_api/enum.VirtualPath.html), and all\npaths provided via function input or context use them.\n\nVirtual paths are implemented by mapping a real path (host machine) to a virtual path (guest\nruntime) using file path prefixes. The following prefixes are currently supported:\n\nReal path Virtual path Only for\n\n`~` `/userhome` ~\n\n`~/.proto` `/proto` ~\n\n`~/.moon` `/moon` moon\n\nmoon workspace `/workspace` moon\n\nFor example, from the context of WASM, you may have a virtual path of `/proto/tools/node/1.2.3`,\nwhich simply maps back to `~/.proto/tools/node/1.2.3` on the host machine. However, this should\nalmost always be transparent to you, the developer, and to end users.\n\nHowever, there may be a few cases where you need access to the real path from WASM, for example,\nlogging or executing commands. For this, the real path can be accessed with the\n[`real_path`](https://docs.rs/warpgate_api/latest/warpgate_api/enum.VirtualPath.html#method.real_path)\nfunction on the `VirtualPath` enum (this is a Rust only feature).\n\n```\nvirtual_path.real_path();\n```\n\n#### File system caveats\n\nWhen working with the file system from the context of WASM, there are a few caveats to be aware of.\n\n- All `fs` calls must use the virtual path. Real paths will error.\n\n- Paths not white listed (using prefixes above) will error.\n\n- Changing file permissions is not supported (on Unix and Windows). This is because WASI does not support this.\n\n- This also means operations like unpacking archives is not possible.\n\n### Host environment\n\nSince WASM executes in its own runtime, it does not have access to the current host operating\nsystem, architecture, so on and so forth. To bridge this gap, we provide the\n[`get_host_environment`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.get_host_environment.html)\nfunction.\n[Learn more about this type](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/struct.HostEnvironment.html).\n\n```\nlet env = get_host_environment()?;\n```\n\nThe host operating system and architecture can be accessed with `os` and `arch` fields respectively.\nBoth fields are an enum in Rust, or a string in other languages.\n\n```\nif env.os == HostOS::Windows {    // Windows only}if env.arch == HostArch::Arm64 {    // aarch64 only}\n```\n\nFurthermore, the user's home directory (`~`) can be accessed with the `home_dir` field, which is a\n[virtual path](#virtual-paths).\n\n```\nif env.home_dir.join(some_path).exists() {    // Do something}\n```\n\n### Host functions & macros\n\nWASM is pretty powerful but it can't do everything since it's sandboxed. To work around this, we\nprovide a mechanism known as host functions, which are functions that are implemented on the host\n(in Rust), and can be executed from WASM. The following host functions are currently available:\n\n- [`exec_command`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.exec_command.html) - Execute a system command on the host machine, with a provided list of arguments or environment variables.\n\n- [`from_virtual_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.real_path.html) - Converts a virtual path into a real path.\n\n- [`get_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_env.html) - Get an environment variable value from the host environment.\n\n- [`host_log`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_log.html) - Log an stdout, stderr, or tracing message to the host's terminal.\n\n- [`send_request`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.send_request.html) - Requests a URL on the host machine using a Rust-based HTTP client (not WASM).\n\n- [`set_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_env.html) - Set an environment variable to the host environment.\n\n- [`to_virtual_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.virtual_path.html) - Converts a real path into a virtual path.\n\nTo use host functions, you'll need to make them available by registering them at the top of your\nRust file (only add the functions you want to use) using the\n[extism-pdk](https://crates.io/crates/extism-pdk) crate.\n\n```\nuse extism_pdk::*;#[host_fn]extern \"ExtismHost\" {    fn exec_command(input: Json) -> Json;    fn from_virtual_path(path: String) -> String;    fn get_env_var(key: String) -> String;    fn host_log(input: Json);    fn send_request(input: Json) -> Json;    fn set_env_var(key: String, value: String);    fn to_virtual_path(path: String) -> Json;}\n```\n\ninfo\n\nTo simplify development, we provide built-in functions and macros for the host functions above.\nContinue reading for more information on these macros.\n\n#### Converting paths\n\nWhen working with virtual paths, you may need to convert them to real paths, and vice versa. The\n[`into_virtual_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.into_virtual_path.html)\nand [`into_real_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.into_real_path.html)\nfunctions can be used for such situations, which use the `to_virtual_path` and `from_virtual_path`\nhost functions respectively.\n\n```\n// Supports strings or pathslet virt = into_virtual_path(\"/some/real/path\")?;let real = into_real_path(PathBuf::from(\"/some/virtual/path\"))?;\n```\n\n#### Environment variables\n\nThe [`get_host_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.get_host_env_var.html)\nand [`set_host_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.set_host_env_var.html)\nfunctions can be used to read and write environment variables on the host, using the `set_env_var`\nand `get_env_var` host functions respectively.\n\n```\n// Set a valueset_host_env_var(\"ENV_VAR\", \"value\")?;// Get a value (returns an `Option`)let value = get_host_env_var(\"ENV_VAR\")?;\n```\n\nAdditionally, the\n[`add_host_paths`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.add_host_paths.html) function\ncan be used to append paths to the `PATH` environment variable.\n\n```\n// Append to pathadd_host_paths([\"/userhome/some/virtual/path\"])?;\n```\n\n#### Executing commands\n\nThe [`exec_command!`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.exec_command.html)\nmacro can be used to execute a command on the host, using the `exec_command` host function. If the\ncommand does not exist on `PATH`, an error is thrown. This macros supports three modes: pipe,\ninherit, and raw (returns `Result`).\n\n```\nlet result = exec_command!(raw, \"which\", [\"node\"]);\n```\n\nIf you want a simpler API, the\n[`exec`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.exec.html),\n[`exec_captured`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.exec_captured.html) (pipe),\nand [`exec_streamed`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.exec_streamed.html)\n(inherit) functions can be used.\n\n```\n// Pipe stdout/stderrlet output = exec_captured(\"which\", [\"node\"])?;// Inherit stdout/stderrexec_streamed(\"npm\", [\"install\"])?;// Full controlexec(ExecCommandInput {    command: \"npm\".into(),    args: vec![\"install\".into()],    ..ExecCommandInput::default()})?;\n```\n\n#### Sending requests\n\nThe [`send_request`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.send_request.html) macro\ncan be used to request a URL on the host, instead of from WASM, allowing it to use the same HTTP\nclient as the host CLI. This macro returns a response object, with the raw body in bytes, and the\nstatus code.\n\n```\nlet response = send_request!(\"https://some.com/url/to/fetch\");if response.status == 200 {  let json = response.json::()?;  let text = response.text()?;} else {  // Error!}\n```\n\nTo simplify the handling of requests -> responses, we also provide the\n[`fetch_bytes`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.fetch_bytes.html),\n[`fetch_json`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.fetch_json.html), and\n[`fetch_text`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.fetch_text.html) functions.\n\n```\nlet json: T = fetch_json(\"https://some.com/url/to/fetch.json\")?;\n```\n\nOnly GET requests are supported.\n\n#### Logging\n\nThe [`host_log!`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_log.html) macro can be\nused to write stdout or stderr messages to the host's terminal, using the `host_log` host function.\nIt supports the same argument patterns as `format!`.\n\nIf you want full control, like providing data/fields, use the input mode and provide\n[`HostLogInput`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/struct.HostLogInput.html).\n\n```\nhost_log!(stdout, \"Some message\");host_log!(stderr, \"Some message with {}\", \"args\");// With datahost_log!(input, HostLogInput {    message: \"Some message with data\".into(),    data: HashMap::from_iter([        (\"data\".into(), serde_json::to_value(data)?),    ]),    target: HostLogTarget::Stderr,});\n```\n\nFurthermore, the [extism-pdk](https://crates.io/crates/extism-pdk) crate provides a handful of\nmacros for writing level-based messages that'll appear in the host's terminal when `--log` is\nenabled in the CLI. These also support arguments.\n\n```\ndebug!(\"This is a debug message\");info!(\"Something informational happened\");warn!(\"Proceed with caution\");error!(\"Oh no, something went wrong\");\n```\n\n## Configuring plugin locations\n\nTo use a WASM plugin, it'll need to be configured in both moon and proto. Luckily both tools use a\nsimilar approach for configuring plugins called the\n[plugin locator](https://docs.rs/warpgate/latest/warpgate/enum.PluginLocator.html). A locator string\nis composed of 2 parts separated by `://`, the former is the protocol, and the latter is the\nlocation.\n\n```\n\"\n://\"\n```\n\nThe following locator patterns are supported:\n\n### `file`\n\nThe `file://` protocol represents a file path, either absolute or relative (from the current\nconfiguration file).\n\n```\n# Relative\"file://./path/to/example.wasm\"# Absolute\"file:///root/path/to/example.wasm\"\n```\n\n### `github`\n\nThe `github://` protocol can be used to target and download an asset from a specific GitHub release.\nThe location must be an organization + repository slug (owner/repo), and the release must have a\n`.wasm` asset available to download.\n\n```\n\"github://moonrepo/example-repo\"\n```\n\nIf you are targeting releases in a monorepo, you can append the project name after the repository.\nThe project name will be used as a prefix for tags, and will match `@v?` or\n`-v?` based tags.\n\n```\n\"github://moonrepo/example-repo/project-name\"\n```\n\nBy default, the latest release will be used and cached for 7 days. If you'd prefer to target a\nspecific release (preferred), append the release tag to the end of the location.\n\n```\n\"github://moonrepo/example-repo@v1.2.3\"\n```\n\nThis strategy is powered by the [GitHub API](https://api.github.com/) and is subject to rate\nlimiting. If running in a CI environment, we suggesting setting a `GITHUB_TOKEN` environment\nvariable to authorize API requests with. If using GitHub Actions, it's as simple as:\n\n```\n# In some job or step...env:  GITHUB_TOKEN: '${{ secrets.GITHUB_TOKEN }}'\n```\n\n### `https`\n\nThe `https://` protocol is your standard URL, and must point to an absolute file path. Files will be\ndownloaded to `~/.moon/plugins` or `~/.proto/plugins`. Non-secure URLs are not supported!\n\n```\n\"https://domain.com/path/to/plugins/example.wasm\"\n```\n\n## Creating a plugin\n\ninfo\n\nAlthough plugins can be written in any language that compiles to WASM, we've only tested Rust. The\nrest of this article assume you're using Rust and Cargo! Refer to [Extism](https://extism.org/)'s\ndocumentation for other examples.\n\nTo start, create a new crate with Cargo:\n\n```\ncargo new plugin --libcd plugin\n```\n\nSet the lib type to `cdylib`, and provide other required settings.\n\nCargo.toml\n\n```\n[package]name = \"example_plugin\"version = \"0.0.1\"edition = \"2024\"publish = false[lib]crate-type = ['cdylib'][profile.release]codegen-units = 1debug = falselto = trueopt-level = \"s\"panic = \"abort\"\n```\n\nOur Rust plugins are powered by [Extism](https://extism.org/), so lets add their PDK and ours as a\ndependency.\n\n```\ncargo add extism-pdk# For protocargo add proto_pdk# For mooncargo add moon_pdk\n```\n\nIn all Rust files, we can import all the PDKs with the following:\n\nsrc/lib.rs\n\n```\nuse extism_pdk::*;\n```\n\nWe can then build the WASM binary. The file will be available at\n`target/wasm32-wasip1/debug/.wasm`.\n\n```\ncargo build --target wasm32-wasip1\n```\n\n## Building and publishing\n\nAt this point, you should have a fully working WASM plugin, but to make it available to the\ncommunity, you'll still need to build and make the `.wasm` file available. The easiest solution is\nto publish a GitHub release and include the `.wasm` file as an asset.\n\n### Building, optimizing, and stripping\n\nWASM files are pretty fat, even when compiling in release mode. To reduce the size of these files,\nwe can use `wasm-opt` and `wasm-strip`, both of which are provided by the\n[WebAssembly](https://github.com/WebAssembly) group. The following script is what we use to build\nour own plugins.\n\ninfo\n\nThis functionality is natively supported in our\n[moonrepo/build-wasm-plugin](https://github.com/moonrepo/build-wasm-plugin) GitHub Action!\n\nbuild-wasm\n\n```\n#!/usr/bin/env bashtarget=\"${CARGO_TARGET_DIR:-target}\"input=\"$target/wasm32-wasip1/release/$1.wasm\"output=\"$target/wasm32-wasip1/$1.wasm\"echo \"Building\"cargo build --target wasm32-wasip1 --releaseecho \"Optimizing\"# https://github.com/WebAssembly/binaryen~/binaryen/bin/wasm-opt -Os \"$input\" --output \"$output\"echo \"Stripping\"# https://github.com/WebAssembly/wabt~/wabt/bin/wasm-strip \"$output\"\n```\n\n### Manually create releases\n\nWhen your plugin is ready to be published, you can create a release on GitHub using the following\nsteps.\n\n- Tag the release and push to GitHub.\n\n```\ngit tag v0.0.1git push --tags\n```\n\n- Build a release version of the plugin using the `build-wasm` script above. The file will be available at `target/wasm32-wasip1/.wasm`.\n\n```\nbuild-wasm\n```\n\n- In GitHub, navigate to the tags page, find the new tag, create a new release, and attach the built file as an asset.\n\n### Automate releases\n\nIf you're using GitHub Actions, you can automate the release process with our official\n[moonrepo/build-wasm-plugin](https://github.com/moonrepo/build-wasm-plugin) action.\n\n- Create a new workflow file at `.github/workflows/release.yml`. Refer to the link above for a working example.\n\n- Tag the release and push to GitHub.\n\n```\n# In a polyrepogit tag v0.0.1# In a monorepogit tag example_plugin-v0.0.1# Push the tagsgit push --tags\n```\n\n- The action will automatically build the plugin, create a release, and attach the built file as an asset.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 431,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__guides__webhooks.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/guides/webhooks\n- Keywords: moon, moonrepo, docs, monorepo, build, guides, webhooks\n- Summary: Looking to gather metrics for your pipelines? Gain insight into run durations and failures? Maybe\n----\n\nSource: https://moonrepo.dev/docs/guides/webhooks\n\n# Webhooks (experimental)\n\nLooking to gather metrics for your pipelines? Gain insight into run durations and failures? Maybe\nyou want to send Slack or Discord notifications? With our webhooks, all of these are possible!\n\nWhen the [`notifier.webhookUrl`](/docs/config/workspace#webhookurl) setting is configured with an HTTPS\nURL, and moon is running in a CI environment, moon will POST a payload to this endpoint for every\nevent in our pipeline.\n\n## Payload structure\n\nEvery webhook event is posted with the following request body, known as a payload.\n\n- `type` (`string`) - The type of [event](#events).\n\n- `environment` (`object | null`) - Information about the current CI/CD pipeline environment.\n\n- `event` (`object`) - The event specific payload. View each event for an example of their structure.\n\n- `createdAt` (`string`) - When the event was created, as a UTC timestamp in ISO 8601 (RFC 3339) format.\n\n- `uuid` (`string`) - A unique identifier for all webhooks in the current run batch.\n\n- `trace` (`string`) - A unique identifier for all webhooks in the overall run batch. Can be defined via `MOON_TRACE_ID` environment variable.\n\n```\n{  \"type\": \"...\",  \"environment\": \"...\",  \"event\": {    // ...  },  \"createdAt\": \"...\",  \"uuid\": \"...\",  \"trace\": \"...\"}\n```\n\nThe `uuid` field can be used to differentiate concurrently running pipelines!\n\n### Pipeline environment\n\nWhen webhooks are sent from a CI/CD pipeline, we attempt to include information about the\nenvironment under the `environment` field. If information could not be detected, this field is null,\notherwise it contains these fields.\n\n- `baseBranch` (`string | null`) - When a merge/pull request, the target (base) branch, otherwise null.\n\n- `branch` (`string`) - When a merge/pull request, the source (head) branch, otherwise the triggering branch.\n\n- `id` (`string`) - ID of the current pipeline instance.\n\n- `provider` (`string`) - Name of your CI/CD provider. GitHub Actions, GitLab, CircleCI, etc.\n\n- `requestId` (`string | null`) - The ID of the merge/pull request.\n\n- `requestUrl` (`string | null`) - Link to the merge/pull request.\n\n- `revision` (`string`) - The HEAD commit, revision, tag, ref, etc, that triggered the pipeline.\n\n- `url` (`string | null`) - Link to the current pipeline, when available.\n\n## Events\n\n### Pipeline\n\nRuns actions within moon using a robust dependency graph. Is triggered when using\n[`moon run`](/docs/commands/run).\n\n### `pipeline.started`\n\nTriggered when the pipeline has been created but before actions have started to run.\n\nThis event includes the number of actions registered within the pipeline, but does not provide\ndetailed information about the actions. Use the [`action.*`](#actionstarted) events for this.\n\n```\n{  \"type\": \"pipeline.started\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"actionsCount\": 15  },  \"uuid\": \"...\"}\n```\n\n### `pipeline.finished`\n\nTriggered when the pipeline has finished running all actions, with aggregated counts based on final\nstatus.\n\nThis event is not triggered if the pipeline crashes (this does not include actions that have\nfailed, as those are legitimate runs). Use the [`pipeline.aborted`](#pipelineaborted) event if you\nwant to also catch crashes.\n\n```\n{  \"type\": \"pipeline.finished\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"cachedCount\": 10,    \"baselineDuration\": {      \"secs\": 60,      \"nanos\": 3591693    },    \"duration\": {      \"secs\": 120,      \"nanos\": 3591693    },    \"estimatedSavings\": {      \"secs\": 60,      \"nanos\": 0    },    \"failedCount\": 1,    \"passedCount\": 4  },  \"uuid\": \"...\"}\n```\n\n### `pipeline.aborted`\n\nTriggered when the pipeline has crashed for unknown reasons, or had to abort as a result of a\ncritical action failing.\n\n```\n{  \"type\": \"pipeline.aborted\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": \"...\"  },  \"uuid\": \"...\"}\n```\n\n### Actions\n\nActions are \"jobs\" within the pipeline that are executed topologically.\n\n### `action.started`\n\nTriggered when an action within the pipeline has started to run.\n\n```\n{  \"type\": \"action.started\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"action\": {      \"attempts\": null,      \"createdAt\": \"...\",      \"duration\": {        \"secs\": 0,        \"nanos\": 3591693      },      \"error\": null,      \"label\": \"InstallWorkspaceDeps(node:18.0.0)\",      \"nodeIndex\": 5,      \"status\": \"passed\"    },    \"node\": {      \"action\": \"InstallDeps\",      \"params\": [        {          \"toolchain\": \"Node\",          \"version\": \"18.0.0\"        }      ]    }  },  \"uuid\": \"...\"}\n```\n\n### `action.finished`\n\nTriggered when an action within the pipeline has finished running, either with a success or failure.\nIf the action failed, the `error` field will be set with the error message.\n\n```\n{  \"type\": \"action.finished\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"action\": {      \"attempts\": null,      \"createdAt\": \"...\",      \"duration\": {        \"secs\": 0,        \"nanos\": 3591693      },      \"error\": null,      \"label\": \"InstallWorkspaceDeps(node:18.0.0)\",      \"nodeIndex\": 5,      \"status\": \"passed\"    },    \"error\": null,    \"node\": {      \"action\": \"InstallDeps\",      \"params\": {        \"toolchain\": \"Node\",        \"version\": \"18.0.0\"      }    }  },  \"uuid\": \"...\"}\n```\n\n### `dependencies.installing`\n\nTriggered when dependencies for a workspace or project have started to install. When targeting a\nproject, the `project` field will be set, otherwise `null` for the entire workspace.\n\n```\n{  \"type\": \"dependencies.installing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"project\": {      \"id\": \"server\"      // ...    },    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    },    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `dependencies.installed`\n\nTriggered when dependencies for a workspace or project have finished installing. When targeting a\nproject, the `project` field will be set, otherwise `null` for the entire workspace. If the install\nfailed, the `error` field will be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nInstalled deps can be scoped with the `InstallDeps(...)` labels.\n\n```\n{  \"type\": \"dependencies.installed\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"project\": null,    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    },    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `environment.initializing`v1.37.0\n\nTriggered when an environment is being setup for a toolchain. When targeting a project, the\n`project` field will be set, otherwise `null` for the entire workspace.\n\n```\n{  \"type\": \"environment.initializing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"project\": {      \"id\": \"server\"      // ...    },    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `environment.initialized`v1.37.0\n\nTriggered when an environment has been setup for a toolchain. When targeting a project, the\n`project` field will be set, otherwise `null` for the entire workspace. If setup failed, the `error`\nfield will be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nInstalled deps can be scoped with the `SetupEnvironment(...)` labels.\n\n```\n{  \"type\": \"environment.initialized\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"project\": null,    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `project.syncing`\n\nTriggered when an affected project has started syncing its workspace state. This occurs\nautomatically before a project's task is ran.\n\n```\n{  \"type\": \"project.syncing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"project\": {      \"id\": \"client\"      // ...    },    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `project.synced`\n\nTriggered when an affected project has finished syncing. If the sync failed, the `error` field will\nbe set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nSynced projects can be scoped with the `SyncProject(...)` labels.\n\n```\n{  \"type\": \"project.synced\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"project\": {      \"id\": \"client\"      // ...    },    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `tool.installing`\n\nTriggered when a tool within the toolchain has started downloading and installing.\n\nThis event is always triggered, regardless of whether the tool has already been installed or not.\nFor an accurate state, use the [`action.finished`](#actionfinished) event. If the `status` is\n\"skipped\", then the tool was already installed.\n\n```\n{  \"type\": \"tool.installing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `tool.installed`\n\nTriggered when a tool within the toolchain has finished installing. If the install failed, the\n`error` field will be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nTools can be scoped with the `SetupToolchain(...)` labels.\n\n```\n{  \"type\": \"tool.installed\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `toolchain.installing`\n\nTriggered when a toolchain plugin has started downloading and installing.\n\nThis event is always triggered, regardless of whether the tool has already been installed or not.\nFor an accurate state, use the [`action.finished`](#actionfinished) event. If the `status` is\n\"skipped\", then the tool was already installed.\n\n```\n{  \"type\": \"toolchain.installing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"spec\": {      \"id\": \"node\",      \"req\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `toolchain.installed`\n\nTriggered when a toolchain plugin has finished installing. If the install failed, the `error` field\nwill be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nTools can be scoped with the `SetupToolchain(...)` labels.\n\n```\n{  \"type\": \"toolchain.installed\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"spec\": {      \"id\": \"node\",      \"req\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `task.running`\n\nTriggered when a [task](/docs/concepts/task) has started to run (via [`moon run`](/docs/commands/run) or\nsimilar command).\n\n```\n{  \"type\": \"task.running\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"target\": \"app:build\"  },  \"uuid\": \"...\"}\n```\n\n### `task.ran`\n\nTriggered when a [task](/docs/concepts/task) has finished running. If the run failed, the `error` field\nwill be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event. Ran\ntasks can be scoped with the `RunTask(...)`, `RunInteractiveTask(...)`, and `RunPersistentTask(...)`\nlabels.\n\n```\n{  \"type\": \"task.ran\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"target\": \"app:build\"  },  \"uuid\": \"...\"}\n```\n\n### `workspace.syncing`\n\nTriggered when the workspace is being synced.\n\n```\n{  \"type\": \"workspace.syncing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"target\": \"app:build\"  },  \"uuid\": \"...\"}\n```\n\n### `workspace.synced`\n\nTriggered when the workspace has finished syncing. If the action failed, the `error` field will be\nset with the error message.\n\n```\n{  \"type\": \"workspace.synced\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null  },  \"uuid\": \"...\"}\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 285,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__how-it-works.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/how-it-works\n- Keywords: moon, moonrepo, docs, monorepo, build, how it works\n- Summary: Documentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n----\n\nSource: https://moonrepo.dev/docs/how-it-works\n\n- [Home](/)\n- [How it works](/docs/how-it-works)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# How it works\n\n[ LanguagesAlthough moon is currently focusing on the JavaScript ecosystem, our long-term vision is to be a](/docs/how-it-works/languages)\n\n[ Project graphThe project graph is a representation of all configured](/docs/how-it-works/project-graph)\n\n[ Task graphThe task graph is a representation of all configured](/docs/how-it-works/task-graph)\n\n[ Action graphWhen you run a task on the command line, we generate an action graph to](/docs/how-it-works/action-graph)\n\n[Install moon](/docs/install)\n\n[Languages](/docs/how-it-works/languages)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 40,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__how-it-works__action-graph.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/how-it-works/action-graph\n- Keywords: moon, moonrepo, docs, monorepo, build, how it works, action graph\n- Summary: When you run a [task](/docs/config/project#tasks-1) on the command line, we generate an action graph to\n----\n\nSource: https://moonrepo.dev/docs/how-it-works/action-graph\n\n# Action graph\n\nWhen you run a [task](/docs/config/project#tasks-1) on the command line, we generate an action graph to\nensure [dependencies](/docs/config/project#deps) of tasks have ran before running run the primary task.\n\nThe action graph is a representation of all [tasks](/docs/concepts/task), derived from the\n[project graph](/docs/how-it-works/project-graph) and [task graph](/docs/how-it-works/task-graph), and is also represented internally\nas a directed acyclic graph (DAG).\n\n## Actions\n\nUnlike other task runners in the industry that represent each node in the graph as a task to run, we\nrepresent each node in the graph as an action to perform. This allows us to be more flexible and\nefficient with how we run tasks, and allows us to provide more functionality and automation than\nother runners.\n\nThe following actions compose our action graph:\n\n### Sync workspace\n\nThis is a common action that always runs and give's moon a chance to perform operations and health\nchecks across the entire workspace.\n\ninfo\n\nThis action can be skipped by disabling the\n[`pipeline.syncWorkspace`](/docs/config/workspace#syncworkspace) setting.\n\n### Setup toolchain\n\nThe most important action in the graph is the setup toolchain action, which downloads and installs a\ntier 3 language into the toolchain. For other tiers, this is basically a no-operation.\n\n- When the tool has already been installed, this action will be skipped.\n\n- Actions will be scoped by language and version, also known as a runtime. For example, `SetupToolchain(node:18.1.0)` or `SetupToolchain(deno:1.31.0)`.\n\n- Tools that require a global binary (found on `PATH`) will display the version as \"global\". For example, `SetupToolchain(node:global)`.\n\ninfo\n\nThis action can be skipped by setting the `MOON_SKIP_SETUP_TOOLCHAIN=true` environment variable. The\nskip can be scoped per tool by setting the value to the tool name (`node`), and also by version\n(`node:20.0.0`). Supports a comma-separated list.\n\n### Setup environmentv1.35.0\n\nThis action runs after the toolchain has been setup, but before dependencies are installed, so that\nthe development environment can be setup and configured. This includes operations such as modifying\na manifest (`package.json`, etc), updating configuration files, initializing venv's (Python), so on\nand so forth.\n\n### Setup protov1.39.0\n\nThis action runs before all toolchain related actions and ensures that [proto](/proto) has been\ninstalled and is available for use. This is required for toolchains that will be downloaded and\ninstalled.\n\n### Install dependencies\n\nBefore we run a task, we ensure that all language dependencies (`node_modules` for example) have\nbeen installed, by automatically installing them if we detect changes since the last run. We achieve\nthis by comparing lockfile modified timestamps, parsing manifest files, and hashing resolved\ndependency versions.\n\n- When dependencies do not need to be installed, this action will be skipped.\n\n- Depending on the language and configuration, we may install dependencies in a project (`InstallProjectDeps`), or in the workspace root for all projects (`InstallWorkspaceDeps`).\n\n- Actions will be scoped by language and version, also known as a runtime. For example, `InstallWorkspaceDeps(node:18.1.0)` or `InstallProjectDeps(node:18.1.0, example)`.\n\ninfo\n\nThis action can be skipped by disabling the\n[`pipeline.installDependencies`](/docs/config/workspace#installdependencies) setting.\n\n### Sync project\n\nTo ensure a consistently healthy project and repository, we run a process known as syncing\neverytime a task is ran. This action will run sync operations for all toolchains associated with\nthe project.\n\ninfo\n\nThis action can be skipped by disabling the\n[`pipeline.syncProject`](/docs/config/workspace#syncproject) setting.\n\n### Run task\n\nThe primary action in the graph is the run [task](/docs/concepts/task) action, which runs a project's\ntask as a child process, derived from a [target](/docs/concepts/target). Tasks can depend on other\ntasks, and they'll be effectively orchestrated and executed by running in topological order using a\nthread pool.\n\n### Run interactive task\n\nLike the base run task, but runs the [task interactively](/docs/concepts/task#interactive) with stdin\ncapabilities. All interactive tasks are run in isolation in the graph.\n\n### Run persistent task\n\nLike the base run task, but runs the [task in a persistent process](/docs/concepts/task#persistent)\nthat never exits. All persistent tasks are run in parallel as the last batch in the graph.\n\n## What is the graph used for?\n\nWithout the action graph, tasks would not efficiently run, or possibly at all! The graph helps to\nrun tasks in parallel, in the correct order, and to ensure a reliable outcome.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 128,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__how-it-works__languages.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/how-it-works/languages\n- Keywords: moon, moonrepo, docs, monorepo, build, how it works, languages\n- Summary: Although moon is currently focusing on the JavaScript ecosystem, our long-term vision is to be a\n----\n\nSource: https://moonrepo.dev/docs/how-it-works/languages\n\n# Languages\n\nAlthough moon is currently focusing on the JavaScript ecosystem, our long-term vision is to be a\nmulti-language task runner and monorepo management tool. To that end, we've designed our languages\nto work like plugins, where their functionality is implemented in isolation, and is opt-in.\n\ninfo\n\nWe do not support third-party language plugins at this time, but are working towards it!\n\n## Enabling a language\n\nmoon [supported languages](/docs/#supported-languages) are opt-in, and are not enabled by default. We\nchose this pattern to avoid unnecessary overhead, especially for the future when we have 10 or more\nbuilt-in languages.\n\nTo enable a supported language, simply define a configuration block with the language's name in\n[`.moon/toolchains.yml`](/docs/config/toolchain). Even an empty block will enable the language.\n\n.moon/toolchains.yml\n\n```\n# Enable Node.jsnode: {}# Enable Node.js with custom settingsnode:  packageManager: 'pnpm'# Enable Denodeno: {}\n```\n\nFor unsupported languages, use the system toolchain. Continue reading to learn more!\n\n## System language and toolchain\n\nWhen working with moon, you'll most likely have tasks that run built-in system commands that do not\nbelong to any of the supported languages. For example, you may have a task that runs `git` or\n`docker` commands, or common commands like `rm`, `cp`, `mv`, etc.\n\nFor these cases, moon provides a special language/toolchain called `system`, that is always enabled.\nThis toolchain is a catch-all, an escape-hatch, a fallback, and provides the following:\n\n- Runs a system command or a binary found on `PATH`.\n\n- Wraps the execution in a shell.\n\nTo run system commands, set a task's [`toolchain`](/docs/config/project#toolchain) setting to \"system\".\n\nmoon.yml\n\n```\ntasks:  example:    command: 'git status'    toolchain: 'system'\n```\n\n## Tier structure and responsibilities\n\nAs mentioned in our introduction,\n[language support is divided up into tiers](/docs/#supported-languages), where each tier introduces\nmore internal integrations and automations, but requires more work to properly implement.\n\nInternally each tier maps to a Rust crate, as demonstrated by the graph at the top of the article.\n\n### Tier 0 = Unsupported\n\nThe zero tier represents all languages not directly supported by moon. This tier merely exists as\na mechanism for running non-supported language binaries via the\n[system toolchain](#system-language-and-toolchain).\n\nmoon.yml\n\n```\ntasks:  example:    command: 'ruby'    toolchain: 'system'\n```\n\n### Tier 1 = Language\n\nThe first tier is the language itself. This is the most basic level of support, and is the only tier\nthat is required to be implemented for a language to be considered minimally supported. This tier is\nin charge of:\n\n- Declaring metadata about the language. For example, the name of the binary, supported file extensions, available dependency/package/version managers, names of config/manifest/lock files, etc.\n\n- Helpers for parsing lockfiles and manifest files, and interacting with the language's ecosystem (for example, Node.js module resolution).\n\n- Mechanisms for detecting the language of a project based on config files and other criteria.\n\n- Maps to a project's [`language`](/docs/config/project#language) setting.\n\nmoon.yml\n\n```\nlanguage: 'javascript'\n```\n\n### Tier 2 = Platform\n\nThe second tier requires the language functionality from tier 1, and eventually the toolchain\nfunctionality from tier 3, and provides interoperability with moon's internals. This is the most\ncomplex of all tiers, and the tier is in charge of:\n\n- Determining when, where, and how to install dependencies for a project or the workspace.\n\n- Loading project aliases and inferring implicit relationships between projects.\n\n- Syncing a project and ensuring a healthy project state.\n\n- Hashing efficiently for dependency installs and target runs.\n\n- Prepending `PATH` with appropriate lookups to execute a task.\n\n- Running a target's command with proper arguments, environment variables, and flags.\n\n- Maps to a project's [`toolchain.default`](/docs/config/project#toolchain-1) or task's [`toolchain`](/docs/config/project#toolchain) setting.\n\n- Supports a configuration block by name in [`.moon/toolchains.yml`](/docs/config/toolchain).\n\nmoon.yml\n\n```\ntasks:  example:    command: 'webpack'    toolchain: 'node'\n```\n\n.moon/toolchains.yml\n\n```\nnode: {}\n```\n\n### Tier 3 = Toolchain\n\nThe third tier is toolchain support via [proto](/proto). This is the final tier, as the toolchain is\nunusable unless the platform has been entirely integrated, and as such, the platform depends on this\ntier. This tier handles:\n\n- Downloading and installing a language into the toolchain.\n\n- Installing and deduping project dependencies.\n\n- Detecting appropriate versions of tools to use.\n\n- Determining which binary to use and execute targets with.\n\n- Supports a `version` field in the named configuration block in [`.moon/toolchains.yml`](/docs/config/toolchain).\n\n.moon/toolchains.yml\n\n```\nnode:  version: '18.0.0'\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 163,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__how-it-works__project-graph.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/how-it-works/project-graph\n- Keywords: moon, moonrepo, docs, monorepo, build, how it works, project graph\n- Summary: The project graph is a representation of all configured\n----\n\nSource: https://moonrepo.dev/docs/how-it-works/project-graph\n\n# Project graph\n\nThe project graph is a representation of all configured\n[projects in the workspace](/docs/config/workspace#projects) and their relationships between each\nother, and is represented internally as a directed acyclic graph (DAG). Below is a visual\nrepresentation of a project graph, composed of multiple applications and libraries, where both\nproject types depend on libraries.\n\ninfo\n\nThe [`moon project-graph`](/docs/commands/project-graph) command can be used to view the structure of\nyour workspace.\n\n## Relationships\n\nA relationship is between a dependent (downstream project) and a dependency/requirement (upstream\nproject). Relationships are derived from source code and configuration files within the repository,\nand fall into 1 of 2 categories:\n\n### Explicit\n\nThese are dependencies that are explicitly defined in a project's [`moon.yml`](/docs/config/project)\nconfig file, using the [`dependsOn`](/docs/config/project#dependson) setting.\n\nmoon.yml\n\n```\ndependsOn:  - 'components'  - id: 'utils'    scope: 'peer'\n```\n\n### Implicit\n\nThese are dependencies that are implicitly discovered by moon when scanning the repository. How an\nimplicit dependency is discovered is based on a\n[language's platform integration](/docs/how-it-works/languages#tier-2--platform), and how that language's ecosystem\nfunctions.\n\npackage.json\n\n```\n{  // ...  \"dependencies\": {    \"@company/components\": \"workspace:*\"  },  \"peerDependencies\": {    \"@company/utils\": \"workspace:*\"  }}\n```\n\ncaution\n\nIf a language is not officially supported by moon, then implicit dependencies will not be\nresolved. For unsupported languages, you must explicitly configure dependencies.\n\n### Scopes\n\nEvery relationship is categorized into a scope that describes the type of relationship between the\nparent and child. Scopes are currently used for [project syncing](/docs/commands/sync) and deep Docker\nintegration.\n\n- Production - Dependency is required in production, will not be pruned in production environments, and will sync as a production dependency.\n\n- Development - Dependency is required in development and production, will be pruned from production environments, and will sync as a development-only dependency.\n\n- Build - Dependency is required for building only, and will sync as a build dependency.\n\n- Peer - Dependency is a peer requirement, with language specific semantics. Will sync as a peer dependency when applicable.\n\n## What is the graph used for?\n\nGreat question, the project graph is used throughout the codebase to accomplish a variety of\nfunctions, but mainly:\n\n- Is fed into the [task graph](/docs/how-it-works/task-graph) to determine relationships of tasks between other tasks, and across projects.\n\n- Powers our [Docker](/docs/guides/docker) layer caching and scaffolding implementations.\n\n- Utilized for [project syncing](/docs/commands/sync) to ensure a healthy repository state.\n\n- Determines affected projects in [continuous integration](/docs/guides/ci) workflows.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 94,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__how-it-works__task-graph.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/how-it-works/task-graph\n- Keywords: moon, moonrepo, docs, monorepo, build, how it works, task graph\n- Summary: The task graph is a representation of all configured\n----\n\nSource: https://moonrepo.dev/docs/how-it-works/task-graph\n\n# Task graph\n\nThe task graph is a representation of all configured\n[tasks in the workspace](/docs/config/workspace#projects) and their relationships between each other,\nand is represented internally as a directed acyclic graph (DAG). This graph is derived from\ninformation in the [project graph](/docs/how-it-works/project-graph). Below is a visual representation of a task\ngraph.\n\ninfo\n\nThe [`moon task-graph`](/docs/commands/task-graph) command can be used to view the structure of your\nworkspace.\n\n## Relationships\n\nA relationship is between a dependent (downstream task) and a dependency/requirement (upstream\ntask). Relationships are derived explicitly with the task [`deps`](/docs/config/project#deps) setting,\nand fall into 1 of 2 categories:\n\n### Required\n\nThese are dependencies that are required to run and complete with a success, before the owning task\ncan run. If a required dependency fails, then the owning task will abort.\n\n### Optional\n\nThe opposite of [required](#required), these are dependencies that can either a) not exist during\ntask inheritance, or b) run and fail without aborting the owning task.\n\n## What is the graph used for?\n\nGreat question, the task graph is extremely important for running tasks (duh), and it also:\n\n- Is fed into the [action graph](/docs/how-it-works/action-graph) that can be executed in topological order.\n\n- Determines affected tasks in [continuous integration](/docs/guides/ci) workflows.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 56,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__install.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/install\n- Keywords: moon, moonrepo, docs, monorepo, build, install\n- Summary: The following guide can be used to install moon and integrate it into an existing repository (with\n----\n\nSource: https://moonrepo.dev/docs/install\n\n# Install moon\n\n2 min\n\nThe following guide can be used to install moon and integrate it into an existing repository (with\nor without incremental adoption), or to a fresh repository.\n\n## Installing\n\nThe entirety of moon is packaged and shipped as a single binary. It works on all major operating\nsystems, and does not require any external dependencies. For convenience, we provide the following\nscripts to download and install moon.\n\n### proto\n\nmoon can be installed and managed in [proto's toolchain](/proto). This will install moon to\n`~/.proto/tools/moon` and make the binary available at `~/.proto/bin`.\n\n```\nproto install moon\n```\n\nFurthermore, the version of moon can be pinned on a per-project basis using the\n[`.prototools` config file](/docs/proto/config).\n\n.prototools\n\n```\nmoon = \"1.31.0\"\n```\n\ninfo\n\nWe suggest using proto to manage moon (and other tools), as it allows for multiple versions to be\ninstalled and used. The other installation options only allow for a single version (typically the\nlast installed).\n\n### Linux, macOS, WSL\n\nIn a terminal that supports Bash, run:\n\n```\nbash\ninfo\n\nIf you are using Git Bash on Windows, you can run the [Unix commands](#linux-macos-wsl) above.\n\n### npm\n\nmoon is also packaged and shipped as a single binary through the\n[`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli) npm package. Begin by installing this\npackage at the root of the repository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev @moonrepo/cli\n```\n\n```\nyarn add --dev @moonrepo/cli# If using workspacesyarn add --dev -W @moonrepo/cli\n```\n\n```\nnpm install --save-dev @moonrepo/cli\n```\n\n```\npnpm add --save-dev @moonrepo/cli# If using workspacespnpm add --save-dev -w @moonrepo/cli\n```\n\n```\nbun install --dev @moonrepo/cli\n```\n\nIf you are installing with Bun, you'll need to add `@moonrepo/cli` as a\n[trusted dependency](https://bun.sh/docs/install/lifecycle#trusteddependencies).\n\ninfo\n\nWhen a global `moon` binary is executed, and the `@moonrepo/cli` binary exists within the\nrepository, the npm package version will be executed instead. We do this because the npm package\ndenotes the exact version the repository is pinned it.\n\n### Other\n\nmoon can also be downloaded and installed manually, by downloading an asset from\n[https://github.com/moonrepo/moon/releases](https://github.com/moonrepo/moon/releases). Be sure to\nrename the file after downloading, and apply the executable bit (`chmod +x`) on macOS and Linux.\n\n## Upgrading\n\nIf using proto, moon can be upgraded using the following command:\n\n```\nproto install moon --pin\n```\n\nOtherwise, moon can be upgraded with the [`moon upgrade`](/docs/commands/upgrade) command. However, this\nwill only upgrade moon if it was installed in `~/.moon/bin`.\n\n```\nmoon upgrade\n```\n\nOtherwise, you can re-run the installers above and it will download, install, and overwrite with the\nlatest version.\n\n## Canary releases\n\nmoon supports canary releases, which are built and published for every commit to our development\nbranches. These releases will include features and functionality that have not yet landed on master.\nWhen using a canary release, you'll need to download and execute the binaries manually:\n\n- Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `canary` tag. Releases are versioned by date.\n\n- From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/canary) using the `canary` tag. This tag always represents the latest development release.\n\n## Nightly releases\n\nmoon supports nightly releases, which are built and published once a day from the latest commit on\nmaster. When using a nightly release, you'll need to download and execute the binaries manually.\n\n- Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `nightly` tag. Releases are versioned by date.\n\n- From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/nightly) using the `nightly` tag. This tag always represents the latest stable release.\n\n## Next steps\n\n[Setup workspace](/docs/setup-workspace)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 154,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__migrate-to-moon.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/migrate-to-moon\n- Keywords: moon, moonrepo, docs, monorepo, build, migrate to moon\n- Summary: Now that we've talked about the workspace, projects, tasks, and more, we must talk about something\n----\n\nSource: https://moonrepo.dev/docs/migrate-to-moon\n\n# Migrate to moon\n\nNow that we've talked about the workspace, projects, tasks, and more, we must talk about something\nimportant... Should you embrace moon tasks? Or keep using language/ecosystem specific scripts? Or\nboth (incremental adoption)?\n\n## Migrate to moon tasks\n\nWe suggest using moon tasks (of course), as they provide far more granular control and configurable\noptions than scripts, and a `moon.yml` is a better\n[source of truth](/docs/faq#what-should-be-considered-the-source-of-truth). Scripts aren't powerful\nenough to scale for large codebases.\n\nAn example of what this may look like can be found below. This may look like a lot, but it pays\ndividends in the long run.\n\n/moon.yml\n\n```\nlanguage: 'javascript'fileGroups:  sources:    - 'src/**/*'  tests:    - 'tests/**/*'tasks:  build:    command: 'webpack build --output-path @out(0)'    inputs:      - '@globs(sources)'      - 'webpack.config.js'    outputs:      - 'build'  dev:    command: 'webpack server'    inputs:      - '@globs(sources)'      - 'webpack.config.js'    preset: 'server'  format:    command: 'prettier --check .'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - '/prettier.config.js'  lint:    command: 'eslint .'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - '.eslintignore'      - '.eslintrc.js'      - '/.eslintrc.js'  test:    command: 'jest .'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - 'jest.config.js'  typecheck:    command: 'tsc --build'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - 'tsconfig.json'      - '/tsconfig.json'\n```\n\n## Continue using scripts\n\nAs a frontend developer you're already familiar with the Node.js ecosystem, specifically around\ndefining and using `package.json` scripts, and you may not want to deviate from this. Don't worry,\nsimply enable the [`node.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts) setting\nto automatically create moon tasks from a project's scripts! These can then be ran with\n[`moon run`](/docs/commands/run).\n\nThis implementation is a simple abstraction that runs `npm run ` (or pnpm/yarn) in the\nproject directory as a child process. While this works, relying on `package.json` scripts incurs the\nfollowing risks and disadvantages:\n\n- [Inputs](/docs/config/project#inputs) default to `**/*`: A change to every project relative file will mark the task as affected, even those not necessary for the task. Granular input control is lost.\n\n- A change to workspace relative files will not mark the task as affected. For example, a change to `/prettier.config.js` would not be detected for a `npm run format` script.\n\n- [Outputs](/docs/config/project#outputs) default to an empty list unless: moon will attempt to extract outputs from arguments, by looking for variations of `--out`, `--outFile`, `--dist-dir`, etc.\n\n- If no output could be determined, builds will not be cached and hydrated.\n\n- Tasks will always [run in CI](/docs/config/project#runinci) unless: moon will attempt to determine invalid CI tasks by looking for popular command usage, for example: `webpack serve`, `next dev`, `--watch` usage, and more. This is not an exhaustive check.\n\n- The script name contains variations of `dev`, `start`, or `serve`.\n\n## Next steps\n\nBy this point, you should have a better understanding behind moon's fundamentals! Why not adopt\nincrementally next? Jump into [guides](/docs/guides/ci) for advanced use cases or [concepts](/docs/concepts)\nfor a deeper understanding.\n\n[Community help & support](https://discord.gg/qCh9MEynv2)[Releases & updates](https://twitter.com/tothemoonrepo)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 73,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__migrate__2-0.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/migrate/2.0\n- Keywords: moon, moonrepo, docs, monorepo, build, migrate, 2 0\n- Summary: To ease the migration process from moon v1 to v2, we've compiled a list of all breaking changes and\n----\n\nSource: https://moonrepo.dev/docs/migrate/2.0\n\n# Migrate to moon v2.0\n\nTo ease the migration process from moon v1 to v2, we've compiled a list of all breaking changes and\nimportant changes that you should be aware of. Please read through these carefully before upgrading\nyour workspace.\n\nTo automate some of the migration process, we've created the `moon migrate v2` command that will\nmigrate all applicable settings in configuration files.\n\n```\n$ moon migrate v2\n```\n\n## CLI\n\n- Removed `x86_64-apple-darwin` (Apple Intel) as a supported operating system. Only `aarch64-apple-darwin` (Apple Silicon) is now supported.\n\n### Commands\n\n- We've done a large polish pass for all commands, based on the [CLI guidelines](https://clig.dev).\n\n- Updated the `moonx` binary to use `moon exec` instead of `moon run` under the hood.\n\n- Renamed all options and flags to kebab-case instead of camelCase. Example: `--logLevel` -> `--log-level`\n\n- Renamed options for all commands: `--platform` -> `--toolchain`\n\n- Removed commands: `moon node`\n\n- `moon migrate from-package-json` (use the `migrate-turborepo` extension instead)\n\n- `moon query hash` (use `moon hash` instead)\n\n- `moon query hash-diff` (use `moon hash` instead)\n\n#### `moon action-graph`\n\n- Changed the output of `--json` to a new JSON structure (now matches the project and task graphs).\n\n#### `moon check`\n\n- Now runs `moon exec` under the hood, with some arguments/options pre-filled.\n\n- If the project ID is not specifed, it will no longer find the closest project. Instead you must pass `--closest`.\n\n- Renamed options: `--update-cache, -u` -> `--force, -f`\n\n#### `moon ci`\n\n- Now runs `moon exec` under the hood, with some arguments/options pre-filled.\n\n- Renamed options: `--update-cache, -u` -> `--force, -f`\n\n#### `moon generate`\n\n- Changed the destination from a positional argument, to the `--to` option. Example: `moon generate ./dist` -> `moon generate --to ./dist`\n\n#### `moon init`\n\n- Removed \"scaffolding a toolchain\" functionality from the command. Use the `moon toolchain add` command instead.\n\n- Removed options: `--to` (use a positional argument instead)\n\n#### `moon mcp`\n\n- Updated protocol version to 2025-11-25.\n\n- Updated the `get_projects` tool to no longer have an `includeTasks` option.\n\n- Updated the `get_projects` tool to return a list of project fragments, instead of the whole project object. This was required as the response was too large for MCP.\n\n- Updated the `get_tasks` tool to return a list of task fragments, instead of the whole task object. This was required as the response was too large for MCP.\n\n#### `moon query projects`\n\n- Removed options: `--dependents`\n\n#### `moon run`\n\n- Now runs `moon exec` under the hood, with some arguments/options pre-filled.\n\n- Updated options: `--dependents` now requires a value, either `deep` or `direct`\n\n- Renamed options: `--update-cache, -u` -> `--force, -f`\n\n- Removed options: `--no-bail` (use `moon exec` instead)\n\n- `--profile`\n\n- `--remote` (use `--affected remote` instead)\n\n#### `moon templates`\n\n- Changed the output to render a table instead of a list.\n\n#### `moon run`\n\n- Running a target without a scope no longer locates the closest project and instead uses the new default project feature. To run a target in the closets project, use `~:` scope instead. Example: `moon run build` -> `moon run ~:build`\n\n## Workspace\n\n### Configuration: `.moon/workspace.*`\n\n- Renamed setting values: `codeowners.orderBy` value `project-name` -> `project-id`\n\n- Renamed settings: `codeowners.syncOnRun` -> `codeowners.sync`\n\n- `constraints.enforceProjectTypeRelationships` -> `constraints.enforceLayerRelationships`\n\n- `docker.prune.installToolchainDeps` -> `docker.prune.installToolchainDependencies`\n\n- `docker.scaffold.include` -> `docker.scaffold.configsPhaseGlobs`\n\n- `runner` -> `pipeline`\n\n- `unstable_remote` -> `remote`\n\n- `vcs.manager` -> `vcs.client`\n\n- `vcs.syncHooks` -> `vcs.sync`\n\n- Removed settings: `docker.scaffold.copyToolchainFiles`\n\n- `experiments.*`\n\n- `hasher.batchSize`\n\n- `pipeline.archivableTargets`\n\n## Toolchains\n\n### Configuration: `.moon/toolchain.*`\n\n- This file was renamed to `.moon/toolchains.*` (plural) to reflect that multiple toolchains are configured. This also aligns with the new `.moon/extensions.*` file.\n\n- All toolchains have been stabilized, so the `unstable_` prefix must be removed from identifiers.\n\n#### JavaScript\n\nThe `bun`, `deno`, and `node` toolchains now require the `javascript` toolchain to be defined as\nwell. All shared settings have been moved to the `javascript` toolchain.\n\nIn addition, all `node` package managers are no longer nested under the `node` toolchain, but are\nnow top-level settings. These are only required when the `javascript.packageManager` setting is\ndefined.\n\n- Moved settings: `bun.dependencyVersionFormat` -> `javascript.dependencyVersionFormat`\n\n- `bun.inferTasksFromScripts` -> `javascript.inferTasksFromScripts`\n\n- `bun.rootPackageOnly` -> `javascript.rootPackageDependenciesOnly`\n\n- `bun.syncProjectWorkspaceDependencies` -> `javascript.syncProjectWorkspaceDependencies`\n\n- `node.dependencyVersionFormat` -> `javascript.dependencyVersionFormat`\n\n- `node.dedupeOnLockfileChange` -> `javascript.dedupeOnLockfileChange`\n\n- `node.inferTasksFromScripts` -> `javascript.inferTasksFromScripts`\n\n- `node.packageManager` -> `javascript.packageManager`\n\n- `node.rootPackageOnly` -> `javascript.rootPackageDependenciesOnly`\n\n- `node.syncPackageManagerField` -> `javascript.syncPackageManagerField`\n\n- `node.syncProjectWorkspaceDependencies` -> `javascript.syncProjectWorkspaceDependencies`\n\n- `node.bun` -> `bun`\n\n- `node.npm` -> `npm`\n\n- `node.pnpm` -> `pnpm`\n\n- `node.yarn` -> `yarn`\n\n- Renamed settings: `node.binExecArgs` -> `node.executeArgs`\n\n- Removed settings: `bun.packagesRoot`\n\n- `deno.depsFile`\n\n- `deno.lockfile`\n\n- `node.addEnginesConstraint`\n\n- `node.packagesRoot`\n\n.moon/toolchains.yml\n\n```\n# Beforenode:  version: '22.14.0'  packageManager: 'yarn'  inferTasksFromScripts: false  syncPackageManagerField: true  syncProjectWorkspaceDependencies: true  yarn:    version: '4.8.0'# Afterjavascript:  packageManager: 'yarn'  inferTasksFromScripts: false  syncPackageManagerField: true  syncProjectWorkspaceDependencies: truenode:  version: '22.14.0'yarn:  version: '4.8.0'\n```\n\n## Extensions\n\n### Configuration: `.moon/extensions.*`\n\n- The `extensions` setting from `.moon/workspace.*` has been moved (and flattened) to its own file, `.moon/extensions.*`.\n\n- The built-in extensions `download`, `migrate-nx`, and `migrate-turborepo` must now be enabled in the configuration file before they can be used. Simply set an empty object. This change was made to reduce the number of extensions that are loaded by default, improving performance.\n\n.moon/extensions.yml\n\n```\ndownload: {}migrate-nx: {}\n```\n\n## Project\n\n### Configuration: `moon.*`\n\n- Renamed settings: `docker.scaffold.include` -> `docker.scaffold.sourcesPhaseGlobs`\n\n- `project.name` -> `project.title`\n\n- `type` -> `layer`\n\n- `toolchain` -> `toolchains`\n\n- `platform` -> `toolchains.default`\n\n- Removed settings: [`project.metadata`](#custom-metadata)\n\n- [`toolchain.*.disabled`](#toolchain-disabling)\n\n### Language detection\n\nThe primary `language` is now detected from toolchains, instead of being a hardcoded implementation.\nThe result may now differ, as the first toolchain in the list will be used. Additionally, languages\nthat don't have a toolchain yet, like PHP or Ruby, will not be detected and must be explicitly\nconfigured.\n\nmoon.yml\n\n```\n# Afterlanguage: 'ruby'\n```\n\n### Custom metadata\n\nThe `project.metadata` setting has been removed, but all custom metadata fields can now be defined\nat the root of the `project` setting.\n\nmoon.yml\n\n```\n# Beforeproject:  metadata:    customField: 'value'# Afterproject:  customField: 'value'\n```\n\n### Toolchain disabling\n\nThe `toolchain.*.disabled` setting was removed. Instead set the toolchain itself to null/false.\n\nmoon.yml\n\n```\n# Beforetoolchain:  typescript:    disabled: true# Aftertoolchains:  typescript: null\n```\n\n## Tasks\n\n### Configuration: `moon.*`, `.moon/tasks`\n\n- The file `.moon/tasks.yml` has been removed. If you want to support tasks that are inherited by all projects, then move this to `.moon/tasks/all.yml` and do not configure the new `inheritedBy` setting.\n\n- Renamed tokens: `$projectName` -> `$projectTitle`\n\n- `$projectType` -> `$projectLayer`\n\n- `$taskPlatform` -> `$taskToolchain`\n\n- Renamed settings: [`tasks.*.local`](#local-mode) -> `tasks.*.preset` using `server` value\n\n- `tasks.*.platform` -> `tasks.*.toolchains`\n\n- `tasks.*.options.affectedPassInputs` -> `tasks.*.options.affectedFiles.passInputsWhenNoMatch`\n\n- Removed setting values: `tasks.*.preset` value `watcher`\n\n- Changed settings: `tasks.deps.*.args` no longer supports a string. Use a list of strings instead.\n\n- `tasks.*.options.affectedFiles` now supports an object for more granular control.\n\n- Changed option defaults: `tasks.*.options.envFile` now defaults to a list of files, instead of a single file, when `true`. Refer to the blog post for more information.\n\n- `tasks.*.options.inferInputs` now defaults to `false` instead of `true`.\n\n- `tasks.*.options.shell` now defaults to `true` instead of `false`.\n\n- `tasks.*.options.unixShell` now defaults to `bash` instead of nothing.\n\n- `tasks.*.options.windowsShell` now defaults to `pwsh` instead of nothing.\n\n### Simple commands only\n\nWe've reworked `command` (and `args`) to only support simple commands. A simple command is an\nexecutable (binary, file, etc) followed by zero or many arguments.\n\nComplex commands that involve shell features like piping (`|`), redirection (`>`, `\n\nShell features like expansion, globbing, and substitution is still supported in `command`.\n\n### Local mode\n\nThe `local` task setting has been removed as the name was confusing. Users assumed it meant \"only\nrun locally\", but it actually meant \"this is a persistent server that should only run locally\".\nInstead, use the `preset` setting with a value of `server`.\n\nmoon.yml\n\n```\n# Beforetasks:  dev:    command: 'start-dev'    local: true# Beforetasks:  dev:    command: 'start-dev'    preset: 'server'\n```\n\nIf you want a task that is simply \"local only\" without other options changes, use `options.runInCI`\ndirectly.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev'    options:      runInCI: false\n```\n\n### Shells by default\n\nTasks now run in a shell by default, and will use Bash on Unix (`options.unixShell`), and pwsh on\nWindows (`options.windowsShell`). You can disable this behavior by setting `options.shell` to\n`false`.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev'    options:      shell: false\n```\n\n### Env var substitution behavior\n\nThe syntax and behavior for substituting (expanding/interpolation) environment variables has\nchanged, to better align with the standard of `.env` files. The biggest change is that flagless\ntokens (`$VAR`) and `?` flag tokens (`$VAR?`) swapped functionality. Refer to the following table:\n\nSyntax v1 v2\n\n`$VAR` Substitute with variable syntax (`$VAR`) if variable empty  Substitute with empty string if variable empty\n\n`$VAR!` Don't substitute and keep variable syntax (`$VAR`)  Removed syntax\n\n`$VAR?` Substitute with empty string if variable empty  Removed syntax\n\n`${VAR}` Substitute with variable syntax (`$VAR`) if variable empty  Substitute with empty string if variable empty\n\n`${VAR!}` Don't substitute and keep variable syntax (`$VAR`) ~\n\n`${VAR?}` Substitute with empty string if variable empty  Substitute with variable syntax (`$VAR`) if variable empty\n\n`${VAR:default}` Use default value if variable empty ~\n\n`${VAR:-default}`, `${VAR-default}`  Not supported Use default value if variable empty\n\n`${VAR:+alternate}`, `${VAR+alternate}`  Not supported Use alternate value if variable non-empty\n\nLegend:\n\n- `~` indicates the syntax/functionality is the same as v1\n\n- `` indicates breaking change\n\n- `` indicates not supported\n\n### Env var precedence\n\nThe order of precedence for environment variables has slightly changed when running tasks, as it was\nconfusing to users. The new order of precedence is as follows, from lowest to highest tier, with the\nlatter overwriting the former:\n\n- Task `.env` files via `options.envFile`\n\n- Task env variables via `env` or `deps.*.env`\n\n- System variables via profile scripts (`.bashrc`, `.zshrc`, etc)\n\n- via command line: `KEY=value moon ...`\n\nIn regards to variable substitution, each tier can reference variables within the same tier, or the\nhigher tier(s), but not from lower tier(s). This is because variables are processed in reverse\norder. Refer to the following table:\n\nTier Can reference Evaluated during\n\nDotenv Dotenv, Task, System Before task execution\n\nTask Task, System After task creation\n\nSystem System CLI startup\n\nIf you don't want to inherit a system variable, you can override it in the task with a null value.\n\n```\ntasks:  dev:    env:      EXAMPLE: null\n```\n\n### Deferred `.env` files\n\nIn v1, when `options.envFile` was enabled, the `.env` file(s) were loaded at the time of task\ncreation, during the building of project/task graphs. This meant that if the `.env` file changed\nbetween the time of graph creation and task execution, the changes would not be reflected.\n\nIn v2 and later, `.env` files are loaded just before task execution, ensuring that any changes to\nthe file are picked up.\n\ncaution\n\nBecause of this change, task `env` variables will continue to override `.env` file variables, BUT\ncan no longer reference them for substitution. This is because the `.env` files are loaded later in\nthe process.\n\n### Other changes\n\n- When `options.affectedFiles` is enabled, the list of files will be joined with the OS path separator (`:` on Unix, `;` on Windows) instead of a comma (`,`) when passed as the `MOON_AFFECTED_FILES` environment variable.\n\n## Task inheritance\n\n### Deep merged instead of shallow merged\n\nIn v1, when inheriting tasks, all global configs (those in `.moon`) were shallow merged into a\nsingle config ignoring merge task options, and then merged with the local config (`moon.*`) using\nmerge task options. This was not intuitive, as users expected all configs to be merged in sequence.\nTo demonstrate this, take the following example configs, in order of inherited:\n\n```\n# .moon/tasks.ymltasks:  build:    command: 'build --cache'    options:      mutex: 'build'# .moon/tasks/tag-a.ymltasks:  build:    args: '--force'# .moon/tasks/tag-b.ymltasks:  build:    args: '--clean'\n```\n\nUsers would expect the final `build` task to be `build --cache --force --clean` with the mutex\noption set. However, since the `tasks` setting was shallow merged, only the last config (`tag-b`)\nwould be used, resulting in the task being `noop --clean` without the mutex. The `noop` pops up\nbecause the `command` setting was not configured in the last config.\n\nTo remedy this, and to improve task composition overall, global configs are no longer shallow merged\ninto a single config before merging with the local config. Instead, all configs are merged in\nsequence, while respecting the task merge options. This is the order of operations for the new\nsystem:\n\n- Load all global configs (`.moon`) into a list, in order, based on the `inheritedBy` setting.\n\n- Load the local config (`moon.*`).\n\n- Create an inheritance chain by resolving global configs first, then the local config last, while respecting `extend` and other composition settings.\n\n- Merge all task options in order, to create the final task options.\n\n- Merge all tasks in order, using the final task options to guide the merging behavior.\n\n### File groups are merged\n\nBecause of the new deep merging behavior, file groups defined in inherited configs are now merged\ntogether, instead of being replaced by the following config in the sequence. For example, given the\nconfigs:\n\n```\n# .moon/tasks/tag-a.ymlfileGroups:  sources:    - 'src/**'# .moon/tasks/tag-b.ymlfileGroups:  sources:    - 'docs/**'\n```\n\nIn v1, the final `sources` file group would only include `docs/**`, as the second config would\nreplace the first. In v2, the final `sources` file group includes both `src/**` and `docs/**`.\n\n## VCS\n\n### New hooks system\n\nWe've rewritten our Git hooks from the ground up to be based around the `core.hooksPath` setting.\nThe following changes have been made:\n\n- We no longer write hooks to the `.git/hooks` directory.\n\n- Instead, all hooks are written to `.moon/hooks` and Git is configured to use this directory.\n\n- Bash scripts no longer end in `.sh`.\n\ncaution\n\nWe currently don't have an easy way to clean the previous implementation of hooks. You may need to\nmanually remove the old scripts from `.git/hooks` and `.moon/hooks` if they are causing issues.\n\n## Other changes\n\n### Changed (touched) files\n\nWe renamed the terminology \"touched files\" to \"changed files\" throughout the codebase and\ndocumentation. This better aligns with common VCS terminology and reduces confusion. Because of\nthis, the following changes were made:\n\n- Renamed the `moon query touched-files` CLI command to `moon query changed-files`.\n\n- Renamed the `get_touched_files` MCP tool to `get_changed_files`.\n\n- Renamed the `touchedFiles` run report field to `changedFiles`.\n\n```\n# Before$ moon query touched-files# After$ moon query changed-files\n```\n\n### Docker\n\n- The scaffolded `.moon/docker/workspace` directory was renamed to `.moon/docker/configs`.\n\n- The `moon docker file` command will now loop through all toolchains and use the first image found, otherwise it defaults to \"scratch\". If you want to be explicit, set the `docker.file.image` setting.\n\n### Query language (MQL)\n\n- Renamed fields: `projectName` -> `projectId`\n\n- `projectType` -> `projectLayer`\n\n- `taskPlatform` -> `taskToolchain`\n\n```\n# BeforeprojectType=application && taskPlatform=node# AfterprojectLayer=application && taskToolchain=node\n```\n\n### Webhooks\n\n- Removed the `tool.*` events. Use `toolchain.*` events instead.\n\n- Removed the `runtime` field from `dependencies.*` events. Use the `toolchain` field instead.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 546,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto\n- Keywords: moon, moonrepo, docs, monorepo, build, proto\n- Summary: proto is a pluggable version manager, a unified toolchain.\n----\n\nSource: https://moonrepo.dev/docs/proto\n\n# What is proto?\n\n3 min\n\nproto is a pluggable version manager, a unified toolchain.\n\nIf you're unfamiliar with the concept of a toolchain, a toolchain is a collection of tools that are\ndownloaded, installed, and managed by version through a single interface. In the context of proto's\ntoolchain, a tool is either a programming language, a dependency/package manager for a language, or\na custom implementation provided by a plugin. It's the next step in the version manager evolution.\n\n## Features\n\n- Lightspeed! With Rust and WASM, we can guarantee exceptional performance.\n\n- Multi-language. A single CLI for managing versions for all of your languages.\n\n- Cross-platform, for a consistent experience across machines and teams.\n\n- [Contextual version detection](/docs/proto/detection), ensuring the correct version of a tool is always used.\n\n- Checksum verification, ensuring a tool came from a trusted source.\n\n- Detects and infers from a language's ecosystem for maximum compatibility.\n\n- [Pluggable architecture](/docs/proto/plugins), allowing for custom tooling.\n\n## Why proto?\n\nproto was designed to be a modern and holistic version manager for all of your favorite programming\nlanguages. We believe a single tool that works the same across every language is better than\nmultiple ad-hoc tools. While we only support a handful of languages today, we aim to support many\nmore in the future!\n\nsuccess\n\nproto powers [moon](/moon)'s toolchain, enabling a single source of truth for both tools!\n\n## How does it work?\n\nThe toolchain is a `.proto` directory within the current user's home directory, e.g., `~/.proto`.\n\nThe first step in a tool's life-cycle is being downloaded to `~/.proto/temp`. Downloads are\ntypically an archive that can be unpacked into a target directory. Once downloaded, we verify the\ndownloaded file by running a checksum. If this check fails for any reason, the tool is unusable,\nand the process is aborted.\n\nAfter a successful verification, the last step in the tool's life-cycle can begin, installation.\nDepending on the type of download, the installation process may differ. For archives, we unpack the\ntool to `~/.proto/tools//`. In the future, we'll support building from source.\n\nFrom here, we make these tools globally available by prepending `~/.proto/shims` and `~/.proto/bin`\nto `PATH` (typically as part of your shell profile). Continue reading for more about these folders.\n\n## Supported tools\n\nThe following tools are [officially supported](/docs/proto/tools) in proto via moonrepo. Additional\ntools can be supported through [third-party plugins](/docs/proto/plugins).\n\n+ npm, pnpm, yarn\n\n+ pip, poetry, uv\n\n... with [0 more proto plugins](/docs/proto/tools#third-party), and over [800 asdf plugins](/docs/proto/tool-spec#asdf)...\n\n## Supported targets\n\nBecause proto is written in Rust, we only support targets that are explicitly compiled for, which\nare currently:\n\nOperating system Architecture Target\n\nmacOS 64-bit Intel `x86_64-apple-darwin`\n\nmacOS 64-bit ARM `aarch64-apple-darwin`\n\nLinux 64-bit Intel GNU `x86_64-unknown-linux-gnu`\n\nLinux 64-bit Intel musl `x86_64-unknown-linux-musl`\n\nLinux 64-bit ARM GNU `aarch64-unknown-linux-gnu`\n\nLinux 64-bit ARM musl `aarch64-unknown-linux-musl`\n\nWindows 64-bit Intel `x86_64-pc-windows-msvc`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 105,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__activate.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/activate\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, activate\n- Summary: The `proto activate ` command will activate proto for the current shell session, by exporting\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/activate\n\n# activate\n\nv0.38.0\n\nThe `proto activate ` command will activate proto for the current shell session, by exporting\nenvironment variables and prepending `PATH` for each tool configured in the current directory.\nActivation is ran each time the current directory changes using a shell hook.\n\ninfo\n\nLearn more about\n[shell activation in the official workflow documentation](/docs/proto/workflows#shell-activation)!\n\n### Arguments\n\n- `` - The shell to activate for.\n\n### Options\n\n- `--export` - Print the activate instructions in shell-specific syntax.\n\n- `--json` - Print the activate instructions in JSON format.\n\n- `--no-bin` - Do not include `~/.proto/bin` when appending `PATH`.\n\n- `--no-shim` - Do not include `~/.proto/shims` when prepending `PATH`.\n\n- `--no-init` - Do not trigger activation when initialized in the shell, and instead wait for a cd/prompt change. v0.50.0\n\n### Caveats\n\n- Only tools that have a [version configured in `.prototools`](/docs/proto/config#pinning-versions) will be activated.\n\n- Tool versions configured in the global `~/.proto/.prototools` are not included by default. Pass `--config-mode all` during activation to include them. Do note that this will worsen performance depending on the number of tools.\n\n### Setup\n\nThe following activation steps should be added after all environment variable and `PATH`\nmodifications have happened in your shell, typically at the end of your shell profile.\n\n#### Bash\n\nAdd the following line to the end of your `~/.bashrc` or `~/.bash_profile`.\n\n```\neval \"$(proto activate bash)\"\n```\n\n#### Elvish\n\nGenerate the hook:\n\n```\nproto activate elvish > ~/.elvish/lib/proto-hook.elv\n```\n\nThen add the following line to your `~/.elvish/rc.elv` file.\n\n```\nuse proto-hook\n```\n\n#### Fish\n\nAdd the following line to the end of your `~/.config/fish/config.fish`.\n\n```\nproto activate fish | source\n```\n\n#### Murex\n\nAdd the following line to the end of your `~/.murex_profile`.\n\n```\nproto activate murex -> source\n```\n\n#### Nu\n\nGenerate the hook:\n\n```\n(proto activate nu) | save ~/.config/nushell/proto-hook.nu\n```\n\nThen add the following line to your `~/.config/nushell/config.nu` file.\n\n```\nuse proto-hook.nu\n```\n\n#### Pwsh\n\nAdd the following line to the end of your profile (`$PROFILE`).\n\n```\nproto activate pwsh | Out-String | Invoke-Expression\n```\n\n#### Zsh\n\nAdd the following line to the end of your `~/.zshrc`.\n\n```\neval \"$(proto activate zsh)\"\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 127,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__alias.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/alias\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, alias\n- Summary: The `proto alias   ` (or `proto a`) command will define a custom alias that\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/alias\n\n# alias\n\nThe `proto alias   ` (or `proto a`) command will define a custom alias that\nmaps to a specific version for the provided tool. Aliases can be used anywhere a version is\naccepted.\n\n```\n$ proto alias node work 16.16\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--to` to customize\nthe location.\n\n### Arguments\n\n- `` - Type of tool.\n\n- `` - Name of the alias. Supports alphanumeric chars.\n\n- `` - Version to map to the alias.\n\n## Options\n\n- `--to` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 44,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__bin.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/bin\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, bin\n- Summary: The `proto bin  [version]` command will return an absolute path to a tool's binary within the\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/bin\n\n# bin\n\nThe `proto bin  [version]` command will return an absolute path to a tool's binary within the\ntoolchain. When a tool has not been installed, or a version cannot be resolved, the command will\nexit with a failure.\n\n```\n$ proto bin node 16.10.0/Users/example/.proto/tools/node/16.10.0/bin/node\n```\n\nThis command can also return directories using the `--dir` option.\n\n```\n$ proto bin node 16.10.0 --dir exes/Users/example/.proto/tools/node/16.10.0/bin$ proto bin node 16.10.0 --dir globals/Users/example/.proto/tools/node/globals/bin\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n- `[version]` - Version of tool. If not provided, will attempt to [detect the version](/docs/proto/detection).\n\n### Options\n\n- `--all` - Return multiple paths, separated by newlines, instead of the first path. v0.50.0\n\n- `--dir ` - Return a directory instead of of the main file. v0.50.0 `exes` - Returns the executable's directory.\n\n- `globals` - Returns the globals/packages directory.\n\n- `--bin` - When applicable, return the `~/.proto/bin` path.\n\n- `--shim` - When applicable, return the `~/.proto/shims` path.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 53,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__clean.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/clean\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, clean\n- Summary: The `proto clean` command can be used to uninstall stale and unused tools, plugins, and more. By\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/clean\n\n# clean\n\nThe `proto clean` command can be used to uninstall stale and unused tools, plugins, and more. By\ndefault, it will remove items that haven't been used in the last 30 days.\n\n```\n$ proto clean\n```\n\nFurthermore, the command can be used to target a specific artifact type.\n\n```\n$ proto clean plugins\n```\n\n### Arguments\n\n- `[target]` - Type of target. Accepts `cache`, `plugins`, `temp`, or `tools`. v0.44.0\n\n### Options\n\n- `--days` - Number of days before a tool is considered stale.\n\n- `--json` - Print the clean result in JSON format. v0.44.0\n\n- `--yes` - Avoid and confirm all prompts.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 46,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__completions.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/completions\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, completions\n- Summary: The `proto completions` command will generate proto command and argument completions for your\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/completions\n\n# completions\n\nThe `proto completions` command will generate proto command and argument completions for your\ncurrent shell. This command will write to stdout, which can then be redirected to a file of your\nchoice.\n\n```\n$ proto completions > ./path/to/write/to\n```\n\n### Options\n\n- `--shell` - Shell to explicitly generate for.\n\n### Examples\n\n- Bash\n- Fish\n- Zsh\n\nIf using [bash-completion](https://github.com/scop/bash-completion).\n\n```\nmkdir -p ~/.bash_completion.dproto completions > ~/.bash_completion.d/proto.sh\n```\n\nOtherwise write the file to a common location, and source it in your profile.\n\n```\nmkdir -p ~/.bash_completionsproto completions > ~/.bash_completions/proto.sh# In your profilesource ~/.bash_completions/proto.sh\n```\n\nWrite the file to Fish's completions directory.\n\n```\nmkdir -p ~/.config/fish/completionsproto completions > ~/.config/fish/completions/proto.fish\n```\n\nIf using [oh-my-zsh](https://ohmyz.sh/) (the `_` prefix is required).\n\n```\nmkdir -p ~/.oh-my-zsh/completionsproto completions > ~/.oh-my-zsh/completions/_proto# Reload shell (or restart terminal)omz reload\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 63,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__debug.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/debug\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, debug\n- Summary: Documentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/debug\n\n- [Home](/)\n- Commands\n- [debug](/docs/proto/commands/debug)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# debug\n\nOperations for debugging the current proto environment.\n\n[ configThe proto debug config command will list all .prototools configuration files (in TOML format)](/docs/proto/commands/debug/config)\n\n[ envThe proto debug env command will print information about your current proto environment. Primarily](/docs/proto/commands/debug/env)\n\n[completions](/docs/proto/commands/completions)\n\n[config](/docs/proto/commands/debug/config)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 39,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__debug__config.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/debug/config\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, debug, config\n- Summary: The `proto debug config` command will list all `.prototools` configuration files (in TOML format)\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/debug/config\n\n# debug config\n\nv0.25.0\n\nThe `proto debug config` command will list all `.prototools` configuration files (in TOML format)\nthat have been loaded, in order of precedence, with the final merged configuration printed at the\nend.\n\n```\n$ proto debug config/Users/name/.proto/.prototools   node = \"20.0.0\"  npm = \"bundled\"  [tools.node.aliases]  stable = \"~20\"  [settings]  auto-clean = falseFinal configuration   node = \"20.0.0\"  npm = \"bundled\"  [tools.node.aliases]  stable = \"~20\"  [plugins.tools]  node = \"https://github.com/moonrepo/node-plugin/releases/download/v0.6.1/node_plugin.wasm\"  [settings]  auto-clean = false  auto-install = false  detect-strategy = \"first-available\"  [settings.http]  allow-invalid-certs = false  proxies = []\n```\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 35,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__debug__env.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/debug/env\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, debug, env\n- Summary: The `proto debug env` command will print information about your current proto environment. Primarily\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/debug/env\n\n# debug env\n\nv0.26.0\n\nThe `proto debug env` command will print information about your current proto environment. Primarily\nthe store location, relevant file paths, and environment variables.\n\n```\n$ proto debug envStore   Root: /Users/name/.proto  Bins: /Users/name/.proto/bin  Shims: /Users/name/.proto/shims  Plugins: /Users/name/.proto/plugins  Tools: /Users/name/.proto/tools  Temp: /Users/name/.proto/tempEnvironment   Proto version: 0.44.0  Operating system: macos  Architecture: arm64  Config sources:    - /Users/name/Projects/example/.prototools    - /Users/name/.proto/.prototools  Virtual paths:    /userhome = /Users/name    /proto = /Users/name/.proto  Environment variables:    PROTO_APP_LOG = proto=info,schematic=info,starbase=info,warpgate=info,extism::pdk=info    PROTO_HOME = /Users/name/.proto    PROTO_OFFLINE_TIMEOUT = 750    PROTO_VERSION = 0.44.0\n```\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 34,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__diagnose.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/diagnose\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, diagnose\n- Summary: The `proto diagnose` command will diagnose your proto installation for any potential issues. Issues\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/diagnose\n\n# diagnose\n\nv0.37.0\n\nThe `proto diagnose` command will diagnose your proto installation for any potential issues. Issues\nare categorized into errors and warnings, with the former being a must fix, and the latter being a\nmaybe fix (depending on your usage of proto).\n\n```\n$ proto diagnoseShell: zshShell profile: /Users/name/.zshrcErrors   - Issue: Bin directory /Users/name/.proto/bin was found BEFORE the shims directory /Users/name/.proto/shims on PATH    Resolution: Ensure the shims path comes before the bin path in your shell    Comment: Runtime version detection will not work correctly unless shims are used\n```\n\n### Options\n\n- `--shell` - The shell to diagnose (will detect automatically).\n\n- `--json` - Print the diagnosis in JSON format.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 37,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__exec.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/exec\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, exec\n- Summary: The `proto exec  -- ` (or `proto x`) command will activate a temporary\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/exec\n\n# exec\n\nv0.53.0\n\nThe `proto exec  -- ` (or `proto x`) command will activate a temporary\nenvironment by loading and initializing any number of tools, and then execute an arbitrary command\nwithin that environment.\n\n```\n$ proto exec node pnpm -- pnpm run dev\n```\n\nTools will automatically detect a version to execute with based on loaded `.prototools`, but the\nversion can be provided inline by suffixing the tool with `@`.\n\n```\n$ proto exec node@24.2 pnpm@10 -- pnpm run dev\n```\n\n### Shell support\n\nBy default, the command will not be executed in a shell, and will be excuted in the context of the\nparent process. If you want to execute the command within a shell (using `-c`), you can use the\n`--shell` option.\n\n```\n$ proto exec node pnpm --shell bash --\n```\n\nIf your command contains special characters, complex expressions, or shell specific syntax, you may\nneed to pass `--raw` to avoid quoting/escaping issues.\n\n```\n$ proto exec node pnpm --shell bash --raw --\n```\n\nFurthermore, if you want to launch an interactive shell session with the activated environment, you\ncan pass the shell command itself as the exec command.\n\n```\n$ proto exec node pnpm -- bash\n```\n\n### Arguments\n\n- `` - List of tool identifiers with optional version.\n\n- `` - Command to execute within the environment. Must be passed after a `--` separator.\n\n### Options\n\n- `--tools-from-config` - Inherit tools to initialize from `.prototools` configs, instead of passing an explicit list.\n\n- `--raw` - Execute the command as-is without quoting or escaping when using `--shell`.\n\n- `--shell` - Shell to execute the command with (e.g. `bash` or `pwsh`).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 76,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__install.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/install\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, install\n- Summary: The `proto install` (or `proto i`) command can be used to install one or many tools.\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/install\n\n# install\n\nThe `proto install` (or `proto i`) command can be used to install one or many tools.\n\n### Installing all toolsv0.39.0\n\nThe `proto install` command (without arguments) will download and install all tools and plugins\nfrom all parent [`.prototools`](/docs/proto/config) configuration files, and any\n[versions detected](/docs/proto/detection) in the current working directory (if not defined in\n`.prototools`).\n\n```\n$ proto install\n```\n\nBy default, this command does not install tools for versions pinned in the global\n`~/.proto/.prototools` file. Pass `--config-mode all` to include them.\n\n### Installing one tool\n\nThe `proto install  [version]` command will download and install a single tool by unpacking\ntheir archive to `~/.proto/tools/`. If the tool has already been installed, the command will\nexit early.\n\nThe command is also smart enough to resolve partial versions, so 1, 1.2, and 1.2.3 are all\nacceptable. It even supports aliases when applicable, like `latest`, `next`, `beta`, etc. To install\na canary release, use `canary`.\n\n```\n$ proto install deno$ proto install deno 1.31$ proto install deno canary\n```\n\n#### Pinning the version\n\nBy default this command will only install the tool into `~/.proto/tools` but will not make the\nbinary available. If you would like to also pin the resolved version to a `.prototools` file, use\nthe `--pin` option.\n\n```\n# ./.prototools$ proto install bun --pin$ proto install bun --pin local# ~/.proto/.prototools$ proto install bun --pin global# ~/.prototools$ proto install bun --pin user\n```\n\n### Handling plugin hooks\n\nSome tools run [post-install hooks](/docs/proto/tools) that support arbitrary arguments that can be passed\nafter `--`.\n\n```\n$ proto install go -- --no-gobin\n```\n\n### Arguments\n\n- One tool `[tool]` - Type of tool.\n\n- `[version]` - Version of tool. Defaults to a pinned version in `.prototools` or \"latest\".\n\n- `[-- ]` - Additional arguments to pass to post-install hooks.\n\n### Options\n\n- `--force` - Force install, even if already installed.\n\n- `--update-lockfile` - Don't inherit a version from the lockfile and update the existing record. v0.51.0\n\n- One tool `--build` - Build from source if available. v0.45.0\n\n- `--no-build` - Download a pre-built if available. v0.45.0\n\n- `--pin` - Pin the resolved version and create a symlink in `~/.proto/bin`. Accepts a boolean (pins locally by default), or the string \"global\", or the string \"local\".\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 90,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__list-remote.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/list-remote\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, list remote\n- Summary: This command was removed in v0.44, use [`proto versions`](/docs/proto/commands/versions) instead!\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/list-remote\n\n# list-remote\n\ndanger\n\nThis command was removed in v0.44, use [`proto versions`](/docs/proto/commands/versions) instead!\n\nThe `proto list-remote ` (or `proto lsr`) command will list available versions by resolving\nversions from the tool's remote release manifest.\n\n```\n$ proto list-remote node...18.10.018.11.018.12.018.12.118.13.018.14.018.14.118.14.219.0.019.0.119.1.019.2.019.3.019.4.019.5.019.6.019.6.119.7.0\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--aliases` - Include aliases in the list.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 40,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__list.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/list\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, list\n- Summary: This command was removed in v0.44, use [`proto versions`](/docs/proto/commands/versions) instead!\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/list\n\n# list\n\ndanger\n\nThis command was removed in v0.44, use [`proto versions`](/docs/proto/commands/versions) instead!\n\nThe `proto list ` (or `proto ls`) command will list installed versions by scanning the\nmanifest at `~/.proto/tools//manifest.json` for possible versions.\n\n```\n$ proto list node16.16.018.2.019.4.0\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--aliases` - Include aliases in the list.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 40,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__outdated.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/outdated\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, outdated\n- Summary: The `proto outdated` command will load all [`.prototools`](/docs/proto/config) files and check for newer\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/outdated\n\n# outdated\n\nv0.19.0\n\nThe `proto outdated` command will load all [`.prototools`](/docs/proto/config) files and check for newer\n(matching configured range) and latest versions of each configured tool. Will also include the\nconfiguration file in which the version has been configured.\n\n```\n$ proto outdated Tool      Current Newest  Latest  Config                               bun       1.1.42  1.1.42  1.1.42  /Users/name/.proto/.prototools       node      23.5.0  23.5.0  23.5.0  /Users/name/.proto/.prototools       npm       10.7.0  10.7.0  11.0.0  /Users/name/.proto/.prototools       rust      1.83.0  1.83.0  1.83.0  /Users/name/.proto/.prototools       yarn      3.6.3   3.8.7   4.5.1   /Users/name/.proto/.prototools      \n```\n\nBy default, this command does not check tools for versions pinned in the global\n`~/.proto/.prototools` file. Pass `--config-mode all` to include them.\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n- `--latest` - When updating versions with `--update`, use the latest version instead of newest.\n\n- `--update` - Update and write newest/latest versions to their respective configuration.\n\n- `--yes` - Avoid and confirm all prompts. v0.44.0\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 44,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__pin.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/pin\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, pin\n- Summary: The `proto pin  ` command will pin a version (or alias) of a tool. This version will\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/pin\n\n# pin\n\nv0.19.0\n\nThe `proto pin  ` command will pin a version (or alias) of a tool. This version will\nbe used when attempting to [detect a version](/docs/proto/detection).\n\n```\n$ proto pin go 1.20$ proto pin python 3.14 --to=global$ proto pin node lts --resolve$ proto pin npm latest --resolve --tool-native\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--to` to customize\nthe location, or use the `--tool-native` option to use a location unique to the tool.\n\n### Arguments\n\n- `` - Type of tool.\n\n- `` - Version of tool.\n\n### Options\n\n- `--resolve` - Resolve the version to a fully-qualified semantic version before pinning.\n\n- `--to` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n- `--tool-native` - Pins the version in a tool specific location. Examples: JavaScript tooling (Node, Bun, Deno, npm, pnpm, Yarn, etc) Pins version in the `devEngines` field in the `package.json` file.\n\n- v0.55.0\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 49,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__plugin.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/plugin\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, plugin\n- Summary: Documentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin\n\n- [Home](/)\n- Commands\n- [plugin](/docs/proto/commands/plugin)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# plugin\n\nOperations for managing tools and plugins.\n\n[ addThe proto plugin add command will add the provided ID and plugin locator string to](/docs/proto/commands/plugin/add)\n\n[ infoThe proto plugin info command will display information about a tool and its plugin.](/docs/proto/commands/plugin/info)\n\n[ listThe proto plugin list [...id] command will list all available and configured plugins, for both](/docs/proto/commands/plugin/list)\n\n[ removeThe proto plugin remove command will remove the provided tool ID from the [plugins] section](/docs/proto/commands/plugin/remove)\n\n[ searchThe proto plugin search command will search for plugins provided by the community, based](/docs/proto/commands/plugin/search)\n\n[pin](/docs/proto/commands/pin)\n\n[add](/docs/proto/commands/plugin/add)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 45,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__plugin__add.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/plugin/add\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, plugin, add\n- Summary: ` command will add the provided ID and plugin locator string to\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/add\n\n# plugin add\n\nv0.23.0\n\nThe `proto plugin add\n` command will add the provided ID and plugin locator string to\nthe `[plugins]` section of a chosen `.prototools`.\n\n```\n$ proto plugin add node \"https://github.com/moonrepo/node-plugin/releases/latest/download/node_plugin.wasm\"\n```\n\nLearn more about [plugin locator strings](/docs/proto/plugins#enabling-plugins).\n\n### Arguments\n\n- `` - ID of the tool.\n\n- `` - How to locate the plugin.\n\n### Options\n\n- `--to` - [Location of `.prototools`](/docs/proto/config#locations) to update. v0.41.0\n\n- `--type` - Type of plugin to add, either `tool` (default) or `backend`. v0.52.0\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 45,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__plugin__info.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/plugin/info\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, plugin, info\n- Summary: The `proto plugin info ` command will display information about a tool and its plugin.\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/info\n\n# plugin info\n\nv0.23.0\n\nThe `proto plugin info ` command will display information about a tool and its plugin.\n\n```\n$ proto plugin info nodePlugin   ID: node  Name: Node.js  Type: Language  Version: 0.13.0  Source URL: https://github.com/moonrepo/plugins/releases/download/node_tool-v0.13.0/node_tool.wasmInventory   Detected version: 23.5.0  Fallback version: 23.5.0  Store directory: /Users/name/.proto/tools/node  Executable file: /Users/name/.proto/tools/node/23.5.0/bin/node  Executables directory: /Users/name/.proto/tools/node/23.5.0/bin  Global packages directory: /Users/name/.proto/tools/node/globals/bin  Shims:    - /Users/name/.proto/shims/node  Binaries:    - /Users/name/.proto/bin/node    - /Users/name/.proto/bin/node-20    - /Users/name/.proto/bin/node-20.15    - /Users/name/.proto/bin/node-20.8    - /Users/name/.proto/bin/node-23    - /Users/name/.proto/bin/node-23.4    - /Users/name/.proto/bin/node-23.5  Installed versions:    20.8.0 - installed 12/19/24, last used 12/19/24    20.15.0 - installed 12/25/24, last used 12/25/24    23.4.0 - installed 12/19/24, last used 12/19/24    23.5.0 - installed 12/25/24, last used 12/25/24, fallback version  Remote aliases:    argon = 4.9.1    boron = 6.17.1    carbon = 8.17.0    dubnium = 10.24.1    erbium = 12.22.12    fermium = 14.21.3    gallium = 16.20.2    hydrogen = 18.20.5    iron = 20.18.1    jod = 22.12.0    latest = 23.5.0    stable = 22.12.0Configuration   Local aliases:    example = 19.0.0  Environment variables:   Settings: \n```\n\n### Arguments\n\n- `` - ID of tool.\n\n### Options\n\n- `--json` - Print the info in JSON format.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 37,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__plugin__list.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/plugin/list\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, plugin, list\n- Summary: The `proto plugin list [...id]` command will list all available and configured plugins, for both\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/list\n\n# plugin list\n\nv0.23.0\n\nThe `proto plugin list [...id]` command will list all available and configured plugins, for both\nthird-party and built-in tools. Will load all `./.prototools` traversing upwards, and the\n`~/.proto/.prototools` file.\n\nFurthermore, it can list tool information, along with their installed versions, relevant timestamps,\navailable aliases, and store location.\n\n```\n$ proto plugin list --versionsBun   ID: bun  Source URL: https://github.com/moonrepo/plugins/releases/download/bun_tool-v0.14.0/bun_tool.wasm  Store directory: /Users/miles/.proto/tools/bun  Versions:    1.1.42 - installed 12/25/24, fallback versionDeno   ID: deno  Source URL: https://github.com/moonrepo/plugins/releases/download/deno_tool-v0.13.0/deno_tool.wasm  Store directory: /Users/miles/.proto/tools/deno  Versions:    1.30.0 - installed 02/01/24, last used 11/28/24    1.40.0 - installed 02/01/24, last used 12/09/24    1.43.1 - installed 12/25/24, fallback versionGo   ID: go  Source URL: https://github.com/moonrepo/plugins/releases/download/go_tool-v0.14.0/go_tool.wasm  Store directory: /Users/miles/.proto/tools/go  Versions:    1.18.0 - installed 12/25/24, fallback version    1.19.0 - installed 12/22/24    1.20.12 - installed 12/09/23    1.23.4 - installed 12/24/24\n```\n\nA list of tool IDs can be provided to filter the output list.\n\n```\n$ proto plugin list node npm\n```\n\n### Arguments\n\n- `[id...]` - IDs of tools.\n\n### Options\n\n- `--aliases` - Print the list with resolved aliases.\n\n- `--versions` - Print the list with installed versions.\n\n- `--json` - Print the list in JSON format.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 52,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__plugin__remove.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/plugin/remove\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, plugin, remove\n- Summary: The `proto plugin remove ` command will remove the provided tool ID from the `[plugins]` section\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/remove\n\n# plugin remove\n\nv0.23.0\n\nThe `proto plugin remove ` command will remove the provided tool ID from the `[plugins]` section\nof the chosen (`.prototools`).\n\n```\n$ proto plugin remove node\n```\n\nBuilt-in plugins cannot be removed!\n\n### Arguments\n\n- `` - ID of the tool.\n\n### Options\n\n- `--from` - [Location of `.prototools`](/docs/proto/config#locations) to update. v0.41.0\n\n- `--type` - Type of plugin to remove, either `tool` (default) or `backend`. v0.52.0\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 42,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__plugin__search.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/plugin/search\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, plugin, search\n- Summary: The `proto plugin search ` command will search for plugins provided by the community, based\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/search\n\n# plugin search\n\nv0.36.0\n\nThe `proto plugin search ` command will search for plugins provided by the community, based\non the provided query string. Built-in plugins are not searchable.\n\n```\n$ proto plugin search moonSearch results for: moonLearn more about plugins: https://moonrepo.dev/docs/proto/plugins Plugin      Author    Format Description             Locator                                                              moon        moonrepo  TOML   moon is a multi-        https://raw.githubusercontent.com/moonrepo/moon/master/proto-                                     language build system   plugin.toml                                                                                       and codebase management                                                                                                   tool.                                                                                       \n```\n\n### Arguments\n\n- `` - Query string to match against.\n\n### Options\n\n- `--json` - Print the results in JSON format.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 38,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__regen.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/regen\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, regen\n- Summary: The `proto regen` command can be used to regenerate all shims in the `~/.proto/shims` directory.\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/regen\n\n# regen\n\nv0.27.0\n\nThe `proto regen` command can be used to regenerate all shims in the `~/.proto/shims` directory.\nThis command will also clean the shims directory before regenerating, in an effort to remove\nunexpected or broken shims.\n\n```\n$ proto regen\n```\n\nBy default this will only regenerate shims. If you want to regenerate bins in `~/.proto/bin` as\nwell, pass the `--bin` flag. This will also clean the bins directory before regenerating.\n\n```\n$ proto regen --bin\n```\n\nOnly versions pinned in `~/.proto/.prototools` will be linked as bins.\n\n## Options\n\n- `--bin` - Also recreate `~/.proto/bin` symlinks.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 44,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__run.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/run\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, run\n- Summary: The `proto run  [version]` (or `proto r`) command will run a tool after\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/run\n\n# run\n\nThe `proto run  [version]` (or `proto r`) command will run a tool after\n[detecting a version](/docs/proto/detection) from the environment.\n\n```\n# Run and detect version from environment$ proto run bun# Run with explicit version$ proto run bun 0.5.3# Run with version from environment variable$ PROTO_BUN_VERSION=0.5.3 proto run bun\n```\n\nArguments can be passed to the underlying tool binary by providing additional arguments after `--`.\n\n```\n$ proto run bun -- run ./script.ts# When using the binary on PATH$ bun run ./script.ts\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n- `[version]` - Version of tool. If not provided, will attempt to detect the version from the environment.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 40,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__setup.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/setup\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, setup\n- Summary: The `proto setup` command will setup proto in your current shell by modifying an applicable profile\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/setup\n\n# setup\n\nThe `proto setup` command will setup proto in your current shell by modifying an applicable profile\nfile and appending proto's bin directory to `PATH`. If a shell could not be detected, you'll be\nprompted to select one.\n\n```\n$ proto setup\n```\n\nDuring setup, the following profiles will be searched or prompted for.\n\n- Bash `~/.bash_profile`\n\n- `~/.bashrc`\n\n- `~/.profile`\n\n- Elvish `~/.elvish/rc.elv`\n\n- `~/.config/elvish/rc.elv`\n\n- Fish `~/.config/fish/config.fish`\n\n- Ion `~/.config/ion/initrc`\n\n- Murex `~/.murex_preload`\n\n- `~/.murex_profile`\n\n- Nu `~/.config/nushell/env.nu`\n\n- `~/.config/nushell/config.nu`\n\n- PowerShell Windows `~\\Documents\\PowerShell\\Microsoft.PowerShell_profile.ps1`\n\n- `~\\Documents\\PowerShell\\Profile.ps1`\n\n- Unix `~/.config/powershell/Microsoft.PowerShell_profile.ps1`\n\n- `~/.config/powershell/profile.ps1`\n\n- Xonsh `~/.config/xonsh/rc.xsh`\n\n- `~/.xonshrc`\n\n- Zsh `~/.zprofile`\n\n- `~/.zshenv`\n\n- `~/.zshrc`\n\n### Windows support\n\nIn addition to updating a shell profile file (most likely PowerShell), we'll also modify the `PATH`\n(or `Path`) system environment variable, by prepending the `~/.proto/shims` and `~/.proto/bin`\npaths.\n\nIf you would like to opt-out of this behavior, pass the `--no-modify-path` flag.\n\n### Options\n\n- `--shell` - Shell to explicitly setup for.\n\n- `--no-modify-profile` / `PROTO_NO_MODIFY_PROFILE` - Don't update a shell profile file.\n\n- `--no-modify-path` / `PROTO_NO_MODIFY_PATH` - Don't update the system `PATH` environment variable (Windows only).\n\n- `--yes` - Avoid interactive prompts and use defaults.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 89,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__status.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/status\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, status\n- Summary: The `proto status` command will list all tools that are currently active for a target directory,\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/status\n\n# status\n\nv0.34.0\n\nThe `proto status` command will list all tools that are currently active for a target directory,\nwhat versions of those tools are resolved to, and the configuration file in which they are defined.\n\n```\n$ proto status Tool      Configured Resolved  Installed                           Config                              bun       1.1.42     1.1.42    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      bun/1.1.42                                                              deno      1.43.1     1.43.1    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      deno/1.43.1                                                             node      23.5.0     23.5.0    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      node/23.5.0                                                             npm       ~10.7      10.7.0    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      npm/10.7.0                                                              python    3.12.0     3.12.0    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      python/3.12.0                                                           yarn      3.6.3      3.6.3     /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      yarn/3.6.3                                                             \n```\n\nBy default, this command does not check tools for versions pinned in the global\n`~/.proto/.prototools` file. Pass `--config-mode all` to include them.\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 37,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__unalias.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/unalias\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, unalias\n- Summary: The `proto unalias  ` (or `proto ua`) command will remove a custom alias for the\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/unalias\n\n# unalias\n\nThe `proto unalias  ` (or `proto ua`) command will remove a custom alias for the\nprovided tool.\n\n```\n$ proto unalias node work\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--from` to customize\nthe location.\n\n### Arguments\n\n- `` - Type of tool.\n\n- `` - Name of the alias. Supports alphanumeric chars.\n\n## Options\n\n- `--from` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 41,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__uninstall.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/uninstall\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, uninstall\n- Summary: The `proto uninstall  [version]` (or `proto ui`) command will uninstall and remove a tool from\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/uninstall\n\n# uninstall\n\nThe `proto uninstall  [version]` (or `proto ui`) command will uninstall and remove a tool from\n`~/.proto/tools/`. If the tool has not been installed, the command will exit early.\n\n```\n# Remove a specific version$ proto uninstall deno 1.31# Remove all versions$ proto uninstall deno\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n- `[version]` - Version of tool.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 34,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__unpin.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/unpin\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, unpin\n- Summary: The `proto unpin ` command will unpin a version of a tool.\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/unpin\n\n# unpin\n\nv0.36.0\n\nThe `proto unpin ` command will unpin a version of a tool.\n\n```\n$ proto unpin go$ proto unpin node --tool-native\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--from` to customize\nthe location.\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--from` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n- `--tool-native` - Use a tool specific location, like the `devEngines` field in the `package.json` for JavaScript tools. v0.55.0\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 42,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__upgrade.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/upgrade\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, upgrade\n- Summary: The `proto upgrade` (or `proto up`) command can be used to upgrade your current proto binary to the\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/upgrade\n\n# upgrade\n\nThe `proto upgrade` (or `proto up`) command can be used to upgrade your current proto binary to the\nlatest version, or check if you're currently outdated.\n\n```\n$ proto upgrade# Up/downgrade to a specific version$ proto upgrade 0.39.0\n```\n\ninfo\n\nThe previous binary will be moved to `~/.proto/tools/proto/`, while the new binary will be\ninstalled to `~/.proto/bin`.\n\n### Arguments\n\n- `` - The version of proto to explicitly upgrade or downgrade to. v0.39.3\n\n### Options\n\n- `--check` - Check if there's a new version without executing the upgrade.\n\n- `--json` - Print the upgrade information as JSON.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 43,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__use.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/use\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, use\n- Summary: This command has been deprecated and its functionality was merged into [`proto install`](/docs/proto/commands/install)\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/use\n\n# use\n\ndanger\n\nThis command has been deprecated and its functionality was merged into [`proto install`](/docs/proto/commands/install)\nin v0.39. Use that command instead!\n\nThe `proto use` (or `proto u`) command will download and install all tools and plugins from all\nparent [`.prototools`](/docs/proto/config) configuration files, and any [versions detected](/docs/proto/detection) in\nthe current working directory (if not defined in `.prototools`).\n\n```\n$ proto use\n```\n\nThis command does not install tools for versions pinned in the global `~/.proto/.prototools`\nfile.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 37,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__commands__versions.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/commands/versions\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, commands, versions\n- Summary: The `proto versions ` command will list available versions by resolving versions from the\n----\n\nSource: https://moonrepo.dev/docs/proto/commands/versions\n\n# versions\n\nv0.44.0\n\nThe `proto versions ` command will list available versions by resolving versions from the\ntool's remote release manifest. Furthermore, if a version has been installed locally, it will be\ndenoted with a timestamp.\n\n```\n$ proto versions node...22.0.022.1.022.2.022.3.022.4.022.4.122.5.0 - installed 12/25/2422.5.122.6.022.7.022.8.022.9.022.10.022.11.022.12.023.0.023.1.023.2.023.3.023.4.0 - installed 12/19/2423.5.0 - installed 12/25/24\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--aliases` - Include aliases in the list.\n\n- `--installed` - Only display installed versions.\n\n- `--json` - Print the versions and aliases in JSON format.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 43,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__config.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/config\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, config\n- Summary: We support configuration at both the project-level and user-level using a\n----\n\nSource: https://moonrepo.dev/docs/proto/config\n\n# Configuration\n\nWe support configuration at both the project-level and user-level using a\n[TOML](https://toml.io/en/) based `.prototools` file. This file can be used to pin versions of\ntools, provide tool specific configuration, enable new tools via plugins, define proto settings, and\nmore.\n\n## Locationsv0.41.0\n\nproto supports 3 locations in which a `.prototools` file can exist. These locations are used\nthroughout the command line and proto's own settings.\n\n- `local` -> `./.prototools`, `.\\.prototools` (current directory)\n\n- `global` -> `~/.proto/.prototools`, `%USERPROFILE%\\.proto\\.prototools`\n\n- `user` -> `~/.prototools`, `%USERPROFILE%\\.prototools`\n\nLocal is a bit of a misnomer as a `.prototools` file can theoretically exist in any directory, but\nwhen reading/writing to a file, `local` refers to the current working directory.\n\n### Where to configure?\n\nWith so many locations to store proto configuration, the question of where to store certain\nconfigurations become blurred, especially when [resolution](#resolution-mode) comes into play. We\nsuggest the following locations:\n\n- Default/fallback [versions](#pinning-versions) of tools -> `global`\n\n- Project specific [versions](#pinning-versions) of tools -> `local`\n\n- Project specific [settings](#settings) -> `local`\n\n- Shared/developer [settings](#settings) -> `user`\n\n- Non-project related -> `user`\n\n## Resolution modev0.40.0\n\nWhen a `proto` command or shim is ran, we must find and load all applicable `.prototools` files. We\nthen deeply merge all of these configuration files into a final configuration object, with the\ncurrent directory taking highest precedence.\n\nThe order in which to resolve configuration can be defined using the `--config-mode` (`-c`) command\nline option, or the `PROTO_CONFIG_MODE` environment variable. The following 4 modes are supported:\n\n### `global`\n\nIn this mode, proto will only load the `~/.proto/.prototools` file. This \"global\" file acts as\nconfiguration at the user-level and allows for fallback settings.\n\n```\n~/.proto/.prototools\n```\n\n### `local`\n\nIn this mode, proto will only load the `.prototools` file in the current directory.\n\n```\n./.prototools\n```\n\n### `upwards`\n\nIn this mode, proto will traverse upwards starting from the current directory, and load\n`.prototools` within each directory, until we reach the system root or the user directory (`~`),\nwhichever comes first.\n\n```\n~/Projects/app/.prototools (cwd)~/Projects/.prototools~/.prototools\n```\n\nThis is the default mode for the [`activate`](/docs/proto/commands/activate),\n[`install`](/docs/proto/commands/install), [`outdated`](/docs/proto/commands/outdated), and\n[`status`](/docs/proto/commands/status) commands.\n\n### `upwards-global` / `all`\n\nThis mode works exactly like [`upwards`](#upwards) but with the functionality of [`global`](#global)\nas well. The global `~/.proto/.prototools` file is appended as the final entry.\n\n```\n~/Projects/app/.prototools (cwd)~/Projects/.prototools~/.prototools~/.proto/.prototools\n```\n\nThis is the default mode for all other commands not listed above in `upwards`.\n\n## Environment modev0.29.0\n\nWe also support environment specific configuration, such as `.prototools.production` or\n`.prototools.development`, when the `PROTO_ENV` environment variable is set. This is useful for\ndefining environment specific aliases, or tool specific configuration.\n\nThese environment aware settings take precedence over the default `.prototools` file, for the\ndirectory it's located in, and are merged in the same way as the default configuration. For example,\nthe lookup order would be the following when `PROTO_ENV=production`:\n\n```\n~/Projects/.prototools.production~/Projects/.prototools~/.prototools.production~/.prototools~/.proto/.prototools\n```\n\nThe global `~/.proto/.prototools` file does not support environment modes.\n\n## Pinning versions\n\nproto supports pinning versions of tools on a per-directory basis through our `.prototools`\nconfiguration file. This file takes precedence during [version detection](/docs/proto/detection) and can be\ncreated/updated with [`proto pin`](/docs/proto/commands/pin).\n\nAt its most basic level, you can map tools to specific versions, for the directory the file is\nlocated in. A [version](/docs/proto/tool-spec) can either be a fully-qualified version, a partial version, a\nrange or requirement, or an alias.\n\n.prototools\n\n```\nnode = \"16.16.0\"npm = \"9\"go = \"~1.20\"rust = \"stable\"\n```\n\n### Lock `proto` versionv0.39.0\n\nYou can also pin the version of proto that you want all tools to execute with by adding a `proto`\nversion entry. This approach uses shims and dynamic version detection like other tools.\n\n.prototools\n\n```\nproto = \"0.38.0\"\n```\n\n## Available settings\n\n### `[env]`v0.29.0\n\nThis setting is a map of environment variables that will be applied to all tools when they are\nexecuted, or when [`proto activate`](/docs/proto/commands/activate) is ran in a shell profile. Variables\ndefined here will not override existing environment variables (either passed on the command line,\nor inherited from the shell).\n\n.prototools\n\n```\n[env]DEBUG = \"*\"\n```\n\nAdditionally, `false` can be provided as a value, which will remove the environment variable. This\nis useful for removing inherited shell variables.\n\n.prototools\n\n```\n[env]DEBUG = false\n```\n\nVariables also support substitution using the syntax `${VAR_NAME}`. When using substitution,\nvariables in the current process and merged `[env]` can be referenced. Recursive substitution is not\nsupported!\n\nThis functionality enables per-directory environment variables!\n\n#### `file`v0.43.0\n\nThis is a special field that points to a dotenv file, relative from the current configuration file,\nthat will be loaded into the environment variables mapping. Variables defined in a dotenv file will\nbe loaded before variables manually defined within `[env]`.\n\nThis feature utilizes the [dotenvy](https://github.com/allan2/dotenvy) crate for parsing dotfiles.\n\n.prototools\n\n```\n[env]file = \".env\"\n```\n\n### `[settings]`\n\n#### `auto-install`\n\nWhen enabled, will automatically install a missing version of a tool when\n[`proto run`](/docs/proto/commands/run) is ran, instead of erroring. Defaults to `false` or\n`PROTO_AUTO_INSTALL`.\n\n.prototools\n\n```\n[settings]auto-install = true\n```\n\nwarning\n\nThis functionality requires shims (not activation) and will only work after a tool has been\ninstalled at least once. This is because the shim executable handles the interception and the shim\nis created after a tool is installed.\n\n#### `auto-clean`\n\nWhen enabled, will automatically clean up the proto store in the background, by removing unused\ntools and outdated plugins. Defaults to `false` or `PROTO_AUTO_CLEAN`.\n\n.prototools\n\n```\n[settings]auto-clean = true\n```\n\n#### `builtin-plugins`v0.39.0\n\nCan be used to customize the [built-in plugins](/docs/proto/tools#built-in) within proto. Can disable all\nbuilt-ins by passing `false`, or enabling a select few by name. Defaults to `true`, which enables\nall.\n\n.prototools\n\n```\n[settings]# Disable allbuiltin-plugins = false# Enable somebuiltin-plugins = [\"node\", \"bun\"]\n```\n\n#### `cache-duration`v0.50.1\n\nThe duration in seconds in which to cache downloaded plugins. Defaults to 30 days.\n\n.prototools\n\n```\n[settings]cache-duration = 3600\n```\n\n#### `detect-strategy`\n\nThe strategy to use when [detecting versions](/docs/proto/detection). Defaults to `first-available` or\n`PROTO_DETECT_STRATEGY`.\n\n- `first-available` - Will use the first available version that is found. Either from `.prototools` or a tool specific file (`.nvmrc`, etc).\n\n- `prefer-prototools` - Prefer a `.prototools` version, even if found in a parent directory. If none found, falls back to tool specific file.\n\n- `only-prototools` - Only use a version defined in `.prototools`. v0.34.0\n\n.prototools\n\n```\n[settings]detect-strategy = \"prefer-prototools\"\n```\n\n#### `pin-latest`\n\nWhen defined and a tool is installed with the \"latest\" alias, will automatically pin the resolved\nversion to the configured location. Defaults to disabled or `PROTO_PIN_LATEST`.\n\n- `global` - Pins globally to `~/.proto/.prototools`.\n\n- `local` - Pins locally to `./.prototools` in current directory.\n\n- `user` - Pins to the user's `~/.prototools` in their home directory. v0.41.0\n\n.prototools\n\n```\n[settings]pin-latest = \"local\"\n```\n\n#### `telemetry`\n\nWhen enabled, we collect anonymous usage statistics for tool installs and uninstalls. This helps us\nprioritize which tools to support, what tools or their versions may be broken, the plugins currently\nin use, and more. Defaults to `true`.\n\n.prototools\n\n```\n[settings]telemetry = false\n```\n\nThe data we track is publicly available and\n[can be found here](https://github.com/moonrepo/proto/blob/master/crates/cli/src/telemetry.rs).\n\n#### `unstable-lockfile`v0.51.0\n\nWhen enabled, will create a `.protolock` file relative to this configuration file. The lockfile will\nrecord and lock all tools, their versions, and checksums from the configuration file, ensuring\nconsistency across machines, and reliability.\n\n.prototools\n\n```\n[settings]unstable-lockfile = true\n```\n\n#### `unstable-registries`v0.51.0\n\nA list of OCI registries to query for plugins by\n[reference](https://oras.land/docs/concepts/reference). Registries will be queried in the order they\nare configured. Each registry object supports the following fields:\n\n- `registry` - The registry host, e.g. `ghcr.io`.\n\n- `namespace` - The namespace (or organization) that the plugin belongs to.\n\n.prototools\n\n```\n[settings]unstable-registries = [  { registry: \"ghcr.io\", namespace: \"moonrepo\" }]\n```\n\n#### `url-rewrites`v0.50.0\n\nProvides a mechanism for rewriting most URLs used by proto, such as those used for downloading\ntools. This setting accepts a map of [Rust regular expressions](https://docs.rs/regex/latest/regex/)\nto [replacement strings](https://docs.rs/regex/latest/regex/struct.Regex.html#method.replace). When\na URL is rewritten, all entries in the map are applied in order, and all matches are replaced.\n\n.prototools\n\n```\n[settings.url-rewrites]\"github.com/(\\\\w+)/(\\\\w+)\" = \"gh-mirror.corp.com/$1/$2\"\"mo+n\" = \"lunar\"\n```\n\nThe following types of URLs are rewritten:\n\n- Tool download/checksum URLs (even from third-party plugins)\n\n- Plugin download URLs\n\n- Build script URLs\n\n- Archive URLs\n\nThe following are not rewritten:\n\n- Git repository URLs\n\n- proto version check/telemetry URLs\n\n### `[settings.build]`v0.46.0\n\nCan be used to customize the build from source flow.\n\n#### `exclude-packages`\n\nConfigures a list of packages that should be excluded during installation.\n\n.prototools\n\n```\n[settings.build]exclude-packages = [\"git\", \"python3\", \"libssl-dev\"]\n```\n\n#### `install-system-packages`\n\nWhen enabled, will install packages required for building using the system package manager. Defaults\nto `true`.\n\n.prototools\n\n```\n[settings.build]install-system-packages = false\n```\n\n#### `system-package-manager`\n\nCustomize the system package manager to use when installing system packages and their dependencies.\nBy default we attempt to detect the package manager to use from the environment.\n\nThis setting accepts a map, where the key is the name of the\n[operating system](https://doc.rust-lang.org/std/env/consts/constant.OS.html), and the value is the\n[package manager](https://docs.rs/system_env/latest/system_env/enum.SystemPackageManager.html) to\nuse. Both the key and value are in kebab-case.\n\n.prototools\n\n```\n[settings.build.system-package-manager]windows = \"choco\"\n```\n\n#### `write-log-file`\n\nWhen a build has completed, write a log file to the current directory. This is always `true` when a\nbuild fails, but `false` otherwise.\n\n.prototools\n\n```\n[settings.build]write-log-file = true\n```\n\n### `[settings.http]`\n\nCan be used to customize the HTTP client used by proto, primarily for requesting files to download,\navailable versions, and more.\n\n#### `allow-invalid-certs`\n\nWhen enabled, will allow invalid certificates instead of failing. This is an escape hatch and\nshould only be used if other settings have failed. Be sure you know what you're doing! Defaults to\n`false`.\n\n.prototools\n\n```\n[settings.http]allow-invalid-certs = true\n```\n\n#### `proxies`\n\nA list of proxy URLs to use for requests. As an alternative, the `HTTP_PROXY` and `HTTPS_PROXY`\nenvironment variables can be set. URLs that start with `http://` will be considered insecure, while\n`https://` will be secure.\n\n.prototools\n\n```\n[settings.http]proxies = [\"https://internal.proxy\", \"https://corp.net/proxy\"]\n```\n\n#### `secure-proxies`v0.40.3\n\nA list of proxy URLs that will be considered secure, regardless of the HTTP protocol.\n\n.prototools\n\n```\n[settings.http]secure-proxies = [\"http://internal.proxy\", \"http://corp.net/proxy\"]\n```\n\n#### `root-cert`\n\nThe path to a root certificate to use for requests. This is useful for overriding the native\ncertificate, or for using a self-signed certificate, especially when in a corporate/internal\nenvironment. Supports `pem` and `der` files.\n\n.prototools\n\n```\n[settings.http]root-cert = \"/path/to/root/cert.pem\"\n```\n\n### `[settings.offline]`v0.41.0\n\nCan be used to customize how we detect an internet connection for offline based logic. These\nsettings are useful if you're behind a VPN or corporate proxy.\n\n#### `custom-hosts`\n\nA list of custom hosts to ping. Will be appended to our\n[default list of hosts](#override-default-hosts) and will be ran last.\n\n.prototools\n\n```\n[settings.offline]custom-hosts = [\"proxy.corp.domain.com:80\"]\n```\n\n#### `override-default-hosts`\n\nIf our default hosts are blocked or are too slow, you can disable pinging them by setting this\noption to true. Our default hosts are Google DNS, Cloudflare DNS, and then Google and Mozilla hosts.\n\nThis should be used in parallel with [`custom-hosts`](#custom-hosts).\n\n.prototools\n\n```\n[settings.offline]override-default-hosts = true\n```\n\n#### `timeout`\n\nThe timeout in milliseconds to wait for a ping against a host to resolve. Default timeout is 750ms.\n\n.prototools\n\n```\n[settings.offline]timeout = 500\n```\n\n### `[plugins]`\n\nThis setting was renamed to [`[plugins.tools]`](#pluginstools) in v0.52 but exists for backwards\ncompatibility.\n\n## Backend specific settings\n\n### `[plugins.backends]`v0.52.0\n\nCustom [backend plugins](/docs/proto/plugins) can be configured with the `[plugins.backends]` section.\n[Learn more about this syntax](/docs/proto/plugins#enabling-plugins).\n\n.prototools\n\n```\n[plugins.backends]my-backend = \"https://raw.githubusercontent.com/my/backend/master/proto-plugin.toml\"\n```\n\nOnce configured, you can manage a tool plugin using your custom backend:\n\n```\n$ proto install my-backend:tool-id\n```\n\n### `[backends.*]`v0.53.0\n\nBackends support custom configuration that will be passed to their WASM plugin, which can be used to\ncontrol the behavior for all tools managed by the backend. Please refer to the\n[official documentation](/docs/proto/tool-spec#backends) around backends.\n\n.prototools\n\n```\n[backends.example]setting = true\n```\n\n### `[backends.*.env]`v0.53.0\n\nThis setting is a map of environment variables for a specific backend, and will be applied when that\nbackend is executed through a managed tool, or when [`proto activate`](/docs/proto/commands/activate) is ran\nin a shell profile. These variables will override those defined in `[env]`. Refer to [`[env]`](#env)\nfor usage examples.\n\n.prototools\n\n```\n[backends.example.env]KEY = \"value\"\n```\n\n#### `file`v0.53.0\n\nLike [`[env].file`](#file), this is a path to a dotenv file, relative from the current configuration\nfile, that will be loaded into the environment variables mapping for this specific backend.\n\n.prototools\n\n```\n[backends.example.env]file = \"backend/.env\"\n```\n\n## Tool specific settings\n\n### `[plugins.tools]`v0.52.0\n\nCustom [tool plugins](/docs/proto/plugins) can be configured with the `[plugins.tools]` section.\n[Learn more about this syntax](/docs/proto/plugins#enabling-plugins).\n\n.prototools\n\n```\n[plugins.tools]my-tool = \"https://raw.githubusercontent.com/my/tool/master/proto-plugin.toml\"\n```\n\nOnce configured, you can manage a tool plugin:\n\n```\n$ proto install my-tool\n```\n\n### `[tools.*]`\n\nTools support custom configuration that will be passed to their WASM plugin, which can be used to\ncontrol the business logic within the plugin. Please refer to the [official documentation](/docs/proto/tools)\nof each tool (typically on their repository) for a list of available settings.\n\nAs an example, let's configure [Node.js](https://github.com/moonrepo/node-plugin) (using the `node`\nidentifier).\n\n.prototools\n\n```\nnpm = \"bundled\" # use bundled npm instead of specific version[tools.node]bundled-npm = true[tools.npm]shared-globals-dir = true\n```\n\n### `[tools.*.aliases]`\n\nAliases are custom and unique labels that map to a specific version, and can be configured manually\nwithin `.prototools`, or by calling the [`proto alias`](/docs/proto/commands/alias) command.\n\n.prototools\n\n```\n[tools.node.aliases]work = \"18\"oss = \"20\"\n```\n\n### `[tools.*.env]`v0.29.0\n\nThis setting is a map of environment variables for a specific tool, and will be applied when that\ntool is executed, or when [`proto activate`](/docs/proto/commands/activate) is ran in a shell profile. These\nvariables will override those defined in `[env]`. Refer to [`[env]`](#env) for usage examples.\n\n.prototools\n\n```\n[tools.node.env]NODE_ENV = \"production\"\n```\n\n#### `file`v0.43.0\n\nLike [`[env].file`](#file), this is a path to a dotenv file, relative from the current configuration\nfile, that will be loaded into the environment variables mapping for this specific tool.\n\n.prototools\n\n```\n[tools.node.env]file = \"frontend/.env\"\n```\n\n## GitHub Action\n\nTo streamline GitHub CI workflows, we provide the\n[`moonrepo/setup-toolchain`](https://github.com/moonrepo/setup-toolchain) action, which can be used\nto install `proto` globally, and cache the toolchain found at `~/.proto`.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      - uses: 'actions/checkout@v4'      - uses: 'moonrepo/setup-toolchain@v0'        with:          auto-install: true\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 635,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__detection.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/detection\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, detection\n- Summary: The most powerful feature in proto is its contextual version detection, that is triggered with\n----\n\nSource: https://moonrepo.dev/docs/proto/detection\n\n# Version detection\n\n2 min\n\nThe most powerful feature in proto is its contextual version detection, that is triggered with\n[`proto run`](/docs/proto/commands/run), [`proto bin`](/docs/proto/commands/bin), or when a shim is executed. So what\ndoes this mean exactly? Before a tool in proto's toolchain can be executed, we need to determine the\nversion of the tool to execute with. If a detected version exists locally, we proceed using that\nbinary, otherwise we fail with a missing installation error.\n\nWhen detecting a version, the following steps are checked, in the order as listed:\n\n#### 1. Version is explicitly passed as a command line argument\n\n```\n$ proto run node 24.0.0\n```\n\n#### 2. Version is provided with the `PROTO_*_VERSION` environment variable\n\n```\n$ PROTO_NODE_VERSION=24.0.0 proto run node\n```\n\n#### 3. Version is located by traversing the file system\n\nThis step will attempt to find a configuration or manifest file in the current working directory,\nand traverse upwards through parent directories (stops at the user's home directory) until a file is\nfound.\n\n##### 3.1. Version is defined locally in `.prototools`\n\nA `.prototools` file was found and a version entry exists for the current tool. This is also known\nas a \"local version\" and can be created with [`proto pin`](/docs/proto/commands/pin).\n\n.prototools\n\n```\nnode = \"24.0.0\"\n```\n\n##### 3.2. Version is defined in the tool's ecosystem\n\nDepending on the tool, a version is extracted from a found file unique to that tool's ecosystem.\nThis includes version manager configs (`.nvmrc`, etc), manifest files (`package.json`, etc), and\nmore.\n\n.nvmrc\n\n```\n24.0.0\n```\n\npackage.json\n\n```\n{  \"devEngines\": {    \"runtime\": {      \"name\": \"node\",      \"version\": \"24.0.0\"    },    \"packageManager\": {      \"name\": \"npm\",      \"version\": \"11.0.0\"    }  }}\n```\n\n#### 4. Version is defined globally\n\nAs the last check, we look for a \"global version\" that was pinned with\n[`proto pin --global`](/docs/proto/commands/pin) or [`proto install --pin`](/docs/proto/commands/install). This version\nis stored at `~/.proto/.prototools` (`%USERPROFILE%\\.proto\\.prototools` on Windows).\n\n#### 5. Version could not be detected\n\nIf all the previous steps have failed, then we could not detect an applicable version, and the\nprocess will fail.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 89,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__faq.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/faq\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, faq\n- Summary: We wanted to keep with the space theme, and spent quite some time digging through Wikipedia and\n----\n\nSource: https://moonrepo.dev/docs/proto/faq\n\n# FAQ\n\n## General\n\n### Where did the name \"proto\" come from?\n\nWe wanted to keep with the space theme, and spent quite some time digging through Wikipedia and\nultimately landed on the page for [protostar](https://en.wikipedia.org/wiki/Protostar) (this is why\nour logo's a star). We really liked the definition of protostar, as it basically means \"the\nbeginning phase of a star\". Even the the prefix proto means \"first\" or \"earliest form of\".\n\nThis was great as that's the impression we had in mind for our tool. proto is the first piece\nrequired for setting up your developer environment. The toolchain is the first layer in the\nfoundation.\n\nFrom an aesthetic standpoint, proto's typography works well with moon, as most of the letters are\ncircle shaped. Double points for proto having two o's like the other products!\n\n### Are you worried about confusion with other tools like protobufs?\n\nNah.\n\n### What is a tool?\n\nA tool in the context of proto is either a language, dependency/package manager (typically for a\nlanguage), or third-party CLI. The tool is something that can be downloaded and installed by\nversion onto a machine.\n\nFurthermore, a tool should have a primary executable file that can be executed with `proto run` or\nthrough proto's shims. Additionally, a tool can also provide secondary executable files. For\nexample, `npm` (the primary) also provides `npx` and `node-gyp` (secondaries).\n\n### What is a backend?\n\nA backend is a special type of tool that provides additional integration with 3rd-party plugins,\ngreatly expanding what can be installed and managed with proto.\n\n### What is a plugin?\n\nA plugin is a WASM (or JSON, TOML, YAML) file for a tool or backend.\n\nThe terms tool and plugin are often used interchangeably, but plugin primarily refers to the WASM\nportion of a tool, while tool refers to the entire package: metadata, business logic, branding, so\non an so forth.\n\n### Will you support more languages?\n\nYes! We'd love to support as many as possible, and if you'd like to help, join our Discord\ncommunity! Feel free to create a [plugin](/docs/proto/plugins) in the mean time.\n\n### Will you support other kinds of tools?\n\nNo, we will only support languages, dependency managers, and CLIs, which should be enough. However,\nyou can create a [plugin](/docs/proto/plugins) to support other kinds of tools.\n\n### Do you support \"build from source\"?\n\nAs of version 0.45, we do! Simple pass `--build` to `proto install`. However, building from source\nis a complicated process and is unique per tool, so not all tools support it.\n\n### How to run a canary release after installing it?\n\nOnce a tool has been installed with `canary`, the canary version can be explicitly referenced using\nour [version detection rules](/docs/proto/detection). The easiest approach is to prefix the shim with an\nenvironment variable:\n\n```\n$ PROTO_BUN_VERSION=canary bun ./index.ts\n```\n\nOr to explicitly configure the version in [`.prototools`](/docs/proto/config):\n\n```\nbun = \"canary\"\n```\n\n### What kind of features are supported for HTTP requests?\n\nproto makes a lot of HTTP requests, for information such as available versions/releases, and for\ndownloading the blobs/archives themselves. Because of this, we do our best to support all kinds of\ninternet connections, proxy and intranet usage, and more, through the following:\n\n- All GET and HEAD requests are cached to `~/.proto/cache/requests` based on the [HTTP cache semantics](https://github.com/kornelski/rusty-http-cache-semantics) and relevant RFCs.\n\n- We support the [netrc file format](https://www.gnu.org/software/inetutils/manual/html_node/The-_002enetrc-file.html) and will automatically load `~/.netrc` if it exists.\n\n- We support an offline mode that will short-circuit certain workflows if there's no internet connection. We check for a connection by pinging DNS endpoints, but this can be configured with [`[settings.offline]`](/docs/proto/config#settingsoffline).\n\n- We attempt to automatically load root and system certifications so that secure connections work correctly. This can be configured with [`[settings.http]`](/docs/proto/config#settingshttp).\n\n## Troubleshooting\n\n### Network requests keep failing, how can I bypass?\n\nWhen a tool is executed, we validate the version to ensure it's correct. We achieve this by making\nnetwork requests to a remote service to gather the list of valid versions. If you're having network\nissues, or the request is timing out, you can bypass these checks with the following:\n\n- Pass a fully-qualified version as an environment variable. The version must be installed for this to work. ``` PROTO_NODE_VERSION=20.0.0 node --version ``` If executing a Node.js package manager, you'll need to set versions for both Node.js and the manager. This is required since manager's execute `node` processes under the hood. ``` PROTO_NODE_VERSION=20.0.0 PROTO_NPM_VERSION=10.0.0 npm --version ```\n\n- Pass the `PROTO_BYPASS_VERSION_CHECK` environment variable. This will bypass the network request to load versions, but does not bypass other requests. However, this is typically enough. ``` PROTO_BYPASS_VERSION_CHECK=1 node --version ```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 121,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__install.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/install\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, install\n- Summary: The following guide can be used to install proto into your environment.\n----\n\nSource: https://moonrepo.dev/docs/proto/install\n\n# Install proto\n\n1 min\n\nThe following guide can be used to install proto into your environment.\n\n## Requirements\n\n- Git - for fetching available versions/tags\n\n- tar, unzip, gz, xz - for unpacking archives\n\n```\n# macOSbrew install git unzip gzip xz# Ubuntu / Debianapt-get install git unzip gzip xz-utils# RHEL-based / Fedoradnf install git unzip gzip xz\n```\n\n## Installing\n\nThe entirety of proto is packaged and shipped as 2 binaries. It works on most operating systems,\nand does not require any external dependencies. For convenience, we provide the following scripts to\ndownload and install proto.\n\ninfo\n\nThe install location can be customized with the `PROTO_HOME` environment variable. If not provided,\nthe default location is `~/.proto`.\n\n### Linux, macOS, WSL\n\nIn a terminal that supports Bash, run the following command. This will download and install proto,\nthen open an interactive prompt to complete the installation.\n\n```\nbash administrator Powershell or Windows Terminal, run the following command. This will download\nand install proto, then open an interactive prompt to complete the installation.\n\n```\nirm https://moonrepo.dev/install/proto.ps1 | iex\n```\n\nYou may also need to run the following command for shims to be executable:\n\n```\nSet-ExecutionPolicy RemoteSigned# Without admin privilegesSet-ExecutionPolicy -Scope CurrentUser RemoteSigned\n```\n\n### Other\n\nproto can also be downloaded and installed manually, by downloading an asset from\n[https://github.com/moonrepo/proto/releases](https://github.com/moonrepo/proto/releases). Be sure to\nrename the file after downloading, and apply the executable bit (`chmod +x`) on macOS and Linux.\n\n## Upgrading\n\nTo upgrade proto, run the [`proto upgrade`](/docs/proto/commands/upgrade) command, or re-run the install\nscripts above.\n\n## Uninstalling\n\nTo uninstall proto, delete the `~/.proto` directory, and remove any `PROTO_HOME` references from\nyour shell profile.\n\n## Canary releases\n\nproto supports canary releases, which are built and published for every commit to our development\nbranches. These releases will include features and functionality that have not yet landed on master.\nCanary releases are available as a\n[GitHub prerelease](https://github.com/moonrepo/proto/releases/tag/canary) using the `canary` tag.\n\n## Nightly releases\n\nproto supports nightly releases, which are built and published once a day from the latest commit on\nmaster. Nightly releases are available as a\n[GitHub prerelease](https://github.com/moonrepo/proto/releases/tag/nightly) using the `nightly` tag.\n\n## Next steps\n\n[Choose a workflow](/docs/proto/workflows)[Learn about `.prototools`](/docs/proto/config)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 98,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__non-wasm-plugin.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/non-wasm-plugin\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, non wasm plugin\n- Summary: The non-WASM plugin is by design, very simple. It's a JSON, TOML, or YAML file that describes a\n----\n\nSource: https://moonrepo.dev/docs/proto/non-wasm-plugin\n\n# Non-WASM plugin\n\nThe non-WASM plugin is by design, very simple. It's a JSON, TOML, or YAML file that describes a\nschema for the tool, how it should be installed, and how it should be invoked. Since this is a\nstatic configuration file, it does not support any logic or complex behavior, and is merely for\nsimple and common use cases, like CLIs.\n\ninfo\n\nJSON and YAML support was added in proto v0.42.\n\n## Create a plugin\n\nLet's start by creating a new plugin, and defining the `name` and `type` fields. The type can either\nbe `language`, `dependency-manager`, `package-manager`, or `cli`. For this example, we'll create a\nplugin for our fake product called Protostar, a CLI tool.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"name\": \"Protostar\",  \"type\": \"cli\"}\n```\n\nprotostar.toml\n\n```\nname = \"Protostar\"type = \"cli\"\n```\n\nprotostar.yaml\n\n```\nname: 'Protostar'type: 'cli'\n```\n\n### Platform variations\n\nNative tools are often platform specific, and proto supports this by allowing you to define\nvariations based on operating system using the `[platform]` section. For non-native tools, this\nsection can typically be skipped.\n\nThis section requires a mapping of Rust\n[`OS` strings](https://doc.rust-lang.org/std/env/consts/constant.OS.html) to platform settings. The\nfollowing settings are available:\n\n- `archs` - A list of architectures supported for this platform. If not provided, supports all archs.\n\n- `archive-prefix` - If the tool is distributed as an archive (zip, tar, etc), this is the name of the direct folder within the archive that contains the tool, and will be removed when unpacking the archive. If there is no prefix folder within the archive, this setting can be omitted.\n\n- `exes-dir` - A relative path to a directory that contains pre-installed executables.\n\n- `exe-path` - The path to the main executable binary within the archive (without the prefix). If the tool is distributed as a single binary, this setting can be typically omitted.\n\n- `checksum-file` - Name of the checksum file to verify the downloaded file with. If the tool does not support checksum verification, this setting can be omitted.\n\n- `download-file` (required) - Name of the file to download. [Learn more about downloading](#downloading-and-installing).\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"platform\": {    \"linux\": {      \"archivePrefix\": \"protostar-linux\",      \"exePath\": \"bin/protostar\",      \"checksumFile\": \"protostar-{arch}-unknown-linux-{libc}.sha256\",      \"downloadFile\": \"protostar-{arch}-unknown-linux-{libc}.tar.gz\"    },    \"macos\": {      \"archivePrefix\": \"protostar-macos\",      \"exePath\": \"bin/protostar\",      \"checksumFile\": \"protostar-{arch}-apple-darwin.sha256\",      \"downloadFile\": \"protostar-{arch}-apple-darwin.tar.xz\"    },    \"windows\": {      \"archivePrefix\": \"protostar-windows\",      \"exePath\": \"bin/protostar.exe\",      \"checksumFile\": \"protostar-{arch}-pc-windows-msvc.sha256\",      \"downloadFile\": \"protostar-{arch}-pc-windows-msvc.zip\"    }  }}\n```\n\nprotostar.toml\n\n```\n[platform][platform.linux]archive-prefix = \"protostar-linux\"exe-path = \"bin/protostar\"checksum-file = \"protostar-{arch}-unknown-linux-{libc}.sha256\"download-file = \"protostar-{arch}-unknown-linux-{libc}.tar.gz\"[platform.macos]archive-prefix = \"protostar-macos\"exe-path = \"bin/protostar\"checksum-file = \"protostar-{arch}-apple-darwin.sha256\"download-file = \"protostar-{arch}-apple-darwin.tar.xz\"[platform.windows]archive-prefix = \"protostar-windows\"exe-path = \"bin/protostar.exe\"checksum-file = \"protostar-{arch}-pc-windows-msvc.sha256\"download-file = \"protostar-{arch}-pc-windows-msvc.zip\"\n```\n\nprotostar.yaml\n\n```\nplatform:  linux:    archivePrefix: 'protostar-linux'    exePath: 'bin/protostar'    checksumFile: 'protostar-{arch}-unknown-linux-{libc}.sha256'    downloadFile: 'protostar-{arch}-unknown-linux-{libc}.tar.gz'  macos:    archivePrefix: 'protostar-macos'    exePath: 'bin/protostar'    checksumFile: 'protostar-{arch}-apple-darwin.sha256'    downloadFile: 'protostar-{arch}-apple-darwin.tar.xz'  windows:    archivePrefix: 'protostar-windows'    exePath: 'bin/protostar.exe'    checksumFile: 'protostar-{arch}-pc-windows-msvc.sha256'    downloadFile: 'protostar-{arch}-pc-windows-msvc.zip'\n```\n\nYou may have noticed tokens above, like `{arch}`. These are special tokens that are replaced with a\ndynamic value at runtime, based on the current host machine executing the code. The following tokens\nare available:\n\n- `{version}` - The currently resolved version, as a fully-qualified semantic or calendar version.\n\n- `{versionMajor}` / `{versionYear}` - Only the major version. v0.41.4\n\n- `{versionMinor}` / `{versionMonth}` - Only the minor version. v0.45.2\n\n- `{versionPatch}` / `{versionDay}` - Only the patch version. v0.45.2\n\n- `{versionPrerelease}` - The prerelease identifier, if applicable. Returns an empty string otherwise. v0.41.4\n\n- `{versionBuild}` - The build identifier, if applicable. Returns an empty string otherwise. v0.41.4\n\n- `{arch}` - The architecture of the host machine, like `x86_64`. These values map to Rust's [`ARCH` constant](https://doc.rust-lang.org/std/env/consts/constant.ARCH.html), but can be customized with [`install.arch`](#downloading-and-installing).\n\n- `{os}` - The operating system of the host machine, like `windows`. These values map to Rust's [`OS` constant](https://doc.rust-lang.org/std/env/consts/constant.OS.html).\n\n- `{libc}` - For Linux machines, this is the current libc implementation, either `gnu` or `musl`. v0.31.2\n\n### Downloading and installing\n\nA non-WASM plugin only supports downloading pre-built tools, typically as an archive, and does\nnot support building from source. The `[install]` section can be used to configure how the tool\nshould be downloaded and installed into the toolchain. The following settings are available:\n\n- `arch` - A mapping of Rust [`ARCH` strings](https://doc.rust-lang.org/std/env/consts/constant.ARCH.html) to custom values for the `{arch}` token. This is useful if the tool has different terminology.\n\n- `libc` - A mapping of custom values for the `{libc}` token.\n\n- `checksum-url` - A secure URL to download the checksum file for verification. If the tool does not support checksum verification, this setting can be omitted.\n\n- `checksum-url-canary` - A URL for canary releases.\n\n- `checksum-public-key` - Public key used for verifying checksums. Only used for `.minisig` files.\n\n- `download-url` (required) - A secure URL to download the tool/archive.\n\n- `download-url-canary` - A URL for canary releases.\n\n- `primary` - Configures the primary executable.\n\n- `secondary` - Configures secondary executables.\n\nThe URL settings support `{checksum_file}` and `{download_file}` tokens, which will be replaced with\nthe values from the `[platform]` section.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"install\": {    \"checksumUrl\": \"https://github.com/moonrepo/protostar/releases/download/v{version}/{checksum_file}\",    \"downloadUrl\": \"https://github.com/moonrepo/protostar/releases/download/v{version}/{download_file}\",    \"arch\": {      \"aarch64\": \"arm64\",      \"x86_64\": \"x64\"    }  }}\n```\n\nprotostar.toml\n\n```\n[install]checksum-url = \"https://github.com/moonrepo/protostar/releases/download/v{version}/{checksum_file}\"download-url = \"https://github.com/moonrepo/protostar/releases/download/v{version}/{download_file}\"[install.arch]aarch64 = \"arm64\"x86_64 = \"x64\"\n```\n\nprotostar.yaml\n\n```\ninstall:  checksumUrl: 'https://github.com/moonrepo/protostar/releases/download/v{version}/{checksum_file}'  downloadUrl: 'https://github.com/moonrepo/protostar/releases/download/v{version}/{download_file}'  arch:    aarch64: 'arm64'    x86_64: 'x64'\n```\n\n#### Executables\n\nThe available executables (bins and shims) can be customized with the `[install.exes]` section,\nwhich is required. This setting requires a map, where the key is the executable file name, and the\nvalue is an object of the following options:\n\n- `exe-path` - The file to execute, relative from the tool directory. On Windows, the `.exe` extension will automatically be appended. If you need more control over platform variance, use `[platform.*.exe-path]` instead.\n\n- `no-bin` - Do not symlink a binary in `~/.proto/bin`.\n\n- `no-shim`- Do not generate a shim in `~/.proto/shims`.\n\n- `parent-exe-name` - Name of a parent executable required to execute the executable path. For example, `node` is required for `.js` files.\n\n- `primary` - Is the main executable in the tool. There can only be 1 primary! v0.42.0\n\n- `shim-before-args` - Custom args to prepend to user-provided args within the generated shim.\n\n- `shim-after-args` - Custom args to append to user-provided args within the generated shim.\n\n- `shim-env-vars` - Custom environment variables to set when executing the shim.\n\nThis field supports both the required primary executable, and optional secondary executables. The\nprimary executable must be marked with `primary = true`.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"install\": {    \"exes\": {      \"protostar\": {        \"exePath\": \"bins/protostar\",        \"primary\": true,        \"shimBeforeArgs\": [          \"--verbose\"        ]      },      \"protostar-debug\": {        \"exePath\": \"bins/protostar-debug\",        \"noShim\": true      }    }  }}\n```\n\nprotostar.toml\n\n```\n[install][install.exes][install.exes.protostar]exe-path = \"bins/protostar\"primary = trueshim-before-args = [ \"--verbose\" ][install.exes.protostar-debug]exe-path = \"bins/protostar-debug\"no-shim = true\n```\n\nprotostar.yaml\n\n```\ninstall:  exes:    protostar:      exePath: 'bins/protostar'      primary: true      shimBeforeArgs:        - '--verbose'    protostar-debug:      exePath: 'bins/protostar-debug'      noShim: true\n```\n\n#### Global packages\n\nThe `[packages]` sections can be configured that provides information about where global packages\nare stored.\n\n- `globals-lookup-dirs` - A list of directories where global binaries are stored. This setting supports interpolating environment variables via the syntax `$ENV_VAR`.\n\n- `globals-prefix` - A string that all package names are prefixed with. For example, Cargo/Rust binaries are prefixed with `cargo-`.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"packages\": {    \"globalsLookupDirs\": [      \"$PROTOSTAR_HOME/bin\",      \"$HOME/.protostar/bin\"    ]  }}\n```\n\nprotostar.toml\n\n```\n[packages]globals-lookup-dirs = [ \"$PROTOSTAR_HOME/bin\", \"$HOME/.protostar/bin\" ]\n```\n\nprotostar.yaml\n\n```\npackages:  globalsLookupDirs:    - '$PROTOSTAR_HOME/bin'    - '$HOME/.protostar/bin'\n```\n\n### Resolving versions\n\nNow that the tool can be downloaded and installed, we must configure how to resolve available\nversions. Resolving is configured through the `[resolve]` section, which supports 2 patterns to\nresolve with: Git tags or a JSON manifest.\n\n#### Git tags\n\nTo resolve a list of available versions using Git tags, the following settings are available:\n\n- `git-url` (required) - The remote URL to fetch tags from.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"gitUrl\": \"https://github.com/moonrepo/protostar\"  }}\n```\n\nprotostar.toml\n\n```\n[resolve]git-url = \"https://github.com/moonrepo/protostar\"\n```\n\nprotostar.yaml\n\n```\nresolve:  gitUrl: 'https://github.com/moonrepo/protostar'\n```\n\n#### JSON manifest\n\nTo resolve a list of available versions using a JSON manifest, the following settings are available:\n\n- `manifest-url` (required) - A URL that returns a JSON response of all versions. This response must be an array of strings, or an array of objects.\n\n- `manifest-version-key` - If the response is an array of objects, this is the key to extract the version from. If the response is an array of strings, this setting can be omitted. Defaults to `version`.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"manifestUrl\": \"https://someregistry.com/protostar/versions.json\",    \"manifestVersionKey\": \"latest_version\"  }}\n```\n\nprotostar.toml\n\n```\n[resolve]manifest-url = \"https://someregistry.com/protostar/versions.json\"manifest-version-key = \"latest_version\"\n```\n\nprotostar.yaml\n\n```\nresolve:  manifestUrl: 'https://someregistry.com/protostar/versions.json'  manifestVersionKey: 'latest_version'\n```\n\n#### Versions and aliasesv0.36.0\n\nAs an alternative, we also support a static configuration of explicit versions and aliases. This is\nuseful if you have an internal tool that is relatively stable, or does not provide a means in which\nto extract version information.\n\n- `versions` - A list of versions.\n\n- `aliases` - A mapping of alias names to versions.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"versions\": [      \"1.2.3\",      \"1.2.4\",      \"1.2.5\"    ],    \"aliases\": {      \"stable\": \"1.2.4\"    }  }}\n```\n\nprotostar.toml\n\n```\n[resolve]versions = [ \"1.2.3\", \"1.2.4\", \"1.2.5\" ][resolve.aliases]stable = \"1.2.4\"\n```\n\nprotostar.yaml\n\n```\nresolve:  versions:    - '1.2.3'    - '1.2.4'    - '1.2.5'  aliases:    stable: '1.2.4'\n```\n\n#### Version patterns\n\nWhen a version is found, either from a git tag or manifest key, we attempt to parse it into a\n[valid version](/docs/proto/tool-spec) using a Rust based regex pattern and the `version-pattern` setting.\n\nThis pattern uses named regex capture groups (`(?...)`) to build the version, and to support\nfound versions that are not fully-qualified (they may be missing patch or minor versions). The\nfollowing groups are supported:\n\n- `major` / `year` - The major version number. Defaults to `0` if missing.\n\n- `minor` / `month` - The minor version number. Defaults to `0` if missing.\n\n- `patch` / `day` - The patch version number. Defaults to `0` if missing.\n\n- `pre` - The pre-release identifier, like \"rc.0\" or \"alpha.0\". Supports an optional leading `-`. Does nothing if missing.\n\n- `build` - The build metadata, like a timestamp. Supports an optional leading `+`. Does nothing if missing.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"versionPattern\": \"^@protostar/cli@((?\\\\d+)\\\\.(?\\\\d+)\\\\.(?\n\\\\d+))\"  }}\n```\n\nprotostar.toml\n\n```\n[resolve]version-pattern = \"^@protostar/cli@((?\\\\d+)\\\\.(?\\\\d+)\\\\.(?\n\\\\d+))\"\n```\n\nprotostar.yaml\n\n```\nresolve:  versionPattern: '^@protostar/cli@((?\\d+)\\.(?\\d+)\\.(?\n\\d+))'\n```\n\nIf no named capture groups are found, the match at index `1` is used as the version.\n\n### Detecting versions\n\nAnd lastly, we can configure how to [detect a version](/docs/proto/detection) contextually at runtime, using\nthe `[detect]` setting. At this time, we only support 1 setting:\n\n- `version-files` - A list of version files to extract from. The contents of these files can only be the version string itself.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"detect\": {    \"versionFiles\": [      \".protostar-version\",      \".protostarrc\"    ]  }}\n```\n\nprotostar.toml\n\n```\n[detect]version-files = [ \".protostar-version\", \".protostarrc\" ]\n```\n\nprotostar.yaml\n\n```\ndetect:  versionFiles:    - '.protostar-version'    - '.protostarrc'\n```\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 422,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__plugins.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/plugins\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, plugins\n- Summary: proto supports a pluggable architecture as a means for consumers to integrate and manage custom\n----\n\nSource: https://moonrepo.dev/docs/proto/plugins\n\n# Plugins\n\nproto supports a pluggable architecture as a means for consumers to integrate and manage custom\ntools (languages, CLIs, etc) within proto's toolchain. It's not possible for proto to support\neverything in core directly, so plugins are a way for the community to extend the toolchain to\ntheir needs.\n\n## Enabling plugins\n\nPlugins can be enabled by configuring them in [`.prototools`](/docs/proto/config#plugins) files, within the\n`[plugins]` section. The map key is the plugin name in kebab-case, which is used as the\nbinary/tool name in proto, and also the name for configuration and cache purposes. The map value is\na [plugin locator string](/docs/guides/wasm-plugins#configuring-plugin-locations) that defines a\nprotocol and source location.\n\n.prototools\n\n```\n[plugins.tools] = \"\n://\"\n```\n\n## Creating plugins\n\nTo ease the plugin development process, proto supports 2 types of plugins, a\n[non-WASM configuration based plugin](/docs/proto/non-wasm-plugin) for basic use cases, and a\n[WASM based plugin](/docs/proto/wasm-plugin) for advanced use cases.\n\n## Publish a plugin\n\nproto's registry is currently powered by static JSON files located in our official\n[proto repository](https://github.com/moonrepo/proto/tree/master/registry). View that link for\ninformation on how to publish a plugin.\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 53,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__tool-spec.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/tool-spec\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, tool spec\n- Summary: Since proto is a toolchain for multiple tools, each with differing version formats, we must align\n----\n\nSource: https://moonrepo.dev/docs/proto/tool-spec\n\n# Tool specification\n\n3 min\n\nSince proto is a toolchain for multiple tools, each with differing version formats, we must align\nthem on a standard specification that can resolve and store safely. To handle this, we've\nimplemented our own solution called the tool and version specification. This specification currently\nsupports semantic and calendar based versions, each with their own guidelines and caveats.\n\ninfo\n\nIf you're implementing a plugin for a specific tool that has a different version format, you'll need\nto re-format it into one of the specifications below.\n\n## Backendsv0.47.0\n\nA backend is an internal system that allows proto to use plugins from 3rd-party package/version\nmanagers within proto, greatly expanding the amount of tools that proto can install and support.\nThis functionality is achieved through special WASM plugins under the hood.\n\nTo make use of a backend, prefix the tool identifier in `.prototools` with the backend's unique\nidentifier. For example, we can install Zig via asdf.\n\n.prototools\n\n```\n# >= v0.52\"asdf:zig\" = \"0.13.0\"# does\nnot use the `asdf` binary itself, and instead emulates the environment as best we can. Because of\nthis, some tools may not be usable through proto.\n\n.prototools\n\n```\n\"asdf:\" = \"20\"\n```\n\nBy default, the ID pinned in `.prototools` is the\n[asdf shortname](https://asdf-vm.com/plugins/create.html#plugin-shortname-index) used when cloning a\nrepository. If the ID is different than the shortname (`node` vs `nodejs`), you can configure the\n`asdf-shortname` setting.\n\n.prototools\n\n```\n\"asdf:node\" = \"20\"[tools.\"asdf.node\"]asdf-shortname = \"nodejs\"\n```\n\nThe following settings are supported:\n\n- `asdf-shortname` (string) - The name of the [asdf plugin](https://github.com/asdf-vm/asdf-plugins) if different than the configured ID.\n\n- `asdf-repository` (string) - The Git repository URL in which to locate [scripts](https://asdf-vm.com/plugins/create.html#scripts-overview). If not defined, is extracted from the shortname plugin index.\n\n- `exes` (string[]) - List of executable file names (relative from `bin`) to be linked as a shim/bin. If not defined, we'll automatically scan the `bin` directory.\n\n## Semantic versions\n\nThe most common format is [semver](https://semver.org/), also known as a semantic version. This\nformat requires major, minor, and patch numbers, with optional pre-release and build metadata.\n\n.prototools\n\n```\ntool = \"1.2.3\"\n```\n\n### Syntax\n\n- `..` - 1.2.3\n\n- `..-` - 1.2.3-alpha.0\n\n- `..-+` - 1.2.3-alpha.0+nightly456\n\n- `..+` - 1.2.3+nightly456\n\n### Guidelines\n\n- major, minor, patch - `0-9` of any length\n\n- pre, build - `a-z`, `0-9`, `-`, `.`\n\n[Learn more about this format!](https://semver.org/#backusnaur-form-grammar-for-valid-semver-versions)\n\n## Calendar versionsv0.37.0\n\nAnother popular format is [calver](https://calver.org/), also known as a calendar version, which\nuses the calendar year, month, and day as version numbers. This format also supports pre-release and\nbuild metadata, but with different syntax than semver.\n\n.prototools\n\n```\ntool = \"2025-02-26\"\n```\n\n### Syntax\n\n- `-` - 2024-02\n\n- `--` - 2024-02-26\n\n- `--.` - 2024-02-26.123\n\n- `--_` - 2024-02-26_123\n\n- `--.-` - 2024-02-26.123-alpha.0\n\n- `--_-` - 2024-02-26_123-alpha.0\n\n- `---` - 2024-02-26-alpha.0\n\n### Guidelines\n\n- year - `0-9` of 1-4 length If the year is not YYYY format, it will use the year 2000 as the base. For example, `24` becomes `2024`, and `124` becomes `2124`.\n\n- month - `0-9` of 1-2 length Supports with and without a leading zero (`02` vs `2`).\n\n- Does not support invalid months (`0` or `13`).\n\n- day - `0-9` of 1-2 length Can be omitted, even with build/pre.\n\n- Supports with and without a leading zero (`02` vs `2`).\n\n- Does not support invalid days (`0` or `32`).\n\n- build - `0-9` of any length Also known as a \"micro\" number.\n\n- The leading dot `.` format is preferred.\n\n- pre - `a-z`, `0-9`, `-`, `.`\n\n[Learn more about this format!](https://calver.org/#scheme)\n\n## Requirements and ranges\n\nBesides an explicit version, we also support partial versions known as version requirements or\nversion ranges. These are quite complex as we need to support both semver and calver in unison, as\nwell as support partial/incomplete numbers (missing patch/day, missing minor/month, etc). We do our\nbest to support as many combinations as possible.\n\n.prototools\n\n```\ntool-a = \"^1\"tool-b = \"~2.1\"tool-c = \">=2000-10\"\n```\n\n### Syntax\n\n- Requirement - `[]` - `1.2.3`, `>4.5`, `~3`, `^2000-10`, etc\n\n- AND range - `[,] ...` - `>=1, `, `>=`, ` If omitted, defaults to `~` when a partial version is provided (i.e. allow the minimum specified version component to increase)\n\n- If a full version is provided, defaults to `^` (i.e. allow any newer version that is nominally compatible)\n\n- To specify an exact version, use the `=` operator explicitly.\n\n- pattern Dot-separated semver, with optional major and patch numbers.\n\n- Dash-separated calver, with optional month and day numbers.\n\n- Pre-release and build metadata are only supported when suffixed to full versions.\n\nFor example, if you want to use `npm` 11.6.2 but 11.6.3 has an issue, use:\n`npm = \"^11.6.4 || =11.6.2\"`\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 185,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__tools.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/tools\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, tools\n- Summary: The following tools are supported natively in proto's toolchain.\n----\n\nSource: https://moonrepo.dev/docs/proto/tools\n\n# Supported tools\n\n## Built-in\n\nThe following tools are supported natively in proto's toolchain.\n\n## Third-party\n\n[Add tool](https://github.com/moonrepo/proto/tree/master/registry)\n\nAdditional tools can be supported through [plugins](/docs/proto/plugins).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 31,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__wasm-plugin.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/wasm-plugin\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, wasm plugin\n- Summary: If you want more control over how your tool works, a WASM plugin is the way to go.\n----\n\nSource: https://moonrepo.dev/docs/proto/wasm-plugin\n\n# WASM plugin\n\nIf you want more control over how your tool works, a WASM plugin is the way to go.\n\nsuccess\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins) for more information on how our WASM\nplugins work, critical concepts to know, and more. Once you have a good understanding, you may\ncontinue this proto specific guide.\n\n## Concepts\n\nThe following concepts are unique to proto, but be sure to also read about the general concepts in\nour [WASM plugins guide](/docs/guides/wasm-plugins#concepts).\n\n### Tool context\n\nFor plugin functions, we provide what we call the tool context, which is information that is\nconstantly changing depending on the current step or state of proto's execution. The context cannot\nbe accessed with a stand-alone function, and is instead passed as a `context` field in the input of\nmany plugin functions.\n\n```\n#[plugin_fn]pub fn download_prebuilt(Json(input): Json) -> FnResult> {    let version = input.context.version;    // ...}\n```\n\nThe following fields are available on the\n[context object](https://docs.rs/proto_pdk/latest/proto_pdk/struct.ToolContext.html):\n\n- `proto_version` - The version of proto executing the plugin. Note that this version may be for the [`proto_core` crate](https://crates.io/crates/proto_core), and not the CLI. Patch numbers will drift, but major and minor numbers should be in sync.\n\n- `temp_dir` - A virtual path to a temporary directory unique to this tool. v0.45.0\n\n- `tool_dir` - A virtual path to the tool's directory for the current version.\n\n- `version` - The current version or alias. If not resolved, will be \"latest\".\n\ncaution\n\nThe `version` field is either a fully-qualified version (1.2.3), an alias (\"latest\", \"stable\"), or\ncanary (\"canary\"). Be sure to account for all these variations when implementing plugin functions!\n\n### Tool configuration\n\nUsers can configure tools through the [`[tools.*]`](/docs/proto/config#tools) section of their `.prototools`,\nwhich can then be accessed within the WASM plugin using the\n[`get_tool_config`](https://docs.rs/proto_pdk/latest/proto_pdk/fn.get_tool_config.html) function.\n\nThis function requires a struct to deserialize into. It should implement `Default`, enable serde\ndefaults, and map keys from `kebab-case`. If you want to error on unknown settings, also enable\n`deny_unknown_fields`.\n\n```\n#[derive(Debug, Default, serde::Deserialize)]#[serde(default, deny_unknown_fields, rename_all = \"kebab-case\")]struct NodeToolConfig {    pub bundled_npm: bool,}let config = get_tool_config::()?;config.bundled_npm;\n```\n\n### Backend configurationv0.53.0\n\nLike tool configuration, users can configure backends through the\n[`[backends.*]`](/docs/proto/config#backends) section of their `.prototools`, which can then be accessed\nwithin the WASM plugin using the\n[`get_backend_config`](https://docs.rs/proto_pdk/latest/proto_pdk/fn.get_backend_config.html)\nfunction.\n\n```\n#[derive(Debug, Default, serde::Deserialize)]#[serde(default, deny_unknown_fields, rename_all = \"kebab-case\")]struct ExampleBackendConfig {    pub setting: bool,}let config = get_backend_config::()?;\n```\n\n## Creating a plugin\n\nsuccess\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins#creating-a-plugin) for steps on how to\ncreate a Rust based plugin.\n\n## Implementing tool functions\n\nPlugins are powered by a set of functions that are called from the host, and are annotated with\n`#[plugin_fn]`. These are known as plugin functions, or guest functions.\n\n### Registering the tool\n\nThe first step in a plugin's life-cycle is to register metadata about the plugin with the\n`register_tool` function. This function is called immediately after a plugin is loaded at runtime,\nand must return a human-readable name and plugin type.\n\n```\n#[plugin_fn]pub fn register_tool(_: ()) -> FnResult> {    Ok(Json(RegisterToolOutput {        name: \"Node.js\".into(),        type_of: PluginType::Language,        minimum_proto_version: Some(Version::new(0, 42, 0)),        plugin_version: Version::parse(env!(\"CARGO_PKG_VERSION\")).ok(),        ..RegisterToolOutput::default()    }))}\n```\n\nThis function also receives the plugin ID as input, allowing for conditional logic based on the ID.\nThe ID is the [key the plugin was configured with](/docs/proto/plugins#enabling-plugins), and what is passed\nto `proto` commands (e.g. `proto install `).\n\n```\n#[plugin_fn]pub fn register_tool(Json(input): Json) -> FnResult> {  input.id  // ...}\n```\n\n### Configuration schemav0.53.0\n\nIf you are using [tool configuration](#tool-configuration), you can register the shape of the\nconfiguration using the [`schematic`](https://crates.io/crates/schematic) crate and the\n`define_tool_config` function. This shape will be used to generate outputs such as JSON schemas, or\nTypeScript types.\n\n```\n#[plugin_fn]pub fn define_tool_config(_: ()) -> FnResult> {    Ok(Json(DefineToolConfigOutput {        schema: Some(schematic::SchemaBuilder::generate::()),    }))}\n```\n\nSchematic is a heavy library, so we suggest adding the dependency like so:\n\n```\n[dependencies]schematic = { version = \"\", default-features = false, features = [\"schema\"] }\n```\n\n### Installation strategy\n\n#### Downloading pre-builts\n\nOur plugin layer only supports downloading pre-built tools, typically as an archive, and does\nnot support building from source. The `download_prebuilt` function must be defined, whichs\nconfigures how the tool should be downloaded and installed.\n\nThe following fields are available:\n\n- `archive_prefix` - If the tool is distributed as an archive (zip, tar, etc), this is the name of the direct folder within the archive that contains the tool, and will be removed when unpacking the archive. If there is no prefix folder within the archive, this setting can be omitted.\n\n- `download_url` (required) - A secure URL to download the tool/archive.\n\n- `download_name` - File name of the archive to download. If not provided, will attempt to extract it from the URL.\n\n- `checksum` - The checksum hash itself. Will be used if no other option was provided. v0.47.0\n\n- `checksum_url` - A secure URL to download the checksum file for verification. If the tool does not support checksum verification, this setting can be omitted.\n\n- `checksum_public_key` - Public key used for verifying checksums. Only used for `.minisig` files.\n\n```\n#[plugin_fn]pub fn download_prebuilt(Json(input): Json) -> FnResult> {     let env = get_host_environment()?;    check_supported_os_and_arch(        NAME,        &env,        permutations! [            HostOS::Linux => [HostArch::X64, HostArch::Arm64, HostArch::Arm, HostArch::Powerpc64, HostArch::S390x],            HostOS::MacOS => [HostArch::X64, HostArch::Arm64],            HostOS::Windows => [HostArch::X64, HostArch::X86, HostArch::Arm64],        ],    )?;    let version = input.context.version;    let arch = env.arch;    let os = env.os;    let prefix = match os {        HostOS::Linux => format!(\"node-v{version}-linux-{arch}\"),        HostOS::MacOS => format!(\"node-v{version}-darwin-{arch}\"),        HostOS::Windows => format!(\"node-v{version}-win-{arch}\"),        other => {            return Err(PluginError::UnsupportedPlatform(\"Node.js\".into(), other.into()))?;        }    };    let filename = if os == HostOS::Windows {        format!(\"{prefix}.zip\")    } else {        format!(\"{prefix}.tar.xz\")    };    Ok(Json(DownloadPrebuiltOutput {        archive_prefix: Some(prefix),        download_url: format!(\"https://nodejs.org/dist/v{version}/{filename}\"),        download_name: Some(filename),        checksum_url: Some(format!(\"https://nodejs.org/dist/v{version}/SHASUMS256.txt\")),        ..DownloadPrebuiltOutput::default()    }))}\n```\n\n##### Unpacking an archive\n\nOur plugin layer will do its best to detect file extensions, unpack the downloaded file (if an\narchive), and install the tool to the correct directory. However, we're unable to account for all\nedge cases, so for situations where the install params above are not sufficient, you may define an\n`unpack_archive` function.\n\nThis function receives an input with the following fields:\n\n- `input_file` - Virtual path to the downloaded file. Maps to `~/.proto/temp//`.\n\n- `output_dir` - Virtual directory to unpack the archive into, or copy the binary to. Maps to `~/.proto/tools//`.\n\n```\n#[plugin_fn]pub fn unpack_archive(Json(input): Json) -> FnResult {    untar(input.input_file, input.output_dir)?;    Ok(())}\n```\n\n#### Build from source\n\nComing soon!\n\n#### Native installation\n\nFor tools that can't be installed through downloading pre-builts or building from source, and\nrequire a more unique/native approach (say running a script), you may define the `native_install`\nfunction.\n\nThis function allows you to execute host commands, make HTTP requests, and more, to install the\ntool. All that's required to return whether the installation was successful or not, and an optional\nerror message.\n\n```\n#[plugin_fn]pub fn native_install(Json(input): Json) -> FnResult> {    let result = exec_captured(\"command\", [\"args\"])?;    Ok(Json(NativeInstallOutput {        installed: result.exit_code == 0,        error: if result.stderr.is_empty() {            None        } else {            Some(result.stderr)        },        ..Default::default()    }))}\n```\n\n### Locating executables\n\nEven though a tool has been installed, we must inform proto of where to find executables. This can\nbe achieved with the required `locate_executables` function. The `exes` field defines the location\nof the executables, relative from the installation directory.\n\n```\n#[plugin_fn]pub fn locate_executables(    Json(_): Json,) -> FnResult> {    let env = get_host_environment()?;    Ok(Json(LocateExecutablesOutput {        exes: HashMap::from_iter([            // Primary            (                \"node\".into(),                ExecutableConfig::new_primary(                    // Helper that chooses between distinct Unix or Windows values                    env.os.for_native(\"bin/node\", \"node.exe\"),                    // Or the same value with optional Windows extension                    // env.os.get_file_name(\"node\", \"exe\")                )            ),            // Secondary            (                \"corepack\".into(),                ExecutableConfig::new(env.os.for_native(\"bin/corepack\", \"corepack.exe\"))            ),        ]),        ..LocateExecutablesOutput::default()    }))}\n```\n\nThe main executable of the tool must be marked as primary, either with\n`ExecutableConfig::new_primary`, or setting the `ExecutableConfig.primary` field to true.\n\nFurthermore, the `locate_executables` function can define a list of lookups for the globals\ninstallation directory. proto will loop through each lookup, and return the first directory that\nexists on the current file system. proto will also expand environment variables in the format of\n`$VAR_NAME`. If a variable is not defined, or has an empty value, the lookup will be skipped. To\ndemonstrate this, we'll use [Deno](https://deno.land/manual@v1.35.0/tools/script_installer).\n\n```\n#[plugin_fn]pub fn locate_executables(    Json(_): Json,) -> FnResult> {    let env = get_host_environment()?;    Ok(Json(LocateExecutablesOutput {        globals_lookup_dirs: vec![\"$DENO_INSTALL_ROOT/bin\".into(), \"$HOME/.deno/bin\".into()],        // ...        ..LocateExecutablesOutput::default()    }))}\n```\n\n### Loading and resolving versions\n\nNow that the tool can be downloaded and installed, we must configure how to resolve available\nversions to actually be installed. To provide a list of versions and language specific aliases, the\n`load_versions` function must be defined.\n\n```\n#[plugin_fn]pub fn load_versions(Json(_): Json) -> FnResult> {    let mut output = LoadVersionsOutput::default();    let response: Vec = fetch_json(\"https://nodejs.org/dist/index.json\")?;    for (index, item) in response.iter().enumerate() {        let version = VersionSpec::parse(&item.version[1..])?; // Starts with v        if index == 0 {            output.latest = Some(version.clone());        }        output.versions.push(version);    }    Ok(Json(output))}\n```\n\nFurthermore, we support an optional function named `resolve_version`, that can be defined to\nintercept the version resolution process. This function receives an input with an initial candidate,\neither an alias or version, and can replace it with a new candidate. The candidate must be a valid\nalias or version as defined in `load_versions`.\n\n```\n#[plugin_fn]pub fn resolve_version(    Json(input): Json,) -> FnResult> {    let mut output = ResolveVersionOutput::default();    if let UnresolvedVersionSpec::Alias(alias) = input.initial {        let candidate = if alias == \"node\" {            \"latest\"        } else if alias == \"lts-*\" || alias == \"lts/*\" {            \"stable\"        } else if alias.starts_with(\"lts-\") || alias.starts_with(\"lts/\") {            &alias[4..]        } else {            return Ok(Json(output));        };        output.candidate = Some(UnresolvedVersionSpec::Alias(candidate.to_owned()));    }    Ok(Json(output))}\n```\n\n### Detecting versions\n\nAnd lastly, we can configure how to [detect a version](/docs/proto/detection) contextually at runtime, using\nthe `detect_version_files` function and optional `parse_version_file` function. The\n`detect_version_files` function can return a list of files to locate within a directory.\n\n```\n#[plugin_fn]pub fn detect_version_files(input: Json) -> FnResult> {    Ok(Json(DetectVersionOutput {        files: vec![            \".nvmrc\".into(),            \".node-version\".into(),            \"package.json\".into(),        ],        ignore: vec![\"node_modules\".into()],    }))}\n```\n\nBy default our plugin layer will assume the version file's contents contain the literal version, and\nnothing else, like \"1.2.3\". If any of the files in the `detect_version_files` list require custom\nparsing (for example, `package.json` above), you can define the `parse_version_file` function.\n\nThis function receives the file name and contents as input, and must return the parsed version (if\napplicable).\n\n```\n#[plugin_fn]pub fn parse_version_file(Json(input): Json\n) -> FnResult {    let mut version = None;    if input.file == \"package.json\" {        let json: PackageJson = serde_json::from_str(&input.content)?;        if let Some(engines) = json.engines {            if let Some(constraint) = engines.get(\"node\") {                version = Some(UnresolvedVersionSpec::parse(constraint)?);            }        }    } else {        version = Some(UnresolvedVersionSpec::parse(input.content.trim())?);    }    Ok(Json(ParseVersionFileOutput { version }))}\n```\n\n## Implementing backend functions\n\nPlugins are powered by a set of functions that are called from the host, and are annotated with\n`#[plugin_fn]`. These are known as plugin functions, or guest functions.\n\n### Registering the backendv0.52.0\n\nBackends will also need to implement [`register_tool`](#registering-the-tool) for the managed tool\nwithin the backend.\n\nThe first step in a plugin's life-cycle is to register metadata about the plugin with the\n`register_backend` function. This function requires a unique backend identifier, which is typically\nthe identifier of the current tool being managed.\n\n```\n#[plugin_fn]pub fn register_backend(    Json(input): Json,) -> FnResult> {    Ok(Json(RegisterBackendOutput {        backend_id: get_plugin_id()?,        ..Default::default()    }))}\n```\n\n#### Referencing install scripts\n\nSome tools rely on command line scripts for installation, like `asdf`. To make these scripts\navailable (at `~/.proto/backends`), you can define the `source` field in the\n`RegisterBackendOutput`, which accepts a Git repository URL, or an HTTP URL to an archive to unpack.\nAdditionally, the `exes` field must be defined with a list of scripts that will be executed within\nthe backend.\n\nAs an example, here's how the `asdf` backend is implemented:\n\n```\n#[plugin_fn]pub fn register_backend(    Json(input): Json,) -> FnResult> {    Ok(Json(RegisterBackendOutput {        backend_id: get_plugin_id()?,        exes: vec![            \"bin/download\".into(),            \"bin/exec-env\".into(),            \"bin/install\".into(),            \"bin/latest-stable\".into(),            \"bin/list-all\".into(),            \"bin/list-bin-paths\".into(),            \"bin/list-legacy-filenames\".into(),            \"bin/parse-legacy-file\".into(),            \"bin/uninstall\".into(),        ],        source: Some(SourceLocation::Git(GitSource {            url: \"https://github.com/asdf-vm/asdf-nodejs.git\".into(),            ..Default::default()        })),    }))}\n```\n\nThese scripts can then be accessed on the file system using the following virtual path.\n\n```\nPathBuf::from(\"/proto/backends///bin/install\")\n```\n\n### Configuration schemav0.53.0\n\nIf you are using [backend configuration](#backend-configuration), you can register the shape of the\nconfiguration using the [`schematic`](https://crates.io/crates/schematic) crate and the\n`define_backend_config` function. This shape will be used to generate outputs such as JSON schemas,\nor TypeScript types.\n\n```\n#[plugin_fn]pub fn define_backend_config(_: ()) -> FnResult> {    Ok(Json(DefineBackendConfigOutput {        schema: Some(schematic::SchemaBuilder::generate::()),    }))}\n```\n\nSchematic is a heavy library, so we suggest adding the dependency like so:\n\n```\n[dependencies]schematic = { version = \"\", default-features = false, features = [\"schema\"] }\n```\n\n## Testing\n\nThe best way to test the plugin is to execute it through `proto` directly. To do this, you'll need\nto configure a `.prototools` file at the root of your plugin's repository that maps the plugin to a\ndebug build:\n\n```\n[plugins.tools] = \"file://./target/wasm32-wasip1/debug/.wasm\"\n```\n\nAnd everytime you make a change to the plugin, you'll need to rebuild it with:\n\n```\ncargo build --target wasm32-wasip1\n```\n\nWith these 2 pieces in place, you can now execute `proto` commands. Be sure you're running them from\nthe directory with the `.prototools` file, and that you're passing `--log trace`. Logs are extremely\nhelpful for figuring out what's going on.\n\n```\nproto --log trace install proto --log trace list-remote ...\n```\n\n### Unit tests\n\nTesting WASM plugins is a bit tricky, but we've taken it upon ourselves to streamline this process\nas much as possible with built-in test utilities, and Rust macros for generating common test cases.\nTo begin, install all necessary development dependencies:\n\n```\ncargo add --dev proto_pdk_test_utils starbase_sandbox tokio\n```\n\nAnd as mentioned above, everytime you make a change to the plugin, you'll need to rebuild it with:\n\n```\ncargo build --target wasm32-wasip1\n```\n\n#### Testing plugin functions\n\nThe common test case is simply calling plugin functions with a provided input and asserting the\noutput is correct. This can be achieved by creating a plugin instance with `create_plugin` and\ncalling the appropriate method.\n\n```\nuse proto_pdk_test_utils::*;use starbase_sandbox::create_empty_sandbox;#[tokio::test(flavor = \"multi_thread\")]async fn registers_metadata() {    let sandbox = create_empty_proto_sandbox();    let plugin = sandbox.create_plugin(\"id\").await;    assert_eq!(        plugin.register_tool(RegisterToolInput::default()).await,        RegisterToolOutput {            name: \"Name\".into(),            ..RegisterToolOutput::default()        }    );}\n```\n\ninfo\n\nWe suggest using this pattern for static functions that return a deterministic output from a\nprovided input, and not for dynamic functions that make HTTP requests or execute host commands.\n\n#### Generating cases from macros\n\nTo reduce the burden of writing custom tests for common flows, like downloading a pre-built,\nresolving versions, and generating shims, we provide a set of Rust decl macros that will generate\nthe tests for you.\n\nTo test downloading and installing, use `generate_download_install_tests!`. This macro requires a\nplugin ID and a real version to test with.\n\n```\nuse proto_pdk_test_utils::*;generate_download_install_tests!(\"id\", \"1.2.3\");\n```\n\nTo test version resolving, use `generate_resolve_versions_tests!`. This macro requires a plugin ID,\nand a mapping of version/aliases assertions to expectations.\n\n```\ngenerate_resolve_versions_tests!(\"id\", {    \"0.4\" => \"0.4.12\",    \"0.5.1\" => \"0.5.1\",    \"stable\" => \"1.0.0\",});\n```\n\nTo test installing and uninstalling globals, use `generate_globals_test!`. This macro requires a\nplugin ID, the dependency to install, and an optional environment variable to the globals directory.\n\n```\n// Doesn't support all use cases! If this doesn't work, implement a test case manually.generate_globals_test!(\"id\", \"dependency\", \"GLOBAL_INSTALL_ROOT\");\n```\n\nAnd lastly, to test shims, use `generate_shims_test!`. This requires a plugin ID and a list of shim\nfile names. This macro generates snapshots using [Insta](https://insta.rs/).\n\n```\ngenerate_shims_test!(\"id\", [\"primary\", \"secondary\"]);\n```\n\n## Building and publishing\n\nsuccess\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins#building-and-publishing) for steps on how\nto build and publish your plugin.\n\n## Resources\n\nSome helpful resources for learning about and building plugins.\n\n- [Official proto WASM plugins](https://github.com/moonrepo/plugins)\n\n- Plugin development kit [`proto_pdk` docs](https://docs.rs/proto_pdk/)\n\n- [`proto_pdk_test_utils` docs](https://docs.rs/proto_pdk_test_utils/)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 420,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__proto__workflows.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/proto/workflows\n- Keywords: moon, moonrepo, docs, monorepo, build, proto, workflows\n- Summary: With proto, we provide multiple workflows for everyday use for you to choose from. They can be used\n----\n\nSource: https://moonrepo.dev/docs/proto/workflows\n\n# Workflows\n\nWith proto, we provide multiple workflows for everyday use for you to choose from. They can be used\nindividually, or together, it's up to you!\n\n## Shims\n\nproto is primarily powered by the industry standard concept of shims. For each tool installed in\nproto, a shim file will exist at `~/.proto/shims` for the primary executable, and some secondary\nexecutables. Shims are not symlinks to the tool's binary, but are thin wrappers around\n[`proto run`](/docs/proto/commands/run), enabling [runtime version detection](/docs/proto/detection) on every\ninvocation! For example, these are equivalent:\n\n```\n$ proto run node -- --version20.0.0$ node --version20.0.0$ which node~/.proto/shims/node\n```\n\n### Setup\n\nTo make use of shims, prepend the `~/.proto/shims` directory to `PATH` in your shell profile. This\nmust come before the [bin directory](#binary-linking) if using both.\n\nIf you're using or plan to use [shell activation](#shell-activation), the `PATH` configuration\nhappens automatically, but shell activation will only work if the `proto` command is accessible,\nwhich requires `~/.proto/bin` to be in your `PATH`.\n\n## Binary linking\n\nAlternatively, we also support a non-shim based approach, which creates symlinks to a versioned\ntool's primary and secondary executables. For each tool installed in proto, a symlink will exist at\n`~/.proto/bin`.\n\n```\n$ node --version23.1.0$ which node~/.proto/bin/node -> ~/.proto/tools/node/23.1.0/bin/node\n```\n\nWhen a tool is installed into proto, we symlink many binaries based on all the versions that are\ninstalled in the toolchain. The primary binary will always point to the highest installed version,\nwhile we also create binaries for the highest major, and highest major + minor combinations. For\nexample:\n\n- `~/.proto/bin/node` - Points to the highest version.\n\n- `~/.proto/bin/node-` - Points to the highest version within that major range (`~major`). Is created for each separate major version, for example: `node-20`, `node-22`.\n\n- `~/.proto/bin/node-.` - Points to the highest version within that major + minor range (`~major.minor`). Is created for each separate major + minor version, for example: `node-20.1`, `node-22.4`.\n\n- `~/.proto/bin/node-canary` - Points to a canary install, if it exists.\n\n```\n$ node-22 --version22.5.1$ which node-22~/.proto/bin/node-22 -> ~/.proto/tools/node/22.5.1/bin/node\n```\n\ninfo\n\nNot all tools support symlinking a binary, as not all files are executable. For example, most\nNode.js package managers currently do not support this, as JavaScript files are not executable\n(especially on Windows). Shims are required for these tools.\n\n### Setup\n\nTo make use of bins, prepend the `~/.proto/bin` directory to `PATH` in your shell profile. This\nmust come after the [shim directory](#shims) if using shims.\n\nIf you're using or plan to use [shell activation](#shell-activation), the `PATH` configuration\nhappens automatically, but shell activation will only work if the `proto` command is accessible,\nwhich requires `~/.proto/bin` to be in your `PATH`.\n\nwarning\n\nThis directory must always exist in `PATH`, as the official proto binaries `~/.proto/bin/proto` and\n`~/.proto/bin/proto-shim` are located here. If you move those binaries to another location, you can\nomit `~/.proto/bin` from `PATH` if you like.\n\n## Shell activationv0.38.0\n\nOur last workflow is what we call shell activation (or shell hooks), and it's where the proto\nenvironment is setup/reset every time you change directories. If you're coming from another version\nmanager, you may be familiar with this kind of workflow.\n\nSo how does this work exactly? In your shell profile, you'll evaluate a call to\n[`proto activate `](/docs/proto/commands/activate), which generates a bunch of shell specific syntax\nthat registers a hook for \"run this code when the current directory or prompt line changes\". Once\nthis hook is registered and you run `cd` (for example), proto will...\n\n- Load all `.prototools` files\n\n- Extract tools with a [configured version](/docs/proto/config#pinning-versions)\n\n- For each tool: Load associated WASM plugin\n\n- Export environment variables based on [`[env]`](/docs/proto/config#env) and [`[tools.*.env]`](/docs/proto/config#toolsenv)\n\n- Prepend `PATH` with tool-specific directories (like local and global executables) for the detected version\n\n```\n$ cd /some/path && node --version20.0.0$ cd /another/path && node --version18.0.0\n```\n\n### Setup\n\nView the [`proto activate`](/docs/proto/commands/activate#setup) documentation for information on how to setup\nyour shell profile for this workflow.\n\n## Comparison\n\nThe workflows above may come across as information overload, so we've provided the following\ncomparison table outlining the features each workflow supports.\n\nShims Bins Activate\n\nRuntime version detection    only when the hook triggers\n\nSupports multiple versions   \n\nFixed to a single version  with arg or env var   if not using shims\n\nIncludes all tool executables   \n\nIncludes tool globals/packages   \n\nExports environment variables   \n\nPrepends `PATH`   \n\nCan pin proto's version   \n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 146,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__run-task.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/run-task\n- Keywords: moon, moonrepo, docs, monorepo, build, run task\n- Summary: Even though we've [created a task](/docs/create-task), it's not useful unless we run it, which is done\n----\n\nSource: https://moonrepo.dev/docs/run-task\n\n# Run a task\n\n2 min\n\nEven though we've [created a task](/docs/create-task), it's not useful unless we run it, which is done\nwith the [`moon run `](/docs/commands/run) command. This command requires a single argument, a\n[primary target](/docs/concepts/target), which is the pairing of a scope and task name. In the example\nbelow, our project is `app`, the task is `build`, and the target is `app:build`.\n\n```\n$ moon run app:build\n```\n\nWhen this command is ran, it will do the following:\n\n- Generate a directed acyclic graph, known as the action (dependency) graph.\n\n- Insert [`deps`](/docs/config/project#deps) as targets into the graph.\n\n- Insert the primary target into the graph.\n\n- Run all tasks in the graph in parallel and in topological order (the dependency chain).\n\n- For each task, calculate [hashes](/docs/concepts/cache) and either: On cache hit, exit early and return the last run.\n\n- On cache miss, run the task and generate a new cache.\n\n## Running dependents\n\nmoon will always run upstream dependencies ([`deps`](/docs/config/project#deps)) before running the\nprimary target, as their outputs may be required for the primary target to function correctly.\n\nHowever, if you're working on a project that is shared and consumed by other projects, you may want\nto verify that downstream dependents have not been indirectly broken by any changes. This can be\nachieved by passing the `--dependents` option, which will run dependent targets after the primary\ntarget.\n\n```\n$ moon run app:build --dependents\n```\n\n## Running based on affected files only\n\nBy default [`moon run`](/docs/commands/run) will always run the target, regardless if files have\nactually changed. However, this is typically fine because of our\n[smart hashing & cache layer](/docs/concepts/cache). With that being said, if you'd like to only run a\ntarget if files have changed, pass the `--affected` flag.\n\n```\n$ moon run app:build --affected\n```\n\nUnder the hood, we extract locally touched (created, modified, staged, etc) files from your\nconfigured [VCS](/docs/config/workspace#vcs), and exit early if no files intersect with the task's\n[inputs](/docs/config/project#inputs).\n\n### Using remote changes\n\nIf you'd like to determine affected files based on remote changes instead of local changes, pass the\n`--remote` flag. This will extract touched files by comparing the current `HEAD` against the\n[`vcs.defaultBranch`](/docs/config/workspace#defaultbranch).\n\n```\n$ moon run app:build --affected --remote\n```\n\n### Filtering based on change status\n\nWe can take this a step further by filtering down affected files based on a change status, using the\n`--status` option. This option accepts the following values: `added`, `deleted`, `modified`,\n`staged`, `unstaged`, `untracked`. If not provided, the option defaults to all.\n\n```\n$ moon run app:build --affected --status deleted\n```\n\nMultiple status can be provided by passing the `--status` option multiple times.\n\n```\n$ moon run app:build --affected --status deleted --status modified\n```\n\n## Passing arguments to the underlying command\n\nIf you'd like to pass arbitrary arguments to the underlying task command, in addition to the already\ndefined [`args`](/docs/config/project#args), you can pass them after `--`. These arguments are appended\nas-is.\n\n```\n$ moon run app:build -- --force\n```\n\nThe `--` delimiter and any arguments must be defined last on the command line.\n\n## Advanced run targeting\n\nBy this point you should have a basic understanding of how to run tasks, but with moon, we want to\nprovide support for advanced workflows and development scenarios. For example, running a target in\nall projects:\n\n```\n$ moon run :build\n```\n\nOr perhaps running a target based on a query:\n\n```\n$ moon run :build --query \"language=[javascript, typescript]\"\n```\n\nJump to the official [`moon run` documentation](/docs/commands/run) for more examples!\n\n## Next steps\n\n[Migrate to moon](/docs/migrate-to-moon)[Learn about tasks](/docs/concepts/task)[Learn about `moon run`](/docs/commands/run)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 135,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__setup-toolchain.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/setup-toolchain\n- Keywords: moon, moonrepo, docs, monorepo, build, setup toolchain\n- Summary: One of moon's most powerful features is the [toolchain](/docs/concepts/toolchain), which automatically\n----\n\nSource: https://moonrepo.dev/docs/setup-toolchain\n\n# Setup toolchain\n\n5 min\n\nOne of moon's most powerful features is the [toolchain](/docs/concepts/toolchain), which automatically\nmanages, downloads, and installs Node.js and other languages behind the scenes using\n[proto](/proto). It also enables [advanced functionality](/docs/how-it-works/languages#tier-2--platform)\nfor task running based on the platform (language and environment combination) it runs in.\n\nThe toolchain is configured with [`.moon/toolchains.yml`](/docs/config/toolchain).\n\ntip\n\nChange the language dropdown at the top right to switch the examples!\n\n## How it works\n\nFor more information on the toolchain, our tier based support, and how languages integrate into\nmoon, refer to the official [\"how it works\" language guide](/docs/how-it-works/languages) and the\n[toolchain concept](/docs/concepts/toolchain) documentation!\n\ninfo\n\nThe toolchain is optional but helps to solve an array of issues that developers face in their\nday-to-day.\n\n## Enabling a toolchain\n\nBy default all tasks run through the\n[system toolchain](/docs/how-it-works/languages#system-language-and-toolchain) and inherit no special\nfunctionality. If you want to take advantage of this functionality, like dependency hashing, package\nshorthand execution, and lockfile management, you'll need to enable the toolchain in\n[`.moon/toolchains.yml`](/docs/config/toolchain). Otherwise, you can skip to the\n[create a task](/docs/create-task) guide.\n\nBegin by declaring the necessary configuration block, even if an empty object! This configuration\ncan also be injected using the [`moon toolchain add `](/docs/commands/toolchain/add) command\n(doesn't support all languages).\n\n.moon/toolchains.yml\n\n```\njavascript:  packageManager: 'yarn'node: {}yarn: {}\n```\n\nAlthough we've enabled the toolchain, language binaries must exist on `PATH` for task execution to\nfunction correctly. Continue reading to learn how to automate this flow using tier 3 support.\n\n## Automatically installing a tool\n\nOne of the best features of moon is its integrated toolchain and automatic download and installation\nof programming languages (when supported), for all developers and machines that moon runs on. This\nfeature solves the following pain points:\n\n- Developers running tasks using different versions of languages.\n\n- Version drift of languages between machines.\n\n- Languages being installed through different version managers or install scripts.\n\n- Language binaries not existing on `PATH`.\n\n- How shell profiles should be configured.\n\nIf you have dealt with any of these pain points before and would like to eliminate them for you and\nall your developers, you can try enabling moon's tier 3 support for supported tools. This is easily\ndone by defining the `version` field for each toolchain.\n\n.moon/toolchains.yml\n\n```\njavascript:  packageManager: 'yarn'node:  version: '20.0.0'yarn:  version: '4.0.0'\n```\n\nWhen the `version` field is configured, moon will download and install the tool when a related task\nis executed for the first time! It will also set the correct `PATH` lookups and environment\nvariables automatically. Amazing right?\n\n## Next steps\n\n[Create a task](/docs/create-task)[Configure `.moon/toolchains.yml` further](/docs/config/toolchain)[Learn about the toolchain](/docs/concepts/toolchain)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 101,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__setup-workspace.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/setup-workspace\n- Keywords: moon, moonrepo, docs, monorepo, build, setup workspace\n- Summary: Once moon has been [installed](/docs/install), we must setup the [workspace](/docs/concepts/workspace),\n----\n\nSource: https://moonrepo.dev/docs/setup-workspace\n\n# Setup workspace\n\n2 min\n\nOnce moon has been [installed](/docs/install), we must setup the [workspace](/docs/concepts/workspace),\nwhich is denoted by the `.moon` folder  this is known as the workspace root. The workspace is in\ncharge of:\n\n- Integrating with a version control system.\n\n- Defining configuration that applies to its entire tree.\n\n- Housing [projects](/docs/concepts/project) to build a [project graph](/docs/how-it-works/project-graph).\n\n- Running tasks with the [action graph](/docs/how-it-works/action-graph).\n\n## Initializing the repository\n\nLet's scaffold and initialize moon in a repository with the [`moon init`](/docs/commands/init) command.\nThis should typically be ran at the root, but can be nested within a directory.\n\n```\n$ moon init\n```\n\nWhen executed, the following operations will be applied.\n\n- Creates a `.moon` folder with a [`.moon/workspace.yml`](/docs/config/workspace) configuration file.\n\n- Appends necessary ignore patterns to the relative `.gitignore`.\n\n- Infers the version control system from the environment.\n\ninfo\n\nIf you're investigating moon, or merely want to prototype, you can use `moon init --minimal` to\nquickly initialize and create minimal configuration files.\n\n## Migrate from an existing build system\n\nLooking to migrate from Nx or Turborepo to moon? Use our\n[`moon ext migrate-nx`](/docs/guides/extensions#migrate-nx) or\n[`moon ext migrate-turborepo`](/docs/guides/extensions#migrate-turborepo) commands for a (somewhat)\nseamless migration!\n\nThese extensions will convert your existing configuration files to moon's format as best as\npossible, but is not a requirement.\n\n## Configuring a version control system\n\nmoon requires a version control system (VCS) to be present for functionality like file diffing,\nhashing, and revision comparison. The VCS and its default branch can be configured through the\n[`vcs`](/docs/config/workspace#vcs) setting.\n\n.moon/workspace.yml\n\n```\nvcs:  manager: 'git'  defaultBranch: 'master'\n```\n\nmoon defaults to `git` and the settings above, so feel free to skip this.\n\n## Next steps\n\n[Create a project](/docs/create-project)[Configure `.moon/workspace.yml` further](/docs/config/workspace)[Learn about the workspace](/docs/concepts/workspace)\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 85,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/docs__terminology.ext.md",
              "before": "",
              "after": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/terminology\n- Keywords: moon, moonrepo, docs, monorepo, build, terminology\n- Summary: Action A node within the dependency graph that gets executed by the action pipeline.\n----\n\nSource: https://moonrepo.dev/docs/terminology\n\n# Terminology\n\nTerm Description\n\nAction A node within the dependency graph that gets executed by the action pipeline.\n\nAction pipeline Executes actions from our dependency graph in topological order using a thread pool.\n\nAffected Touched by an explicit set of inputs or sources.\n\nCache Files and outputs that are stored on the file system to provide incremental builds and increased performance.\n\nCI Continuous integration. An environment where tests, builds, lints, etc, are continuously ran on every pull/merge request.\n\nDependency graph A directed acyclic graph (DAG) of targets to run and their dependencies.\n\nDownstream Dependents or consumers of the item in question.\n\n[Generator](/docs/guides/codegen) Generates code from pre-defined templates.\n\nHash A unique SHA256 identifier that represents the result of a ran task.\n\nHashing The mechanism of generating a hash based on multiple sources: inputs, dependencies, configs, etc.\n\nLTS Long-term support.\n\nDependency manager Installs and manages dependencies for a specific tool (`npm`), using a manifest file (`package.json`).\n\nPlatform An internal concept representing the integration of a programming language (tool) within moon, and also the environment + language that a task runs in.\n\nPrimary target The target that was explicitly ran, and is the dependee of transitive targets.\n\n[Project](/docs/concepts/project) An collection of source and test files, configurations, a manifest and dependencies, and much more. Exists within a [workspace](/docs/concepts/workspace)\n\nRevision In the context of a VCS: a branch, revision, commit, hash, or point in history.\n\nRuntime An internal concept representing the platform + version of a tool.\n\n[Target](/docs/concepts/target) A label and reference to a task within the project, in the format of `project:task`.\n\n[Task](/docs/concepts/task) A command to run within the context of and configured in a [project](/docs/concepts/project).\n\nTemplate A collection of files that get scaffolded by a generator.\n\nTemplate file An individual file within a template.\n\nTemplate variable A value that is interpolated within a template file and its file system path.\n\n[Token](/docs/concepts/token) A value within task configuration that is substituted at runtime.\n\nTool A programming language or dependency manager within the [toolchain](/docs/concepts/toolchain).\n\n[Toolchain](/docs/concepts/toolchain) Installs and manages tools within the [workspace](/docs/concepts/workspace).\n\nTransitive target A target that is the dependency of the primary target, and must be ran before the primary.\n\nTouched A file that has been created, modified, deleted, or changed in any way.\n\nUpstream Dependencies or producers of the item in question.\n\nVCS Version control system (like Git or SVN).\n\n[Workspace](/docs/concepts/workspace) Root of the moon installation, and houses one or many [projects](/docs/concepts/project). Also refers to package manager workspaces (like Yarn).\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap discovery + markdown conversion.\n- Conversion path: direct HTML fallback parser.\n- This file is one page-level external snapshot in markdown `.ext.md` format.\n----\n",
              "additions": 83,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/index.ext.md",
              "before": "",
              "after": "----\n## External Docs Index // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Output directory: docs/external/moonrepo\n- Scope: 171 pages under /docs (excluding /docs/tags)\n- Keywords: moon, moonrepo, docs index, monorepo, build system, toolchain, proto\n- Summary: This index links one `.ext.md` file per docs page snapshot for moonrepo.\n----\n\n## Pages\n\n- [docs.ext.md](./docs.ext.md) - /docs (ok,mode=jina)\n- [docs__cheat-sheet.ext.md](./docs__cheat-sheet.ext.md) - /docs/cheat-sheet (ok,mode=jina)\n- [docs__commands.ext.md](./docs__commands.ext.md) - /docs/commands (ok,mode=jina)\n- [docs__commands__action-graph.ext.md](./docs__commands__action-graph.ext.md) - /docs/commands/action-graph (ok,mode=jina)\n- [docs__commands__bin.ext.md](./docs__commands__bin.ext.md) - /docs/commands/bin (ok,mode=jina)\n- [docs__commands__check.ext.md](./docs__commands__check.ext.md) - /docs/commands/check (ok,mode=jina)\n- [docs__commands__ci.ext.md](./docs__commands__ci.ext.md) - /docs/commands/ci (ok,mode=jina)\n- [docs__commands__clean.ext.md](./docs__commands__clean.ext.md) - /docs/commands/clean (ok,mode=jina)\n- [docs__commands__completions.ext.md](./docs__commands__completions.ext.md) - /docs/commands/completions (ok,mode=jina)\n- [docs__commands__docker.ext.md](./docs__commands__docker.ext.md) - /docs/commands/docker (ok,mode=jina)\n- [docs__commands__docker__file.ext.md](./docs__commands__docker__file.ext.md) - /docs/commands/docker/file (ok,mode=jina)\n- [docs__commands__docker__prune.ext.md](./docs__commands__docker__prune.ext.md) - /docs/commands/docker/prune (ok,mode=jina)\n- [docs__commands__docker__scaffold.ext.md](./docs__commands__docker__scaffold.ext.md) - /docs/commands/docker/scaffold (ok,mode=jina)\n- [docs__commands__docker__setup.ext.md](./docs__commands__docker__setup.ext.md) - /docs/commands/docker/setup (ok,mode=jina)\n- [docs__commands__exec.ext.md](./docs__commands__exec.ext.md) - /docs/commands/exec (ok,mode=jina)\n- [docs__commands__ext.ext.md](./docs__commands__ext.ext.md) - /docs/commands/ext (ok,mode=jina)\n- [docs__commands__extension.ext.md](./docs__commands__extension.ext.md) - /docs/commands/extension (ok,mode=jina)\n- [docs__commands__extension__add.ext.md](./docs__commands__extension__add.ext.md) - /docs/commands/extension/add (ok,mode=jina)\n- [docs__commands__extension__info.ext.md](./docs__commands__extension__info.ext.md) - /docs/commands/extension/info (ok,mode=jina)\n- [docs__commands__generate.ext.md](./docs__commands__generate.ext.md) - /docs/commands/generate (ok,mode=jina)\n- [docs__commands__hash.ext.md](./docs__commands__hash.ext.md) - /docs/commands/hash (ok,mode=jina)\n- [docs__commands__init.ext.md](./docs__commands__init.ext.md) - /docs/commands/init (ok,mode=html)\n- [docs__commands__mcp.ext.md](./docs__commands__mcp.ext.md) - /docs/commands/mcp (ok,mode=html)\n- [docs__commands__overview.ext.md](./docs__commands__overview.ext.md) - /docs/commands/overview (ok,mode=html)\n- [docs__commands__project.ext.md](./docs__commands__project.ext.md) - /docs/commands/project (ok,mode=html)\n- [docs__commands__project-graph.ext.md](./docs__commands__project-graph.ext.md) - /docs/commands/project-graph (ok,mode=html)\n- [docs__commands__projects.ext.md](./docs__commands__projects.ext.md) - /docs/commands/projects (ok,mode=html)\n- [docs__commands__query.ext.md](./docs__commands__query.ext.md) - /docs/commands/query (ok,mode=html)\n- [docs__commands__query__affected.ext.md](./docs__commands__query__affected.ext.md) - /docs/commands/query/affected (ok,mode=html)\n- [docs__commands__query__changed-files.ext.md](./docs__commands__query__changed-files.ext.md) - /docs/commands/query/changed-files (ok,mode=html)\n- [docs__commands__query__projects.ext.md](./docs__commands__query__projects.ext.md) - /docs/commands/query/projects (ok,mode=html)\n- [docs__commands__query__tasks.ext.md](./docs__commands__query__tasks.ext.md) - /docs/commands/query/tasks (ok,mode=html)\n- [docs__commands__run.ext.md](./docs__commands__run.ext.md) - /docs/commands/run (ok,mode=html)\n- [docs__commands__setup.ext.md](./docs__commands__setup.ext.md) - /docs/commands/setup (ok,mode=html)\n- [docs__commands__sync.ext.md](./docs__commands__sync.ext.md) - /docs/commands/sync (ok,mode=html)\n- [docs__commands__sync__code-owners.ext.md](./docs__commands__sync__code-owners.ext.md) - /docs/commands/sync/code-owners (ok,mode=html)\n- [docs__commands__sync__config-schemas.ext.md](./docs__commands__sync__config-schemas.ext.md) - /docs/commands/sync/config-schemas (ok,mode=html)\n- [docs__commands__sync__projects.ext.md](./docs__commands__sync__projects.ext.md) - /docs/commands/sync/projects (ok,mode=html)\n- [docs__commands__sync__vcs-hooks.ext.md](./docs__commands__sync__vcs-hooks.ext.md) - /docs/commands/sync/vcs-hooks (ok,mode=html)\n- [docs__commands__task.ext.md](./docs__commands__task.ext.md) - /docs/commands/task (ok,mode=html)\n- [docs__commands__task-graph.ext.md](./docs__commands__task-graph.ext.md) - /docs/commands/task-graph (ok,mode=html)\n- [docs__commands__tasks.ext.md](./docs__commands__tasks.ext.md) - /docs/commands/tasks (ok,mode=html)\n- [docs__commands__teardown.ext.md](./docs__commands__teardown.ext.md) - /docs/commands/teardown (ok,mode=html)\n- [docs__commands__template.ext.md](./docs__commands__template.ext.md) - /docs/commands/template (ok,mode=html)\n- [docs__commands__templates.ext.md](./docs__commands__templates.ext.md) - /docs/commands/templates (ok,mode=html)\n- [docs__commands__toolchain.ext.md](./docs__commands__toolchain.ext.md) - /docs/commands/toolchain (ok,mode=html)\n- [docs__commands__toolchain__add.ext.md](./docs__commands__toolchain__add.ext.md) - /docs/commands/toolchain/add (ok,mode=html)\n- [docs__commands__toolchain__info.ext.md](./docs__commands__toolchain__info.ext.md) - /docs/commands/toolchain/info (ok,mode=html)\n- [docs__commands__upgrade.ext.md](./docs__commands__upgrade.ext.md) - /docs/commands/upgrade (ok,mode=html)\n- [docs__comparison.ext.md](./docs__comparison.ext.md) - /docs/comparison (ok,mode=html)\n- [docs__concepts.ext.md](./docs__concepts.ext.md) - /docs/concepts (ok,mode=html)\n- [docs__concepts__cache.ext.md](./docs__concepts__cache.ext.md) - /docs/concepts/cache (ok,mode=html)\n- [docs__concepts__file-group.ext.md](./docs__concepts__file-group.ext.md) - /docs/concepts/file-group (ok,mode=html)\n- [docs__concepts__file-pattern.ext.md](./docs__concepts__file-pattern.ext.md) - /docs/concepts/file-pattern (ok,mode=html)\n- [docs__concepts__project.ext.md](./docs__concepts__project.ext.md) - /docs/concepts/project (ok,mode=html)\n- [docs__concepts__query-lang.ext.md](./docs__concepts__query-lang.ext.md) - /docs/concepts/query-lang (ok,mode=html)\n- [docs__concepts__target.ext.md](./docs__concepts__target.ext.md) - /docs/concepts/target (ok,mode=html)\n- [docs__concepts__task.ext.md](./docs__concepts__task.ext.md) - /docs/concepts/task (ok,mode=html)\n- [docs__concepts__task-inheritance.ext.md](./docs__concepts__task-inheritance.ext.md) - /docs/concepts/task-inheritance (ok,mode=html)\n- [docs__concepts__token.ext.md](./docs__concepts__token.ext.md) - /docs/concepts/token (ok,mode=html)\n- [docs__concepts__toolchain.ext.md](./docs__concepts__toolchain.ext.md) - /docs/concepts/toolchain (ok,mode=html)\n- [docs__concepts__workspace.ext.md](./docs__concepts__workspace.ext.md) - /docs/concepts/workspace (ok,mode=html)\n- [docs__config.ext.md](./docs__config.ext.md) - /docs/config (ok,mode=html)\n- [docs__config__extensions.ext.md](./docs__config__extensions.ext.md) - /docs/config/extensions (ok,mode=html)\n- [docs__config__overview.ext.md](./docs__config__overview.ext.md) - /docs/config/overview (ok,mode=html)\n- [docs__config__project.ext.md](./docs__config__project.ext.md) - /docs/config/project (ok,mode=html)\n- [docs__config__tasks.ext.md](./docs__config__tasks.ext.md) - /docs/config/tasks (ok,mode=html)\n- [docs__config__template.ext.md](./docs__config__template.ext.md) - /docs/config/template (ok,mode=html)\n- [docs__config__toolchain.ext.md](./docs__config__toolchain.ext.md) - /docs/config/toolchain (ok,mode=html)\n- [docs__config__workspace.ext.md](./docs__config__workspace.ext.md) - /docs/config/workspace (ok,mode=html)\n- [docs__create-project.ext.md](./docs__create-project.ext.md) - /docs/create-project (ok,mode=html)\n- [docs__create-task.ext.md](./docs__create-task.ext.md) - /docs/create-task (ok,mode=html)\n- [docs__editors.ext.md](./docs__editors.ext.md) - /docs/editors (ok,mode=html)\n- [docs__editors__vscode.ext.md](./docs__editors__vscode.ext.md) - /docs/editors/vscode (ok,mode=html)\n- [docs__faq.ext.md](./docs__faq.ext.md) - /docs/faq (ok,mode=html)\n- [docs__guides__ci.ext.md](./docs__guides__ci.ext.md) - /docs/guides/ci (ok,mode=html)\n- [docs__guides__codegen.ext.md](./docs__guides__codegen.ext.md) - /docs/guides/codegen (ok,mode=html)\n- [docs__guides__codeowners.ext.md](./docs__guides__codeowners.ext.md) - /docs/guides/codeowners (ok,mode=html)\n- [docs__guides__debug-task.ext.md](./docs__guides__debug-task.ext.md) - /docs/guides/debug-task (ok,mode=html)\n- [docs__guides__docker.ext.md](./docs__guides__docker.ext.md) - /docs/guides/docker (ok,mode=html)\n- [docs__guides__examples__angular.ext.md](./docs__guides__examples__angular.ext.md) - /docs/guides/examples/angular (ok,mode=html)\n- [docs__guides__examples__astro.ext.md](./docs__guides__examples__astro.ext.md) - /docs/guides/examples/astro (ok,mode=html)\n- [docs__guides__examples__eslint.ext.md](./docs__guides__examples__eslint.ext.md) - /docs/guides/examples/eslint (ok,mode=html)\n- [docs__guides__examples__jest.ext.md](./docs__guides__examples__jest.ext.md) - /docs/guides/examples/jest (ok,mode=html)\n- [docs__guides__examples__nest.ext.md](./docs__guides__examples__nest.ext.md) - /docs/guides/examples/nest (ok,mode=html)\n- [docs__guides__examples__next.ext.md](./docs__guides__examples__next.ext.md) - /docs/guides/examples/next (ok,mode=html)\n- [docs__guides__examples__nuxt.ext.md](./docs__guides__examples__nuxt.ext.md) - /docs/guides/examples/nuxt (ok,mode=html)\n- [docs__guides__examples__packemon.ext.md](./docs__guides__examples__packemon.ext.md) - /docs/guides/examples/packemon (ok,mode=html)\n- [docs__guides__examples__prettier.ext.md](./docs__guides__examples__prettier.ext.md) - /docs/guides/examples/prettier (ok,mode=html)\n- [docs__guides__examples__react.ext.md](./docs__guides__examples__react.ext.md) - /docs/guides/examples/react (ok,mode=html)\n- [docs__guides__examples__remix.ext.md](./docs__guides__examples__remix.ext.md) - /docs/guides/examples/remix (ok,mode=html)\n- [docs__guides__examples__solid.ext.md](./docs__guides__examples__solid.ext.md) - /docs/guides/examples/solid (ok,mode=html)\n- [docs__guides__examples__storybook.ext.md](./docs__guides__examples__storybook.ext.md) - /docs/guides/examples/storybook (ok,mode=html)\n- [docs__guides__examples__sveltekit.ext.md](./docs__guides__examples__sveltekit.ext.md) - /docs/guides/examples/sveltekit (ok,mode=html)\n- [docs__guides__examples__typescript.ext.md](./docs__guides__examples__typescript.ext.md) - /docs/guides/examples/typescript (ok,mode=html)\n- [docs__guides__examples__vite.ext.md](./docs__guides__examples__vite.ext.md) - /docs/guides/examples/vite (ok,mode=html)\n- [docs__guides__examples__vue.ext.md](./docs__guides__examples__vue.ext.md) - /docs/guides/examples/vue (ok,mode=html)\n- [docs__guides__extensions.ext.md](./docs__guides__extensions.ext.md) - /docs/guides/extensions (ok,mode=html)\n- [docs__guides__javascript__bun-handbook.ext.md](./docs__guides__javascript__bun-handbook.ext.md) - /docs/guides/javascript/bun-handbook (ok,mode=html)\n- [docs__guides__javascript__deno-handbook.ext.md](./docs__guides__javascript__deno-handbook.ext.md) - /docs/guides/javascript/deno-handbook (ok,mode=html)\n- [docs__guides__javascript__node-handbook.ext.md](./docs__guides__javascript__node-handbook.ext.md) - /docs/guides/javascript/node-handbook (ok,mode=html)\n- [docs__guides__javascript__typescript-eslint.ext.md](./docs__guides__javascript__typescript-eslint.ext.md) - /docs/guides/javascript/typescript-eslint (ok,mode=html)\n- [docs__guides__javascript__typescript-project-refs.ext.md](./docs__guides__javascript__typescript-project-refs.ext.md) - /docs/guides/javascript/typescript-project-refs (ok,mode=html)\n- [docs__guides__mcp.ext.md](./docs__guides__mcp.ext.md) - /docs/guides/mcp (ok,mode=html)\n- [docs__guides__node__examples.ext.md](./docs__guides__node__examples.ext.md) - /docs/guides/node/examples (ok,mode=html)\n- [docs__guides__notifications.ext.md](./docs__guides__notifications.ext.md) - /docs/guides/notifications (ok,mode=html)\n- [docs__guides__offline-mode.ext.md](./docs__guides__offline-mode.ext.md) - /docs/guides/offline-mode (ok,mode=html)\n- [docs__guides__open-source.ext.md](./docs__guides__open-source.ext.md) - /docs/guides/open-source (ok,mode=html)\n- [docs__guides__pkl-config.ext.md](./docs__guides__pkl-config.ext.md) - /docs/guides/pkl-config (ok,mode=html)\n- [docs__guides__profile.ext.md](./docs__guides__profile.ext.md) - /docs/guides/profile (ok,mode=html)\n- [docs__guides__remote-cache.ext.md](./docs__guides__remote-cache.ext.md) - /docs/guides/remote-cache (ok,mode=html)\n- [docs__guides__root-project.ext.md](./docs__guides__root-project.ext.md) - /docs/guides/root-project (ok,mode=html)\n- [docs__guides__rust__handbook.ext.md](./docs__guides__rust__handbook.ext.md) - /docs/guides/rust/handbook (ok,mode=html)\n- [docs__guides__sharing-config.ext.md](./docs__guides__sharing-config.ext.md) - /docs/guides/sharing-config (ok,mode=html)\n- [docs__guides__vcs-hooks.ext.md](./docs__guides__vcs-hooks.ext.md) - /docs/guides/vcs-hooks (ok,mode=html)\n- [docs__guides__wasm-plugins.ext.md](./docs__guides__wasm-plugins.ext.md) - /docs/guides/wasm-plugins (ok,mode=html)\n- [docs__guides__webhooks.ext.md](./docs__guides__webhooks.ext.md) - /docs/guides/webhooks (ok,mode=html)\n- [docs__how-it-works.ext.md](./docs__how-it-works.ext.md) - /docs/how-it-works (ok,mode=html)\n- [docs__how-it-works__action-graph.ext.md](./docs__how-it-works__action-graph.ext.md) - /docs/how-it-works/action-graph (ok,mode=html)\n- [docs__how-it-works__languages.ext.md](./docs__how-it-works__languages.ext.md) - /docs/how-it-works/languages (ok,mode=html)\n- [docs__how-it-works__project-graph.ext.md](./docs__how-it-works__project-graph.ext.md) - /docs/how-it-works/project-graph (ok,mode=html)\n- [docs__how-it-works__task-graph.ext.md](./docs__how-it-works__task-graph.ext.md) - /docs/how-it-works/task-graph (ok,mode=html)\n- [docs__install.ext.md](./docs__install.ext.md) - /docs/install (ok,mode=html)\n- [docs__migrate-to-moon.ext.md](./docs__migrate-to-moon.ext.md) - /docs/migrate-to-moon (ok,mode=html)\n- [docs__migrate__2-0.ext.md](./docs__migrate__2-0.ext.md) - /docs/migrate/2.0 (ok,mode=html)\n- [docs__proto.ext.md](./docs__proto.ext.md) - /docs/proto (ok,mode=html)\n- [docs__proto__commands__activate.ext.md](./docs__proto__commands__activate.ext.md) - /docs/proto/commands/activate (ok,mode=html)\n- [docs__proto__commands__alias.ext.md](./docs__proto__commands__alias.ext.md) - /docs/proto/commands/alias (ok,mode=html)\n- [docs__proto__commands__bin.ext.md](./docs__proto__commands__bin.ext.md) - /docs/proto/commands/bin (ok,mode=html)\n- [docs__proto__commands__clean.ext.md](./docs__proto__commands__clean.ext.md) - /docs/proto/commands/clean (ok,mode=html)\n- [docs__proto__commands__completions.ext.md](./docs__proto__commands__completions.ext.md) - /docs/proto/commands/completions (ok,mode=html)\n- [docs__proto__commands__debug.ext.md](./docs__proto__commands__debug.ext.md) - /docs/proto/commands/debug (ok,mode=html)\n- [docs__proto__commands__debug__config.ext.md](./docs__proto__commands__debug__config.ext.md) - /docs/proto/commands/debug/config (ok,mode=html)\n- [docs__proto__commands__debug__env.ext.md](./docs__proto__commands__debug__env.ext.md) - /docs/proto/commands/debug/env (ok,mode=html)\n- [docs__proto__commands__diagnose.ext.md](./docs__proto__commands__diagnose.ext.md) - /docs/proto/commands/diagnose (ok,mode=html)\n- [docs__proto__commands__exec.ext.md](./docs__proto__commands__exec.ext.md) - /docs/proto/commands/exec (ok,mode=html)\n- [docs__proto__commands__install.ext.md](./docs__proto__commands__install.ext.md) - /docs/proto/commands/install (ok,mode=html)\n- [docs__proto__commands__list.ext.md](./docs__proto__commands__list.ext.md) - /docs/proto/commands/list (ok,mode=html)\n- [docs__proto__commands__list-remote.ext.md](./docs__proto__commands__list-remote.ext.md) - /docs/proto/commands/list-remote (ok,mode=html)\n- [docs__proto__commands__outdated.ext.md](./docs__proto__commands__outdated.ext.md) - /docs/proto/commands/outdated (ok,mode=html)\n- [docs__proto__commands__pin.ext.md](./docs__proto__commands__pin.ext.md) - /docs/proto/commands/pin (ok,mode=html)\n- [docs__proto__commands__plugin.ext.md](./docs__proto__commands__plugin.ext.md) - /docs/proto/commands/plugin (ok,mode=html)\n- [docs__proto__commands__plugin__add.ext.md](./docs__proto__commands__plugin__add.ext.md) - /docs/proto/commands/plugin/add (ok,mode=html)\n- [docs__proto__commands__plugin__info.ext.md](./docs__proto__commands__plugin__info.ext.md) - /docs/proto/commands/plugin/info (ok,mode=html)\n- [docs__proto__commands__plugin__list.ext.md](./docs__proto__commands__plugin__list.ext.md) - /docs/proto/commands/plugin/list (ok,mode=html)\n- [docs__proto__commands__plugin__remove.ext.md](./docs__proto__commands__plugin__remove.ext.md) - /docs/proto/commands/plugin/remove (ok,mode=html)\n- [docs__proto__commands__plugin__search.ext.md](./docs__proto__commands__plugin__search.ext.md) - /docs/proto/commands/plugin/search (ok,mode=html)\n- [docs__proto__commands__regen.ext.md](./docs__proto__commands__regen.ext.md) - /docs/proto/commands/regen (ok,mode=html)\n- [docs__proto__commands__run.ext.md](./docs__proto__commands__run.ext.md) - /docs/proto/commands/run (ok,mode=html)\n- [docs__proto__commands__setup.ext.md](./docs__proto__commands__setup.ext.md) - /docs/proto/commands/setup (ok,mode=html)\n- [docs__proto__commands__status.ext.md](./docs__proto__commands__status.ext.md) - /docs/proto/commands/status (ok,mode=html)\n- [docs__proto__commands__unalias.ext.md](./docs__proto__commands__unalias.ext.md) - /docs/proto/commands/unalias (ok,mode=html)\n- [docs__proto__commands__uninstall.ext.md](./docs__proto__commands__uninstall.ext.md) - /docs/proto/commands/uninstall (ok,mode=html)\n- [docs__proto__commands__unpin.ext.md](./docs__proto__commands__unpin.ext.md) - /docs/proto/commands/unpin (ok,mode=html)\n- [docs__proto__commands__upgrade.ext.md](./docs__proto__commands__upgrade.ext.md) - /docs/proto/commands/upgrade (ok,mode=html)\n- [docs__proto__commands__use.ext.md](./docs__proto__commands__use.ext.md) - /docs/proto/commands/use (ok,mode=html)\n- [docs__proto__commands__versions.ext.md](./docs__proto__commands__versions.ext.md) - /docs/proto/commands/versions (ok,mode=html)\n- [docs__proto__config.ext.md](./docs__proto__config.ext.md) - /docs/proto/config (ok,mode=html)\n- [docs__proto__detection.ext.md](./docs__proto__detection.ext.md) - /docs/proto/detection (ok,mode=html)\n- [docs__proto__faq.ext.md](./docs__proto__faq.ext.md) - /docs/proto/faq (ok,mode=html)\n- [docs__proto__install.ext.md](./docs__proto__install.ext.md) - /docs/proto/install (ok,mode=html)\n- [docs__proto__non-wasm-plugin.ext.md](./docs__proto__non-wasm-plugin.ext.md) - /docs/proto/non-wasm-plugin (ok,mode=html)\n- [docs__proto__plugins.ext.md](./docs__proto__plugins.ext.md) - /docs/proto/plugins (ok,mode=html)\n- [docs__proto__tool-spec.ext.md](./docs__proto__tool-spec.ext.md) - /docs/proto/tool-spec (ok,mode=html)\n- [docs__proto__tools.ext.md](./docs__proto__tools.ext.md) - /docs/proto/tools (ok,mode=html)\n- [docs__proto__wasm-plugin.ext.md](./docs__proto__wasm-plugin.ext.md) - /docs/proto/wasm-plugin (ok,mode=html)\n- [docs__proto__workflows.ext.md](./docs__proto__workflows.ext.md) - /docs/proto/workflows (ok,mode=html)\n- [docs__run-task.ext.md](./docs__run-task.ext.md) - /docs/run-task (ok,mode=html)\n- [docs__setup-toolchain.ext.md](./docs__setup-toolchain.ext.md) - /docs/setup-toolchain (ok,mode=html)\n- [docs__setup-workspace.ext.md](./docs__setup-workspace.ext.md) - /docs/setup-workspace (ok,mode=html)\n- [docs__terminology.ext.md](./docs__terminology.ext.md) - /docs/terminology (ok,mode=html)\n\n----\n## Notes / Comments / Lessons\n\n- Per-page files are flattened in this directory and prefixed with `docs` in the filename stem.\n- Regenerate by re-running the scraper script; old `.ext.md` files in this directory are replaced.\n- Capture results: success=171, failed=0.\n----\n",
              "additions": 192,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": "docs/external/moonrepo/moonrepo_docs.ext.md",
              "before": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:38:46.200Z\n- Source root: https://moonrepo.dev/docs\n- Scope: 171 pages under /docs (excluding /docs/tags)\n- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\n- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\n----\n\n## /docs\n\nSource: https://moonrepo.dev/docs\n\nmoonrepo is a productivity platform that aims to eliminate pain points for both developers and companies, by automating tiresome and complex workflows, and improving the overall developer experience.\n\nWe currently achieve this through the following tools and services:\n\nmoon[](http://moonrepo.dev/docs#moon \"Direct link to moon\")\n------------------------------------------------------------\n\n[moon](https://moonrepo.dev/moon) is a repository _m_ anagement, _o_ rganization, _o_ rchestration, and _n_ otification tool for the web ecosystem, written in Rust. Many of the concepts within moon are heavily inspired from Bazel and other popular build systems, but tailored for our [supported languages](http://moonrepo.dev/docs#supported-languages).\n\nYou can think of a moon as a tool that sits firmly in the middle between Bazel (high complexity, full structure), and make/just/etc scripts (low complexity, no structure).\n\n### Why use moon?[](http://moonrepo.dev/docs#why-use-moon \"Direct link to Why use moon?\")\n\nWorking in a language's ecosystem can be very involved, especially when it comes to managing a repository effectively. Which language version to use? Which dependency manager to use? How to use packages? Or how to build packages? So on and so forth. moon aims to streamline this entire process and provide a first-class developer experience.\n\n*   **Increased productivity** - With [Rust](https://www.rust-lang.org/) as our foundation, we can ensure robust speeds, high performance, and low memory usage. Instead of long builds blocking you, focus on your work.\n*   **Exceptional developer experience** - As veterans of developer tooling, we're well aware of the pain points and frustrations. Our goal is to mitigate and overcome these obstacles.\n*   **Incremental adoption** - At its core, moon has been designed to be adopted incrementally and is _not_ an \"all at once adoption\". Migrate project-by-project, or task-by-task, it's up to you!\n*   **Reduced tasks confusion** - Tasks (for example, `package.json` scripts) can become unwieldy, very quickly. No more duplicating the same task into every project, or reverse-engineering which root scripts to use. With moon, all you need to know is the project name, and a task name.\n*   **Ensure correct versions** - Whether it's a programming language or dependency manager, ensure the same version of each tool is the same across _every_ developer's environment. No more wasted hours of debugging.\n*   **Automation built-in** - When applicable, moon will automatically install dependencies (`node_modules`), or [sync project dependencies](https://moonrepo.dev/docs/config/toolchain#syncprojectworkspacedependencies), or even [sync TypeScript project references](https://moonrepo.dev/docs/config/toolchain#syncprojectreferences).\n*   And of course, the amazing list of [features](http://moonrepo.dev/docs#features) below!\n\n### Supported languages[](http://moonrepo.dev/docs#supported-languages \"Direct link to Supported languages\")\n\nmoon's long-term vision is to robustly support multiple programming languages (and dependency managers) so that a repository composed of projects with differing languages and tools can all work in unison. This is a lofty vision that requires a massive amount of time and resources to achieve, and as such, is not available on initial release, but will gradually be supported over time.\n\nTo help achieve this vision, language support is broken down into 4 tiers, allowing us to incrementally integrate and improve them over time. The 4 tiers are as follows:\n\n*   Tier 0**No direct integration** - Tool is not directly supported in moon, but can still be run using the [\"system\" task toolchain](https://moonrepo.dev/docs/faq#can-we-run-other-languages), which expects the tool to exist in the current environment.\n*   Tier 1**Project categorization** - Projects can configure their primary [language in `moon.yml`](https://moonrepo.dev/docs/config/project#language), and have a dedicated Rust crate for metadata.\n*   Tier 2**Ecosystem platformization** - moon deeply integrates with the language's ecosystem by parsing manifests, lockfiles, and other semantic files to infer dependencies, tasks, and other necessary information.\n*   Tier 3**Toolchain integration** - Language is directly supported in the toolchain, configured in [`.moon/toolchains.yml`](https://moonrepo.dev/docs/config/toolchain), and will automatically be downloaded and installed.\n\n|  | Tier 0 | Tier 1 | Tier 2 | Tier 3 |\n| --- | --- | --- | --- | --- |\n| Bash/Batch |  |  |  |  |\n| Bun (JavaScript, TypeScript) |  |  |  |  |\n| Deno (JavaScript, TypeScript) |  |  |  |  |\n| Go |  |  |  |  |\n| Node (JavaScript, TypeScript) |  |  |  |  |\n|  npm, pnpm, yarn |  |  |  |  |\n| PHP |  |  |  |  |\n|  Composer |  |  |  |  |\n| Python |  |  |  |  |\n|  Pip |  |  |  |  |\n| Ruby |  |  |  |  |\n|  Gems, Bundler |  |  |  |  |\n| Rust |  |  |  |  |\n|  Cargo |  |  |  |  |\n| Other (Kotlin, Java, C#, ...) |  |  |  |  |\n\n*    Not applicable\n*    Partially supported (experimental)\n*    Fully Supported\n\n### Supported targets[](http://moonrepo.dev/docs#supported-targets \"Direct link to Supported targets\")\n\nBecause moon is written in Rust, we only support targets that are explicitly compiled for, which are currently:\n\n| Operating system | Architecture | Target |\n| --- | --- | --- |\n| macOS 64-bit | Intel | `x86_64-apple-darwin` |\n| macOS 64-bit | ARM | `aarch64-apple-darwin` |\n| Linux 64-bit | Intel GNU | `x86_64-unknown-linux-gnu` |\n| Linux 64-bit | Intel musl | `x86_64-unknown-linux-musl` |\n| Linux 64-bit | ARM GNU | `aarch64-unknown-linux-gnu` |\n| Linux 64-bit | ARM musl | `aarch64-unknown-linux-musl` |\n| Windows 64-bit | Intel | `x86_64-pc-windows-msvc` |\n\n### Features[](http://moonrepo.dev/docs#features \"Direct link to Features\")\n\n#### Management[](http://moonrepo.dev/docs#management \"Direct link to Management\")\n\n*   **Smart hashing** - Collects inputs from multiple sources to ensure builds are deterministic and reproducible.\n*   **Remote caching** - Persists builds, hashes, and caches between teammates and CI/CD environments.\n*   **Integrated toolchain** - Automatically downloads and installs explicit versions of Node.js and other tools for consistency across the entire workspace or per project.\n*   **Multi-platform** - Runs on common development platforms: Linux, macOS, and Windows.\n\n#### Organization[](http://moonrepo.dev/docs#organization \"Direct link to Organization\")\n\n*   **Project graph** - Generates a project graph for dependency and dependent relationships.\n*   **Code generation** - Easily scaffold new applications, libraries, tooling, and more!\n*   **Dependency workspaces** - Works alongside package manager workspaces so that projects have distinct dependency trees.\n*   **Code ownership** - Declare owners, maintainers, support channels, and more. Generate CODEOWNERS.\n\n#### Orchestration[](http://moonrepo.dev/docs#orchestration \"Direct link to Orchestration\")\n\n*   **Dependency graph** - Generates a dependency graph to increase performance and reduce workloads.\n*   **Action pipeline** - Executes actions in parallel and in order using a thread pool and our dependency graph.\n*   **Action distribution**Coming soon - Distributes actions across multiple machines to increase throughput.\n*   **Incremental builds** - With our smart hashing, only rebuild projects that have been touched since the last build.\n\n#### Notification[](http://moonrepo.dev/docs#notification \"Direct link to Notification\")\n\n*   **Flakiness detection** - Reduce flaky builds with automatic retries and passthrough settings.\n*   **Webhook events**Experimental - Receive a webhook for every event in the pipeline. Useful for metrics gathering and insights.\n*   **Terminal notifications**Experimental - Receives notifications in your chosen terminal when builds are successful... or are not.\n*   **Git hooks** - Manage Git hooks to enforce workflows and requirements for contributors.\n\nproto[](http://moonrepo.dev/docs#proto \"Direct link to proto\")\n---------------------------------------------------------------\n\n[proto](https://moonrepo.dev/proto) is a version manager for your favorite programming languages. [View proto documentation](https://moonrepo.dev/docs/proto).\n\n## /docs/cheat-sheet\n\nSource: https://moonrepo.dev/docs/cheat-sheet\n\nDon't have time to read the docs? Here's a quick cheat sheet to get you started.\n\nTasks[](http://moonrepo.dev/docs/cheat-sheet#tasks \"Direct link to Tasks\")\n---------------------------------------------------------------------------\n\nLearn more about [tasks](https://moonrepo.dev/docs/concepts/task) and [targets](https://moonrepo.dev/docs/concepts/target).\n\n#### Run all build and test tasks for all projects[](http://moonrepo.dev/docs/cheat-sheet#run-all-build-and-test-tasks-for-all-projects \"Direct link to Run all build and test tasks for all projects\")\n\n`moon check --all`\n\n#### Run all build and test tasks in a project[](http://moonrepo.dev/docs/cheat-sheet#run-all-build-and-test-tasks-in-a-project \"Direct link to Run all build and test tasks in a project\")\n\n`moon check project`\n\n#### Run all build and test tasks for closest project based on working directory[](http://moonrepo.dev/docs/cheat-sheet#run-all-build-and-test-tasks-for-closest-project-based-on-working-directory \"Direct link to Run all build and test tasks for closest project based on working directory\")\n\n`moon check`\n\n#### Run a task in all projects[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-all-projects \"Direct link to Run a task in all projects\")\n\n`moon run :task`\n\n#### Run a task in all projects with a tag[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-all-projects-with-a-tag \"Direct link to Run a task in all projects with a tag\")\n\n`moon run '#tag:task'# ORmoon run \\#tag:task# ORmoon run :task --query \"tag=tag\"`\n\n#### Run a task in a project[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-a-project \"Direct link to Run a task in a project\")\n\n`moon run project:task`\n\n#### Run multiple tasks in all projects[](http://moonrepo.dev/docs/cheat-sheet#run-multiple-tasks-in-all-projects \"Direct link to Run multiple tasks in all projects\")\n\n`moon run :task1 :task2`\n\n#### Run multiple tasks in any project[](http://moonrepo.dev/docs/cheat-sheet#run-multiple-tasks-in-any-project \"Direct link to Run multiple tasks in any project\")\n\n`moon run projecta:task1 projectb:task2`\n\n#### Run a task in applications, libraries, or tools[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-applications-libraries-or-tools \"Direct link to Run a task in applications, libraries, or tools\")\n\n`moon run :task --query \"projectLayer=application\"`\n\n#### Run a task in projects of a specific language[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-projects-of-a-specific-language \"Direct link to Run a task in projects of a specific language\")\n\n`moon run :task --query \"language=typescript\"`\n\n#### Run a task in projects matching a keyword[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-projects-matching-a-keyword \"Direct link to Run a task in projects matching a keyword\")\n\n`moon run :task --query \"project~react-*\"`\n\n#### Run a task in projects based on file path[](http://moonrepo.dev/docs/cheat-sheet#run-a-task-in-projects-based-on-file-path \"Direct link to Run a task in projects based on file path\")\n\n`moon run :task --query \"projectSource~packages/*\"`\n\nTask configuration[](http://moonrepo.dev/docs/cheat-sheet#task-configuration \"Direct link to Task configuration\")\n------------------------------------------------------------------------------------------------------------------\n\nLearn more about [available options](https://moonrepo.dev/docs/config/project#tasks).\n\n#### Disable caching[](http://moonrepo.dev/docs/cheat-sheet#disable-caching \"Direct link to Disable caching\")\n\nmoon.yml\n\n`tasks:  example:    # ...    options:      cache: false`\n\n#### Re-run flaky tasks[](http://moonrepo.dev/docs/cheat-sheet#re-run-flaky-tasks \"Direct link to Re-run flaky tasks\")\n\nmoon.yml\n\n`tasks:  example:    # ...    options:      retryCount: 3`\n\n#### Depend on tasks from parent project's dependencies[](http://moonrepo.dev/docs/cheat-sheet#depend-on-tasks-from-parent-projects-dependencies \"Direct link to Depend on tasks from parent project's dependencies\")\n\nmoon.yml\n\n`# Also inferred from the languagedependsOn:  - 'project-a'  - 'project-b'tasks:  example:    # ...    deps:      - '^:build'`\n\n#### Depend on tasks from arbitrary projects[](http://moonrepo.dev/docs/cheat-sheet#depend-on-tasks-from-arbitrary-projects \"Direct link to Depend on tasks from arbitrary projects\")\n\nmoon.yml\n\n`tasks:  example:    # ...    deps:      - 'other-project:task'`\n\n#### Run dependencies serially[](http://moonrepo.dev/docs/cheat-sheet#run-dependencies-serially \"Direct link to Run dependencies serially\")\n\nmoon.yml\n\n`tasks:  example:    # ...    deps:      - 'first'      - 'second'      - 'third'    options:      runDepsInParallel: false`\n\nmoon.yml\n\n`tasks:  example:    command: 'noop'    deps:      - 'app:watch'      - 'backend:start'      - 'tailwind:watch'    preset: 'server'`\n\n> The `local` or `persistent` settings are required for this to work.\n\nLanguages[](http://moonrepo.dev/docs/cheat-sheet#languages \"Direct link to Languages\")\n---------------------------------------------------------------------------------------\n\n#### Run system binaries available on `PATH`[](http://moonrepo.dev/docs/cheat-sheet#run-system-binaries-available-on-path \"Direct link to run-system-binaries-available-on-path\")\n\nmoon.yml\n\n`language: 'bash' # batch, etctasks:  example:    command: 'printenv'`\n\nmoon.yml\n\n`tasks:  example:    command: 'printenv'    toolchain: 'system'`\n\n#### Run language binaries not supported in moon's toolchain[](http://moonrepo.dev/docs/cheat-sheet#run-language-binaries-not-supported-in-moons-toolchain \"Direct link to Run language binaries not supported in moon's toolchain\")\n\nmoon.yml\n\n`language: 'ruby'tasks:  example:    command: 'rubocop'    toolchain: 'system'`\n\n#### Run npm binaries (Node.js)[](http://moonrepo.dev/docs/cheat-sheet#run-npm-binaries-nodejs \"Direct link to Run npm binaries (Node.js)\")\n\nmoon.yml\n\n`language: 'javascript' # typescripttasks:  example:    command: 'eslint'`\n\nmoon.yml\n\n`tasks:  example:    command: 'eslint'    toolchain: 'node'`\n\n## /docs/commands\n\nSource: https://moonrepo.dev/docs/commands\n\n[Skip to main content](http://moonrepo.dev/docs/commands#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](https://moonrepo.dev/img/logo.svg)](https://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands#)\n\n*   [**moon** Build system for managing codebases](https://moonrepo.dev/moon)\n*   [**proto** Multi-language version manager](https://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands#)\n\n*   [**moon**](https://moonrepo.dev/docs)\n*   [**proto**](https://moonrepo.dev/docs/proto)\n\n[Guides](https://moonrepo.dev/docs/guides/ci)[Blog](https://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\n1.   [Home](https://moonrepo.dev/)\n2.   [Commands](https://moonrepo.dev/docs/commands) \n\nwarning\n\nDocumentation is currently for [moon v2](https://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\n[Overview ----------- The following options are available for all moon commands.](https://moonrepo.dev/docs/commands/overview)[action-graph --------------- The moon action-graph [target] (or moon ag) command will generate and serve a visual graph of](https://moonrepo.dev/docs/commands/action-graph)[bin ------ The moon bin command will return an absolute path to a tool's binary within the](https://moonrepo.dev/docs/commands/bin)[check -------- The moon check [...projects] (or moon c) command will run all](https://moonrepo.dev/docs/commands/check)[ci ----- The moon ci command is a special command that should be ran in a continuous integration (CI)](https://moonrepo.dev/docs/commands/ci)[clean -------- The moon clean command will clean the current workspace by deleting stale cache. For the most](https://moonrepo.dev/docs/commands/clean)[completions -------------- The moon completions command will generate moon command and argument completions for your current](https://moonrepo.dev/docs/commands/completions)[docker --------- 4 items](https://moonrepo.dev/docs/commands/docker)[exec ------- The moon exec (or moon x, or moonx) command is a low-level command for executing tasks in the](https://moonrepo.dev/docs/commands/exec)[ext ------ The moon ext command will execute an extension (a WASM plugin) that has been configured with](https://moonrepo.dev/docs/commands/ext)[extension ------------ 2 items](https://moonrepo.dev/docs/commands/extension)[generate ----------- The moon generate (or moon g) command will generate code (files and folders) from a](https://moonrepo.dev/docs/commands/generate)[hash ------- Use the moon hash command to inspect the contents and sources of a generated hash, also known as](https://moonrepo.dev/docs/commands/hash)[init ------- The moon init command will initialize moon into a repository and scaffold necessary config files](https://moonrepo.dev/docs/commands/init)[mcp ------ The moon mcp command will start an MCP server that listens for](https://moonrepo.dev/docs/commands/mcp)[project ---------- The moon project [id] (or moon p) command will display all available information about a project](https://moonrepo.dev/docs/commands/project)[projects ----------- The moon projects command will list all projects configured in the workspace as a table of](https://moonrepo.dev/docs/commands/projects)[project-graph ---------------- The moon project-graph [id] (or moon pg) command will generate and serve a visual graph of all](https://moonrepo.dev/docs/commands/project-graph)[query -------- 4 items](https://moonrepo.dev/docs/commands/query)[run ------ The moon run (or moon r) command will run one or many targets and all of](https://moonrepo.dev/docs/commands/run)[setup -------- The moon setup command can be used to setup the developer and pipeline environments. It achieves](https://moonrepo.dev/docs/commands/setup)[sync ------- 4 items](https://moonrepo.dev/docs/commands/sync)[task ------- The moon task [target] (or moon t) command will display information about a task that has been](https://moonrepo.dev/docs/commands/task)[tasks -------- The moon tasks command will list all tasks available in the workspace as a table of information.](https://moonrepo.dev/docs/commands/tasks)[task-graph ------------- The moon task-graph [target] (or moon tg) command will generate and serve a visual graph of all](https://moonrepo.dev/docs/commands/task-graph)[teardown ----------- The moon teardown command, as its name infers, will teardown and clean the current environment,](https://moonrepo.dev/docs/commands/teardown)[template ----------- The moon template [id] command will display information about a template, its files, and](https://moonrepo.dev/docs/commands/template)[templates ------------ The moon templates command will list all templates available for code generation.](https://moonrepo.dev/docs/commands/templates)[toolchain ------------ 2 items](https://moonrepo.dev/docs/commands/toolchain)[upgrade ---------- The moon upgrade command can be used to upgrade your current moon binary (if installed globally)](https://moonrepo.dev/docs/commands/upgrade)\n\n## /docs/commands/action-graph\n\nSource: https://moonrepo.dev/docs/commands/action-graph\n\naction-graph | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/action-graph#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/action-graph#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/action-graph#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/action-graph#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/action-graph#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [action-graph](http://moonrepo.dev/docs/commands/action-graph) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\naction-graph\n============\n\nv1.15.0\nThe `moon action-graph [target]` (or `moon ag`) command will generate and serve a visual graph of all actions and tasks within the workspace, known as the [action graph](http://moonrepo.dev/docs/how-it-works/action-graph). In other tools, this is sometimes referred to as a dependency graph or task graph.\n\n`# Run the visualizer locally$ moon action-graph# Export to DOT format$ moon action-graph --dot > graph.dot`\n\n> A target can be passed to focus the graph, including dependencies _and_ dependents. For example, `moon action-graph app:build`.\n\n### Arguments[](http://moonrepo.dev/docs/commands/action-graph#arguments \"Direct link to Arguments\")\n\n*   `[target]` - Optional target to focus.\n\n### Options[](http://moonrepo.dev/docs/commands/action-graph#options \"Direct link to Options\")\n\n*   `--dependents` - Include dependents of the focused target.\n*   `--dot` - Print the graph in DOT format.\n*   `--host` - The host address. Defaults to `127.0.0.1`. v1.36.0\n*   `--json` - Print the graph in JSON format.\n*   `--port` - The port to bind to. Defaults to a random port. v1.36.0\n\n### Configuration[](http://moonrepo.dev/docs/commands/action-graph#configuration \"Direct link to Configuration\")\n\n*   [`runner`](http://moonrepo.dev/docs/config/workspace#runner) in `.moon/workspace.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/project#tasks) in `moon.yml`\n\nExample output[](http://moonrepo.dev/docs/commands/action-graph#example-output \"Direct link to Example output\")\n----------------------------------------------------------------------------------------------------------------\n\nThe following output is an example of the graph in DOT format.\n\n`digraph {    0 [ label=\"SetupToolchain(node)\" style=filled, shape=oval, fillcolor=black, fontcolor=white]    1 [ label=\"InstallWorkspaceDeps(node)\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    2 [ label=\"SyncProject(node, node)\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    3 [ label=\"RunTask(node:standard)\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    1 -> 0 [ arrowhead=box, arrowtail=box]    2 -> 0 [ arrowhead=box, arrowtail=box]    3 -> 1 [ arrowhead=box, arrowtail=box]    3 -> 2 [ arrowhead=box, arrowtail=box]}`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/action-graph.mdx)\n\n[Overview](http://moonrepo.dev/docs/commands/overview)\n\n[bin](http://moonrepo.dev/docs/commands/bin)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/action-graph#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/action-graph#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/action-graph#configuration)\n*   [Example output](http://moonrepo.dev/docs/commands/action-graph#example-output)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/bin\n\nSource: https://moonrepo.dev/docs/commands/bin\n\nbin | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/bin#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/bin#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/bin#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/bin#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/bin#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [bin](http://moonrepo.dev/docs/commands/bin) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nbin\n===\n\nThe `moon bin <toolchain>` command will return an absolute path to a tool's binary within the toolchain. If a tool has not been configured or installed, this will return a 1 or 2 exit code with no value respectively.\n\n`$ moon bin node/Users/example/.proto/tools/node/x.x.x/bin/node`\n\n> A tool is considered \"not configured\" when not in use, for example, querying yarn/pnpm when the package manager is configured for \"npm\". A tool is considered \"not installed\", when it has not been downloaded and installed into the tools directory.\n\n### Arguments[](http://moonrepo.dev/docs/commands/bin#arguments \"Direct link to Arguments\")\n\n*   `<toolchain>` - Name of the toolchain to query.\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/bin.mdx)\n\n[action-graph](http://moonrepo.dev/docs/commands/action-graph)\n\n[check](http://moonrepo.dev/docs/commands/check)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/bin#arguments)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/check\n\nSource: https://moonrepo.dev/docs/commands/check\n\ncheck | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/check#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/check#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/check#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/check#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/check#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [check](http://moonrepo.dev/docs/commands/check) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ncheck\n=====\n\nThe `moon check [...projects]` (or `moon c`) command will run _all_[build and test tasks](http://moonrepo.dev/docs/concepts/task#types) for one or many projects. This is a convenience command for verifying the current state of a project, instead of running multiple [`moon run`](http://moonrepo.dev/docs/commands/run) commands.\n\n`# Check project by name$ moon check app# Check multiple projects by name$ moon check client server# Check project at current working directory$ moon check --closest# Check ALL projects (may be costly)$ moon check --all`\n\n### Arguments[](http://moonrepo.dev/docs/commands/check#arguments \"Direct link to Arguments\")\n\n*   `[...id]` - List of project IDs or aliases to explicitly check, as defined in [`projects`](http://moonrepo.dev/docs/config/workspace#projects).\n\n### Options[](http://moonrepo.dev/docs/commands/check#options \"Direct link to Options\")\n\nInherits all options from [`moon exec`](http://moonrepo.dev/docs/commands/exec) except for `--on-failure`.\n\n*   `--all` - Run check for all projects in the workspace.\n*   `--closest` - Run check for the closest project starting from the current working directory.\n\n### Configuration[](http://moonrepo.dev/docs/commands/check#configuration \"Direct link to Configuration\")\n\n*   [`projects`](http://moonrepo.dev/docs/config/workspace#projects) in `.moon/workspace.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/project#tasks) in `moon.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/check.mdx)\n\n[bin](http://moonrepo.dev/docs/commands/bin)\n\n[ci](http://moonrepo.dev/docs/commands/ci)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/check#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/check#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/check#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/ci\n\nSource: https://moonrepo.dev/docs/commands/ci\n\nci | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/ci#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/ci#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/ci#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/ci#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/ci#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [ci](http://moonrepo.dev/docs/commands/ci) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nci\n==\n\nThe `moon ci` command is a special command that should be ran in a continuous integration (CI) environment, as it does all the heavy lifting necessary for effectively running tasks.\n\nBy default this will run all tasks that are affected by touched files and have the [`runInCI`](http://moonrepo.dev/docs/config/project#runinci) task option enabled.\n\n`$ moon ci`\n\nHowever, you can also provide a list of targets to explicitly run, which will still be filtered down by `runInCI`.\n\n`$ moon ci :build :lint`\n\n> View the official [continuous integration guide](http://moonrepo.dev/docs/guides/ci) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/ci#arguments \"Direct link to Arguments\")\n\n*   `...[target]` - [Targets](http://moonrepo.dev/docs/concepts/target) to run.\n\n### Options[](http://moonrepo.dev/docs/commands/ci#options \"Direct link to Options\")\n\nInherits all options from [`moon exec`](http://moonrepo.dev/docs/commands/exec) except for `--affected`, `--on-failure`, and `--only-ci-tasks`.\n\n### Configuration[](http://moonrepo.dev/docs/commands/ci#configuration \"Direct link to Configuration\")\n\n*   [`tasks`](http://moonrepo.dev/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n*   [`tasks`](http://moonrepo.dev/docs/config/project#tasks) in `moon.yml`\n*   [`tasks.*.options.runInCI`](http://moonrepo.dev/docs/config/project#runinci) in `moon.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/ci.mdx)\n\n[check](http://moonrepo.dev/docs/commands/check)\n\n[clean](http://moonrepo.dev/docs/commands/clean)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/ci#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/ci#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/ci#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/clean\n\nSource: https://moonrepo.dev/docs/commands/clean\n\nclean | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/clean#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/clean#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/clean#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/clean#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/clean#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [clean](http://moonrepo.dev/docs/commands/clean) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nclean\n=====\n\nThe `moon clean` command will clean the current workspace by deleting stale cache. For the most part, the action pipeline will clean automatically, but this command can be used to reset the workspace entirely.\n\n`$ moon clean# Delete cache with a custom lifetime$ moon clean --lifetime '24 hours'`\n\n### Options[](http://moonrepo.dev/docs/commands/clean#options \"Direct link to Options\")\n\n*   `--lifetime` - The maximum lifetime of cached artifacts before being marked as stale. Defaults to \"7 days\".\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/clean.mdx)\n\n[ci](http://moonrepo.dev/docs/commands/ci)\n\n[completions](http://moonrepo.dev/docs/commands/completions)\n\n*   [Options](http://moonrepo.dev/docs/commands/clean#options)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/completions\n\nSource: https://moonrepo.dev/docs/commands/completions\n\ncompletions | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/completions#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/completions#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/completions#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/completions#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/completions#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [completions](http://moonrepo.dev/docs/commands/completions) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ncompletions\n===========\n\nThe `moon completions` command will generate moon command and argument completions for your current shell. This command will write to stdout, which can then be redirected to a file of your choice.\n\n`$ moon completions > ./path/to/write/to`\n\n### Options[](http://moonrepo.dev/docs/commands/completions#options \"Direct link to Options\")\n\n*   `--shell` - Shell to explicitly generate for.\n\n### Examples[](http://moonrepo.dev/docs/commands/completions#examples \"Direct link to Examples\")\n\n*   Bash\n*   Fish\n*   Zsh\n\nIf using [bash-completion](https://github.com/scop/bash-completion).\n\n`mkdir -p ~/.bash_completion.dmoon completions > ~/.bash_completion.d/moon.sh`\n\nOtherwise write the file to a common location, and source it in your profile.\n\n`mkdir -p ~/.bash_completionsmoon completions > ~/.bash_completions/moon.sh# In your profilesource ~/.bash_completions/moon.sh`\n\nWrite the file to Fish's completions directory.\n\n`mkdir -p ~/.config/fish/completionsmoon completions > ~/.config/fish/completions/moon.fish`\n\nIf using [oh-my-zsh](https://ohmyz.sh/) (the `_` prefix is required).\n\n`mkdir -p ~/.oh-my-zsh/completionsmoon completions > ~/.oh-my-zsh/completions/_moon# Reload shell (or restart terminal)omz reload`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/completions.mdx)\n\n[clean](http://moonrepo.dev/docs/commands/clean)\n\n[docker](http://moonrepo.dev/docs/commands/docker)\n\n*   [Options](http://moonrepo.dev/docs/commands/completions#options)\n*   [Examples](http://moonrepo.dev/docs/commands/completions#examples)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/docker\n\nSource: https://moonrepo.dev/docs/commands/docker\n\ndocker | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/docker#__docusaurus_skipToContent_fallback)\n\n[![Image 2: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/docker#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/docker#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/docker#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n        *   [file](http://moonrepo.dev/docs/commands/docker/file)\n        *   [prune](http://moonrepo.dev/docs/commands/docker/prune)\n        *   [scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n        *   [setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/docker#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [docker](http://moonrepo.dev/docs/commands/docker) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\ndocker\n======\n\nOperations for integrating with Docker and Dockerfiles.\n\n[file ------- The moon docker file command can be used to generate a multi-staged Dockerfile for a](http://moonrepo.dev/docs/commands/docker/file)[prune -------- The moon docker prune command will reduce the overall filesize of the Docker environment by](http://moonrepo.dev/docs/commands/docker/prune)[scaffold ----------- The moon docker scaffold command creates multiple repository skeletons for use](http://moonrepo.dev/docs/commands/docker/scaffold)[setup -------- The moon docker setup command will efficiently install dependencies for focused projects. This is](http://moonrepo.dev/docs/commands/docker/setup)\n\n[completions](http://moonrepo.dev/docs/commands/completions)\n\n[file](http://moonrepo.dev/docs/commands/docker/file)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/docker/file\n\nSource: https://moonrepo.dev/docs/commands/docker/file\n\n1.   [Home](https://moonrepo.dev/)\n\nwarning\n\nDocumentation is currently for [moon v2](https://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nv1.27.0\n\nThe `moon docker file <project>` command can be used to generate a multi-staged `Dockerfile` for a project, that takes full advantage of Docker's layer caching, and is primarily for production deploys (this should not be used for development).\n\n`$ moon docker file <project>`\n\nAs mentioned above, the generated `Dockerfile` uses a multi-stage approach, where each stage is broken up into the following:\n\n*   `base` - The base stage, which simply installs moon for a chosen Docker image. This stage requires Bash.\n*   `skeleton` - Scaffolds workspace and sources repository skeletons using [`moon docker scaffold`](https://moonrepo.dev/docs/commands/docker/scaffold).\n*   `build` - Copies required sources, installs the toolchain using [`moon docker setup`](https://moonrepo.dev/docs/commands/docker/setup), optionally builds the project, and optionally prunes the image using [`moon docker prune`](https://moonrepo.dev/docs/commands/docker/prune).\n*   `start` - Runs the project after it has been built. This is typically starting an HTTP server, or executing a binary.\n\ninfo\n\nView the official [Docker usage guide](https://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/docker/file#arguments \"Direct link to Arguments\")\n\n*   `<name>` - Name or alias of a project, as defined in [`projects`](https://moonrepo.dev/docs/config/workspace#projects).\n*   `[dest]` - Destination to write the file, relative from the project root. Defaults to `Dockerfile`.\n\n### Options[](http://moonrepo.dev/docs/commands/docker/file#options \"Direct link to Options\")\n\n*   `--defaults` - Use default options instead of prompting in the terminal.\n*   `--build-task` - Name of a task to build the project. Defaults to the [`docker.file.buildTask`](https://moonrepo.dev/docs/config/project#buildtask) setting, or prompts in the terminal.\n*   `--image` - Base Docker image to use. Defaults to an image derived from the toolchain, or prompts in the terminal.\n*   `--no-prune` - Do not prune the workspace in the build stage.\n*   `--no-toolchain` - Do not use the toolchain and instead use system binaries.\n*   `--start-task` - Name of a task to start the project. Defaults to the [`docker.file.startTask`](https://moonrepo.dev/docs/config/project#starttask) setting, or prompts in the terminal.\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/file#configuration \"Direct link to Configuration\")\n\n*   [`docker.file`](https://moonrepo.dev/docs/config/project#file) in `moon.yml`\n\n## /docs/commands/docker/prune\n\nSource: https://moonrepo.dev/docs/commands/docker/prune\n\ndocker prune | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/docker/prune#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/docker/prune#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/docker/prune#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/docker/prune#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n        *   [file](http://moonrepo.dev/docs/commands/docker/file)\n        *   [prune](http://moonrepo.dev/docs/commands/docker/prune)\n        *   [scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n        *   [setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/docker/prune#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [docker](http://moonrepo.dev/docs/commands/docker) \n4.   [prune](http://moonrepo.dev/docs/commands/docker/prune) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ndocker prune\n============\n\nThe `moon docker prune` command will reduce the overall filesize of the Docker environment by installing production only dependencies for projects that were scaffolded, and removing any applicable extraneous files.\n\n`$ moon docker prune`\n\ninfo\n\nView the official [Docker usage guide](http://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\ncaution\n\nThis command _must be_ ran after [`moon docker scaffold`](http://moonrepo.dev/docs/commands/docker/scaffold) and is typically ran within a `Dockerfile`! The [`moon docker file`](http://moonrepo.dev/docs/commands/docker/file) command can be used to generate a `Dockerfile`.\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/prune#configuration \"Direct link to Configuration\")\n\n*   [`docker.prune`](http://moonrepo.dev/docs/config/workspace#prune) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/docker/prune.mdx)\n\n[file](http://moonrepo.dev/docs/commands/docker/file)\n\n[scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n\n*   [Configuration](http://moonrepo.dev/docs/commands/docker/prune#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/docker/scaffold\n\nSource: https://moonrepo.dev/docs/commands/docker/scaffold\n\nThe `moon docker scaffold <...projects>` command creates multiple repository skeletons for use within `Dockerfile`s, to effectively take advantage of Docker's layer caching. It utilizes the [project graph](https://moonrepo.dev/docs/config/workspace#projects) to copy only critical files, like manifests, lockfiles, and configuration.\n\n`# Scaffold a skeleton to .moon/docker$ moon docker scaffold <project>`\n\ninfo\n\nView the official [Docker usage guide](https://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/docker/scaffold#arguments \"Direct link to Arguments\")\n\n*   `<...projects>` - List of project names or aliases to scaffold sources for, as defined in [`projects`](https://moonrepo.dev/docs/config/workspace#projects).\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/scaffold#configuration \"Direct link to Configuration\")\n\n*   [`docker.scaffold`](https://moonrepo.dev/docs/config/workspace#scaffold) in `.moon/workspace.yml` (entire workspace)\n*   [`docker.scaffold`](https://moonrepo.dev/docs/config/project#scaffold) in `moon.yml` (per project)\n\nHow it works[](http://moonrepo.dev/docs/commands/docker/scaffold#how-it-works \"Direct link to How it works\")\n-------------------------------------------------------------------------------------------------------------\n\nThis command may seem like magic, but it's relative simple thanks to moon's infrastructure and its project graph. When the command is ran, we generate 2 skeleton structures in `.moon/docker` (be sure to gitignore this). One for the workspace, and the other for sources.\n\nwarning\n\nBecause scaffolding uses the project graph, it requires all projects with a `package.json` to be [configured in moon](https://moonrepo.dev/docs/config/workspace#projects). Otherwise, moon will fail to copy all required files and builds may fail.\n\n### Workspace[](http://moonrepo.dev/docs/commands/docker/scaffold#workspace \"Direct link to Workspace\")\n\nThe workspace skeleton mirrors the project folder structure of the repository 1:1, and only copies files required for dependencies to install. This is typically manifests (`package.json`), lockfiles (`yarn.lock`, etc), other critical configs, and `.moon` itself. This is necessary for package managers to install dependencies (otherwise they will fail), and for dependencies to be layer cached in Docker.\n\nAn example of this skeleton using Yarn may look like the following:\n\n`.moon/docker/workspace/ .moon/ .yarn/ apps/    client/       package.json    server/        package.json packages/    foo/       package.json    bar/       package.json    baz/        package.json .yarnrc.yml package.json yarn.lock`\n\n### Sources[](http://moonrepo.dev/docs/commands/docker/scaffold#sources \"Direct link to Sources\")\n\nThe sources skeleton is not a 1:1 mirror of the repository, and instead is the source files of a project (passed as an argument to the command), and all of its dependencies. This allows [`moon run`](https://moonrepo.dev/docs/commands/run) and other commands to work within the `Dockerfile`, and avoid having to `COPY . .` the entire repository.\n\nUsing our example workspace above, our sources skeleton would look like the following, assuming our `client` project is passed as an argument, and this project depends on the `foo` and `baz` projects.\n\n`.moon/docker/sources/ apps/    client/|        src/|        tests/|        public/|        package.json|        tsconfig.json        (anything else) packages/     foo/        lib/        src/        package.json        tsconfig.json        (anything else)     baz/         lib/         src/         package.json         tsconfig.json         (anything else)`\n\n## /docs/commands/docker/setup\n\nSource: https://moonrepo.dev/docs/commands/docker/setup\n\ndocker setup | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/docker/setup#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/docker/setup#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/docker/setup#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/docker/setup#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n        *   [file](http://moonrepo.dev/docs/commands/docker/file)\n        *   [prune](http://moonrepo.dev/docs/commands/docker/prune)\n        *   [scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n        *   [setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/docker/setup#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [docker](http://moonrepo.dev/docs/commands/docker) \n4.   [setup](http://moonrepo.dev/docs/commands/docker/setup) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ndocker setup\n============\n\nThe `moon docker setup` command will efficiently install dependencies for focused projects. This is an all-in-one command for tool and dependency installations, and should replace `npm install` and other commands.\n\n`$ moon docker setup`\n\ninfo\n\nView the official [Docker usage guide](http://moonrepo.dev/docs/guides/docker) for a more in-depth example of how to utilize this command.\n\ncaution\n\nThis command _must be_ ran after [`moon docker scaffold`](http://moonrepo.dev/docs/commands/docker/scaffold) and is typically ran within a `Dockerfile`! The [`moon docker file`](http://moonrepo.dev/docs/commands/docker/file) command can be used to generate a `Dockerfile`.\n\n### Configuration[](http://moonrepo.dev/docs/commands/docker/setup#configuration \"Direct link to Configuration\")\n\n*   [`*`](http://moonrepo.dev/docs/config/toolchain) in `.moon/toolchains.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/docker/setup.mdx)\n\n[scaffold](http://moonrepo.dev/docs/commands/docker/scaffold)\n\n[exec](http://moonrepo.dev/docs/commands/exec)\n\n*   [Configuration](http://moonrepo.dev/docs/commands/docker/setup#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/exec\n\nSource: https://moonrepo.dev/docs/commands/exec\n\nexec | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/exec#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/exec#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/exec#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/exec#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/exec#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [exec](http://moonrepo.dev/docs/commands/exec) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nexec\n====\n\nv2.0.0\nThe `moon exec` (or `moon x`, or `moonx`) command is a low-level command for executing tasks in the action pipeline. It provides fine-grained control over how tasks are selected and executed, through command line options, making it ideal for custom workflows and advanced use cases.\n\nThe [`moon check`](http://moonrepo.dev/docs/commands/check), [`moon ci`](http://moonrepo.dev/docs/commands/ci), and [`moon run`](http://moonrepo.dev/docs/commands/run) commands are all built on top of `moon exec`, so be sure to check those out for more user-friendly abstractions!\n\n`# Run `lint` in project `app`$ moon exec app:lint$ moonx app:lint# Run `dev` in project `client` and `server`$ moon exec client:dev server:dev$ moonx client:dev server:dev# Run `test` in all projects$ moon exec :test$ moonx :test# Run `test` in all projects with tag `frontend`$ moon exec '#frontend:test'$ moonx '#frontend:test'# Run `format` in the default project$ moon exec format$ moonx format# Run `build` in projects matching the query$ moon exec :build --query \"language=javascript && projectLayer=library\"`\n\nArguments[](http://moonrepo.dev/docs/commands/exec#arguments \"Direct link to Arguments\")\n-----------------------------------------------------------------------------------------\n\n*   `...<target>` - [Targets](http://moonrepo.dev/docs/concepts/target) or project relative tasks to run.\n*   `[-- <args>]` - Additional arguments to [pass to the underlying command](http://moonrepo.dev/docs/run-task#passing-arguments-to-the-underlying-command).\n\nOptions[](http://moonrepo.dev/docs/commands/exec#options \"Direct link to Options\")\n-----------------------------------------------------------------------------------\n\n*   `-f`, `--force` - Force run and bypass cache, ignore changed files, and skip affected checks.\n*   `-i`, `--interactive` - Run the pipeline and tasks interactively.\n*   `-s`, `--summary [LEVEL]` - Print a summary of all actions that were ran in the pipeline.\n\n### Workflow[](http://moonrepo.dev/docs/commands/exec#workflow \"Direct link to Workflow\")\n\n*   `--on-failure <ON>` - When a task fails, either bail the pipeline, or continue executing.\n*   `--only-ci-tasks` - Filter tasks to those that only run in CI.\n*   `--query <QUERY>` - Filter tasks based on the result of a query.\n*   `--no-actions` - Run the pipeline without sync and setup related actions.\n\n### Affected[](http://moonrepo.dev/docs/commands/exec#affected \"Direct link to Affected\")\n\n*   `--affected [BY]` - Only run tasks if affected by changed files. Optionally accepts \"local\" or \"remote\".\n*   `--base <BASE>` - Base branch, commit, or revision to compare against.\n*   `--head <HEAD>` - Current branch, commit, or revision to compare with.\n*   `--status <STATUS>` - Filter changed files based on a changed status.\n*   `--stdin` - Accept changed files from stdin for affected checks.\n\n### Graph[](http://moonrepo.dev/docs/commands/exec#graph \"Direct link to Graph\")\n\n*   `--downstream <DEPTH>`, `--dependents <DEPTH>` - Control the depth of downstream dependents.\n*   `--upstream <DEPTH>`, `--dependencies <DEPTH>` - Control the depth of upstream dependencies.\n\n### Parallelism[](http://moonrepo.dev/docs/commands/exec#parallelism \"Direct link to Parallelism\")\n\n*   `--job <INDEX>` - Index of the current job (0 based).\n*   `--job-total <TOTAL>` - Total amount of jobs to run.\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/exec.mdx)\n\n[setup](http://moonrepo.dev/docs/commands/docker/setup)\n\n[ext](http://moonrepo.dev/docs/commands/ext)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/exec#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/exec#options)\n    *   [Workflow](http://moonrepo.dev/docs/commands/exec#workflow)\n    *   [Affected](http://moonrepo.dev/docs/commands/exec#affected)\n    *   [Graph](http://moonrepo.dev/docs/commands/exec#graph)\n    *   [Parallelism](http://moonrepo.dev/docs/commands/exec#parallelism)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/ext\n\nSource: https://moonrepo.dev/docs/commands/ext\n\next | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/ext#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/ext#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/ext#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/ext#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/ext#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [ext](http://moonrepo.dev/docs/commands/ext) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\next\n===\n\nv1.20.0\nThe `moon ext <id>` command will execute an extension (a WASM plugin) that has been configured with the [`extensions`](http://moonrepo.dev/docs/config/workspace#extensions) setting in [`.moon/workspace.yml`](http://moonrepo.dev/docs/config). View our official [extensions guide](http://moonrepo.dev/docs/guides/extensions) for more information.\n\n`$ moon ext download -- --url https://github.com/moonrepo/moon/archive/refs/tags/v1.19.3.zip`\n\nExtensions typically support command line arguments, which _must_ be passed after a `--` separator (as seen above). Any arguments before the separator will be passed to the `moon ext` command itself.\n\ncaution\n\nThis command requires an internet connection if the extension's `.wasm` file must be downloaded from a URL, and it hasn't been cached locally.\n\n### Arguments[](http://moonrepo.dev/docs/commands/ext#arguments \"Direct link to Arguments\")\n\n*   `<id>` - Name of the extension to execute.\n*   `[-- <args>]` - Arguments to pass to the extension.\n\n### Configuration[](http://moonrepo.dev/docs/commands/ext#configuration \"Direct link to Configuration\")\n\n*   [`extensions`](http://moonrepo.dev/docs/config/workspace#extensions) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/ext.mdx)\n\n[exec](http://moonrepo.dev/docs/commands/exec)\n\n[extension](http://moonrepo.dev/docs/commands/extension)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/ext#arguments)\n*   [Configuration](http://moonrepo.dev/docs/commands/ext#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/extension\n\nSource: https://moonrepo.dev/docs/commands/extension\n\nextension | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/extension#__docusaurus_skipToContent_fallback)\n\n[![Image 2: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/extension#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/extension#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/extension#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n        *   [add](http://moonrepo.dev/docs/commands/extension/add)\n        *   [info](http://moonrepo.dev/docs/commands/extension/info)\n\n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/extension#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [extension](http://moonrepo.dev/docs/commands/extension) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nextension\n=========\n\nManage extension plugins.\n\n[add ------ The moon extension add [plugin] command will add a extension to the workspace by injecting a](http://moonrepo.dev/docs/commands/extension/add)[info ------- The moon extension info [plugin] command will display detailed information about a extension.](http://moonrepo.dev/docs/commands/extension/info)\n\n[ext](http://moonrepo.dev/docs/commands/ext)\n\n[add](http://moonrepo.dev/docs/commands/extension/add)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/extension/add\n\nSource: https://moonrepo.dev/docs/commands/extension/add\n\nextension add | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/extension/add#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/extension/add#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/extension/add#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/extension/add#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n        *   [add](http://moonrepo.dev/docs/commands/extension/add)\n        *   [info](http://moonrepo.dev/docs/commands/extension/info)\n\n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/extension/add#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [extension](http://moonrepo.dev/docs/commands/extension) \n4.   [add](http://moonrepo.dev/docs/commands/extension/add) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nextension add\n=============\n\nv2.0.0\nThe `moon extension add <id> [plugin]` command will add a extension to the workspace by injecting a configuration block into `.moon/extensions.yml`. To do this, the command will download the WASM plugin, extract information, and call initialize functions.\n\nFor built-in extensions, the [plugin locator](http://moonrepo.dev/docs/guides/wasm-plugins#configuring-plugin-locations) argument is optional, and will be derived from the identifier.\n\n`$ moon extension add download`\n\nFor third-party extensions, the [plugin locator](http://moonrepo.dev/docs/guides/wasm-plugins#configuring-plugin-locations) argument is required, and must point to the WASM plugin.\n\n`$ moon extension add custom https://example.com/path/to/plugin.wasm`\n\n### Arguments[](http://moonrepo.dev/docs/commands/extension/add#arguments \"Direct link to Arguments\")\n\n*   `<id>` - ID of the extension to use.\n*   `[plugin]` - Optional [plugin locator](http://moonrepo.dev/docs/guides/wasm-plugins#configuring-plugin-locations) for third-party extensions.\n\n### Options[](http://moonrepo.dev/docs/commands/extension/add#options \"Direct link to Options\")\n\n*   `--minimal` - Generate minimal configurations and sane defaults.\n*   `--yes` - Skip all prompts and enables tools based on file detection.\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/extension/add.mdx)\n\n[extension](http://moonrepo.dev/docs/commands/extension)\n\n[info](http://moonrepo.dev/docs/commands/extension/info)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/extension/add#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/extension/add#options)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/extension/info\n\nSource: https://moonrepo.dev/docs/commands/extension/info\n\nextension info | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/extension/info#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/extension/info#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/extension/info#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/extension/info#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n        *   [add](http://moonrepo.dev/docs/commands/extension/add)\n        *   [info](http://moonrepo.dev/docs/commands/extension/info)\n\n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/extension/info#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [extension](http://moonrepo.dev/docs/commands/extension) \n4.   [info](http://moonrepo.dev/docs/commands/extension/info) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nextension info\n==============\n\nv2.0.0\nThe `moon extension info <id> [plugin]` command will display detailed information about a extension. To do this, the command will download the WASM plugin, extract information, and call specific functions.\n\nFor built-in extensions, the [plugin locator][locator] argument is optional, and will be derived from the identifier.\n\n`$ moon extension info download`\n\nFor third-party extensions, the [plugin locator][locator] argument is required, and must point to the WASM plugin.\n\n`$ moon extension info custom https://example.com/path/to/plugin.wasm`\n\n### Arguments[](http://moonrepo.dev/docs/commands/extension/info#arguments \"Direct link to Arguments\")\n\n*   `<id>` - ID of the extension to view.\n*   `[plugin]` - Optional [plugin locator][locator] for third-party extensions.\n\nExample output[](http://moonrepo.dev/docs/commands/extension/info#example-output \"Direct link to Example output\")\n------------------------------------------------------------------------------------------------------------------\n\n`Extension   Download a file from a URL into the current working directory.  ID: download  Title: Download  Version: 1.0.0APIs    define_extension_config   execute_extension   extend_command   extend_project_graph   extend_task_command   extend_task_script   initialize_extension   register_extension (required)   sync_project   sync_workspace`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/extension/info.mdx)\n\n[add](http://moonrepo.dev/docs/commands/extension/add)\n\n[generate](http://moonrepo.dev/docs/commands/generate)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/extension/info#arguments)\n*   [Example output](http://moonrepo.dev/docs/commands/extension/info#example-output)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/generate\n\nSource: https://moonrepo.dev/docs/commands/generate\n\ngenerate | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/generate#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/generate#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/generate#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/generate#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/generate#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [generate](http://moonrepo.dev/docs/commands/generate) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\ngenerate\n========\n\nThe `moon generate <id>` (or `moon g`) command will generate code (files and folders) from a pre-defined template of the same name, using an interactive series of prompts. Templates are located based on the [`generator.templates`](http://moonrepo.dev/docs/config/workspace#templates) setting.\n\n`# Generate code from a template$ moon generate npm-package# Generate code from a template to a target directory$ moon generate npm-package --to ./packages/example# Generate code while declaring custom variable values$ moon generate npm-package --to ./packages/example -- --name \"@company/example\"# Create a new template$ moon generate react-app --template`\n\n> View the official [code generation guide](http://moonrepo.dev/docs/guides/codegen) for a more in-depth example of how to utilize this command.\n\n### Arguments[](http://moonrepo.dev/docs/commands/generate#arguments \"Direct link to Arguments\")\n\n*   `<id>` - ID of the template to generate.\n*   `[-- <vars>]` - Additional arguments to override default variable values.\n\n### Options[](http://moonrepo.dev/docs/commands/generate#options \"Direct link to Options\")\n\n*   `--defaults` - Use the default value of all variables instead of prompting the user.\n*   `--dry-run` - Run entire generator process without writing files.\n*   `--force` - Force overwrite any existing files at the destination.\n*   `--template` - Create a new template with the provided name.\n*   `--to` - Destination to write files to, relative from the current working directory. If not defined, will be prompted during generation.\n\n### Configuration[](http://moonrepo.dev/docs/commands/generate#configuration \"Direct link to Configuration\")\n\n*   [`generator`](http://moonrepo.dev/docs/config/workspace#generator) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/generate.mdx)\n\n[info](http://moonrepo.dev/docs/commands/extension/info)\n\n[hash](http://moonrepo.dev/docs/commands/hash)\n\n*   [Arguments](http://moonrepo.dev/docs/commands/generate#arguments)\n*   [Options](http://moonrepo.dev/docs/commands/generate#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/generate#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/hash\n\nSource: https://moonrepo.dev/docs/commands/hash\n\nhash | moonrepo\n===============\n\n[Skip to main content](http://moonrepo.dev/docs/commands/hash#__docusaurus_skipToContent_fallback)\n\n[![Image 1: moon](http://moonrepo.dev/img/logo.svg)](http://moonrepo.dev/)\n\n[Products](http://moonrepo.dev/docs/commands/hash#)\n*   [**moon**Build system for managing codebases](http://moonrepo.dev/moon)\n*   [**proto**Multi-language version manager](http://moonrepo.dev/proto)\n\n[Docs](http://moonrepo.dev/docs/commands/hash#)\n*   [**moon**](http://moonrepo.dev/docs)\n*   [**proto**](http://moonrepo.dev/docs/proto)\n\n[Guides](http://moonrepo.dev/docs/guides/ci)[Blog](http://moonrepo.dev/blog)[GitHub](https://github.com/moonrepo)\n\nSearch\n\n*   [Introduction](http://moonrepo.dev/docs)\n*   [Install moon](http://moonrepo.dev/docs/install)\n*   [How it works](http://moonrepo.dev/docs/how-it-works) \n*   [Getting started](http://moonrepo.dev/docs/commands/hash#) \n    *   [Setup workspace](http://moonrepo.dev/docs/setup-workspace)\n    *   [Create a project](http://moonrepo.dev/docs/create-project)\n    *   [Setup toolchain](http://moonrepo.dev/docs/setup-toolchain)\n    *   [Create a task](http://moonrepo.dev/docs/create-task)\n    *   [Run a task](http://moonrepo.dev/docs/run-task)\n    *   [Migrate to moon](http://moonrepo.dev/docs/migrate-to-moon)\n\n*   [Concepts](http://moonrepo.dev/docs/concepts) \n*   [Config files](http://moonrepo.dev/docs/config) \n*   [Editors](http://moonrepo.dev/docs/editors) \n*   [Commands](http://moonrepo.dev/docs/commands) \n    *   [Overview](http://moonrepo.dev/docs/commands/overview)\n    *   [action-graph](http://moonrepo.dev/docs/commands/action-graph)\n    *   [bin](http://moonrepo.dev/docs/commands/bin)\n    *   [check](http://moonrepo.dev/docs/commands/check)\n    *   [ci](http://moonrepo.dev/docs/commands/ci)\n    *   [clean](http://moonrepo.dev/docs/commands/clean)\n    *   [completions](http://moonrepo.dev/docs/commands/completions)\n    *   [docker](http://moonrepo.dev/docs/commands/docker) \n    *   [exec](http://moonrepo.dev/docs/commands/exec)\n    *   [ext](http://moonrepo.dev/docs/commands/ext)\n    *   [extension](http://moonrepo.dev/docs/commands/extension) \n    *   [generate](http://moonrepo.dev/docs/commands/generate)\n    *   [hash](http://moonrepo.dev/docs/commands/hash)\n    *   [init](http://moonrepo.dev/docs/commands/init)\n    *   [mcp](http://moonrepo.dev/docs/commands/mcp)\n    *   [project](http://moonrepo.dev/docs/commands/project)\n    *   [projects](http://moonrepo.dev/docs/commands/projects)\n    *   [project-graph](http://moonrepo.dev/docs/commands/project-graph)\n    *   [query](http://moonrepo.dev/docs/commands/query) \n    *   [run](http://moonrepo.dev/docs/commands/run)\n    *   [setup](http://moonrepo.dev/docs/commands/setup)\n    *   [sync](http://moonrepo.dev/docs/commands/sync) \n    *   [task](http://moonrepo.dev/docs/commands/task)\n    *   [tasks](http://moonrepo.dev/docs/commands/tasks)\n    *   [task-graph](http://moonrepo.dev/docs/commands/task-graph)\n    *   [teardown](http://moonrepo.dev/docs/commands/teardown)\n    *   [template](http://moonrepo.dev/docs/commands/template)\n    *   [templates](http://moonrepo.dev/docs/commands/templates)\n    *   [toolchain](http://moonrepo.dev/docs/commands/toolchain) \n    *   [upgrade](http://moonrepo.dev/docs/commands/upgrade)\n\n*   [Migrations](http://moonrepo.dev/docs/commands/hash#) \n*   [Cheat sheet](http://moonrepo.dev/docs/cheat-sheet)\n*   [Feature comparison](http://moonrepo.dev/docs/comparison)\n*   [Terminology](http://moonrepo.dev/docs/terminology)\n*   [FAQ](http://moonrepo.dev/docs/faq)\n*   [Changelog](https://github.com/moonrepo/moon/releases)\n\n1.   [Home](http://moonrepo.dev/)\n2.   [Commands](http://moonrepo.dev/docs/commands) \n3.   [hash](http://moonrepo.dev/docs/commands/hash) \n\nwarning\n\nDocumentation is currently for [moon v2](http://moonrepo.dev/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be[found here](https://moonrepo.github.io/website-v1/).\n\nOn this page\n\nhash\n====\n\nv2.0.0\nUse the `moon hash` command to inspect the contents and sources of a generated hash, also known as the hash manifest. This is extremely useful in debugging task inputs.\n\n`$ moon hash 0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fdde# Query hash using short form$ moon hash 0b55b234`\n\nBy default, this will output the contents of the hash manifest (which is JSON), and the fully qualified resolved hash.\n\n`Hash: 0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fdde{  \"command\": \"build\",  \"args\": [\"./build\"]  // ...}`\n\nThe command can also be output raw JSON by passing the `--json` flag.\n\n### Comparing hashes[](http://moonrepo.dev/docs/commands/hash#comparing-hashes \"Direct link to Comparing hashes\")\n\nThe command can also be used to compare two hashes by diffing their contents. Simply pass two hashes as arguments.\n\n`# Diff between 2 hashes$ moon hash 0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fdde 2388552fee5a02062d0ef402bdc7232f0a447458b058c80ce9c3d0d4d7cfe171# Diff between 2 hashes using short form$ moon hash 0b55b234 2388552f`\n\nBy default, this will output the contents of a hash file (which is JSON), highlighting the differences between the left and right hashes. Lines that match will be printed in white, while the left differences printed in green, and right differences printed in red. If you use `git diff`, this will feel familiar to you.\n\n`Left:  0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fddeRight: 2388552fee5a02062d0ef402bdc7232f0a447458b058c80ce9c3d0d4d7cfe171{\t\"command\": \"build\",\t\"args\": [+\t\t\"./dist\"-\t\t\"./build\"\t],\t...}`\n\nThe differences can also be output in JSON by passing the `--json` flag. The output has the following structure:\n\n`{\tleft: string,\tleft_hash: string,\tleft_diffs: string[],\tright: string,\tright_hash: string,\tright_diffs: string[],}`\n\n### Options[](http://moonrepo.dev/docs/commands/hash#options \"Direct link to Options\")\n\n*   `--json` - Display the diff in JSON format.\n\n### Configuration[](http://moonrepo.dev/docs/commands/hash#configuration \"Direct link to Configuration\")\n\n*   [`hasher`](http://moonrepo.dev/docs/config/workspace#hasher) in `.moon/workspace.yml`\n\n[Edit this page](https://github.com/moonrepo/moon/tree/master/website/docs/commands/hash.mdx)\n\n[generate](http://moonrepo.dev/docs/commands/generate)\n\n[init](http://moonrepo.dev/docs/commands/init)\n\n*   [Comparing hashes](http://moonrepo.dev/docs/commands/hash#comparing-hashes)\n*   [Options](http://moonrepo.dev/docs/commands/hash#options)\n*   [Configuration](http://moonrepo.dev/docs/commands/hash#configuration)\n\nFooter\n------\n\n###### Learn\n\n*   [Docs](http://moonrepo.dev/docs)\n*   [Guides](http://moonrepo.dev/docs/guides/ci)\n*   [Blog](http://moonrepo.dev/blog)\n\n###### Ecosystem\n\n*   [Releases](https://github.com/moonrepo/moon/releases)\n*   [Shared configs](https://github.com/moonrepo/moon-configs)\n*   [Developer tools](https://github.com/moonrepo/dev)\n*   [Examples repository](https://github.com/moonrepo/examples)\n\n###### Support\n\n*   [GitHub](https://github.com/moonrepo)\n*   [Discord](https://discord.gg/qCh9MEynv2)\n*   [Twitter](https://twitter.com/tothemoonrepo)\n\n###### Contact us\n\nWant to learn more about moonrepo? Have questions?\n\nSubject \n\nNext\n\nBacked by\n\nCopyright  2026, moonrepo, Inc.\n\n[GitHub](https://github.com/moonrepo)[Discord](https://discord.gg/qCh9MEynv2)[Twitter](https://twitter.com/tothemoonrepo)\n\n## /docs/commands/init\n\nSource: https://moonrepo.dev/docs/commands/init\n\n# init\n\nThe `moon init` command will initialize moon into a repository and scaffold necessary config files\nby creating a `.moon` folder.\n\n```\n$ moon init# In another directory$ moon init ./app\n```\n\n### Arguments\n\n- `[dest]` - Destination to initialize and scaffold into. Defaults to `.` (current working directory).\n\n### Options\n\n- `--force` - Overwrite existing config files if they exist.\n\n- `--minimal` - Generate minimal configurations and sane defaults.\n\n- `--yes` - Skip all prompts and enables tools based on file detection.\n\n## /docs/commands/mcp\n\nSource: https://moonrepo.dev/docs/commands/mcp\n\n# mcp\n\nv1.37.0\n\nThe `moon mcp` command will start an [MCP](https://modelcontextprotocol.io) server that listens for\nrequests from AI assistants. This allows for agentic workflows in your favorite editor.\n\n```\n$ moon mcp\n```\n\ninfo\n\nThis command should not be ran manually and instead should be integrated into your editor. View the\n[MCP guide](/docs/guides/mcp) for more information.\n\n## /docs/commands/overview\n\nSource: https://moonrepo.dev/docs/commands/overview\n\n# Overview\n\nThe following options are available for all moon commands.\n\n- `--cache ` - The mode for [cache operations](#caching).\n\n- `--color` - Force [colored output](#colors) for moon (not tasks).\n\n- `--concurrency`, `-c` - Maximum number of threads to utilize.\n\n- `--dump` - Dump a [trace profile](#profiling) to the working directory.\n\n- `--help` - Display the help menu for the current command.\n\n- `--log ` - The lowest [log level to output](#logging).\n\n- `--log-file ` - Write logs to the defined file.\n\n- `--quiet`, `-q` - Hide all non-important moon specific terminal output.\n\n- `--theme` - Terminal theme to write output in. v1.35.0\n\n- `--version` - Display the version of the CLI.\n\n## Caching\n\nWe provide a powerful [caching layer](/docs/concepts/cache), but sometimes you need to debug failing or\nbroken tasks, and this cache may get in the way. To circumvent this, we support the `--cache` global\noption, or the `MOON_CACHE` environment variable, both of which accept one of the following values.\n\n- `off` - Turn off caching entirely. Every task will run fresh, including dependency installs.\n\n- `read` - Read existing items from the cache, but do not write to them.\n\n- `read-write` (default) - Read and write items to the cache.\n\n- `write` - Do not read existing cache items, but write new items to the cache.\n\n```\n$ moon run app:build --cache off# Or$ MOON_CACHE=off moon run app:build\n```\n\n## Colors\n\nColored output is a complicated subject, with differing implementations and standards across tooling\nand operating systems. moon aims to normalize this as much as possible, by doing the following:\n\n- By default, moon colors are inherited from your terminal settings (`TERM` and `COLORTERM` environment variables).\n\n- Colors can be force enabled by passing the `--color` option (preferred), or `MOON_COLOR` or `FORCE_COLOR` environment variables.\n\n```\n$ moon app:build --color run# Or$ MOON_COLOR=2 moon run app:build\n```\n\nWhen forcing colors with `MOON_COLOR` or `FORCE_COLOR`, you may set it to one of the following\nnumerical values for the desired level of color support. This is automatically inferred if you use\n`--color`.\n\n- `0` - No colors\n\n- `1` - 16 colors (standard terminal colors)\n\n- `2` - 256 colors\n\n- `3` - 16 million colors (truecolor)\n\n### Themesv1.35.0\n\nBy default, moon assumes a dark themed terminal is being used, and will output colors accordingly.\nHowever, if you use a light theme, these colors are hard to read. To mitigate this, we support\nchanging the theme with the `--theme` global option, or the `MOON_THEME` environment variable.\n\n```\n$ moon run app:build --theme light# Or$ MOON_THEME=light moon run app:build\n```\n\n### Piped output\n\nWhen tasks (child processes) are piped, colors and ANSI escape sequences are lost, since the target\nis not a TTY and we do not implement a PTY. This is a common pattern this is quite annoying.\nHowever, many tools and CLIs support a `--color` option to work around this limitation and to always\nforce colors, even when not a TTY.\n\nTo mitigate this problem as a whole, and to avoid requiring `--color` for every task, moon supports\nthe [`pipeline.inheritColorsForPipedTasks`](/docs/config/workspace#inheritcolorsforpipedtasks)\nconfiguration setting. When enabled, all piped child processes will inherit the color settings of\nthe currently running terminal.\n\n## Concurrency\n\nThe `--concurrency` option or `MOON_CONCURRENCY` environment variable can be used to control the\nmaximum amount of threads to utilize in our thread pool. If not defined, defaults to the number of\noperating system cores.\n\n```\n$ moon run app:build --concurrency 1# Or$ MOON_CONCURRENCY=1 moon run app:build\n```\n\n## Debugging\n\nAt minimum, most debugging can be done by passing [`--log trace`](#logging) on the command line and\nsifting through the logs. We also provide the following environment variables to toggle output.\n\n- `MOON_DEBUG_PROCESS_ENV` - By default moon hides the environment variables (except for `MOON_`) passed to processes to avoid leaking sensitive information. However, knowing what environment variables are passed around is helpful in debugging. Declare this variable to reveal the entire environment.\n\n- `MOON_DEBUG_PROCESS_INPUT` - By default moon truncates the stdin passed to processes to avoid thrashing the console with a large input string. However, knowing what input is passed around is helpful in debugging. Declare this variable to reveal the entire input.\n\n- `MOON_DEBUG_PROTO_INSTALL` - Debug the proto installation process.\n\n- `MOON_DEBUG_REMOTE` - Debug our remote caching implementation by including additional logging output, and printing internal connection errors.\n\n- `MOON_DEBUG_WASM` - Debug our WASM plugins by including additional logging output, and optionally dumping memory/core profiles.\n\n## Logging\n\nBy default, moon aims to output as little as possible, as we want to preserve the original output of\nthe command's being ran, excluding warnings and errors. This is managed through log levels, which\ncan be defined with the `--log` global option, or the `MOON_LOG` environment variable. The following\nlevels are supported, in priority order.\n\n- `off` - Turn off logging entirely.\n\n- `error` - Only show error logs.\n\n- `warn` - Only show warning logs and above.\n\n- `info` (default) - Only show info logs and above.\n\n- `debug` - Only show debug logs and above.\n\n- `trace` - Show all logs, including network requests and child processes.\n\n- `verbose` - Like `trace` but also includes span information. v1.35.0\n\n```\n$ moon run app:build --log trace# Or$ MOON_LOG=trace moon run app:build\n```\n\n### Writing logs to a file\n\nmoon can dump the logs from a command to a file using the `--logFile` option, or the `MOON_LOG_FILE`\nenvironment variable. The dumped logs will respect the `--log` option and filter the logs piped to\nthe output file.\n\n```\n$ moon run app:build --logFile=output.log# Or$ MOON_LOG_FILE=output.log moon run app:build\n```\n\n## Profilingv1.26.0\n\nWhen the `--dump` option or `MOON_DUMP` environment variable is set, moon will generate a trace\nprofile and dump it to the current working directory. This profile can be opened with Chrome (via\n`chrome://tracing`) or [Perfetto](https://ui.perfetto.dev/).\n\nThis profile will display many of the operations within moon as a flame chart, allowing you to\ninspect and debug slow operations.\n\n## /docs/commands/project\n\nSource: https://moonrepo.dev/docs/commands/project\n\n# project\n\nThe `moon project [id]` (or `moon p`) command will display all available information about a project\nthat has been configured and exists within the graph. If a project does not exist, the program will\nreturn with a 1 exit code.\n\n```\n$ moon project web\n```\n\n### Arguments\n\n- `[id]` - ID or alias of a project, as defined in [`projects`](/docs/config/workspace#projects).\n\n### Options\n\n- `--json` - Print the project and its configuration as JSON.\n\n- `--no-tasks` - Do not list tasks for the project.\n\n## Example output\n\nThe following output is an example of what this command prints, using our very own\n`@moonrepo/runtime` package.\n\n```\nRUNTIMEProject: runtimeAlias: @moonrepo/runtimeSource: packages/runtimeRoot: ~/Projects/moon/packages/runtimeToolchain: nodeLanguage: typescriptStack: unknownType: libraryDEPENDS ON  - types (implicit, production)INHERITS FROM  - .moon/tasks/node.ymlTASKSbuild:   packemon build --addFiles --addExports --declarationformat:   prettier --check --config ../../prettier.config.js --ignore-path ../../.prettierignore --no-error-on-unmatched-pattern .lint:   eslint --cache --cache-location ./.eslintcache --color --ext .js,.ts,.tsx --ignore-path ../../.eslintignore --exit-on-fatal-error --no-error-on-unmatched-pattern --report-unused-disable-directives .lint-fix:   eslint --cache --cache-location ./.eslintcache --color --ext .js,.ts,.tsx --ignore-path ../../.eslintignore --exit-on-fatal-error --no-error-on-unmatched-pattern --report-unused-disable-directives . --fixtest:   jest --cache --color --preset jest-preset-moon --passWithNoTeststypecheck:   tsc --buildFILE GROUPSconfigs:  - packages/runtime/*.{js,json}sources:  - packages/runtime/src/**/*  - packages/runtime/types/**/*tests:  - packages/runtime/tests/**/*\n```\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n- [`project`](/docs/config/project#project) in `moon.yml`\n\n## /docs/commands/project-graph\n\nSource: https://moonrepo.dev/docs/commands/project-graph\n\n# project-graph\n\nThe `moon project-graph [id]` (or `moon pg`) command will generate and serve a visual graph of all\nconfigured projects as nodes, with dependencies between as edges, and can also output the graph in\n[Graphviz DOT format](https://graphviz.org/doc/info/lang.html).\n\n```\n# Run the visualizer locally$ moon project-graph# Export to DOT format$ moon project-graph --dot > graph.dot\n```\n\nA project name can be passed to focus the graph to only that project and its dependencies. For\nexample, `moon project-graph app`.\n\n### Arguments\n\n- `[id]` - Optional ID or alias of a project to focus, as defined in [`projects`](/docs/config/workspace#projects).\n\n### Options\n\n- `--dependents` - Include direct dependents of the focused project.\n\n- `--dot` - Print the graph in DOT format.\n\n- `--host` - The host address. Defaults to `127.0.0.1`. v1.36.0\n\n- `--json` - Print the graph in JSON format.\n\n- `--port` - The port to bind to. Defaults to a random port. v1.36.0\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n## Example output\n\nThe following output is an example of the graph in DOT format.\n\n```\ndigraph {    0 [ label=\"(workspace)\" style=filled, shape=circle, fillcolor=black, fontcolor=white]    1 [ label=\"runtime\" style=filled, shape=circle, fillcolor=gray, fontcolor=black]    2 [ label=\"website\" style=filled, shape=circle, fillcolor=gray, fontcolor=black]    0 -> 1 [ arrowhead=none]    0 -> 2 [ arrowhead=none]}\n```\n\n## /docs/commands/projects\n\nSource: https://moonrepo.dev/docs/commands/projects\n\n# projects\n\nv2.0.0\n\nThe `moon projects` command will list all projects configured in the workspace as a table of\ninformation.\n\n```\nProject          Source                    Stack             Layer             Toolchains                                Description                                                   types            packages/types            frontend          library           javascript, node, typescript, yarn                                                                      website          website                   frontend          application       javascript, node, typescript, yarn        A static website powered by Docusaurus.                       \n```\n\ninfo\n\nUse [`moon query projects`](/docs/commands/query/projects) for advanced querying and filtering of projects.\n\n### Options\n\n- `--json` - Print the projects as JSON.\n\n## /docs/commands/query\n\nSource: https://moonrepo.dev/docs/commands/query\n\n- [Home](/)\n- [Commands](/docs/commands)\n- [query](/docs/commands/query)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# query\n\nQuery information about moon, its projects, their tasks, the environment, the pipeline, and many other aspects of the workspace.\n\n[ affectedUse the moon query affected sub-command to query for all affected projects and tasks based on the](/docs/commands/query/affected)\n\n[ changed-filesUse the moon query changed-files sub-command to query for a list of changed files (added,](/docs/commands/query/changed-files)\n\n[ projectsUse the moon query projects sub-command to query information about all projects in the project](/docs/commands/query/projects)\n\n[ tasksUse the moon query tasks sub-command to query task information for all projects in the project](/docs/commands/query/tasks)\n\n[project-graph](/docs/commands/project-graph)\n\n[affected](/docs/commands/query/affected)\n\n## /docs/commands/query/affected\n\nSource: https://moonrepo.dev/docs/commands/query/affected\n\n# query affected\n\nv2.0.0\n\nUse the `moon query affected` sub-command to query for all affected projects and tasks based on the\nstate of the workspace and VCS.\n\n```\n# Return affected$ moon query affected# Return affected including dependency relationships$ moon query affected --upstream deep\n```\n\nThis will output a map of projects and tasks as JSON. The output has the following structure:\n\n```\n{\tprojects: Record,\ttasks: Record,}\n```\n\n### Options\n\n- `--downstream` - Include downstream dependents. Supports \"none\" (default), \"direct\", \"deep\".\n\n- `--upstream` - Include upstream dependencies. Supports \"none\", \"direct\", \"deep\" (default).\n\n## /docs/commands/query/changed-files\n\nSource: https://moonrepo.dev/docs/commands/query/changed-files\n\n# query changed-files\n\nUse the `moon query changed-files` sub-command to query for a list of changed files (added,\nmodified, deleted, etc) using the current VCS state. These are the same queries that\n[`moon ci`](/docs/commands/ci) and [`moon run`](/docs/commands/run) use under the hood.\n\nTouches files are determined using the following logic:\n\n- If `--defaultBranch` is provided, and the current branch is the [`vcs.defaultBranch`](/docs/config/workspace#defaultbranch), then compare against the previous revision of the default branch (`HEAD~1`). This is what [continuous integration](/docs/guides/ci) uses.\n\n- If `--local` is provided, changed files are based on your local index only (`git status`).\n\n- Otherwise, then compare the defined base (`--base`) against head (`--head`).\n\n```\n# Return all files$ moon query changed-files# Return deleted files$ moon query changed-files --status deleted# Return all files between 2 revisions$ moon query changed-files --base  --head\n```\n\nThis will output a list of workspace relative files as JSON. The output has the following structure:\n\n```\n{\tfiles: string[],\toptions: QueryOptions,}\n```\n\n### Options\n\n- `--default-branch` - When on the default branch, compare against the previous revision.\n\n- `--base ` - Base branch, commit, or revision to compare against. Defaults to [`vcs.defaultBranch`](/docs/config/workspace#defaultbranch).\n\n- `--head ` - Current branch, commit, or revision to compare with. Defaults to `HEAD`.\n\n- `--local` - Gather files from the local state instead of remote.\n\n- `--remote` - Gather files from the remote state instead of local.\n\n- `--status ` - Filter files based on a changed status. Can be passed multiple times. Types: `all` (default), `added`, `deleted`, `modified`, `staged`, `unstaged`, `untracked`\n\n### Configuration\n\n- [`vcs`](/docs/config/workspace#vcs) in `.moon/workspace.yml`\n\n## /docs/commands/query/projects\n\nSource: https://moonrepo.dev/docs/commands/query/projects\n\n# query projects\n\nUse the `moon query projects` sub-command to query information about all projects in the project\ngraph. The project list can be filtered by passing a [query statement](/docs/concepts/query-lang) as\nan argument, or by using [options](#options) arguments.\n\n```\n# Find all projects$ moon query projects# Find all projects with an id that matches \"react\"$ moon query projects --id react$ moon query projects \"project~react\"# Find all projects with a `lint` or `build` task$ moon query projects --tasks \"lint|build\"$ moon query projects \"task=[lint,build]\"\n```\n\nThis will output a list of projects as JSON. The output has the following structure:\n\n```\n{\tprojects: Project[],\toptions: QueryOptions,}\n```\n\n### Affected projects\n\nThis command can also be used to query for affected projects, based on the state of the VCS working\ntree. For advanced control, you can also pass the results of `moon query changed-files` to stdin.\n\n```\n# Find all affected projects$ moon query projects --affected# Find all affected projects using the results of another query$ moon query changed-files | moon query projects --affected\n```\n\n### Arguments\n\n- `[query]` - An optional [query statement](/docs/concepts/query-lang) to filter projects with. When provided, all [filter options](#filters) are ignored. v1.4.0\n\n### Options\n\n#### Affected\n\n- `--affected` - Filter projects that have been affected by touched files.\n\n- `--downstream` - Include downstream dependents of queried projects. Supports \"none\" (default), \"direct\", \"deep\". v1.29.0\n\n- `--upstream` - Include upstream dependencies of queried projects. Supports \"none\", \"direct\", \"deep\" (default). v1.29.0\n\n#### Filters\n\nAll option values are case-insensitive regex patterns.\n\n- `--alias ` - Filter projects that match this alias.\n\n- `--id ` - Filter projects that match this ID/name.\n\n- `--language ` - Filter projects of this programming language.\n\n- `--layer ` - Filter project of this layer.\n\n- `--source ` - Filter projects that match this source path.\n\n- `--stack ` - Filter projects of the tech stack.\n\n- `--tags ` - Filter projects that have the following tags.\n\n- `--tasks ` - Filter projects that have the following tasks.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n## /docs/commands/query/tasks\n\nSource: https://moonrepo.dev/docs/commands/query/tasks\n\n# query tasks\n\nUse the `moon query tasks` sub-command to query task information for all projects in the project\ngraph. The tasks list can be filtered by passing a [query statement](/docs/concepts/query-lang) as\nan argument, or by using [options](#options) arguments.\n\n```\n# Find all tasks grouped by project$ moon query tasks# Find all tasks from projects with an id that matches \"react\"$ moon query tasks --id react$ moon query tasks \"task~react\"\n```\n\nThis will output a list of projects as JSON. The output has the following structure:\n\n```\n{\ttasks: Record>,\toptions: QueryOptions,}\n```\n\n### Arguments\n\n- `[query]` - An optional [query statement](/docs/concepts/query-lang) to filter projects with. When provided, all [filter options](#filters) are ignored. v1.4.0\n\n### Options\n\n#### Affected\n\n- `--affected` - Filter tasks that have been affected by touched files.\n\n- `--downstream` - Include downstream dependents of queried tasks. Supports \"none\" (default), \"direct\", \"deep\". v1.30.0\n\n- `--upstream` - Include upstream dependencies of queried tasks. Supports \"none\", \"direct\", \"deep\" (default). v1.30.0\n\n#### Filtersv1.30.0\n\nAll option values are case-insensitive regex patterns.\n\n- `--command ` - Filter tasks that match this command.\n\n- `--id ` - Filter tasks that match this ID.\n\n- `--project ` - Filter tasks that belong to this project.\n\n- `--script ` - Filter tasks that match this script.\n\n- `--toolchain ` - Filter tasks of this toolchain. v1.31.0\n\n- `--type ` - Filter tasks of this type.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n- [`tasks`](/docs/config/project#tasks) in `moon.yml`\n\n## /docs/commands/run\n\nSource: https://moonrepo.dev/docs/commands/run\n\n# run\n\nThe `moon run` (or `moon r`) command will run one or many [targets](/docs/concepts/target) and all of\nits dependencies in topological order. Each run will incrementally cache each task, improving speed\nand development times... over time. View the official [Run a task](/docs/run-task) and\n[Cheat sheet](/docs/cheat-sheet#tasks) articles for more information!\n\n```\n# Run `lint` in project `app`$ moon run app:lint# Run `dev` in project `client` and `server`$ moon run client:dev server:dev# Run `test` in all projects$ moon run :test# Run `test` in all projects with tag `frontend`$ moon run '#frontend:test'# Run `format` in default project$ moon run format# Run `build` in projects matching the query$ moon run :build --query \"language=javascript && projectLayer=library\"\n```\n\ninfo\n\nThe default behavior for `moon run` is to \"fail fast\", meaning that any failed task will immediately\nabort execution of the entire action graph. Use `moon exec --on-failure continue` for alternative\nbehavior.\n\n### Arguments\n\n- `...` - [Targets](/docs/concepts/target) or project relative tasks to run.\n\n- `[-- ]` - Additional arguments to [pass to the underlying command](/docs/run-task#passing-arguments-to-the-underlying-command).\n\n### Options\n\nInherits all options from [`moon exec`](/docs/commands/exec) except for `--on-failure`.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n- [`tasks`](/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n\n- [`tasks`](/docs/config/project#tasks) in `moon.yml`\n\n## /docs/commands/setup\n\nSource: https://moonrepo.dev/docs/commands/setup\n\n# setup\n\nThe `moon setup` command can be used to setup the developer and pipeline environments. It achieves\nthis by downloading and installing all configured tools into the toolchain.\n\n```\n$ moon setup\n```\n\ninfo\n\nThis command should rarely be used, as the environment is automatically setup when running other\ncommands, like detecting affected projects, running a task, or generating a build artifact.\n\n### Configuration\n\n- [`*`](/docs/config/toolchain) in `.moon/toolchains.yml`\n\n## /docs/commands/sync\n\nSource: https://moonrepo.dev/docs/commands/sync\n\n- [Home](/)\n- [Commands](/docs/commands)\n- [sync](/docs/commands/sync)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# sync\n\nOperations for syncing the workspace to a healthy state.\n\n[ code-ownersThe moon sync code-owners command will manually sync code owners, by aggregating all owners from](/docs/commands/sync/code-owners)\n\n[ config-schemasThe moon sync config-schemas command will manually generate JSON schemas to .moon/cache/schemas](/docs/commands/sync/config-schemas)\n\n[ projectsThe moon sync projects command will force sync all projects in the workspace to help achieve a](/docs/commands/sync/projects)\n\n[ vcs-hooksThe moon sync vcs-hooks command will manually sync hooks for the configured](/docs/commands/sync/vcs-hooks)\n\n[setup](/docs/commands/setup)\n\n[code-owners](/docs/commands/sync/code-owners)\n\n## /docs/commands/sync/code-owners\n\nSource: https://moonrepo.dev/docs/commands/sync/code-owners\n\n# sync code-owners\n\nv1.8.0\n\nThe `moon sync code-owners` command will manually sync code owners, by aggregating all owners from\nprojects, and generating a single `CODEOWNERS` file. Refer to the official\n[code owners](/docs/guides/codeowners) guide for more information.\n\n```\n$ moon sync code-owners\n```\n\n### Options\n\n- `--clean` - Clean and remove previously generated file.\n\n- `--force` - Bypass cache and force create file.\n\n### Configuration\n\n- [`codeowners`](/docs/config/workspace#codeowners) in `.moon/workspace.yml`\n\n- [`owners`](/docs/config/project#owners) in `moon.yml`\n\n## /docs/commands/sync/config-schemas\n\nSource: https://moonrepo.dev/docs/commands/sync/config-schemas\n\n# sync config-schemas\n\nv1.27.0\n\nThe `moon sync config-schemas` command will manually generate JSON schemas to `.moon/cache/schemas`\nfor all our different configuration files.\n\n```\n$ moon sync config-schemas\n```\n\n### Options\n\n- `--force` - Bypass cache and force create files.\n\n## /docs/commands/sync/projects\n\nSource: https://moonrepo.dev/docs/commands/sync/projects\n\n# sync projects\n\nv1.8.0\n\nThe `moon sync projects` command will force sync all projects in the workspace to help achieve a\n[healthy repository state](/docs/faq#what-should-be-considered-the-source-of-truth). This applies\nthe following:\n\n- Ensures cross-project dependencies are linked based on [`dependsOn`](/docs/config/project#dependson).\n\n- Ensures language specific configuration files are present and accurate (`package.json`, `tsconfig.json`, etc).\n\n- Ensures root configuration and project configuration are in sync.\n\n- Any additional language specific semantics that may be required.\n\n```\n$ moon sync projects\n```\n\nThis command should rarely be ran, as [`moon run`](/docs/commands/run) will sync affected projects\nautomatically! However, when migrating or refactoring, manual syncing may be necessary.\n\n### Configuration\n\n- [`projects`](/docs/config/workspace#projects) in `.moon/workspace.yml`\n\n## /docs/commands/sync/vcs-hooks\n\nSource: https://moonrepo.dev/docs/commands/sync/vcs-hooks\n\n# sync vcs-hooks\n\nv1.9.0\n\nThe `moon sync vcs-hooks` command will manually sync hooks for the configured\n[VCS](/docs/config/workspace#vcs), by generating and referencing hook scripts from the\n[`vcs.hooks`](/docs/config/workspace#hooks) setting. Refer to the official\n[VCS hooks](/docs/guides/vcs-hooks) guide for more information.\n\n```\n$ moon sync vcs-hooks\n```\n\n### Options\n\n- `--clean` - Clean and remove previously generated hooks.\n\n- `--force` - Bypass cache and force create hooks.\n\n### Configuration\n\n- [`vcs.hooks`](/docs/config/workspace#hooks) in `.moon/workspace.yml`\n\n## /docs/commands/task\n\nSource: https://moonrepo.dev/docs/commands/task\n\n# task\n\nv1.1.0\n\nThe `moon task [target]` (or `moon t`) command will display information about a task that has been\nconfigured and exists within a project. If a task does not exist, the program will return with a 1\nexit code.\n\n```\n$ moon task web:build\n```\n\n### Arguments\n\n- `[target]` - Fully qualified project + task target.\n\n### Options\n\n- `--json` - Print the task and its configuration as JSON.\n\n## Example output\n\nThe following output is an example of what this command prints, using our very own\n`@moonrepo/runtime` package.\n\n```\nRUNTIME:BUILDTask: buildProject: runtimeToolchain: nodeType: buildPROCESSCommand: packemon build --addFiles --addExports --declarationEnvironment variables:  - NODE_ENV = productionWorking directory: ~/Projects/moon/packages/runtimeRuns dependencies: ConcurrentlyRuns in CI: YesDEPENDS ON  - types:buildINHERITS FROM  - .moon/tasks/node.ymlINPUTS  - .moon/*.yml  - .moon/tasks/node.yml  - packages/runtime/package.json  - packages/runtime/src/**/*  - packages/runtime/tsconfig.*.json  - packages/runtime/tsconfig.json  - packages/runtime/types/**/*  - tsconfig.options.jsonOUTPUTS  - packages/runtime/cjs\n```\n\n### Configuration\n\n- [`tasks`](/docs/config/tasks#tasks) in `.moon/tasks/all.yml`\n\n- [`tasks`](/docs/config/project#tasks) in `moon.yml`\n\n## /docs/commands/task-graph\n\nSource: https://moonrepo.dev/docs/commands/task-graph\n\n# task-graph\n\nv1.30.0\n\nThe `moon task-graph [target]` (or `moon tg`) command will generate and serve a visual graph of all\nconfigured tasks as nodes, with dependencies between as edges, and can also output the graph in\n[Graphviz DOT format](https://graphviz.org/doc/info/lang.html).\n\n```\n# Run the visualizer locally$ moon task-graph# Export to DOT format$ moon task-graph --dot > graph.dot\n```\n\nA task target can be passed to focus the graph to only that task and its dependencies. For\nexample, `moon task-graph app:build`.\n\n### Arguments\n\n- `[target]` - Optional target of task to focus.\n\n### Options\n\n- `--dependents` - Include direct dependents of the focused task.\n\n- `--dot` - Print the graph in DOT format.\n\n- `--host` - The host address. Defaults to `127.0.0.1`. v1.36.0\n\n- `--json` - Print the graph in JSON format.\n\n- `--port` - The port to bind to. Defaults to a random port. v1.36.0\n\n## Example output\n\nThe following output is an example of the graph in DOT format.\n\n```\ndigraph {    0 [ label=\"types:build\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    1 [ label=\"runtime:build\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    2 [ label=\"website:build\" style=filled, shape=oval, fillcolor=gray, fontcolor=black]    1 -> 0 [ label=\"required\" arrowhead=box, arrowtail=box]    2 -> 1 [ label=\"required\" arrowhead=box, arrowtail=box]    2 -> 0 [ label=\"required\" arrowhead=box, arrowtail=box]}\n```\n\n## /docs/commands/tasks\n\nSource: https://moonrepo.dev/docs/commands/tasks\n\n# tasks\n\nv2.0.0\n\nThe `moon tasks` command will list all tasks available in the workspace as a table of information.\n\n```\nTask                          Command          Type        Preset      Toolchains                                Description                                                           website:build                 docusaurus       build                   typescript, javascript, node, yarn        Builds the Docusaurus app.                                            website:format                prettier         test                    javascript, node, yarn                                                                                          website:format-write          prettier         test                    javascript, node, yarn                                                                                          website:lint                  eslint           test                    javascript, node, yarn                                                                                          website:lint-fix              eslint           test                    javascript, node, yarn                                                                                          website:start                 docusaurus       run         server      typescript, javascript, node, yarn                                                                              website:test                  jest             test                    javascript, node, yarn                                                                                          website:typecheck             tsc              test                    typescript, javascript, node, yarn                                                                              \n```\n\ninfo\n\nUse [`moon query tasks`](/docs/commands/query/tasks) for advanced querying and filtering of tasks.\n\n### Arguments\n\n- `[id]` - Filter tasks to a specific project ID.\n\n### Options\n\n- `--json` - Print the projects as JSON.\n\n## /docs/commands/teardown\n\nSource: https://moonrepo.dev/docs/commands/teardown\n\n# teardown\n\nThe `moon teardown` command, as its name infers, will teardown and clean the current environment,\nopposite the [`setup`](/docs/commands/setup) command. It achieves this by doing the following:\n\n- Uninstalling all configured tools in the toolchain.\n\n- Removing any download or temporary files/folders.\n\n```\n$ moon teardown\n```\n\n### Configuration\n\n- [`*`](/docs/config/toolchain) in `.moon/toolchains.yml`\n\n## /docs/commands/template\n\nSource: https://moonrepo.dev/docs/commands/template\n\n# template\n\nv2.0.0\n\nThe `moon template [id]` command will display information about a template, its files, and\nvariables.\n\n```\nTemplate title   Some description of the template and its files.About   Template: package  Location: /templates/package  Destination: packages/[name | kebab_case]  Extends:   Assets:   Files:    - package.jsonVariables   name: string\n```\n\n### Arguments\n\n- `[id]` - The template ID.\n\n### Options\n\n- `--json` - Print the template as JSON.\n\n## /docs/commands/templates\n\nSource: https://moonrepo.dev/docs/commands/templates\n\n# templates\n\nv1.24.0\n\nThe `moon templates` command will list all templates available for [code generation](/docs/commands/generate).\nThis list will include the template title, description, default destination, where it's source files\nare located, and more.\n\n```\n$ moon templates\n```\n\n### Options\n\n- `--filter` - Filter templates by a search term.\n\n- `--json` - Print templates in JSON format.\n\n### Configuration\n\n- [`generator`](/docs/config/workspace#generator) in `.moon/workspace.yml`\n\n## /docs/commands/toolchain\n\nSource: https://moonrepo.dev/docs/commands/toolchain\n\n- [Home](/)\n- [Commands](/docs/commands)\n- [toolchain](/docs/commands/toolchain)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# toolchain\n\nManage toolchain plugins.\n\n[ addThe moon toolchain add [plugin] command will add a toolchain to the workspace by injecting a](/docs/commands/toolchain/add)\n\n[ infoThe moon toolchain info [plugin] command will display detailed information about a toolchain,](/docs/commands/toolchain/info)\n\n[templates](/docs/commands/templates)\n\n[add](/docs/commands/toolchain/add)\n\n## /docs/commands/toolchain/add\n\nSource: https://moonrepo.dev/docs/commands/toolchain/add\n\n# toolchain add\n\nv1.38.0\n\nThe `moon toolchain add  [plugin]` command will add a toolchain to the workspace by injecting a\nconfiguration block into `.moon/toolchains.yml`. To do this, the command will download the WASM\nplugin, extract information, and call initialize functions.\n\nFor built-in toolchains, the [plugin locator](/docs/guides/wasm-plugins#configuring-plugin-locations) argument is optional, and will be derived\nfrom the identifier.\n\n```\n$ moon toolchain add typescript\n```\n\nFor third-party toolchains, the [plugin locator](/docs/guides/wasm-plugins#configuring-plugin-locations) argument is required, and must point to\nthe WASM plugin.\n\n```\n$ moon toolchain add custom https://example.com/path/to/plugin.wasm\n```\n\n### Arguments\n\n- `` - ID of the toolchain to use.\n\n- `[plugin]` - Optional [plugin locator](/docs/guides/wasm-plugins#configuring-plugin-locations) for third-party toolchains.\n\n### Options\n\n- `--minimal` - Generate minimal configurations and sane defaults.\n\n- `--yes` - Skip all prompts and enables tools based on file detection.\n\n## /docs/commands/toolchain/info\n\nSource: https://moonrepo.dev/docs/commands/toolchain/info\n\n# toolchain info\n\nv1.38.0\n\nThe `moon toolchain info  [plugin]` command will display detailed information about a toolchain,\nlike what files are scanned, what configuration settings are available, and what tier APIs are\nsupported. To do this, the command will download the WASM plugin, extract information, and call\nspecific functions.\n\nFor built-in toolchains, the [plugin locator][locator] argument is optional, and will be derived\nfrom the identifier.\n\n```\n$ moon toolchain info typescript\n```\n\nFor third-party toolchains, the [plugin locator][locator] argument is required, and must point to\nthe WASM plugin.\n\n```\n$ moon toolchain info custom https://example.com/path/to/plugin.wasm\n```\n\n### Arguments\n\n- `` - ID of the toolchain to view.\n\n- `[plugin]` - Optional [plugin locator][locator] for third-party toolchains.\n\n## Example output\n\n```\nToolchain   Provides sync operations that keep tsconfig.json's in a healthy state.  ID: typescript  Name: TypeScript  Version: 0.2.0Configuration   createMissingConfig: bool  When `syncProjectReferences` is enabled, will create a `tsconfig.json`  in referenced projects if it does not exist.  includeProjectReferenceSources: bool  Appends sources of project reference to `include` in `tsconfig.json`,  for each project.  includeSharedTypes: bool  Appends shared types to `include` in `tsconfig.json`, for each project.  projectConfigFileName: string  Name of the `tsconfig.json` file within each project.  root: string  The relative root to the TypeScript root. Primarily used for  resolving project references.  rootConfigFileName: string  Name of the `tsconfig.json` file at the workspace root.  rootOptionsConfigFileName: string  Name of the shared compiler options `tsconfig.json` file  at the workspace root.  routeOutDirToCache: bool  Updates and routes `outDir` in `tsconfig.json` to moon's cache,  for each project.  syncProjectReferences: bool  Syncs all project dependencies as `references` in `tsconfig.json`,  for each project.  syncProjectReferencesToPaths: bool  Syncs all project dependencies as `paths` in `tsconfig.json`,  for each project.Tier 1 - Usage detection   Config files: tsconfig.json, tsconfig.*.json, *.tsconfig.json, .tsbuildinfo, *.tsbuildinfo  Executable names: tsc, tsserver  APIs:     register_toolchain (required)     define_toolchain_config     initialize_toolchain     detect_version_files     parse_version_file     define_docker_metadata     scaffold_docker     prune_docker     sync_project     sync_workspaceTier 2 - Ecosystem integration   APIs:     extend_project_graph     extend_task_command     extend_task_script     locate_dependencies_root     install_dependencies     hash_task_contents     parse_lock     parse_manifest     setup_environmentTier 3 - Tool management   APIs:     register_tool (required)     load_versions     resolve_version     download_prebuilt (required)     unpack_archive     locate_executables (required)     setup_toolchain     teardown_toolchain\n```\n\n## /docs/commands/upgrade\n\nSource: https://moonrepo.dev/docs/commands/upgrade\n\n# upgrade\n\nThe `moon upgrade` command can be used to upgrade your current moon binary (if installed globally)\nto the latest version.\n\n```\n$ moon upgrade\n```\n\ncaution\n\nThis command will only work if moon was installed in the `~/.moon` directory, using our official\n[installation script](/docs/install). If installed through Node.js, you'll need to upgrade manually.\n\n## /docs/comparison\n\nSource: https://moonrepo.dev/docs/comparison\n\n# Feature comparison\n\nThe following comparisons are not an exhaustive list of features, and may be inaccurate or out of\ndate, but represent a good starting point for investigation. If something is not correct, please\n[create an issue](https://github.com/moonrepo/moon/issues) or\n[submit a patch](https://github.com/moonrepo/moon/blob/master/website/src/components/ComparisonTable.tsx).\n\nBefore diving into our comparisons below, we highly suggest reading\n[monorepo.tools](https://monorepo.tools/) for a deeper insight into monorepos and available tooling.\nIt's a great resource for learning about the current state of things and the ecosystem.\n\ninfo\n\nLooking to migrate from Nx or Turborepo to moon? Use our\n[`moon ext migrate-nx`](/docs/guides/extensions#migrate-nx) or\n[`moon ext migrate-turborepo`](/docs/guides/extensions#migrate-turborepo) commands for a (somewhat)\nseamless migration!\n\n## Unique features\n\nAlthough moon is still in its infancy, we provide an array of powerful features that other frontend\ncentric task runners do not, such as...\n\n- [Integrated toolchain](/docs/concepts/toolchain) - moon manages its own version of programming languages and dependency managers behind the scenes, so that every task is executed with the exact same version, across all machines.\n\n- [Task inheritance](/docs/concepts/task-inheritance) - Instead of defining the same tasks (lint, test, etc) over and over again for every project in the monorepo, moon supports a task inheritance model where it only needs to be defined once at the top-level. Projects can then merge with, exclude, or override if need be.\n\n- [Continuous integration](/docs/guides/ci) - By default, all moon tasks will run in CI, as we want to encourage every facet of a project or repository to be continually tested and verified. This can be turned off on a per-task basis.\n\nCurious to learn more? Check out the \"[Why use moon?](/docs/)\" or \"[Features](/docs/)\" sections for more\ninformation, or these wonderful articles provided by the community:\n\n- [A review of moon + Packemon](https://azu.github.io/slide/2022/moa/moon-packemon.html) by [azu](https://twitter.com/azu_re)\n\n- [Improve repo management with moon](https://blog.logrocket.com/improve-repo-management-moon/) by [James Sinkala](https://jamesinkala.com/)\n\n## Comparison\n\n### Turborepo\n\nAt a high-level, Turborepo and moon seem very similar as they both claim to be task runners. They\nboth support incremental builds, content/smart hashing, local and remote caching1,\nparallel execution, and everything else you'd expect from a task runner. But that's where the\nsimilarities stop, because in the end, Turborepo is nothing more than a `package.json` scripts\norchestrator with a caching layer. While moon also supports this, it\n[aims to be far more](#unique-features) with a heavy focus on the developer experience.\n\nIn the next section, we'll be talking about a few key areas that we deem important to consumers. If\nyou'd prefer a more granular comparison, jump down to the [comparison tables](#comparison-tables).\n\n#### Configuration\n\nTurborepo only supports the Node.js ecosystem, so implicitly uses a conventions based approach. It provides very little to no configuration for customizing Turborepo to your needs.\n\nmoon is language agnostic, with initial support for Node.js and its ecosystem. Because of this, moon provides a ton of configuration for customizing moon to your needs. It prefers a configuration over conventions approach, as every repository is different.\n\n#### Projects\n\nTurborepo infers projects from `package.json` workspaces, and does not support non-JavaScript based projects.\n\nmoon requires projects to be defined in `.moon/workspace.yml`, and supports any programming language2.\n\n#### Tasks\n\nTurborepo requires `package.json` scripts to be defined for every project. This results in the same scripts being repeated constantly.\n\nmoon avoids this overhead by using [task inheritance](#unique-features). No more repetition.\n\n#### CI\n\nEach pipeline in `turbo.json` must be individually ran as a step in CI. Scripts not configured as pipeline tasks are never ran.\n\nmoon runs every task automatically using `moon ci`, which also supports parallelism/sharding.\n\n#### Long-term\n\nTurborepo is in the process of being rewritten in Rust, with its codebase being shared and coupled with the new Turbopack library, a Rust based bundler. Outside of this, there are no publicly available plans for Turborepo's future.\n\nmoon plans to be so much more than a task runner, with one such facet being a repository management tool. This includes code ownership, dependency management and auditing, repository linting, in-repo secrets, and anything else we deem viable. We also plan to support additional languages as first-class citizens within our toolchain.\n\n- Turborepo remote caching is powered by Vercel. moon provides its own paid service.\n\n- moon projects may run commands for any language, but not all languages are supported in the toolchain.\n\n### Lerna\n\nLerna was a fantastic tool that helped the JavaScript ecosystem grow and excelled at package\nversioning and publishing (and still does), but it offered a very rudimentary task runner. While\nLerna was able to run scripts in parallel, it wasn't the most efficient, as it did not support\ncaching, hashing, or performant scheduling.\n\nHowever, the reason Lerna is not compared in-depth, is that Lerna was unowned and unmaintained for\nquite some time, and has recently fallen under the Nx umbrella. Lerna is basically Nx lite now.\n\n## Comparison tables\n\n Supported  Partially supported  Similarly supported  Not supported\n\n### Workspace\n\nmoon (11) nx (11) turborepo (8)\n\nCore/CLI written in Rust Node.js & Rust (for hot paths) Rust / Go\n\nPlugins written in WASM (any compatible language) TypeScript \n\nWorkspace configured with `.moon/workspace.yml` `nx.json` `turbo.json`\n\nProject list configured in `.moon/workspace.yml` `workspace.json` / `package.json` workspaces `package.json` workspaces\n\nRepo / folder structure loose loose loose\n\nIgnore file support  via `hasher.ignorePatterns`  .nxignore  via `--ignore`\n\nSupports dependencies inherited by all tasks  via `implicitDeps`  via `targetDefaults` \n\nSupports inputs inherited by all tasks  via `implicitInputs`  via `implicitDependencies`  via `globalDependencies`\n\nSupports tasks inherited by all projects   via `plugins` \n\nIntegrates with a version control system  git  git  git\n\nSupports scaffolding / generators   \n\n### Toolchain\n\nmoon (6) nx (2) turborepo (2)\n\nSupported languages in task runner All languages available on `PATH` All languages via plugins. OOTB TS/JS, existing plugins for Rust, Go, Dotnet and more JavaScriptTypeScript via `package.json` scripts\n\nSupported dependency managers npm, pnpm, yarn, bun npm, pnpm, yarn npm, pnpm, yarn\n\nSupported toolchain languages (automatic dev envs) Bun, Deno, Node.js, Rust  \n\nHas a built-in toolchain   \n\nDownloads and installs languages (when applicable)   \n\nConfigures explicit language/dependency manager versions   \n\n### Projects\n\nmoon (8) nx (5) turborepo (2)\n\nDependencies on other projects  implicit from `package.json` or explicit in `moon.yml`  implicit from `package.json` or explicit in `project.json` and code imports/exports  implicit from `package.json`\n\nOwnership metadata   \n\nPrimary programming language   \n\nProject type (app, lib, etc)  app, lib, tool, automation, config, scaffold  app, lib \n\nProject tech stack  frontend, backend, infra, systems  \n\nProject-level file groups   via `namedInputs` \n\nProject-level tasks   \n\nTags and scopes (boundaries)  native for all languages  boundaries via ESLint (TS and JS), tags for filtering for all languages \n\n### Tasks\n\nmoon (24) nx (24) turborepo (17)\n\nKnown as tasks targets tasks\n\nDefines tasks in `moon.yml` or `package.json` scripts `nx.json`, `project.json` or `package.json` scripts `package.json` scripts\n\nRun a single task with `moon run project:task` `nx target project` or `nx run project:target` `turbo run task --filter=project`\n\nRun multiple tasks with `moon run :task` or `moon run a:task b:task` or `moon check` `nx run-many -t task1 task2 task3` `turbo run task` or `turbo run a b c`\n\nRun tasks based on a query/filter `moon run :task --query \"...\"` `nx run-many -t task -p \"tag:..\" -p \"dir/*\" -p \"name*\" -p \"!negation\"` \n\nCan define tasks globally  with `.moon/tasks/all.yml`  with `targetDefaults` \n\nMerges or overrides global tasks   \n\nRuns a command with args    within the script\n\nRuns commands from project or workspace root current working directory, or wherever desired via config project root\n\nSupports pipes, redirects, etc, in configured tasks  encapsulated in a file  within the executor or script  within the script\n\nDependencies on other tasks  via `deps`  via `dependsOn`  via `dependsOn`\n\nCan provide extra params for task dependencies   \n\nCan mark a task dependency as optional  via `optional`  \n\nCan depend on arbitrary or unrelated tasks    dependent projects only\n\nRuns task dependencies in parallel   \n\nCan run task dependencies in serial   via `parallel=1`  via `concurrency=1`\n\nFile groups   via `namedInputs` \n\nEnvironment variables  via `env`, `envFile`  automatically via `.env` files and/or inherited from shell  within the script\n\nInputs  files, globs, env vars  files, globs, env vars, runtime  files, globs\n\nOutputs  files, globs  files, globs  files, globs\n\nOutput logging style  via `outputStyle`  via `--output-style`  via `outputMode`\n\nCustom hash inputs   via `runtime` inputs  via `globalDependencies`\n\nToken substitution  token functions and variable syntax  `{workspaceRoot}`, `{projectRoot}`, `{projectName}`, arbitrary patterns `namedInputs` \n\nConfiguration presets  via task `extends`  via `configurations` \n\nConfigurable options   \n\n### Task runner\n\nmoon (9) nx (11) turborepo (7)\n\nKnown as action pipeline task runner pipeline\n\nGenerates a dependency graph   \n\nRuns in topological order   \n\nAutomatically retries failed tasks   when flakiness detected on Nx Cloud \n\nCaches task outputs via a unique hash   \n\nCan customize the underlying runner   \n\nCan profile running tasks  cpu, heap  cpu  cpu\n\nCan generate run reports   free in Nx Cloud & GitHub App Comment \n\nContinuous integration (CI) support   \n\nContinuous deployment (CD) support   via `nx release` \n\nRemote / cloud caching and syncing  with Bazel REAPI (free / paid)  with nx.app Nx Cloud (free / paid)  requires a Vercel account (free)\n\n### Generator\n\nmoon (14) nx (14) turborepo (11)\n\nKnown as generator generator generator\n\nTemplates are configured with a schema  via `template.yml`  \n\nTemplate file extensions (optional)  .tera, .twig  fully under user control, built in utility for .ejs templates  .hbs\n\nTemplate files support frontmatter   fully under user control \n\nCreates/copies files to destination   \n\nUpdates/merges with existing files  JSON/YAML only  via TypeScript/JavaScript plugins \n\nRenders with a template engine  via Tera  fully under user control, built in utility for .ejs templates  via Handlebars\n\nVariable interpolation in file content   \n\nVariable interpolation in file paths   \n\nCan define variable values via interactive prompts   using JSON schema \n\nCan define variable values via command line args   using JSON schema \n\nSupports dry runs   \n\nSupports render helpers, filters, and built-ins   \n\nGenerators can compose other generators  via `extends`  fully under user control, author in TypeScript/JavaScript  using JavaScript\n\n### Other systems\n\nmoon (6) nx (0) turborepo (1)\n\nCan send webhooks for critical pipeline events   \n\nGenerates run reports with granular stats/metrics   \n\nCan define and manage code owners   \n\nCan generate a `CODEOWNERS` file   \n\nCan define and manage VCS (git) hooks   \n\nSupports git worktrees   \n\n### JavaScript ecosystem\n\nmoon (10) nx (1) turborepo (0)\n\nWill automatically install node modules when lockfile changes   \n\nCan automatically dedupe when lockfile changes   \n\nCan alias `package.json` names for projects   \n\nCan add `engines` constraint to root `package.json`   \n\nCan sync version manager configs (`.nvmrc`, etc)   \n\nCan sync cross-project dependencies to `package.json`   \n\nCan sync project references to applicable `tsconfig.json`   \n\nCan auto-create missing `tsconfig.json`   \n\nCan sync dependencies as `paths` to `tsconfig.json`   \n\nCan route `outDir` to a shared cached in `tsconfig.json`   \n\n### Docker integration\n\nmoon (3) nx (2) turborepo (2)\n\nEfficient scaffolding for Dockerfile layer caching   via custom generator \n\nAutomatic production-only dependency installation   generated automatically by first party plugin \n\nEnvironment pruning to reduce image/container sizes   \n\n## /docs/concepts\n\nSource: https://moonrepo.dev/docs/concepts\n\n- [Home](/)\n- [Concepts](/docs/concepts)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Concepts\n\n[ Cachemoon's able to achieve high performance and blazing speeds by implementing a cache that's powered by](/docs/concepts/cache)\n\n[ File groupsFile groups are a mechanism for grouping similar types of files and environment variables within a](/docs/concepts/file-group)\n\n[ File patternsGlobs](/docs/concepts/file-pattern)\n\n[ Query languagemoon supports an integrated query language, known as MQL, that can be used to filter and select](/docs/concepts/query-lang)\n\n[ ProjectsA project is a library, application, package, binary, tool, etc, that contains source files, test](/docs/concepts/project)\n\n[ TargetsA target is a compound identifier that pairs a scope to a task,](/docs/concepts/target)\n\n[ TasksTasks are commands that are ran in the context of a project. Underneath the hood, a](/docs/concepts/task)\n\n[ Task inheritanceUnlike other task runners that require the same tasks to be repeatedly defined for every project,](/docs/concepts/task-inheritance)\n\n[ TokensTokens are variables and functions that can be used by command,](/docs/concepts/token)\n\n[ ToolchainThe toolchain is an internal layer for downloading, installing, and managing tools (languages,](/docs/concepts/toolchain)\n\n[ WorkspaceA workspace is a directory that contains projects, manages a toolchain,](/docs/concepts/workspace)\n\n[Migrate to moon](/docs/migrate-to-moon)\n\n[Cache](/docs/concepts/cache)\n\n## /docs/concepts/cache\n\nSource: https://moonrepo.dev/docs/concepts/cache\n\n# Cache\n\nmoon's able to achieve high performance and blazing speeds by implementing a cache that's powered by\nour own unique smart hashing layer. All cache is stored in `.moon/cache`, relative from the\nworkspace root (be sure to git ignore this folder).\n\n## Hashing\n\nIncremental builds are possible through a concept known as hashing, where in multiple sources are\naggregated to generate a unique hash. In the context of moon, each time a target is ran we generate\na hash, and if this hash already exists we abort early (cache hit), otherwise we continue the run\n(cache miss).\n\nThe tiniest change may trigger a different hash, for example, changing a line of code (when an\ninput), or updating a package version, so don't worry if you see a lot of hashes.\n\nOur smart hashing currently takes the following sources into account:\n\n- Command (`command`) being ran and its arguments (`args`).\n\n- Input sources (`inputs`).\n\n- Output targets (`outputs`).\n\n- Environment variables (`env`).\n\n- Dependencies between projects (`dependsOn`) and tasks (`deps`).\n\n- For Deno tasks: Deno version.\n\n- `deno.json`/`deps.ts` imports, import maps, and scopes.\n\n- `tsconfig.json` compiler options (when applicable).\n\n- For Bun and Node.js tasks: Bun/Node.js version.\n\n- `package.json` dependencies (including development and peer).\n\n- `tsconfig.json` compiler options (when applicable).\n\ncaution\n\nBe aware that greedy inputs (`**/*`, the default) will include everything in the target directory\nas a source. We do our best to filter out VCS ignored files, and `outputs` for the current task, but\nfiles may slip through that you don't expect. We suggest using explicit `inputs` and routinely\nauditing the hash files for accuracy!\n\n## Archiving & hydration\n\nOn top of our hashing layer, we have another concept known as archiving, where in we create a\ntarball archive of a task's outputs and store it in `.moon/cache/outputs`. These are akin to build\nartifacts.\n\nWhen we encounter a cache hit on a hash, we trigger a mechanism known as hydration, where we\nefficiently unpack an existing tarball archive into a task's outputs. This can be understood as a\ntimeline, where every point in time will have its own hash + archive that moon can play back.\n\nFurthermore, if we receive a cache hit on the hash, and the hash is the same as the last run, and\noutputs exist, we exit early without hydrating and assume the project is already hydrated. In the\nterminal, you'll see a message for \"cached\".\n\n## File structure\n\nThe following diagram outlines our cache folder structure and why each piece exists.\n\n```\n.moon/cache/\t# Stores hash manifests of every ran task. Exists purely for debugging purposes.\thashes/\t\t# Contents includes all sources used to generate the hash.\t\t.json\t# Stores `tar.gz` archives of a task's outputs based on its generated hash.\toutputs/\t\t.tar.gz\t# State information about anything and everything within moon. Toolchain,\t# dependencies, projects, running targets, etc.\tstates/\t\t# Files at the root pertain to the entire workspace.\t\t.json\t\t# Files for a project are nested within a folder by the project name.\n/\t\t\t# Informational snapshot of the project, its tasks, and its configs.\t\t\t# Can be used at runtime by tasks that require this information.\t\t\tsnapshot.json\t\t\t/\t\t\t\t# Contents of the child process, including the exit code and\t\t\t\t# unique hash that is referenced above.\t\t\t\tlastRun.json\t\t\t\t# Outputs of last run target.\t\t\t\tstderr.log\t\t\t\tstdout.log\n```\n\n## /docs/concepts/file-group\n\nSource: https://moonrepo.dev/docs/concepts/file-group\n\n# File groups\n\nFile groups are a mechanism for grouping similar types of files and environment variables within a\nproject using [file glob patterns or literal file paths](/docs/concepts/file-pattern). These groups are then used\nby [tasks](/docs/concepts/task) to calculate functionality like cache computation, affected files since last\nchange, deterministic builds, and more.\n\n## Configuration\n\nFile groups can be configured per project through [`moon.yml`](/docs/config/project), or for many\nprojects through [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n### Token functions\n\nFile groups can be referenced in [tasks](/docs/concepts/task) using [token functions](/docs/concepts/token). For example, the\n`@group(name)` token will expand to all paths configured in the `sources` file group.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'vite build'    inputs:      - '@group(sources)'\n```\n\n## Inheritance and merging\n\nWhen a file group of the same name exists in both [configuration files](#configuration), the\nproject-level group will override the workspace-level group, and all other workspace-level groups\nwill be inherited as-is.\n\nA primary scenario in which to define file groups at the project-level is when you want to\noverride file groups defined at the workspace-level. For example, say we want to override the\n`sources` file group because our source folder is named \"lib\" and not \"src\", we would define our\nfile groups as followed.\n\n.moon/tasks/all.yml\n\n```\nfileGroups:  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*.test.*'    - '**/__tests__/**/*'\n```\n\nmoon.yml\n\n```\nfileGroups:  # Overrides global  sources:    - 'lib/**/*'    - 'types/**/*'  # Inherited as-is  tests:    - 'tests/**/*.test.*'    - '**/__tests__/**/*'\n```\n\n## /docs/concepts/file-pattern\n\nSource: https://moonrepo.dev/docs/concepts/file-pattern\n\n# File patterns\n\n## Globs\n\nGlobs in moon are [Rust-based globs](https://github.com/olson-sean-k/wax), not JavaScript-based.\nThis may result in different or unexpected results. The following guidelines must be met when using\nglobs:\n\n- Must use forward slashes (`/`) for path separators, even on Windows.\n\n- Must not start with or use any relative path parts, `.` or `..`.\n\n### Supported syntax\n\n- `*` - Matches zero or more characters, but does not match the `/` character. Will attempt to match the longest possible text (eager).\n\n- `$` - Like `*`, but will attempt to match the shortest possible text (lazy).\n\n- `**` - Matches zero or more directories.\n\n- `?` - Matches exactly one character, but not `/`.\n\n- `[abc]` - Matches one case-sensitive character listed in the brackets.\n\n- `[!xyz]` - Like the above, but will match any character not listed.\n\n- `[a-z]` - Matches one case-sensitive character in range in the brackets.\n\n- `[!x-z]` - Like the above, but will match any character not in range.\n\n- `{glob,glob}` - Matches one or more comma separated list of sub-glob patterns.\n\n- `` - Matches a sub-glob within a defined bounds.\n\n- `!` - At the start of a pattern, will negate previous positive patterns.\n\n### Examples\n\n```\nREADME.{md,mdx,txt}src/**/*tests/**/*.?js!**/__tests__/**/*logs/--.log\n```\n\n## Project relative\n\nWhen configuring [`fileGroups`](/docs/config/project#filegroups), [`inputs`](/docs/config/project#inputs),\nand [`outputs`](/docs/config/project#outputs), all listed file paths and globs are relative from the\nproject root they will be ran in. They must not traverse upwards with `..`.\n\n```\n# Validsrc/**/*./src/**/*package.json# Invalid../utils\n```\n\n## Workspace relative\n\nWhen configuring [`fileGroups`](/docs/config/project#filegroups), [`inputs`](/docs/config/project#inputs),\nand [`outputs`](/docs/config/project#outputs), a listed file path or glob can be prefixed with `/` to\nresolve relative from the workspace root, and not the project root.\n\n```\n# In projectpackage.json# In workspace/package.json\n```\n\n## /docs/concepts/project\n\nSource: https://moonrepo.dev/docs/concepts/project\n\n# Projects\n\nA project is a library, application, package, binary, tool, etc, that contains source files, test\nfiles, assets, resources, and more. A project must exist and be configured within a\n[workspace](/docs/concepts/workspace).\n\n## IDs\n\nA project identifier (or name) is a unique resource for locating a project. The ID is explicitly\nconfigured within [`.moon/workspace.yml`](/docs/config/workspace), as a key within the\n[`projects`](/docs/config/workspace#projects) setting, and can be written in camel/kebab/snake case.\nIDs support alphabetic unicode characters, `0-9`, `_`, `-`, `/`, `.`, and must start with a\ncharacter.\n\nIDs are used heavily by configuration and the command line to link and reference everything. They're\nalso a much easier concept for remembering projects than file system paths, and they typically can\nbe written with less key strokes.\n\nLastly, a project ID can be paired with a task ID to create a [target](/docs/concepts/target).\n\n## Aliases\n\nAliases are a secondary approach for naming projects, and can be used as a drop-in replacement for\nstandard names. What this means is that an alias can also be used when configuring dependencies, or\ndefining [targets](/docs/concepts/target).\n\nHowever, the difference between aliases and names is that aliases can not be explicit configured\nin moon. Instead, they are specific to a project's primary programming language, and are inferred\nbased on that context (when enabled in settings). For example, a JavaScript or TypeScript project\nwill use the `name` field from its `package.json` as the alias.\n\nBecause of this, a project can either be referenced by its name or alias, or both. Choose the\npattern that makes the most sense for your company or team!\n\n## Dependencies\n\nProjects can depend on other projects within the [workspace](/docs/concepts/workspace) to build a\n[project graph](/docs/how-it-works/action-graph), and in turn, an action graph for executing\n[tasks](/docs/concepts/task). Project dependencies are divided into 2 categories:\n\n- Explicit dependencies - These are dependencies that are explicitly defined in a project's [`moon.yml`](/docs/config/project) config file, using the [`dependsOn`](/docs/config/project#dependson) setting.\n\n- Implicit dependencies - These are dependencies that are implicitly discovered by moon when scanning the repository. How an implicit dependency is discovered is based on the project's [`language`](/docs/config/project#language) setting, and how that language's ecosystem functions.\n\n## Configuration\n\nProjects can be configured with an optional [`moon.yml`](/docs/config/project) in the project root, or\nthrough the optional workspace-level [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n## /docs/concepts/query-lang\n\nSource: https://moonrepo.dev/docs/concepts/query-lang\n\n# Query language\n\nv1.3.0\n\nmoon supports an integrated query language, known as MQL, that can be used to filter and select\nprojects from the project graph, using an SQL-like syntax. MQL is primarily used by\n[`moon run`](/docs/commands/run) with the `--query` option.\n\n## Syntax\n\n### Comparisons\n\nA comparison (also known as an assignment) is an expression that defines a piece of criteria, and is\na building block of a query. This criteria maps a [field](#fields) to a value, with an explicit\ncomparison operator.\n\n#### Equals, Not equals\n\nThe equals (`=`) and not equals (`!=`) comparison operators can be used for exact value matching.\n\n```\nprojectLayer=library && language!=javascript\n```\n\nYou can also define a list of values using square bracket syntax, that will match against one of the\nvalues.\n\n```\nlanguage=[javascript, typescript]\n```\n\n#### Like, Not like\n\nThe like (`~`) and not like (`!~`) comparison operators can be used for wildcard value matching,\nusing [glob syntax](/docs/concepts/file-pattern#globs).\n\n```\nprojectSource~packages/* && tag!~*-app\n```\n\nLike comparisons can only be used on non-enum fields.\n\n### Conditions\n\nThe `&&` and `||` logical operators can be used to combine multiple comparisons into a condition.\nThe `&&` operator is used to combine comparisons into a logical AND, and the `||` operator is used\nfor logical OR.\n\n```\ntaskToolchain=system || taskToolchain=node\n```\n\nFor readability concerns, you can also use `AND` or `OR`.\n\n```\ntaskToolchain=system OR taskToolchain=node\n```\n\nMixing both operators in the same condition is not supported.\n\n### Grouping\n\nFor advanced queries and complex conditions, you can group comparisons using parentheses to create\nlogical groupings. Groups can also be nested within other groups.\n\n```\nlanguage=javascript && (taskType=test || taskType=build)\n```\n\n## Fields\n\nThe following fields can be used as criteria, and are related to [task tokens](/docs/concepts/token#variables).\n\n### `language`\n\nProgramming language the project is written in, as defined in\n[`moon.yml`](/docs/config/project#language).\n\n```\nlanguage=rust\n```\n\n### `project`\n\nName OR alias of the project.\n\n```\nproject=server\n```\n\n### `projectAlias`\n\nAlias of the project. For example, the `package.json` name.\n\n```\nprojectAlias~@scope/*\n```\n\n### `projectLayer`v1.39.0\n\nThe project layer, as defined in [`moon.yml`](/docs/config/project#layer).\n\n```\nprojectLayer=application\n```\n\n### `projectId`\n\nName of the project, as defined in [`.moon/workspace.yml`](/docs/config/workspace), or `id` in\n[`moon.yml`](/docs/config/project#id).\n\n```\nprojectId=server\n```\n\n### `projectSource`\n\nRelative file path from the workspace root to the project root, as defined in\n[`.moon/workspace.yml`](/docs/config/workspace).\n\n```\nprojectSource~packages/*\n```\n\n### `projectStack`v1.22.0\n\nThe project stack, as defined in [`moon.yml`](/docs/config/project#stack).\n\n```\nprojectStack=frontend\n```\n\n### `tag`\n\nA tag within the project, as defined in [`moon.yml`](/docs/config/project#tags).\n\n```\ntag~react-*\n```\n\n### `task`\n\nID/name of a task within the project.\n\n```\ntask=[build,test]\n```\n\n### `taskToolchain`v1.31.0\n\nThe toolchain a task will run against, as defined in [`moon.yml`](/docs/config/project).\n\n```\ntaskToolchain=node\n```\n\n### `taskType`\n\nThe [type of task](/docs/concepts/task#types), based on its configured settings.\n\n```\ntaskType=build\n```\n\n## /docs/concepts/target\n\nSource: https://moonrepo.dev/docs/concepts/target\n\n# Targets\n\nA target is a compound identifier that pairs a [scope](#common-scopes) to a [task](/docs/concepts/task),\nseparated by a `:`, in the format of `scope:task`.\n\nTargets are used by terminal commands...\n\n```\n$ moon run designSystem:build\n```\n\nAnd configurations for declaring cross-project or cross-task dependencies.\n\n```\ntasks:  build:    command: 'webpack'    deps:      - 'designSystem:build'\n```\n\n## Common scopes\n\nThese scopes are available for both running targets and configuring them.\n\n### By project\n\nThe most common scope is the project scope, which requires the name of a project, as defined in\n[`.moon/workspace.yml`](/docs/config/workspace). When paired with a task name, it will run a specific\ntask from that project.\n\n```\n# Run `lint` in project `app`$ moon run app:lint\n```\n\n### By tagv1.4.0\n\nAnother way to target projects is with the tag scope, which requires the name of a tag prefixed with\n`#`, and will run a specific task in all projects with that tag.\n\n```\n# Run `lint` in projects with the tag `frontend`$ moon run '#frontend:lint'\n```\n\ncaution\n\nBecause `#` is a special character in the terminal (is considered a comment), you'll need to wrap\nthe target in quotes, or escape it like so `\\#`.\n\n## Run scopes\n\nThese scopes are only available on the command line when running tasks with `moon run` or `moon ci`.\n\n### All projects\n\nFor situations where you want to run a specific target in all projects, for example `lint`ing, you\ncan utilize the all projects scope by omitting the project name from the target: `:lint`.\n\n```\n# Run `lint` in all projects$ moon run :lint\n```\n\n### Closest project `~`v1.33.0\n\nIf you are within a project folder, or an arbitrarily nested folder, and want to run a task in the\nclosest project (traversing upwards), the `~` scope can be used.\n\n```\n# Run `lint` in the closest project$ moon run ~:lint\n```\n\n## Config scopes\n\nThese scopes are only available when configuring a task.\n\n### Dependencies `^`\n\nWhen you want to include a reference for each project [that's depended on](/docs/concepts/project#dependencies),\nyou can utilize the `^` scope. This will be expanded to all depended on projects. If you do not\nwant all projects, then you'll need to explicitly define them.\n\nmoon.yml\n\n```\ndependsOn:  - 'apiClients'  - 'designSystem'# Configured astasks:  build:    command: 'webpack'    deps:      - '^:build'# Resolves totasks:  build:    command: 'webpack'    deps:      - 'apiClients:build'      - 'designSystem:build'\n```\n\n### Self `~`\n\nWhen referring to another task within the current project, you can utilize the `~` scope, or omit\nthe `~:` prefix altogether, which will be expanded to the current project's name. This is useful for\nsituations where the name is unknown, for example, when configuring\n[`.moon/tasks/all.yml`](/docs/config/tasks), or if you just want a shortcut!\n\n.moon/tasks/all.yml\n\n```\n# Configured astasks:  lint:    command: 'eslint'    deps:      - '~:typecheck'      # OR      - 'typecheck'  typecheck:    command: 'tsc'# Resolves to (assuming project is \"foo\")tasks:  lint:    command: 'eslint'    deps:      - 'foo:typecheck'  typecheck:    command: 'tsc'\n```\n\n## /docs/concepts/task\n\nSource: https://moonrepo.dev/docs/concepts/task\n\n# Tasks\n\nTasks are commands that are ran in the context of a [project](/docs/concepts/project). Underneath the hood, a\ntask is simply a binary or system command that is ran as a child process.\n\n## IDs\n\nA task identifier (or name) is a unique resource for locating a task within a project. The ID is\nexplicitly configured as a key within the [`tasks`](/docs/config/project#tasks) setting, and can be\nwritten in camel/kebab/snake case. IDs support alphabetic unicode characters, `0-9`, `_`, `-`, `/`,\n`.`, and must start with a character.\n\nA task ID can be paired with a scope to create a [target](/docs/concepts/target).\n\n## Types\n\nTasks are grouped into 1 of the following types based on their configured parameters.\n\n- Build - Task generates one or many artifacts, and is derived from the [`outputs`](/docs/config/project#outputs) setting.\n\n- Run - Task runs a one-off, long-running, or never-ending process, and is derived from the [`local`](/docs/config/project#local) setting.\n\n- Test - Task asserts code is correct and behaves as expected. This includes linting, typechecking, unit tests, and any other form of testing. Is the default.\n\n## Modes\n\nAlongside types, tasks can also grouped into a special mode that provides unique handling within the\naction graph and pipelines.\n\n### Local only\n\nTasks either run locally, in CI (continuous integration pipelines), or both. For tasks that should\nonly be ran locally, for example, development servers and watchers, we provide a mechanism for\nmarking a task as local only. When enabled, caching is turned off, the task will not run in CI,\nterminal output is not captured, and the task is marked as [persistent](#persistent).\n\nTo mark a task as local only, enable the [`local`](/docs/config/project#local) setting.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev-server'    preset: 'server'\n```\n\n### Internal onlyv1.23.0\n\nInternal tasks are tasks that are not meant to be ran explicitly by the user (via\n[`moon check`](/docs/commands/check) or [`moon run`](/docs/commands/run)), but are used internally as\ndependencies of other tasks. Additionally, internal tasks are not displayed in a project's tasks\nlist, but can be inspected with [`moon task`](/docs/commands/task).\n\nTo mark a task as internal, enable the [`options.internal`](/docs/config/project#internal) setting.\n\nmoon.yml\n\n```\ntasks:  prepare:    command: 'intermediate-step'    options:      internal: true\n```\n\n### Interactivev1.12.0\n\nTasks that need to interact with the user via terminal prompts are known as interactive tasks.\nBecause interactive tasks require stdin, and it's not possible to have multiple parallel running\ntasks interact with stdin, we isolate interactive tasks from other tasks in the action graph. This\nensures that only 1 interactive task is ran at a time.\n\nTo mark a task as interactive, enable the [`options.interactive`](/docs/config/project#interactive)\nsetting.\n\nmoon.yml\n\n```\ntasks:  init:    command: 'init-app'    options:      interactive: true\n```\n\n### Persistentv1.6.0\n\nTasks that never complete, like servers and watchers, are known as persistent tasks. Persistent\ntasks are typically problematic when it comes to dependency graphs, because if they run in the\nmiddle of the graph, subsequent tasks will never run because the persistent task never completes!\n\nHowever in moon, this is a non-issue, as we collect all persistent tasks within the action graph and\nrun them last as a batch. This is perfect for a few reasons:\n\n- All persistent tasks are ran in parallel, so they don't block each other.\n\n- Running both the backend API and frontend webapp in parallel is a breeze.\n\n- Dependencies of persistent tasks are guaranteed to have ran and completed.\n\nTo mark a task as persistent, enable the [`local`](/docs/config/project#local) or\n[`options.persistent`](/docs/config/project#persistent) settings.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev-server'    preset: 'server'    # OR    options:      persistent: true\n```\n\n## Configuration\n\nTasks can be configured per project through [`moon.yml`](/docs/config/project), or for many projects\nthrough [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n### Commands vs Scripts\n\nA task is either a command or script, but not both. So what's the difference exactly? In the context\nof a moon task, a command is a single binary execution with optional arguments, configured with the\n[`command`](/docs/config/project#command) and [`args`](/docs/config/project#args) settings (which both\nsupport a string or array). While a script is one or many binary executions, with support for pipes\nand redirects, and configured with the [`script`](/docs/config/project#script) setting (which is only a\nstring).\n\nA command also supports merging during task inheritance, while a script does not and will always\nreplace values. Refer to the table below for more differences between the 2.\n\nCommand Script\n\nConfigured as string, array string\n\nInheritance merging  via `mergeArgs` option  always replaces\n\nAdditional args  via `args` setting \n\nPassthrough args (from CLI)  \n\nMultiple commands (with `&&` or `;`)  \n\nPipes, redirects, etc  \n\nAlways ran in a shell  \n\nCustom platform/toolchain  \n\n[Token](/docs/concepts/token) functions and variables  \n\n### Inheritance\n\nView the official documentation on [task inheritance](/docs/concepts/task-inheritance).\n\n## /docs/concepts/task-inheritance\n\nSource: https://moonrepo.dev/docs/concepts/task-inheritance\n\n# Task inheritance\n\nUnlike other task runners that require the same tasks to be repeatedly defined for every project,\nmoon uses an inheritance model where tasks can be defined once at the workspace-level, and are then\ninherited by many or all projects.\n\nWorkspace-level tasks (also known as global tasks) are defined in [`.moon/tasks/**/*.yml`](/docs/config/tasks),\nand are inherited by based on conditions. However, projects are able to include, exclude, or rename\ninherited tasks using the [`workspace.inheritedTasks`](/docs/config/project#inheritedtasks) in\n[`moon.yml`](/docs/config/project).\n\n## Conditional inheritance\n\nTask inheritance is powered by the [`inheritedBy`](/docs/config/tasks#inheritedby) setting in global\ntask configurations (those in [`.moon/tasks/**/*`](/docs/config/tasks)). This setting defines conditions that a\nproject must meet in order for inheritance to occur. If the setting is not defined, or no conditions\nare defined, the configuration is inherited by all projects.\n\nThe following conditions are supported:\n\n- `file`, `files` - Inherit for projects that contain specific files.\n\n- `language`, `languages` - Inherit for projects that belong to specific [`language`](/docs/config/project#language)s.\n\n- `layer`, `layers` - Inherit for projects that belong to specific [`layer`](/docs/config/project#layer)s.\n\n- `stack`, `stacks` - Inherit for projects that belong to specific [`stack`](/docs/config/project#stack)s.\n\n- `tag`, `tags` - Inherit for projects that have specific [`tags`](/docs/config/project#tags).\n\n- `toolchain`, `toolchains` - Inherit for projects that belong to specific [`toolchains`](/docs/config/project#toolchains).\n\nOne or many conditions can be defined, and all conditions must be met for inheritance to occur. For\nexample, the following configuration will only be inherited by Node.js frontend libraries.\n\n.moon/tasks/node-frontend-library.yml\n\n```\ninheritedBy:  toolchain: 'node'  stack: 'frontend'  layer: 'library'\n```\n\nEach condition supports a single value or an array of values. For example, the previous example\ncould be rewritten to inherit for both Node.js or Deno frontend libraries.\n\n.moon/tasks/js-frontend-library.yml\n\n```\ninheritedBy:  toolchains: ['node', 'deno']  stack: 'frontend'  layer: 'library'\n```\n\n### Clauses\n\nThe `tags` and `toolchains` conditions support special clauses `and`, `or` (the default), and `not`\nfor matching more complex scenarios.\n\n```\ninheritedBy:  toolchains:    or: ['javascript', 'typescript']    not: ['ruby']  layer: 'library'\n```\n\n## Merge strategies\n\nWhen a [global task](/docs/config/tasks#tasks) and [local task](/docs/config/project#tasks) of the same\nname exist, they are merged into a single task. To accomplish this, one of many\n[merge strategies](/docs/config/project#options) can be used.\n\nMerging is applied to the parameters [`args`](/docs/config/project#args),\n[`deps`](/docs/config/project#deps), [`env`](/docs/config/project#env-1),\n[`inputs`](/docs/config/project#inputs), [`outputs`](/docs/config/project#outputs), and\n[`toolchains`](/docs/config/project#toolchains), using the [`merge`](/docs/config/project#merge),\n[`mergeArgs`](/docs/config/project#mergeargs), [`mergeDeps`](/docs/config/project#mergedeps),\n[`mergeEnv`](/docs/config/project#mergeenv), [`mergeInputs`](/docs/config/project#mergeinputs),\n[`mergeOutputs`](/docs/config/project#mergeoutputs) and\n[`mergeToolchains`](/docs/config/project#mergetoolchains) options respectively. Each of these options\nsupport one of the following strategy values.\n\n- `append` (default) - Values found in the local task are merged after the values found in the global task. For example, this strategy is useful for toggling flag arguments.\n\n- `prepend` - Values found in the local task are merged before the values found in the global task. For example, this strategy is useful for applying option arguments that must come before positional arguments.\n\n- `preserve` - Preserve the original global task values. This should rarely be used, but exists for situations where an inheritance chain is super long and complex, but we simply want to the base values. v1.29.0\n\n- `replace` - Values found in the local task entirely replaces the values in the global task. This strategy is useful when you need full control.\n\nAll 3 of these strategies are demonstrated below, with a somewhat contrived example, but you get the\npoint.\n\n```\n# Globaltasks:  build:    command:      - 'webpack'      - '--mode'      - 'production'      - '--color'    deps:      - 'designSystem:build'    inputs:      - '/webpack.config.js'    outputs:      - 'build/'# Localtasks:  build:    args: '--no-color --no-stats'    deps:      - 'reactHooks:build'    inputs:      - 'webpack.config.js'    options:      mergeArgs: 'append'      mergeDeps: 'prepend'      mergeInputs: 'replace'# Merged resulttasks:  build:    command:      - 'webpack'      - '--mode'      - 'production'      - '--color'      - '--no-color'      - '--no-stats'    deps:      - 'reactHooks:build'      - 'designSystem:build'    inputs:      - 'webpack.config.js'    outputs:      - 'build/'    options:      mergeArgs: 'append'      mergeDeps: 'prepend'      mergeInputs: 'replace'\n```\n\n## /docs/concepts/token\n\nSource: https://moonrepo.dev/docs/concepts/token\n\n# Tokens\n\nTokens are variables and functions that can be used by [`command`](/docs/config/project#command),\n[`args`](/docs/config/project#args), [`env`](/docs/config/project#env) (>= v1.12),\n[`inputs`](/docs/config/project#inputs), and [`outputs`](/docs/config/project#outputs) when configuring a\ntask. They provide a way of accessing file group paths, referencing values from other task fields,\nand referencing metadata about the project and task itself.\n\n## Functions\n\nA token function is labeled as such as it takes a single argument, starts with an `@`, and is\nformatted as `@name(arg)`. The following token functions are available, grouped by their\nfunctionality.\n\ncaution\n\nToken functions must be the only content within a value, as they expand to multiple files. When\nused in an `env` value, multiple files are joined with a comma (`,`).\n\n### File groups\n\nThese functions reference file groups by name, where the name is passed as the argument.\n\n### `@group`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@group(file_group)` token is a standard token that will be replaced with the file group items\nas-is, for both file paths and globs. This token merely exists for reusability purposes.\n\n```\nfileGroups:  storybook:    - '.storybook/**/*'    - 'src/**/*'    - '**/*.stories.*'# Configured astasks:  build:    command: 'build-storybook'    inputs:      - '@group(storybook)'  start:    command: 'start-storybook'    inputs:      - '@group(storybook)'# Resolves totasks:  build:    command: 'build-storybook'    inputs:      - '/path/to/project/.storybook/**/*'      - '/path/to/project/src/**/*'      - '/path/to/project/**/*.stories.*'  start:    command: 'start-storybook'    inputs:      - '/path/to/project/.storybook/**/*'      - '/path/to/project/src/**/*'      - '/path/to/project/**/*.stories.*'\n```\n\n### `@dirs`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@dirs(file_group)` token will be replaced with an expanded list of directory paths, derived\nfrom the file group of the same name. If a glob pattern is detected within the file group, it will\naggregate all directories found.\n\nwarning\n\nThis token walks the file system to verify each directory exists, and filters out those that don't.\nIf using within `outputs`, you're better off using [`@group`](#group) instead.\n\n```\nfileGroups:  lintable:    - 'src'    - 'tests'    - 'scripts'    - '*.config.js'# Configured astasks:  lint:    command: 'eslint @dirs(lintable) --color'    inputs:      - '@dirs(lintable)'# Resolves totasks:  lint:    command:      - 'eslint'      - 'src'      - 'tests'      - 'scripts'      - '--color'    inputs:      - '/path/to/project/src'      - '/path/to/project/tests'      - '/path/to/project/scripts'\n```\n\n### `@files`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@files(file_group)` token will be replaced with an expanded list of file paths, derived from\nthe file group of the same name. If a glob pattern is detected within the file group, it will\naggregate all files found.\n\nwarning\n\nThis token walks the file system to verify each file exists, and filters out those that don't. If\nusing within `outputs`, you're better off using [`@group`](#group) instead.\n\n```\nfileGroups:  config:    - '*.config.js'    - 'package.json'# Configured astasks:  build:    command: 'webpack build @files(config)'    inputs:      - '@files(config)'# Resolves totasks:  build:    command:      - 'webpack'      - 'build'      - 'babel.config.js'      - 'webpack.config.js'      - 'package.json'    inputs:      - '/path/to/project/babel.config.js'      - '/path/to/project/webpack.config.js'      - '/path/to/project/package.json'\n```\n\n### `@globs`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@globs(file_group)` token will be replaced with the list of glob patterns as-is, derived from\nthe file group of the same name. If a non-glob pattern is detected within the file group, it will be\nignored.\n\n```\nfileGroups:  tests:    - 'tests/**/*'    - '**/__tests__/**/*'# Configured astasks:  test:    command: 'jest --testMatch @globs(tests)'    inputs:      - '@globs(tests)'# Resolves totasks:  test:    command:      - 'jest'      - '--testMatch'      - 'tests/**/*'      - '**/__tests__/**/*'    inputs:      - '/path/to/project/tests/**/*'      - '/path/to/project/**/__tests__/**/*'\n```\n\n### `@root`\n\nUsable in `args`, `env`, `inputs`, and `outputs`.\n\nThe `@root(file_group)` token will be replaced with the lowest common directory, derived from the\nfile group of the same name. If a glob pattern is detected within the file group, it will walk the\nfile system and aggregate all directories found before reducing.\n\n```\nfileGroups:  sources:    - 'src/app'    - 'src/packages'    - 'src/scripts'# Configured astasks:  format:    command: 'prettier --write @root(sources)'    inputs:      - '@root(sources)'# Resolves totasks:  format:    command:      - 'prettier'      - '--write'      - 'src'    inputs:      - '/path/to/project/src'\n```\n\nWhen there's no directies, or too many directories, this function will return the project root\nusing `.`.\n\n### `@envs`v1.21.0\n\nUsable in `inputs`.\n\nThe `@envs(file_group)` token will be replaced with all environment variables that have been\nconfigured in the group of the provided name.\n\n```\nfileGroups:  sources:    - 'src/**/*'    - '$NODE_ENV'# Configured astasks:  build:    command: 'vite build'    inputs:      - '@envs(sources)'# Resolves totasks:  build:    command: 'vite build'    inputs:      - '$NODE_ENV'\n```\n\n### Inputs & outputs\n\n### `@in`\n\nUsable in `script` and `args` only.\n\nThe `@in(index)` token will be replaced with a single path, derived from\n[`inputs`](/docs/config/project#inputs) by numerical index. If a glob pattern is referenced by index,\nthe glob will be used as-is, instead of returning the expanded list of files.\n\n```\n# Configured astasks:  build:    command:      - 'babel'      - '--copy-files'      - '--config-file'      - '@in(1)'      - '@in(0)'    inputs:      - 'src'      - 'babel.config.js'# Resolves totasks:  build:    command:      - 'babel'      - '--copy-files'      - '--config-file'      - 'babel.config.js'      - 'src'    inputs:      - '/path/to/project/src'      - '/path/to/project/babel.config.js'\n```\n\n### `@out`\n\nUsable in `script` and `args` only.\n\nThe `@out(index)` token will be replaced with a single path, derived from\n[`outputs`](/docs/config/project#outputs) by numerical index.\n\n```\n# Configured astasks:  build:    command:      - 'babel'      - '.'      - '--out-dir'      - '@out(0)'    outputs:      - 'lib'# Resolves totasks:  build:    command:      - 'babel'      - '.'      - '--out-dir'      - 'lib'    outputs:      - '/path/to/project/lib'\n```\n\n### Miscellaneous\n\n### `@meta`v1.28.0\n\nUsable in `command`, `script`, `args`, `env`, `inputs`, and `outputs` only.\n\nThe `@meta(key)` token can be used to access project metadata and will be replaced with a value\nderived from [`project`](/docs/config/project#project) in [`moon.yml`](/docs/config/project).\n\nThe top-level fields (like `name` and `description`) will be used as-is (no quotes). If the setting\nis not defined, it will default to nothing or an empty string. For lists of values, they will be\njoined with `,`.\n\nCustom metadata defined in [`project`](/docs/config/project#project) can also be accessed by key, but\nwill return a JSON stringified value. For example, a custom string value of `example` will be\nstringified to `\"example\"` (with quotes).\n\n```\nproject:  title: 'example'  index: 123# Configured astasks:  build:    script: 'build --name @meta(title) --index @meta(index)'# Resolves totasks:  build:    script: 'build --name example --index 123'\n```\n\n## Variables\n\nA token variable is a value that starts with `$` and is substituted to a value derived from the\ncurrent workspace, project, and task. And unlike token functions, token variables can be placed\nwithin content when necessary, and supports multiple variables within the same content.\n\n### Environmentv1.30.0\n\n- `$arch` - The current host architecture, derived from the Rust [`ARCH` constant](https://doc.rust-lang.org/std/env/consts/constant.ARCH.html).\n\n- `$os` - The current operating system, derived from the Rust [`OS` constant](https://doc.rust-lang.org/std/env/consts/constant.OS.html).\n\n- `$osFamily` - The current operating system family, either `unix` or `windows`.\n\n```\n# Configured astasks:  build:    command: 'example --arch $arch'# Resolves totasks:  build:    command:      - 'example'      - '--arch'      - 'aarch64'\n```\n\n### Workspace\n\n- `$workingDir` - The current working directory.\n\n- `$workspaceRoot` - Absolute file path to the workspace root.\n\n```\n# Configured astasks:  build:    command:      - 'example'      - '--cwd'      - '$workspaceRoot'# Resolves totasks:  build:    command:      - 'example'      - '--cwd'      - '/path/to/repo'\n```\n\n### Project\n\nMost values are derived from settings in [`moon.yml`](/docs/config/project). When a setting is not\ndefined, or does not have a config, the variable defaults to \"unknown\" (for enums) or an empty\nstring.\n\n- `$language` Programming language the project is written in, as defined with [`language`](/docs/config/project#language).\n\n- `$project` - ID of the project that owns the currently running task, as defined in [`.moon/workspace.yml`](/docs/config/workspace).\n\n- `$projectAlias` - Alias of the project that owns the currently running task.\n\n- `$projectChannel` - The discussion channel for the project, as defined with [`project.channel`](/docs/config/project#channel). v1.28.0\n\n- `$projectLayer` - The project layer, as defined with [`layer`](/docs/config/project#layer). v1.39.0\n\n- `$projectTitle` - The human-readable name of the project, as defined with [`project.title`](/docs/config/project#title). v1.28.0\n\n- `$projectOwner` - The owner of the project, as defined with [`project.owner`](/docs/config/project#name). v1.28.0\n\n- `$projectRoot` - Absolute file path to the project root.\n\n- `$projectSource` - Relative file path from the workspace root to the project root, as defined in [`.moon/workspace.yml`](/docs/config/workspace).\n\n- `$projectStack` - The stack of the project, as defined with [`stack`](/docs/config/project#stack). v1.22.0\n\n```\n# Configured astasks:  build:    command: 'example debug $language'# Resolves totasks:  build:    command:      - 'example'      - 'debug'      - 'node'\n```\n\n### Task\n\n- `$target` - Fully-qualified target that is currently running.\n\n- `$task` - ID of the task that is currently running. Does not include the project ID.\n\n- `$taskToolchain` - The toolchain that task will run against, as defined in [`moon.yml`](/docs/config/project). v1.31.0\n\n- `$taskType` - The [type of task](/docs/concepts/task#types), based on its configured settings.\n\n```\n# Configured astasks:  build:    command: 'example $target'# Resolves totasks:  build:    command:      - 'example'      - 'web:build'\n```\n\n### Date/Time\n\n- `$date` - The current date in the format of `YYYY-MM-DD`.\n\n- `$datetime` - The current date and time in the format of `YYYY-MM-DD_HH:MM:SS`.\n\n- `$time` - The current time in the format of `HH:MM:SS`.\n\n- `$timestamp` - The current date and time as a UNIX timestamp in seconds.\n\n```\n# Configured astasks:  build:    command: 'example --date $date'# Resolves totasks:  build:    command:      - 'example'      - '--date'      - '2023-03-17'\n```\n\n### VCSv1.30.0\n\n- `$vcsBranch` - The current branch.\n\n- `$vcsRepository` - The repository slug, in the format of `owner/repo`.\n\n- `$vcsRevision` - The current revision (commit, etc).\n\n```\n# Configured astasks:  build:    command: 'example --branch $vcsBranch'# Resolves totasks:  build:    command:      - 'example'      - '--branch'      - 'master'\n```\n\n## /docs/concepts/toolchain\n\nSource: https://moonrepo.dev/docs/concepts/toolchain\n\n# Toolchain\n\nThe toolchain is an internal layer for downloading, installing, and managing tools (languages,\ndependency managers, libraries, and binaries) that are required at runtime. We embrace this approach\nover relying on these tools \"existing\" in the current environment, as it ensures the following\nacross any environment or machine:\n\n- The version and enabled features of a tool are identical.\n\n- Tools are isolated and unaffected by external sources.\n\n- Builds are consistent, reproducible, and hopefully deterministic.\n\nFurthermore, this avoids a developer, pipeline, machine, etc, having to pre-install all the\nnecessary tools, and to keep them in sync as time passes.\n\n## How it works\n\nThe toolchain is built around [proto](/proto), our stand-alone multi-language version manager. moon\nwill piggyback of proto's toolchain found at `~/.proto` and reuse any tools available, or download\nand install them if they're missing.\n\n### Force disabling\n\nThe `MOON_TOOLCHAIN_FORCE_GLOBALS` environment variable can be set to `true` to force moon to use\ntool binaries available on `PATH`, instead of downloading and installing them. This is useful for\npre-configured environments, like CI and Docker.\n\n```\nMOON_TOOLCHAIN_FORCE_GLOBALS=true\n```\n\nAdditionally, the name of one or many tools can be passed to this variable to only force globals for\nthose tools, and use the toolchain for the remaining tools.\n\n```\nMOON_TOOLCHAIN_FORCE_GLOBALS=node,yarn\n```\n\n## Configuration\n\nThe tools that are managed by the toolchain are configured through the\n[`.moon/toolchains.yml`](/docs/config/toolchain) file, but can be overridden in each project with\n[`moon.yml`](/docs/config/project#toolchain).\n\n### Version specification\n\nAs mentioned above, tools within the toolchain are managed by version for consistency across\nmachines. These versions are configured on a per-tool basis in\n[`.moon/toolchains.yml`](/docs/config/toolchain). So what kinds of versions are allowed?\n\n- Full versions - A full version is a semantic version that is fully specified, such as `1.2.3` or `2.0.0-rc.1`. This is the most common way to specify a version, and is preferred to avoid subtle deviations.\n\n- Partial versions - A partial version is a version that is either missing a patch number, minor number, or both, such as `1.2` or `1`. These can also be represented with requirement syntax, such as `^1.2` or `~1`. If using partials, we suggest having a major and minor number to reduce the deviation of versions across machines.\n\n- Aliases - An alias is a human-readable word that maps to a specific version. For example, `latest` or `stable` maps to the latest version of a tool, or `canary` which maps to applicable canary release, or even a completely custom alias like `berry`. Aliases are language specific, are not managed by moon, and are not suggested for use since they can change at any time (or even daily!).\n\nThis sounds great, but how exactly does this work? For full versions and aliases, it's straight\nforward, as the resolved version is used as-is (assuming it's a legitimate version), and can be\nfound at `~/.proto/tools//`.\n\nFor partial versions, we first check locally installed versions for a match, by scanning\n`~/.proto/tools/`. For example, if the requested version is `1.2` and we have `1.2.10`\ninstalled locally, we'll use that version instead of downloading the latest `1.2.*` version.\nOtherwise, we'll download the latest version that matches the partial version, and install it\nlocally.\n\n## /docs/concepts/workspace\n\nSource: https://moonrepo.dev/docs/concepts/workspace\n\n# Workspace\n\nA workspace is a directory that contains [projects](/docs/concepts/project), manages a [toolchain](/docs/concepts/toolchain),\nruns [tasks](/docs/concepts/task), and is coupled with a VCS repository. The root of a workspace is denoted by a\n`.moon` folder.\n\nBy default moon has been designed for monorepos, but can also be used for polyrepos.\n\n## Configuration\n\nConfiguration that's applied to the entire workspace is defined in\n[`.moon/workspace.yml`](/docs/config/workspace).\n\n## /docs/config\n\nSource: https://moonrepo.dev/docs/config\n\n- [Home](/)\n- [Config files](/docs/config)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Config files\n\n[ OverviewSupported formats](/docs/config/overview)\n\n[ .moon/workspaceThe .moon/workspace.yml file configures projects and services in the workspace. This file is](/docs/config/workspace)\n\n[ .moon/extensionsThe .moon/extensions.yml file configures extensions that can hook into pipeline events, or be](/docs/config/extensions)\n\n[ .moon/toolchainsThe .moon/toolchains.yml file configures the toolchain and the workspace development environment.](/docs/config/toolchain)\n\n[ .moon/tasksThe .moon/tasks//* files configures file groups and tasks that are inherited by every project](/docs/config/tasks)\n\n[ moonThe moon.yml configuration file is not required but can be used to define additional metadata](/docs/config/project)\n\n[ templateThe template.yml file configures metadata and variables for a template,](/docs/config/template)\n\n[Workspace](/docs/concepts/workspace)\n\n[Overview](/docs/config/overview)\n\n## /docs/config/extensions\n\nSource: https://moonrepo.dev/docs/config/extensions\n\n# .moon/extensions\n\nv2.0.0\n\nThe `.moon/extensions.yml` file configures extensions that can hook into pipeline events, or be\nexecuted directly. This file is optional.\n\n## `extends`\n\nDefines one or many external `.moon/extensions.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/extensions.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/extensions.yml'\n```\n\ncaution\n\nSettings will be merged recursively for blocks, with values defined in the local configuration\ntaking precedence over those defined in the extended configuration.\n\n## How it works\n\nA mapping of extensions that can be downloaded and executed with the [`moon ext`](/docs/commands/ext)\ncommand. An extension is a WASM plugin, and the location of the WASM file must be defined with the\n`plugin` field, which requires a\n[plugin locator string](/docs/guides/wasm-plugins#configuring-plugin-locations).\n\n.moon/extensions.yml\n\n```\nexample:  plugin: 'file://./path/to/example.wasm'  # or  plugin: 'https://example.com/path/to/example.wasm'\n```\n\nAdditionally, extensions support custom configuration that is passed to the WASM runtime when the\nplugin is instantiated. This configuration is defined by inserting additional fields under the\nextension name, relative to the `plugin` field. Each extension may have its own settings, so refer\nto their documentation for more information.\n\n.moon/extensions.yml\n\n```\nexample:  plugin: 'file://./path/to/example.wasm'  setting1: true  setting2: 'abc'\n```\n\n## Supported extensions\n\nView the [official guide](/docs/guides/extensions) for all built-in extensions.\n\n## /docs/config/overview\n\nSource: https://moonrepo.dev/docs/config/overview\n\n# Overview\n\n## Supported formatsv2.0.0\n\nIn moon, you can define configuration files in a variety of formats. We currently support the\nfollowing:\n\n- JSON (`.json`)\n\n- JSON with comments (`.jsonc`)\n\n- [HCL](https://github.com/hashicorp/hcl) (`.hcl`)\n\n- [Pkl](https://pkl-lang.org/) (`.pkl`)\n\n- [TOML](https://toml.io/en/) (`.toml`)\n\n- YAML (`.yml`, `.yaml`)\n\ninfo\n\nIn moon v1, only YAML (`.yml`) and Pkl (`.pkl`) configuration files were supported.\n\n## Schema validationv1.33.0\n\nWe support schema validation for all configuration files through\n[JSON Schema](https://json-schema.org/), even for formats that are not JSON (depends on tool/editor\nsupport). To reference the schema for a specific configuration file, configure the `$schema`\nproperty at the top of the file with the appropriate schema found at `.moon/cache/schemas`.\n\n- .moon/workspace\n- .moon/extensions\n- .moon/toolchains\n- .moon/tasks\n- moon\n- template\n\n.moon/workspace.yml\n\n```\n$schema: './cache/schemas/workspace.json'\n```\n\n.moon/extensions.yml\n\n```\n$schema: './cache/schemas/extensions.json'\n```\n\n.moon/toolchains.yml\n\n```\n$schema: './cache/schemas/toolchains.json'\n```\n\n.moon/tasks/all.yml\n\n```\n$schema: '../cache/schemas/tasks.json'\n```\n\nmoon.yml\n\n```\n$schema: '../path/to/.moon/cache/schemas/project.json'\n```\n\ntemplate.yml\n\n```\n$schema: '../path/to/.moon/cache/schemas/template.json'\n```\n\ninfo\n\nThe schemas are automatically created when running a task. If they do not exist yet, you can run\n[`moon sync config-schemas`](/docs/commands/sync/config-schemas) to generate them manually.\n\ndanger\n\nIn older versions of moon, the schema files were located at `https://moonrepo.dev/schemas`. These\nURLs are now deprecated, as they do not support dynamic settings. Please update your `$schema`\nreferences to point to the local schema files in `.moon/cache/schemas`.\n\n## /docs/config/project\n\nSource: https://moonrepo.dev/docs/config/project\n\n# moon\n\nThe `moon.yml` configuration file is not required but can be used to define additional metadata\nfor a project, override inherited tasks, and more at the project-level. When used, this file must\nexist in a project's root, as configured in [`projects`](/docs/config/workspace#projects).\n\n## `dependsOn`\n\nExplicitly defines other projects that this project depends on, primarily when generating the\nproject and task graphs. The most common use case for this is building those projects before\nbuilding this one. When defined, this setting requires an array of project names, which are the keys\nfound in the [`projects`](/docs/config/workspace#projects) map.\n\nmoon.yml\n\n```\ndependsOn:  - 'apiClients'  - 'designSystem'\n```\n\nA dependency object can also be defined, where a specific `scope` can be assigned, which accepts\n\"production\" (default), \"development\", \"build\", or \"peer\".\n\nmoon.yml\n\n```\ndependsOn:  - id: 'apiClients'    scope: 'production'  - id: 'designSystem'    scope: 'peer'\n```\n\nLearn more about [implicit and explicit dependencies](/docs/concepts/project#dependencies).\n\n## Metadata\n\n## `id`v1.18.0\n\nOverrides the name (identifier) of the project, which was configured in or derived from the\n[`projects`](/docs/config/workspace#projects) setting in [`.moon/workspace.yml`](/docs/config/workspace). This setting is\nuseful when using glob based project location, and want to avoid using the folder name as the\nproject name.\n\nmoon.yml\n\n```\nid: 'custom-id'\n```\n\ninfo\n\nAll references to the project must use the new identifier, including project and task dependencies.\n\n## `language`\n\nThe primary programming language the project is written in. This setting is required for\n[task inheritance](/docs/config/tasks), editor extensions, and more. Supports the following values:\n\n- `bash` - A [Bash](https://en.wikipedia.org/wiki/Bash_(Unix_shell)) based project (Unix only).\n\n- `batch` - A [Batch](https://en.wikibooks.org/wiki/Windows_Batch_Scripting)/PowerShell based project (Windows only).\n\n- `go` - A [Go](https://go.dev/) based project.\n\n- `javascript` - A [JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript) based project.\n\n- `php` - A [PHP](https://www.php.net) based project.\n\n- `python` - A [Python](https://www.python.org/) based project.\n\n- `ruby` - A [Ruby](https://www.ruby-lang.org/en/) based project.\n\n- `rust` - A [Rust](https://www.rust-lang.org/) based project.\n\n- `typescript` - A [TypeScript](https://www.typescriptlang.org/) based project.\n\n- `unknown` (default) - When not configured or inferred.\n\n- `*` - A custom language. Values will be converted to kebab-case.\n\nmoon.yml\n\n```\nlanguage: 'javascript'# Customlanguage: 'kotlin'\n```\n\nFor convenience, when this setting is not defined, moon will attempt to detect the language based\non configuration files found in the project root. This only applies to non-custom languages!\n\n## `owners`v1.8.0\n\nDefines ownership of source code within the current project, by mapping file system paths to owners.\nAn owner is either a user, team, or group.\n\nCurrently supports\n[GitHub](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners),\n[GitLab](https://docs.gitlab.com/ee/user/project/codeowners/reference.html), and\n[Bitbucket](https://marketplace.atlassian.com/apps/1218598/code-owners-for-bitbucket?tab=overview&hosting=cloud)\n(via app).\n\n### `customGroups`Bitbucket\n\nWhen using the\n[Code Owners for Bitbucket](https://marketplace.atlassian.com/apps/1218598/code-owners-for-bitbucket?tab=overview&hosting=cloud)\napp, this setting provides a way to define custom groups that will be injected at the top of the\n`CODEOWNERS` file. These groups must be unique across all projects.\n\nmoon.yml\n\n```\nowners:  customGroups:    '@@@backend': ['@\"user name\"', '@@team']\n```\n\n### `defaultOwner`\n\nThe default owner for all [`paths`](#paths). This setting is optional in some cases but helps to\navoid unnecessary repetition.\n\nmoon.yml\n\n```\nowners:  defaultOwner: '@frontend'\n```\n\n### `optional`GitLab\n\nFor GitLab, marks the project's\n[code owners section](https://docs.gitlab.com/ee/user/project/codeowners/reference.html#optional-sections)\nas optional. Defaults to `false`.\n\nmoon.yml\n\n```\nowners:  optional: true\n```\n\n### `paths`\n\nThe primary setting for defining ownership of source code within the current project. This setting\nsupports 2 formats, the first being a list of file paths relative from the current project. This\nformat requires [`defaultOwner`](#defaultowner) to be defined, and only supports 1 owner for every\npath (the default owner).\n\nmoon.yml\n\n```\nowners:  defaultOwner: '@frontend'  paths:    - '**/*.ts'    - '**/*.tsx'    - '*.config.js'\n```\n\nThe second format provides far more granularity, allowing for multiple owners per path. This format\nrequires a map, where the key is a file path relative from the current project, and the value is a\nlist of owners. Paths with an empty list of owners will fallback to [`defaultOwner`](#defaultowner).\n\nmoon.yml\n\n```\nowners:  defaultOwner: '@frontend'  paths:    '**/*.rs': ['@backend']    '**/*.js': []    '*.config.js': ['@frontend', '@frontend-infra']\n```\n\nThe syntax for owners is dependent on the provider you are using for version control (GitHub,\nGitLab, Bitbucket). moon provides no validation or guarantees that these are correct.\n\n### `requiredApprovals`Bitbucket / GitLab\n\nRequires a specific number of approvals for a pull/merge request to be satisfied. Defaults to `1`.\n\n- For Bitbucket, defines the [`Check()` condition](https://docs.mibexsoftware.com/codeowners/merge-checks#MergeChecks-2.MergeChecks:HowmanyoftheseCodeOwnersneedtoapprovebeforeapullrequestcanbemerged?) when using a [`defaultOwner`](#defaultowner).\n\n- For GitLab, defines a requirement on the [code owners section](https://docs.gitlab.com/ee/user/project/codeowners/reference.html#sections-requiring-multiple-approvals).\n\nmoon.yml\n\n```\nowners:  requiredApprovals: 2\n```\n\n## `layer`\n\nThe layer within a [stack](#stack). Supports the following values:\n\n- `application` - An application of any kind.\n\n- `automation` - An automated testing suite, like E2E, integration, or visual tests. v1.16.0\n\n- `configuration` - Configuration files or infrastructure. v1.22.0\n\n- `library` - A self-contained, shareable, and publishable set of code.\n\n- `scaffolding` - Templates or generators for scaffolding. v1.22.0\n\n- `tool` - An internal tool, CLI, one-off script, etc.\n\n- `unknown` (default) - When not configured.\n\nmoon.yml\n\n```\nlayer: 'application'\n```\n\ninfo\n\nThe project layer is used in [task inheritance](/docs/concepts/task-inheritance),\n[constraints and boundaries](/docs/config/workspace#constraints), editor extensions, and more!\n\n## `project`\n\nThe `project` setting defines metadata about the project itself.\n\nmoon.yml\n\n```\nproject:  title: 'moon'  description: 'A monorepo management tool.'  channel: '#moon'  owner: 'infra.platform'  maintainers: ['miles.johnson']\n```\n\nThe information listed within `project` is purely informational and primarily displayed within the\nCLI. However, this setting exists for you, your team, and your company, as a means to identify and\norganize all projects. Feel free to build your own tooling around these settings!\n\n### `channel`\n\nThe Slack, Discord, Teams, IRC, etc channel name (with leading #) in which to discuss the project.\n\n### `description`Required\n\nA description of what the project does and aims to achieve. Be as descriptive as possible, as this\nis the kind of information search engines would index on.\n\n### `maintainers`\n\nA list of people/developers that maintain the project, review code changes, and can provide support.\nCan be a name, email, LDAP name, GitHub username, etc, the choice is yours.\n\n### `title`\n\nA human readable name of the project. This is different from the unique project name configured in\n[`projects`](/docs/config/workspace#projects).\n\n### `owner`\n\nThe team or organization that owns the project. Can be a title, LDAP name, GitHub team, etc. We\nsuggest not listing people/developers as the owner, use [maintainers](#maintainers) instead.\n\n### Custom fieldsv2.0.0\n\nAdditional fields can be configured as custom metadata to associate to this project. Supports all\nvalue types that are valid JSON.\n\nmoon.yml\n\n```\nproject:  # ...  deprecated: true\n```\n\n## `stack`v1.22.0\n\nThe technology stack this project belongs to, primarily for categorization. Supports the following\nvalues:\n\n- `backend` - Server-side APIs, etc.\n\n- `data` - Data sources, database layers, etc. v2.0.0\n\n- `frontend` - Client-side user interfaces, etc.\n\n- `infrastructure` - Cloud/server infrastructure, Docker, etc.\n\n- `systems` - Low-level systems programming.\n\n- `unknown` (default) - When not configured.\n\nmoon.yml\n\n```\nstack: 'frontend'\n```\n\ninfo\n\nThe project stack is also used in [constraints and boundaries](/docs/config/workspace#constraints)!\n\n## `tags`\n\nTags are a simple mechanism for categorizing projects. They can be used to group projects together\nfor [easier querying](/docs/commands/query/projects), enforcing of\n[project boundaries and constraints](/docs/config/workspace#constraints),\n[task inheritance](/docs/concepts/task-inheritance), and more.\n\nmoon.yml\n\n```\ntags:  - 'react'  - 'prisma'\n```\n\n## Integrations\n\n## `docker`v1.27.0\n\nConfigures Docker integration for the current project.\n\n### `file`\n\nConfigures the `Dockerfile` generation process when [`moon docker file`](/docs/commands/docker/file) is\nexecuted.\n\n#### `buildTask`\n\nThe name of a task within the current project that will be used for building the project before\nrunning it. If not defined, does nothing.\n\nmoon.yml\n\n```\ndocker:  file:    buildTask: 'build'\n```\n\n#### `image`\n\nThe Docker image to use in the base stage. Defaults to an image based on the project's toolchain, as\noutlined below.\n\n- `oven/bun:latest` for Bun\n\n- `denoland/deno:latest` for Deno\n\n- `node:latest` for Node.js\n\n- `python:latest` for Python\n\n- `rust:latest` for Rust\n\n- `scratch` for everything else\n\nmoon.yml\n\n```\ndocker:  file:    image: 'node:latest'\n```\n\n#### `startTask`\n\nThe name of a task within the current project that will run the project after it has been built (if\nrequired). This task will be used as `CMD` within the `Dockerfile`.\n\nmoon.yml\n\n```\ndocker:  file:    startTask: 'start'\n```\n\n### `scaffold`\n\nConfigures aspects of the Docker scaffolding process when\n[`moon docker scaffold`](/docs/commands/docker/scaffold) is executed. Only applies to the\n[sources skeleton](/docs/commands/docker/scaffold#sources).\n\n#### `sourcesPhaseGlobs`\n\nList of globs in which to copy project-relative files into the `.moon/docker/sources` skeleton. When\nnot defined, defaults to `**/*`.\n\nmoon.yml\n\n```\ndocker:  scaffold:    sourcesPhaseGlobs:      - 'src/**/*'\n```\n\n## Tasks\n\n## `env`\n\nThe `env` field is map of strings that are passed as environment variables to all tasks within the\ncurrent project. Project-level variables will not override task-level variables of the same name.\n\nmoon.yml\n\n```\nenv:  NODE_ENV: 'production'\n```\n\nView the task [`env`](#env-1) setting for more usage examples and information.\n\n## `fileGroups`\n\nDefines [file groups](/docs/concepts/file-group) to be used by local tasks. By default, this setting\nis not required for the following reasons:\n\n- File groups are an optional feature, and are designed for advanced use cases.\n\n- File groups defined in [`.moon/tasks/all.yml`](/docs/config/tasks) will be inherited by all projects.\n\nWhen defined this setting requires a map, where the key is the file group name, and the value is a\nlist of [globs or file paths](/docs/concepts/file-pattern), or environment variables. Globs and paths\nare [relative to a project](/docs/concepts/file-pattern#project-relative) (even when defined\n[globally](/docs/config/tasks)).\n\nmoon.yml\n\n```\n# Example groupsfileGroups:  configs:    - '*.config.{js,cjs,mjs}'    - '*.json'  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*'    - '**/__tests__/**/*'  assets:    - 'assets/**/*'    - 'images/**/*'    - 'static/**/*'    - '**/*.{scss,css}'\n```\n\nOnce your groups have been defined, you can reference them within [`args`](#args),\n[`inputs`](#inputs), [`outputs`](#outputs), and more, using\n[token functions and variables](/docs/concepts/token).\n\nmoon.yml\n\n```\ntasks:  build:    command: 'vite build'    inputs:      - '@group(configs)'      - '@group(sources)'\n```\n\n## `tasks`\n\nTasks are actions that are ran within the context of a [project](/docs/concepts/project), and commonly\nwrap an npm binary or system command. This setting requires a map, where the key is a unique name\nfor the task, and the value is an object of task parameters.\n\nmoon.yml\n\n```\ntasks:  format:    command: 'prettier'  lint:    command: 'eslint'  test:    command: 'jest'  typecheck:    command: 'tsc'\n```\n\n### `extends`v1.12.0\n\nThe `extends` field can be used to extend the settings from a sibling task within the same project,\nor [inherited from the global scope](/docs/concepts/task-inheritance). This is useful for composing\nsimilar tasks with different arguments or options.\n\nWhen extending another task, the same\n[merge strategies](/docs/concepts/task-inheritance#merge-strategies) used for inheritance are applied.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint .'    inputs:      - 'src/**/*'  lint-fix:    extends: 'lint'    args: '--fix'    preset: 'utility'\n```\n\n### `description`v1.22.0\n\nA human-readable description of what the task does. This information is displayed within the\n[`moon project`](/docs/commands/project) and [`moon task`](/docs/commands/task) commands.\n\nmoon.yml\n\n```\ntasks:  build:    description: 'Builds the project using Vite'    command: 'vite build'\n```\n\n### `command`\n\nThe `command` field is a single command to execute for the task, including the command binary/name\n(must be first) and any optional [arguments](#args). This field supports task inheritance and\nmerging of arguments.\n\nThis setting can be defined using a string, or an array of strings. We suggest using arrays when\ndealing with many args, or the args string cannot be parsed easily.\n\nmoon.yml\n\n```\ntasks:  format:    # Using a string    command: 'prettier --check .'    # Using an array    command:      - 'prettier'      - '--check'      - '.'\n```\n\ninfo\n\nIf you need to support pipes, redirects, or multiple commands, use [`script`](#script) instead.\nLearn more about [commands vs scripts](/docs/concepts/task#commands-vs-scripts).\n\n#### Special commands\n\nFor interoperability reasons, the following command names have special handling.\n\n- `noop`, `no-op`, `nop` - Marks the task as a \"no operation\". Will not execute a command in the action pipeline but can define dependencies.\n\n- When `toolchain` is \"bun\": `bun`, `bunx` - Uses the binaries from the toolchain.\n\n- When `toolchain` is \"deno\": Will execute with `deno` binary.\n\n- When `toolchain` is \"node\": `node`, `npm`, `pnpm`, `yarn` - Uses the binaries from the toolchain.\n\n- When `toolchain` is \"rust\": Will execute with `cargo` binary.\n\n### `args`\n\nThe `args` field is a collection of additional arguments to append to the [`command`](#command)\nwhen executing the task. This field exists purely to provide arguments for\n[inherited tasks](/docs/config/tasks#tasks).\n\nThis setting can be defined using a string, or an array of strings. We suggest using arrays when\ndealing with many args, or the args string cannot be parsed easily.\n\nmoon.yml\n\n```\ntasks:  test:    command: 'jest'    # Using a string    args: '--color --maxWorkers 3'    # Using an array    args:      - '--color'      - '--maxWorkers'      - '3'\n```\n\nHowever, for the array approach to work correctly, each argument must be its own distinct item,\nincluding argument values. For example:\n\nmoon.yml\n\n```\ntasks:  test:    command: 'jest'    args:      # Valid      - '--maxWorkers'      - '3'      # Also valid      - '--maxWorkers=3'      # Invalid      - '--maxWorkers 3'\n```\n\n### `deps`\n\nThe `deps` field is a list of other tasks (known as [targets](/docs/concepts/target)), either within\nthis project or found in another project, that will be executed before this task. It achieves this\nby generating a directed task graph based on the project graph.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    deps:      - 'apiClients:build'      - 'designSystem:build'      # A task within the current project      - 'codegen'\n```\n\n#### Args & env\n\nFurthermore, for each dependency target, you can configure additional command line arguments and\nenvironment variables that'll be passed to the dependent task when it is ran. The `args` field\nsupports a list of strings, while `env` is an object of key-value pairs.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    deps:      - target: 'apiClients:build'        args: ['--env', 'production']        env:          NODE_ENV: 'production'\n```\n\nDependencies of inherited tasks will be excluded and renamed according to the\n[`workspace.inheritedTasks`](#inheritedtasks) setting. This process only uses filters from the\ncurrent project, and not filters from dependent projects. Furthermore, `args` and `env` are not\ndeeply merged.\n\n#### Optional\n\nBy default, all dependencies are required to exist when tasks are being built and expanded, but this\nisn't always true when dealing with composition and inheritance. For dependencies that may not exist\nbased on what's inherited, you can mark it as `optional`.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    deps:      - target: 'apiClients:build'        optional: true\n```\n\n### `env`\n\nThe `env` field is map of strings that are passed as environment variables when running the command.\nVariables defined here will take precedence over those loaded with [`envFile`](#envfile).\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    env:      NODE_ENV: 'production'\n```\n\nVariables also support substitution using the syntax `${VAR_NAME}`. When using substitution, only\nvariables in the current process can be referenced, and not those currently defined in `env`.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    env:      APP_TARGET: '${REGION}-${ENVIRONMENT}'\n```\n\n### `inputs`\n\nThe `inputs` field is a list of sources that calculate whether to execute this task based on the\nenvironment and files that have been touched since the last time the task has been ran. If not\ndefined or inherited, then all files within a project are considered an input (`**/*`), excluding\nroot-level tasks.\n\nInputs support the following source types:\n\n- Environment variables\n\n- Environment variable wildcards v1.22.0\n\n- Files, folders, and globs\n\n- [Token functions and variables](/docs/concepts/token)\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    inputs:      # Config files anywhere within the project      - '**/.eslintignore'      - '**/.eslintrc.js'      # Config files at the workspace root      - '/.eslintignore'      - '/.eslintrc.js'      # Tokens      - '$projectRoot'      - '@group(sources)'\n```\n\n#### Environment variables\n\nEnvironment variables can be used as inputs and must start with a `$`. Wildcard variables can use\n`*` to match any character.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      - '$FOO_CACHE'      - '$FOO_*'\n```\n\ncaution\n\nWhen using an environment variable, we assume it's not defined by default, and will trigger an\naffected state when it is defined. If the environment variable always exists, then the task will\nalways run and bypass the cache.\n\n#### File paths\n\nFile paths support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `file://` URI v1.39.0,\nor as an object with a `file` property v1.39.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `content`, `match`, `matches` (`string`) - When determining affected state, will match against the file's content using the defined regex pattern, instead of relying on file existence.\n\n- `optional` (`boolean`) - When hashing and set to `true` and the file is missing, will not log a warning. When set to `false` and the file is missing, will fail with an error. Defaults to logging a warning.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'project/relative/file.js'      - '/workspace/relative/file.js'      # Using file protocol      - 'file://project/relative/file.js?optional'      - 'file:///workspace/relative/file.js?content=a|b|c'      # Using an object      - file: 'project/relative/file.js'        optional: true      - file: '/workspace/relative/file.js'        content: 'a|b|c'\n```\n\n#### File groupsv1.41.0\n\nA file group input will reference the defined files/globs within from a file group in the current\nproject. It can be defined with a `group://` URI, or as an object with a `group` property.\nAdditionally, the following parameters are supported as a URI query or as object fields:\n\n- `format`, `as` (`string`) - The format in which to gather the file group results. Supported values are `static` (default), `files`, `dirs`, `globs`, `envs`, and `root`.\n\nmoon.yml\n\n```\nfileGroups:  sources:    - 'src/**/*'tasks:  build:    # ...    inputs:      # Using group protocol      - 'group://sources?format=dirs'      # Using an object      - group: 'sources'        format: 'dirs'\n```\n\n#### Glob patterns\n\nGlob patterns support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `glob://` URI v1.39.0,\nor as an object with a `glob` property v1.39.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `cache` (`boolean`) - When gathering inputs for hashing, defines whether the glob results should be cached for the duration of the moon process. Defaults to `true`.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'project/relative/file.*'      - '/workspace/relative/**/*'      # Using glob protocol      - 'glob://project/relative/file.*?cache=false'      - 'glob:///workspace/relative/**/*?cache'      # Using an object      - glob: 'project/relative/file.*'        cache: false      - glob: '/workspace/relative/**/*'\n```\n\nGlobs can also be negated by prefixing the path with `!`, which will exclude all files that match\nthe glob.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      - '!**/*.md'      - 'glob://!/workspace/relative/**/*'      - glob: '!/workspace/relative/**/*'\n```\n\nwarning\n\nGlob patterns that contain `?`, for example `*.tsx?`, cannot be used in URI format, as it conflicts\nwith the query string syntax. Use the path or object format instead.\n\ndanger\n\nBe aware that files that match the glob, but are ignored via `.gitignore` (or similar), will not\nbe considered an input. To work around this, use explicit file inputs.\n\n#### External projectsv1.41.0\n\nTasks can also depend on files and globs from other projects within the same workspace. This is\nuseful for handling cross-project relationships without needing to define explicit task\ndependencies.\n\nExternal projects can be defined as a `project://` URI, or as an object with a `project` property,\nboth of which require a project identifier, or `^` for all dependent projects. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `group`, `fileGroup` (`id`) - The name of a file group within the external project in which file and glob patterns will be used for matching. Takes precedence over `filter`.\n\n- `filter` (`string[]`) - A list of [project relative glob patterns](/docs/concepts/file-pattern#project-relative) that will be used for matching.\n\nIf neither `group` nor `filter` are defined, all files within the external project are considered a\nmatch (`**/*`).\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Using project protocol      - 'project://foo'      - 'project://bar?group=sources'      - 'project://baz?filter=src/**/*'      # Using an object      - project: 'foo'      - project: 'bar'        group: 'sources'      - project: 'baz'        filter: ['src/**/*']\n```\n\n### `outputs`\n\nThe `outputs` field is a list of [files and folders](/docs/concepts/file-pattern#project-relative) that\nare created as a result of executing this task, typically from a build or compilation related\ntask. Outputs are necessary for [incremental caching and hydration](/docs/concepts/cache). If you'd\nprefer to avoid that functionality, omit this field.\n\n#### File paths\n\nFile paths support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `file://` URI v1.41.0,\nor as an object with a `file` property v1.41.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `optional` (`boolean`) - When archiving and set to `true` and the file is missing, will not fail with a missing output error. Defaults to `false`.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'build/'      # Using file protocol      - 'file://build/'      # Using an object      - file: 'build/'        optional: true\n```\n\n#### Glob patterns\n\nGlob patterns support\n[project and workspace relative file/folder patterns](/docs/concepts/file-pattern#project-relative).\nThey can be defined as a literal path, or a `glob://` URI v1.41.0,\nor as an object with a `glob` property v1.41.0. Additionally, the\nfollowing parameters are supported as a URI query or as object fields:\n\n- `optional` (`boolean`) - When archiving and set to `true` and the glob produced no results, will not fail with a missing output error. Defaults to `false`.\n\nmoon.yml\n\n```\ntasks:  example:    inputs:      # Literal paths      - 'build/**/*.js'      - '!build/internal.js'      # Using glob protocol      - 'glob://build/**/*.js'      # Using an object      - glob: 'build/**/*.js'\n```\n\nwarning\n\nGlob patterns that contain `?`, for example `*.tsx?`, cannot be used in URI format, as it conflicts\nwith the query string syntax. Use the path or object format instead.\n\ndanger\n\nWhen using globs and moon hydrates an output (a cache hit), all files not matching the glob will be\ndeleted. Ensure that all files critical for the build to function correctly are included.\n\n### `preset`v1.28.0\n\nApplies the chosen preset to the task. A preset defines a collection of task options that will be\ninherited as the default, and can then be overridden within the task itself. The following presets\nare available:\n\n- `server` [`cache`](#cache) -> Turned off\n\n- [`outputStyle`](#outputstyle) -> Set to \"stream\"\n\n- [`persistent`](#persistent) -> Turned on\n\n- [`runInCI`](#runinci) -> Turned off\n\n- `utility` v2.0.0 [`cache`](#cache) -> Turned off\n\n- [`interactive`](#interactive) -> Turned on\n\n- [`outputStyle`](#outputstyle) -> Set to \"stream\"\n\n- [`persistent`](#persistent) -> Turned off\n\n- [`runInCI`](#runinci) -> Skipped\n\nTasks named \"dev\", \"start\", or \"serve\" are marked as `server` automatically.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'webpack server'    preset: 'server'\n```\n\n### `script`v1.27.0\n\nThe `script` field is one or many commands to execute for the task, with support for pipes,\nredirects, and more. This field does not support task inheritance merging, and can only be defined\nwith a string.\n\nIf defined, will supersede [`command`](#command) and [`args`](#args).\n\nmoon.yml\n\n```\ntasks:  exec:    # Single command    script: 'cp ./in ./out'    # Multiple commands    script: 'rm -rf ./out && cp ./in ./out'    # Pipes    script: 'ps aux | grep 3000'    # Redirects    script: './gen.sh > out.json'\n```\n\ninfo\n\nIf you need to support merging during task inheritance, use [`command`](#command) instead. Learn\nmore about [commands vs scripts](/docs/concepts/task#commands-vs-scripts).\n\n### `toolchains`v1.31.0\n\nThe `toolchain` field defines additional [toolchain(s)](/docs/concepts/toolchain) the command runs on,\nwhere to locate its executable, and more. By default, moon will set to a value based on the\nproject's [`language`](#language), default [`toolchain.default`](#toolchain-1), or via detection.\n\nmoon.yml\n\n```\ntasks:  env:    command: 'printenv'    toolchains: 'system'\n```\n\nThis setting also supports multiple values.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'npm run build'    toolchains: ['javascript', 'node', 'npm']\n```\n\n### `options`\n\nThe `options` field is an object of configurable options that can be used to modify the task and its\nexecution. The following fields can be provided, with merge related fields supporting all\n[merge strategies](/docs/concepts/task-inheritance#merge-strategies).\n\nmoon.yml\n\n```\ntasks:  typecheck:    command: 'tsc --noEmit'    options:      mergeArgs: 'replace'      runFromWorkspaceRoot: true\n```\n\n#### `affectedFiles`\n\nWhen enabled and the [`--affected` option](/docs/run-task#running-based-on-affected-files-only) is\nprovided, all affected files that match this task's [`inputs`](#inputs) will be passed as relative\nfile paths as command line arguments, and as a `MOON_AFFECTED_FILES` environment variable.\n\nIf there are no affected files, `.` (current directory) will be passed instead for arguments, and an\nempty value for the environment variable. This functionality can be changed with the\n[`affectedPassInputs`](#affectedpassinputs) setting.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    options:      affectedFiles: true      # Only pass args      affectedFiles: 'args'      # Only set env var      affectedFiles: 'env'\n```\n\ncaution\n\nWhen using this option, ensure that explicit files or `.` are not present in the [`args`](#args)\nlist. Furthermore, this functionality will only work if the task's command supports an arbitrary\nlist of files being passed as arguments.\n\nThis setting also supports an object format with additional parameters. The `pass` field is\nrequired, which accepts a value described above.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    options:      affectedFiles:        pass: 'args'\n```\n\nThe following additional parameters are supported:\n\n- `passInputsWhenNoMatch` (`boolean`) - When no affected files are found, and `pass` includes `args`, will pass all configured [`inputs`](#inputs) as relative file paths instead of `.`. Defaults to `false`.\n\n#### `allowFailure`v1.13.0\n\nAllows a task to fail without failing the entire pipeline. When enabled, the following changes\noccur:\n\n- Other tasks cannot depend on this task, as we can't ensure it's side-effect free.\n\n- For [`moon run`](/docs/commands/run), the process will not bail early and will run to completion.\n\n- For [`moon ci`](/docs/commands/ci), the process will not exit with a non-zero exit code, if the only failing tasks are allowed to fail.\n\nmoon.yml\n\n```\ntasks:  lint:    command: 'eslint'    options:      allowFailure: true\n```\n\n#### `cache`\n\nWhether to cache the task's execution result using our [smart hashing](/docs/concepts/cache#hashing)\nsystem. If disabled, will not create a cache hash, and will not persist a task's\n[outputs](#outputs). Supports the following values:\n\n- `true` (default) - Cache the task's output.\n\n- `false` - Do not cache the task's output.\n\n- `local` - Only cache locally. v1.40.0\n\n- `remote` - Only cache [remotely](/docs/guides/remote-cache). v1.40.0\n\nWe suggest disabling caching when defining cleanup tasks, one-off scripts, or file system heavy\noperations.\n\nmoon.yml\n\n```\ntasks:  clean:    command: 'rm -rf ./temp'    options:      cache: false\n```\n\n#### `cacheKey`v1.35.0\n\nA custom key to include in the cache and task hashing process. Can be used to invalidate local and\nremote caches.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'some-costly-build'    options:      cacheKey: 'v1'\n```\n\n#### `cacheLifetime`v1.29.0\n\nThe lifetime in which a [cached task](#cache) will live before being marked as stale and re-running.\nThis applies to a task even if it does not produce [outputs](#outputs).\n\nThe lifetime can be configured in a human-readable string format, for example, `1 day`, `3 hr`,\n`1m`, etc. If the lifetime is not defined, the cache will live forever, or until the task inputs are\ntouched.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'some-costly-build'    options:      cacheLifetime: '1 day'\n```\n\nString formats are powered by the\n[humantime](https://docs.rs/humantime/2.1.0/humantime/fn.parse_duration.html) crate.\n\n#### `envFile`\n\nA boolean or path to a `.env` file (also know as dotenv file) that defines a collection of\n[environment variables](#env-1) for the current task. Variables will be loaded on project creation,\nbut will not override those defined in [`env`](#env-1).\n\nVariables defined in the file support value substitution/expansion by wrapping the variable name in\ncurly brackets, such as `${VAR_NAME}`.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    options:      # Defaults to .env      envFile: true      # Or      envFile: '.env.production'      # Or from the workspace root      envFile: '/.env.shared'\n```\n\nWhen set to `true`, moon will load the following files in order, with later files taking precedence\nover earlier ones:\n\n- `/.env`\n\n- `/.env.local`\n\n- `.env`\n\n- `.env.local`\n\n- `.env.`\n\n- `.env..local`\n\nAdditionally, a list of file paths can also be provided. When using a list, the order of the files\nis important, as environment variables from all files will be aggregated into a single map, with\nsubsequent files taking precedence over previous ones. Once aggregated, the variables will be passed\nto the task, but will not override those defined in [`env`](#env-1).\n\nmoon.yml\n\n```\ntasks:  build:    command: 'webpack'    options:      envFile:        - '.env'        - '.env.production'\n```\n\n#### `inferInputs`v1.31.0\n\nAutomatically infer [inputs](#inputs) based on the following parameters configured within the task's\n`command`, `script`, `args`, or `env`. Defaults to `false`.\n\n- File/glob paths derived from [file group based token functions](/docs/concepts/token#file-groups).\n\n- Environment variables being substituted within a command or script.\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      inferInputs: false\n```\n\n#### `internal`v1.23.0\n\nMarks the task as internal only. [Internal tasks](/docs/concepts/task#internal-only) can not be\nexplicitly ran on the command line, but can be depended on by other tasks.\n\nmoon.yml\n\n```\ntasks:  prepare:    # ...    options:      internal: true\n```\n\n#### `interactive`v1.12.0\n\nMarks the task as interactive. [Interactive tasks](/docs/concepts/task#interactive) run in isolation so\nthat they can interact with stdin.\n\nThis setting also disables caching, turns of CI, and other functionality, similar to the\n[`preset`](#preset) setting.\n\nmoon.yml\n\n```\ntasks:  init:    # ...    options:      interactive: true\n```\n\n#### `merge`v1.29.0\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging [`args`](#args),\n[`deps`](#deps), [`env`](#env-1), [`inputs`](#inputs), and [`outputs`](#outputs) with an inherited\ntask. This option can be overridden with the field specific merge options below.\n\n#### `mergeArgs`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`args`](#args) list with an inherited task. Defaults to \"append\".\n\n#### `mergeDeps`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`deps`](#deps) list with an inherited task. Defaults to \"append\".\n\n#### `mergeEnv`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`env`](#env-1) map with an inherited task. Defaults to \"append\".\n\n#### `mergeInputs`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`inputs`](#inputs) list with an inherited task. Defaults to \"append\".\n\n#### `mergeOutputs`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`outputs`](#outputs) list with an inherited task. Defaults to \"append\".\n\n#### `mergeToolchains`\n\nThe [strategy](/docs/concepts/task-inheritance#merge-strategies) to use when merging the\n[`toolchains`](#toolchains) list with an inherited task. Defaults to \"append\".\n\n#### `mutex`v1.24.0\n\nCreates an exclusive lock on a \"virtual resource\", preventing other tasks using the same \"virtual\nresource\" from running concurrently.\n\nIf you have many tasks that require exclusive access to a resource that can't be tracked by moon\n(like a database, an ignored file, a file that's not part of the project, or a remote resource) you\ncan use the `mutex` option to prevent them from running at the same time.\n\nmoon.yml\n\n```\ntasks:  a:    # ...    options:      mutex: 'virtual_resource_name'  # b doesn't necessarily have to be in the same project  b:    # ...    options:      mutex: 'virtual_resource_name'\n```\n\n#### `os`v1.28.0\n\nWhen defined, the task will only run on the configured operating system. For other operating\nsystems, the task becomes a no-operation. Supports the values `linux`, `macos`, and `windows`.\n\nCan be defined as a single value, or a list of values.\n\nmoon.yml\n\n```\ntasks:  build-unix:    # ...    options:      os: ['linux', 'macos']  build-windows:    # ...    options:      os: 'windows'\n```\n\n#### `outputStyle`\n\nControls how stdout/stderr is displayed when the task is ran as a transitive target. By default,\nthis setting is not defined and defers to the action pipeline, but can be overridden with one of the\nfollowing values:\n\n- `buffer` - Buffers output and displays after the task has exited (either success or failure).\n\n- `buffer-only-failure` - Like `buffer`, but only displays on failures.\n\n- `hash` - Ignores output and only displays the generated [hash](/docs/concepts/cache#hashing).\n\n- `none` - Ignores output.\n\n- `stream` - Streams output directly to the terminal. Will prefix each line of output with the target.\n\nmoon.yml\n\n```\ntasks:  test:    # ...    options:      outputStyle: 'stream'\n```\n\n#### `persistent`v1.6.0\n\nMarks the task as persistent (continuously running). [Persistent tasks](/docs/concepts/task#persistent)\nare handled differently than non-persistent tasks in the action graph. When running a target, all\npersistent tasks are ran last and in parallel, after all their dependencies have completed.\n\nThis is extremely useful for running a server (or a watcher) in the background while other tasks are\nrunning.\n\nmoon.yml\n\n```\ntasks:  dev:    # ...    options:      persistent: true\n```\n\nWe suggest using the [`preset`](#preset) setting instead, which enables this setting, amongst\nother useful settings.\n\n#### `priority`v1.35.0\n\nThe priority level determines the position of the task within the action pipeline queue. A task with\na higher priority will run sooner rather than later, while still respecting the topological order.\nSupports the following levels:\n\n- `critical`\n\n- `high`\n\n- `normal` (default)\n\n- `low`\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      priority: 'high'\n```\n\n#### `retryCount`\n\nThe number of attempts the task will retry execution before returning a failure. This is especially\nuseful for flaky tasks. Defaults to `0`.\n\nmoon.yml\n\n```\ntasks:  test:    # ...    options:      retryCount: 3\n```\n\n#### `runDepsInParallel`\n\nWhether to run the task's direct [`deps`](#deps) in parallel or serial (in order). Defaults to\n`true`.\n\nWhen disabled, this does not run dependencies of dependencies in serial, only direct dependencies.\n\nmoon.yml\n\n```\ntasks:  start:    # ...    deps:      - '~:clean'      - '~:build'    options:      runDepsInParallel: false\n```\n\n#### `runInCI`\n\nWhether to run the task automatically in a CI (continuous integration) environment when affected by\ntouched files using the [`moon ci`](/docs/commands/ci) command. Supports the following values:\n\n- `always` - Always run in CI, regardless if affected or not. v1.31.0\n\n- `affected`, `true` (default) - Only run in CI if affected by touched files.\n\n- `false` - Never run in CI.\n\n- `only` - Only run in CI, and not locally, if affected by touched files. v1.41.0\n\n- `skip` - Skip running in CI but run locally and allow task relationships to be valid. v1.41.0\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      runInCI: false\n```\n\n#### `runFromWorkspaceRoot`\n\nWhether to use the workspace root as the working directory when executing a task. Defaults to\n`false` and runs from the task's project root.\n\nmoon.yml\n\n```\ntasks:  typecheck:    # ...    options:      runFromWorkspaceRoot: true\n```\n\n#### `shell`\n\nWhether to run the command within a shell or not. Defaults to `true` for system toolchain or\nWindows, and `false` otherwise. The shell to run is determined by the [`unixShell`](#unixshell) and\n[`windowsShell`](#windowsshell) options respectively.\n\nmoon.yml\n\n```\ntasks:  native:    command: 'echo $SHELL'    options:      shell: true\n```\n\nHowever, if you'd like to use a different shell, or customize the shell's arguments, or have\ngranular control, you can set `shell` to false and configure a fully qualified command.\n\nmoon.yml\n\n```\ntasks:  native:    command: '/bin/zsh -c \"echo $SHELL\"'    options:      shell: false\n```\n\n#### `timeout`v1.26.0\n\nThe maximum time in seconds that the task is allowed to run, before it is force cancelled. If not\ndefined, will run indefinitely.\n\nmoon.yml\n\n```\ntasks:  build:    # ...    options:      timeout: 120\n```\n\n#### `unixShell`v1.21.0\n\nCustomize the shell to run with when on a Unix operating system. Accepts `bash`, `elvish`, `fish`,\n`ion`, `murex`, `nu`, `pwsh`, `xonsh`, or `zsh`. If not defined, will derive the shell from the\n`SHELL` environment variable, or defaults to `bash`.\n\nmoon.yml\n\n```\ntasks:  native:    command: 'echo $SHELL'    options:      unixShell: 'fish'\n```\n\n#### `windowsShell`v1.21.0\n\nCustomize the shell to run with when on a Windows operating system. Accepts `bash` (typically via\nGit), `elvish`, `fish`, `murex`, `nu`, `pwsh`, or `xonsh`. If not defined, defaults to `pwsh`.\n\nmoon.yml\n\n```\ntasks:  native:    command: 'echo $SHELL'    options:      windowsShell: 'bash'\n```\n\n## Overrides\n\nDictates how a project interacts with settings defined at the top-level.\n\n## `toolchains`\n\n### `default`v1.31.0\n\nThe default [`toolchain`](#toolchain-1) for all task's within the current project. When a task's\n`toolchain` has not been explicitly configured, the toolchain will fallback to this configured\nvalue, otherwise the toolchain will be detected from the project's environment.\n\nmoon.yml\n\n```\ntoolchains:  default: 'node'\n```\n\n### `bun`\n\nConfigures Bun for this project and overrides the top-level [`bun`](/docs/config/toolchain#bun) setting.\n\n#### `version`\n\nDefines the explicit Bun [version specification](/docs/concepts/toolchain#version-specification) to use\nwhen running tasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  bun:    version: '1.0.0'\n```\n\n### `deno`\n\nConfigures Deno for this project and overrides the top-level [`deno`](/docs/config/toolchain#deno) setting.\n\n#### `version`\n\nDefines the explicit Deno [version specification](/docs/concepts/toolchain#version-specification) to\nuse when running tasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  deno:    version: '1.40.0'\n```\n\n### `node`\n\nConfigures Node.js for this project and overrides the top-level [`node`](/docs/config/toolchain#node) setting.\nCurrently, only the Node.js version can be overridden per-project, not the package manager.\n\n#### `version`\n\nDefines the explicit Node.js [version specification](/docs/concepts/toolchain#version-specification) to\nuse when running tasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  node:    version: '12.12.0'\n```\n\n### `python`\n\nConfigures Python for this project and overrides the top-level [`python`](/docs/config/toolchain#python)\nsetting.\n\n#### `version`\n\nDefines the explicit Python\n[version/channel specification](/docs/concepts/toolchain#version-specification) to use when running\ntasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  python:    version: '3.12.0'\n```\n\n### `rust`\n\nConfigures Rust for this project and overrides the top-level [`rust`](/docs/config/toolchain#rust) setting.\n\n#### `version`\n\nDefines the explicit Rust\n[version/channel specification](/docs/concepts/toolchain#version-specification) to use when running\ntasks for this project.\n\nmoon.yml\n\n```\ntoolchains:  rust:    version: '1.68.0'\n```\n\n### `typescript`\n\n#### `includeProjectReferenceSources`v1.17.0\n\nOverrides the workspace-level\n[`includeProjectReferenceSources`](/docs/config/toolchain#includeprojectreferencesources) setting. Defaults to\nundefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    includeProjectReferenceSources: false\n```\n\n#### `includeSharedTypes`v1.17.0\n\nOverrides the workspace-level [`includeSharedTypes`](/docs/config/toolchain#includesharedtypes) setting.\nDefaults to undefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    includeSharedTypes: false\n```\n\n#### `routeOutDirToCache`\n\nOverrides the workspace-level [`routeOutDirToCache`](/docs/config/toolchain#routeoutdirtocache) setting.\nDefaults to undefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    routeOutDirToCache: false\n```\n\n#### `syncProjectReferences`\n\nOverrides the workspace-level [`syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting.\nDefaults to undefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    syncProjectReferences: false\n```\n\n#### `syncProjectReferencesToPaths`\n\nOverrides the workspace-level\n[`syncProjectReferencesToPaths`](/docs/config/toolchain#syncprojectreferencestopaths) setting. Defaults to\nundefined.\n\nmoon.yml\n\n```\ntoolchains:  typescript:    syncProjectReferencesToPaths: false\n```\n\n## `workspace`\n\n### `inheritedTasks`\n\nProvides a layer of control when inheriting tasks from [`.moon/tasks/all.yml`](/docs/config/tasks).\n\n#### `exclude`\n\nThe optional `exclude` setting permits a project to exclude specific tasks from being inherited. It\naccepts a list of strings, where each string is the name of a global task to exclude.\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    # Exclude the inherited `test` task for this project    exclude: ['test']\n```\n\nExclusion is applied after inclusion and before renaming.\n\n#### `include`\n\nThe optional `include` setting permits a project to only include specific inherited tasks (works\nlike an allow/white list). It accepts a list of strings, where each string is the name of a global\ntask to include.\n\nWhen this field is not defined, the project will inherit all tasks from the global project config.\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    # Include *no* tasks (works like a full exclude)    include: []    # Only include the `lint` and `test` tasks for this project    include:      - 'lint'      - 'test'\n```\n\nInclusion is applied before exclusion and renaming.\n\n#### `rename`\n\nThe optional `rename` setting permits a project to rename the inherited task within the current\nproject. It accepts a map of strings, where the key is the original name (found in the global\nproject config), and the value is the new name to use.\n\nFor example, say we have 2 tasks in the global project config called `buildPackage` and\n`buildApplication`, but we only need 1, and since we're an application, we should omit and rename.\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['buildPackage']    rename:      buildApplication: 'build'\n```\n\nRenaming occurs after inclusion and exclusion.\n\n## /docs/config/tasks\n\nSource: https://moonrepo.dev/docs/config/tasks\n\n# .moon/tasks\n\nThe `.moon/tasks/**/*` files configures file groups and tasks that are inherited by every project\nin the workspace based on inheritance conditions.\n[Learn more about task inheritance!](/docs/concepts/task-inheritance)\n\nProjects can override or merge with these settings within their respective [`moon.yml`](/docs/config/project).\n\n## `extends`\n\nDefines one or many external `.moon/tasks/all.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/tasks/all.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/tasks/all.yml'\n```\n\ncaution\n\nFor map-based settings, `fileGroups` and `tasks`, entries from both the extended configuration and\nlocal configuration are merged into a new map, with the values of the local taking precedence. Map\nvalues are not deep merged!\n\n## `fileGroups`\n\nFor more information on file group configuration, refer to the\n[`fileGroups`](/docs/config/project#filegroups) section in the [`moon.yml`](/docs/config/project) doc.\n\nDefines [file groups](/docs/concepts/file-group) that will be inherited by projects, and also enables\nenforcement of organizational patterns and file locations. For example, encourage projects to place\nsource files in a `src` folder, and all test files in `tests`.\n\n.moon/tasks/all.yml\n\n```\nfileGroups:  configs:    - '*.config.{js,cjs,mjs}'    - '*.json'  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*'    - '**/__tests__/**/*'  assets:    - 'assets/**/*'    - 'images/**/*'    - 'static/**/*'    - '**/*.{scss,css}'\n```\n\ninfo\n\nFile paths and globs used within a file group are relative from the inherited project's root, and\nnot the workspace root.\n\n## `implicitDeps`\n\nDefines task [`deps`](/docs/config/project#deps) that are implicitly inserted into all inherited tasks within\na project. This is extremely useful for pre-building projects that are used extensively throughout\nthe repo, or always building project dependencies. Defaults to an empty list.\n\n.moon/tasks/all.yml\n\n```\nimplicitDeps:  - '^:build'\n```\n\ninfo\n\nImplicit dependencies are always inherited, regardless of the [`mergeDeps`](/docs/config/project#mergedeps)\noption.\n\n## `implicitInputs`\n\nDefines task [`inputs`](/docs/config/project#inputs) that are implicitly inserted into all inherited tasks\nwithin a project. This is extremely useful for the \"changes to these files should always trigger a\ntask\" scenario.\n\nLike `inputs`, file paths/globs defined here are relative from the inheriting project.\n[Project and workspace relative file patterns](/docs/concepts/file-pattern#project-relative) are\nsupported and encouraged.\n\n.moon/tasks/node.yml\n\n```\nimplicitInputs:  - 'package.json'\n```\n\ninfo\n\nImplicit inputs are always inherited, regardless of the [`mergeInputs`](/docs/config/project#mergeinputs)\noption.\n\n## `inheritedBy`v2.0.0\n\nA map of conditions that must be met for the configuration within the file to be inherited by a\nproject. When this field is not defined, or is an empty map, the configuration will be inherited by\nall projects.\n\n.moon/tasks/custom.yml\n\n```\ninheritedBy:  # Project belongs to either javascript or typescript toolchain, but not the ruby toolchain  toolchains:    or: ['javascript', 'typescript']    not: ['ruby']  # And project is either a frontend or backend stack  stacks: ['frontend', 'backend']  # And project is either a library or tool layer  layers: ['library', 'tool']\n```\n\ninfo\n\nView the [official task inheritance guide](/docs/concepts/task-inheritance) for more information!\n\n## `tasks`\n\nFor more information on task configuration, refer to the [`tasks`](/docs/config/project#tasks) section in the\n[`moon.yml`](/docs/config/project) doc.\n\nAs mentioned in the link above, [tasks](/docs/concepts/task) are actions that are ran within the\ncontext of a project, and commonly wrap a command. For most workspaces, every project should have\nlinting, typechecking, testing, code formatting, so on and so forth. To reduce the amount of\nboilerplate that every project would require, this setting offers the ability to define tasks that\nare inherited by many projects within the workspace, but can also be overridden per project.\n\n.moon/tasks/all.yml\n\n```\ntasks:  format:    command: 'prettier --check .'  lint:    command: 'eslint --no-error-on-unmatched-pattern .'  test:    command: 'jest --passWithNoTests'  typecheck:    command: 'tsc --build'\n```\n\ninfo\n\nRelative file paths and globs used within a task are relative from the inherited project's root, and\nnot the workspace root.\n\n## `taskOptions`v1.20.0\n\nFor more information on task options, refer to the [`options`](/docs/config/project#options) section in the\n[`moon.yml`](/docs/config/project) doc.\n\nLike [tasks](#tasks), this setting allows you to define task options that will be inherited by all\ntasks within the configured file, and by all project-level inherited tasks. This setting is the 1st\nlink in the inheritance chain, and can be overridden within each task.\n\n.moon/tasks/all.yml\n\n```\ntaskOptions:  # Never cache builds  cache: false  # Always re-run flaky tests  retryCount: 2tasks:  build:    # ...    options:      # Override the default cache setting      cache: true\n```\n\n## /docs/config/template\n\nSource: https://moonrepo.dev/docs/config/template\n\n# template\n\nThe `template.yml` file configures metadata and variables for a template,\n[used by the generator](/docs/guides/codegen), and must exist at the root of a named template folder.\n\n## `id`v1.23.0\n\nOverrides the name (identifier) of the template, instead of inferring the name from the template\nfolder. Be aware that template names must be unique across the workspace, and across all template\nlocations that have been configured in [`generator.templates`](/docs/config/workspace#templates).\n\ntemplate.yml\n\n```\nid: 'npm-package'\n```\n\n## `title`Required\n\nA human readable title that will be displayed during the [`moon generate`](/docs/commands/generate)\nprocess.\n\ntemplate.yml\n\n```\ntitle: 'npm package'\n```\n\n## `description`Required\n\nA description of why the template exists, what its purpose is, and any other relevant information.\n\ntemplate.yml\n\n```\ndescription: |  Scaffolds the initial structure for an npm package,  including source and test folders, a package.json, and more.\n```\n\n## `destination`v1.19.0\n\nAn optional file path in which this template should be generated into. This provides a mechanism for\nstandardizing a destination location, and avoids having to manually pass a destination to\n[`moon generate`](/docs/commands/generate).\n\nIf the destination is prefixed with `/`, it will be relative from the workspace root, otherwise it\nis relative from the current working directory.\n\ntemplate.yml\n\n```\ndestination: 'packages/[name]'\n```\n\nThis setting supports [template variables](#variables) through `[varName]` syntax. Learn more in\nthe [code generation documentation](/docs/guides/codegen#interpolation).\n\n## `extends`v1.19.0\n\nOne or many other templates that this template should extend. Will deeply inherit all template files\nand variables.\n\ntemplate.yml\n\n```\nextends: ['base', 'configs']\n```\n\n## `variables`\n\nA mapping of variables that will be interpolated into all template files and file system paths when\n[rendering with Tera](https://tera.netlify.app/docs/#variables). The map key is the variable name\n(in camelCase or snake_case), while the value is a configuration object, as described with the\nsettings below.\n\ntemplate.yml\n\n```\nvariables:  name:    type: 'string'    default: ''    required: true    prompt: 'Package name?'\n```\n\n### `type`Required\n\nThe type of value for the variable. Accepts `array`, `boolean`, `string`, `object`, `number`, or\n`enum`. Floats are not supported, use strings instead.\n\nFor arrays and objects, the value of each member must be a JSON compatible type.\n\n### `internal`v1.23.0\n\nMarks a variable as internal only, which avoids the variable value being overwritten by command line\narguments.\n\n### `order`v1.23.0\n\nThe order in which the variable will be prompted to the user. By default, variables are prompted in\nthe order they are defined in the `template.yml` file.\n\n### Primitives & collections\n\nYour basic primitives: boolean, numbers, strings, and collections: arrays, objects.\n\n- array\n- boolean\n- number\n- object\n- string\n\ntemplate.yml\n\n```\nvariables:  type:    type: 'array'    prompt: 'Type?'    default: ['app', 'lib']\n```\n\ntemplate.yml\n\n```\nvariables:  private:    type: 'boolean'    prompt: 'Private?'    default: false\n```\n\ntemplate.yml\n\n```\nvariables:  age:    type: 'number'    prompt: 'Age?'    default: 0    required: true\n```\n\ntemplate.yml\n\n```\nvariables:  metadata:    type: 'object'    prompt: 'Metadata?'    default:      type: 'lib'      dev: true\n```\n\ntemplate.yml\n\n```\nvariables:  name:    type: 'string'    prompt: 'Name?'    required: true\n```\n\n### `default`Required\n\nThe default value of the variable. When `--defaults` is passed to\n[`moon generate`](/docs/commands/generate) or [`prompt`](#prompt) is not defined, the default value\nwill be used, otherwise the user will be prompted to enter a custom value.\n\n### `prompt`\n\nWhen defined, will prompt the user with a message in the terminal to input a custom value, otherwise\n[`default`](#default) will be used.\n\nFor arrays and objects, a valid JSON string must be provided as the value.\n\n### `required`\n\nMarks the variable as required during prompting only. For arrays, strings, and objects, will error\nfor empty values (`''`). For numbers, will error for zero's (`0`).\n\n### Enums\n\nAn enum is an explicit list of string values that a user can choose from.\n\ntemplate.yml\n\n```\nvariables:  color:    type: 'enum'    values: ['red', 'green', 'blue', 'purple']    default: 'purple'    prompt: 'Favorite color?'\n```\n\n### `default`\n\nThe default value of the variable. When `--defaults` is passed to\n[`moon generate`](/docs/commands/generate) or [`prompt`](#prompt) is not defined, the default value\nwill be used, otherwise the user will be prompted to enter a custom value.\n\nFor enums, the default value can be a string when [`multiple`](#multiple) is false, or a string or\nan array of strings when `multiple` is true. Furthermore, each default value must exist in the\n[`values`](#values) list.\n\ntemplate.yml\n\n```\n# Singlevariables:  color:    type: 'enum'    values: ['red', 'green', 'blue', 'purple']    default: 'purple'    prompt: 'Favorite color?'# Multiplevariables:  color:    type: 'enum'    values: ['red', 'green', 'blue', 'purple']    default: ['red', 'purple']    multiple: true    prompt: 'Favorite color?'\n```\n\n### `prompt`\n\nWhen defined, will prompt the user with a message in the terminal to input a custom value, otherwise\n[`default`](#default) will be used.\n\n### `multiple`\n\nAllows multiple values to be chosen during prompting. In the template, an array or strings will be\nrendered, otherwise when not-multiple, a single string will be.\n\n### `values`Required\n\nList of explicit values to choose from. Can either be defined with a string, which acts as a value\nand label, or as an object, which defines an explicit value and label.\n\ntemplate.yml\n\n```\nvariables:  color:    type: 'enum'    values:      - 'red'      # OR      - value: 'red'        label: 'Red '    # ...\n```\n\n## Frontmatter\n\nThe following settings are not available in `template.yml`, but can be defined as frontmatter at\nthe top of a template file. View the [code generation guide](/docs/guides/codegen#frontmatter) for more\ninformation.\n\n### `force`\n\nWhen enabled, will always overwrite a file of the same name at the destination path, and will bypass\nany prompting in the terminal.\n\n```\n---force: true---Some template content!\n```\n\n### `to`\n\nDefines a custom file path, relative from the destination root, in which to create the file. This\nwill override the file path within the template folder, and allow for conditional rendering and\nengine filters to be used.\n\n```\n{% set component_name = name | pascal_case %}---to: components/{{ component_name }}.tsx---export function {{ component_name }}() {  return\n;}\n```\n\n### `skip`\n\nWhen enabled, the template file will be skipped while writing to the destination path. This setting\ncan be used to conditionally render a file.\n\n```\n---skip: {{ name == \"someCondition\" }}---Some template content!\n```\n\n## /docs/config/toolchain\n\nSource: https://moonrepo.dev/docs/config/toolchain\n\n# .moon/toolchains\n\nThe `.moon/toolchains.yml` file configures the toolchain and the workspace development environment.\nThis file is optional.\n\nManaging tool version's within the toolchain ensures a deterministic environment across any machine\n(whether a developer, CI, or production machine).\n\n## `extends`\n\nDefines one or many external `.moon/toolchains.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/toolchains.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/toolchains.yml'\n```\n\ncaution\n\nSettings will be merged recursively for blocks, with values defined in the local configuration\ntaking precedence over those defined in the extended configuration.\n\n## `moon`v1.29.0\n\nConfigures how moon will receive information about latest releases and download locations.\n\n### `manifestUrl`\n\nDefines an HTTPS URL in which to fetch the current version information from.\n\n.moon/toolchains.yml\n\n```\nmoon:  manifestUrl: 'https://proxy.corp.net/moon/version'\n```\n\n### `downloadUrl`\n\nDefines an HTTPS URL in which the moon binary can be downloaded from. The download file name is\nhard-coded and will be appended to the provided URL.\n\nDefaults to downloading from GitHub: [https://github.com/moonrepo/moon/releases](https://github.com/moonrepo/moon/releases)\n\n.moon/toolchains.yml\n\n```\nmoon:  downloadUrl: 'https://github.com/moonrepo/moon/releases/latest/download'\n```\n\n## `proto`v1.39.0\n\nConfigures how moon integrates with and utilizes [proto](/proto).\n\n### `version`\n\nThe version of proto to install and run toolchains with. If proto or this version of proto has not\nbeen installed yet, it will be installed automatically when running a task.\n\n.moon/toolchains.yml\n\n```\nproto:  version: '0.51.0'\n```\n\n## Go\n\n## `go`v1.38.0\n\nRun `moon toolchain info go` for all available settings.\n\n## JavaScript\n\n## `javascript`v1.40.0\n\nRun `moon toolchain info javascript` for all available settings.\n\n## `bun`v1.40.0\n\nRun `moon toolchain info bun` for all available settings.\n\ninfo\n\nThis toolchain requires the [`javascript`](#javascript) toolchain to also be enabled.\n\n## `deno`v1.41.0\n\nRun `moon toolchain info deno` for all available settings.\n\ninfo\n\nThis toolchain requires the [`javascript`](#javascript) toolchain to also be enabled.\n\n## `node`v1.40.0\n\nRun `moon toolchain info node` for all available settings.\n\ninfo\n\nThis toolchain requires the [`javascript`](#javascript) toolchain to also be enabled.\n\n## `npm`v1.40.0\n\nRun `moon toolchain info npm` for all available settings.\n\ninfo\n\nThis toolchain requires the [`node`](#node) toolchain to also be enabled.\n\n## `pnpm`v1.40.0\n\nRun `moon toolchain info pnpm` for all available settings.\n\ninfo\n\nThis toolchain requires the [`node`](#node) toolchain to also be enabled.\n\n## `yarn`v1.40.0\n\nRun `moon toolchain info yarn` for all available settings.\n\ninfo\n\nThis toolchain requires the [`node`](#node) toolchain to also be enabled.\n\n## `typescript`\n\nRun `moon toolchain info typescript` for all available settings.\n\n## Pythonv1.30.0\n\ncaution\n\nPython support is currently a work in progress for v2!\n\n## `python`\n\nRun `moon toolchain info python` for all available settings.\n\n## Rust\n\n## `rust`v1.37.0\n\nRun `moon toolchain info rust` for all available settings.\n\n## /docs/config/workspace\n\nSource: https://moonrepo.dev/docs/config/workspace\n\n# .moon/workspace\n\nThe `.moon/workspace.yml` file configures projects and services in the workspace. This file is\nrequired.\n\n## `extends`\n\nDefines one or many external `.moon/workspace.yml`'s to extend and inherit settings from. Perfect\nfor reusability and sharing configuration across repositories and projects. When defined, this\nsetting must be an HTTPS URL or relative file system path that points to a valid YAML document!\n\n.moon/workspace.yml\n\n```\nextends: 'https://raw.githubusercontent.com/organization/repository/master/.moon/workspace.yml'\n```\n\ninfo\n\nSettings will be merged recursively for blocks, with values defined in the local configuration\ntaking precedence over those defined in the extended configuration. However, the `projects` setting\ndoes not merge!\n\n## `projects`Required\n\nDefines the location of all [projects](/docs/concepts/project) within the workspace. Supports either a\nmanual map of projects (default), a list of globs in which to automatically locate projects, or\nboth.\n\ncaution\n\nProjects that depend on each other and form a cycle must be avoided! While we do our best to avoid\nan infinite loop and disconnect nodes from each other, there's no guarantee that tasks will run in\nthe correct order.\n\n### Using a map\n\nWhen using a map, each project must be manually configured and requires a unique\n[name](/docs/concepts/project#names) as the map key, where this name is used heavily on the command\nline and within the project graph for uniquely identifying the project amongst all projects. The map\nvalue (known as the project source) is a file system path to the project folder, relative from the\nworkspace root, and must be contained within the workspace boundary.\n\n.moon/workspace.yml\n\n```\nprojects:  admin: 'apps/admin'  apiClients: 'packages/api-clients'  designSystem: 'packages/design-system'  web: 'apps/web'\n```\n\n### Using globs\n\nIf manually mapping projects is too tedious or cumbersome, you may provide a list of\n[globs](/docs/concepts/file-pattern#globs) to automatically locate all project folders, relative from\nthe workspace root.\n\nWhen using this approach, the project name is derived from the project folder name, and is cleaned\nto our [supported characters](/docs/concepts/project#names), but can be customized with the\n[`id`](/docs/config/project#id) setting in [`moon.yml`](/docs/config/project). Furthermore, globbing does risk the\nchance of collision, and when that happens, we log a warning and skip the conflicting project from\nbeing configured in the project graph.\n\n.moon/workspace.yml\n\n```\nprojects:  - 'apps/*'  - 'packages/*'  # Only shared folders with a moon configuration  - 'shared/*/moon.yml'\n```\n\n### Using a map and globs\n\nFor those situations where you want to use both patterns, you can! The list of globs can be\ndefined under a `globs` field, while the map of projects under a `sources` field.\n\n.moon/workspace.yml\n\n```\nprojects:  globs:    - 'apps/*'    - 'packages/*'  sources:    www: 'www'\n```\n\nAdditionally, you can customize the format of project IDs for glob discovered projects. By default\nit inherits the fodler name, but this has a high chance of collision. Instead you can configure\n`globFormat` to use a different format, for example, using the full workspace relative path as the\nproject ID.\n\n.moon/workspace.yml\n\n```\nprojects:  globFormat: 'source-path'  globs:    - 'packages/**/moon.yml'\n```\n\n## `defaultProject`v2.0.0\n\nDefines the default project to focus on when no project scope is specified on the command line for\ntask targets.\n\n.moon/workspace.yml\n\n```\ndefaultProject: 'web'\n```\n\n## `codeowners`v1.8.0\n\nConfigures code owners (`CODEOWNERS`) integration across the entire workspace.\n\n### `globalPaths`\n\nThis setting defines file patterns and their owners at the workspace-level, and are applied to any\nmatching path, at any depth, within the entire workspace. This is useful for defining global or\nfallback owners when a granular [project-level path](/docs/config/project#paths) does not match or exist.\n\n.moon/workspace.yml\n\n```\ncodeowners:  globalPaths:    '*': ['@admins']    'config/': ['@infra']    '/.github/': ['@infra']\n```\n\n### `orderBy`\n\nThe order in which code owners, grouped by project, are listed in the `CODEOWNERS` file. Accepts\n\"file-source\" (default) or \"project-id\".\n\n.moon/workspace.yml\n\n```\ncodeowners:  orderBy: 'project-id'\n```\n\n### `sync`\n\nWill automatically generate a `CODEOWNERS` file by aggregating and syncing all project\n[`owners`](/docs/config/project#owners) in the workspace when a [target is run](/docs/concepts/target). The format\nand location of the `CODEOWNERS` file is based on the [`vcs.provider`](#provider) setting. Defaults\nto `false`.\n\n.moon/workspace.yml\n\n```\ncodeowners:  sync: true\n```\n\n## `constraints`\n\nConfigures constraints between projects that are enforced during project graph generation. This is\nalso known as project boundaries.\n\n### `enforceLayerRelationships`\n\nEnforces allowed relationships between a project and its dependencies based on the project's\n[`layer`](/docs/config/project#layer) and [`stack`](/docs/config/project#stack) settings. When a project depends on\nanother project of an invalid layer, a layering violation error will be thrown when attempting to\nrun a task.\n\nLayers are allowed to depend on lower layers in the same stack, but not higher layers. Additionally,\nlayers may depend on itself, excluding automations and applications. The following layers are\nstacked as such:\n\nLayer Description\n\n`automation` An automated testing suite, like E2E, integration, or visual tests.\n\n`application` An application of any kind.\n\n`tool` An internal tool, CLI, one-off script, etc.\n\n`library` A self-contained, shareable, and publishable set of code.\n\n`scaffolding` Templates or generators for scaffolding.\n\n`configuration` Configuration files or infrastructure.\n\n`unknown` When not configured.\n\nWhen the project `stack` setting is defined, it alters these rules to allow these kinds of\nrelationships. For example, a frontend application can depend on a backend application, but not\nanother frontend application.\n\n.moon/workspace.yml\n\n```\nconstraints:  enforceLayerRelationships: false\n```\n\nProjects with an unconfigured or unknown layer are ignored during enforcement.\n\n### `tagRelationships`\n\nEnforces allowed relationships between a project and its dependencies based on the project's\n[`tags`](/docs/config/project#tags) setting. This works in a similar fashion to `enforceLayerRelationships`,\nbut gives you far more control over what these relationships look like.\n\nFor example, let's enforce that Next.js projects using the `next` tag can only depend on React\nprojects using the `react` tag. If a dependency does not have one of the configured required tags,\nin this case `react`, an error will occur.\n\n.moon/workspace.yml\n\n```\nconstraints:  tagRelationships:    next: ['react']\n```\n\nOn the project side, we would configure [`moon.yml`](/docs/config/project#tags) like so:\n\napp/moon.yml\n\n```\ntags: ['next']dependsOn: ['components']\n```\n\npackages/components/moon.yml\n\n```\ntags: ['react']\n```\n\n## `docker`v1.27.0\n\nConfigures Docker integration for the entire workspace.\n\n### `prune`\n\nConfigures aspects of the Docker pruning process when\n[`moon docker prune`](/docs/commands/docker/prune) is executed.\n\n#### `deleteVendorDirectories`\n\nAutomatically delete vendor directories (package manager dependencies, build targets, etc) while\npruning. For example, `node_modules` for JavaScript, or `target` for Rust. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\ndocker:  prune:    deleteVendorDirectories: false\n```\n\nThis process happens before toolchain dependencies are installed.\n\n#### `installToolchainDependencies`\n\nAutomatically install production dependencies for all required toolchain's of the focused projects\nwithin the Docker build. For example, `node_modules` for JavaScript. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\ndocker:  prune:    installToolchainDependencies: false\n```\n\nThis process happens after vendor directories are deleted.\n\n### `scaffold`\n\nConfigures aspects of the Docker scaffolding process when\n[`moon docker scaffold`](/docs/commands/docker/scaffold) is executed. Only applies to the\n[workspace skeleton](/docs/commands/docker/scaffold#workspace).\n\n#### `configsPhaseGlobs`\n\nList of globs in which to copy additional workspace-relative files into the `.moon/docker/workspace`\nskeleton. When not defined, does nothing.\n\n.moon/workspace.yml\n\n```\ndocker:  scaffold:    configsPhaseGlobs:      - '**/package.json'\n```\n\n## `experiments`v1.11.0\n\nEnable or disable experiments that alter core functionality.\n\nwarning\n\nExperiments are a work in progress and may be buggy. Please report any issues you encounter!\n\n### `fasterGlobWalk`v1.34.0\n\nUtilizes a new concurrent glob walking implementation that is on average, 1.5-2x faster than the\ncurrent implementation. Additionally, common globs are now cached for the duration of the process.\nDefaults to `true`.\n\n.moon/workspace.yml\n\n```\nexperiments:  fasterGlobWalk: true\n```\n\n### `gitV2`v1.34.0\n\nUtilizes a Git implementation, that has better support for submodules, subtrees, and workspaces.\nAdditionally, processes are parallized when applicable. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\nexperiments:  gitV2: true\n```\n\n## `generator`\n\nConfigures aspects of the template generator.\n\n### `templates`\n\nA list of paths in which templates can be located. Supports the following types of paths, and\ndefaults to `./templates`.\n\n- File system paths, relative from the workspace root.\n\n- Git repositories and a revision, prefixed with `git://`. v1.23.0\n\n- npm packages and a version, prefixed with `npm://`. v1.23.0\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates'    - 'file://./other/templates'    - 'git://github.com/moonrepo/templates#master'    - 'npm://@moonrepo/templates#1.2.3'\n```\n\nLearn more about this in the official\n[code generation guide](/docs/guides/codegen#configuring-template-locations)!\n\n## `hasher`\n\nConfigures aspects of the smart hashing layer.\n\n### `ignoreMissingPatterns`v1.10.0\n\nWhen [`hasher.warnOnMissingInputs`](#warnonmissinginputs) is enabled, moon will log a warning to the\nterminal that an input is missing. This is useful for uncovering misconfigurations, but can be quite\nnoisy when inputs are truly optional.\n\nTo ignore warnings for missing inputs, a list of [glob patterns](/docs/concepts/file-pattern#globs) can\nbe configured to filter and ignore files. Files are matched against workspace relative paths, so\nprefixing patterns with `**/` is suggested.\n\n.moon/workspace.yml\n\n```\nhasher:  ignoreMissingPatterns:    - '**/.eslintrc.*'    - '**/*.config.*'\n```\n\n### `ignorePatterns`v1.10.0\n\nA list of [glob patterns](/docs/concepts/file-pattern#globs) used to filter and ignore files during the\ninputs hashing process. Files are matched against workspace relative paths, so prefixing patterns\nwith `**/` is suggested.\n\n.moon/workspace.yml\n\n```\nhasher:  ignorePatterns:    - '**/*.png'\n```\n\n### `optimization`\n\nDetermines the optimization level to utilize when hashing content before running targets.\n\n- `accuracy` (default) - When hashing dependency versions, utilize the resolved value in the lockfile. This requires parsing the lockfile, which may reduce performance.\n\n- `performance` - When hashing dependency versions, utilize the value defined in the manifest. This is typically a version range or requirement.\n\n.moon/workspace.yml\n\n```\nhasher:  optimization: 'performance'\n```\n\n### `walkStrategy`\n\nDefines the file system walking strategy to utilize when discovering inputs to hash.\n\n- `glob` - Walks the file system using glob patterns.\n\n- `vcs` (default) - Calls out to the [VCS](#vcs) to extract files from its working tree.\n\n.moon/workspace.yml\n\n```\nhasher:  walkStrategy: 'glob'\n```\n\n### `warnOnMissingInputs`\n\nWhen enabled, will log warnings to the console when attempting to hash an input that does not exist.\nThis is useful in uncovering misconfigured tasks. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\nhasher:  warnOnMissingInputs: false\n```\n\n## `notifier`\n\nConfigures how moon notifies and interacts with a developer or an external system.\n\n### `terminalNotifications`v1.38.0\n\nWhen defined, will display OS notifications for action pipeline events when running commands from a\nterminal. Supports the following values:\n\n- `always` - Display on pipeline success and failure.\n\n- `failure` - Display on pipeline failure only.\n\n- `success` - Display on pipeline success only.\n\n- `task-failure` - Display for each task failure.\n\n.moon/workspace.yml\n\n```\nnotifier:  terminalNotifications: 'always'\n```\n\n### `webhookUrl`\n\nDefines an HTTPS URL that all pipeline events will be posted to. View the\n[webhooks guide for more information](/docs/guides/webhooks) on available events.\n\n.moon/workspace.yml\n\n```\nnotifier:  webhookUrl: 'https://api.company.com/some/endpoint'\n```\n\n### `acknowledge`\n\nWhen enabled, webhook notifier will wait for request result and validates the return code for 2xx.\nDefaults to `false`.\n\nwarning\n\nActivating this setting will slow down your pipeline, because every webhook request will be\nevaluated!\n\n.moon/workspace.yml\n\n```\nnotifier:  webhookUrl: 'https://api.company.com/some/endpoint'  webhookAcknowledge: true\n```\n\n## `pipeline`\n\nConfigures aspects of task running and the action pipeline.\n\n### `autoCleanCache`v1.24.0\n\nAutomatically cleans cached artifacts older than [`cacheLifetime`](#cachelifetime) from the cache\ndirectory (`.moon/cache`) after every run. This is useful for keeping the cache directory lean.\nDefaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  autoCleanCache: false\n```\n\n### `cacheLifetime`\n\nThe maximum lifetime of cached artifacts before they're marked as stale and automatically removed by\nthe action pipeline. Defaults to \"7 days\". This field requires an integer and a timeframe unit that\ncan be [parsed as a duration](https://docs.rs/humantime/2.1.0/humantime/fn.parse_duration.html).\n\n.moon/workspace.yml\n\n```\npipeline:  cacheLifetime: '24 hours'\n```\n\n### `inheritColorsForPipedTasks`\n\nForce colors to be inherited from the current terminal for all tasks that are ran as a child process\nand their output is piped to the action pipeline. Defaults to `true`.\n[View more about color handling in moon](/docs/commands/overview#colors).\n\n.moon/workspace.yml\n\n```\npipeline:  inheritColorsForPipedTasks: true\n```\n\n### `installDependencies`v1.34.0\n\nWhen enabled, runs the\n[`InstallWorkspaceDeps` and `InstallProjectDeps` actions](/docs/how-it-works/action-graph#install-dependencies)\nwithin the pipeline before running an applicable task. Installation is determined based on changed\nmanifests and lockfiles. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  installDependencies: false\n```\n\nInstead of a boolean, a list of toolchain IDs can be provided to only allow those toolchains to\ninstall dependencies.\n\n.moon/workspace.yml\n\n```\npipeline:  installDependencies: ['node']\n```\n\n### `killProcessThreshold`v1.32.1\n\nThreshold in milliseconds in which to force kill running child processes after the pipeline receives\nan external signal (like `SIGINT` or `SIGTERM`). A value of 0 will not kill the process and let them\nrun to completion. Defaults to `2000` (2 seconds).\n\n.moon/workspace.yml\n\n```\npipeline:  killProcessThreshold: 5000\n```\n\n### `logRunningCommand`\n\nWhen enabled, will log the task's command, resolved arguments, and working directory when a target\nis ran. Defaults to `false`.\n\n.moon/workspace.yml\n\n```\npipeline:  logRunningCommand: true\n```\n\n### `syncProjects`v1.34.0\n\nWhen enabled, runs the [`SyncProject` action](/docs/how-it-works/action-graph#sync-project) within the\npipeline before running an applicable task. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  syncProjects: false\n```\n\nInstead of a boolean, a list of project IDs can be provided to only sync those projects.\n\n.moon/workspace.yml\n\n```\npipeline:  syncProjects: ['app']\n```\n\nThe [`moon sync projects`](/docs/commands/sync/projects) command can be executed to manually sync\nprojects.\n\n### `syncWorkspace`v1.34.0\n\nWhen enabled, runs the [`SyncWorkspace` action](/docs/how-it-works/action-graph#sync-workspace) within\nthe pipeline before all other actions. This syncing includes operations such as codeowners, VCS\nhooks, and more. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\npipeline:  syncWorkspace: false\n```\n\nThe [`moon sync ...`](/docs/commands/sync) sub-commands can be executed to manually sync features.\n\n## `remote`v1.30.0\n\nConfigures a remote service, primarily for cloud-based caching of artifacts. Learn more about this\nin the [remote caching](/docs/guides/remote-cache) guide.\n\n### `api`v1.32.0\n\nThe API format of the remote server. This format dictates which type of client moon uses for\ncommunicating with. Supports the following:\n\n- `grpc` (default) - Uses the gRPC API: [https://github.com/bazelbuild/remote-apis](https://github.com/bazelbuild/remote-apis)\n\n- `http` - Uses the HTTP API: [https://bazel.build/remote/caching#http-caching](https://bazel.build/remote/caching#http-caching)\n\n.moon/workspace.yml\n\n```\nremote:  api: 'grpc'\n```\n\n### `auth`v1.32.0\n\nConfigures authorization and authentication level features of our remote clients.\n\n#### `headers`v1.32.0\n\nA mapping of HTTP headers to include in all requests to the remote server. These headers are applied\nto all [API formats and protocols](#api), not just HTTP.\n\n.moon/workspace.yml\n\n```\nremote:  auth:    headers:      'X-Custom-Header': 'value'\n```\n\n#### `token`v1.32.0\n\nThe name of an environment variable in which to extract a token for\n[Bearer HTTP authorization](https://swagger.io/docs/specification/v3_0/authentication/bearer-authentication/).\nAn `Authorization` HTTP header will be included in all requests to the remote server.\n\nIf the token does not exist, or is not enabled, remote caching will be disabled.\n\n.moon/workspace.yml\n\n```\nremote:  auth:    token: 'ENV_VAR_NAME'\n```\n\n### `cache`\n\nConfigures aspects of the caching layer, primarily the action cache (AC) and content addressable\ncache (CAS).\n\n#### `compression`v1.31.0\n\nThe compression format to use when uploading/downloading blobs. Supports `none` and `zstd`, and\ndefaults to no compression (`identity` format in RE API).\n\n.moon/workspace.yml\n\n```\nremote:  cache:    compression: 'zstd'\n```\n\ninfo\n\nCompression is only applied to gRPC based APIs, not HTTP.\n\n#### `instanceName`\n\nA\n[unique identifier](https://github.com/bazelbuild/remote-apis/blob/main/build/bazel/remote/execution/v2/remote_execution.proto#L223)\nused to distinguish between the various instances on the host. This allows the same remote service\nto serve and partition multiple moon repositories. Defaults to `moon-outputs`.\n\n.moon/workspace.yml\n\n```\nremote:  cache:    instanceName: 'custom-dir-name'\n```\n\nWe suggest changing the instance name to the name of your repository!\n\n#### `localReadOnly`v1.40.0\n\nWhen enabled and developing locally, existing remote blobs will only be downloaded, but new local\nblobs will not be uploaded. Blobs will only be uploaded in CI environments.\n\n.moon/workspace.yml\n\n```\nremote:  cache:    localReadOnly: true\n```\n\n#### `verifyIntegrity`v1.36.0\n\nWhen downloading blobs, verify the digests/hashes in the response match the associated blob\ncontents. This will reduce performance but ensure partial or corrupted blobs won't cause failures.\nDefaults to `false`.\n\n.moon/workspace.yml\n\n```\nremote:  cache:    verifyIntegrity: true\n```\n\n### `host`\n\nThe host URL to communicate with when uploading and downloading artifacts. Supports both\n`grpc(s)://` and `http(s)://` protocols. This field is required!\n\n.moon/workspace.yml\n\n```\nremote:  host: 'grpcs://your-host.com:9092'\n```\n\n### `mtls`\n\nConnect to the host using server and client authentication with mTLS. This takes precedence over\nnormal TLS.\n\n.moon/workspace.yml\n\n```\nremote:  # ...  mtls:    caCert: 'certs/ca.pem'    clientCert: 'certs/client.pem'    clientKey: 'certs/client.key'    domain: 'your-host.com'\n```\n\n#### `assumeHttp2`\n\nIf true, assume that the host supports HTTP/2, even if it doesn't provide protocol negotiation via\nALPN.\n\n#### `caCert`\n\nA file path, relative from the workspace root, to the certificate authority PEM encoded X509\ncertificate (typically `ca.pem`).\n\n#### `clientCert`\n\nA file path, relative from the workspace root, to the client's PEM encoded X509 certificate\n(typically `client.pem`).\n\n#### `clientKey`\n\nA file path, relative from the workspace root, to the client's PEM encoded X509 private key\n(typically `client.key`).\n\n#### `domain`\n\nThe domain name in which to verify the TLS certificate.\n\n### `tls`\n\nConnect to the host using server-only authentication with TLS.\n\n.moon/workspace.yml\n\n```\nremote:  # ...  tls:    cert: 'certs/ca.pem'    domain: 'your-host.com'\n```\n\n#### `assumeHttp2`\n\nIf true, assume that the host supports HTTP/2, even if it doesn't provide protocol negotiation via\nALPN.\n\n#### `cert`\n\nA file path, relative from the workspace root, to the certificate authority PEM encoded X509\ncertificate (typically `ca.pem`).\n\n#### `domain`\n\nThe domain name in which to verify the TLS certificate.\n\n## `telemetry`\n\nWhen enabled, will check for a newer moon version and send anonymous usage data to the moonrepo\nteam. This data is used to improve the quality and reliability of the tool. Defaults to `true`.\n\n.moon/workspace.yml\n\n```\ntelemetry: false\n```\n\n## `vcs`\n\nConfigures the version control system to utilize within the workspace (and repository). A VCS is\nrequired for determining touched (added, modified, etc) files, calculating file hashes, computing\naffected files, and much more.\n\n### `defaultBranch`\n\nDefines the default branch in the repository for comparing differences against. For git, this is\ntypically \"master\" (default) or \"main\".\n\n.moon/workspace.yml\n\n```\nvcs:  defaultBranch: 'master'\n```\n\n### `hooks`v1.9.0\n\nDefines a mapping of hooks to a list of commands to run when that event is triggered. There are no\nrestrictions to what commands can be run, but the binaries for each command must exist on each\nmachine that will be running hooks.\n\nFor Git, each [hook name](https://git-scm.com/docs/githooks#_hooks) must be a valid kebab-cased\nname. [Learn more about Git hooks](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks).\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    pre-commit:      - 'moon run :lint :format --affected --status=staged --no-bail'      - 'another-command'\n```\n\ninfo\n\nIf running `moon` commands directly, the `moon` binary must be installed globally!\n\n### `hookFormat`v1.29.0\n\nThe shell and file type in which generated hook files are formatted with. Supports the following:\n\n- `native` (default) - The format native to the current operating system. Bash on Unix, and PowerShell on Windows.\n\n- `bash` - Forces the format to Bash for all operating systems.\n\n.moon/workspace.yml\n\n```\nvcs:  hookFormat: 'bash'\n```\n\n### `client`\n\nDefines the VCS tool/binary that is being used for managing the repository. Accepts \"git\" (default).\nExpect more version control systems in the future!\n\n.moon/workspace.yml\n\n```\nvcs:  client: 'git'\n```\n\n### `provider`v1.8.0\n\nDefines the service provider that the repository is hosted on. Accepts \"github\" (default), \"gitlab\",\n\"bitbucket\", or \"other\".\n\n.moon/workspace.yml\n\n```\nvcs:  provider: 'github'\n```\n\n### `remoteCandidates`\n\n(Git only) Defines a list of remote candidates to query against to determine merge bases. Defaults\nto \"origin\" and \"upstream\".\n\n.moon/workspace.yml\n\n```\nvcs:  remoteCandidates:    - 'origin'    - 'upstream'\n```\n\n### `sync`v1.9.0\n\nWill automatically generate [hook scripts](#hooks) to `.moon/hooks` and sync the scripts to the\nlocal VCS checkout. The hooks format and location is based on the [`vcs.client`](#client) setting.\nDefaults to `false`.\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    # ...  sync: true\n```\n\ncaution\n\nWhen enabled, this will sync hooks for all users of the repository. For personal or small\nprojects, this may be fine, but for larger projects, this may be undesirable and disruptive!\n\n## `versionConstraint`\n\nDefines a version requirement for the currently running moon binary. This provides a mechanism for\nenforcing that the globally installed moon on every developers machine is using an applicable\nversion.\n\n.moon/workspace.yml\n\n```\nversionConstraint: '>=0.20.0'\n```\n\n## /docs/create-project\n\nSource: https://moonrepo.dev/docs/create-project\n\n# Create a project\n\n3 min\n\nWith a [workspace](/docs/setup-workspace), we can now house one or many [projects](/docs/concepts/project),\nwith a project being an application, library, or tool. In the end, each project will have its own\nbuild layer, personal tasks, and custom configuration.\n\n## Declaring a project in the workspace\n\nAlthough a project may exist in your repository, it's not accessible from moon until it's been\nmapped in the [`projects`](/docs/config/workspace#projects) setting found in\n[`.moon/workspace.yml`](/docs/config/workspace). When mapping a project, we require a unique name for\nthe project, and a project source location (path relative from the workspace root).\n\nLet's say we have a frontend web application called \"client\", and a backend application called\n\"server\", our `projects` setting would look like the following.\n\n.moon/workspace.yml\n\n```\nprojects:  client: 'apps/client'  server: 'apps/server'\n```\n\nWe can now run [`moon project client`](/docs/commands/project) and\n[`moon project server`](/docs/commands/project) to display information about each project. If these\nprojects were not mapped, or were pointing to an invalid source, the command would throw an error.\n\nsuccess\n\nThe [`projects`](/docs/config/workspace#projects) setting also supports a list of globs, if you'd prefer\nto not manually curate the projects list!\n\n## Configuring a project\n\nA project can be configured in 1 of 2 ways:\n\n- Through the [`.moon/tasks/all.yml`](/docs/config/tasks) config file, which defines file groups and tasks that are inherited by all projects within the workspace. Perfect for standardizing common tasks like linting, typechecking, and code formatting.\n\n- Through the [`moon.yml`](/docs/config/project) config file, found at the root of each project, which defines files groups, tasks, dependencies, and more that are unique to that project.\n\nBoth config files are optional, and can be used separately or together, the choice is yours!\n\nNow let's continue with our client and server example above. If we wanted to configure both\nprojects, and define config that's also shared between the 2, we could do something like the\nfollowing:\n\n- Client\n- Server\n- Both (inherited)\n\napps/client/moon.yml\n\n```\ntasks:  build:    command: 'vite dev'    inputs:      - 'src/**/*'    outputs:      - 'dist'\n```\n\napps/server/moon.yml\n\n```\ntasks:  build:    command: 'babel src --out-dir build'    inputs:      - 'src/**/*'    outputs:      - 'build'\n```\n\n.moon/tasks/all.yml\n\n```\ntasks:  format:    command: 'prettier --check .'  lint:    command: 'eslint --no-error-on-unmatched-pattern .'  test:    command: 'jest --passWithNoTests .'  typecheck:    command: 'tsc --build'\n```\n\n### Adding optional metadata\n\nWhen utilizing moon in a large monorepo or organization, ownership becomes very important, but also\ndifficult to maintain. To combat this problem, moon supports the\n[`project`](/docs/config/project#project) field within a project's [`moon.yml`](/docs/config/project)\nconfig.\n\nThis field is optional by default, but when defined it provides metadata about the project,\nspecifically around team ownership, which developers maintain the project, where to discuss it, and\nmore!\n\nFurthermore, we also support the [`layer`](/docs/config/project#layer) and\n[`language`](/docs/config/project#language) settings for a more granular breakdown of what exists in the\nrepository.\n\n/moon.yml\n\n```\nlayer: 'tool'language: 'typescript'project:  name: 'moon'  description: 'A repo management tool.'  channel: '#moon'  owner: 'infra.platform'  maintainers: ['miles.johnson']\n```\n\n## Next steps\n\n[Setup toolchain](/docs/setup-toolchain)[Configure `.moon/workspace.yml` further](/docs/config/workspace)[Configure `.moon/tasks/all.yml` further](/docs/config/tasks)[Configure `moon.yml` further](/docs/config/project)[Learn about projects](/docs/concepts/project)\n\n## /docs/create-task\n\nSource: https://moonrepo.dev/docs/create-task\n\n# Create a task\n\n6 min\n\nThe primary focus of moon is a task runner, and for it to operate in any capacity, it requires tasks\nto run. In moon, a task is a binary or system command that is ran as a child process within the\ncontext of a project (is the current working directory). Tasks are defined per project with\n[`moon.yml`](/docs/config/project), or inherited by many projects with\n[`.moon/tasks/all.yml`](/docs/config/tasks), but can also be inferred from a language's ecosystem\n([we'll talk about this later](/docs/migrate-to-moon)).\n\ntip\n\nChange the language dropdown at the top right to switch the examples!\n\n## Configuring a task\n\nMost  if not all projects  utilize the same core tasks: linting, testing, code formatting,\ntypechecking, and building. Because these are so universal, let's implement the build task within\na project using [`moon.yml`](/docs/config/project).\n\nBegin by creating the `moon.yml` file at the root of a project and add `build` to the\n[`tasks`](/docs/config/project#tasks) field, with a [`command`](/docs/config/project#command) parameter.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build'\n```\n\nBy itself, this isn't doing much, so let's add some arguments. Arguments can also be defined with\nthe [`args`](/docs/config/project#args) setting.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build --mode production --no-stats'\n```\n\nWith this, the task can be ran from the command line with\n[`moon run :build`](/docs/commands/run)! This is tasks in its most simplest form, but continue\nreading on how to take full advantage of our task runner.\n\n### Inputs\n\nOur task above works, but isn't very efficient as it always runs, regardless of what has changed\nsince the last time it has ran. This becomes problematic in continuous integration environments, not\njust locally.\n\nTo mitigate this problem, moon provides a system known as inputs, which are file paths, globs, and\nenvironment variables that are used by the task when it's ran. moon will use and compare these\ninputs to calculate whether to run, or to return the previous run state from the cache.\n\nIf you're a bit confused, let's demonstrate this by expanding the task with the\n[`inputs`](/docs/config/project#inputs) setting.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build --mode production --no-stats'    inputs:      - 'src/**/*'      - 'webpack.config.js'      - '/webpack-shared.config.js'\n```\n\nThis list of inputs may look complicated, but they are merely run checks. For example, when moon\ndetects a change in...\n\n- Any files within the `src` folder, relative from the project's root.\n\n- A config file in the project's root.\n\n- A shared config file in the workspace root (denoted by the leading `/`).\n\n...the task will be ran! If the change occurs outside of the project or outside the list of\ninputs, the task will not be ran.\n\ntip\n\nInputs are a powerful feature that can be fine-tuned to your project's need. Be as granular or open\nas you want, the choice is yours!\n\n### Outputs\n\nOutputs are the opposite of [inputs](#inputs), as they are files and folders that are created as a\nresult of running the task. With that being said, outputs are optional, as not all tasks require\nthem, and the ones that do are typically build related.\n\nNow why is declaring outputs important? For incremental builds and smart caching! When moon\nencounters a build that has already been built, it hydrates all necessary outputs from the cache,\nthen immediately exits. No more waiting for long builds!\n\nContinuing our example, let's route the built files and expand our task with the\n[`outputs`](/docs/config/project#outputs) setting.\n\n/moon.yml\n\n```\nlanguage: 'javascript'tasks:  build:    command: 'webpack build --mode production --no-stats --output-path @out(0)'    inputs:      - 'src/**/*'      - 'webpack.config.js'      - '/webpack-shared.config.js'    outputs:      - 'build'\n```\n\n## Depending on other tasks\n\nFor scenarios where you need run a task before another task, as you're expecting some repository\nstate or artifact to exist, can be achieved with the [`deps`](/docs/config/project#deps) setting, which\nrequires a list of [targets](/docs/concepts/target):\n\n- `:` - Full canonical target.\n\n- `~:` or `` - A task within the current project.\n\n- `^:` - A task from all [depended on projects](/docs/concepts/project#dependencies).\n\n/moon.yml\n\n```\ndependsOn:  # ...tasks:  build:    # ...    deps:      - '^:build'\n```\n\n## Using file groups\n\nOnce you're familiar with configuring tasks, you may notice certain inputs being repeated\nconstantly, like source files, test files, and configuration. To reduce the amount of boilerplate\nrequired, moon provides a feature known as [file groups](/docs/concepts/file-group), which enables\ngrouping of similar file types within a project using\n[file glob patterns or literal file paths](/docs/concepts/file-pattern).\n\nFile groups are defined with the [`fileGroups`](/docs/config/project#filegroups) setting, which maps a\nlist of file paths/globs to a group, like so.\n\n/moon.yml\n\n```\nfileGroups:  configs:    - '*.config.js'  sources:    - 'src/**/*'    - 'types/**/*'  tests:    - 'tests/**/*'\n```\n\nWe can then replace the inputs in our task above with these new file groups using a syntax known as\n[tokens](/docs/concepts/token), specifically the [`@globs`](/docs/concepts/token#globs) and\n[`@files`](/docs/concepts/token#files) token functions. Tokens are an advanced feature, so please refer\nto their documentation for more information!\n\n/moon.yml\n\n```\nlanguage: 'javascript'fileGroups:  # ...tasks:  build:    command: 'webpack build --mode production --no-stats --output-path @out(0)'    inputs:      - '@globs(sources)'      - 'webpack.config.js'      - '/webpack-shared.config.js'    outputs:      - 'build'\n```\n\nWith file groups (and tokens), you're able to reduce the amount of configuration required and\nencourage certain file structures for consuming projects!\n\n## Next steps\n\n[Run a task](/docs/run-task)[Configure `.moon/tasks/all.yml` further](/docs/config/tasks)[Configure `moon.yml` further](/docs/config/project)[Learn about tasks](/docs/concepts/task)[Learn about tokens](/docs/concepts/token)\n\n## /docs/editors\n\nSource: https://moonrepo.dev/docs/editors\n\n- [Home](/)\n- [Editors](/docs/editors)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Editors\n\n[ VS CodeEnhance your VS Code experience with our integrated moon console! Whether you're a fan of the](/docs/editors/vscode)\n\n[template](/docs/config/template)\n\n[VS Code](/docs/editors/vscode)\n\n## /docs/editors/vscode\n\nSource: https://moonrepo.dev/docs/editors/vscode\n\n# VS Code extension\n\nEnhance your VS Code experience with our integrated moon console! Whether you're a fan of the\ncommand line, or prefer interactive interfaces, our console will be a welcome experience.\n\nThis extension is in its early stages. Expect more advanced features in the future, like\nautocompletion, config validation, and more!\n\n## Views\n\nAll views are available within the moon sidebar. Simply click the moon icon in the left activity\nbar!\n\n### Projects\n\nThe backbone of moon is the projects view. In this view, all moon configured projects will be\nlisted, categorized by their [`layer`](/docs/config/project#layer), [`stack`](/docs/config/project#stack),\nand designated with their [`language`](/docs/config/project#language).\n\nEach project can then be expanded to view all available tasks. Tasks can be ran by clicking the ``\nicon, or using the command palette.\n\nThis view is available in both the \"Explorer\" and \"moon\" sidebars.\n\n### Tags\n\nSimilar to the projects view, the tags view displays projects grouped by their\n[`tags`](/docs/config/project#tags).\n\nThis view is only available in the \"moon\" sidebar.\n\n### Last run\n\nInformation about the last ran task will be displayed in a beautiful table with detailed stats.\n\nThis table displays all actions that were ran alongside the primary target(s). They are ordered\ntopologically via the action graph.\n\n## Features\n\n### YAML validation\n\nTo enable accurate validation of our YAML configuration files, you'll need to update the\n`yaml.schemas` setting in `.vscode/settings.json` to point to the local schemas at\n`.moon/cache/schemas`.\n\nThis can be automated by running the \"moon: Append YAML schemas configuration to settings\" in the\ncommand palette, after the extension has been installed.\n\n## Troubleshooting\n\nView the\n[official VS Code marketplace](https://marketplace.visualstudio.com/items?itemName=moonrepo.moon-console)\nfor more information on the extension, its commands, available settings, and more!\n\nIf you encounter a bug, or have a feature request, please submit them to the\n[moonrepo/dev](https://github.com/moonrepo/dev/tree/master/packages/vscode-extension) repository!\n\n## /docs/faq\n\nSource: https://moonrepo.dev/docs/faq\n\n# FAQ\n\n## General\n\n### Where did the name \"moon\" come from?\n\nThe first incarnation of the name was a misspelling of monorepo (= moonrepo). This is where the\ndomain moonrepo.dev came from, and our official company, moonrepo, Inc.\n\nHowever, moonrepo is quite a long name with many syllables, and as someone who prefers short 1\nsyllable words, moon was perfect. The word moon also has great symmetry, as you can see in our logo!\n\nBut that's not all... moon is also an acronym. It originally stood for monorepo,\norganization, orchestration, and notification tool. But since moon can also be used for\npolyrepos, we replaced monorepo with management (as shown on the homepage). This is a great\nacronym, as it embraces what moon is trying to solve:\n\n- Manage repos, projects, and tasks with ease.\n\n- Organize projects and the repo to scale.\n\n- Orchestrate tasks as efficiently as possible.\n\n- Notify developers and systems about important events.\n\n### Will moon support other languages?\n\nYes! Although we're focusing right now on the web ecosystem (Node.js, Rust, Go, PHP, Python, etc),\nwe've designed moon to be language agnostic and easily pluggable in the future. View our\n[supported languages for more information](/docs#supported-languages).\n\n### Will moon support continuous deployment?\n\nYes! We plan to integrate CD with the current build and CI system, but we are focusing on the latter\n2 for the time being. Why not start using moon today so that you can easily adopt CD when it's\nready?\n\n### What should be considered the \"source of truth\"?\n\nIf you're a frontend developer, you'll assume that a `package.json` is the source of truth for a\nproject, as it defines scripts, dependencies, and repo-local relations. While true, this breaks down\nwith additional tooling, like TypeScript project references, as now you must maintain\n`tsconfig.json` as well as `package.json`. The risk of these falling out of sync is high.\n\nThis problem is further exacerbated by more tooling, or additional programming languages. What if\nyour frontend project is dependent on a backend project? This isn't easily modeled in\n`package.json`. What if the backend project needs to be built and ran before running the frontend\nproject? Again, while not impossible, it's quite cumbersome to model in `package.json` scripts. So\non and so forth.\n\nmoon aims to solve this with a different approach, by standardizing all projects in the workspace on\n[`moon.yml`](/docs/config/project). With this, the `moon.yml` is the source of truth for each project,\nand provides us with the following:\n\n- The configuration is language agnostic. All projects are configured in a similar manner.\n\n- Tasks can reference other tasks easily. For example, npm scripts referencing rake tasks, and vice verse, is a non-ideal experience.\n\n- Dependencies defined with [`dependsOn`](/docs/config/project#dependson) use moon project names, and not language specific semantics. This field also easily populates the dependency/project graphs.\n\n- For JavaScript projects: `package.json` dependencies (via `dependsOn`) are kept in sync when [`node.syncProjectWorkspaceDependencies`](/docs/config/toolchain#syncprojectworkspacedependencies) is enabled.\n\n- `tsconfig.json` project references (via `dependsOn`) are kept in sync when [`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) is enabled.\n\nBy using moon as the source of truth, we can ensure a healthy repository, by accurately keeping\neverything in sync, and modifying project/language configuration to operate effectively.\n\ninfo\n\nWith all that being said, moon supports\n[implicit dependency scanning](/docs/concepts/project#dependencies), if you'd prefer to continue\nutilizing language specific functionality, instead of migrating entirely to moon.\n\n### How to stop moon formatting JSON and YAML files?\n\nTo ensure a healthy repository state, moon constantly modifies JSON and YAML files, specifically\n`package.json` and `tsconfig.json`. This may result in a different formatting style in regards to\nindentation. While there is no way to stop or turn off this functionality, we respect\n[EditorConfig](https://editorconfig.org/) during this process.\n\nCreate a root `.editorconfig` file to enforce a consistent syntax.\n\n.editorconfig\n\n```\n[*.{json,yaml,yml}]indent_style = spaceindent_size = 4\n```\n\n## Projects & tasks\n\n### How to pipe or redirect tasks?\n\nPiping (`|`) or redirecting (`>`) the output of one moon task to another moon task, whether via\nstdin or through `inputs`, is not possible within our pipeline (task runner) directly.\n\nHowever, we do support this functionality on the command line, or within a task itself, using the\n[`script`](/docs/config/project#script) setting.\n\nmoon.yml\n\n```\ntasks:  pipe:    script: 'gen-json | jq ...'\n```\n\nAlternativaly, you can wrap this script in something like a Bash file, and execute that instead.\n\nscripts/pipe.sh\n\n```\n#!/usr/bin/env bashgen-json | jq ...\n```\n\nmoon.yml\n\n```\ntasks:  pipe:    command: 'bash ./scripts/pipe.sh'\n```\n\n### How to run multiple commands within a task?\n\nOnly [`script`](/docs/config/project#script) based tasks can run multiple commands via `&&` or `;`\nsyntax. This is possible as we execute the entire script within a shell, and not directly with the\ntoolchain.\n\nmoon.yml\n\n```\ntasks:  multiple:    script: 'mkdir test && cd test && do-something'\n```\n\n### How to run tasks in a shell?\n\nBy default, all tasks run in a shell, based on the task's [`shell`](/docs/config/project#shell) option,\nas demonstrated below:\n\nmoon.yml\n\n```\ntasks:  # Runs in a shell  global:    command: 'some-command-on-path'  # Custom shells  unix:    command: 'bash -c some-command'    options:      shell: false  windows:    command: 'pwsh.exe -c some-command'    options:      shell: false\n```\n\n### Can we run other languages?\n\nYes! Although our toolchain only supports a few languages at this time, you can still run other\nlanguages within tasks by setting their [`toolchain`](/docs/config/project#toolchain) to \"system\".\nSystem tasks are an escape hatch that will use any command available on the current machine.\n\nmoon.yml\n\n```\ntasks:  # Ruby  lint:    command: 'rubocop'    toolchain: 'system'  # PHP  test:    command: 'phpunit tests'    toolchain: 'system'\n```\n\nHowever, because these languages are not supported directly within our toolchain, they will not\nreceive the benefits of the toolchain. Some of which are:\n\n- Automatic installation of the language. System tasks expect the command to already exist in the environment, which requires the user to manually install them.\n\n- Consistent language and dependency manager versions across all machines.\n\n- Built-in cpu and heap profiling (language specific).\n\n- Automatic dependency installs when the lockfile changes.\n\n- And many more.\n\n## JavaScript ecosystem\n\n### Can we use `package.json` scripts?\n\nWe encourage everyone to define tasks in a [`moon.yml`](/docs/config/project#tasks) file, as it allows\nfor additional metadata like `inputs`, `outputs`, `options`, and more. However, if you'd like to\nkeep using `package.json` scripts, enable the\n[`node.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts) setting.\n\nView the [official documentation](/docs/migrate-to-moon) for more information on this approach,\nincluding risks, disadvantages, and caveats.\n\n### Can moon version/publish packages?\n\nAt this time, no, as we're focusing on the build and test aspect of development. With that being\nsaid, this is something we'd like to support first-class in the future, but until then, we suggest\nthe following popular tools:\n\n- [Yarn releases](https://yarnpkg.com/features/release-workflow) (requires >= v2)\n\n- [Changesets](https://github.com/changesets/changesets)\n\n- [Lerna](https://github.com/lerna/lerna)\n\n### Why is npm/pnpm/yarn install running twice when running a task?\n\nmoon will automatically install dependencies in a project or in the workspace root (when using\npackage workspaces) when the lockfile or `package.json` has been modified since the last time the\ninstall ran. If you are running a task and multiple installs are occurring (and it's causing\nissues), it can mean 1 of 2 things:\n\n- If you are using package workspaces, then one of the projects triggering the install is not listed within the `workspaces` field in the root `package.json` (for npm and yarn), or in `pnpm-workspace.yml` (for pnpm).\n\n- If the install is triggering in a non-JavaScript related project, then this project is incorrectly listed as a package workspace.\n\n- If you don't want a package included in the workspace, but do want to install its dependencies, then it'll need its own lockfile.\n\n## Troubleshooting\n\n### How to resolve the \"version 'GLIBC_X.XX' not found\" error?\n\nThis is typically caused by running moon in an old environment, like Ubuntu 18, and the minimum\nrequired libc doesn't exist or is too old. Since moon is Rust based, we're unable to support all\nenvironments and versions perpetually, and will only support relatively modern environments.\n\nThere's not an easy fix to this problem, but there are a few potential solutions, from easiest to\nhardest:\n\n- Run moon in a Docker container/image that has the correct environment and libs. For example, the `node:latest` image.\n\n- Upgrade the environment to a newer one. For example, Ubuntu 18 -> 22.\n\n- Try and install a newer libc ([more information](https://stackoverflow.com/questions/72513993/how-install-glibc-2-29-or-higher-in-ubuntu-18-04)).\n\nFor more information on this problem as a whole,\n[refer to this in-depth article](https://kobzol.github.io/rust/ci/2021/05/07/building-rust-binaries-in-ci-that-work-with-older-glibc.html).\n\n## /docs/guides/ci\n\nSource: https://moonrepo.dev/docs/guides/ci\n\n# Continuous integration (CI)\n\nAll companies and projects rely on continuous integration (CI) to ensure high quality code and to\navoid regressions. Because this is such a critical piece of every developer's workflow, we wanted to\nsupport it as a first-class feature within moon, and we do just that with the\n[`moon ci`](/docs/commands/ci) command.\n\n## How it works\n\nThe `ci` command does all the heavy lifting necessary for effectively running jobs. It achieves this\nby automatically running the following steps:\n\n- Determines touched files by comparing the current HEAD against a base.\n\n- Determines all [targets](/docs/concepts/target) that need to run based on touched files.\n\n- Additionally runs affected [targets](/docs/concepts/target) dependencies and dependents.\n\n- Generates an action and dependency graph.\n\n- Installs the toolchain, Node.js, and npm dependencies.\n\n- Runs all actions within the graph using a thread pool.\n\n- Displays stats about all passing, failed, and invalid actions.\n\n## Configuring tasks\n\nBy default, all tasks run in CI, as you should always be building, linting, typechecking, testing,\nso on and so forth. However, this isn't always true, so this can be disabled on a per-task basis\nthrough the [`runInCI`](/docs/config/project#runinci) or [`local`](/docs/config/project#local) options.\n\n```\ntasks:  dev:    command: 'webpack server'    options:      runInCI: false    # Or    preset: 'server'\n```\n\ncaution\n\nThis option must be set to false for tasks that spawn a long-running or never-ending process, like\nHTTP or development servers. To help mitigate this, tasks named `dev`, `start`, or `serve` are false\nby default. This can be easily controlled with the [`local`](/docs/config/project#local) setting.\n\n## Integrating\n\nThe following examples can be referenced for setting up moon and its CI workflow in popular\nproviders. For GitHub, we're using our\n[`setup-toolchain` action](https://github.com/moonrepo/setup-toolchain) to install moon. For other\nproviders, we assume moon is an npm dependency and must be installed with Node.js.\n\n- GitHub\n- Buildkite\n- CircleCI\n- TravisCI\n\n.github/workflows/ci.yml\n\n```\nname: 'Pipeline'on:  push:    branches:      - 'master'  pull_request:jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      - uses: 'actions/checkout@v4'        with:          fetch-depth: 0      - uses: 'moonrepo/setup-toolchain@v0'      - run: 'moon ci'\n```\n\n.buildkite/pipeline.yml\n\n```\nsteps:  - label: 'CI'    commands:      - 'yarn install --immutable'      - 'moon ci'\n```\n\n.circleci/config.yml\n\n```\nversion: 2.1orbs:  node: 'circleci/node@5.0.2'jobs:  ci:    docker:      - image: 'cimg/base:stable'    steps:      - checkout      - node/install:          install-yarn: true          node-version: '16.13'      - node/install-packages:          check-cache: 'always'          pkg-manager: 'yarn-berry'      - run: 'moon ci'workflows:  pipeline:    jobs:      - 'ci'\n```\n\n.travis.yml\n\n```\nlanguage: node_jsnode_js:  - 16cache: yarnscript: 'moon ci'\n```\n\n## Choosing targetsv1.14.0\n\nBy default `moon ci` will run all tasks from all projects that are affected by touched files and\nhave the [`runInCI`](/docs/config/project#runinci) task option enabled. This is a great catch-all\nsolution, but may not vibe with your workflow or requirements.\n\nIf you'd prefer more control, you can pass a list of targets to `moon ci`, instead of moon\nattempting to detect them. When providing targets, `moon ci` will still only run them if affected by\ntouched files, but will still filter with the `runInCI` option.\n\n```\n# Run all builds$ moon ci :build# In another job, run tests$ moon ci :test :lint\n```\n\n## Comparing revisions\n\nBy default the command will attempt to detect the base and head revisions automatically based on the\ncurrent CI provider (powered by the [`ci_env`](https://github.com/milesj/rust-cicd-env) Rust crate).\nIf nothing was detected, this will fallback to the configured\n[`vcs.defaultBranch`](/docs/config/workspace#defaultbranch) for the base revision, and `HEAD` for the\nhead revision.\n\nThese values can be customized with the `--base` and `--head` command line options, or the\n`MOON_BASE` and `MOON_HEAD` environment variables, which takes highest precedence.\n\n```\n$ moon ci --base  --head # Or$ MOON_BASE= MOON_HEAD= moon ci\n```\n\n## Parallelizing tasks\n\nIf your CI environment supports sharding across multiple jobs, then you can utilize moon's built in\nparallelism by passing `--jobTotal` and `--job` options. The `--jobTotal` option is an integer of\nthe total number of jobs available, and `--job` is the current index (0 based) amongst the total.\n\nWhen these options are passed, moon will only run affected [targets](/docs/concepts/target) based on\nthe current job slice.\n\n- GitHub\n- Buildkite\n- CircleCI\n- TravisCI\n\nGitHub Actions do not support native parallelism, but it can be emulated using it's matrix.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    # ...    strategy:      matrix:        index: [0, 1]    steps:      # ...      - run: 'moon ci --job ${{ matrix.index }} --jobTotal 2'\n```\n\n- [Documentation](https://docs.github.com/en/actions/using-jobs/using-a-matrix-for-your-jobs)\n\n.buildkite/pipeline.yml\n\n```\n# ...steps:  - label: 'CI'    parallelism: 10    commands:      # ...      - 'moon ci --job $$BUILDKITE_PARALLEL_JOB --jobTotal $$BUILDKITE_PARALLEL_JOB_COUNT'\n```\n\n- [Documentation](https://buildkite.com/docs/tutorials/parallel-builds#parallel-jobs)\n\n.circleci/config.yml\n\n```\n# ...jobs:  ci:    # ...    parallelism: 10    steps:      # ...      - run: 'moon ci --job $CIRCLE_NODE_INDEX --jobTotal $CIRCLE_NODE_TOTAL'\n```\n\n- [Documentation](https://circleci.com/docs/2.0/parallelism-faster-jobs/)\n\nTravisCI does not support native parallelism, but it can be emulated using it's matrix.\n\n.travis.yml\n\n```\n# ...env:  global:    - TRAVIS_JOB_TOTAL=2  jobs:    - TRAVIS_JOB_INDEX=0    - TRAVIS_JOB_INDEX=1script: 'moon ci --job $TRAVIS_JOB_INDEX --jobTotal $TRAVIS_JOB_TOTAL'\n```\n\n- [Documentation](https://docs.travis-ci.com/user/speeding-up-the-build/)\n\nYour CI environment may provide environment variables for these 2 values.\n\n## Caching artifacts\n\nWhen a CI pipeline reaches a certain scale, its run times increase, tasks are unnecessarily ran, and\nbuild artifacts are not shared. To combat this, we support [remote caching](/docs/guides/remote-cache), a\nmechanism where we store build artifacts in the cloud, and sync these artifacts to machines on\ndemand.\n\n### Manual persistence\n\nIf you'd prefer to not use remote caching at this time, you can cache artifacts yourself, by\npersisting the `.moon/cache/{hashes,outputs}` directories. All other files and folders in\n`.moon/cache` should not be persisted, as they are not safe/portable across machines.\n\nHowever, because tasks can generate a different hash each run, you'll need to manually invalidate\nyour cache. Blindly storing the `hashes` and `outputs` directories without a mechanism to invalidate\nwill simply not work, as the contents will drastically change between CI runs. This is the primary\nreason why the remote caching service exists.\n\n## Reporting run results\n\nIf you're using GitHub Actions as your CI provider, we suggest using our\n[`moonrepo/run-report-action`](https://github.com/marketplace/actions/moon-ci-run-reports). This\naction will report the results of a [`moon ci`](/docs/commands/ci) run to a pull request as a comment\nand workflow summary.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      # ...      - run: 'moon ci'      - uses: 'moonrepo/run-report-action@v1'        if: success() || failure()        with:          access-token: ${{ secrets.GITHUB_TOKEN }}\n```\n\nThe report looks something like the following:\n\n### Community offerings\n\nThe following GitHub actions are provided by the community:\n\n- [`appthrust/moon-ci-retrospect`](https://github.com/appthrust/moon-ci-retrospect) - Displays the results of a `moon ci` run in a more readable fashion.\n\n- [`kymckay/moon-ci-booster`](https://github.com/kymckay/moon-ci-booster) - Displays failing `moon ci` tasks as comments with error logs directly on your pull request.\n\n## /docs/guides/codegen\n\nSource: https://moonrepo.dev/docs/guides/codegen\n\n# Code generation\n\nCode generation provides an easy mechanism for automating common development workflows and file\nstructures. Whether it's scaffolding a new library or application, updating configuration, or\nstandardizing patterns.\n\nTo accomplish this, we provide a generator, which is divided into two parts. The first being the\ntemplates and their files to be scaffolded. The second is our rendering engine that writes template\nfiles to a destination.\n\n## Creating a new template\n\nTo create a new template, run [`moon generate`](/docs/commands/generate) while passing the `--template` option. This\nwill create a template directory and [`template.yml`](/docs/config/template) file in the 1st file-based template\nlocation defined in [`generator.templates`](/docs/config/workspace#templates).\n\n```\n$ moon generate  --template\n```\n\n### Configuring `template.yml`\n\nEvery template requires a [`template.yml`](/docs/config/template) file in the template's directory root. This file\nacts as a schema and declares metadata and variables required by the generator.\n\ntemplate.yml\n\n```\ntitle: 'npm package'description: |  Scaffolds the initial structure for an npm package,  including source and test folders, a package.json, and more.variables:  name:    type: 'string'    default: ''    required: true    prompt: 'Package name?'\n```\n\n### Managing files\n\nFeel free to add any files and folders to the template that you'd like to be generated by consumers!\nThese files will then be scaffolded 1:1 in structure at the target destination.\n\nAn example of the templates folder structure may look something like the following:\n\n```\ntemplates/ npm-package/    src/    tests/    package.json    template.yml react-app/\n```\n\n#### Interpolation\n\nVariables can be interpolated into file paths using the form `[varName]`. For example, if you had a\ntemplate file `src/[type].ts`, and a variable `type` with a value of \"bin\", then the destination\nfile path would be `src/bin.ts`.\n\nThis syntax also supports [filters](#filters), such as `[varName | camel_case]`. However, spaces may\ncause issues with file path encoding, so this functionality is primarily recommended for the\n[`destination`](/docs/config/template#destination) setting.\n\n#### File extensions\n\nTo enable syntax highlighting for template engine syntax, you may use the `.tera` (preferred) or\n`.twig` file extensions. These extensions are optional, but will be removed when the files are\ngenerated.\n\nDepending on your preferred editor, these extensions may be supported through a plugin, or can be\nconfigured based on file type.\n\n- VS Code [Tera extension](https://marketplace.visualstudio.com/items?itemName=karunamurti.tera)\n\n- [Twig extension](https://marketplace.visualstudio.com/items?itemName=mblode.twig-language-2)\n\n- Atom [Twig package](https://atom.io/packages/atom-twig)\n\n- Webstorm [Twig plugin](https://plugins.jetbrains.com/plugin/7303-twig)\n\n#### Partials\n\nPartials are special template files that are used for\n[composition](https://keats.github.io/tera/docs/#include) and\n[inheritance](https://keats.github.io/tera/docs/#inheritance). Because of this, these files should\nnot be generated into the target destination, and do not support frontmatter.\n\nTo ensure they are not generated, include the word \"partial\" anywhere in the file path. For example,\n`partials/header.tpl` or `header.partial.tpl`.\n\n#### Rawsv1.11.0\n\nRaw template files are another special type of file that bypass all Tera rendering, and are used\nas-is instead. This is useful for files that contain syntax that conflicts with Tera.\n\nTo mark a file as raw, add a `.raw` extension, for example: `file.raw.js` or `file.js.raw`. When the\nfile is generated, the `.raw` extension will be removed.\n\n#### Frontmatter\n\nFrontmatter is a well-known concept for \"per-file configuration\", and is achieved by inserting YAML\nat the top of the file, delimited by wrapping `---`. This is a very powerful feature that provides\nmore control than the alternatives, and allows for some very cool integrations.\n\nmoon's frontmatter supports functionality like file skipping, force overwriting, and destination\npath rewriting.\n[View the configuration docs for a full list of supported fields](/docs/config/template#frontmatter).\n\npackage.json\n\n```\n---force: true---{  \"name\": \"{{ name | kebab_case }}\",  \"version\": \"0.0.1\"}\n```\n\nSince frontmatter exists in the file itself, you can take advantage of the rendering engine to\npopulate the field values dynamically. For example, if you're scaffolding a React component, you can\nconvert the component name and file name to PascalCase.\n\n```\n{% set component_name = name | pascal_case %}---to: components/{{ component_name }}.tsx---export function {{ component_name }}() {  return\n;}\n```\n\n#### Assets\n\nAssets are binary files that are copied as-is to the destination, without any rendering, and no\nsupport for frontmatter. This applies to all non-text based files, like images, audio, video, etc.\n\n### Template engine & syntax\n\nRendering templates is powered by [Tera](https://keats.github.io/tera/), a Rust based template\nengine with syntax similar to Twig, Liquid, Django, and more. We highly encourage everyone to read\nTera's documentation for an in-depth understanding, but as a quick reference, Tera supports the\nfollowing:\n\n- [Variable interpolation](https://keats.github.io/tera/docs/#variables) (defined with the [`variables`](/docs/config/template#variables) setting), with [built-in filters](https://keats.github.io/tera/docs/#built-in-filters).\n\n```\n{{ varName }} -> foo{{ varName | upper }} -> FOO\n```\n\n- [Conditional blocks](https://keats.github.io/tera/docs/#if) and [loops](https://keats.github.io/tera/docs/#for).\n\n```\n{% if price  1000 and not rich %}  That's expensive!{% else %}  N/A{% endif %}\n```\n\n```\n{% for item in items %}  {{ loop.index }} - {{ item.name }}{% endfor %}\n```\n\n- And many more features, like auto-escaping, white space control, and math operators!\n\n#### Filters\n\nFilters are a mechanism for transforming values during interpolation and are written using pipes\n(`|`). Tera provides many [built-in filters](https://keats.github.io/tera/docs/#built-in-filters),\nbut we also provide the following custom filters:\n\n- Strings - `camel_case`, `pascal_case`, `snake_case`, `upper_snake_case`, `kebab_case`, `upper_kebab_case`, `lower_case`, `upper_case`\n\n```\n{{ some_value | upper_case }}\n```\n\n- Paths - `path_join`, `path_relative`\n\n```\n{{ some_path | path_join(part = \"another/folder\") }}{{ some_path | path_relative(from = other_path) }}{{ some_path | path_relative(to = other_path) }}\n```\n\n#### Functions\n\nThe following functions are available within a template:\n\n- `variables()` - Returns an object containing all variables within the current template. v1.23.0\n\n#### Variables\n\nThe following variables are always available within a template:\n\n- `dest_dir` - Absolute path to the destination folder.\n\n- `dest_rel_dir` - Relative path to the destination folder from the working directory.\n\n- `working_dir` - Current working directory.\n\n- `workspace_root` - The moon workspace root.\n\n## Generating code from a template\n\nOnce a template has been created and configured, you can generate files based on it using the\n[`moon generate`](/docs/commands/generate) command! This is also know as scaffolding or code generation.\n\nThis command requires the name of a template as the 1st argument. The template name is the folder\nname on the file system that houses all the template files, or the [`id`](/docs/config/template#id)\nsetting configured in [`template.yml`](/docs/config/template).\n\n```\n$ moon generate npm-package\n```\n\nAn optional destination path, relative from the current working directory, can be provided as the\n2nd argument. If not provided, the [`destination`](/docs/config/template#destination) setting\nconfigured in [`template.yml`](/docs/config/template) will be used, or you'll be prompted during\ngeneration to provide one.\n\n```\n$ moon generate npm-package ./packages/example\n```\n\nThis command is extremely interactive, as we'll prompt you for the destination path, variable\nvalues, whether to overwrite files, and more. If you'd prefer to avoid interactions, pass\n`--defaults`, or `--force`, or both.\n\n### Configuring template locations\n\nTemplates can be located anywhere, especially when [being shared](#sharing-templates). Because of\nthis, our generator will loop through all template paths configured in\n[`generator.templates`](/docs/config/workspace#templates), in order, until a match is found.\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates'    # Or    - 'file://other/templates'\n```\n\nWhen using literal file paths, all paths are relative from the workspace root.\n\n#### Archive URLsv1.36.0\n\nTemplate locations can reference archives (zip, tar, etc) through https URLs. These archives should\ncontain templates and will be downloaded and unpacked. The list of\n[available archive formats can be found here](https://github.com/moonrepo/starbase/blob/master/crates/archive/src/lib.rs#L76).\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - 'https://domain.com/some/path/to/archive.zip'\n```\n\nArchives will be unpacked to `~/.moon/templates/archive/`, and will be cached for future\nuse.\n\n#### Globsv1.31.0\n\nIf you'd prefer more control over literal file paths (above), you can instead use glob paths or the\n`glob://` protocol. Globs are relative from the workspace root, and will only match directories, or\npatterns that end in `template.yml`.\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates/*'    # Or    - 'glob://projects/*/templates/*'\n```\n\n#### Git repositoriesv1.23.0\n\nTemplates locations can also reference templates in an external Git repository using the `git://`\nlocator protocol. This locator requires the Git host, repository path, and revision (branch, tag,\ncommit, etc).\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - 'git://github.com/moonrepo/templates#master'    - 'git://gitlab.com/org/repo#v1.2.3'\n```\n\nGit repositories will be cloned to `~/.moon/templates/git/` using an HTTPS URL (not a Git\nURL), and will be cached for future use.\n\n#### npm packagesv1.23.0\n\nAdditionally, template locations can also reference npm packages using the `npm://` locator\nprotocol. This locator requires a package name and published version.\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - 'npm://@moonrepo/templates#1.2.3'    - 'npm://other-templates#4.5.6'\n```\n\nnpm packages will be downloaded and unpacked to `~/.moon/templates/npm` and cached for future use.\n\n### Declaring variables with CLI arguments\n\nDuring generation, you'll be prompted in the terminal to provide a value for any configured\nvariables. However, you can pre-fill these variable values by passing arbitrary command line\narguments after `--` to [`moon generate`](/docs/commands/generate). Argument names must exactly match the variable\nnames.\n\nUsing the package template example above, we could pre-fill the `name` variable like so:\n\n```\n$ moon generate npm-package ./packages/example -- --name '@company/example' --private\n```\n\ninfo\n\n- Array variables support multiple options of the same name.\n\n- Boolean variables can be negated by prefixing the argument with `--no-`.\n\n- Object variables can not declare values through arguments.\n\n## Sharing templates\n\nAlthough moon is designed for a monorepo, you may be using multiple repositories and would like to\nuse the same templates across all of them. So how can we share templates across repositories? Why\nnot try...\n\n- Git submodules\n\n- Git repositories (using `git://` protocol)\n\n- File archives\n\n- Node.js modules\n\n- npm packages (using `npm://` protocol)\n\n- Another packaging system\n\nRegardless of the choice, simply configure [`generator.templates`](/docs/config/workspace#templates) to point to these\nlocations:\n\n.moon/workspace.yml\n\n```\ngenerator:  templates:    - './templates'    - 'file://./templates'    # Git    - './path/to/submodule'    - 'git://github.com/org/repo#branch'    # npm    - './node_modules/@company/shared-templates'    - 'npm://@company/shared-templates#1.2.3'\n```\n\n### Git and npm layout structure\n\nIf you plan to share templates using Git repositories (`git://`) or npm packages (`npm://`), then\nthe layout of those projects must follow these guidelines:\n\n- A project must support multiple templates\n\n- A template is denoted by a folder in the root of the project\n\n- Each template must have a [`template.yml`](/docs/config/template) file\n\n- Template names are derived from the folder name, or the `id` field in [`template.yml`](/docs/config/template)\n\nAn example of this layout structure may look something like the following:\n\n```\n template-one/    template.yml template-two/    template.yml template-three/    template.yml package.json, etc\n```\n\nThese templates can then be referenced by name, such as [`moon generate template-one`](/docs/commands/generate).\n\n## /docs/guides/codeowners\n\nSource: https://moonrepo.dev/docs/guides/codeowners\n\n# Code owners\n\nv1.8.0\n\nCode owners enables companies to define individuals, teams, or groups that are responsible for code\nin a repository. This is useful in ensuring that pull/merge requests are reviewed and approved by a\nspecific set of contributors, before the branch is merged into the base branch.\n\nWith that being said, moon does not implement a custom code owners solution, and instead builds\nupon the popular `CODEOWNERS` integration in VCS providers, like GitHub, GitLab, and Bitbucket.\n\n## Defining owners\n\nWith moon, you do not modify a `CODEOWNERS` file directly. Instead you define owners per project\nwith [`moon.yml`](/docs/config/project), or globally with [`.moon/workspace.yml`](/docs/config/workspace).\nThese owners are then aggregated and automatically\n[synced to a `CODEOWNERS` file](#generating-codeowners).\n\ninfo\n\nAn owner is a user, team, or group unique to your VCS provider. Please refer to your provider's\ndocumentation for the correct format in which to define owners.\n\n### Project-level\n\nFor projects, we support an [`owners`](/docs/config/project#owners) setting in\n[`moon.yml`](/docs/config/project) that accepts file patterns/paths and their owners (contributors\nrequired to review), as well as operational settings for minimum required approvals, custom groups,\nand more.\n\nPaths configured here are relative from the project root, and will be prefixed with the project\nsource (path from workspace root to project root) when the file is synced.\n\npackages/components/moon.yml\n\n```\nowners:  requiredApprovals: 2  paths:    'src/': ['@frontend', '@design-system']    '*.config.js': ['@frontend-infra']    '*.json': ['@frontend-infra']\n```\n\nThe configuration above would generate the following:\n\n- GitHub\n- GitLab\n- Bitbucket\n\n.github/CODEOWNERS\n\n```\n# components/packages/components/src/ @frontend @design-system/packages/components/*.config.js @frontend-infra/packages/components/*.json @frontend-infra\n```\n\n.gitlab/CODEOWNERS\n\n```\n# components[components][2]/packages/components/src/ @frontend @design-system/packages/components/*.config.js @frontend-infra/packages/components/*.json @frontend-infra\n```\n\nCODEOWNERS\n\n```\n# components/packages/components/src/ @frontend @design-system/packages/components/*.config.js @frontend-infra/packages/components/*.json @frontend-infra\n```\n\n### Workspace-level\n\nProject scoped owners are great but sometimes you need to define owners for files that span across\nall projects, or files at any depth within the repository. With the\n[`codeowners.globalPaths`](/docs/config/workspace#globalpaths) setting in\n[`.moon/workspace.yml`](/docs/config/workspace), you can do just that.\n\nPaths configured here are used as-is, allowing for full control of what ownership is applied.\n\n.moon/workspace.yml\n\n```\ncodeowners:  globalPaths:    # All files    '*': ['@admins']    # Config folder at any depth    'config/': ['@app-platform']    # GitHub folder at the root    '/.github/': ['@infra']\n```\n\nThe configuration above would generate the following at the top of the file (is the same for all\nproviders):\n\n- GitHub\n- GitLab\n- Bitbucket\n\n.github/CODEOWNERS\n\n```\n# (workspace)* @adminsconfig/ @app-platform/.github/ @infra\n```\n\n.gitlab/CODEOWNERS\n\n```\n# (workspace)* @adminsconfig/ @app-platform/.github/ @infra\n```\n\nCODEOWNERS\n\n```\n# (workspace)* @adminsconfig/ @app-platform/.github/ @infra\n```\n\n## Generating `CODEOWNERS`\n\nCode owners is an opt-in feature, and as such, the `CODEOWNERS` file can be generated in a few ways.\nThe first is manually, with the [`moon sync codeowners`](/docs/commands/sync/code-owners) command.\n\n```\n$ moon sync codeowners\n```\n\nWhile this works, it is a manual process, and can easily be forgotten, resulting in an out-of-date\nfile.\n\nAn alternative solution is the [`codeowners.syncOnRun`](/docs/config/workspace#synconrun) setting in\n[`.moon/workspace.yml`](/docs/config/workspace#codeowners), that when enabled, moon will automatically\ngenerate a `CODEOWNERS` file when a [target](/docs/concepts/target) is ran.\n\n.moon/workspace.yml\n\n```\ncodeowners:  syncOnRun: true\n```\n\nThe format and location of the `CODEOWNERS` file is based on the\n[`vcs.provider`](/docs/config/workspace#provider) setting.\n\n## FAQ\n\n### What providers or formats are supported?\n\nThe following providers are supported, based on the [`vcs.provider`](/docs/config/workspace#provider)\nsetting.\n\n- [Bitbucket](https://marketplace.atlassian.com/apps/1218598/code-owners-for-bitbucket?tab=overview&hosting=cloud) (via a 3rd-party app)\n\n- [GitHub](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners)\n\n- [GitLab](https://docs.gitlab.com/ee/user/project/codeowners/reference.html)\n\n- Other (very basic syntax)\n\n### Where does the `CODEOWNERS` file get created?\n\nThe location of the file is dependent on the configured provider.\n\n- GitHub -> `.github/CODEOWNERS`\n\n- GitLab -> `.gitlab/CODEOWNERS`\n\n- Everything else -> `CODEOWNERS`\n\n### Why are owners defined in `moon.yml` and not an alternative like `OWNERS`?\n\nA very popular pattern for defining owners is through an `OWNERS` file, which can appear in any\nfolder, at any depth, within the repository. All of these files are then aggregated into a single\n`CODEOWNERS` file.\n\nWhile this is useful for viewing ownership of a folder at a glance, it incurs a massive performance\nhit as we'd have to constantly glob the entire repository to find all `OWNERS` files. We found it\nbest to define owners in `moon.yml` instead for the following reasons:\n\n- No performance hit, as we're already loading and parsing these config files.\n\n- Co-locates owners with the rest of moon's configuration.\n\n- Ownership is now a part of the project graph, enabling future features.\n\n## /docs/guides/debug-task\n\nSource: https://moonrepo.dev/docs/guides/debug-task\n\n# Debugging a task\n\nRunning [tasks](/docs/concepts/task) is the most common way to interact with moon, so what do you do\nwhen your task isn't working as expected? Diagnose it of course! Diagnosing the root cause of a\nbroken task can be quite daunting, but do not fret, as the following steps will help guide you in\nthis endeavor.\n\n## Verify configuration\n\nBefore we dive into the internals of moon, we should first verify that the task is actually\nconfigured correctly. Our configuration layer is very strict, but it can't catch everything, so jump\nto the [`moon.yml`](/docs/config/project#tasks) documentation for more information.\n\nTo start, moon will create a snapshot of the project and its tasks, with all [tokens](/docs/concepts/token)\nresolved, and paths expanded. This snapshot is located at\n`.moon/cache/states/\n/snapshot.json`. With the snapshot open, inspect the root `tasks`\nobject for any inconsistencies or inaccuracies.\n\nSome issues to look out for:\n\n- Have `command` and `args` been parsed correctly?\n\n- Have [tokens](/docs/concepts/token) resolved correctly? If not, verify syntax or try another token type.\n\n- Have `inputFiles`, `inputGlobs`, and `inputVars` expanded correctly from [`inputs`](/docs/config/project#inputs)?\n\n- Have `outputFiles` and `outputGlobs` expanded correctly from [`outputs`](/docs/config/project#outputs)?\n\n- Is the `toolchain` (formerly `platform`) correct for the command? If incorrect, explicitly set the [`toolchain`](/docs/config/project#toolchain).\n\n- Are `options` and `flags` correct?\n\ninfo\n\nResolved information can also be inspected with the [`moon task --json`](/docs/commands/task)\ncommand.\n\n### Verify inherited configuration\n\nIf the configuration from the previous step looks correct, you can skip this step, otherwise let's\nverify that the inherited configuration is also correct. In the `snapshot.json` file, inspect the\nroot `inherited` object, which is structured as follows:\n\n- `order` - The order in which configuration files from `.moon` are loaded, from lowest to highest priority, and the order files are merged. The `*` entry is `.moon/tasks/all.yml`, while other entries map to `.moon/tasks/**/*.yml`.\n\n- `layers` - A mapping of configuration files that were loaded, derived from the `order`. Each layer represents a partial object (not expanded or resolved). Only files that exist will be mapped here.\n\n- `config` - A partial configuration object representing the state of all merged layers. This is what is merged with the project's `moon.yml` file.\n\nSome issues to look out for:\n\n- Is the order correct? If not, verify the project's [`language`](/docs/config/project#language) and the task's [`toolchain`](/docs/config/project#toolchain).\n\n- Does `config` correctly represent the merged state of all `layers`? Do note that tasks are shallow merged (by name), not deep merged.\n\n- Have the root `tasks` properly inherited [`implicitDeps`](/docs/config/tasks#implicitdeps), [`implicitInputs`](/docs/config/tasks#implicitinputs), and `fileGroups`?\n\n## Inspect trace logs\n\nIf configuration looks good, let's move on to inspecting the trace logs, which can be a non-trivial\namount of effort. Run the task to generate the logs, bypass the cache, and include debug\ninformation:\n\n```\nMOON_DEBUG_PROCESS_ENV=true MOON_DEBUG_PROCESS_INPUT=true moon run  --log trace --force\n```\n\nOnce ran, a large amount of information will be logged to the terminal. However, most of it can be\nignored, as we're only interested in the \"is this task affected by changes\" logs. This breaks down\nas follows:\n\n- First, we gather touched files from the local checkout, which is typically `git status --porcelain --untracked-files` (from the `moon_process::command_inspector` module). The logs do not output the list of files that are touched, but you can run this command locally to verify the output.\n\n- Secondly, we gather all files from the project directory, using the `git ls-files --full-name --cached --modified --others --exclude-standard --deduplicate` command (also from the `moon_process::command_inspector` module). This command can also be ran locally to verify the output.\n\n- Lastly, all files from the previous 2 commands will be hashed using the `git hash-object` command. If you passed the `MOON_DEBUG_PROCESS_INPUT` environment variable, you'll see a massive log entry of all files being hashed. This is what we use to generate moon's specific hash.\n\nIf all went well, you should see a log entry that looks like this:\n\n```\nmoon_task_runner::task_runner  Generated a unique hash  task_target=\"\" hash=\"\"\n```\n\nThe important piece is the hash, which is a 64-character SHA256 hash, and represents the unique hash\nof this task/target. This is what moon uses to determine a cache hit/miss, and whether or not to\nskip re-running a task.\n\nLet's copy the hash and move on to the next step.\n\n## Inspect the hash manifest\n\nWith the hash in hand, let's dig deeper into moon's internals, by inspecting the hash manifest at\n`.moon/cache/hashes/.json`, or running the [`moon hash`](/docs/commands/hash) command:\n\n```\nmoon hash\n```\n\nThe manifest is JSON and its contents are all the information used to generate its unique hash. This\ninformation is an array, and breaks down as follows:\n\n- The first item in the array is the task itself. The important fields to diagnose here are `deps` and `inputs`. Dependencies are other tasks (and their hash) that this task depends on.\n\n- Inputs are all the files (and their hash from `git hash-object`) this task requires to run.\n\n- The remaining items are toolchain/language specific, some examples are: Node.js - The current Node.js version and the resolved versions/hashes of all `package.json` dependencies.\n\n- Rust - The current Rust version and the resolved versions/hashes of all `Cargo.toml` dependencies.\n\n- TypeScript - Compiler options for changing compilation output.\n\nSome issues to look out for:\n\n- Do the dependencies match the task's configured [`deps`](/docs/config/project#deps) and [`implicitDeps`](/docs/config/tasks#implicitdeps)?\n\n- Do the inputs match the task's configured [`inputs`](/docs/config/project#inputs) and [`implicitInputs`](/docs/config/tasks#implicitinputs)? If not, try tweaking the config.\n\n- Are the toolchain/language specific items correct?\n\n- Are dependency versions/hashes correctly parsed from the appropriate lockfile?\n\n### Diffing a previous hash\n\nAnother avenue for diagnosing a task is to diff the hash against a hash from a previous run. Since\nwe require multiple hashes, we'll need to run the task multiple times,\n[inspect the logs](#inspect-trace-logs), and extract the hash for each. If you receive the same hash\nfor each run, you'll need to tweak configuration or change files to produce a different hash.\n\nOnce you have 2 unique hashes, we can pass them to the [`moon hash`](/docs/commands/hash) command. This\nwill produce a `git diff` styled output, allowing for simple line-by-line comparison debugging.\n\n```\nmoon hash\n```\n\n```\nLeft:  0b55b234f1018581c45b00241d7340dc648c63e639fbafdaf85a4cd7e718fddeRight: 2388552fee5a02062d0ef402bdc7232f0a447458b058c80ce9c3d0d4d7cfe171[\t{\t\t\"command\": \"build\",\t\t\"args\": [+\t\t\t\"./dist\"-\t\t\t\"./build\"\t\t],\t\t...\t}]\n```\n\nThis is extremely useful in diagnoising why a task is running differently than before, and is much\neasier than inspecting the hash manifest files manually!\n\n## Ask for help\n\nIf you've made it this far, and still can't figure out why a task is not working correctly, please\nask for help!\n\n- [Join the Discord community](https://discord.gg/qCh9MEynv2) (if lost)\n\n- [Report an issue](https://github.com/moonrepo/moon/issues/new/choose) (if an actual bug)\n\n## /docs/guides/docker\n\nSource: https://moonrepo.dev/docs/guides/docker\n\n# Docker integration\n\nUsing [Docker](https://www.docker.com/) to run your applications? Or build your artifacts? No\nworries, moon can be utilized with Docker, and supports a robust integration layer.\n\nsuccess\n\nLooking to speed up your Docker builds? Want to build in the cloud?\n[Give Depot a try](https://depot.dev?ref=moonrepo)!\n\n## Requirements\n\nThe first requirement, which is very important, is adding `.moon/cache` to the workspace root\n`.dockerignore` (moon assumes builds are running from the root). Not all files in `.moon/cache` are\nportable across machines/environments, so copying these file into Docker will definitely cause\ninteroperability issues.\n\n.dockerignore\n\n```\n.moon/cache\n```\n\nThe other requirement depends on how you want to integrate Git with Docker. Since moon executes\n`git` commands under the hood, there are some special considerations to be aware of when running\nmoon within Docker. There's 2 scenarios to choose from:\n\n- (recommended) Add the `.git` folder to `.dockerignore`, so that it's not `COPY`'d. moon will continue to work just fine, albeit with some functionality disabled, like caching.\n\n- Ensure that the `git` library is installed in the container, and copy the `.git` folder with `COPY`. moon will work with full functionality, but it will increase the overall size of the image because of caching.\n\n## Creating a `Dockerfile`\n\ninfo\n\nOur [`moon docker file`](/docs/commands/docker/file) command can automatically generate a `Dockerfile` based on this\nguide! We suggest generating the file then reading the guide below to understand what's going on.\n\nWe're very familiar with how tedious `Dockerfile`s are to write and maintain, so in an effort to\nreduce this headache, we've built a handful of tools to make this process much easier. With moon,\nwe'll take advantage of Docker's layer caching and staged builds as much as possible.\n\nWith that being said, there's many approaches you can utilize, depending on your workflow (we'll\ndocument them below):\n\n- Running `moon docker` commands before running `docker run|build` commands.\n\n- Running `moon docker` commands within the `Dockerfile`.\n\n- Using multi-staged or non-staged (standard) builds.\n\n- Something else unique to your setup!\n\nwarning\n\nThis guide and our Docker approach is merely a suggestion and is not a requirement for using moon\nwith Docker! Feel free to use this as a starting point, or not at all. Choose the approach that\nworks best for you!\n\n### What we're trying to avoid\n\nBefore we dive into writing a perfect `Dockerfile`, we'll briefly talk about the pain points we're\ntrying to avoid. In the context of Node.js and monorepo's, you may be familiar with having to `COPY`\neach individual `package.json` in the monorepo before installing `node_modules`, to effectively use\nlayer caching. This is very brittle, as each new application or package is created, every\n`Dockerfile` in the monorepo will need to be modified to account for this new `package.json`.\n\nFurthermore, we'll have to follow a similar process for only copying source files necessary for\nthe build or `CMD` to complete. This is very tedious, so most developers simply use `COPY . .` and\nforget about it. Copying the entire monorepo is costly, especially as it grows.\n\nAs an example, we'll use moon's official repository. The `Dockerfile` would look something like the\nfollowing.\n\n```\nFROM node:latestWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli# Copy moon filesCOPY ./.moon ./.moon# Copy all package.json's and lockfilesCOPY ./packages/cli/package.json ./packages/cli/package.jsonCOPY ./packages/core-linux-arm64-gnu/package.json ./packages/core-linux-arm64-gnu/package.jsonCOPY ./packages/core-linux-arm64-musl/package.json ./packages/core-linux-arm64-musl/package.jsonCOPY ./packages/core-linux-x64-gnu/package.json ./packages/core-linux-x64-gnu/package.jsonCOPY ./packages/core-linux-x64-musl/package.json ./packages/core-linux-x64-musl/package.jsonCOPY ./packages/core-macos-arm64/package.json ./packages/core-macos-arm64/package.jsonCOPY ./packages/core-macos-x64/package.json ./packages/core-macos-x64/package.jsonCOPY ./packages/core-windows-x64-msvc/package.json ./packages/core-windows-x64-msvc/package.jsonCOPY ./packages/runtime/package.json ./packages/runtime/package.jsonCOPY ./packages/types/package.json ./packages/types/package.jsonCOPY ./package.json ./package.jsonCOPY ./yarn.lock ./yarn.lockCOPY ./.yarn ./.yarnCOPY ./.yarnrc.yml ./yarnrc.yml# Install toolchain and dependencies# In non-moon repos: yarn installRUN moon docker setup# Copy project and required files# Or COPY . .COPY ./packages/types ./packages/typesCOPY ./packages/runtime ./packages/runtime# Build the targetRUN moon run runtime:build\n```\n\nFor such a small monorepo, this already looks too confusing!!! Let's remedy this by utilizing moon\nitself to the fullest!\n\n### Scaffolding the bare minimum\n\nThe first step in this process is to only copy the bare minimum of files necessary for installing\ndependencies (Node.js modules, etc). This is typically manifests (`package.json`), lockfiles\n(`yarn.lock`, etc), and any configuration (`.yarnrc.yml`, etc).\n\nThis can all be achieved with the [`moon docker scaffold`](/docs/commands/docker/scaffold) command, which scaffolds a\nskeleton of the repository structure, with only necessary files (the above). Let's update our\n`Dockerfile` usage.\n\n- Non-staged\n- Multi-staged\n\nThis assumes [`moon docker scaffold `](/docs/commands/docker/scaffold) is ran outside of the `Dockerfile`.\n\n```\nFROM node:latestWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli# Copy workspace skeletonCOPY ./.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup\n```\n\n```\n#### BASEFROM node:latest AS baseWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli#### SKELETONFROM base AS skeleton# Copy entire repository and scaffoldCOPY . .RUN moon docker scaffold\n#### BUILDFROM base AS build# Copy workspace skeletonCOPY --from=skeleton /app/.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup\n```\n\nAnd with this, our dependencies will be layer cached effectively! Let's now move onto copying source\nfiles.\n\n### Copying necessary source files\n\nThe next step is to copy all source files necessary for `CMD` or any `RUN` commands to execute\ncorrectly. This typically requires copying all source files for the project and all source files\nof the project's dependencies... NOT the entire repository!\n\nLuckily our [`moon docker scaffold `](/docs/commands/docker/scaffold) command has already done this for us! Let's\ncontinue updating our `Dockerfile` to account for this, by appending the following:\n\n- Non-staged\n- Multi-staged\n\n```\n# Copy source filesCOPY ./.moon/docker/sources .# Build something (optional)RUN moon run\n:\n```\n\n```\n# Copy source filesCOPY --from=skeleton /app/.moon/docker/sources .# Build something (optional)RUN moon run\n:\n```\n\ninfo\n\nIf you need to copy additional files for your commands to run successfully, you can configure the\n`docker.scaffold.include` setting in [`.moon/workspace.yaml`](/docs/config/workspace#scaffold) (entire\nworkspace) or [`moon.yml`](/docs/config/project#scaffold) (per project).\n\n### Pruning extraneous files\n\nNow that we've ran a command or built an artifact, we should prune the Docker environment to remove\nunneeded files and folders. We can do this with the [`moon docker prune`](/docs/commands/docker/prune) command, which\nmust be ran within the context of a `Dockerfile`!\n\n```\n# Prune workspaceRUN moon docker prune\n```\n\nWhen ran, this command will do the following, in order:\n\n- Remove extraneous dependencies (`node_modules`) for unfocused projects.\n\n- Install production only dependencies for the projects that were scaffolded.\n\ninfo\n\nThis process can be customized using the `docker.prune` setting in\n[`.moon/workspace.yaml`](/docs/config/workspace#prune).\n\n### Final result\n\nAnd with this moon integration, we've reduced the original `Dockerfile` of 35 lines to 18 lines, a\nreduction of almost 50%. The original file can also be seen as `O(n)`, as each new manifest requires\ncascading updates, while the moon approach is `O(1)`!\n\n- Non-staged\n- Multi-staged\n\n```\nFROM node:latestWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli# Copy workspace skeletonCOPY ./.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup# Copy source filesCOPY ./.moon/docker/sources .# Build something (optional)RUN moon run\n:# Prune workspaceRUN moon docker prune# CMD\n```\n\n```\n#### BASEFROM node:latest AS baseWORKDIR /app# Install moon binaryRUN npm install -g @moonrepo/cli#### SKELETONFROM base AS skeleton# Copy entire repository and scaffoldCOPY . .RUN moon docker scaffold\n#### BUILDFROM base AS build# Copy workspace skeletonCOPY --from=skeleton /app/.moon/docker/workspace .# Install toolchain and dependenciesRUN moon docker setup# Copy source filesCOPY --from=skeleton /app/.moon/docker/sources .# Build something (optional)RUN moon run\n:# Prune workspaceRUN moon docker prune# CMD\n```\n\n## Running `docker` commands\n\nWhen running `docker` commands, they must be ran from moon's workspace root (typically the\nrepository root) so that the project graph and all `moon docker` commands resolve correctly.\n\n```\ndocker build .\n```\n\nIf you're `Dockerfile`s are located within each applicable project, use the `-f` argument.\n\n```\ndocker run -f ./apps/client/Dockerfile .\n```\n\n## Troubleshooting\n\n### Supporting `node:alpine` images\n\nIf you're trying to use the `node:alpine` image with moon's\n[integrated toolchain](/docs/concepts/toolchain), you'll need to set the `MOON_TOOLCHAIN_FORCE_GLOBALS`\nenvironment variable in the Docker image to disable moon's toolchain. This is required as Node.js\ndoes not provide pre-built binaries for the Alpine target, so installing the Node.js toolchain will\nfail.\n\n```\nFROM node:alpineENV MOON_TOOLCHAIN_FORCE_GLOBALS=true\n```\n\n## /docs/guides/examples/angular\n\nSource: https://moonrepo.dev/docs/guides/examples/angular\n\n# Angular example\n\nIn this guide, you'll learn how to integrate [Angular](https://angular.io/) into moon.\n\nBegin by creating a new Angular project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n```\ncd apps && npx -p @angular/cli@latest ng new angular-app\n```\n\nView the [official Angular docs](https://angular.io/start) for a more in-depth guide to getting\nstarted!\n\n## Setup\n\nSince Angular is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\n/moon.yml\n\n```\nfileGroups:  app:    - 'src/**/*'    - 'angular.*'tasks:  dev:    command: 'ng serve'    preset: 'server'  build:    command: 'ng build'    inputs:      - '@group(app)'      - '@group(sources)'    outputs:      - 'dist'  # Extends the top-level lint  lint:    args:      - '--ext'      - '.ts'\n```\n\n### ESLint integration\n\nAngular does not provide a built-in linting abstraction, but instead there is an\n[ESLint package](https://github.com/angular-eslint/angular-eslint), which is great, but complicates\nthings a bit. Because of this, you have two options for moving forward:\n\n- Use a [global `lint` task](/docs/guides/examples/eslint) and bypass Angular's solution (preferred).\n\n- Use Angular's ESLint package solution only.\n\nRegardless of which option is chosen, the following changes are applicable to all options and should\nbe made. Begin be installing the dependencies that the\n[`@angular-eslint`](https://nextjs.org/docs/basic-features/eslint#eslint-config) package need in the\napplication's `package.json`.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\nyarn workspace\n add --dev @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\nnpm install --save-dev --workspace\n @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\npnpm add --save-dev --filter\n @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\n```\nbun install --dev @angular-eslint/builder @angular-eslint/eslint-plugin @angular-eslint/eslint-plugin-template @angular-eslint/schematics @angular-eslint/template-parser\n```\n\nSince Angular has some specific rules, we'll need to tell the ESLint package to overrides the\ndefault ones. This can be achieved with a project-level `.eslintrc.json` file.\n\n/.eslintrc.json\n\n```\n{  \"root\": true,  \"ignorePatterns\": [\"projects/**/*\"],  \"overrides\": [    {      \"files\": [\"*.ts\"],      \"extends\": [        \"eslint:recommended\",        \"plugin:@typescript-eslint/recommended\",        \"plugin:@angular-eslint/recommended\",        // This is required if you use inline templates in Components        \"plugin:@angular-eslint/template/process-inline-templates\"      ],      \"rules\": {        /**         * Any TypeScript source code (NOT TEMPLATE) related rules you wish to use/reconfigure over and above the         * recommended set provided by the @angular-eslint project would go here.         */        \"@angular-eslint/directive-selector\": [          \"error\",          { \"type\": \"attribute\", \"prefix\": \"app\", \"style\": \"camelCase\" }        ],        \"@angular-eslint/component-selector\": [          \"error\",          { \"type\": \"element\", \"prefix\": \"app\", \"style\": \"kebab-case\" }        ]      }    },    {      \"files\": [\"*.html\"],      \"extends\": [        \"plugin:@angular-eslint/template/recommended\",        \"plugin:@angular-eslint/template/accessibility\"      ],      \"rules\": {        /**         * Any template/HTML related rules you wish to use/reconfigure over and above the         * recommended set provided by the @angular-eslint project would go here.         */      }    }  ]}\n```\n\nWith the basics now setup, choose the option that works best for you.\n\n- Global lint\n- Angular lint\n\nWe encourage using the global `lint` task for consistency across all projects within the repository.\nWith this approach, the `eslint` command itself will be ran and the `ng lint` command will be\nignored, but the `@angular-eslint` rules will still be used.\n\nIf you'd prefer to use the `ng lint` command, add it as a task to the project's\n[`moon.yml`](/docs/config/project).\n\n/moon.yml\n\n```\ntasks:  lint:    command: 'ng lint'    inputs:      - '@group(angular)'\n```\n\nFurthermore, if a global `lint` task exists, be sure to exclude it from being inherited.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['lint']\n```\n\nIn addition to configuring `moon.yml`, you also need to add a lint target in the `angular.json` file\nfor linting to work properly. The lint target specifies which builder to use for linting, as well as\nthe file patterns that should be linted.\n\n/angular.json\n\n```\n{  \"projects\": {    \"angular-app\": {      \"architect\": {        \"lint\": {          \"builder\": \"@angular-eslint/builder:lint\",          \"options\": {            \"lintFilePatterns\": [\"src/**/*.ts\", \"src/**/*.html\"]          }        }      }    }  }}\n```\n\nAdding this lint target is crucial for ensuring that the linting process is properly configured and\nintegrated with Angular's build system.\n\n### TypeScript integration\n\nAngular has [built-in support for TypeScript](https://angular.io/guide/typescript-configuration), so\nthere is no need for additional configuration to enable TypeScript support.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository.\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Angular should be installed per-project, and the\n`ng` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Angular project, a [`angular.json`](https://angular.io/guide/workspace-config)\nis created, and must exist in the project root. This allows each project to configure Angular for\ntheir needs.\n\n/angular.json\n\n```\n{  \"$schema\": \"./node_modules/@angular/cli/lib/config/schema.json\",  \"version\": 1,  \"projects\": {    \"angular-app\": {      \"projectType\": \"application\",      ...    }  },  ...}\n```\n\n## /docs/guides/examples/astro\n\nSource: https://moonrepo.dev/docs/guides/examples/astro\n\n# Astro example\n\nIn this guide, you'll learn how to integrate [Astro](https://docs.astro.build).\n\nBegin by creating a new Astro project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n```\ncd apps && npm create astro@latest\n```\n\n## Setup\n\nSince Astro is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Astro tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/astro).\n\n/moon.yml\n\n```\n# Inherit tasks from the `astro` preset# https://github.com/moonrepo/moon-configstags: ['astro']# Disable project referencestoolchain:  typescript:    syncProjectReferences: false\n```\n\n### ESLint integration\n\nWhen using a [`lint`](/docs/guides/examples/eslint) task, the\n[`eslint-plugin-astro`](https://ota-meshi.github.io/eslint-plugin-astro/user-guide/) package must be\ninstalled to lint `.astro` files.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace  add --dev eslint-plugin-astro\n```\n\n```\nyarn workspace  add --dev eslint-plugin-astro\n```\n\n```\nnpm install --save-dev --workspace  eslint-plugin-astro\n```\n\n```\npnpm add --save-dev --filter  eslint-plugin-astro\n```\n\n```\nbun install --dev eslint-plugin-astro\n```\n\nOnce the dependency has been installed in the application's `package.json`. We can then enable this\nconfiguration by creating an `.eslintrc.js` file in the project root. Be sure this file is listed in\nyour lint task's inputs!\n\n/.eslintrc.js\n\n```\nmodule.exports = {  extends: ['plugin:astro/recommended'],  overrides: [    {      files: ['*.astro'],      parser: 'astro-eslint-parser',      // If using TypeScript      parserOptions: {        parser: '@typescript-eslint/parser',        extraFileExtensions: ['.astro'],        project: 'tsconfig.json',        tsconfigRootDir: __dirname,      },    },  ],};\n```\n\nAnd lastly, when linting through moon's command line, you'll need to include the `.astro` extension\nwithin the `lint` task. This can be done by extending the top-level task within the project (below),\nor by adding it to the top-level entirely.\n\n/moon.yml\n\n```\ntasks:  lint:    args:      - '--ext'      - '.ts,.tsx,.astro'\n```\n\n### Prettier integration\n\nWhen using a [`format`](/docs/guides/examples/prettier) task, the `prettier-plugin-astro` package must be installed to\nformat `.astro` files. View the official\n[Astro docs](https://docs.astro.build/en/editor-setup/#prettier) for more information.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace  add --dev prettier-plugin-astro\n```\n\n```\nyarn workspace  add --dev prettier-plugin-astro\n```\n\n```\nnpm install --save-dev --workspace  prettier-plugin-astro\n```\n\n```\npnpm add --save-dev --filter  prettier-plugin-astro\n```\n\n```\nbun install --dev prettier-plugin-astro\n```\n\n### TypeScript integration\n\nSince Astro utilizes custom `.astro` files, it requires a specialized TypeScript integration, and\nluckily Astro provides an [in-depth guide](https://docs.astro.build/en/guides/typescript/). With\nthat being said, we do have a few requirements and pointers!\n\n- Use the official [Astro `tsconfig.json`](https://docs.astro.build/en/guides/typescript/#setup) as a basis.\n\n- From our internal testing, the `astro check` command (that typechecks `.astro` files) does not support project references. If the `composite` compiler option is enabled, the checker will fail to find `.astro` files. To work around this, we disable `workspace.typescript` in our moon config above.\n\n- Since typechecking requires 2 commands, one for `.astro` files, and the other for `.ts`, `.tsx` files, we've added the [`typecheck`](/docs/guides/examples/typescript) task as a dependency for the `check` task. This will run both commands through a single task!\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Astro should be installed per-project, and the\n`astro` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Astro project, a\n[`astro.config.mjs`](https://docs.astro.build/en/reference/configuration-reference/) is created, and\nmust exist in the project root. This allows each project to configure Astro for their needs.\n\n/astro.config.mjs\n\n```\nimport { defineConfig } from 'astro/config';// https://astro.build/configexport default defineConfig({});\n```\n\n## /docs/guides/examples/eslint\n\nSource: https://moonrepo.dev/docs/guides/examples/eslint\n\n# ESLint example\n\nIn this guide, you'll learn how to integrate [ESLint](https://eslint.org/) into moon.\n\nBegin by installing `eslint` and any plugins in your root. We suggest using the same version across\nthe entire repository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev eslint eslint-config-moon\n```\n\n```\nyarn add --dev eslint eslint-config-moon# If using workspacesyarn add --dev -W eslint eslint-config-moon\n```\n\n```\nnpm install --save-dev eslint eslint-config-moon\n```\n\n```\npnpm add --save-dev eslint eslint-config-moon# If using workspacespnpm add --save-dev -w eslint eslint-config-moon\n```\n\n```\nbun install --dev eslint eslint-config-moon\n```\n\n## Setup\n\nSince linting is a universal workflow, add a `lint` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  lint:    command:      - 'eslint'      # Support other extensions      - '--ext'      - '.js,.jsx,.ts,.tsx'      # Always fix and run extra checks      - '--fix'      - '--report-unused-disable-directives'      # Dont fail if a project has nothing to lint      - '--no-error-on-unmatched-pattern'      # Do fail if we encounter a fatal error      - '--exit-on-fatal-error'      # Only 1 ignore file is supported, so use the root      - '--ignore-path'      - '@in(4)'      # Run in current dir      - '.'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Other config files      - '*.config.*'      # Project configs, any format, any depth      - '**/.eslintrc.*'      # Root configs, any format      - '/.eslintignore'      - '/.eslintrc.*'\n```\n\nProjects can extend this task and provide additional parameters if need be, for example.\n\n/moon.yml\n\n```\ntasks:  lint:    args:      # Enable caching for this project      - '--cache'\n```\n\n### TypeScript integration\n\nIf you're using the [`@typescript-eslint`](https://typescript-eslint.io) packages, and want to\nenable type-safety based lint rules, we suggest something similar to the official\n[monorepo configuration](https://typescript-eslint.io/docs/linting/monorepo).\n\nCreate a `tsconfig.eslint.json` in your repository root, extend your shared compiler options (we use\n[`tsconfig.options.json`](/docs/guides/examples/typescript)), and include all your project files.\n\ntsconfig.eslint.json\n\n```\n{  \"extends\": \"./tsconfig.options.json\",  \"compilerOptions\": {    \"emitDeclarationOnly\": false,    \"noEmit\": true  },  \"include\": [\"apps/**/*\", \"packages/**/*\"]}\n```\n\nAppend the following inputs to your `lint` task.\n\n.moon/tasks/node.yml\n\n```\ntasks:  lint:    # ...    inputs:      # TypeScript support      - 'types/**/*'      - 'tsconfig.json'      - '/tsconfig.eslint.json'      - '/tsconfig.options.json'\n```\n\nAnd lastly, add `parserOptions` to your [root-level config](#root-level).\n\n## Configuration\n\n### Root-level\n\nThe root-level ESLint config is required, as ESLint traverses upwards from each file to find\nconfigurations, and this denotes the stopping point. It's also used to define rules for the entire\nrepository.\n\n.eslintrc.js\n\n```\nmodule.exports = {  root: true, // Required!  extends: ['moon'],  rules: {    'no-console': 'error',  },  // TypeScript support  parser: '@typescript-eslint/parser',  parserOptions: {    project: 'tsconfig.eslint.json',    tsconfigRootDir: __dirname,  },};\n```\n\nThe `.eslintignore` file must also be defined at the root, as\n[only 1 ignore file](https://eslint.org/docs/user-guide/configuring/ignoring-code#the-eslintignore-file)\ncan exist in a repository. We ensure this ignore file is used by passing `--ignore-path` above.\n\n.eslintignore\n\n```\nnode_modules/*.min.js*.map*.snap\n```\n\n### Project-level\n\nA project-level ESLint config can be utilized by creating a `.eslintrc.` in the\nproject root. This is optional, but necessary when defining rules and ignore patterns unique to the\nproject.\n\n/.eslintrc.js\n\n```\nmodule.exports = {  // Patterns to ignore (alongside the root .eslintignore)  ignorePatterns: ['build', 'lib'],  // Project specific rules  rules: {    'no-console': 'off',  },};\n```\n\nThe\n[`extends`](https://eslint.org/docs/user-guide/configuring/configuration-files#extending-configuration-files)\nsetting should not extend the root-level config, as ESLint will automatically merge configs\nwhile traversing upwards!\n\n### Sharing\n\nTo share configuration across projects, you have 3 options:\n\n- Define settings in the [root-level config](#root-level). This only applies to the parent repository.\n\n- Create and publish an [`eslint-config`](https://eslint.org/docs/developer-guide/shareable-configs#using-a-shareable-config) or [`eslint-plugin`](https://eslint.org/docs/developer-guide/working-with-plugins) npm package. This can be used in any repository.\n\n- A combination of 1 and 2.\n\nFor options 2 and 3, if you're utilizing package workspaces, create a local package with the\nfollowing content.\n\npackages/eslint-config-company/index.js\n\n```\nmodule.exports = {  extends: ['airbnb'],};\n```\n\nWithin your root-level ESLint config, you can extend this package to inherit the settings.\n\n.eslintrc.js\n\n```\nmodule.exports = {  extends: 'eslint-config-company',};\n```\n\nWhen using this approach, the package must be built and symlinked into `node_modules` before the\nlinter will run correctly. Take this into account when going down this path!\n\n## FAQ\n\n### How to lint a single file or folder?\n\nUnfortunately, this isn't currently possible, as the `eslint` binary itself requires a file or\nfolder path to operate on, and in the task above we pass `.` (current directory). If this was not\npassed, then nothing would be linted.\n\nThis has the unintended side-effect of not being able to filter down lintable targets by passing\narbitrary file paths. This is something we hope to resolve in the future.\n\nTo work around this limitation, you can create another lint task.\n\n### Should we use `overrides`?\n\nProjects should define their own rules using an ESLint config in their project root. However, if you\nwant to avoid touching many ESLint configs (think migrations), then\n[overrides in the root](https://eslint.org/docs/user-guide/configuring/configuration-files#configuration-based-on-glob-patterns)\nare a viable option. Otherwise, we highly encourage project-level configs.\n\n.eslintrc.js\n\n```\nmodule.exports = {  // ...  overrides: [    // Only apply to apps \"foo\" and \"bar\", but not others    {      files: ['apps/foo/**/*', 'apps/bar/**/*'],      rules: {        'no-magic-numbers': 'off',      },    },  ],};\n```\n\n## /docs/guides/examples/jest\n\nSource: https://moonrepo.dev/docs/guides/examples/jest\n\n# Jest example\n\nIn this guide, you'll learn how to integrate [Jest](https://jestjs.io/) into moon.\n\nBegin by installing `jest` in your root. We suggest using the same version across the entire\nrepository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev jest\n```\n\n```\nyarn add --dev jest# If using workspacesyarn add --dev -W jest\n```\n\n```\nnpm install --save-dev jest\n```\n\n```\npnpm add --save-dev jest# If using workspacespnpm add --save-dev -w jest\n```\n\n```\nbun install --dev jest\n```\n\n## Setup\n\nSince testing is a universal workflow, add a `test` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  test:    command:      - 'jest'      # Always run code coverage      - '--coverage'      # Dont fail if a project has no tests      - '--passWithNoTests'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Project configs, any format      - 'jest.config.*'\n```\n\nProjects can extend this task and provide additional parameters if need be, for example.\n\n/moon.yml\n\n```\ntasks:  test:    args:      # Disable caching for this project      - '--no-cache'\n```\n\n## Configuration\n\n### Root-level\n\nA root-level Jest config is not required and should be avoided, instead, use a [preset](#sharing) to\nshare configuration.\n\n### Project-level\n\nA project-level Jest config can be utilized by creating a `jest.config.` in the\nproject root. This is optional, but necessary when defining project specific settings.\n\n/jest.config.js\n\n```\nmodule.exports = {  // Project specific settings  testEnvironment: 'node',};\n```\n\n### Sharing\n\nTo share configuration across projects, you can utilize Jest's built-in\n[`preset`](https://jestjs.io/docs/configuration#preset-string) functionality. If you're utilizing\npackage workspaces, create a local package with the following content, otherwise publish the npm\npackage for consumption.\n\npackages/company-jest-preset/jest-preset.js\n\n```\nmodule.exports = {  testEnvironment: 'jsdom',  watchman: true,};\n```\n\nWithin your project-level Jest config, you can extend the preset to inherit the settings.\n\n/jest.config.js\n\n```\nmodule.exports = {  preset: 'company-jest-preset',};\n```\n\nYou can take this a step further by passing the `--preset` option in the [task above](#setup), so\nthat all projects inherit the preset by default.\n\n## FAQ\n\n### How to test a single file or folder?\n\nYou can filter tests by passing a file name, folder name, glob, or regex pattern after `--`. Any\npassed files are relative from the project's root, regardless of where the `moon` command is being\nran.\n\n```\n$ moon run\n:test -- filename\n```\n\n### How to use `projects`?\n\nWith moon, there's no reason to use\n[`projects`](https://jestjs.io/docs/configuration#projects-arraystring--projectconfig) as the `test`\ntask is ran per project. If you'd like to test multiple projects, use\n[`moon run :test`](/docs/commands/run).\n\n## /docs/guides/examples/nest\n\nSource: https://moonrepo.dev/docs/guides/examples/nest\n\n# Nest example\n\nIn this guide, you'll learn how to integrate [NestJS](https://nestjs.com/) into moon.\n\nBegin by creating a new NestJS project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n```\nnpx @nestjs/cli@latest new nestjs-app --skip-git\n```\n\nView the [official NestJS docs](https://docs.nestjs.com/first-steps) for a more in-depth guide to\ngetting started!\n\n## Setup\n\nSince NestJS is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\n/moon.yml\n\n```\nlayer: 'application'fileGroups:  app:    - 'nest-cli.*'tasks:  dev:    command: 'nest start --watch'    preset: 'server'  build:    command: 'nest build'    inputs:      - '@group(app)'      - '@group(sources)'\n```\n\n### TypeScript integration\n\nNestJS has [built-in support for TypeScript](https://NestJS.io/guide/typescript-configuration), so\nthere is no need for additional configuration to enable TypeScript support.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository.\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as NestJS should be installed per-project, and the\n`nest` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new NestJS project, a [`nest-cli.json`](https://docs.nestjs.com/cli/monorepo) is\ncreated, and must exist in the project root. This allows each project to configure NestJS for\ntheir needs.\n\n/nest-cli.json\n\n```\n{  \"$schema\": \"https://json.schemastore.org/nest-cli\",  \"collection\": \"@nestjs/schematics\",  \"type\": \"application\",  \"root\": \"./\",  \"sourceRoot\": \"src\",  \"compilerOptions\": {    \"tsConfigPath\": \"tsconfig.build.json\"  }}\n```\n\n## /docs/guides/examples/next\n\nSource: https://moonrepo.dev/docs/guides/examples/next\n\n# Next example\n\nIn this guide, you'll learn how to integrate [Next.js](https://nextjs.org) into moon.\n\nBegin by creating a new Next.js project at a specified folder path (this should not be created in\nthe workspace root, unless a polyrepo).\n\n```\ncd apps && npx create-next-app\n --typescript\n```\n\nView the [official Next.js docs](https://nextjs.org/learn/basics/create-nextjs-app/setup) for a\nmore in-depth guide to getting started!\n\n## Setup\n\nSince Next.js is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Next.js tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/next).\n\n/moon.yml\n\n```\n# Inherit tasks from the `next` preset# https://github.com/moonrepo/moon-configstags: ['next']\n```\n\n### ESLint integration\n\nNext.js has [built-in support for ESLint](https://nextjs.org/docs/basic-features/eslint), which is\ngreat, but complicates things a bit. Because of this, you have two options for moving forward:\n\n- Use a [global `lint` task](/docs/guides/examples/eslint) and bypass Next.js's solution (preferred).\n\n- Use Next.js's solution only.\n\nRegardless of which option is chosen, the following changes are applicable to all options and should\nbe made. Begin be installing the\n[`eslint-config-next`](https://nextjs.org/docs/basic-features/eslint#eslint-config) dependency in\nthe application's `package.json`.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev eslint-config-next\n```\n\n```\nyarn workspace\n add --dev eslint-config-next\n```\n\n```\nnpm install --save-dev --workspace\n eslint-config-next\n```\n\n```\npnpm add --save-dev --filter\n eslint-config-next\n```\n\n```\nbun install --dev eslint-config-next\n```\n\nSince the Next.js app is located within a subfolder, we'll need to tell the ESLint plugin where to\nlocate it. This can be achieved with a project-level `.eslintrc.js` file.\n\n/.eslintrc.js\n\n```\nmodule.exports = {  extends: 'next', // or 'next/core-web-vitals'  settings: {    next: {      rootDir: __dirname,    },  },};\n```\n\nWith the basics now setup, choose the option that works best for you.\n\n- Global lint\n- Next.js lint\n\nWe encourage using the global `lint` task for consistency across all projects within the repository.\nWith this approach, the `eslint` command itself will be ran and the `next lint` command will be\nignored, but the `eslint-config-next` rules will still be used.\n\nAdditionally, we suggest disabling the linter during the build process, but is not a requirement. As\na potential alternative, add the `lint` task as a dependency for the `build` task.\n\n/next.config.js\n\n```\nmodule.exports = {  eslint: {    ignoreDuringBuilds: true,  },};\n```\n\nIf you'd prefer to use the `next lint` command, add it as a task to the project's\n[`moon.yml`](/docs/config/project).\n\n/moon.yml\n\n```\ntasks:  lint:    command: 'next lint'    inputs:      - '@group(next)'\n```\n\nFurthermore, if a global `lint` task exists, be sure to exclude it from being inherited.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['lint']\n```\n\n### TypeScript integration\n\nNext.js also has\n[built-in support for TypeScript](https://nextjs.org/docs/basic-features/typescript), but has\nsimilar caveats to the [ESLint integration](#eslint-integration). TypeScript itself is a bit\ninvolved, so we suggest reading the official Next.js documentation before continuing.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository.\n\nAdditionally, we suggest disabling the typechecker during the build process, but is not a\nrequirement. As a potential alternative, add the `typecheck` task as a dependency for the `build`\ntask.\n\n/next.config.js\n\n```\nmodule.exports = {  typescript: {    ignoreBuildErrors: true,  },};\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Next.js should be installed per-project, and the\n`next` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Next.js project, a\n[`next.config.`](https://nextjs.org/docs/api-reference/next.config.js/introduction) is\ncreated, and must exist in the project root. This allows each project to configure Next.js for\ntheir needs.\n\n/next.config.js\n\n```\nmodule.exports = {  compress: true,};\n```\n\n## /docs/guides/examples/nuxt\n\nSource: https://moonrepo.dev/docs/guides/examples/nuxt\n\n# Nuxt example\n\nIn this guide, you'll learn how to integrate [Nuxt v3](https://nuxt.com), a [Vue](/docs/guides/examples/vue) framework,\ninto moon.\n\nBegin by creating a new Nuxt project at a specified folder path (this should not be created in the\nworkspace root, unless a polyrepo).\n\n```\ncd apps && npx nuxi init\n\n```\n\nView the [official Nuxt docs](https://nuxt.com/docs/getting-started/installation) for a more\nin-depth guide to getting started!\n\n## Setup\n\nSince Nuxt is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\n/moon.yml\n\n```\nfileGroups:  nuxt:    - 'assets/**/*'    - 'components/**/*'    - 'composables/**/*'    - 'content/**/*'    - 'layouts/**/*'    - 'middleware/**/*'    - 'pages/**/*'    - 'plugins/**/*'    - 'public/**/*'    - 'server/**/*'    - 'utils/**/*'    - '.nuxtignore'    - 'app.config.*'    - 'app.vue'    - 'nuxt.config.*'tasks:  nuxt:    command: 'nuxt'    preset: 'server'  # Production build  build:    command: 'nuxt build'    inputs:      - '@group(nuxt)'    outputs:      - '.nuxt'      - '.output'  # Development server  dev:    command: 'nuxt dev'    preset: 'server'  # Preview production build locally  preview:    command: 'nuxt preview'    deps:      - '~:build'    preset: 'server'\n```\n\nBe sure to keep the `postinstall` script in your project's `package.json`.\n\n/package.json\n\n```\n{  // ...  \"scripts\": {    \"postinstall\": \"nuxt prepare\"  }}\n```\n\n### ESLint integration\n\nRefer to our [Vue documentation](/docs/guides/examples/vue#eslint-integration) for more information on linting.\n\n### TypeScript integration\n\nNuxt requires `vue-tsc` for typechecking, so refer to our\n[Vue documentation](/docs/guides/examples/vue#typescript-integration) for more information.\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Nuxt should be installed per-project, and the\n`nuxt` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Nuxt project, a\n[`nuxt.config.ts`](https://v3.nuxtjs.org/api/configuration/nuxt-config) is created, and must exist\nin the project root. This allows each project to configure Next.js for their needs.\n\n/nuxt.config.ts\n\n```\nexport default defineNuxtConfig({});\n```\n\n## Testing\n\nNuxt supports testing through [Jest](https://jestjs.io/) or [Vitest](https://vitest.dev/). Refer to\nour [Jest documentation](/docs/guides/examples/jest) or [Vitest documentation](/docs/guides/examples/vite) for more information on testing.\n\n## /docs/guides/examples/packemon\n\nSource: https://moonrepo.dev/docs/guides/examples/packemon\n\n# Packemon example\n\nIn this guide, you'll learn how to integrate [Packemon](https://packemon.dev/) into moon. Packemon\nis a tool for properly building npm packages for distribution, it does this by providing the\nfollowing functionality:\n\n- Compiles source code to popular formats: CJS, MJS, ESM, UMD, etc.\n\n- Validates the `package.json` for incorrect fields or values.\n\n- Generates `exports` mappings for `package.json` based on the define configuration.\n\n- And many more [optimizations and features](https://packemon.dev/docs/features)!\n\nBegin by installing `packemon` in your root. We suggest using the same version across the entire\nrepository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev packemon\n```\n\n```\nyarn add --dev packemon# If using workspacesyarn add --dev -W packemon\n```\n\n```\nnpm install --save-dev packemon\n```\n\n```\npnpm add --save-dev packemon# If using workspacespnpm add --save-dev -w packemon\n```\n\n```\nbun install --dev packemon\n```\n\n## Setup\n\nSince Packemon is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Packemon tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/packemon).\n\n/moon.yml\n\n```\n# Inherit tasks from the `packemon` preset# https://github.com/moonrepo/moon-configstags: ['packemon']# Set the output formatstasks:  build:    outputs:      - 'cjs'\n```\n\n### TypeScript integration\n\nPackemon has built-in support for TypeScript, but to not conflict with a\n[typecheck task](/docs/guides/examples/typescript), a separate `tsconfig.json` file is required, which is named\n`tsconfig..json`.\n\nThis config is necessary to only compile source files, and to not include unwanted files in the\ndeclaration output directory.\n\ntsconfig.esm.json\n\n```\n{  \"extends\": \"../../tsconfig.options.json\",  \"compilerOptions\": {    \"outDir\": \"esm\",    \"rootDir\": \"src\"  },  \"include\": [\"src/**/*\"],  \"references\": []}\n```\n\n### Build targets\n\nTo configure the target platform(s) and format(s), you must define a\n[`packemon` block](https://packemon.dev/docs/config) in the project's `package.json`. The chosen\nformats must also be listed as `outputs` in the task.\n\npackage.json\n\n```\n{  \"name\": \"package\",  // ...  \"packemon\": {    \"format\": \"esm\",    \"platform\": \"browser\"  }}\n```\n\n## /docs/guides/examples/prettier\n\nSource: https://moonrepo.dev/docs/guides/examples/prettier\n\n# Prettier example\n\nIn this guide, you'll learn how to integrate [Prettier](https://prettier.io/) into moon.\n\nBegin by installing `prettier` in your root. We suggest using the same version across the entire\nrepository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev prettier\n```\n\n```\nyarn add --dev prettier# If using workspacesyarn add --dev -W prettier\n```\n\n```\nnpm install --save-dev prettier\n```\n\n```\npnpm add --save-dev prettier# If using workspacespnpm add --save-dev -w prettier\n```\n\n```\nbun install --dev prettier\n```\n\n## Setup\n\nSince code formatting is a universal workflow, add a `format` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  format:    command:      - 'prettier'      # Use the same config for the entire repo      - '--config'      - '@in(4)'      # Use the same ignore patterns as well      - '--ignore-path'      - '@in(3)'      # Fail for unformatted code      - '--check'      # Run in current dir      - '.'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Config and other files      - '**/*.{md,mdx,yml,yaml,json}'      # Root configs, any format      - '/.prettierignore'      - '/.prettierrc.*'\n```\n\n## Configuration\n\n### Root-level\n\nThe root-level Prettier config is required, as it defines conventions and standards to apply to\nthe entire repository.\n\n.prettierrc.js\n\n```\nmodule.exports = {  arrowParens: 'always',  semi: true,  singleQuote: true,  tabWidth: 2,  trailingComma: 'all',  useTabs: true,};\n```\n\nThe `.prettierignore` file must also be defined at the root, as\n[only 1 ignore file](https://prettier.io/docs/en/ignore.html#ignoring-files-prettierignore) can\nexist in a repository. We ensure this ignore file is used by passing `--ignore-path` above.\n\n.prettierignore\n\n```\nnode_modules/*.min.js*.map*.snap\n```\n\n### Project-level\n\nWe suggest against project-level configurations, as the entire repository should be formatted\nusing the same standards. However, if you're migrating code and need an escape hatch,\n[overrides in the root](https://prettier.io/docs/en/configuration.html#configuration-overrides) will\nwork.\n\n## FAQ\n\n### How to use `--write`?\n\nUnfortunately, this isn't currently possible, as the `prettier` binary itself requires either the\n`--check` or `--write` options, and since we're configuring `--check` in the task above, that takes\nprecedence. This is also the preferred pattern as checks will run (and fail) in CI.\n\nTo work around this limitation, we suggest the following alternatives:\n\n- Configure your editor to run Prettier on save.\n\n- Define another task to write the formatted code, like `format-write`.\n\n## /docs/guides/examples/react\n\nSource: https://moonrepo.dev/docs/guides/examples/react\n\n# React example\n\nReact is an application or library concern, and not a build system one, since the bundling of React\nis abstracted away through another tool like webpack. Because of this, moon has no guidelines around\nutilizing React directly. You can use React however you wish!\n\nHowever, with that being said, we do suggest the following:\n\n- Add `react` and related dependencies to each project, not the root. This includes `@types/react` as well. This will ensure accurate [hashing](/docs/concepts/cache#hashing).\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add react\n```\n\n```\nyarn workspace\n add react\n```\n\n```\nnpm install --workspace\n react\n```\n\n```\npnpm add --filter\n react\n```\n\n```\nbun install react\n```\n\n- Configure Babel with the `@babel/preset-react` preset.\n\n- Configure [TypeScript](/docs/guides/examples/typescript) compiler options with `\"jsx\": \"react-jsx\"`.\n\n## /docs/guides/examples/remix\n\nSource: https://moonrepo.dev/docs/guides/examples/remix\n\n# Remix example\n\nIn this guide, you'll learn how to integrate [Remix](https://remix.run) into moon.\n\nBegin by creating a new Remix project at a specified folder path (this should not be created in the\nworkspace root, unless a polyrepo).\n\n```\ncd apps && npx create-remix\n```\n\nDuring this installation, Remix will ask a handful of questions, but be sure to answer \"No\" for the\n\"Do you want me to run `npm install`?\" question. We suggest installing dependencies at the workspace\nroot via package workspaces!\n\nView the [official Remix docs](https://remix.run/docs/en/v1) for a more in-depth guide to getting\nstarted!\n\n## Setup\n\nSince Remix is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Remix tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/remix).\n\n/moon.yml\n\n```\n# Inherit tasks from the `remix` preset# https://github.com/moonrepo/moon-configstags: ['remix']\n```\n\n### ESLint integration\n\nRemix does not provide a built-in linting abstraction, and instead provides a simple ESLint\nconfiguration package,\n[`@remix-run/eslint-config`](https://www.npmjs.com/package/@remix-run/eslint-config). For the rest\nof this section, we're going to assume that a [global `lint` task](/docs/guides/examples/eslint) has been configured.\n\nBegin be installing the `@remix-run/eslint-config` dependency in the application's `package.json`.\nWe can then enable this configuration by creating an `.eslintrc.js` file in the project root. Be\nsure this file is listed in your `lint` task's inputs!\n\n/.eslintrc.js\n\n```\nmodule.exports = {  extends: ['@remix-run/eslint-config', '@remix-run/eslint-config/node'],  // If using TypeScript  parser: '@typescript-eslint/parser',  parserOptions: {    project: 'tsconfig.json',    tsconfigRootDir: __dirname,  },};\n```\n\n### TypeScript integration\n\nRemix ships with TypeScript support (when enabled during installation), but the `tsconfig.json` it\ngenerates is not setup for TypeScript project references, which we suggest using with a\n[global `typecheck` task](/docs/guides/examples/typescript).\n\nWhen using project references, we suggest the following `tsconfig.json`, which is a mix of Remix and\nmoon. Other compiler options, like `isolatedModules` and `esModuleInterop`, should be declared in a\nshared configuration found in the workspace root (`tsconfig.projectOptions.json` in the example).\n\n/tsconfig.json\n\n```\n{  \"extends\": \"../../tsconfig.projectOptions.json\",  \"compilerOptions\": {    \"baseUrl\": \".\",    \"emitDeclarationOnly\": false,    \"jsx\": \"react-jsx\",    \"resolveJsonModule\": true,    \"moduleResolution\": \"node\",    \"noEmit\": true,    \"paths\": {      \"~/*\": [\"./app/*\"]    }  },  \"include\": [\".eslintrc.js\", \"remix.env.d.ts\", \"**/*\"],  \"exclude\": [\".cache\", \"build\", \"public\"]}\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Remix should be installed per-project, and the\n`remix` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Remix project, a\n[`remix.config.js`](https://remix.run/docs/en/v1/api/conventions) is created, and must exist in\nthe project root. This allows each project to configure Remix for their needs.\n\n/remix.config.js\n\n```\nmodule.exports = {  appDirectory: 'app',};\n```\n\n## /docs/guides/examples/solid\n\nSource: https://moonrepo.dev/docs/guides/examples/solid\n\n# Solid example\n\n[Solid](https://www.solidjs.com) (also known as SolidJS) is a JavaScript framework for building\ninteractive web applications. Because of this, Solid is an application or library concern, and not a\nbuild system one, since the bundling of Solid is abstracted away through the application or a\nbundler.\n\nWith that being said, we do have some suggestions on utilizing Solid effectively in a monorepo. To\nbegin, install Solid to a project.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add solid-js\n```\n\n```\nyarn workspace\n add solid-js\n```\n\n```\nnpm install --workspace\n solid-js\n```\n\n```\npnpm add --filter\n solid-js\n```\n\n```\nbun install solid-js\n```\n\n## Setup\n\nSolid utilizes JSX for rendering markup, which requires\n[`babel-preset-solid`](https://www.npmjs.com/package/babel-preset-solid) for parsing and\ntransforming. To enable the preset for the entire monorepo, add the preset to a root\n`babel.config.js`, otherwise add it to a `.babelrc.js` in each project that requires it.\n\n```\nmodule.exports = {  presets: ['solid'],};\n```\n\n### TypeScript integration\n\nFor each project using Solid, add the following compiler options to the `tsconfig.json` found in the\nproject root.\n\n/tsconfig.json\n\n```\n{  \"compilerOptions\": {    \"jsx\": \"preserve\",    \"jsxImportSource\": \"solid-js\"  }}\n```\n\n### Vite integration\n\nIf you're using a [Vite](/docs/guides/examples/vite) powered application (Solid Start or starter templates), you should\nenable [`vite-plugin-solid`](https://www.npmjs.com/package/vite-plugin-solid) instead of configuring\nBabel. Be sure to read our [guide on Vite](/docs/guides/examples/vite) as well!\n\n/vite.config.js\n\n```\nimport { defineConfig } from 'vite';import solidPlugin from 'vite-plugin-solid';export default defineConfig({  // ...  plugins: [solidPlugin()],});\n```\n\n## /docs/guides/examples/storybook\n\nSource: https://moonrepo.dev/docs/guides/examples/storybook\n\n# Storybook example\n\nStorybook is a frontend workshop for building UI components and pages in isolation. Thousands of\nteams use it for UI development, testing, and documentation. Its open source and free.\n\n[Storybook v7](https://storybook.js.org/docs/7.0) is typically coupled with\n[Vite](https://vitejs.dev/). To scaffold a new Storybook project with Vite, run the following\ncommand in a project root. This guide assumes you are using React, however it is possible to use\nalmost any (meta) framework with Storybook.\n\n```\ncd\n && npx storybook init\n```\n\nWe highly suggest reading our documentation on [using Vite (and Vitest) with moon](/docs/guides/examples/vite) and\n[using Jest with moon](/docs/guides/examples/jest) for a more holistic view.\n\n## Setup\n\nThis section assumes Storybook is being used with Vite, and is integrated on a per-project basis.\n\nAfter setting up Storybook, ensure [`moon.yml`](/docs/config/project) has the following tasks:\n\n/moon.yml\n\n```\nfileGroups:  storybook:    - 'src/**/*'    - 'stories/**/*'    - 'tests/**/*'    - '.storybook/**/*'tasks:  buildStorybook:    command: 'build-storybook --output-dir @out(0)'    inputs:      - '@group(storybook)'    outputs:      - 'build'  storybook:    preset: 'server'    command: 'start-storybook'    inputs:      - '@group(storybook)'\n```\n\nTo run the Storybook development server:\n\n```\nmoon run\n:storybook\n```\n\n### Vite integration\n\nStorybook 7 uses Vite out of the box, and as such, no configuration is required, but should you\nchoose to extend the Vite config, you can do so by passing in `viteFinal`:\n\n.storybook/main.ts\n\n```\nimport { mergeConfig } from 'vite';export default {  stories: ['../stories/**/*.stories.mdx', '../stories/**/*.stories.@(js|jsx|ts|tsx)'],  addons: ['@storybook/addon-links', '@storybook/addon-essentials'],  core: {    builder: '@storybook/builder-vite',  },  async viteFinal(config) {    // Merge custom configuration into the default config    return mergeConfig(config, {      // Use the same \"resolve\" configuration as your app      resolve: (await import('../vite.config.js')).default.resolve,      // Add dependencies to pre-optimization      optimizeDeps: {        include: ['storybook-dark-mode'],      },    });  },};\n```\n\nFor more information on how to integrate Vite with Storybook see the\n[relevant documentation](https://storybook.js.org/docs/7.0/react/builders/vite#configuration).\n\n### Webpack integration\n\nIf you want to use Webpack with your Storybook project, you can do so by installing the relevant\npackage and updating configuration.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev @storybook/builder-webpack5\n```\n\n```\nyarn workspace\n add --dev @storybook/builder-webpack5\n```\n\n```\nnpm install --save-dev --workspace\n @storybook/builder-webpack5\n```\n\n```\npnpm add --save-dev --filter\n @storybook/builder-webpack5\n```\n\n```\nbun install --dev @storybook/builder-webpack5\n```\n\n.storybook/main.ts\n\n```\nexport default {  core: {    builder: '@storybook/builder-webpack5',  },};\n```\n\nFor more information on how to integrate Webpack with Storybook, see the\n[relevant documentation](https://storybook.js.org/docs/7.0/react/builders/webpack).\n\n### Jest integration\n\nYou can use Jest to test your stories, but isn't a requirement. Storybook ships with first-party\nplugins for improved developer experience.\n\nInstall the test runner and any relevant packages:\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\nyarn workspace\n add --dev @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\nnpm install --save-dev --workspace\n @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\npnpm add --save-dev --filter\n @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\n```\nbun install --dev @storybook/addon-interactions @storybook/addon-coverage @storybook/jest@next @storybook/testing-library@next @storybook/test-runner@next\n```\n\nAdd the test task to your project:\n\n/moon.yml\n\n```\ntasks:  testStorybook:    command: 'test-storybook'    inputs:      - '@group(storybook)'\n```\n\nThen enable plugins and interactions in your Storybook project:\n\n.storybook/main.ts\n\n```\nexport default {  stories: ['../src/**/*.stories.mdx', '../src/**/*.stories.@(js|jsx|ts|tsx)'],  addons: [    // Other Storybook addons    '@storybook/addon-interactions', // Addon is registered here    '@storybook/addon-coverage',  ],  features: {    interactionsDebugger: true, // Enable playback controls  },};\n```\n\nYou can now start writing your tests. For an extended guide on how to write tests within your\nstories, see\n[writing an interaction test](https://storybook.js.org/docs/react/writing-tests/interaction-testing#write-an-interaction-test)\non the Storybook docs.\n\n## Configuration\n\nStorybook requires a `.storybook` folder relative to the project root. Because of this, Storybook\nshould be scaffolded in each project individually. Configuration may be shared through package\nimports.\n\n## /docs/guides/examples/sveltekit\n\nSource: https://moonrepo.dev/docs/guides/examples/sveltekit\n\n# SvelteKit example\n\n[SvelteKit](https://kit.svelte.dev) is built on [Svelte](https://svelte.dev), a UI framework that\nuses a compiler to let you write breathtakingly concise components that do minimal work in the\nbrowser, using languages you already know  HTML, CSS and JavaScript. It's a love letter to web\ndevelopment.\n\n```\ncd apps && npm create svelte@latest\n\n```\n\nYou will be prompted to choose between select templates, TypeScript, ESLint, Prettier, Playwright\nand Vitest among other options. moon supports and has guides for many of these tools.\n\nWe highly suggest reading our documentation on [using Vite (and Vitest) with moon](/docs/guides/examples/vite),\n[using ESLint with moon](/docs/guides/examples/eslint) and [using Prettier with moon](/docs/guides/examples/prettier) for a more holistic\nview.\n\n## Setup\n\nSince SvelteKit is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting SvelteKit tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/sveltekit).\n\n/moon.yml\n\n```\n# Inherit tasks from the `sveltekit` preset# https://github.com/moonrepo/moon-configstags: ['sveltekit']\n```\n\n### ESLint integration\n\nSvelteKit provides an option to setup ESLint along with your project, with moon you can use a\n[global `lint` task](/docs/guides/examples/eslint). We encourage using the global `lint` task for consistency across all\nprojects within the repository. With this approach, the `eslint` command itself will be ran and the\n`svelte3` rules will still be used.\n\n/moon.yml\n\n```\ntasks:  # Extends the top-level lint  lint:    args:      - '--ext'      - '.ts,.svelte'\n```\n\nBe sure to enable the Svelte parser and plugin in a project local ESLint configuration file.\n\n.eslintrc.cjs\n\n```\nmodule.exports = {  plugins: ['svelte3'],  ignorePatterns: ['*.cjs'],  settings: {    'svelte3/typescript': () => require('typescript'),  },  overrides: [{ files: ['*.svelte'], processor: 'svelte3/svelte3' }],};\n```\n\n### TypeScript integration\n\nSvelteKit also has built-in support for TypeScript, but has similar caveats to the\n[ESLint integration](#eslint-integration). TypeScript itself is a bit involved, so we suggest\nreading the official [SvelteKit documentation](https://kit.svelte.dev/docs/introduction) before\ncontinuing.\n\nAt this point we'll assume that a `tsconfig.json` has been created in the application, and\ntypechecking works. From here we suggest utilizing a [global `typecheck` task](/docs/guides/examples/typescript) for\nconsistency across all projects within the repository. However, because Svelte isn't standard\nJavaScript, it requires the use of the `svelte-check` command for type-checking.\n\ninfo\n\nThe\n[moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/sveltekit)\nprovides the `check` task below.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['typecheck']tasks:  check:    command: 'svelte-check --tsconfig ./tsconfig.json'    deps:      - 'typecheck-sync'    inputs:      - '@group(svelte)'      - 'tsconfig.json'\n```\n\nIn case Svelte doesn't automatically create a `tsconfig.json`, you can use the following:\n\n/tsconfig.json\n\n```\n{  \"extends\": \"./.svelte-kit/tsconfig.json\",  \"compilerOptions\": {    \"allowJs\": true,    \"checkJs\": true,    \"esModuleInterop\": true,    \"forceConsistentCasingInFileNames\": true,    \"resolveJsonModule\": true,    \"skipLibCheck\": true,    \"sourceMap\": true,    \"strict\": true  }}\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as SvelteKit should be installed per-project, and the\n`vite` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new SvelteKit project, a\n[`svelte.config.js`](https://kit.svelte.dev/docs/configuration) is created, and must exist in the\nproject root. This allows each project to configure SvelteKit for their needs.\n\n/svelte.config.js\n\n```\nimport adapter from '@sveltejs/adapter-auto';import { vitePreprocess } from '@sveltejs/kit/vite';/** @type {import('@sveltejs/kit').Config} */const config = {  // Consult https://kit.svelte.dev/docs/integrations#preprocessors  // for more information about preprocessors  preprocess: vitePreprocess(),  kit: {    adapter: adapter(),  },};export default config;\n```\n\n## /docs/guides/examples/typescript\n\nSource: https://moonrepo.dev/docs/guides/examples/typescript\n\n# TypeScript example\n\nIn this guide, you'll learn how to integrate [TypeScript](https://www.typescriptlang.org/) into\nmoon. We'll be using [project references](/docs/guides/javascript/typescript-project-refs), as it ensures that\nonly affected projects are built, and not the entire repository.\n\nBegin by installing `typescript` and any pre-configured tsconfig packages in your root. We suggest\nusing the same version across the entire repository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev typescript tsconfig-moon\n```\n\n```\nyarn add --dev typescript tsconfig-moon# If using workspacesyarn add --dev -W typescript tsconfig-moon\n```\n\n```\nnpm install --save-dev typescript tsconfig-moon\n```\n\n```\npnpm add --save-dev typescript tsconfig-moon# If using workspacespnpm add --save-dev -w typescript tsconfig-moon\n```\n\n```\nbun install --dev typescript tsconfig-moon\n```\n\n## Setup\n\nSince typechecking is a universal workflow, add a `typecheck` task to\n[`.moon/tasks/node.yml`](/docs/config/tasks) with the following parameters.\n\n.moon/tasks/node.yml\n\n```\ntasks:  typecheck:    command:      - 'tsc'      # Use incremental builds with project references      - '--build'      # Always use pretty output      - '--pretty'      # Use verbose logging to see affected projects      - '--verbose'    inputs:      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Type declarations      - 'types/**/*'      # Project configs      - 'tsconfig.json'      - 'tsconfig.*.json'      # Root configs (extended from only)      - '/tsconfig.options.json'    outputs:      # Matches `compilerOptions.outDir`      - 'lib'\n```\n\nProjects can extend this task and provide additional parameters if need be, for example.\n\n/moon.yml\n\n```\ntasks:  typecheck:    args:      # Force build every time      - '--force'\n```\n\n## Configuration\n\n### Root-level\n\nMultiple root-level TypeScript configs are required, as we need to define compiler options that\nare shared across the repository, and we need to house a list of all project references.\n\nTo start, let's create a `tsconfig.options.json` that will contain our compiler options. In our\nexample, we'll extend [tsconfig-moon](https://www.npmjs.com/package/tsconfig-moon) for convenience.\nSpecifically, the `tsconfig.workspaces.json` config, which enables ECMAScript modules, composite\nmode, declaration emitting, and incremental builds.\n\ntsconfig.options.json\n\n```\n{  \"extends\": \"tsconfig-moon/tsconfig.projects.json\",  \"compilerOptions\": {    // Your custom options    \"moduleResolution\": \"nodenext\",    \"target\": \"es2022\"  }}\n```\n\nWe'll also need the standard `tsconfig.json` to house our project references. This is used by\neditors and tooling for deep integrations.\n\ntsconfig.json\n\n```\n{  \"extends\": \"./tsconfig.options.json\",  \"files\": [],  // All project references in the repo  \"references\": []}\n```\n\nThe [`typescript.rootConfigFileName`](/docs/config/toolchain#rootconfigfilename) setting can be\nused to change the root-level config name and the\n[`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting will\nautomatically keep project references in sync!\n\n### Project-level\n\nEvery project will require a `tsconfig.json`, as TypeScript itself requires it. The following\n`tsconfig.json` will typecheck the entire project, including source and test files.\n\n/tsconfig.json\n\n```\n{  // Extend the root compiler options  \"extends\": \"../../tsconfig.options.json\",  \"compilerOptions\": {    // Declarations are written here    \"outDir\": \"lib\"  },  // Include files in the project  \"include\": [\"src/**/*\", \"tests/**/*\"],  // Depends on other projects  \"references\": []}\n```\n\nThe [`typescript.projectConfigFileName`](/docs/config/toolchain#projectconfigfilename) setting can\nbe used to change the project-level config name.\n\n### Sharing\n\nTo share configuration across projects, you have 3 options:\n\n- Define settings in a [root-level config](#root-level). This only applies to the parent repository.\n\n- Create and publish an [`tsconfig base`](https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#tsconfig-bases) npm package. This can be used in any repository.\n\n- A combination of 1 and 2.\n\nFor options 2 and 3, if you're utilizing package workspaces, create a local package with the\nfollowing content.\n\npackages/tsconfig-company/tsconfig.json\n\n```\n{  \"compilerOptions\": {    // ...    \"lib\": [\"esnext\"]  }}\n```\n\nWithin another `tsconfig.json`, you can extend this package to inherit the settings.\n\ntsconfig.json\n\n```\n{  \"extends\": \"tsconfig-company/tsconfig.json\"}\n```\n\n## FAQ\n\n### How to preserve pretty output?\n\nTypeScript supports a pretty format where it includes codeframes and color highlighting for\nfailures. However, when `tsc` is piped or the terminal is not a TTY, the pretty format is lost. To\npreserve and always display the pretty format, be sure to pass the `--pretty` argument!\n\n## /docs/guides/examples/vite\n\nSource: https://moonrepo.dev/docs/guides/examples/vite\n\n# Vite & Vitest example\n\nIn this guide, you'll learn how to integrate [Vite](https://vitejs.dev/) and\n[Vitest](https://vitest.dev/) into moon.\n\nBegin by creating a new Vite project in the root of an existing moon project (this should not be\ncreated in the workspace root, unless a polyrepo).\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n\n```\nyarn create vite\n```\n\n```\nyarn create vite\n```\n\n```\nnpm create vite\n```\n\n```\npnpm create vite\n```\n\nIf you plan on using Vitest, run the following command to add the `vitest` dependency to a project,\notherwise skip to the setup section.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn workspace\n add --dev vitest\n```\n\n```\nyarn workspace\n add --dev vitest\n```\n\n```\nnpm install --save-dev --workspace\n vitest\n```\n\n```\npnpm add --save-dev --filter\n vitest\n```\n\n```\nbun install --dev vitest\n```\n\n## Setup\n\nSince Vite is per-project, the associated moon tasks should be defined in each project's\n[`moon.yml`](/docs/config/project) file.\n\ntip\n\nWe suggest inheriting Vite tasks from the\n[official moon configuration preset](https://github.com/moonrepo/moon-configs/tree/master/javascript/vite).\n\n/moon.yml\n\n```\n# Inherit tasks from the `vite` and `vitest` presets# https://github.com/moonrepo/moon-configstags: ['vite', 'vitest']\n```\n\n## Configuration\n\n### Root-level\n\nWe suggest against root-level configuration, as Vite should be installed per-project, and the\n`vite` command expects the configuration to live relative to the project root.\n\n### Project-level\n\nWhen creating a new Vite project, a [`vite.config.`](https://vitejs.dev/config) is created,\nand must exist in the project root.\n\n/vite.config.js\n\n```\nimport { defineConfig } from 'vite';export default defineConfig({  // ...  build: {    // These must be `outputs` in the `build` task    outDir: 'dist',  },  test: {    // Vitest settings  },});\n```\n\nIf you'd prefer to configure Vitest in a\n[separate configuration file](https://vitest.dev/guide/#configuring-vitest), create a\n`vitest.config.` file.\n\n## /docs/guides/examples/vue\n\nSource: https://moonrepo.dev/docs/guides/examples/vue\n\n# Vue example\n\nVue is an application or library concern, and not a build system one, since the bundling of Vue is\nabstracted away through other tools. Because of this, moon has no guidelines around utilizing Vue\ndirectly. You can use Vue however you wish!\n\nHowever, with that being said, Vue is typically coupled with [Vite](https://vitejs.dev/). To\nscaffold a new Vue project with Vite, run the following command in a project root.\n\n```\nnpm init vue@latest\n```\n\nWe highly suggest reading our documentation on [using Vite (and Vitest) with moon](/docs/guides/examples/vite) for a\nmore holistic view.\n\n## Setup\n\nThis section assumes Vue is being used with Vite.\n\n### ESLint integration\n\nWhen linting with [ESLint](/docs/guides/examples/eslint) and the\n[`eslint-plugin-vue`](https://eslint.vuejs.org/user-guide/#installation) library, you'll need to\ninclude the `.vue` extension within the `lint` task. This can be done by extending the top-level\ntask within the project (below), or by adding it to the top-level entirely.\n\n/moon.yml\n\n```\ntasks:  lint:    args:      - '--ext'      - '.js,.ts,.vue'\n```\n\nFurthermore, when using TypeScript within ESLint, we need to make a few additional changes to the\n`.eslintrc.js` config found in the root (if the entire repo is Vue), or within the project (if only\nthe project is Vue).\n\n```\nmodule.exports = {  parser: 'vue-eslint-parser',  parserOptions: {    extraFileExtensions: ['.vue'],    parser: '@typescript-eslint/parser',    project: 'tsconfig.json', // Or another config    tsconfigRootDir: __dirname,  },};\n```\n\n### TypeScript integration\n\nVue does not use [TypeScript](/docs/guides/examples/typescript)'s `tsc` binary directly, but instead uses\n[`vue-tsc`](https://vuejs.org/guide/typescript/overview.html), which is a thin wrapper around `tsc`\nto support Vue components. Because of this, we should update the `typecheck` task in the project to\nutilize this command instead.\n\n/moon.yml\n\n```\nworkspace:  inheritedTasks:    exclude: ['typecheck']tasks:  typecheck:    command:      - 'vue-tsc'      - '--noEmit'      # Always use pretty output      - '--pretty'    inputs:      - 'env.d.ts'      # Source and test files      - 'src/**/*'      - 'tests/**/*'      # Project configs      - 'tsconfig.json'      - 'tsconfig.*.json'      # Root configs (extended from only)      - '/tsconfig.options.json'\n```\n\nBe sure `tsconfig.json` compiler options are based on\n[`@vue/tsconfig`](https://vuejs.org/guide/typescript/overview.html#configuring-tsconfig-json).\n\n## /docs/guides/extensions\n\nSource: https://moonrepo.dev/docs/guides/extensions\n\n# Extensions\n\nv1.20.0\n\nAn extension is a WASM plugin that allows you to extend moon with additional functionality, have\nwhitelisted access to the file system, and receive partial information about the current workspace.\nExtensions are extremely useful in offering new and unique functionality that doesn't need to be\nbuilt into moon's core. It also enables the community to build and share their own extensions!\n\n## Using extensions\n\nBefore an extension can be executed with the [`moon ext`](/docs/commands/ext) command, it must be\nconfigured with the [`extensions`](/docs/config/workspace#extensions) setting in\n[`.moon/workspace.yml`](/docs/config/workspace) (excluding [built-in's](#built-in-extensions)).\n\n.moon/workspace.yml\n\n```\nextensions:  example:    plugin: 'https://example.com/path/to/example.wasm'\n```\n\nOnce configured, it can be executed with [`moon ext`](/docs/commands/ext) by name. Arguments unique to\nthe extension must be passed after a `--` separator.\n\n```\n$ moon ext example -- --arg1 --arg2\n```\n\n## Built-in extensions\n\nmoon is shipped with a few built-in extensions that are configured and enabled by default. Official\nmoon extensions are built and published in our [moonrepo/moon-extensions](https://github.com/moonrepo/moon-extensions) repository.\n\n### `download`\n\nThe `download` extension can be used to download a file from a URL into the current workspace, as\ndefined by the `--url` argument. For example, say we want to download the latest [proto](/proto)\nbinary:\n\n```\n$ moon ext download --\\  --url https://github.com/moonrepo/proto/releases/latest/download/proto_cli-aarch64-apple-darwin.tar.xz\n```\n\nBy default this will download `proto_cli-aarch64-apple-darwin.tar.xz` into the current working\ndirectory. To customize the location, use the `--dest` argument. However, do note that the\ndestination must be within the current moon workspace, as only certain directories are whitelisted\nfor WASM.\n\n```\n$ moon ext download --\\  --url https://github.com/moonrepo/proto/releases/latest/download/proto_cli-aarch64-apple-darwin.tar.xz\\  --dest ./temp\n```\n\n#### Arguments\n\n- `--url` (required) - URL of a file to download.\n\n- `--dest` - Destination folder to save the file. Defaults to the current working directory.\n\n- `--name` - Override the file name. Defaults to the file name in the URL.\n\n### `migrate-nx`v1.22.0\n\nThis extension is currently experimental and will be improved over time.\n\nThe `migrate-nx` extension can be used to migrate an Nx powered repository to moon. This process\nwill convert the root `nx.json` and `workspace.json` files, and any `project.json` and\n`package.json` files found within the repository. The following changes are made:\n\n- Migrates `targetDefaults` as global tasks to [`.moon/tasks/node.yml`](/docs/config/tasks#tasks) (or `bun.yml`), `namedInputs` as file groups, `workspaceLayout` as projects, and more.\n\n- Migrates all `project.json` settings to [`moon.yml`](/docs/config/project#tasks) equivalent settings. Target to task conversion assumes the following: Target `executor` will be removed, and we'll attempt to extract the appropriate npm package command. For example, `@nx/webpack:build` -> `webpack build`.\n\n- Target `options` will be converted to task `args`.\n\n- The `{projectRoot}` and `{workspaceRoot}` interpolations will be replaced with moon tokens.\n\n```\n$ moon ext migrate-nx\n```\n\ncaution\n\nNx and moon are quite different, so many settings are either ignored when converting, or are not a\n1:1 conversion. We do our best to convert as much as possible, but some manual patching will most\nlikely be required! We suggest testing each converted task 1-by-1 to ensure it works as expected.\n\n#### Arguments\n\n- `--bun` - Migrate to Bun based commands instead of Node.js.\n\n- `--cleanup` - Remove Nx configs/files after migrating.\n\n#### Unsupported\n\nThe following features are not supported in moon, and are ignored when converting.\n\n- Most settings in `nx.json`.\n\n- Named input variants: external dependencies, dependent task output files, dependent project inputs, or runtime commands.\n\n- Target `configurations` and `defaultConfiguration`. Another task will be created instead that uses `extends`.\n\n- Project `root` and `sourceRoot`.\n\n### `migrate-turborepo`v1.21.0\n\nThe `migrate-turborepo` extension can be used to migrate a Turborepo powered repository to moon.\nThis process will convert the root `turbo.json` file, and any `turbo.json` files found within the\nrepository. The following changes are made:\n\n- Migrates `pipeline` (v1) and `tasks` (v2) global tasks to [`.moon/tasks/node.yml`](/docs/config/tasks#tasks) (or `bun.yml`) and project scoped tasks to [`moon.yml`](/docs/config/project#tasks). Task commands will execute `package.json` scripts through a package manager.\n\n- Migrates root `global*` settings to [`.moon/tasks/node.yml`](/docs/config/tasks#implicitinputs) (or `bun.yml`) as `implicitInputs`.\n\n```\n$ moon ext migrate-turborepo\n```\n\n#### Arguments\n\n- `--bun` - Migrate to Bun based commands instead of Node.js.\n\n- `--cleanup` - Remove Turborepo configs/files after migrating.\n\n### `unpack`v2.0.0\n\nThe `unpack` extension can be used to unpack an archive (zip/tar) from a file path or URL into a\ndestination folder.\n\n```\n$ moon ext unpack -- --src ./path/to/archive.zip --dest ./output --prefix path/to/strip\n```\n\n#### Arguments\n\n- `--src` (required) - Path or URL of a file to unpack.\n\n- `--dest` - Destination folder to unpack into. Defaults to the current working directory.\n\n- `--prefix` - A prefix path to strip from unpacked files.\n\n## Creating an extension\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins) for more information on how our WASM plugins\nwork, critical concepts to know, how to create a plugin, and more. Once you have a good\nunderstanding, you may continue this specific guide.\n\nnote\n\nRefer to our [moonrepo/moon-extensions](https://github.com/moonrepo/moon-extensions) repository for in-depth examples.\n\n### Registering metadata\n\nBefore we begin, we must implement the `register_extension` function, which simply provides some\nmetadata that we can bubble up to users, or to use for deeper integrations.\n\n```\nuse extism_pdk::*;use moon_pdk::*;#[plugin_fn]pub fn register_extension(Json(input): Json) -> FnResult> {   Ok(Json(ExtensionMetadataOutput {        name: \"Extension name\".into(),        description: Some(\"A description about what the extension does.\".into()),        plugin_version: env!(\"CARGO_PKG_VERSION\").into(),        ..ExtensionMetadataOutput::default()    }))}\n```\n\n#### Configuration schema\n\nIf you are using [configuration](#supporting-configuration), you can register the shape of the\nconfiguration using the [`schematic`](https://crates.io/crates/schematic) crate. This shape will be\nused to generate outputs such as JSON schemas, or TypeScript types.\n\n```\n#[plugin_fn]pub fn register_extension(_: ()) -> FnResult> {    Ok(Json(ExtensionMetadataOutput {        // ...        config_schema: Some(schematic::SchemaBuilder::generate::()),    }))}\n```\n\nSchematic is a heavy library, so we suggest adding the dependency like so:\n\n```\n[dependencies]schematic = { version = \"*\", default-features = false, features = [\"schema\"] }\n```\n\n### Implementing execution\n\nExtensions support a single plugin function, `execute_extension`, which is called by the\n[`moon ext`](/docs/commands/ext) command to execute the extension. This is where all your business\nlogic will reside.\n\n```\n#[host_fn]extern \"ExtismHost\" {    fn host_log(input: Json);}#[plugin_fn]pub fn execute_extension(Json(input): Json) -> FnResult {  host_log!(stdout, \"Executing extension!\");  Ok(())}\n```\n\n### Supporting arguments\n\nMost extensions will require arguments, as it provides a mechanism for users to pass information\ninto the WASM runtime. To parse arguments, we provide the\n[`Args`](https://docs.rs/clap/latest/clap/trait.Args.html) trait/macro from the\n[clap](https://crates.io/crates/clap) crate. Refer to their\n[official documentation on usage](https://docs.rs/clap/latest/clap/_derive/index.html) (we don't\nsupport everything).\n\n```\nuse moon_pdk::*;#[derive(Args)]pub struct ExampleExtensionArgs {  // --url, -u  #[arg(long, short = 'u', required = true)]  pub url: String,}\n```\n\nOnce your struct has been defined, you can parse the provided input arguments using the\n[`parse_args`](https://docs.rs/moon_pdk/latest/moon_pdk/args/fn.parse_args.html) function.\n\n```\n#[plugin_fn]pub fn execute_extension(Json(input): Json) -> FnResult {  let args = parse_args::(&input.args)?;  args.url; // --url  Ok(())}\n```\n\n### Supporting configuration\n\nUsers can configure [extensions](/docs/config/workspace#extensions) with additional settings in\n[`.moon/workspace.yml`](/docs/config/workspace). Do note that settings should be in camelCase for them\nto be parsed correctly!\n\n.moon/workspace.yml\n\n```\nextensions:  example:    plugin: 'file://./path/to/example.wasm'    someSetting: 'abc'    anotherSetting: 123\n```\n\nIn the plugin, we can map these settings (excluding `plugin`) into a struct. The `Default` trait\nmust be implemented to handle situations where settings were not configured, or some are missing.\n\n```\nconfig_struct!(  #[derive(Default)]  pub struct ExampleExtensionConfig {    pub some_setting: String,    pub another_setting: u32,  });\n```\n\nOnce your struct has been defined, you can access the configuration using the\n[`get_extension_config`](https://docs.rs/moon_pdk/latest/moon_pdk/extension/fn.get_extension_config.html)\nfunction.\n\n```\n#[plugin_fn]pub fn execute_extension(Json(input): Json) -> FnResult {  let config = get_extension_config::()?;  config.another_setting; // 123  Ok(())}\n```\n\n## /docs/guides/javascript/bun-handbook\n\nSource: https://moonrepo.dev/docs/guides/javascript/bun-handbook\n\n# Bun handbook\n\nUtilizing JavaScript (and TypeScript) in a monorepo can be a daunting task, especially when using\nBun (or Node.js), as there are many ways to structure your code and to configure your tools. With\nthis handbook, we'll help guide you through this process.\n\ninfo\n\nThis guide is a living document and will continue to be updated over time!\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable JavaScript support via Bun, define the [`bun`](/docs/config/toolchain#bun) setting in\n[`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Bunbun: {}\n```\n\ninfo\n\nIn moon v1.40+, use `javascript` and `bun` instead of `bun` to enable the new WASM powered Bun\ntoolchain, which is far more accurate and efficient. The non-WASM toolchain will be deprecated in\nthe future.\n\nOr by pinning a `bun` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\nbun = \"1.0.0\"\n```\n\nThis will enable the Bun toolchain and provide the following automations around its ecosystem:\n\n- Node modules will automatically be installed if dependencies in `package.json` have changed, or the lockfile has changed, since the last time a task has ran. We'll also take `package.json` workspaces into account and install modules in the correct location; either the workspace root, in a project, or both.\n\n- Relationships between projects will automatically be discovered based on `dependencies`, `devDependencies`, and `peerDependencies` in `package.json`.\n\n### Utilizing the toolchain\n\nWhen a language is enabled, moon by default will assume that the language's binary is available\nwithin the current environment (typically on `PATH`). This has the downside of requiring all\ndevelopers and machines to manually install the correct version of the language, and to stay in\nsync.\n\nInstead, you can utilize [moon's toolchain](/docs/concepts/toolchain), which will download and\ninstall the language in the background, and ensure every task is executed using the exact version\nacross all machines.\n\nEnabling the toolchain is as simple as defining the [`bun.version`](/docs/config/toolchain#version)\nsetting.\n\n.moon/toolchains.yml\n\n```\n# Enable Bun toolchain with an explicit versionbun:  version: '1.0.0'\n```\n\nVersions can also be defined with [`.prototools`](/docs/proto/config).\n\n### Configuring the toolchain\n\nSince the JavaScript ecosystem supports multiple runtimes, moon is unable to automatically detect\nthe correct runtime for all scenarios. Does the existence of a `package.json` mean Node.js or Bun?\nWe don't know, and default to Node.js because of its popularity.\n\nTo work around this, you can set `toolchain` to \"bun\" at the task-level or project-level.\n\nmoon.yml\n\n```\n# For all tasks in the projecttoolchain:  default: 'bun'tasks:  build:    command: 'webpack'    # For this specific task    toolchain: 'bun'\n```\n\nThe task-level `toolchain.default` only needs to be set if executing a `node_modules` binary! The\n`bun` binary automatically sets the toolchain to Bun.\n\n### Using `package.json` scripts\n\nIf you're looking to prototype moon, or reduce the migration effort to moon tasks, you can configure\nmoon to inherit `package.json` scripts, and internally convert them to moon tasks. This can be\nachieved with the [`bun.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts)\nsetting.\n\n.moon/toolchains.yml\n\n```\nbun:  inferTasksFromScripts: true\n```\n\nOr you can run scripts through `bun run` calls.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'bun run build'\n```\n\n## Handbook\n\ninfo\n\nRefer to the [Node.js handbook](/docs/guides/javascript/node-handbook) for more information on repository structure,\ndependency management, and more. Since both runtimes are extremely similar, the information in that\nhandbook also applies to Bun!\n\n## /docs/guides/javascript/deno-handbook\n\nSource: https://moonrepo.dev/docs/guides/javascript/deno-handbook\n\n# Deno handbook\n\nUtilizing Deno in a TypeScript based monorepo can be a non-trivial task. With this handbook, we'll\nhelp guide you through this process.\n\ninfo\n\nThis guide is a living document and will continue to be updated over time!\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable TypeScript support via Deno, define the [`deno`](/docs/config/toolchain#deno) setting in\n[`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Denodeno: {}# Enable Deno and override default settingsdeno:  lockfile: true\n```\n\nOr by pinning a `deno` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\ndeno = \"1.31.0\"\n```\n\nThis will enable the Deno toolchain and provide the following automations around its ecosystem:\n\n- Automatic handling and caching of lockfiles (when the setting is enabled).\n\n- Relationships between projects will automatically be discovered based on `imports`, `importMap`, and `deps.ts` (currently experimental).\n\n- And more to come!\n\n### Work in progress\n\ncaution\n\nDeno support is currently experimental while we finalize the implementation.\n\nThe following features are not supported:\n\n- `deno.jsonc` files (use `deno.json` instead).\n\n- `files.exclude` are currently considered an input. These will be filtered in a future release.\n\n## Coming soon!\n\nThe handbook is currently being written while we finalize our Deno integration support!\n\n## /docs/guides/javascript/node-handbook\n\nSource: https://moonrepo.dev/docs/guides/javascript/node-handbook\n\n# Node.js handbook\n\nUtilizing JavaScript (and TypeScript) in a monorepo can be a daunting task, especially when using\nNode.js, as there are many ways to structure your code and to configure your tools. With this\nhandbook, we'll help guide you through this process.\n\ninfo\n\nThis guide is a living document and will continue to be updated over time!\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable JavaScript support via Node.js, define the [`node`](/docs/config/toolchain#node) setting\nin [`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Node.jsnode: {}# Enable Node.js and override default settingsnode:  packageManager: 'pnpm'\n```\n\ninfo\n\nIn moon v1.40+, use `javascript` and `node` instead of `node` to enable the new WASM powered Node.js\ntoolchain, which is far more accurate and efficient. The non-WASM toolchain will be deprecated in\nthe future.\n\nOr by pinning a `node` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\nnode = \"18.0.0\"pnpm = \"7.29.0\"\n```\n\nThis will enable the Node.js toolchain and provide the following automations around its ecosystem:\n\n- Node modules will automatically be installed if dependencies in `package.json` have changed, or the lockfile has changed, since the last time a task has ran. We'll also take `package.json` workspaces into account and install modules in the correct location; either the workspace root, in a project, or both.\n\n- Relationships between projects will automatically be discovered based on `dependencies`, `devDependencies`, and `peerDependencies` in `package.json`. The versions of these packages will also be automatically synced when changed.\n\n- Tasks can be [automatically inferred](/docs/config/toolchain#infertasksfromscripts) from `package.json` scripts.\n\n- And much more!\n\n### Utilizing the toolchain\n\nWhen a language is enabled, moon by default will assume that the language's binary is available\nwithin the current environment (typically on `PATH`). This has the downside of requiring all\ndevelopers and machines to manually install the correct version of the language, and to stay in\nsync.\n\nInstead, you can utilize [moon's toolchain](/docs/concepts/toolchain), which will download and\ninstall the language in the background, and ensure every task is executed using the exact version\nacross all machines.\n\nEnabling the toolchain is as simple as defining the [`node.version`](/docs/config/toolchain#version)\nsetting.\n\n.moon/toolchains.yml\n\n```\n# Enable Node.js toolchain with an explicit versionnode:  version: '18.0.0'\n```\n\nVersions can also be defined with [`.prototools`](/docs/proto/config).\n\n### Using `package.json` scripts\n\nIf you're looking to prototype moon, or reduce the migration effort to moon tasks, you can configure\nmoon to inherit `package.json` scripts, and internally convert them to moon tasks. This can be\nachieved with the [`node.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts)\nsetting.\n\n.moon/toolchains.yml\n\n```\nnode:  inferTasksFromScripts: true\n```\n\nOr you can run scripts through `npm run` (or `pnpm`, `yarn`) calls.\n\nmoon.yml\n\n```\ntasks:  build:    command: 'npm run build'\n```\n\n## Repository structure\n\nJavaScript monorepo's work best when projects are split into applications and packages, with each\nproject containing its own `package.json` and dependencies. A root `package.json` must also exist\nthat pieces all projects together through workspaces.\n\nFor small repositories, the following structure typically works well:\n\n```\n/ .moon/ package.json apps/    client/|   |    ...   |    package.json    server/|        ...        package.json packages/     components/    |    ...        package.json     theme/    |    ...        package.json     utils/         ...         package.json\n```\n\nFor large repositories, grouping projects by team or department helps with ownership and\norganization. With this structure, applications and libraries can be nested at any depth.\n\n```\n/ .moon/ package.json infra/    ... internal/    ... payments/    ... shared/     ...\n```\n\n### Applications\n\nApplications are runnable or executable, like an HTTP server, and are pieced together with packages\nand its own encapsulated code. They represent the whole, while packages are the pieces. Applications\ncan import and depend on packages, but they must not import and depend on other applications.\n\nIn moon, you can denote a project as an application using the [`layer`](/docs/config/project#layer)\nsetting in [`moon.yml`](/docs/config/project).\n\nmoon.yml\n\n```\nlayer: 'application'\n```\n\n### Packages\n\nPackages (also known as a libraries) are self-contained reusable pieces of code, and are the\nsuggested pattern for [code sharing](#code-sharing). Packages can import and depend on other\npackages, but they must not import and depend on applications!\n\nIn moon, you can denote a project as a library using the [`layer`](/docs/config/project#layer)\nsetting in [`moon.yml`](/docs/config/project).\n\nmoon.yml\n\n```\nlayer: 'library'\n```\n\n### Configuration\n\nEvery tool that you'll utilize in a repository will have its own configuration file. This will be a\nlot of config files, but regardless of what tool it is, where the config file should go will fall\ninto 1 of these categories:\n\n- Settings are inherited by all projects. These are known as universal tools, and enforce code consistency and quality across the entire repository. Their config file must exist in the repository root, but may support overrides in each project. Examples: Babel, [ESLint](/docs/guides/examples/eslint), [Prettier](/docs/guides/examples/prettier), [TypeScript](/docs/guides/examples/typescript)\n\n- Settings are unique per project. These are developers tools that must be configured separately for each project, as they'll have different concerns. Their config file must exist in each project, but a shared configuration may exist as a base (for example, Jest presets). Examples: [Jest](/docs/guides/examples/jest), [TypeScript](/docs/guides/examples/typescript) (with project references)\n\n- Settings are one-offs. These are typically for applications or tools that require their own config, but aren't prevalent throughout the entire repository. Examples: [Astro](/docs/guides/examples/astro), [Next](/docs/guides/examples/next), [Nuxt](/docs/guides/examples/nuxt), [Remix](/docs/guides/examples/remix), Tailwind\n\n## Dependency management\n\nDependencies, also known as node modules, are required by all projects, and are installed through a\npackage manager like npm, pnpm, or yarn. It doesn't matter which package manager you choose, but we\nhighly suggest choosing one that has proper workspaces support. If you're unfamiliar with\nworkspaces, they will:\n\n- Resolve all `package.json`'s in a repository using glob patterns.\n\n- Install dependencies from all `package.json`'s at once, in the required locations.\n\n- Create symlinks of local packages in `node_modules` (to emulate an installed package).\n\n- Deduplicate and hoist `node_modules` when applicable.\n\nAll of this functionality enables robust monorepo support, and can be enabled with the following:\n\n- npm\n- pnpm\n- Yarn\n- Yarn (classic)\n\npackage.json\n\n```\n{  // ...  \"workspaces\": [\"apps/*\", \"packages/*\"]}\n```\n\n.yarnrc.yml\n\n```\n# ...nodeLinker: 'node-modules'\n```\n\n- [Documentation](https://yarnpkg.com/features/workspaces)\n\npackage.json\n\n```\n{  // ...  \"workspaces\": [\"apps/*\", \"packages/*\"]}\n```\n\n- [Documentation](https://classic.yarnpkg.com/en/docs/workspaces)\n\npackage.json\n\n```\n{  // ...  \"workspaces\": [\"apps/*\", \"packages/*\"]}\n```\n\n- [Documentation](https://docs.npmjs.com/cli/v8/using-npm/workspaces)\n\npnpm-workspace.yaml\n\n```\npackages:  - 'apps/*'  - 'packages/*'\n```\n\n- [Documentation](https://pnpm.io/workspaces)\n\ncaution\n\nPackage workspaces are not a requirement for monorepos, but they do solve an array of problems\naround module resolution, avoiding duplicate packages in bundles, and general interoperability.\nProceed with caution for non-workspaces setups!\n\n### Workspace commands\n\nThe following common commands can be used for adding, removing, or managing dependencies in a\nworkspace. View the package manager's official documentation for a thorough list of commands.\n\n- npm\n- pnpm\n- Yarn\n- Yarn (classic)\n\nInstall dependencies:\n\n```\nnpm install\n```\n\nAdd a package:\n\n```\n# At the rootnpm install # In a projectnpm install  --workspace\n\n```\n\nRemove a package:\n\n```\n# At the rootnpm install # In a projectnpm install  --workspace\n\n```\n\nUpdate packages:\n\n```\nnpx npm-check-updates --interactive\n```\n\nInstall dependencies:\n\n```\npnpm install\n```\n\nAdd a package:\n\n```\n# At the rootpnpm add # In a projectpnpm add  --filter\n\n```\n\nRemove a package:\n\n```\n# At the rootpnpm remove # In a projectpnpm remove  --filter\n\n```\n\nUpdate packages:\n\n```\npnpm update -i -r --latest\n```\n\nInstall dependencies:\n\n```\nyarn install\n```\n\nAdd a package:\n\n```\n# At the rootyarn add # In a projectyarn workspace\n add\n```\n\nRemove a package:\n\n```\n# At the rootyarn remove # In a projectyarn workspace\n remove\n```\n\nUpdate packages:\n\n```\nyarn upgrade-interactive\n```\n\nInstall dependencies:\n\n```\nyarn install\n```\n\nAdd a package:\n\n```\n# At the rootyarn add  -w# In a projectyarn workspace\n add\n```\n\nRemove a package:\n\n```\n# At the rootyarn remove  -w# In a projectyarn workspace\n remove\n```\n\nUpdate packages:\n\n```\nyarn upgrade-interactive --latest\n```\n\n### Developer tools at the root\n\nWhile not a strict guideline to follow, we've found that installing universal developer tool related\ndependencies (Babel, ESLint, Jest, TypeScript, etc) in the root `package.json` as `devDependencies`\nto be a good pattern for consistency, quality, and the health of the repository. It provides the\nfollowing benefits:\n\n- It ensures all projects are utilizing the same version (and sometimes configuration) of a tool.\n\n- It allows the tool to easily be upgraded. Upgrade once, applied everywhere.\n\n- It avoids conflicting or outdated versions of the same package.\n\nWith that being said, this does not include development dependencies that are unique to a project!\n\n### Product libraries in a project\n\nProduct, application, and or framework specific packages should be installed as production\n`dependencies` in a project's `package.json`. We've found this pattern to work well for the\nfollowing reasons:\n\n- Application dependencies are pinned per project, avoiding accidental regressions.\n\n- Applications can upgrade their dependencies and avoid breaking neighbor applications.\n\n## Code sharing\n\nOne of the primary reasons to use a monorepo is to easily share code between projects. When code is\nco-located within the same repository, it avoids the overhead of the \"build -> version -> publish to\nregistry -> upgrade in consumer\" workflow (when the code is located in an external repository).\n\nCo-locating code also provides the benefit of fast iteration, fast adoption, and easier migration\n(when making breaking changes for example).\n\nWith [package workspaces](#dependency-management), code sharing is a breeze. As mentioned above,\nevery project that contains a `package.json` that is part of the workspace, will be symlinked into\n`node_modules`. Because of this, these packages can easily be imported using their `package.json`\nname.\n\n```\n// Imports from /packages/utils/package.jsonimport utils from '@company/utils';\n```\n\n### Depending on packages\n\nBecause packages are symlinked into `node_modules`, we can depend on them as if they were normal npm\npackages, but with 1 key difference. Since these packages aren't published, they do not have a\nversion to reference, and instead, we can use the special `workspace:^` version (yarn and pnpm only,\nuse `*` for npm).\n\n```\n{  \"name\": \"@company/consumer\",  \"dependencies\": {    \"@company/provider\": \"workspace:^\"  }}\n```\n\nThe `workspace:` version basically means \"use the package found in the current workspace\". The `:^`\ndetermines the version range to substitute with when publishing. For example, the `workspace:^`\nabove would be replaced with version of `@company/provider` as `^` when the\n`@company/consumer` package is published.\n\nThere's also `workspace:~` and `workspace:*` which substitutes to `~` and ``\nrespectively. We suggest using `:^` so that version ranges can be deduped.\n\n### Types of packages\n\nWhen sharing packages in a monorepo, there's typically 3 different kinds of packages:\n\n#### Local only\n\nA local only package is just that, it's only available locally to the repository and is not\npublished to a registry, and is not available to external repositories. For teams and companies\nthat utilize a single repository, this will be the most common type of package.\n\nA benefit of local packages is that they do not require a build step, as source files can be\nimported directly ([when configured correctly](#bundler-integration)). This avoids a lot of\n`package.json` overhead, especially in regards to `exports`, `imports`, and other import patterns.\n\n#### Internally published\n\nAn internal package is published to a private registry, and is not available to the public.\nPublished packages are far more strict than local packages, as the `package.json` structure plays a\nmuch larger role for downstream consumers, as it dictates how files are imported, where they can be\nfound, what type of formats are supported (CJS, ESM), so on and so forth.\n\nPublished packages require a build step, for both source code and TypeScript types (when\napplicable). We suggest using [esbuild](https://esbuild.github.io/) or\n[Packemon](/docs/guides/examples/packemon) to handle this entire flow. With that being said, local projects\ncan still [import their source files](#bundler-integration).\n\n#### Externally published\n\nAn external package is structured similarly to an internal package, but instead of publishing to a\nprivate registry, it's published to the npm public registry.\n\nExternal packages are primarily for open source projects, and require the repository to also be\npublic.\n\n### Bundler integration\n\nCo-locating packages is great, but how do you import and use them effectively? The easiest solution\nis to configure resolver aliases within your bundler (Webpack, Vite, etc). By doing so, you enable\nthe following functionality:\n\n- Avoids having to build (and rebuild) the package everytime its code changes.\n\n- Enables file system watching of the package, not just the application.\n\n- Allows for hot module reloading (HMR) to work.\n\n- Package code is transpiled and bundled alongside application code.\n\n- Vite\n- Webpack\n\nvite.config.ts\n\n```\nimport path from 'path';import { defineConfig } from 'vite';export default defineConfig({  // ...  resolve: {    alias: {      '@company/utils': path.join(__dirname, '../packages/utils/src'),    },  },});\n```\n\nwebpack.config.js\n\n```\nconst path = require('path');module.exports = {  // ...  resolve: {    alias: {      '@company/utils': path.join(__dirname, '../packages/utils/src'),    },  },};\n```\n\ninfo\n\nWhen configuring aliases, we suggest using the `package.json` name as the alias! This ensures that\non the consuming side, you're using the package as if it's a normal node module, and avoids\ndeviating from the ecosystem.\n\n### TypeScript integration\n\nWe suggest using TypeScript project references. Luckily, we have an\n[in-depth guide on how to properly and efficiently integrate them](/docs/guides/javascript/typescript-project-refs)!\n\n## /docs/guides/javascript/typescript-eslint\n\nSource: https://moonrepo.dev/docs/guides/javascript/typescript-eslint\n\n# typescript-eslint\n\n## ESLint integration\n\n### Disabling problematic rules\n\nA handful of ESLint rules are not compatible with the TypeScript plugin, or they cause serious\nperformance degradation, and should be disabled entirely. According to the\n[official typescript-eslint.io documentation](https://typescript-eslint.io/docs/linting/troubleshooting#eslint-plugin-import),\nmost of these rules come from the `eslint-plugin-import` plugin.\n\n.eslintrc.js\n\n```\nmodule.exports = {  // ...  rules: {    'import/default': 'off',    'import/named': 'off',    'import/namespace': 'off',    'import/no-cycle': 'off',    'import/no-deprecated': 'off',    'import/no-named-as-default': 'off',    'import/no-named-as-default-member': 'off',    'import/no-unused-modules': 'off',  },};\n```\n\n### Running from the command line\n\n### Running within editors\n\n#### ESLint\n\nUse the\n[dbaeumer.vscode-eslint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)\nextension. Too avoid poor performance, do not use ESLint for formatting code (via the\n`eslint-plugin-prettier` plugin or something similar), and only use it for linting. The difference\nin speed is comparable to 100ms vs 2000ms.\n\n.vscode/settings.json\n\n```\n{  // Automatically run all linting fixes on save as a concurrent code action,  // and avoid formatting with ESLint. Use another formatter, like Prettier.  \"editor.codeActionsOnSave\": [\"source.fixAll.eslint\"],  \"eslint.format.enable\": false,  // If linting is *too slow* while typing, uncomment the following line to  // only run the linter on save only.  // \"editor.run\": \"onSave\",  // Your package manager of choice.  \"eslint.packageManager\": \"yarn\",  // Use the newer and more performant `ESLint` class implementation.  \"eslint.useESLintClass\": true,  // List of directories that that linter should operate on.  \"eslint.workingDirectories\": [{ \"pattern\": \"apps/*\" }, { \"pattern\": \"packages/*\" }]}\n```\n\n#### Prettier\n\nUse the\n[esbenp.prettier-vscode](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)\nextension.\n\n.vscode/settings.json\n\n```\n{  // Use Prettier as the default formatter for all file types. Types not  // supported by Prettier can be overridden using bracket syntax, or ignore files.  \"editor.defaultFormatter\": \"esbenp.prettier-vscode\",  \"editor.formatOnSave\": true}\n```\n\n## /docs/guides/javascript/typescript-project-refs\n\nSource: https://moonrepo.dev/docs/guides/javascript/typescript-project-refs\n\n# TypeScript project references\n\nThe ultimate in-depth guide for using TypeScript in a monorepo effectively!\n\nHow to use TypeScript in a monorepo? What are project references? Why use project references? What\nis the best way to use project references? These are just a handful of questions that are\nconstantly asked on Twitter, forums, Stack Overflow, and even your workplace.\n\nBased on years of experience managing large-scale frontend repositories, we firmly believe that\nTypeScript project references are the proper solution for effectively scaling TypeScript in a\nmonorepo. The official\n[TypeScript documentation on project references](https://www.typescriptlang.org/docs/handbook/project-references.html)\nanswers many of these questions, but it basically boils down to the following:\n\n- Project references enforce project boundaries, disallowing imports to arbitrary projects unless they have been referenced explicitly in configuration. This avoids circular references / cycles.\n\n- It enables TypeScript to process individual units, instead of the entire repository as a whole. Perfect for reducing CI and local development times.\n\n- It supports incremental compilation, so only out-of-date or affected projects are processed. The more TypeScript's cache is warmed, the faster it will be.\n\n- It simulates how types work in the Node.js package ecosystem.\n\nThis all sounds amazing but there's got to be some downsides right? Unfortunately, there is:\n\n- Project references require generating declarations to resolve type information correctly. This results in a lot of compilation artifacts littered throughout the repository. There [are ways](#gitignore) [around this](/docs/config/toolchain#routeoutdirtocache).\n\n- This approach is a bit involved and may require some cognitive overhead based on your current level of TypeScript tooling knowledge.\n\nsuccess\n\nIf you'd like a real-world repository to reference, our\n[moonrepo/moon](https://github.com/moonrepo/moon), [moonrepo/dev](https://github.com/moonrepo/dev),\nand [moonrepo/examples](https://github.com/moonrepo/examples) repositories utilizes this\narchitecture!\n\n## Preface\n\nBefore you dive into this questionably long guide, we'd like to preface with:\n\n- This guide is a living document and will continually be updated with best practices and frequently asked questions. Keep returning to learn more!\n\n- This guide assumes a basic level knowledge of TypeScript and how it works.\n\n- The architecture outlined in this guide assumes that TypeScript is only used for typechecking and not compiling. However, supporting compilation should be as easy as modifying a handful of compiler options.\n\n- Although this guide exists within moon's documentation, it does not require moon. We've kept all implementation details generic enough for it be used in any repository, but have also included many notes on how moon would improve this experience.\n\n## Configuration\n\nThe most complicated part of integrating TypeScript in a monorepo is a proper configuration setup.\nBased on our extensive experience, we suggest the following architecture as a base! This is not\nperfect and can most definitely be expanded upon or modified to fit your needs.\n\n### Root-level\n\nIn a polyrepo, the root `tsconfig.json` is typically the only configuration file, as it defines\ncommon compiler options, and includes files to typecheck. In a monorepo, these responsibilities are\nnow split across multiple configuration files.\n\n#### `tsconfig.json`\n\nTo start, the root `tsconfig.json` file is nothing more than a list of all projects in the\nmonorepo, with each project being an individual entry in the `references` field. Each entry must\ncontain a `path` field with a relative file system path to the project root (that contains their\nconfig).\n\nWe also do not define compiler options in this file, as project-level configuration files would\nnot be able to extend this file, as it would trigger a circular reference. Instead, we define\ncommon compiler options in a root [`tsconfig.options.json`](#tsconfigoptionsjson) file, that this\nfile also `extends` from.\n\nIn the end, this file should only contain 3 fields: `extends`, `files` (an empty list), and\n`references`. This abides the\n[official guidance around structure](https://www.typescriptlang.org/docs/handbook/project-references.html#overall-structure).\n\n```\n{  \"extends\": \"./tsconfig.options.json\",  \"files\": [],  \"references\": [    {      \"path\": \"apps/foo\"    },    {      \"path\": \"packages/bar\"    }    // ... more  ]}\n```\n\nWhen using moon, the\n[`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting will\nkeep this `references` list automatically in sync, and the name of the file can be customized with\n[`typescript.rootConfigFileName`](/docs/config/toolchain#rootconfigfilename).\n\n#### `tsconfig.options.json`\n\nThis file will contain common compiler options that will be inherited by all projects in the\nmonorepo. For project references to work correctly, the following settings must be enabled at the\nroot, and typically should not be disabled in each project.\n\n- `composite` - Enables project references and informs the TypeScript program where to find referenced outputs.\n\n- `declaration` - Project references rely on the compiled declarations (`.d.ts`) of external projects. If declarations do not exist, TypeScript will generate them on demand.\n\n- `declarationMap` - Generate sourcemaps for declarations, so that language server integrations in editors like \"Go to\" resolve correctly.\n\n- `incremental` - Enables incremental compilation, greatly improving performance.\n\n- `noEmitOnError` - If the typechecker fails, avoid generating invalid or partial declarations.\n\n- `skipLibCheck` - Avoids eager loading and analyzing all declarations, greatly improving performance.\n\nFurthermore, we have 2 settings that should be enabled per project, depending on the project type.\n\n- `emitDeclarationOnly` - For packages: Emit declarations, as they're required for references, but avoid compiling to JavaScript.\n\n- `noEmit` - For applications: Don't emit declarations, as others should not be depending on the project.\n\nFor convenience, we provide the\n[`tsconfig-moon`](https://github.com/moonrepo/dev/tree/master/packages/tsconfig) package, which\ndefines common compiler options and may be used here.\n\n```\n{  \"compilerOptions\": {    \"composite\": true,    \"declaration\": true,    \"declarationMap\": true,    \"emitDeclarationOnly\": true,    \"incremental\": true,    \"noEmitOnError\": true,    \"skipLibCheck\": true    // ... others  }}\n```\n\nWhen using moon, the name of the file can be customized with\n[`typescript.rootOptionsConfigFileName`](/docs/config/toolchain#rootoptionsconfigfilename).\n\n##### ECMAScript interoperability\n\nECMAScript modules (ESM) have been around for quite a while now, but the default TypeScript settings\nare not configured for them. We suggest the following compiler options if you want proper ESM\nsupport with interoperability with the ecosystem.\n\n```\n{  \"compilerOptions\": {    \"allowSyntheticDefaultImports\": true,    \"esModuleInterop\": true,    \"isolatedModules\": true,    \"module\": \"esnext\",    \"moduleResolution\": \"bundler\",    \"strict\": true,    \"target\": \"esnext\"    // ... others  }}\n```\n\n#### `.gitignore`\n\nProject references unfortunately generate a ton of artifacts that typically shouldn't be committed\nto the repository (but could be if you so choose). We suggest ignoring the following:\n\n.gitignore\n\n```\n# The `outDir` for declarationslib/# Build cache manifests*.tsbuildinfo\n```\n\n### Project-level\n\nEach project that contains TypeScript files and will utilize the typechecker must contain a\n`tsconfig.json` in the project root, typically as a sibling to `package.json`.\n\n#### `tsconfig.json`\n\nA `tsconfig.json` in the root of a project (application or package) is required, as it informs\nTypeScript that this is a project, and that it can be referenced by other projects. In its simplest\nform, this file should extend the root [`tsconfig.options.json`](#tsconfigoptionsjson) to inherit\ncommon compiler options, define its own compiler options (below), define includes/excludes, and any\nnecessary references.\n\nWhen using moon, the name of the file can be customized with\n[`typescript.projectConfigFileName`](/docs/config/toolchain#projectconfigfilename).\n\n- Applications\n- Packages\n\nFor applications, declaration emitting can be disabled, since external projects should not be\nimporting files from an application. If this use case ever arises, move those files into a package.\n\napps/foo/tsconfig.json\n\n```\n{  \"extends\": \"../../../../tsconfig.options.json\",  \"compilerOptions\": {    \"noEmit\": true  },  \"include\": [],  \"references\": []}\n```\n\nFor packages, we must define the location in which to generate declarations. These are the\ndeclarations that external projects would reference. This location is typically\n[gitignored](#gitignore)!\n\npackages/bar/tsconfig.json\n\n```\n{  \"extends\": \"../../../../tsconfig.options.json\",  \"compilerOptions\": {    \"emitDeclarationOnly\": true,    \"outDir\": \"./lib\"  },  \"include\": [],  \"references\": []}\n```\n\nWhen using moon, the `outDir` can automatically be re-routed to a shared cache using\n[`typescript.routeOutDirToCache`](/docs/config/toolchain#routeoutdirtocache), to avoid littering\nthe repository with compilation artifacts.\n\n##### Includes and excludes\n\nBased on experience, we suggest defining `include` instead of `exclude`, as managing a whitelist of\ntypecheckable files is much easier. When dealing with excludes, there are far too many\npossibilities. To start, you have `node_modules`, and for applications maybe `dist`, `build`,\n`.next`, or another application specific folder, and then for packages you may have `lib`, `cjs`,\n`esm`, etc. It becomes very... tedious.\n\nThe other benefit of using `include` is that it forces TypeScript to only load what's necessary,\ninstead of eager loading everything into memory, and for typechecking files that aren't part of\nsource, like configuration.\n\n/tsconfig.json\n\n```\n{  // ...  \"include\": [\"src/**/*\", \"tests/**/*\", \"*.js\", \"*.ts\"]}\n```\n\n##### Depending on other projects\n\nWhen a project depends on another project (by importing code from it), either using relative paths,\n[path aliases](#using-paths-aliases), or its `package.json` name, it must be declared as a\nreference. If not declared, TypeScript will error with a message about importing outside the project\nboundary.\n\n/tsconfig.json\n\n```\n{  // ...  \"references\": [    {      \"path\": \"../../foo\"    },    {      \"path\": \"../../bar\"    },    {      \"path\": \"../../../../baz\"    }  ]}\n```\n\nTo make use of editor intellisense and auto-imports of deeply nested files, you'll most likely need\nto add includes for referenced projects as well.\n\n/tsconfig.json\n\n```\n{  // ...  \"include\": [    // ...    \"src/**/*\",    \"../../foo/src/**/*\",    \"../../bar/src/**/*\",    \"../../../../baz/src/**/*\"  ]}\n```\n\nWhen using moon, the\n[`typescript.syncProjectReferences`](/docs/config/toolchain#syncprojectreferences) setting will\nkeep this `references` list automatically in sync, and\n[`typescript.includeProjectReferenceSources`](/docs/config/toolchain#syncprojectreferences) for\n`include`.\n\n#### `tsconfig.*.json`\n\nAdditional configurations may exist in a project that serve a role outside of typechecking, with one\nsuch role being npm package publishing. These configs are sometimes named `tsconfig.build.json`,\n`tsconfig.types.json`, or `tsconfig.lib.json`. Regardless of what they're called, these configs are\noptional, so unless you have a business need for them, you may skip this section.\n\n##### Package publishing\n\nAs mentioned previously, these configs may be used for npm packages, primarily for generating\nTypeScript declarations that are mapped through the `package.json`\n[`types` (or `typings`) field](https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html).\n\nGiven this `package.json`...\n\n/package.json\n\n```\n{  // ...  \"types\": \"./lib/index.d.ts\"}\n```\n\nOur `tsconfig.build.json` may look like...\n\n/tsconfig.build.json\n\n```\n{  \"extends\": \"../../../../tsconfig.options.json\",  \"compilerOptions\": {    \"outDir\": \"lib\",    \"rootDir\": \"src\"  },  \"include\": [\"src/**/*\"]}\n```\n\nSimple right? But why do we need an additional configuration? Why not use the other `tsconfig.json`?\nGreat questions! The major reason is that we only want to publish declarations for source files,\nand the declarations file structure should match 1:1 with the sources structure. The `tsconfig.json`\ndoes not guarantee this, as it may include test, config, or arbitrary files, all of which may not\nexist in the sources directory (`src`), and will alter the output to an incorrect directory\nstructure. Our `tsconfig.build.json` solves this problem by only including source files, and by\nforcing the source root to `src` using the `rootDir` compiler option.\n\nHowever, there is a giant caveat with this approach! Because TypeScript utilizes Node.js's module\nresolution, it will reference the declarations defined by the `package.json` `types` or\n[`exports`](#supporting-packagejson-exports) fields, instead of the `outDir` compiler option, and\nthe other `tsconfig.json` does not guarantee these files will exist. This results in TypeScript\nfailing to find the appropriate types! To solve this, add the `tsconfig.build.json` as a project\nreference to `tsconfig.json`.\n\n/tsconfig.json\n\n```\n{  // ...  \"references\": [    {      \"path\": \"./tsconfig.build.json\"    }    // ... others  ]}\n```\n\n##### Vendor specific\n\nSome vendors, like [Vite](/docs/guides/examples/vite), [Vitest](/docs/guides/examples/vite), and\n[Astro](/docs/guides/examples/astro) may include additional `tsconfig.*.json` files unique to their ecosystem.\nWe suggest following their guidelines and implementation when applicable.\n\n## Running the typechecker\n\nNow that our configuration is place, we can run the typechecker, or attempt to at least! This can be\ndone with the `tsc --build` command, which acts as a\n[build orchestrator](https://www.typescriptlang.org/docs/handbook/project-references.html#build-mode-for-typescript).\nWe also suggest passing `--verbose` for insights into what projects are compiling, and which are\nout-of-date.\n\n### On all projects\n\nFrom the root of the repository, run `tsc --build --verbose` to typecheck all projects, as defined\nin [tsconfig.json](#tsconfigjson). TypeScript will generate a directed acyclic graph (DAG) and\ncompile projects in order so that dependencies and references are resolved correctly.\n\ninfo\n\nWhy run TypeScript in the root? Typically you would only want to run against projects, but for\nsituations where you need to verify that all projects still work, running in the root is the best\napproach. Some such situations are upgrading TypeScript itself, upgrading global `@types` packages,\nupdating shared types, reworking build processes, and more.\n\n### On an individual project\n\nTo only typecheck a single project (and its dependencies), there are 2 approaches. The first is to\nrun from the root, and pass a relative path to the project, such as\n`tsc --build --verbose packages/foo`. The second is to change the working directory to the project,\nand run from there, such as `cd packages/foo && tsc --build --verbose`.\n\nBoth approaches are viable, and either may be used based on your tooling, build system, task runner,\nso on and so forth. This is the approach moon suggests with its\n[`typecheck` task](/docs/guides/examples/typescript).\n\n### On affected projects\n\nIn CI environments, it's nice to only run the typechecker on affected projects  projects that\nhave changed files. While this isn't entirely possible with `tsc`, it is possible with moon! Head\nover to the\n[official docs for more information](/docs/run-task#running-based-on-affected-files-only).\n\n## Using `paths` aliases\n\nPath aliases, also known as path mapping or magic imports, is the concept of defining an import\nalias that re-maps its underlying location on the file system. In TypeScript, this is achieved with\nthe\n[`paths` compiler option](https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping).\n\nIn a monorepo world, we suggest using path aliases on a per-project basis, instead of defining them\n\"globally\" in the root. This gives projects full control of what's available and what they want to\nimport, and also plays nice with the mandatory `baseUrl` compiler option.\n\n/tsconfig.json\n\n```\n{  // ...  \"compilerOptions\": {    // ...    \"baseUrl\": \".\",    \"paths\": {      // Within the project      \":components/*\": [\"./src/components/*\"],      // To a referenced project      \":shared/*\": [\"../../shared/code/*\"]    }  },  \"references\": [    {      \"path\": \"../../shared/code\"    }  ]}\n```\n\nThe above aliases would be imported like the following:\n\n```\n// Beforeimport { Button } from '../../../../components/Button';import utils from '../../shared/code/utils';// Afterimport { Button } from ':components/Button';import utils from ':shared/utils';\n```\n\ninfo\n\nWhen using path aliases, we suggest prefixing or suffixing the alias with `:` so that it's apparent\nthat it's an alias (this also matches the new `node:` import syntax). Using no special character or\n`@` is problematic as it risks a chance of collision with a public npm package and may accidentally\nopen your repository to a\n[supply chain attack](https://snyk.io/blog/npm-security-preventing-supply-chain-attacks/). Other\ncharacters like `~` and `$` have an existing meaning in the ecosystem, so it's best to avoid them\naswell.\n\n### Importing source files from local packages\n\nIf you are importing from a project reference using a `package.json` name, then TypeScript will\nabide by Node.js module resolution logic, and will import using the\n[`main`/`types` or `exports` entry points](https://nodejs.org/api/packages.html#package-entry-points).\nThis means that you're importing compiled code instead of source code, and will require the\npackage to be constantly rebuilt if changes are made to it.\n\nHowever, why not simply import source files instead? With path aliases, you can do just that, by\ndefining a `paths` alias that maps the `package.json` name to its source files, like so.\n\n/tsconfig.json\n\n```\n{  // ...  \"compilerOptions\": {    // ...    \"paths\": {      // Index import      \"@scope/name\": [\"../../shared/package/src/index.ts\"],      // Deep imports      \"@scope/name/*\": [\"../../shared/package/src/*\"]    }  },  \"references\": [    {      \"path\": \"../../shared/package\"    }  ]}\n```\n\nWhen using moon, the\n[`typescript.syncProjectReferencesToPaths`](/docs/config/toolchain#syncprojectreferencestopaths)\nsetting will automatically create `paths` based on the local references.\n\n## Sharing and augmenting types\n\nDeclaring global types, augmenting node modules, and sharing reusable types is a common practice.\nThere are many ways to achieve this, so choose what works best for your repository. We use the\nfollowing pattern with great success.\n\nAt the root of the repository, create a `types` folder as a sibling to `tsconfig.json`. This folder\nmust only contain declarations (`.d.ts`) files for the following reasons:\n\n- Declarations can be `include`ed in a project without having to be a project reference.\n\n- Hard-coded declarations do not need to be compiled from TypeScript files.\n\nBased on the above, update your project's `tsconfig.json` to include all of these types, or just\nsome of these types.\n\n/tsconfig.json\n\n```\n{  // ...  \"include\": [\"src/**/*\", \"../../../../types/**/*\"]}\n```\n\nIn the future, moon will provide a setting to automate this workflow!\n\n## Supporting `package.json` exports\n\nIn Node.js v12, they introduced a new field to `package.json` called `exports` that aims to solve\nthe shortcomings of the `main` field. The `exports` field is very complicated, and instead of\nrepeating all of its implementation details, we suggest reading\n[the official Node.js docs on this topic](https://nodejs.org/api/packages.html#package-entry-points).\n\nWith that being said, TypeScript completely ignored the `exports` field until\n[v4.7](https://devblogs.microsoft.com/typescript/announcing-typescript-4-7/#esm-nodejs), and\nrespecting `exports` is still ignored unless the `moduleResolution` compiler option is set to\n\"nodenext\", \"node16\", or \"bundler\". If `moduleResolution` is set to \"node\", then your integration is\nresolving based on the `main` and `types` field, which are basically \"legacy\".\n\nwarning\n\nEnabling `package.json` imports/exports resolution is very complicated, and may be very tedious,\nespecially considering the state of the npm ecosystem. Proceed with caution!\n\n### State of the npm ecosystem\n\nAs mentioned above, the npm ecosystem (as of November 2022) is in a very fragile state in regards to\nimports/exports. Based on our experience attempting to utilize them in a monorepo, we ran into an\narray of problems, some of which are:\n\n- Published packages are simply utilizing imports/exports incorrectly. The semantics around CJS/ESM are very strict, and they may be configured wrong. This is exacerbated by the new `type` field.\n\n- The `exports` field overrides the `main` and `types` fields. If `exports` exists without type conditions, but the `types` field exists, the `types` entry point is completely ignored, resulting in TypeScript failures.\n\nWith that being said, there are [ways around this](#resolving-issues) and moving forward is\npossible, if you dare!\n\n### Enabling imports/exports resolution\n\nTo start, set the `moduleResolution` compiler option to \"nodenext\" (for packages) or \"bundler\" (for\napps) in the [`tsconfig.options.json`](#tsconfigoptionsjson) file.\n\n```\n{  \"compilerOptions\": {    // ...    \"moduleResolution\": \"nodenext\"  }}\n```\n\nNext, [run the typechecker from the root](#on-all-projects) against all projects. This will help\nuncover all potential issues with the dependencies you're using or the current configuration\narchitecture. If no errors are found, well congratulations, otherwise jump to the next section for\nmore information on [resolving them](#resolving-issues).\n\nIf you're trying to use `exports` in your own packages, ensure that the `types` condition is set,\nand it's the first condition in the mapping! We also suggest including `main` and the top-level\n`types` for tooling that do not support `exports` yet.\n\npackage.json\n\n```\n{  // ...  \"main\": \"./lib/index.js\",  \"types\": \"./lib/index.d.ts\",  \"exports\": {    \"./package.json\": \"./package.json\",    \".\": {      \"types\": \"./lib/index.d.ts\",      \"node\": \"./lib/index.js\"    }  }}\n```\n\ninfo\n\nManaging `exports` is non-trivial. If you'd prefer them to be automatically generated based on a set\nof inputs, we suggest using [Packemon](https://packemon.dev/)!\n\n### Resolving issues\n\nThere's only one way to resolve issues around incorrectly published `exports`, and that is package\npatching, either with [Yarn's patching feature](https://yarnpkg.com/features/protocols/#patch),\n[pnpm's patching feature](https://pnpm.io/cli/patch), or the\n[`patch-package` package](https://www.npmjs.com/package/patch-package). With patching, you can:\n\n- Inject the `types` condition/field if it's missing.\n\n- Re-structure the `exports` mapping if it's incorrect.\n\n- Fix incorrect entry point paths.\n\n- And even fix invalid TypeScript declarations or JavaScript code!\n\npackage.json\n\n```\n{  \"main\": \"./lib/index.js\",  \"types\": \"./lib/index.d.ts\",  \"exports\": {    \"./package.json\": \"./package.json\",-    \".\": \"./lib/index.js\"+    \".\": {+      \"types\": \"./lib/index.d.ts\",+      \"node\": \"./lib/index.js\"+    }  }}\n```\n\ninfo\n\nMore often than not, the owners of these packages may be unaware that their `exports` mapping is\nincorrect. Why not be a good member of the community and report an issue or even submit a pull\nrequest?\n\n## Editor integration\n\nUnfortunately, we only have experience with VS Code. If you prefer another editor and have guidance\nyou'd like to share with the community, feel free to submit a pull request and we'll include it\nbelow!\n\n### VS Code\n\n[VS Code](https://code.visualstudio.com/) has first-class support for TypeScript and project\nreferences, and should \"just work\" without any configuration. You can verify this by restarting the\nTypeScript server in VS Code (with the cmd + shift + p command palette) and navigating to\neach project. Pay attention to the status bar at the bottom, as you'll see this:\n\nWhen this status appears, it means that VS Code is compiling a project. It will re-appear multiple\ntimes, basically for each project, instead of once for the entire repository.\n\nFurthermore, ensure that VS Code is using the version of TypeScript from the `typescript` package in\n`node_modules`. Relying on the version that ships with VS Code may result in unexpected TypeScript\nfailures.\n\n.vscode/settings.json\n\n```\n{  \"typescript.tsdk\": \"node_modules/typescript/lib\"  // Or \"Select TypeScript version\" from the command palette}\n```\n\n## FAQ\n\n### I still have questions, where can I ask them?\n\nWe'd love to answer your questions and help anyway that we can. Feel free to...\n\n- Join the [moonrepo discord](https://discord.gg/qCh9MEynv2) and post your question in the `#typescript` channel.\n\n- Ping me, [Miles Johnson](https://twitter.com/mileswjohnson), on Twitter. I'll try my best to respond to every tweet.\n\n### Do I have to use project references?\n\nShort answer, no. If you have less than say 10 projects, references may be overkill. If your\nrepository is primarily an application, but then has a handful of shared npm packages, references\nmay also be unnecessary here. In the end, it really depends on how many projects exist in the\nmonorepo, and what your team/company is comfortable with.\n\nHowever, we do suggest using project references for very large monorepos (think 100s of projects),\nor repositories with a large number of contributors, or if you merely want to reduce CI typechecking\ntimes.\n\n### What about not using project references and only using source files?\n\nA popular alternative to project references is to simply use the source files as-is, by updating the\n`main` and `types` entry fields within each `package.json` to point to the original TypeScript\nfiles. This approach is also known as \"internal packages\".\n\npackage.json\n\n```\n{  // ...  \"main\": \"./src/index.tsx\",  \"types\": \"./src/index.tsx\"}\n```\n\nWhile this works, there are some downsides to this approach.\n\n- Loading declaration files are much faster than source files.\n\n- You'll lose all the benefits of TypeScript's incremental caching and compilation. TypeScript will consistently load, parse, and evaluate these source files every time. This is especially true for CI environments.\n\n- When using `package.json` workspaces, bundlers and other tools may consider these source files \"external\" as they're found in `node_modules`. This will require custom configuration to allow it.\n\n- It breaks consistency. Consistency with the npm ecosystem, and consistency with how packaging and TypeScript was designed to work. If all packages are internal, then great, but if you have some packages that are published, you now have 2 distinct patterns for \"using packages\" instead of 1.\n\nWith that being said, theres a 3rd alternative that may be the best of both worlds, using project\nreferences and source files,\n[by using `paths` aliases](#importing-source-files-from-local-packages).\n\nAll in all, this is a viable approach if you're comfortable with the downsides listed above. Use the\npattern that works best for your repository, team, or company!\n\n### How to integrate with ESLint?\n\nWe initially included ESLint integration in this guide, but it was very complex and in-depth on its\nown, so we've opted to push it to another guide. Unfortunately, that guide is not yet available, so\nplease come back soon! We'll announce when it's ready.\n\n### How to handle circular references?\n\nProject references do not support\n[circular references](https://github.com/microsoft/TypeScript/issues/33685) (cycles), which is\ngreat, as they are a code smell! If you find yourself arbitrarily importing code from random\nsources, or between 2 projects that depend on each other, then this highlights a problem with your\narchitecture. Projects should be encapsulated and isolated from outside sources, unless explicitly\nallowed through a dependency. Dependencies are \"upstream\", so having them depend on the current\nproject (the \"downstream\"), makes little to no sense.\n\nIf you're trying to adopt project references and are unfortunately hitting the circular reference\nproblem, don't fret, untangling is possible, although non-trivial depending on the size of your\nrepository. It basically boils down to creating an additional project to move coupled code to.\n\nFor example, if project A was importing from project B, and B from A, then the solution would be to\ncreate another project, C (typically a shared npm package), and move both pieces of code into C. A\nand B would then import from C, instead of from each other. We're not aware of any tools that would\nautomate this, or detect cycles, so you'll need to do it manually.\n\n## /docs/guides/mcp\n\nSource: https://moonrepo.dev/docs/guides/mcp\n\n# MCP integration\n\nv1.37.0\n\n[Model Context Protocol](https://modelcontextprotocol.io) (MCP) is an open standard that enables AI\nmodels to interact with external tools and services through a unified interface. The moon CLI\ncontains an MCP server that you can register with your code editor to allow LLMs to use moon\ndirectly.\n\n## Setup\n\n### Claude Code\n\nTo use [MCP servers in Claude Code](https://docs.anthropic.com/en/docs/claude-code/mcp), run the\nfollowing command in your terminal:\n\n```\nclaude mcp add moon -s project -e MOON_WORKSPACE_ROOT=/absolute/path/to/your/moon/workspace -- moon mcp\n```\n\nOr create an `.mcp.json` file in your project directory.\n\n```\n{  \"mcpServers\": {    \"moon\": {      \"command\": \"moon\",      \"args\": [\"mcp\"],      \"env\": {        \"MOON_WORKSPACE_ROOT\": \"/absolute/path/to/your/moon/workspace\"      }    }  }}\n```\n\n### Cursor\n\nTo use [MCP servers in Cursor](https://docs.cursor.com/context/model-context-protocol), create a\n`.cursor/mcp.json` file in your project directory, or `~/.cursor/mcp.json` globally, with the\nfollowing content:\n\n.cursor/mcp.json\n\n```\n{  \"mcpServers\": {    \"moon\": {      \"command\": \"moon\",      \"args\": [\"mcp\"],      \"env\": {        \"MOON_WORKSPACE_ROOT\": \"/absolute/path/to/your/moon/workspace\"      }    }  }}\n```\n\nOnce configured, the moon MCP server should appear in the \"Available Tools\" section on the MCP\nsettings page in Cursor.\n\n### VS Code\n\nTo use MCP servers in VS Code, you must have the\n[Copilot Chat](https://code.visualstudio.com/docs/copilot/chat/copilot-chat) extension installed.\nOnce installed, create a `.vscode/mcp.json` file with the following content:\n\n.vscode/mcp.json\n\n```\n{  \"servers\": {    \"moon\": {      \"type\": \"stdio\",      \"command\": \"moon\",      \"args\": [\"mcp\"],      // >= 1.102 (June 2025)      \"cwd\": \"${workspaceFolder}\",      // Older versions      \"env\": {        \"MOON_WORKSPACE_ROOT\": \"${workspaceFolder}\"      }    }  }}\n```\n\nOnce your MCP server is configured, you can use it with\n[GitHub Copilots agent mode](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode):\n\n- Open the Copilot Chat view in VS Code\n\n- Enable agent mode using the mode select dropdown\n\n- Toggle on moon's MCP tools using the \"Tools\" button\n\n### Zed\n\nTo use [MCP servers in Zed](https://zed.dev/docs/ai/mcp), create a `.zed/settings.json` file in your\nproject directory, or `~/.config/zed/settings.json` globally, with the following content:\n\n.zed/settings.json\n\n```\n{  \"context_servers\": {    \"moon\": {      \"command\": {        \"path\": \"moon\",        \"args\": [\"mcp\"],        \"env\": {          \"MOON_WORKSPACE_ROOT\": \"/absolute/path/to/your/moon/workspace\"        }      }    }  }}\n```\n\nOnce your MCP server is configured, you'll need to enable the tools using the following steps:\n\n- Open the Agent panel in Zed\n\n- Click the Write/Ask toggle button and go to \"Configure Profiles\"\n\n- Click \"Customize\" in the Ask section\n\n- Click \"Configure MCP Tools\"\n\n- Enable each tool under the \"moon\" section\n\n## Available tools\n\nThe following tools are available in the moon MCP server and can be executed by LLMs using agent\nmode.\n\n- `get_project` - Get a project and its tasks by `id`.\n\n- `get_projects` - Get all projects.\n\n- `get_task` - Get a task by `target`.\n\n- `get_tasks` - Get all tasks.\n\n- `get_touched_files` - Gets touched files between base and head revisions. v1.38.0\n\n- `sync_projects` - Runs the `SyncProject` action for one or many projects by `id`. v1.38.0\n\n- `sync_workspace` - Runs the `SyncWorkspace` action. v1.38.0\n\ninfo\n\nThe\n[request and response shapes](https://github.com/moonrepo/moon/blob/master/packages/types/src/mcp.ts)\nfor these tools are defined as TypeScript types in the\n[`@moonrepo/types`](https://www.npmjs.com/package/@moonrepo/types) package.\n\n## /docs/guides/node/examples\n\nSource: https://moonrepo.dev/docs/guides/node/examples\n\n- [Home](/)\n- JavaScript\n- [Examples](/docs/guides/node/examples)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# Node.js examples\n\n[ AngularIn this guide, you'll learn how to integrate Angular into moon.](/docs/guides/examples/angular)\n\n[ AstroIn this guide, you'll learn how to integrate Astro.](/docs/guides/examples/astro)\n\n[ ESLintIn this guide, you'll learn how to integrate ESLint into moon.](/docs/guides/examples/eslint)\n\n[ JestIn this guide, you'll learn how to integrate Jest into moon.](/docs/guides/examples/jest)\n\n[ NestIn this guide, you'll learn how to integrate NestJS into moon.](/docs/guides/examples/nest)\n\n[ NextIn this guide, you'll learn how to integrate Next.js into moon.](/docs/guides/examples/next)\n\n[ NuxtIn this guide, you'll learn how to integrate Nuxt v3, a Vue framework,](/docs/guides/examples/nuxt)\n\n[ PackemonIn this guide, you'll learn how to integrate Packemon into moon. Packemon](/docs/guides/examples/packemon)\n\n[ PrettierIn this guide, you'll learn how to integrate Prettier into moon.](/docs/guides/examples/prettier)\n\n[ ReactReact is an application or library concern, and not a build system one, since the bundling of React](/docs/guides/examples/react)\n\n[ RemixIn this guide, you'll learn how to integrate Remix into moon.](/docs/guides/examples/remix)\n\n[ SolidSolid (also known as SolidJS) is a JavaScript framework for building](/docs/guides/examples/solid)\n\n[ StorybookStorybook is a frontend workshop for building UI components and pages in isolation. Thousands of](/docs/guides/examples/storybook)\n\n[ SvelteKitSvelteKit is built on Svelte, a UI framework that](/docs/guides/examples/sveltekit)\n\n[ TypeScriptIn this guide, you'll learn how to integrate TypeScript into](/docs/guides/examples/typescript)\n\n[ Vite & VitestIn this guide, you'll learn how to integrate Vite and](/docs/guides/examples/vite)\n\n[ VueVue is an application or library concern, and not a build system one, since the bundling of Vue is](/docs/guides/examples/vue)\n\n[TypeScript project references](/docs/guides/javascript/typescript-project-refs)\n\n[Angular](/docs/guides/examples/angular)\n\n## /docs/guides/notifications\n\nSource: https://moonrepo.dev/docs/guides/notifications\n\n# Terminal notifications\n\nv1.38.0\n\nmoon is able to send operating system desktop notifications for specific events in the action\npipeline, on behalf of your terminal application. This is useful for continuous feedback loops and\nreacting to long-running commands while multi-tasking.\n\nNotifications are opt-in and must be enabled with the\n[`notify.terminalNotifications`](/docs/config/workspace#terminalnotifications) setting.\n\n.moon/workspace.yml\n\n```\nnotifier:  terminalNotifications: 'always'\n```\n\n## Setup\n\nNotifications must be enabled at the operating system level.\n\n### Linux\n\nLinux support is based on the [XDG specification](https://en.wikipedia.org/wiki/XDG) and utilizes\nD-BUS APIs, primarily the\n[`org.freedesktop.Notifications.Notify`](https://www.galago-project.org/specs/notification/0.9/x408.html#command-notify)\nmethod. Refer to your desktop distribution for more information.\n\nNotifications will be sent using the `moon` application name (the current executable).\n\n### macOS\n\n- Open \"System Settings\" or \"System Preferences\"\n\n- Select \"Notifications\" in the left sidebar\n\n- Select your terminal application from the list (e.g., \"Terminal\", \"iTerm\", etc)\n\n- Ensure \"Allow notifications\" is enabled\n\n- Customize the other settings as desired\n\nNotifications will be sent from your currently running terminal application, derived from the\n`TERM_PROGRAM` environment variable. If we fail to detect the terminal, it will default to \"Finder\".\n\n### Windows\n\nRequires Windows 10 or later.\n\n- Open \"Settings\"\n\n- Go to the \"System\" panel\n\n- Select \"Notifications & Actions\" in the left sidebar\n\n- Ensure notifications are enabled\n\nNotifications will be sent from the \"Windows Terminal\" app if it's currently in use, otherwise from\n\"Microsoft PowerShell\".\n\n## /docs/guides/offline-mode\n\nSource: https://moonrepo.dev/docs/guides/offline-mode\n\n# Offline mode\n\nmoon assumes that an internet connection is always available, as we download and install tools into\nthe toolchain, resolve versions against upstream manifests, and automatically install dependencies.\nWhile this is useful, having a constant internet connection isn't always viable.\n\nTo support workflows where internet isn't available or is spotty, moon will automatically check for\nan active internet connection, and drop into offline mode if necessary.\n\n## What's disabled when offline\n\nWhen offline, moon will skip or disable the following:\n\n- Automatic dependency installation will be skipped.\n\n- Toolchain will skip resolving, downloading, and installing tools, and instead use the local cache. If no local cache available, will fallback to binaries found on `PATH`.\n\n- If not available on `PATH`, will fail to run.\n\n- Upgrade and version checks will be skipped.\n\n## Toggling modes\n\nWhile we automatically check for an internet connection, both online and offline modes can be forced\nwith the `PROTO_OFFLINE` environment variable. Setting the variable to `1` or `true` will force\noffline mode, while `0` and `false` will force online mode.\n\n## Environment variables\n\nSome additional variables to interact with offline checks.\n\n- `PROTO_OFFLINE_TIMEOUT` - Customize the timeout for offline checks (in milliseconds). Defaults to `750`.\n\n- `PROTO_OFFLINE_HOSTS` - Customize additional hosts/IPs to check for offline status. Separate multiple hosts with a `,`.\n\n- `PROTO_OFFLINE_IP_VERSION` - Customize which IP version to support, `4` or `6`. If not defined, supports both.\n\n## /docs/guides/open-source\n\nSource: https://moonrepo.dev/docs/guides/open-source\n\n# Open source usage\n\nAlthough moon was designed for large monorepos, it can also be used for open source projects,\nespecially when coupled with our [built-in continuous integration support](/docs/guides/ci).\n\nHowever, a pain point with moon is that it has an explicitly configured version for each tool in the\n[toolchain](/docs/concepts/toolchain), but open source projects typically need to run checks against\nmultiple versions! To mitigate this problem, you can set the matrix value as an environment\nvariable, in the format of `MOON__VERSION`.\n\n.github/workflows/ci.yml\n\n```\nname: 'Pipeline'on:  push:    branches:      - 'master'  pull_request:jobs:  ci:    name: 'CI'    runs-on: ${{ matrix.os }}    strategy:      matrix:        os: ['ubuntu-latest', 'windows-latest']        node-version: [16, 18, 20]    steps:      # Checkout repository      - uses: 'actions/checkout@v4'        with:          fetch-depth: 0      # Install Node.js      - uses: 'actions/setup-node@v6'      # Install dependencies      - run: 'yarn install --immutable'      # Run moon and affected tasks      - run: 'yarn moon ci'        env:          MOON_NODE_VERSION: ${{ matrix.node-version }}\n```\n\ninfo\n\nThis example is only for GitHub actions, but the same mechanism can be applied to other CI\nenvironments.\n\n## Reporting run results\n\nWe also suggest using our\n[`moonrepo/run-report-action`](https://github.com/marketplace/actions/moon-ci-run-reports) GitHub\naction. This action will report the results of a [`moon ci`](/docs/commands/ci) run to a pull request\nas a comment and workflow summary.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      # ...      - run: 'yarn moon ci'      - uses: 'moonrepo/run-report-action@v1'        if: success() || failure()        with:          access-token: ${{ secrets.GITHUB_TOKEN }}\n```\n\nThe report looks something like the following:\n\n## /docs/guides/pkl-config\n\nSource: https://moonrepo.dev/docs/guides/pkl-config\n\n# Pkl configuration\n\nv1.32.0\n\nWhile YAML is our official configuration format, we want to support dynamic formats, and as such,\nhave added support for Pkl. What is Pkl? If you haven't heard of Pkl yet,\n[Pkl is a programmable configuration format by Apple](https://pkl-lang.org/). We like Pkl, as it\nmeets the following requirements:\n\n- Is easy to read and write.\n\n- Is dynamic and programmable (loops, variables, etc).\n\n- Has type-safety / built-in schema support.\n\n- Has Rust serde integration.\n\nThe primary requirement that we are hoping to achieve is supporting a configuration format that is\nprogrammable. We want something that has native support for variables, loops, conditions, and\nmore, so that you could curate and compose your configuration very easily. Hacking this\nfunctionality into YAML is a terrible user experience in our opinion!\n\n## Installing Pkl\n\nPkl utilizes a client-server architecture, which means that the `pkl` binary must exist in the\nenvironment for parsing and evaluating `.pkl` files. Jump over to the\n[official documentation for instructions on how to install Pkl](https://pkl-lang.org/main/current/pkl-cli/index.html#installation).\n\nIf you are using [proto](/proto), you can install Pkl with the following commands.\n\n```\nproto plugin add pkl https://raw.githubusercontent.com/milesj/proto-plugins/refs/heads/master/pkl.tomlproto install pkl --pin\n```\n\n## Using Pkl\n\nTo start using Pkl in moon, simply:\n\n- Install [Pkl](#installing-pkl) and the [VS Code extension](https://pkl-lang.org/vscode/current/index.html)\n\n- Create configs with the `.pkl` extension instead of `.yml`\n\ninfo\n\nWe highly suggest reading the Pkl\n[language reference](https://pkl-lang.org/main/current/language-reference/index.html), the\n[standard library](https://pkl-lang.org/main/current/standard-library.html), or looking at our\n[example configurations](#example-configs) when using Pkl.\n\n### Caveats and restrictions\n\nSince this is an entirely new configuration format that is quite dynamic compared to YAML, there are\nsome key differences to be aware of!\n\n- Only files are supported. Cannot use or extend from URLs.\n\n- Each `.pkl` file is evaluated in isolation (loops are processed, variables assigned, etc). This means that task inheritance and file merging cannot extend or infer this native functionality.\n\n- `default` is a [special feature](https://pkl-lang.org/main/current/language-reference/index.html#default-element) in Pkl and cannot be used as a setting name. This only applies to [`template.pkl`](/docs/config/template#default), but can be worked around by using `defaultValue` instead.\n\ntemplate.pkl\n\n```\nvariables {  [\"age\"] {    type = \"number\"    prompt = \"Age?\"    defaultValue = 0}\n```\n\n- `local` is also a reserved word in Pkl. It can be worked around by escaping it with backticks, or you can simply use the [`preset` setting](/docs/config/project#preset) instead.\n\n```\ntasks {  [\"example\"] {    `local` = true    # Or    preset = \"server\"  }}\n```\n\n## Example configs\n\n### `.moon/workspace.pkl`\n\n```\nprojects {  globs = List(\"apps/*\", \"packages/*\")  sources {    [\"root\"] = \".\"  }}vcs {  defaultBranch = \"master\"}\n```\n\n### `.moon/toolchain.pkl`\n\n```\nnode {  version = \"20.15.0\"  packageManager = \"yarn\"  yarn {    version = \"4.3.1\"  }  addEnginesConstraint = false  inferTasksFromScripts = false}\n```\n\n### `moon.pkl`\n\n```\ntype = \"application\"language = \"typescript\"dependsOn = List(\"client\", \"ui\")tasks {  [\"build\"] {    command = \"docusaurus build\"    deps = List(\"^:build\")    outputs = List(\"build\")    options {      interactive = true      retryCount = 3    }  }  [\"typecheck\"] {    command = \"tsc --build\"    inputs = new Listing {      \"@globs(sources)\"      \"@globs(tests)\"      \"tsconfig.json\"      \"/tsconfig.options.json\"    }  }}\n```\n\n## Example functionality\n\n### Loops and conditionals\n\n```\ntasks {  for (_os in List(\"linux\", \"macos\", \"windows\")) {    [\"build-\\(_os)\"] {      command = \"cargo\"      args = List(        \"--target\",        if (_os == \"linux\") \"x86_64-unknown-linux-gnu\"          else if (_os == \"macos\") \"x86_64-apple-darwin\"          else \"i686-pc-windows-msvc\",        \"--verbose\"      )      options {        os = _os      }    }  }}\n```\n\n### Local variables\n\n```\nlocal _sharedInputs = List(\"src/**/*\")tasks {  [\"test\"] {    // ...    inputs = List(\"tests/**/*\") + _sharedInputs  }  [\"lint\"] {    // ...    inputs = List(\"**/*.graphql\") + _sharedInputs  }}\n```\n\n## /docs/guides/profile\n\nSource: https://moonrepo.dev/docs/guides/profile\n\n# Task profiling\n\nTroubleshooting slow or unperformant tasks? Profile and diagnose them with ease!\n\ncaution\n\nProfiling is only supported by `node` based tasks, and is not supported by tasks that are created\nthrough `package.json` inference, or for packages that ship non-JavaScript code (like Rust or Go).\n\n## CPU snapshots\n\nCPU profiling helps you get a better understanding of which parts of your code require the most CPU\ntime, and how your code is executed and optimized by Node.js. The profiler will measure code\nexecution and activities performed by the engine itself, such as compilation, calls of system\nlibraries, optimization, and garbage collection.\n\n### Record a profile\n\nTo record a CPU profile, pass `--profile cpu` to the [`moon run`](/docs/commands/run) command. When\nsuccessful, the profile will be written to\n`.moon/cache/states/\n//snapshot.cpuprofile`.\n\n```\n$ moon run --profile cpu app:lint\n```\n\n### Analyze in Chrome\n\nCPU profiles can be reviewed and analyzed with\n[Chrome developer tools](https://developer.chrome.com/docs/devtools/) using the following steps.\n\n- Open Chrome and navigate to `chrome://inspect`.\n\n- Under \"Devices\", navigate to \"Open dedicated DevTools for Node\".\n\n- The following window will popup. Ensure the \"Profiler\" tab is selected.\n\n- Click \"Load\" and select the `snapshot.cpuprofile` that was [previously recorded](#record-a-profile). If successful, the snapshot will appear in the left column.\n\nOn macOS, press `command` + `shift` + `.` to display hidden files and folders, to locate the\n`.moon` folder.\n\n- Select the snapshot in the left column. From here, the snapshot can be analyzed and represented with [Bottom up](#bottom-up), [Top down](#top-down), or [Flame chart](#flame-chart) views.\n\n## Heap snapshots\n\nHeap profiling lets you detect memory leaks, dynamic memory problems, and locate the fragments of\ncode that caused them.\n\n### Record a profile\n\nTo record a heap profile, pass `--profile heap` to the [`moon run`](/docs/commands/run) command. When\nsuccessful, the profile will be written to\n`.moon/cache/states/\n//snapshot.heapprofile`.\n\n```\n$ moon run --profile heap app:lint\n```\n\n### Analyze in Chrome\n\nHeap profiles can be reviewed and analyzed with\n[Chrome developer tools](https://developer.chrome.com/docs/devtools/) using the following steps.\n\n- Open Chrome and navigate to `chrome://inspect`.\n\n- Under \"Devices\", navigate to \"Open dedicated DevTools for Node\".\n\n- The following window will popup. Ensure the \"Memory\" tab is selected.\n\n- Click \"Load\" and select the `snapshot.heapprofile` that was [previously recorded](#record-a-profile-1). If successful, the snapshot will appear in the left column.\n\nOn macOS, press `command` + `shift` + `.` to display hidden files and folders, to locate the\n`.moon` folder.\n\n- Select the snapshot in the left column. From here, the snapshot can be analyzed and represented with [Bottom up](#bottom-up), [Top down](#top-down), or [Flame chart](#flame-chart) views.\n\n## Views\n\nChrome DevTools provide 3 views for analyzing activities within a snapshot. Each view gives you a\ndifferent perspective on these activities.\n\n### Bottom up\n\nThe Bottom up view is helpful if you encounter a heavy function and want to find out where it was\ncalled from.\n\n- The \"Self Time\" column represents the aggregated time spent directly in that activity, across all of its occurrences.\n\n- The \"Total Time\" column represents aggregated time spent in that activity or any of its children.\n\n- The \"Function\" column is the function that was executed, including source location, and any children.\n\n### Top down\n\nThe Top down view works in a similar fashion to [Bottom up](#bottom-up), but displays functions\nstarting from the top-level entry points. These are also known as root activities.\n\n### Flame chart\n\nDevTools represents main thread activity with a flame chart. The x-axis represents the recording\nover time. The y-axis represents the call stack. The events on top cause the events below it.\n\n## /docs/guides/remote-cache\n\nSource: https://moonrepo.dev/docs/guides/remote-cache\n\n# Remote caching\n\nIs your CI pipeline running slower than usual? Are you tired of running the same build over and over\nalthough nothing has changed? Do you wish to reuse the same local cache across other machines and\nenvironments? These are just a few scenarios that remote caching aims to solve.\n\nRemote caching is a system that shares artifacts to improve performance, reduce unnecessary\ncomputation time, and alleviate resources. It achieves this by uploading hashed artifacts to a cloud\nstorage provider, like AWS S3 or Google Cloud, and downloading them on demand when a build matches a\nderived hash.\n\nTo make use of remote caching, we provide 2 solutions.\n\n## Self-hosted v1.30.0\n\nThis solution allows you to host any remote caching service that is compatible with the\n[Bazel Remote Execution v2 API](https://github.com/bazelbuild/remote-apis/tree/main/build/bazel/remote/execution/v2),\nsuch as [`bazel-remote`](https://github.com/buchgr/bazel-remote). When using this solution, the\nfollowing RE API features must be enabled:\n\n- Action result caching\n\n- Content addressable storage caching\n\n- SHA256 digest hashing\n\n- gRPC requests\n\nwarning\n\nThis feature and its implementation is currently unstable, and its documentation is incomplete.\nPlease report any issues on GitHub or through Discord!\n\n### Host your service\n\nWhen you have chosen (or built) a compatible service, host it and make it available through gRPC (we\ndo not support HTTP at this time). For example, if you plan to use `bazel-remote`, you can do\nsomething like the following:\n\n```\nbazel-remote --dir /path/to/moon-cache --max_size 10 --storage_mode uncompressed --grpc_address 0.0.0.0:9092\n```\n\nIf you've configured the [`remote.cache.compression`](/docs/config/workspace#compression) setting to\n\"zstd\", you'll need to run the binary with that storage mode as well.\n\n```\nbazel-remote --dir /path/to/moon-cache --max_size 10 --storage_mode zstd --grpc_address 0.0.0.0:9092\n```\n\ninfo\n\nView the official [`bazel-remote`](https://github.com/buchgr/bazel-remote#usage) documentation for\nall the available options, like storing artifacts in S3, configuring authentication (TLS/mTLS),\nproxies, and more.\n\n### Configure remote caching\n\nOnce your service is running, you can enable remote caching by configuring the\n[`remote`](/docs/config/workspace#remote) settings in [`.moon/workspace.yml`](/docs/config/workspace). At\nminimum, the only setting that is required is `host`.\n\n.moon/workspace.yml\n\n```\nremote:  host: 'grpc://your-host.com:9092'\n```\n\n#### TLS and mTLS\n\nWe have rudimentary support for TLS and mTLS, but it's very unstable, and has not been thoroughly\ntested. There's also [many](https://github.com/hyperium/tonic/issues/1652)\n[many](https://github.com/hyperium/tonic/issues/1989)\n[issues](https://github.com/hyperium/tonic/issues/1033) around authentication in Tonic.\n\n.moon/workspace.yml\n\n```\n# TLSremote:  host: 'grpcs://your-host.com:9092'  tls:    cert: 'certs/ca.pem'    domain: 'your-host.com'# mTLSremote:  host: 'grpcs://your-host.com:9092'  mtls:    caCert: 'certs/ca.pem'    clientCert: 'certs/client.pem'    clientKey: 'certs/client.key'    domain: 'your-host.com'\n```\n\n## Cloud-hosted: Depotv1.32.0\n\nIf you'd prefer not to host your own solution, you could use\n[Depot Cache](https://depot.dev/products/cache), a cloud-based caching solution. To make use of\nDepot, follow these steps:\n\n- Create an account on [depot.dev](https://depot.dev)\n\n- Create an organization\n\n- Go to organization settings -> API tokens\n\n- Create a new API token\n\n- Add the token as a `DEPOT_TOKEN` environment variable to your moon pipelines\n\nOnce these steps have been completed, you can enable remote caching in moon with the following\nconfiguration. If your Depot account has more than 1 organization, you'll need to set the\n`X-Depot-Org` header.\n\n.moon/workspace.yml\n\n```\nremote:  host: 'grpcs://cache.depot.dev'  auth:    token: 'DEPOT_TOKEN'    headers:      'X-Depot-Org': ''\n```\n\n## FAQ\n\n#### What is an artifact?\n\nIn the context of moon and remote caching, an artifact is the\n[outputs of a task](/docs/config/project#outputs), as well as the stdout and stderr of the task that\ngenerated the outputs. Artifacts are uniquely identified by the\n[moon generated hash](/docs/concepts/cache#hashing).\n\n#### Do I have to use remote caching?\n\nNo, remote caching is optional. It's intended purpose is to store long lived build artifacts to\nspeed up CI pipelines, and optionally local development. For the most part,\n[`moon ci`](/docs/commands/ci) does a great job of only running what's affected in pull requests, and\nis a great starting point.\n\n#### Does remote caching store source code?\n\nNo, remote caching does not store source code. It stores the\n[outputs of a task](/docs/config/project#outputs), which is typically built and compiled code. To\nverify this, you can inspect the tar archives in `.moon/cache/outputs`.\n\n#### Does moon collect any personally identifiable information?\n\nNo, moon does not collect any PII as part of the remote caching process.\n\n#### Are artifacts encrypted?\n\nWe do not encrypt on moon's side, as encryption is provided by your cloud storage provider.\n\n## /docs/guides/root-project\n\nSource: https://moonrepo.dev/docs/guides/root-project\n\n# Root-level project\n\nComing from other repositories or task runner, you may be familiar with tasks available at the\nrepository root, in which one-off, organization, maintenance, or process oriented tasks can be ran.\nmoon supports this through a concept known as a root-level project.\n\nBegin by adding the root to [`projects`](/docs/config/workspace#projects) with a source value of `.`\n(current directory relative from the workspace).\n\n.moon/workspace.yml\n\n```\n# As a mapprojects:  root: '.'# As a list of globsprojects:  - '.'\n```\n\nWhen using globs, the root project's name will be inferred from the repository folder name. Be\nwary of this as it can change based on what a developer has checked out as.\n\nOnce added, create a [`moon.yml`](/docs/config/project) in the root of the repository. From here you\ncan define tasks that can be ran using this new root-level project name, for example,\n`moon run root:`.\n\nmoon.yml\n\n```\ntasks:  versionCheck:    command: 'yarn version check'    inputs: []    options:      cache: false\n```\n\nAnd that's it, but there are a few caveats to be aware of...\n\n## Caveats\n\n### Greedy inputs\n\nwarning\n\nIn moon v1.24, root-level tasks default to no inputs. In previous versions, inputs defaulted to\n`**/*`. This section is only applicable for older moon versions!\n\nTask [`inputs`](/docs/config/project#inputs) default to `**/*`, which would result in root-level tasks\nscanning all files in the repository. This will be a very expensive operation! We suggest\nrestricting inputs to a very succinct whitelist, or disabling inputs entirely.\n\nmoon.yml\n\n```\ntasks:  oneOff:    # ...    inputs: []\n```\n\n### Inherited tasks\n\nBecause a root project is still a project in the workspace, it will inherit all tasks defined in\n[`.moon/tasks/all.yml`](/docs/config/tasks), which may be unexpected. To mitigate this, you can exclude\nsome or all of these tasks in the root config with\n[`workspace.inheritedTasks`](/docs/config/project#inheritedtasks).\n\nmoon.yml\n\n```\nworkspace:  inheritedTasks:    include: []\n```\n\n## /docs/guides/rust/handbook\n\nSource: https://moonrepo.dev/docs/guides/rust/handbook\n\n# Rust handbook\n\nUtilizing Rust in a monorepo is a trivial task, thanks to Cargo, and also moon. With this handbook,\nwe'll help guide you through this process.\n\ninfo\n\nmoon is not a build system and does not replace Cargo. Instead, moon runs `cargo` commands, and\nefficiently orchestrates those tasks within the workspace.\n\n## moon setup\n\nFor this part of the handbook, we'll be focusing on [moon](/moon), our task runner. To start,\nlanguages in moon act like plugins, where their functionality and support is not enabled unless\nexplicitly configured. We follow this approach to avoid unnecessary overhead.\n\n### Enabling the language\n\nTo enable Rust, define the [`rust`](/docs/config/toolchain#rust) setting in\n[`.moon/toolchains.yml`](/docs/config/toolchain), even if an empty object.\n\n.moon/toolchains.yml\n\n```\n# Enable Rustrust: {}# Enable Rust and override default settingsrust:  syncToolchainConfig: true\n```\n\nOr by pinning a `rust` version in [`.prototools`](/docs/proto/config) in the workspace root.\n\n.prototools\n\n```\nrust = \"1.69.0\"\n```\n\nThis will enable the Rust toolchain and provide the following automations around its ecosystem:\n\n- Manifests and lockfiles are parsed for accurate dependency versions for hashing purposes.\n\n- Cargo binaries (in `~/.cargo/bin`) are properly located and executed.\n\n- Automatically sync `rust-toolchain.toml` configuration files.\n\n- For non-workspaces, will inherit `package.name` from `Cargo.toml` as a project alias.\n\n- And more to come!\n\n### Utilizing the toolchain\n\nWhen a language is enabled, moon by default will assume that the language's binary is available\nwithin the current environment (typically on `PATH`). This has the downside of requiring all\ndevelopers and machines to manually install the correct version of the language, and to stay in\nsync.\n\nInstead, you can utilize [moon's toolchain](/docs/concepts/toolchain), which will download and\ninstall the language in the background, and ensure every task is executed using the exact version\nacross all machines.\n\nEnabling the toolchain is as simple as defining the\n[`rust.version`](/docs/config/toolchain#version-2) setting.\n\n.moon/toolchains.yml\n\n```\n# Enable Rust toolchain with an explicit versionrust:  version: '1.69.0'\n```\n\nVersions can also be defined with [`.prototools`](/docs/proto/config).\n\ncaution\n\nmoon requires `rustup` to exist in the environment, and will use this to install the necessary Rust\ntoolchains. This requires Rust to be manually installed on the machine, as moon does not\nauto-install the language, just the toolchains.\n\n## Repository structure\n\nRust/Cargo repositories come in two flavors: a single crate with one `Cargo.toml`, or multiple\ncrates with many `Cargo.toml`s using\n[Cargo workspaces](https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html). The latter is\nhighly preferred as it enables Cargo incremental caching.\n\nRegardless of which flavor your repository uses, in moon, both flavors are a single\n[moon project](/docs/concepts/project). This means that all Rust crates are grouped together into a\nsingle moon project, and the [`moon.yml`](/docs/config/project) file is located at the root relative\nto `Cargo.lock` and the `target` folder.\n\nAn example of this layout is demonstrated below:\n\n- Workspaces\n- Non-workspaces\n\n```\n/ .moon/ crates/    client/|       ...       Cargo.toml    server/|       ...       Cargo.toml    utils/|        ...        Cargo.toml target/ Cargo.lock Cargo.toml moon.yml\n```\n\n```\n/ .moon/ src/    lib.rs tests/    ... target/ Cargo.lock Cargo.toml moon.yml\n```\n\n### Example `moon.yml`\n\nThe following configuration represents a base that covers most Rust projects.\n\n- Workspaces\n- Non-workspaces\n\n/moon.yml\n\n```\nlanguage: 'rust'layer: 'application'env:  CARGO_TERM_COLOR: 'always'fileGroups:  sources:    - 'crates/*/src/**/*'    - 'crates/*/Cargo.toml'    - 'Cargo.toml'  tests:    - 'crates/*/benches/**/*'    - 'crates/*/tests/**/*'tasks:  build:    command: 'cargo build'    inputs:      - '@globs(sources)'  check:    command: 'cargo check --workspace'    inputs:      - '@globs(sources)'  format:    command: 'cargo fmt --all --check'    inputs:      - '@globs(sources)'      - '@globs(tests)'  lint:    command: 'cargo clippy --workspace'    inputs:      - '@globs(sources)'      - '@globs(tests)'  test:    command: 'cargo test --workspace'    inputs:      - '@globs(sources)'      - '@globs(tests)'\n```\n\n/moon.yml\n\n```\nlanguage: 'rust'layer: 'application'env:  CARGO_TERM_COLOR: 'always'fileGroups:  sources:    - 'src/**/*'    - 'Cargo.toml'  tests:    - 'benches/**/*'    - 'tests/**/*'tasks:  build:    command: 'cargo build'    inputs:      - '@globs(sources)'  check:    command: 'cargo check'    inputs:      - '@globs(sources)'  format:    command: 'cargo fmt --check'    inputs:      - '@globs(sources)'      - '@globs(tests)'  lint:    command: 'cargo clippy'    inputs:      - '@globs(sources)'      - '@globs(tests)'  test:    command: 'cargo test'    inputs:      - '@globs(sources)'      - '@globs(tests)'\n```\n\n## Cargo integration\n\nYou can't use Rust without Cargo -- well you could but why would you do that? With moon, we're doing\nour best to integrate with Cargo as much as possible. Here's a few of the benefits we currently\nprovide.\n\n### Global binaries\n\nCargo supports global binaries through the\n[`cargo install`](https://doc.rust-lang.org/cargo/commands/cargo-install.html) command, which\ninstalls a crate to `~/.cargo/bin`, or makes it available through the `cargo ` command. These\nare extremely beneficial for development, but they do require every developer to manually install\nthe crate (and appropriate version) to their machine.\n\nWith moon, this is no longer an issue with the [`rust.bins`](/docs/config/toolchain#bins) setting.\nThis setting requires a list of crates (with optional versions) to install, and moon will install\nthem as part of the task runner install dependencies action. Furthermore, binaries will be installed\nwith [`cargo-binstall`](https://crates.io/crates/cargo-binstall) in an effort to reduce build and\ncompilation times.\n\n.moon/toolchains.yml\n\n```\nrust:  bins:    - 'cargo-make@0.35.0'    - 'cargo-nextest'\n```\n\nAt this point, tasks can be configured to run this binary as a command. The `cargo` prefix is\noptional, as we'll inject it when necessary.\n\n/moon.yml\n\n```\ntasks:  test:    command: 'nextest run --workspace'    toolchain: 'rust'\n```\n\ntip\n\nThe `cargo-binstall` crate may require a `GITHUB_TOKEN` environment variable to make GitHub Releases\nAPI requests, especially in CI. If you're being rate limited, or fail to find a download, try\ncreating a token with necessary permissions.\n\n### Lockfile handling\n\nTo expand our integration even further, we also take `Cargo.lock` into account, and apply the\nfollowing automations when a target is being ran:\n\n- If the lockfile does not exist, we generate one with [`cargo generate-lockfile`](https://doc.rust-lang.org/cargo/commands/cargo-generate-lockfile.html).\n\n- We parse and extract the resolved checksums and versions for more accurate hashing.\n\n## FAQ\n\n### Should we cache the `target` directory as an output?\n\nNo, we don't believe so. Both moon and Cargo support incremental caching, but they're not entirely\ncompatible, and will most likely cause problems when used together.\n\nThe biggest factor is that moon's caching and hydration uses a tarball strategy, where each task\nwould unpack a tarball on cache hit, and archive a tarball on cache miss. The Cargo target directory\nis extremely large (moon's is around 50gb), and coupling this with our tarball strategy is not\nviable. This would cause massive performance degradation.\n\nHowever, at maximum, you could cache the compiled binary itself as an output, instead of the\nentire target directory. Example:\n\nmoon.yml\n\n```\ntasks:  build:    command: 'cargo build --release'    outputs: ['target/release/moon']\n```\n\n### How can we improve CI times?\n\nRust is known for slow build times and CI is no exception. With that being said, there are a few\npatterns to help alleviate this, both on the moon side and outside of it.\n\nTo start, you can cache Rust builds in CI. This is a non-moon solution to the `target` directory\nproblem above.\n\n- If you use GitHub Actions, feel free to use our [moonrepo/setup-rust](https://github.com/moonrepo/setup-rust) action, which has built-in caching.\n\n- A more integrated solution is [sccache](https://crates.io/crates/sccache), which stores build artifacts in a cloud storage provider.\n\n## /docs/guides/sharing-config\n\nSource: https://moonrepo.dev/docs/guides/sharing-config\n\n# Sharing workspace configuration\n\nFor large companies, open source maintainers, and those that love reusability, more often than not\nyou'll want to use the same configuration across all repositories for consistency. This helps reduce\nthe maintenance burden while ensuring a similar developer experience.\n\nTo help streamline this process, moon provides an `extends` setting in both\n[`.moon/workspace.yml`](/docs/config/workspace#extends),\n[`.moon/toolchains.yml`](/docs/config/toolchain#extends), and\n[`.moon/tasks/all.yml`](/docs/config/tasks#extends). This setting requires a HTTPS URL or relative\nfile system path that points to a valid YAML document for the configuration in question.\n\nA great way to share configuration is by using GitHub's \"raw file view\", as demonstrated below using\nour very own [examples repository](https://github.com/moonrepo/examples).\n\n.moon/tasks/all.yml\n\n```\nextends: 'https://raw.githubusercontent.com/moonrepo/examples/master/.moon/tasks/all.yml'\n```\n\n## Versioning\n\nInheriting an upstream configuration can be dangerous, as the settings may change at any point,\nresulting in broken builds. To mitigate this, you can used a \"versioned\" upstream configuration,\nwhich is ideally a fixed point in time. How this is implemented is up to you or your company, but we\nsuggest the following patterns:\n\n### Using versioned filenames\n\nA rudimentary solution is to append a version to the upstream filename. When the file is modified, a\nnew version should be created, while the previous version remains untouched.\n\n```\n-extends: '../shared/project.yml'+extends: '../shared/project-v1.yml'\n```\n\n### Using branches, tags, or commits\n\nWhen using a version control platform, like GitHub above, you can reference the upstream\nconfiguration through a branch, tag, commit, or sha. Since these are a reference point in time, they\nare relatively safe.\n\n```\n-extends: 'https://raw.githubusercontent.com/moonrepo/examples/master/.moon/tasks/all.yml'+extends: 'https://raw.githubusercontent.com/moonrepo/examples/c3f10160bcd16b48b8d4d21b208bb50f6b09bd96/.moon/tasks/all.yml'\n```\n\n## /docs/guides/vcs-hooks\n\nSource: https://moonrepo.dev/docs/guides/vcs-hooks\n\n# VCS hooks\n\nv1.9.0\n\nVCS hooks (most popular with [Git](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks)) are a\nmechanism for running scripts at pre-defined phases in the VCS's lifecycle, most commonly\npre-commit, pre-push, or pre-merge. With moon, we provide a built-in solution for managing hooks,\nand syncing them across developers and machines.\n\n- [Learn more about Git hooks](https://git-scm.com/docs/githooks)\n\n## Defining hooks\n\nHooks can be configured with the [`vcs.hooks`](/docs/config/workspace#hooks) setting in\n[`.moon/workspace.yml`](/docs/config/workspace). This setting requires a map of hook names (in the\nformat required by your VCS), to a list of arbitrary commands to run within the hook script.\nCommands are used as-is and are not formatted or interpolated in any way.\n\nTo demonstrate this, let's configure a `pre-commit` hook that runs a moon `lint` task for affected\nprojects, and also verifies that the commit message abides by a specified format (using\n[pre-commit](https://pre-commit.com/) and the\n[commitlint hook](https://github.com/alessandrojcm/commitlint-pre-commit-hook), for example).\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    pre-commit:      - 'pre-commit run'      - 'moon run :lint --affected'    commit-msg:      - 'pre-commit run --hook-stage commit-msg --commit-msg-filename $ARG1'\n```\n\ninfo\n\nAll commands are executed from the repository root (not moon's workspace root) and must exist on\n`PATH`. If `moon` is installed locally, you can execute it using a repository relative path, like\n`./node_modules/@moonrepo/cli/moon`.\n\n### Accessing argumentsv1.40.3\n\nTo ease interoperability between operating systems and terminal shells, we set passed arguments as\nenvironment variables.\n\nIn your hook commands, you can access these arguments using the `$ARG` format, where `` is the\n1-indexed position of the argument. For example, to access the first argument, you would use\n`$ARG1`, the second argument would be `$ARG2`, and so on. `$ARG0` exists and points to the current\nscript.\n\n## Enabling hooks\n\nHooks are a divisive subject, as some developers love them, and others hate them. Finding a viable\nsolution for everyone can be difficult, so with moon, we opted to support 2 distinct options, but\nonly 1 can be used at a time. Choose the option that works best for your project, team, or company!\n\ncaution\n\nIf you have existing VCS hooks, back them up as moon's implementation will overwrite them! To\nmigrate your existing hooks, [configure them as commands to run](#defining-hooks).\n\n### Automatically for everyone\n\nIf you'd like hooks to be enforced for every contributor of the repository, then simply enable the\n[`vcs.syncHooks`](/docs/config/workspace#synchooks) setting in\n[`.moon/workspace.yml`](/docs/config/workspace). This will automatically generate hook scripts and link\nthem with the local VCS checkout, everytime a [target](/docs/concepts/target) is ran.\n\n.moon/workspace.yml\n\n```\nvcs:  hooks: [...]  syncHooks: true\n```\n\ncaution\n\nAutomatically activating hooks on everyone's computer is considered a sensitive action, because it\nenables the execution of arbitrary code on the computers of the team members. Be careful about the\nhook commands you define in the [`.moon/workspace.yml`](/docs/config/workspace) file.\n\n### Manually by each developer\n\nIf you'd prefer contributors to have a choice in whether or not they want to use hooks, then simply\ndo nothing, and guide them to run the [`moon sync hooks`](/docs/commands/sync/vcs-hooks) command. This\ncommand will generate hook scripts and link them with the local VCS checkout.\n\n```\n$ moon sync hooks\n```\n\n## Disabling hooks\n\nIf you choose to stop using hooks, you'll need to cleanup the previously generated hook scripts, and\nreset the VCS checkout. To start, disable the `vcs.syncHooks` setting.\n\n.moon/workspace.yml\n\n```\nvcs:  syncHooks: false\n```\n\nAnd then run the following command, which will delete files from your local filesystem. Every\ndeveloper that is using hooks will need to run this command.\n\n```\n$ moon sync hooks --clean\n```\n\n## How it works\n\nWhen hooks are [enabled](#enabling-hooks), the following processes will take place.\n\n- The configured [hooks](#defining-hooks) will be generated as individual script files in the `.moon/hooks` directory. Whether or not you commit or ignore these script files is your choice. They are written to the `.moon` directory so that they can be reviewed, audited, and easily tested, but are required.\n\n- We then sync these generated hook scripts with the current VCS. For Git, we create `.git/hooks` files that execute our generated scripts, using repository relative commands. Any existing VCS hooks will be overwritten.\n\ninfo\n\nThe `.moon/hooks` scripts are generated as Bash scripts (use a `.sh` file extension) on Unix, and\nPowerShell scripts (use a `.ps1` file extension) on Windows.\n\n### Git\n\nOn Unix based operating systems (Linux, macOS, etc), the `.moon/hooks` scripts are executed from\n`.git/hooks` Bash files. Because of this, `bash` should be available on the system (which is\ntypically the case).\n\nOn Windows, things get tricky. Since Git has a requirement that `.git/hooks` files must be\nextensionless, and older versions of PowerShell require an extension, we have to use a workaround.\nTo handle this, the `.git/hooks` files are Bash-like scripts (that should work on most machines)\nthat execute `.moon/hooks` using the `powershell.exe` (or `pwsh.exe`) executables. Because of this,\nPowerShell must be available on the system.\n\n## Examples\n\n### Pre-commit\n\nA perfect use case for the `pre-commit` hook is to check linting and formatting of the files being\ncommitted. If either of these tasks fail, the commit will abort until they are fixed. Be sure to use\nthe [`--affected`](/docs/run-task#running-based-on-affected-files-only) option so that we only run on\nchanged projects!\n\n.moon/workspace.yml\n\n```\nvcs:  hooks:    pre-commit:      - 'moon run :lint :format --affected --status=staged'\n```\n\nBy default this will run on the entire project (all files). If you want to filter it to only the\nchanged files, enable the [`affectedFiles`](/docs/config/project#affectedfiles) task option.\n\n## /docs/guides/wasm-plugins\n\nSource: https://moonrepo.dev/docs/guides/wasm-plugins\n\n# WASM plugins\n\n[moon](/moon) and [proto](/proto) plugins can be written in\n[WebAssembly (WASM)](https://webassembly.org/), a portable binary format. This means that plugins\ncan be written in any language that compiles to WASM, like Rust, C, C++, Go, TypeScript, and more.\nBecause WASM based plugins are powered by a programming language, they implicitly support complex\nbusiness logic and behavior, have access to a sandboxed file system (via WASI), can execute child\nprocesses, and much more.\n\ndanger\n\nSince our WASM plugin implementations are still experimental, expect breaking changes to occur in\nnon-major releases.\n\n## Powered by Extism\n\nOur WASM plugin system is powered by [Extism](https://extism.org/), a Rust-based cross-language\nframework for building WASM plugins under a unified guest and host API. Under the hood, Extism uses\n[wasmtime](https://wasmtime.dev/) as its WASM runtime.\n\nFor the most part, you do not need to know about Extism's host SDK, as we have implemented the\nbulk of it within moon and proto directly. However, you should be familiar with the guest PDKs, as\nthis is what you'll be using to implement Rust-based plugins. We suggest reading the following\nmaterial:\n\n- [Plugin development kits](https://extism.org/docs/concepts/pdk) (PDKs)\n\n- The [extism-pdk](https://github.com/extism/rust-pdk) Rust crate\n\n- [Host functions](https://extism.org/docs/concepts/host-functions) (how they work)\n\n## Concepts\n\nBefore we begin, let's talk about a few concepts that are critical to WASM and our plugin systems.\n\n### Plugin identifier\n\nWhen implementing plugin functions, you'll need to access information about the current plugin. To\nget the current plugin identifier (the key the plugin was configured with), use the\n[`get_plugin_id`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.get_plugin_id.html) function.\n\n```\nlet id = get_plugin_id();\n```\n\n### Virtual paths\n\nWASM by default does not have access to the host file system, but through [WASI](https://wasi.dev/),\nwe can provide sandboxed access to a pre-defined list of allowed directories. We call these\n[virtual paths](https://docs.rs/warpgate_api/latest/warpgate_api/enum.VirtualPath.html), and all\npaths provided via function input or context use them.\n\nVirtual paths are implemented by mapping a real path (host machine) to a virtual path (guest\nruntime) using file path prefixes. The following prefixes are currently supported:\n\nReal path Virtual path Only for\n\n`~` `/userhome` ~\n\n`~/.proto` `/proto` ~\n\n`~/.moon` `/moon` moon\n\nmoon workspace `/workspace` moon\n\nFor example, from the context of WASM, you may have a virtual path of `/proto/tools/node/1.2.3`,\nwhich simply maps back to `~/.proto/tools/node/1.2.3` on the host machine. However, this should\nalmost always be transparent to you, the developer, and to end users.\n\nHowever, there may be a few cases where you need access to the real path from WASM, for example,\nlogging or executing commands. For this, the real path can be accessed with the\n[`real_path`](https://docs.rs/warpgate_api/latest/warpgate_api/enum.VirtualPath.html#method.real_path)\nfunction on the `VirtualPath` enum (this is a Rust only feature).\n\n```\nvirtual_path.real_path();\n```\n\n#### File system caveats\n\nWhen working with the file system from the context of WASM, there are a few caveats to be aware of.\n\n- All `fs` calls must use the virtual path. Real paths will error.\n\n- Paths not white listed (using prefixes above) will error.\n\n- Changing file permissions is not supported (on Unix and Windows). This is because WASI does not support this.\n\n- This also means operations like unpacking archives is not possible.\n\n### Host environment\n\nSince WASM executes in its own runtime, it does not have access to the current host operating\nsystem, architecture, so on and so forth. To bridge this gap, we provide the\n[`get_host_environment`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.get_host_environment.html)\nfunction.\n[Learn more about this type](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/struct.HostEnvironment.html).\n\n```\nlet env = get_host_environment()?;\n```\n\nThe host operating system and architecture can be accessed with `os` and `arch` fields respectively.\nBoth fields are an enum in Rust, or a string in other languages.\n\n```\nif env.os == HostOS::Windows {    // Windows only}if env.arch == HostArch::Arm64 {    // aarch64 only}\n```\n\nFurthermore, the user's home directory (`~`) can be accessed with the `home_dir` field, which is a\n[virtual path](#virtual-paths).\n\n```\nif env.home_dir.join(some_path).exists() {    // Do something}\n```\n\n### Host functions & macros\n\nWASM is pretty powerful but it can't do everything since it's sandboxed. To work around this, we\nprovide a mechanism known as host functions, which are functions that are implemented on the host\n(in Rust), and can be executed from WASM. The following host functions are currently available:\n\n- [`exec_command`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.exec_command.html) - Execute a system command on the host machine, with a provided list of arguments or environment variables.\n\n- [`from_virtual_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.real_path.html) - Converts a virtual path into a real path.\n\n- [`get_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_env.html) - Get an environment variable value from the host environment.\n\n- [`host_log`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_log.html) - Log an stdout, stderr, or tracing message to the host's terminal.\n\n- [`send_request`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.send_request.html) - Requests a URL on the host machine using a Rust-based HTTP client (not WASM).\n\n- [`set_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_env.html) - Set an environment variable to the host environment.\n\n- [`to_virtual_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.virtual_path.html) - Converts a real path into a virtual path.\n\nTo use host functions, you'll need to make them available by registering them at the top of your\nRust file (only add the functions you want to use) using the\n[extism-pdk](https://crates.io/crates/extism-pdk) crate.\n\n```\nuse extism_pdk::*;#[host_fn]extern \"ExtismHost\" {    fn exec_command(input: Json) -> Json;    fn from_virtual_path(path: String) -> String;    fn get_env_var(key: String) -> String;    fn host_log(input: Json);    fn send_request(input: Json) -> Json;    fn set_env_var(key: String, value: String);    fn to_virtual_path(path: String) -> Json;}\n```\n\ninfo\n\nTo simplify development, we provide built-in functions and macros for the host functions above.\nContinue reading for more information on these macros.\n\n#### Converting paths\n\nWhen working with virtual paths, you may need to convert them to real paths, and vice versa. The\n[`into_virtual_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.into_virtual_path.html)\nand [`into_real_path`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.into_real_path.html)\nfunctions can be used for such situations, which use the `to_virtual_path` and `from_virtual_path`\nhost functions respectively.\n\n```\n// Supports strings or pathslet virt = into_virtual_path(\"/some/real/path\")?;let real = into_real_path(PathBuf::from(\"/some/virtual/path\"))?;\n```\n\n#### Environment variables\n\nThe [`get_host_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.get_host_env_var.html)\nand [`set_host_env_var`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.set_host_env_var.html)\nfunctions can be used to read and write environment variables on the host, using the `set_env_var`\nand `get_env_var` host functions respectively.\n\n```\n// Set a valueset_host_env_var(\"ENV_VAR\", \"value\")?;// Get a value (returns an `Option`)let value = get_host_env_var(\"ENV_VAR\")?;\n```\n\nAdditionally, the\n[`add_host_paths`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.add_host_paths.html) function\ncan be used to append paths to the `PATH` environment variable.\n\n```\n// Append to pathadd_host_paths([\"/userhome/some/virtual/path\"])?;\n```\n\n#### Executing commands\n\nThe [`exec_command!`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.exec_command.html)\nmacro can be used to execute a command on the host, using the `exec_command` host function. If the\ncommand does not exist on `PATH`, an error is thrown. This macros supports three modes: pipe,\ninherit, and raw (returns `Result`).\n\n```\nlet result = exec_command!(raw, \"which\", [\"node\"]);\n```\n\nIf you want a simpler API, the\n[`exec`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.exec.html),\n[`exec_captured`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.exec_captured.html) (pipe),\nand [`exec_streamed`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.exec_streamed.html)\n(inherit) functions can be used.\n\n```\n// Pipe stdout/stderrlet output = exec_captured(\"which\", [\"node\"])?;// Inherit stdout/stderrexec_streamed(\"npm\", [\"install\"])?;// Full controlexec(ExecCommandInput {    command: \"npm\".into(),    args: vec![\"install\".into()],    ..ExecCommandInput::default()})?;\n```\n\n#### Sending requests\n\nThe [`send_request`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.send_request.html) macro\ncan be used to request a URL on the host, instead of from WASM, allowing it to use the same HTTP\nclient as the host CLI. This macro returns a response object, with the raw body in bytes, and the\nstatus code.\n\n```\nlet response = send_request!(\"https://some.com/url/to/fetch\");if response.status == 200 {  let json = response.json::()?;  let text = response.text()?;} else {  // Error!}\n```\n\nTo simplify the handling of requests -> responses, we also provide the\n[`fetch_bytes`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.fetch_bytes.html),\n[`fetch_json`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.fetch_json.html), and\n[`fetch_text`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/fn.fetch_text.html) functions.\n\n```\nlet json: T = fetch_json(\"https://some.com/url/to/fetch.json\")?;\n```\n\nOnly GET requests are supported.\n\n#### Logging\n\nThe [`host_log!`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/macro.host_log.html) macro can be\nused to write stdout or stderr messages to the host's terminal, using the `host_log` host function.\nIt supports the same argument patterns as `format!`.\n\nIf you want full control, like providing data/fields, use the input mode and provide\n[`HostLogInput`](https://docs.rs/warpgate_pdk/latest/warpgate_pdk/struct.HostLogInput.html).\n\n```\nhost_log!(stdout, \"Some message\");host_log!(stderr, \"Some message with {}\", \"args\");// With datahost_log!(input, HostLogInput {    message: \"Some message with data\".into(),    data: HashMap::from_iter([        (\"data\".into(), serde_json::to_value(data)?),    ]),    target: HostLogTarget::Stderr,});\n```\n\nFurthermore, the [extism-pdk](https://crates.io/crates/extism-pdk) crate provides a handful of\nmacros for writing level-based messages that'll appear in the host's terminal when `--log` is\nenabled in the CLI. These also support arguments.\n\n```\ndebug!(\"This is a debug message\");info!(\"Something informational happened\");warn!(\"Proceed with caution\");error!(\"Oh no, something went wrong\");\n```\n\n## Configuring plugin locations\n\nTo use a WASM plugin, it'll need to be configured in both moon and proto. Luckily both tools use a\nsimilar approach for configuring plugins called the\n[plugin locator](https://docs.rs/warpgate/latest/warpgate/enum.PluginLocator.html). A locator string\nis composed of 2 parts separated by `://`, the former is the protocol, and the latter is the\nlocation.\n\n```\n\"\n://\"\n```\n\nThe following locator patterns are supported:\n\n### `file`\n\nThe `file://` protocol represents a file path, either absolute or relative (from the current\nconfiguration file).\n\n```\n# Relative\"file://./path/to/example.wasm\"# Absolute\"file:///root/path/to/example.wasm\"\n```\n\n### `github`\n\nThe `github://` protocol can be used to target and download an asset from a specific GitHub release.\nThe location must be an organization + repository slug (owner/repo), and the release must have a\n`.wasm` asset available to download.\n\n```\n\"github://moonrepo/example-repo\"\n```\n\nIf you are targeting releases in a monorepo, you can append the project name after the repository.\nThe project name will be used as a prefix for tags, and will match `@v?` or\n`-v?` based tags.\n\n```\n\"github://moonrepo/example-repo/project-name\"\n```\n\nBy default, the latest release will be used and cached for 7 days. If you'd prefer to target a\nspecific release (preferred), append the release tag to the end of the location.\n\n```\n\"github://moonrepo/example-repo@v1.2.3\"\n```\n\nThis strategy is powered by the [GitHub API](https://api.github.com/) and is subject to rate\nlimiting. If running in a CI environment, we suggesting setting a `GITHUB_TOKEN` environment\nvariable to authorize API requests with. If using GitHub Actions, it's as simple as:\n\n```\n# In some job or step...env:  GITHUB_TOKEN: '${{ secrets.GITHUB_TOKEN }}'\n```\n\n### `https`\n\nThe `https://` protocol is your standard URL, and must point to an absolute file path. Files will be\ndownloaded to `~/.moon/plugins` or `~/.proto/plugins`. Non-secure URLs are not supported!\n\n```\n\"https://domain.com/path/to/plugins/example.wasm\"\n```\n\n## Creating a plugin\n\ninfo\n\nAlthough plugins can be written in any language that compiles to WASM, we've only tested Rust. The\nrest of this article assume you're using Rust and Cargo! Refer to [Extism](https://extism.org/)'s\ndocumentation for other examples.\n\nTo start, create a new crate with Cargo:\n\n```\ncargo new plugin --libcd plugin\n```\n\nSet the lib type to `cdylib`, and provide other required settings.\n\nCargo.toml\n\n```\n[package]name = \"example_plugin\"version = \"0.0.1\"edition = \"2024\"publish = false[lib]crate-type = ['cdylib'][profile.release]codegen-units = 1debug = falselto = trueopt-level = \"s\"panic = \"abort\"\n```\n\nOur Rust plugins are powered by [Extism](https://extism.org/), so lets add their PDK and ours as a\ndependency.\n\n```\ncargo add extism-pdk# For protocargo add proto_pdk# For mooncargo add moon_pdk\n```\n\nIn all Rust files, we can import all the PDKs with the following:\n\nsrc/lib.rs\n\n```\nuse extism_pdk::*;\n```\n\nWe can then build the WASM binary. The file will be available at\n`target/wasm32-wasip1/debug/.wasm`.\n\n```\ncargo build --target wasm32-wasip1\n```\n\n## Building and publishing\n\nAt this point, you should have a fully working WASM plugin, but to make it available to the\ncommunity, you'll still need to build and make the `.wasm` file available. The easiest solution is\nto publish a GitHub release and include the `.wasm` file as an asset.\n\n### Building, optimizing, and stripping\n\nWASM files are pretty fat, even when compiling in release mode. To reduce the size of these files,\nwe can use `wasm-opt` and `wasm-strip`, both of which are provided by the\n[WebAssembly](https://github.com/WebAssembly) group. The following script is what we use to build\nour own plugins.\n\ninfo\n\nThis functionality is natively supported in our\n[moonrepo/build-wasm-plugin](https://github.com/moonrepo/build-wasm-plugin) GitHub Action!\n\nbuild-wasm\n\n```\n#!/usr/bin/env bashtarget=\"${CARGO_TARGET_DIR:-target}\"input=\"$target/wasm32-wasip1/release/$1.wasm\"output=\"$target/wasm32-wasip1/$1.wasm\"echo \"Building\"cargo build --target wasm32-wasip1 --releaseecho \"Optimizing\"# https://github.com/WebAssembly/binaryen~/binaryen/bin/wasm-opt -Os \"$input\" --output \"$output\"echo \"Stripping\"# https://github.com/WebAssembly/wabt~/wabt/bin/wasm-strip \"$output\"\n```\n\n### Manually create releases\n\nWhen your plugin is ready to be published, you can create a release on GitHub using the following\nsteps.\n\n- Tag the release and push to GitHub.\n\n```\ngit tag v0.0.1git push --tags\n```\n\n- Build a release version of the plugin using the `build-wasm` script above. The file will be available at `target/wasm32-wasip1/.wasm`.\n\n```\nbuild-wasm\n```\n\n- In GitHub, navigate to the tags page, find the new tag, create a new release, and attach the built file as an asset.\n\n### Automate releases\n\nIf you're using GitHub Actions, you can automate the release process with our official\n[moonrepo/build-wasm-plugin](https://github.com/moonrepo/build-wasm-plugin) action.\n\n- Create a new workflow file at `.github/workflows/release.yml`. Refer to the link above for a working example.\n\n- Tag the release and push to GitHub.\n\n```\n# In a polyrepogit tag v0.0.1# In a monorepogit tag example_plugin-v0.0.1# Push the tagsgit push --tags\n```\n\n- The action will automatically build the plugin, create a release, and attach the built file as an asset.\n\n## /docs/guides/webhooks\n\nSource: https://moonrepo.dev/docs/guides/webhooks\n\n# Webhooks (experimental)\n\nLooking to gather metrics for your pipelines? Gain insight into run durations and failures? Maybe\nyou want to send Slack or Discord notifications? With our webhooks, all of these are possible!\n\nWhen the [`notifier.webhookUrl`](/docs/config/workspace#webhookurl) setting is configured with an HTTPS\nURL, and moon is running in a CI environment, moon will POST a payload to this endpoint for every\nevent in our pipeline.\n\n## Payload structure\n\nEvery webhook event is posted with the following request body, known as a payload.\n\n- `type` (`string`) - The type of [event](#events).\n\n- `environment` (`object | null`) - Information about the current CI/CD pipeline environment.\n\n- `event` (`object`) - The event specific payload. View each event for an example of their structure.\n\n- `createdAt` (`string`) - When the event was created, as a UTC timestamp in ISO 8601 (RFC 3339) format.\n\n- `uuid` (`string`) - A unique identifier for all webhooks in the current run batch.\n\n- `trace` (`string`) - A unique identifier for all webhooks in the overall run batch. Can be defined via `MOON_TRACE_ID` environment variable.\n\n```\n{  \"type\": \"...\",  \"environment\": \"...\",  \"event\": {    // ...  },  \"createdAt\": \"...\",  \"uuid\": \"...\",  \"trace\": \"...\"}\n```\n\nThe `uuid` field can be used to differentiate concurrently running pipelines!\n\n### Pipeline environment\n\nWhen webhooks are sent from a CI/CD pipeline, we attempt to include information about the\nenvironment under the `environment` field. If information could not be detected, this field is null,\notherwise it contains these fields.\n\n- `baseBranch` (`string | null`) - When a merge/pull request, the target (base) branch, otherwise null.\n\n- `branch` (`string`) - When a merge/pull request, the source (head) branch, otherwise the triggering branch.\n\n- `id` (`string`) - ID of the current pipeline instance.\n\n- `provider` (`string`) - Name of your CI/CD provider. GitHub Actions, GitLab, CircleCI, etc.\n\n- `requestId` (`string | null`) - The ID of the merge/pull request.\n\n- `requestUrl` (`string | null`) - Link to the merge/pull request.\n\n- `revision` (`string`) - The HEAD commit, revision, tag, ref, etc, that triggered the pipeline.\n\n- `url` (`string | null`) - Link to the current pipeline, when available.\n\n## Events\n\n### Pipeline\n\nRuns actions within moon using a robust dependency graph. Is triggered when using\n[`moon run`](/docs/commands/run).\n\n### `pipeline.started`\n\nTriggered when the pipeline has been created but before actions have started to run.\n\nThis event includes the number of actions registered within the pipeline, but does not provide\ndetailed information about the actions. Use the [`action.*`](#actionstarted) events for this.\n\n```\n{  \"type\": \"pipeline.started\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"actionsCount\": 15  },  \"uuid\": \"...\"}\n```\n\n### `pipeline.finished`\n\nTriggered when the pipeline has finished running all actions, with aggregated counts based on final\nstatus.\n\nThis event is not triggered if the pipeline crashes (this does not include actions that have\nfailed, as those are legitimate runs). Use the [`pipeline.aborted`](#pipelineaborted) event if you\nwant to also catch crashes.\n\n```\n{  \"type\": \"pipeline.finished\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"cachedCount\": 10,    \"baselineDuration\": {      \"secs\": 60,      \"nanos\": 3591693    },    \"duration\": {      \"secs\": 120,      \"nanos\": 3591693    },    \"estimatedSavings\": {      \"secs\": 60,      \"nanos\": 0    },    \"failedCount\": 1,    \"passedCount\": 4  },  \"uuid\": \"...\"}\n```\n\n### `pipeline.aborted`\n\nTriggered when the pipeline has crashed for unknown reasons, or had to abort as a result of a\ncritical action failing.\n\n```\n{  \"type\": \"pipeline.aborted\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": \"...\"  },  \"uuid\": \"...\"}\n```\n\n### Actions\n\nActions are \"jobs\" within the pipeline that are executed topologically.\n\n### `action.started`\n\nTriggered when an action within the pipeline has started to run.\n\n```\n{  \"type\": \"action.started\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"action\": {      \"attempts\": null,      \"createdAt\": \"...\",      \"duration\": {        \"secs\": 0,        \"nanos\": 3591693      },      \"error\": null,      \"label\": \"InstallWorkspaceDeps(node:18.0.0)\",      \"nodeIndex\": 5,      \"status\": \"passed\"    },    \"node\": {      \"action\": \"InstallDeps\",      \"params\": [        {          \"toolchain\": \"Node\",          \"version\": \"18.0.0\"        }      ]    }  },  \"uuid\": \"...\"}\n```\n\n### `action.finished`\n\nTriggered when an action within the pipeline has finished running, either with a success or failure.\nIf the action failed, the `error` field will be set with the error message.\n\n```\n{  \"type\": \"action.finished\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"action\": {      \"attempts\": null,      \"createdAt\": \"...\",      \"duration\": {        \"secs\": 0,        \"nanos\": 3591693      },      \"error\": null,      \"label\": \"InstallWorkspaceDeps(node:18.0.0)\",      \"nodeIndex\": 5,      \"status\": \"passed\"    },    \"error\": null,    \"node\": {      \"action\": \"InstallDeps\",      \"params\": {        \"toolchain\": \"Node\",        \"version\": \"18.0.0\"      }    }  },  \"uuid\": \"...\"}\n```\n\n### `dependencies.installing`\n\nTriggered when dependencies for a workspace or project have started to install. When targeting a\nproject, the `project` field will be set, otherwise `null` for the entire workspace.\n\n```\n{  \"type\": \"dependencies.installing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"project\": {      \"id\": \"server\"      // ...    },    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    },    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `dependencies.installed`\n\nTriggered when dependencies for a workspace or project have finished installing. When targeting a\nproject, the `project` field will be set, otherwise `null` for the entire workspace. If the install\nfailed, the `error` field will be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nInstalled deps can be scoped with the `InstallDeps(...)` labels.\n\n```\n{  \"type\": \"dependencies.installed\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"project\": null,    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    },    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `environment.initializing`v1.37.0\n\nTriggered when an environment is being setup for a toolchain. When targeting a project, the\n`project` field will be set, otherwise `null` for the entire workspace.\n\n```\n{  \"type\": \"environment.initializing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"project\": {      \"id\": \"server\"      // ...    },    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `environment.initialized`v1.37.0\n\nTriggered when an environment has been setup for a toolchain. When targeting a project, the\n`project` field will be set, otherwise `null` for the entire workspace. If setup failed, the `error`\nfield will be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nInstalled deps can be scoped with the `SetupEnvironment(...)` labels.\n\n```\n{  \"type\": \"environment.initialized\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"project\": null,    \"root\": \".\",    \"toolchain\": \"node\"  },  \"uuid\": \"...\"}\n```\n\n### `project.syncing`\n\nTriggered when an affected project has started syncing its workspace state. This occurs\nautomatically before a project's task is ran.\n\n```\n{  \"type\": \"project.syncing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"project\": {      \"id\": \"client\"      // ...    },    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `project.synced`\n\nTriggered when an affected project has finished syncing. If the sync failed, the `error` field will\nbe set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nSynced projects can be scoped with the `SyncProject(...)` labels.\n\n```\n{  \"type\": \"project.synced\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"project\": {      \"id\": \"client\"      // ...    },    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `tool.installing`\n\nTriggered when a tool within the toolchain has started downloading and installing.\n\nThis event is always triggered, regardless of whether the tool has already been installed or not.\nFor an accurate state, use the [`action.finished`](#actionfinished) event. If the `status` is\n\"skipped\", then the tool was already installed.\n\n```\n{  \"type\": \"tool.installing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `tool.installed`\n\nTriggered when a tool within the toolchain has finished installing. If the install failed, the\n`error` field will be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nTools can be scoped with the `SetupToolchain(...)` labels.\n\n```\n{  \"type\": \"tool.installed\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"runtime\": {      \"toolchain\": \"Node\",      \"version\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `toolchain.installing`\n\nTriggered when a toolchain plugin has started downloading and installing.\n\nThis event is always triggered, regardless of whether the tool has already been installed or not.\nFor an accurate state, use the [`action.finished`](#actionfinished) event. If the `status` is\n\"skipped\", then the tool was already installed.\n\n```\n{  \"type\": \"toolchain.installing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"spec\": {      \"id\": \"node\",      \"req\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `toolchain.installed`\n\nTriggered when a toolchain plugin has finished installing. If the install failed, the `error` field\nwill be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event.\nTools can be scoped with the `SetupToolchain(...)` labels.\n\n```\n{  \"type\": \"toolchain.installed\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"spec\": {      \"id\": \"node\",      \"req\": \"18.0.0\"    }  },  \"uuid\": \"...\"}\n```\n\n### `task.running`\n\nTriggered when a [task](/docs/concepts/task) has started to run (via [`moon run`](/docs/commands/run) or\nsimilar command).\n\n```\n{  \"type\": \"task.running\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"target\": \"app:build\"  },  \"uuid\": \"...\"}\n```\n\n### `task.ran`\n\nTriggered when a [task](/docs/concepts/task) has finished running. If the run failed, the `error` field\nwill be set with the error message.\n\nFor more information about the action, refer to the [`action.finished`](#actionfinished) event. Ran\ntasks can be scoped with the `RunTask(...)`, `RunInteractiveTask(...)`, and `RunPersistentTask(...)`\nlabels.\n\n```\n{  \"type\": \"task.ran\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null,    \"target\": \"app:build\"  },  \"uuid\": \"...\"}\n```\n\n### `workspace.syncing`\n\nTriggered when the workspace is being synced.\n\n```\n{  \"type\": \"workspace.syncing\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"target\": \"app:build\"  },  \"uuid\": \"...\"}\n```\n\n### `workspace.synced`\n\nTriggered when the workspace has finished syncing. If the action failed, the `error` field will be\nset with the error message.\n\n```\n{  \"type\": \"workspace.synced\",  \"createdAt\": \"...\",  \"environment\": \"...\",  \"event\": {    \"error\": null  },  \"uuid\": \"...\"}\n```\n\n## /docs/how-it-works\n\nSource: https://moonrepo.dev/docs/how-it-works\n\n- [Home](/)\n- [How it works](/docs/how-it-works)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# How it works\n\n[ LanguagesAlthough moon is currently focusing on the JavaScript ecosystem, our long-term vision is to be a](/docs/how-it-works/languages)\n\n[ Project graphThe project graph is a representation of all configured](/docs/how-it-works/project-graph)\n\n[ Task graphThe task graph is a representation of all configured](/docs/how-it-works/task-graph)\n\n[ Action graphWhen you run a task on the command line, we generate an action graph to](/docs/how-it-works/action-graph)\n\n[Install moon](/docs/install)\n\n[Languages](/docs/how-it-works/languages)\n\n## /docs/how-it-works/action-graph\n\nSource: https://moonrepo.dev/docs/how-it-works/action-graph\n\n# Action graph\n\nWhen you run a [task](/docs/config/project#tasks-1) on the command line, we generate an action graph to\nensure [dependencies](/docs/config/project#deps) of tasks have ran before running run the primary task.\n\nThe action graph is a representation of all [tasks](/docs/concepts/task), derived from the\n[project graph](/docs/how-it-works/project-graph) and [task graph](/docs/how-it-works/task-graph), and is also represented internally\nas a directed acyclic graph (DAG).\n\n## Actions\n\nUnlike other task runners in the industry that represent each node in the graph as a task to run, we\nrepresent each node in the graph as an action to perform. This allows us to be more flexible and\nefficient with how we run tasks, and allows us to provide more functionality and automation than\nother runners.\n\nThe following actions compose our action graph:\n\n### Sync workspace\n\nThis is a common action that always runs and give's moon a chance to perform operations and health\nchecks across the entire workspace.\n\ninfo\n\nThis action can be skipped by disabling the\n[`pipeline.syncWorkspace`](/docs/config/workspace#syncworkspace) setting.\n\n### Setup toolchain\n\nThe most important action in the graph is the setup toolchain action, which downloads and installs a\ntier 3 language into the toolchain. For other tiers, this is basically a no-operation.\n\n- When the tool has already been installed, this action will be skipped.\n\n- Actions will be scoped by language and version, also known as a runtime. For example, `SetupToolchain(node:18.1.0)` or `SetupToolchain(deno:1.31.0)`.\n\n- Tools that require a global binary (found on `PATH`) will display the version as \"global\". For example, `SetupToolchain(node:global)`.\n\ninfo\n\nThis action can be skipped by setting the `MOON_SKIP_SETUP_TOOLCHAIN=true` environment variable. The\nskip can be scoped per tool by setting the value to the tool name (`node`), and also by version\n(`node:20.0.0`). Supports a comma-separated list.\n\n### Setup environmentv1.35.0\n\nThis action runs after the toolchain has been setup, but before dependencies are installed, so that\nthe development environment can be setup and configured. This includes operations such as modifying\na manifest (`package.json`, etc), updating configuration files, initializing venv's (Python), so on\nand so forth.\n\n### Setup protov1.39.0\n\nThis action runs before all toolchain related actions and ensures that [proto](/proto) has been\ninstalled and is available for use. This is required for toolchains that will be downloaded and\ninstalled.\n\n### Install dependencies\n\nBefore we run a task, we ensure that all language dependencies (`node_modules` for example) have\nbeen installed, by automatically installing them if we detect changes since the last run. We achieve\nthis by comparing lockfile modified timestamps, parsing manifest files, and hashing resolved\ndependency versions.\n\n- When dependencies do not need to be installed, this action will be skipped.\n\n- Depending on the language and configuration, we may install dependencies in a project (`InstallProjectDeps`), or in the workspace root for all projects (`InstallWorkspaceDeps`).\n\n- Actions will be scoped by language and version, also known as a runtime. For example, `InstallWorkspaceDeps(node:18.1.0)` or `InstallProjectDeps(node:18.1.0, example)`.\n\ninfo\n\nThis action can be skipped by disabling the\n[`pipeline.installDependencies`](/docs/config/workspace#installdependencies) setting.\n\n### Sync project\n\nTo ensure a consistently healthy project and repository, we run a process known as syncing\neverytime a task is ran. This action will run sync operations for all toolchains associated with\nthe project.\n\ninfo\n\nThis action can be skipped by disabling the\n[`pipeline.syncProject`](/docs/config/workspace#syncproject) setting.\n\n### Run task\n\nThe primary action in the graph is the run [task](/docs/concepts/task) action, which runs a project's\ntask as a child process, derived from a [target](/docs/concepts/target). Tasks can depend on other\ntasks, and they'll be effectively orchestrated and executed by running in topological order using a\nthread pool.\n\n### Run interactive task\n\nLike the base run task, but runs the [task interactively](/docs/concepts/task#interactive) with stdin\ncapabilities. All interactive tasks are run in isolation in the graph.\n\n### Run persistent task\n\nLike the base run task, but runs the [task in a persistent process](/docs/concepts/task#persistent)\nthat never exits. All persistent tasks are run in parallel as the last batch in the graph.\n\n## What is the graph used for?\n\nWithout the action graph, tasks would not efficiently run, or possibly at all! The graph helps to\nrun tasks in parallel, in the correct order, and to ensure a reliable outcome.\n\n## /docs/how-it-works/languages\n\nSource: https://moonrepo.dev/docs/how-it-works/languages\n\n# Languages\n\nAlthough moon is currently focusing on the JavaScript ecosystem, our long-term vision is to be a\nmulti-language task runner and monorepo management tool. To that end, we've designed our languages\nto work like plugins, where their functionality is implemented in isolation, and is opt-in.\n\ninfo\n\nWe do not support third-party language plugins at this time, but are working towards it!\n\n## Enabling a language\n\nmoon [supported languages](/docs/#supported-languages) are opt-in, and are not enabled by default. We\nchose this pattern to avoid unnecessary overhead, especially for the future when we have 10 or more\nbuilt-in languages.\n\nTo enable a supported language, simply define a configuration block with the language's name in\n[`.moon/toolchains.yml`](/docs/config/toolchain). Even an empty block will enable the language.\n\n.moon/toolchains.yml\n\n```\n# Enable Node.jsnode: {}# Enable Node.js with custom settingsnode:  packageManager: 'pnpm'# Enable Denodeno: {}\n```\n\nFor unsupported languages, use the system toolchain. Continue reading to learn more!\n\n## System language and toolchain\n\nWhen working with moon, you'll most likely have tasks that run built-in system commands that do not\nbelong to any of the supported languages. For example, you may have a task that runs `git` or\n`docker` commands, or common commands like `rm`, `cp`, `mv`, etc.\n\nFor these cases, moon provides a special language/toolchain called `system`, that is always enabled.\nThis toolchain is a catch-all, an escape-hatch, a fallback, and provides the following:\n\n- Runs a system command or a binary found on `PATH`.\n\n- Wraps the execution in a shell.\n\nTo run system commands, set a task's [`toolchain`](/docs/config/project#toolchain) setting to \"system\".\n\nmoon.yml\n\n```\ntasks:  example:    command: 'git status'    toolchain: 'system'\n```\n\n## Tier structure and responsibilities\n\nAs mentioned in our introduction,\n[language support is divided up into tiers](/docs/#supported-languages), where each tier introduces\nmore internal integrations and automations, but requires more work to properly implement.\n\nInternally each tier maps to a Rust crate, as demonstrated by the graph at the top of the article.\n\n### Tier 0 = Unsupported\n\nThe zero tier represents all languages not directly supported by moon. This tier merely exists as\na mechanism for running non-supported language binaries via the\n[system toolchain](#system-language-and-toolchain).\n\nmoon.yml\n\n```\ntasks:  example:    command: 'ruby'    toolchain: 'system'\n```\n\n### Tier 1 = Language\n\nThe first tier is the language itself. This is the most basic level of support, and is the only tier\nthat is required to be implemented for a language to be considered minimally supported. This tier is\nin charge of:\n\n- Declaring metadata about the language. For example, the name of the binary, supported file extensions, available dependency/package/version managers, names of config/manifest/lock files, etc.\n\n- Helpers for parsing lockfiles and manifest files, and interacting with the language's ecosystem (for example, Node.js module resolution).\n\n- Mechanisms for detecting the language of a project based on config files and other criteria.\n\n- Maps to a project's [`language`](/docs/config/project#language) setting.\n\nmoon.yml\n\n```\nlanguage: 'javascript'\n```\n\n### Tier 2 = Platform\n\nThe second tier requires the language functionality from tier 1, and eventually the toolchain\nfunctionality from tier 3, and provides interoperability with moon's internals. This is the most\ncomplex of all tiers, and the tier is in charge of:\n\n- Determining when, where, and how to install dependencies for a project or the workspace.\n\n- Loading project aliases and inferring implicit relationships between projects.\n\n- Syncing a project and ensuring a healthy project state.\n\n- Hashing efficiently for dependency installs and target runs.\n\n- Prepending `PATH` with appropriate lookups to execute a task.\n\n- Running a target's command with proper arguments, environment variables, and flags.\n\n- Maps to a project's [`toolchain.default`](/docs/config/project#toolchain-1) or task's [`toolchain`](/docs/config/project#toolchain) setting.\n\n- Supports a configuration block by name in [`.moon/toolchains.yml`](/docs/config/toolchain).\n\nmoon.yml\n\n```\ntasks:  example:    command: 'webpack'    toolchain: 'node'\n```\n\n.moon/toolchains.yml\n\n```\nnode: {}\n```\n\n### Tier 3 = Toolchain\n\nThe third tier is toolchain support via [proto](/proto). This is the final tier, as the toolchain is\nunusable unless the platform has been entirely integrated, and as such, the platform depends on this\ntier. This tier handles:\n\n- Downloading and installing a language into the toolchain.\n\n- Installing and deduping project dependencies.\n\n- Detecting appropriate versions of tools to use.\n\n- Determining which binary to use and execute targets with.\n\n- Supports a `version` field in the named configuration block in [`.moon/toolchains.yml`](/docs/config/toolchain).\n\n.moon/toolchains.yml\n\n```\nnode:  version: '18.0.0'\n```\n\n## /docs/how-it-works/project-graph\n\nSource: https://moonrepo.dev/docs/how-it-works/project-graph\n\n# Project graph\n\nThe project graph is a representation of all configured\n[projects in the workspace](/docs/config/workspace#projects) and their relationships between each\nother, and is represented internally as a directed acyclic graph (DAG). Below is a visual\nrepresentation of a project graph, composed of multiple applications and libraries, where both\nproject types depend on libraries.\n\ninfo\n\nThe [`moon project-graph`](/docs/commands/project-graph) command can be used to view the structure of\nyour workspace.\n\n## Relationships\n\nA relationship is between a dependent (downstream project) and a dependency/requirement (upstream\nproject). Relationships are derived from source code and configuration files within the repository,\nand fall into 1 of 2 categories:\n\n### Explicit\n\nThese are dependencies that are explicitly defined in a project's [`moon.yml`](/docs/config/project)\nconfig file, using the [`dependsOn`](/docs/config/project#dependson) setting.\n\nmoon.yml\n\n```\ndependsOn:  - 'components'  - id: 'utils'    scope: 'peer'\n```\n\n### Implicit\n\nThese are dependencies that are implicitly discovered by moon when scanning the repository. How an\nimplicit dependency is discovered is based on a\n[language's platform integration](/docs/how-it-works/languages#tier-2--platform), and how that language's ecosystem\nfunctions.\n\npackage.json\n\n```\n{  // ...  \"dependencies\": {    \"@company/components\": \"workspace:*\"  },  \"peerDependencies\": {    \"@company/utils\": \"workspace:*\"  }}\n```\n\ncaution\n\nIf a language is not officially supported by moon, then implicit dependencies will not be\nresolved. For unsupported languages, you must explicitly configure dependencies.\n\n### Scopes\n\nEvery relationship is categorized into a scope that describes the type of relationship between the\nparent and child. Scopes are currently used for [project syncing](/docs/commands/sync) and deep Docker\nintegration.\n\n- Production - Dependency is required in production, will not be pruned in production environments, and will sync as a production dependency.\n\n- Development - Dependency is required in development and production, will be pruned from production environments, and will sync as a development-only dependency.\n\n- Build - Dependency is required for building only, and will sync as a build dependency.\n\n- Peer - Dependency is a peer requirement, with language specific semantics. Will sync as a peer dependency when applicable.\n\n## What is the graph used for?\n\nGreat question, the project graph is used throughout the codebase to accomplish a variety of\nfunctions, but mainly:\n\n- Is fed into the [task graph](/docs/how-it-works/task-graph) to determine relationships of tasks between other tasks, and across projects.\n\n- Powers our [Docker](/docs/guides/docker) layer caching and scaffolding implementations.\n\n- Utilized for [project syncing](/docs/commands/sync) to ensure a healthy repository state.\n\n- Determines affected projects in [continuous integration](/docs/guides/ci) workflows.\n\n## /docs/how-it-works/task-graph\n\nSource: https://moonrepo.dev/docs/how-it-works/task-graph\n\n# Task graph\n\nThe task graph is a representation of all configured\n[tasks in the workspace](/docs/config/workspace#projects) and their relationships between each other,\nand is represented internally as a directed acyclic graph (DAG). This graph is derived from\ninformation in the [project graph](/docs/how-it-works/project-graph). Below is a visual representation of a task\ngraph.\n\ninfo\n\nThe [`moon task-graph`](/docs/commands/task-graph) command can be used to view the structure of your\nworkspace.\n\n## Relationships\n\nA relationship is between a dependent (downstream task) and a dependency/requirement (upstream\ntask). Relationships are derived explicitly with the task [`deps`](/docs/config/project#deps) setting,\nand fall into 1 of 2 categories:\n\n### Required\n\nThese are dependencies that are required to run and complete with a success, before the owning task\ncan run. If a required dependency fails, then the owning task will abort.\n\n### Optional\n\nThe opposite of [required](#required), these are dependencies that can either a) not exist during\ntask inheritance, or b) run and fail without aborting the owning task.\n\n## What is the graph used for?\n\nGreat question, the task graph is extremely important for running tasks (duh), and it also:\n\n- Is fed into the [action graph](/docs/how-it-works/action-graph) that can be executed in topological order.\n\n- Determines affected tasks in [continuous integration](/docs/guides/ci) workflows.\n\n## /docs/install\n\nSource: https://moonrepo.dev/docs/install\n\n# Install moon\n\n2 min\n\nThe following guide can be used to install moon and integrate it into an existing repository (with\nor without incremental adoption), or to a fresh repository.\n\n## Installing\n\nThe entirety of moon is packaged and shipped as a single binary. It works on all major operating\nsystems, and does not require any external dependencies. For convenience, we provide the following\nscripts to download and install moon.\n\n### proto\n\nmoon can be installed and managed in [proto's toolchain](/proto). This will install moon to\n`~/.proto/tools/moon` and make the binary available at `~/.proto/bin`.\n\n```\nproto install moon\n```\n\nFurthermore, the version of moon can be pinned on a per-project basis using the\n[`.prototools` config file](/docs/proto/config).\n\n.prototools\n\n```\nmoon = \"1.31.0\"\n```\n\ninfo\n\nWe suggest using proto to manage moon (and other tools), as it allows for multiple versions to be\ninstalled and used. The other installation options only allow for a single version (typically the\nlast installed).\n\n### Linux, macOS, WSL\n\nIn a terminal that supports Bash, run:\n\n```\nbash\ninfo\n\nIf you are using Git Bash on Windows, you can run the [Unix commands](#linux-macos-wsl) above.\n\n### npm\n\nmoon is also packaged and shipped as a single binary through the\n[`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli) npm package. Begin by installing this\npackage at the root of the repository.\n\n- Yarn\n- Yarn (classic)\n- npm\n- pnpm\n- Bun\n\n```\nyarn add --dev @moonrepo/cli\n```\n\n```\nyarn add --dev @moonrepo/cli# If using workspacesyarn add --dev -W @moonrepo/cli\n```\n\n```\nnpm install --save-dev @moonrepo/cli\n```\n\n```\npnpm add --save-dev @moonrepo/cli# If using workspacespnpm add --save-dev -w @moonrepo/cli\n```\n\n```\nbun install --dev @moonrepo/cli\n```\n\nIf you are installing with Bun, you'll need to add `@moonrepo/cli` as a\n[trusted dependency](https://bun.sh/docs/install/lifecycle#trusteddependencies).\n\ninfo\n\nWhen a global `moon` binary is executed, and the `@moonrepo/cli` binary exists within the\nrepository, the npm package version will be executed instead. We do this because the npm package\ndenotes the exact version the repository is pinned it.\n\n### Other\n\nmoon can also be downloaded and installed manually, by downloading an asset from\n[https://github.com/moonrepo/moon/releases](https://github.com/moonrepo/moon/releases). Be sure to\nrename the file after downloading, and apply the executable bit (`chmod +x`) on macOS and Linux.\n\n## Upgrading\n\nIf using proto, moon can be upgraded using the following command:\n\n```\nproto install moon --pin\n```\n\nOtherwise, moon can be upgraded with the [`moon upgrade`](/docs/commands/upgrade) command. However, this\nwill only upgrade moon if it was installed in `~/.moon/bin`.\n\n```\nmoon upgrade\n```\n\nOtherwise, you can re-run the installers above and it will download, install, and overwrite with the\nlatest version.\n\n## Canary releases\n\nmoon supports canary releases, which are built and published for every commit to our development\nbranches. These releases will include features and functionality that have not yet landed on master.\nWhen using a canary release, you'll need to download and execute the binaries manually:\n\n- Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `canary` tag. Releases are versioned by date.\n\n- From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/canary) using the `canary` tag. This tag always represents the latest development release.\n\n## Nightly releases\n\nmoon supports nightly releases, which are built and published once a day from the latest commit on\nmaster. When using a nightly release, you'll need to download and execute the binaries manually.\n\n- Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `nightly` tag. Releases are versioned by date.\n\n- From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/nightly) using the `nightly` tag. This tag always represents the latest stable release.\n\n## Next steps\n\n[Setup workspace](/docs/setup-workspace)\n\n## /docs/migrate-to-moon\n\nSource: https://moonrepo.dev/docs/migrate-to-moon\n\n# Migrate to moon\n\nNow that we've talked about the workspace, projects, tasks, and more, we must talk about something\nimportant... Should you embrace moon tasks? Or keep using language/ecosystem specific scripts? Or\nboth (incremental adoption)?\n\n## Migrate to moon tasks\n\nWe suggest using moon tasks (of course), as they provide far more granular control and configurable\noptions than scripts, and a `moon.yml` is a better\n[source of truth](/docs/faq#what-should-be-considered-the-source-of-truth). Scripts aren't powerful\nenough to scale for large codebases.\n\nAn example of what this may look like can be found below. This may look like a lot, but it pays\ndividends in the long run.\n\n/moon.yml\n\n```\nlanguage: 'javascript'fileGroups:  sources:    - 'src/**/*'  tests:    - 'tests/**/*'tasks:  build:    command: 'webpack build --output-path @out(0)'    inputs:      - '@globs(sources)'      - 'webpack.config.js'    outputs:      - 'build'  dev:    command: 'webpack server'    inputs:      - '@globs(sources)'      - 'webpack.config.js'    preset: 'server'  format:    command: 'prettier --check .'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - '/prettier.config.js'  lint:    command: 'eslint .'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - '.eslintignore'      - '.eslintrc.js'      - '/.eslintrc.js'  test:    command: 'jest .'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - 'jest.config.js'  typecheck:    command: 'tsc --build'    inputs:      - '@globs(sources)'      - '@globs(tests)'      - 'tsconfig.json'      - '/tsconfig.json'\n```\n\n## Continue using scripts\n\nAs a frontend developer you're already familiar with the Node.js ecosystem, specifically around\ndefining and using `package.json` scripts, and you may not want to deviate from this. Don't worry,\nsimply enable the [`node.inferTasksFromScripts`](/docs/config/toolchain#infertasksfromscripts) setting\nto automatically create moon tasks from a project's scripts! These can then be ran with\n[`moon run`](/docs/commands/run).\n\nThis implementation is a simple abstraction that runs `npm run ` (or pnpm/yarn) in the\nproject directory as a child process. While this works, relying on `package.json` scripts incurs the\nfollowing risks and disadvantages:\n\n- [Inputs](/docs/config/project#inputs) default to `**/*`: A change to every project relative file will mark the task as affected, even those not necessary for the task. Granular input control is lost.\n\n- A change to workspace relative files will not mark the task as affected. For example, a change to `/prettier.config.js` would not be detected for a `npm run format` script.\n\n- [Outputs](/docs/config/project#outputs) default to an empty list unless: moon will attempt to extract outputs from arguments, by looking for variations of `--out`, `--outFile`, `--dist-dir`, etc.\n\n- If no output could be determined, builds will not be cached and hydrated.\n\n- Tasks will always [run in CI](/docs/config/project#runinci) unless: moon will attempt to determine invalid CI tasks by looking for popular command usage, for example: `webpack serve`, `next dev`, `--watch` usage, and more. This is not an exhaustive check.\n\n- The script name contains variations of `dev`, `start`, or `serve`.\n\n## Next steps\n\nBy this point, you should have a better understanding behind moon's fundamentals! Why not adopt\nincrementally next? Jump into [guides](/docs/guides/ci) for advanced use cases or [concepts](/docs/concepts)\nfor a deeper understanding.\n\n[Community help & support](https://discord.gg/qCh9MEynv2)[Releases & updates](https://twitter.com/tothemoonrepo)\n\n## /docs/migrate/2.0\n\nSource: https://moonrepo.dev/docs/migrate/2.0\n\n# Migrate to moon v2.0\n\nTo ease the migration process from moon v1 to v2, we've compiled a list of all breaking changes and\nimportant changes that you should be aware of. Please read through these carefully before upgrading\nyour workspace.\n\nTo automate some of the migration process, we've created the `moon migrate v2` command that will\nmigrate all applicable settings in configuration files.\n\n```\n$ moon migrate v2\n```\n\n## CLI\n\n- Removed `x86_64-apple-darwin` (Apple Intel) as a supported operating system. Only `aarch64-apple-darwin` (Apple Silicon) is now supported.\n\n### Commands\n\n- We've done a large polish pass for all commands, based on the [CLI guidelines](https://clig.dev).\n\n- Updated the `moonx` binary to use `moon exec` instead of `moon run` under the hood.\n\n- Renamed all options and flags to kebab-case instead of camelCase. Example: `--logLevel` -> `--log-level`\n\n- Renamed options for all commands: `--platform` -> `--toolchain`\n\n- Removed commands: `moon node`\n\n- `moon migrate from-package-json` (use the `migrate-turborepo` extension instead)\n\n- `moon query hash` (use `moon hash` instead)\n\n- `moon query hash-diff` (use `moon hash` instead)\n\n#### `moon action-graph`\n\n- Changed the output of `--json` to a new JSON structure (now matches the project and task graphs).\n\n#### `moon check`\n\n- Now runs `moon exec` under the hood, with some arguments/options pre-filled.\n\n- If the project ID is not specifed, it will no longer find the closest project. Instead you must pass `--closest`.\n\n- Renamed options: `--update-cache, -u` -> `--force, -f`\n\n#### `moon ci`\n\n- Now runs `moon exec` under the hood, with some arguments/options pre-filled.\n\n- Renamed options: `--update-cache, -u` -> `--force, -f`\n\n#### `moon generate`\n\n- Changed the destination from a positional argument, to the `--to` option. Example: `moon generate ./dist` -> `moon generate --to ./dist`\n\n#### `moon init`\n\n- Removed \"scaffolding a toolchain\" functionality from the command. Use the `moon toolchain add` command instead.\n\n- Removed options: `--to` (use a positional argument instead)\n\n#### `moon mcp`\n\n- Updated protocol version to 2025-11-25.\n\n- Updated the `get_projects` tool to no longer have an `includeTasks` option.\n\n- Updated the `get_projects` tool to return a list of project fragments, instead of the whole project object. This was required as the response was too large for MCP.\n\n- Updated the `get_tasks` tool to return a list of task fragments, instead of the whole task object. This was required as the response was too large for MCP.\n\n#### `moon query projects`\n\n- Removed options: `--dependents`\n\n#### `moon run`\n\n- Now runs `moon exec` under the hood, with some arguments/options pre-filled.\n\n- Updated options: `--dependents` now requires a value, either `deep` or `direct`\n\n- Renamed options: `--update-cache, -u` -> `--force, -f`\n\n- Removed options: `--no-bail` (use `moon exec` instead)\n\n- `--profile`\n\n- `--remote` (use `--affected remote` instead)\n\n#### `moon templates`\n\n- Changed the output to render a table instead of a list.\n\n#### `moon run`\n\n- Running a target without a scope no longer locates the closest project and instead uses the new default project feature. To run a target in the closets project, use `~:` scope instead. Example: `moon run build` -> `moon run ~:build`\n\n## Workspace\n\n### Configuration: `.moon/workspace.*`\n\n- Renamed setting values: `codeowners.orderBy` value `project-name` -> `project-id`\n\n- Renamed settings: `codeowners.syncOnRun` -> `codeowners.sync`\n\n- `constraints.enforceProjectTypeRelationships` -> `constraints.enforceLayerRelationships`\n\n- `docker.prune.installToolchainDeps` -> `docker.prune.installToolchainDependencies`\n\n- `docker.scaffold.include` -> `docker.scaffold.configsPhaseGlobs`\n\n- `runner` -> `pipeline`\n\n- `unstable_remote` -> `remote`\n\n- `vcs.manager` -> `vcs.client`\n\n- `vcs.syncHooks` -> `vcs.sync`\n\n- Removed settings: `docker.scaffold.copyToolchainFiles`\n\n- `experiments.*`\n\n- `hasher.batchSize`\n\n- `pipeline.archivableTargets`\n\n## Toolchains\n\n### Configuration: `.moon/toolchain.*`\n\n- This file was renamed to `.moon/toolchains.*` (plural) to reflect that multiple toolchains are configured. This also aligns with the new `.moon/extensions.*` file.\n\n- All toolchains have been stabilized, so the `unstable_` prefix must be removed from identifiers.\n\n#### JavaScript\n\nThe `bun`, `deno`, and `node` toolchains now require the `javascript` toolchain to be defined as\nwell. All shared settings have been moved to the `javascript` toolchain.\n\nIn addition, all `node` package managers are no longer nested under the `node` toolchain, but are\nnow top-level settings. These are only required when the `javascript.packageManager` setting is\ndefined.\n\n- Moved settings: `bun.dependencyVersionFormat` -> `javascript.dependencyVersionFormat`\n\n- `bun.inferTasksFromScripts` -> `javascript.inferTasksFromScripts`\n\n- `bun.rootPackageOnly` -> `javascript.rootPackageDependenciesOnly`\n\n- `bun.syncProjectWorkspaceDependencies` -> `javascript.syncProjectWorkspaceDependencies`\n\n- `node.dependencyVersionFormat` -> `javascript.dependencyVersionFormat`\n\n- `node.dedupeOnLockfileChange` -> `javascript.dedupeOnLockfileChange`\n\n- `node.inferTasksFromScripts` -> `javascript.inferTasksFromScripts`\n\n- `node.packageManager` -> `javascript.packageManager`\n\n- `node.rootPackageOnly` -> `javascript.rootPackageDependenciesOnly`\n\n- `node.syncPackageManagerField` -> `javascript.syncPackageManagerField`\n\n- `node.syncProjectWorkspaceDependencies` -> `javascript.syncProjectWorkspaceDependencies`\n\n- `node.bun` -> `bun`\n\n- `node.npm` -> `npm`\n\n- `node.pnpm` -> `pnpm`\n\n- `node.yarn` -> `yarn`\n\n- Renamed settings: `node.binExecArgs` -> `node.executeArgs`\n\n- Removed settings: `bun.packagesRoot`\n\n- `deno.depsFile`\n\n- `deno.lockfile`\n\n- `node.addEnginesConstraint`\n\n- `node.packagesRoot`\n\n.moon/toolchains.yml\n\n```\n# Beforenode:  version: '22.14.0'  packageManager: 'yarn'  inferTasksFromScripts: false  syncPackageManagerField: true  syncProjectWorkspaceDependencies: true  yarn:    version: '4.8.0'# Afterjavascript:  packageManager: 'yarn'  inferTasksFromScripts: false  syncPackageManagerField: true  syncProjectWorkspaceDependencies: truenode:  version: '22.14.0'yarn:  version: '4.8.0'\n```\n\n## Extensions\n\n### Configuration: `.moon/extensions.*`\n\n- The `extensions` setting from `.moon/workspace.*` has been moved (and flattened) to its own file, `.moon/extensions.*`.\n\n- The built-in extensions `download`, `migrate-nx`, and `migrate-turborepo` must now be enabled in the configuration file before they can be used. Simply set an empty object. This change was made to reduce the number of extensions that are loaded by default, improving performance.\n\n.moon/extensions.yml\n\n```\ndownload: {}migrate-nx: {}\n```\n\n## Project\n\n### Configuration: `moon.*`\n\n- Renamed settings: `docker.scaffold.include` -> `docker.scaffold.sourcesPhaseGlobs`\n\n- `project.name` -> `project.title`\n\n- `type` -> `layer`\n\n- `toolchain` -> `toolchains`\n\n- `platform` -> `toolchains.default`\n\n- Removed settings: [`project.metadata`](#custom-metadata)\n\n- [`toolchain.*.disabled`](#toolchain-disabling)\n\n### Language detection\n\nThe primary `language` is now detected from toolchains, instead of being a hardcoded implementation.\nThe result may now differ, as the first toolchain in the list will be used. Additionally, languages\nthat don't have a toolchain yet, like PHP or Ruby, will not be detected and must be explicitly\nconfigured.\n\nmoon.yml\n\n```\n# Afterlanguage: 'ruby'\n```\n\n### Custom metadata\n\nThe `project.metadata` setting has been removed, but all custom metadata fields can now be defined\nat the root of the `project` setting.\n\nmoon.yml\n\n```\n# Beforeproject:  metadata:    customField: 'value'# Afterproject:  customField: 'value'\n```\n\n### Toolchain disabling\n\nThe `toolchain.*.disabled` setting was removed. Instead set the toolchain itself to null/false.\n\nmoon.yml\n\n```\n# Beforetoolchain:  typescript:    disabled: true# Aftertoolchains:  typescript: null\n```\n\n## Tasks\n\n### Configuration: `moon.*`, `.moon/tasks`\n\n- The file `.moon/tasks.yml` has been removed. If you want to support tasks that are inherited by all projects, then move this to `.moon/tasks/all.yml` and do not configure the new `inheritedBy` setting.\n\n- Renamed tokens: `$projectName` -> `$projectTitle`\n\n- `$projectType` -> `$projectLayer`\n\n- `$taskPlatform` -> `$taskToolchain`\n\n- Renamed settings: [`tasks.*.local`](#local-mode) -> `tasks.*.preset` using `server` value\n\n- `tasks.*.platform` -> `tasks.*.toolchains`\n\n- `tasks.*.options.affectedPassInputs` -> `tasks.*.options.affectedFiles.passInputsWhenNoMatch`\n\n- Removed setting values: `tasks.*.preset` value `watcher`\n\n- Changed settings: `tasks.deps.*.args` no longer supports a string. Use a list of strings instead.\n\n- `tasks.*.options.affectedFiles` now supports an object for more granular control.\n\n- Changed option defaults: `tasks.*.options.envFile` now defaults to a list of files, instead of a single file, when `true`. Refer to the blog post for more information.\n\n- `tasks.*.options.inferInputs` now defaults to `false` instead of `true`.\n\n- `tasks.*.options.shell` now defaults to `true` instead of `false`.\n\n- `tasks.*.options.unixShell` now defaults to `bash` instead of nothing.\n\n- `tasks.*.options.windowsShell` now defaults to `pwsh` instead of nothing.\n\n### Simple commands only\n\nWe've reworked `command` (and `args`) to only support simple commands. A simple command is an\nexecutable (binary, file, etc) followed by zero or many arguments.\n\nComplex commands that involve shell features like piping (`|`), redirection (`>`, `\n\nShell features like expansion, globbing, and substitution is still supported in `command`.\n\n### Local mode\n\nThe `local` task setting has been removed as the name was confusing. Users assumed it meant \"only\nrun locally\", but it actually meant \"this is a persistent server that should only run locally\".\nInstead, use the `preset` setting with a value of `server`.\n\nmoon.yml\n\n```\n# Beforetasks:  dev:    command: 'start-dev'    local: true# Beforetasks:  dev:    command: 'start-dev'    preset: 'server'\n```\n\nIf you want a task that is simply \"local only\" without other options changes, use `options.runInCI`\ndirectly.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev'    options:      runInCI: false\n```\n\n### Shells by default\n\nTasks now run in a shell by default, and will use Bash on Unix (`options.unixShell`), and pwsh on\nWindows (`options.windowsShell`). You can disable this behavior by setting `options.shell` to\n`false`.\n\nmoon.yml\n\n```\ntasks:  dev:    command: 'start-dev'    options:      shell: false\n```\n\n### Env var substitution behavior\n\nThe syntax and behavior for substituting (expanding/interpolation) environment variables has\nchanged, to better align with the standard of `.env` files. The biggest change is that flagless\ntokens (`$VAR`) and `?` flag tokens (`$VAR?`) swapped functionality. Refer to the following table:\n\nSyntax v1 v2\n\n`$VAR` Substitute with variable syntax (`$VAR`) if variable empty  Substitute with empty string if variable empty\n\n`$VAR!` Don't substitute and keep variable syntax (`$VAR`)  Removed syntax\n\n`$VAR?` Substitute with empty string if variable empty  Removed syntax\n\n`${VAR}` Substitute with variable syntax (`$VAR`) if variable empty  Substitute with empty string if variable empty\n\n`${VAR!}` Don't substitute and keep variable syntax (`$VAR`) ~\n\n`${VAR?}` Substitute with empty string if variable empty  Substitute with variable syntax (`$VAR`) if variable empty\n\n`${VAR:default}` Use default value if variable empty ~\n\n`${VAR:-default}`, `${VAR-default}`  Not supported Use default value if variable empty\n\n`${VAR:+alternate}`, `${VAR+alternate}`  Not supported Use alternate value if variable non-empty\n\nLegend:\n\n- `~` indicates the syntax/functionality is the same as v1\n\n- `` indicates breaking change\n\n- `` indicates not supported\n\n### Env var precedence\n\nThe order of precedence for environment variables has slightly changed when running tasks, as it was\nconfusing to users. The new order of precedence is as follows, from lowest to highest tier, with the\nlatter overwriting the former:\n\n- Task `.env` files via `options.envFile`\n\n- Task env variables via `env` or `deps.*.env`\n\n- System variables via profile scripts (`.bashrc`, `.zshrc`, etc)\n\n- via command line: `KEY=value moon ...`\n\nIn regards to variable substitution, each tier can reference variables within the same tier, or the\nhigher tier(s), but not from lower tier(s). This is because variables are processed in reverse\norder. Refer to the following table:\n\nTier Can reference Evaluated during\n\nDotenv Dotenv, Task, System Before task execution\n\nTask Task, System After task creation\n\nSystem System CLI startup\n\nIf you don't want to inherit a system variable, you can override it in the task with a null value.\n\n```\ntasks:  dev:    env:      EXAMPLE: null\n```\n\n### Deferred `.env` files\n\nIn v1, when `options.envFile` was enabled, the `.env` file(s) were loaded at the time of task\ncreation, during the building of project/task graphs. This meant that if the `.env` file changed\nbetween the time of graph creation and task execution, the changes would not be reflected.\n\nIn v2 and later, `.env` files are loaded just before task execution, ensuring that any changes to\nthe file are picked up.\n\ncaution\n\nBecause of this change, task `env` variables will continue to override `.env` file variables, BUT\ncan no longer reference them for substitution. This is because the `.env` files are loaded later in\nthe process.\n\n### Other changes\n\n- When `options.affectedFiles` is enabled, the list of files will be joined with the OS path separator (`:` on Unix, `;` on Windows) instead of a comma (`,`) when passed as the `MOON_AFFECTED_FILES` environment variable.\n\n## Task inheritance\n\n### Deep merged instead of shallow merged\n\nIn v1, when inheriting tasks, all global configs (those in `.moon`) were shallow merged into a\nsingle config ignoring merge task options, and then merged with the local config (`moon.*`) using\nmerge task options. This was not intuitive, as users expected all configs to be merged in sequence.\nTo demonstrate this, take the following example configs, in order of inherited:\n\n```\n# .moon/tasks.ymltasks:  build:    command: 'build --cache'    options:      mutex: 'build'# .moon/tasks/tag-a.ymltasks:  build:    args: '--force'# .moon/tasks/tag-b.ymltasks:  build:    args: '--clean'\n```\n\nUsers would expect the final `build` task to be `build --cache --force --clean` with the mutex\noption set. However, since the `tasks` setting was shallow merged, only the last config (`tag-b`)\nwould be used, resulting in the task being `noop --clean` without the mutex. The `noop` pops up\nbecause the `command` setting was not configured in the last config.\n\nTo remedy this, and to improve task composition overall, global configs are no longer shallow merged\ninto a single config before merging with the local config. Instead, all configs are merged in\nsequence, while respecting the task merge options. This is the order of operations for the new\nsystem:\n\n- Load all global configs (`.moon`) into a list, in order, based on the `inheritedBy` setting.\n\n- Load the local config (`moon.*`).\n\n- Create an inheritance chain by resolving global configs first, then the local config last, while respecting `extend` and other composition settings.\n\n- Merge all task options in order, to create the final task options.\n\n- Merge all tasks in order, using the final task options to guide the merging behavior.\n\n### File groups are merged\n\nBecause of the new deep merging behavior, file groups defined in inherited configs are now merged\ntogether, instead of being replaced by the following config in the sequence. For example, given the\nconfigs:\n\n```\n# .moon/tasks/tag-a.ymlfileGroups:  sources:    - 'src/**'# .moon/tasks/tag-b.ymlfileGroups:  sources:    - 'docs/**'\n```\n\nIn v1, the final `sources` file group would only include `docs/**`, as the second config would\nreplace the first. In v2, the final `sources` file group includes both `src/**` and `docs/**`.\n\n## VCS\n\n### New hooks system\n\nWe've rewritten our Git hooks from the ground up to be based around the `core.hooksPath` setting.\nThe following changes have been made:\n\n- We no longer write hooks to the `.git/hooks` directory.\n\n- Instead, all hooks are written to `.moon/hooks` and Git is configured to use this directory.\n\n- Bash scripts no longer end in `.sh`.\n\ncaution\n\nWe currently don't have an easy way to clean the previous implementation of hooks. You may need to\nmanually remove the old scripts from `.git/hooks` and `.moon/hooks` if they are causing issues.\n\n## Other changes\n\n### Changed (touched) files\n\nWe renamed the terminology \"touched files\" to \"changed files\" throughout the codebase and\ndocumentation. This better aligns with common VCS terminology and reduces confusion. Because of\nthis, the following changes were made:\n\n- Renamed the `moon query touched-files` CLI command to `moon query changed-files`.\n\n- Renamed the `get_touched_files` MCP tool to `get_changed_files`.\n\n- Renamed the `touchedFiles` run report field to `changedFiles`.\n\n```\n# Before$ moon query touched-files# After$ moon query changed-files\n```\n\n### Docker\n\n- The scaffolded `.moon/docker/workspace` directory was renamed to `.moon/docker/configs`.\n\n- The `moon docker file` command will now loop through all toolchains and use the first image found, otherwise it defaults to \"scratch\". If you want to be explicit, set the `docker.file.image` setting.\n\n### Query language (MQL)\n\n- Renamed fields: `projectName` -> `projectId`\n\n- `projectType` -> `projectLayer`\n\n- `taskPlatform` -> `taskToolchain`\n\n```\n# BeforeprojectType=application && taskPlatform=node# AfterprojectLayer=application && taskToolchain=node\n```\n\n### Webhooks\n\n- Removed the `tool.*` events. Use `toolchain.*` events instead.\n\n- Removed the `runtime` field from `dependencies.*` events. Use the `toolchain` field instead.\n\n## /docs/proto\n\nSource: https://moonrepo.dev/docs/proto\n\n# What is proto?\n\n3 min\n\nproto is a pluggable version manager, a unified toolchain.\n\nIf you're unfamiliar with the concept of a toolchain, a toolchain is a collection of tools that are\ndownloaded, installed, and managed by version through a single interface. In the context of proto's\ntoolchain, a tool is either a programming language, a dependency/package manager for a language, or\na custom implementation provided by a plugin. It's the next step in the version manager evolution.\n\n## Features\n\n- Lightspeed! With Rust and WASM, we can guarantee exceptional performance.\n\n- Multi-language. A single CLI for managing versions for all of your languages.\n\n- Cross-platform, for a consistent experience across machines and teams.\n\n- [Contextual version detection](/docs/proto/detection), ensuring the correct version of a tool is always used.\n\n- Checksum verification, ensuring a tool came from a trusted source.\n\n- Detects and infers from a language's ecosystem for maximum compatibility.\n\n- [Pluggable architecture](/docs/proto/plugins), allowing for custom tooling.\n\n## Why proto?\n\nproto was designed to be a modern and holistic version manager for all of your favorite programming\nlanguages. We believe a single tool that works the same across every language is better than\nmultiple ad-hoc tools. While we only support a handful of languages today, we aim to support many\nmore in the future!\n\nsuccess\n\nproto powers [moon](/moon)'s toolchain, enabling a single source of truth for both tools!\n\n## How does it work?\n\nThe toolchain is a `.proto` directory within the current user's home directory, e.g., `~/.proto`.\n\nThe first step in a tool's life-cycle is being downloaded to `~/.proto/temp`. Downloads are\ntypically an archive that can be unpacked into a target directory. Once downloaded, we verify the\ndownloaded file by running a checksum. If this check fails for any reason, the tool is unusable,\nand the process is aborted.\n\nAfter a successful verification, the last step in the tool's life-cycle can begin, installation.\nDepending on the type of download, the installation process may differ. For archives, we unpack the\ntool to `~/.proto/tools//`. In the future, we'll support building from source.\n\nFrom here, we make these tools globally available by prepending `~/.proto/shims` and `~/.proto/bin`\nto `PATH` (typically as part of your shell profile). Continue reading for more about these folders.\n\n## Supported tools\n\nThe following tools are [officially supported](/docs/proto/tools) in proto via moonrepo. Additional\ntools can be supported through [third-party plugins](/docs/proto/plugins).\n\n+ npm, pnpm, yarn\n\n+ pip, poetry, uv\n\n... with [0 more proto plugins](/docs/proto/tools#third-party), and over [800 asdf plugins](/docs/proto/tool-spec#asdf)...\n\n## Supported targets\n\nBecause proto is written in Rust, we only support targets that are explicitly compiled for, which\nare currently:\n\nOperating system Architecture Target\n\nmacOS 64-bit Intel `x86_64-apple-darwin`\n\nmacOS 64-bit ARM `aarch64-apple-darwin`\n\nLinux 64-bit Intel GNU `x86_64-unknown-linux-gnu`\n\nLinux 64-bit Intel musl `x86_64-unknown-linux-musl`\n\nLinux 64-bit ARM GNU `aarch64-unknown-linux-gnu`\n\nLinux 64-bit ARM musl `aarch64-unknown-linux-musl`\n\nWindows 64-bit Intel `x86_64-pc-windows-msvc`\n\n## /docs/proto/commands/activate\n\nSource: https://moonrepo.dev/docs/proto/commands/activate\n\n# activate\n\nv0.38.0\n\nThe `proto activate ` command will activate proto for the current shell session, by exporting\nenvironment variables and prepending `PATH` for each tool configured in the current directory.\nActivation is ran each time the current directory changes using a shell hook.\n\ninfo\n\nLearn more about\n[shell activation in the official workflow documentation](/docs/proto/workflows#shell-activation)!\n\n### Arguments\n\n- `` - The shell to activate for.\n\n### Options\n\n- `--export` - Print the activate instructions in shell-specific syntax.\n\n- `--json` - Print the activate instructions in JSON format.\n\n- `--no-bin` - Do not include `~/.proto/bin` when appending `PATH`.\n\n- `--no-shim` - Do not include `~/.proto/shims` when prepending `PATH`.\n\n- `--no-init` - Do not trigger activation when initialized in the shell, and instead wait for a cd/prompt change. v0.50.0\n\n### Caveats\n\n- Only tools that have a [version configured in `.prototools`](/docs/proto/config#pinning-versions) will be activated.\n\n- Tool versions configured in the global `~/.proto/.prototools` are not included by default. Pass `--config-mode all` during activation to include them. Do note that this will worsen performance depending on the number of tools.\n\n### Setup\n\nThe following activation steps should be added after all environment variable and `PATH`\nmodifications have happened in your shell, typically at the end of your shell profile.\n\n#### Bash\n\nAdd the following line to the end of your `~/.bashrc` or `~/.bash_profile`.\n\n```\neval \"$(proto activate bash)\"\n```\n\n#### Elvish\n\nGenerate the hook:\n\n```\nproto activate elvish > ~/.elvish/lib/proto-hook.elv\n```\n\nThen add the following line to your `~/.elvish/rc.elv` file.\n\n```\nuse proto-hook\n```\n\n#### Fish\n\nAdd the following line to the end of your `~/.config/fish/config.fish`.\n\n```\nproto activate fish | source\n```\n\n#### Murex\n\nAdd the following line to the end of your `~/.murex_profile`.\n\n```\nproto activate murex -> source\n```\n\n#### Nu\n\nGenerate the hook:\n\n```\n(proto activate nu) | save ~/.config/nushell/proto-hook.nu\n```\n\nThen add the following line to your `~/.config/nushell/config.nu` file.\n\n```\nuse proto-hook.nu\n```\n\n#### Pwsh\n\nAdd the following line to the end of your profile (`$PROFILE`).\n\n```\nproto activate pwsh | Out-String | Invoke-Expression\n```\n\n#### Zsh\n\nAdd the following line to the end of your `~/.zshrc`.\n\n```\neval \"$(proto activate zsh)\"\n```\n\n## /docs/proto/commands/alias\n\nSource: https://moonrepo.dev/docs/proto/commands/alias\n\n# alias\n\nThe `proto alias   ` (or `proto a`) command will define a custom alias that\nmaps to a specific version for the provided tool. Aliases can be used anywhere a version is\naccepted.\n\n```\n$ proto alias node work 16.16\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--to` to customize\nthe location.\n\n### Arguments\n\n- `` - Type of tool.\n\n- `` - Name of the alias. Supports alphanumeric chars.\n\n- `` - Version to map to the alias.\n\n## Options\n\n- `--to` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n## /docs/proto/commands/bin\n\nSource: https://moonrepo.dev/docs/proto/commands/bin\n\n# bin\n\nThe `proto bin  [version]` command will return an absolute path to a tool's binary within the\ntoolchain. When a tool has not been installed, or a version cannot be resolved, the command will\nexit with a failure.\n\n```\n$ proto bin node 16.10.0/Users/example/.proto/tools/node/16.10.0/bin/node\n```\n\nThis command can also return directories using the `--dir` option.\n\n```\n$ proto bin node 16.10.0 --dir exes/Users/example/.proto/tools/node/16.10.0/bin$ proto bin node 16.10.0 --dir globals/Users/example/.proto/tools/node/globals/bin\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n- `[version]` - Version of tool. If not provided, will attempt to [detect the version](/docs/proto/detection).\n\n### Options\n\n- `--all` - Return multiple paths, separated by newlines, instead of the first path. v0.50.0\n\n- `--dir ` - Return a directory instead of of the main file. v0.50.0 `exes` - Returns the executable's directory.\n\n- `globals` - Returns the globals/packages directory.\n\n- `--bin` - When applicable, return the `~/.proto/bin` path.\n\n- `--shim` - When applicable, return the `~/.proto/shims` path.\n\n## /docs/proto/commands/clean\n\nSource: https://moonrepo.dev/docs/proto/commands/clean\n\n# clean\n\nThe `proto clean` command can be used to uninstall stale and unused tools, plugins, and more. By\ndefault, it will remove items that haven't been used in the last 30 days.\n\n```\n$ proto clean\n```\n\nFurthermore, the command can be used to target a specific artifact type.\n\n```\n$ proto clean plugins\n```\n\n### Arguments\n\n- `[target]` - Type of target. Accepts `cache`, `plugins`, `temp`, or `tools`. v0.44.0\n\n### Options\n\n- `--days` - Number of days before a tool is considered stale.\n\n- `--json` - Print the clean result in JSON format. v0.44.0\n\n- `--yes` - Avoid and confirm all prompts.\n\n## /docs/proto/commands/completions\n\nSource: https://moonrepo.dev/docs/proto/commands/completions\n\n# completions\n\nThe `proto completions` command will generate proto command and argument completions for your\ncurrent shell. This command will write to stdout, which can then be redirected to a file of your\nchoice.\n\n```\n$ proto completions > ./path/to/write/to\n```\n\n### Options\n\n- `--shell` - Shell to explicitly generate for.\n\n### Examples\n\n- Bash\n- Fish\n- Zsh\n\nIf using [bash-completion](https://github.com/scop/bash-completion).\n\n```\nmkdir -p ~/.bash_completion.dproto completions > ~/.bash_completion.d/proto.sh\n```\n\nOtherwise write the file to a common location, and source it in your profile.\n\n```\nmkdir -p ~/.bash_completionsproto completions > ~/.bash_completions/proto.sh# In your profilesource ~/.bash_completions/proto.sh\n```\n\nWrite the file to Fish's completions directory.\n\n```\nmkdir -p ~/.config/fish/completionsproto completions > ~/.config/fish/completions/proto.fish\n```\n\nIf using [oh-my-zsh](https://ohmyz.sh/) (the `_` prefix is required).\n\n```\nmkdir -p ~/.oh-my-zsh/completionsproto completions > ~/.oh-my-zsh/completions/_proto# Reload shell (or restart terminal)omz reload\n```\n\n## /docs/proto/commands/debug\n\nSource: https://moonrepo.dev/docs/proto/commands/debug\n\n- [Home](/)\n- Commands\n- [debug](/docs/proto/commands/debug)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# debug\n\nOperations for debugging the current proto environment.\n\n[ configThe proto debug config command will list all .prototools configuration files (in TOML format)](/docs/proto/commands/debug/config)\n\n[ envThe proto debug env command will print information about your current proto environment. Primarily](/docs/proto/commands/debug/env)\n\n[completions](/docs/proto/commands/completions)\n\n[config](/docs/proto/commands/debug/config)\n\n## /docs/proto/commands/debug/config\n\nSource: https://moonrepo.dev/docs/proto/commands/debug/config\n\n# debug config\n\nv0.25.0\n\nThe `proto debug config` command will list all `.prototools` configuration files (in TOML format)\nthat have been loaded, in order of precedence, with the final merged configuration printed at the\nend.\n\n```\n$ proto debug config/Users/name/.proto/.prototools   node = \"20.0.0\"  npm = \"bundled\"  [tools.node.aliases]  stable = \"~20\"  [settings]  auto-clean = falseFinal configuration   node = \"20.0.0\"  npm = \"bundled\"  [tools.node.aliases]  stable = \"~20\"  [plugins.tools]  node = \"https://github.com/moonrepo/node-plugin/releases/download/v0.6.1/node_plugin.wasm\"  [settings]  auto-clean = false  auto-install = false  detect-strategy = \"first-available\"  [settings.http]  allow-invalid-certs = false  proxies = []\n```\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n## /docs/proto/commands/debug/env\n\nSource: https://moonrepo.dev/docs/proto/commands/debug/env\n\n# debug env\n\nv0.26.0\n\nThe `proto debug env` command will print information about your current proto environment. Primarily\nthe store location, relevant file paths, and environment variables.\n\n```\n$ proto debug envStore   Root: /Users/name/.proto  Bins: /Users/name/.proto/bin  Shims: /Users/name/.proto/shims  Plugins: /Users/name/.proto/plugins  Tools: /Users/name/.proto/tools  Temp: /Users/name/.proto/tempEnvironment   Proto version: 0.44.0  Operating system: macos  Architecture: arm64  Config sources:    - /Users/name/Projects/example/.prototools    - /Users/name/.proto/.prototools  Virtual paths:    /userhome = /Users/name    /proto = /Users/name/.proto  Environment variables:    PROTO_APP_LOG = proto=info,schematic=info,starbase=info,warpgate=info,extism::pdk=info    PROTO_HOME = /Users/name/.proto    PROTO_OFFLINE_TIMEOUT = 750    PROTO_VERSION = 0.44.0\n```\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n## /docs/proto/commands/diagnose\n\nSource: https://moonrepo.dev/docs/proto/commands/diagnose\n\n# diagnose\n\nv0.37.0\n\nThe `proto diagnose` command will diagnose your proto installation for any potential issues. Issues\nare categorized into errors and warnings, with the former being a must fix, and the latter being a\nmaybe fix (depending on your usage of proto).\n\n```\n$ proto diagnoseShell: zshShell profile: /Users/name/.zshrcErrors   - Issue: Bin directory /Users/name/.proto/bin was found BEFORE the shims directory /Users/name/.proto/shims on PATH    Resolution: Ensure the shims path comes before the bin path in your shell    Comment: Runtime version detection will not work correctly unless shims are used\n```\n\n### Options\n\n- `--shell` - The shell to diagnose (will detect automatically).\n\n- `--json` - Print the diagnosis in JSON format.\n\n## /docs/proto/commands/exec\n\nSource: https://moonrepo.dev/docs/proto/commands/exec\n\n# exec\n\nv0.53.0\n\nThe `proto exec  -- ` (or `proto x`) command will activate a temporary\nenvironment by loading and initializing any number of tools, and then execute an arbitrary command\nwithin that environment.\n\n```\n$ proto exec node pnpm -- pnpm run dev\n```\n\nTools will automatically detect a version to execute with based on loaded `.prototools`, but the\nversion can be provided inline by suffixing the tool with `@`.\n\n```\n$ proto exec node@24.2 pnpm@10 -- pnpm run dev\n```\n\n### Shell support\n\nBy default, the command will not be executed in a shell, and will be excuted in the context of the\nparent process. If you want to execute the command within a shell (using `-c`), you can use the\n`--shell` option.\n\n```\n$ proto exec node pnpm --shell bash --\n```\n\nIf your command contains special characters, complex expressions, or shell specific syntax, you may\nneed to pass `--raw` to avoid quoting/escaping issues.\n\n```\n$ proto exec node pnpm --shell bash --raw --\n```\n\nFurthermore, if you want to launch an interactive shell session with the activated environment, you\ncan pass the shell command itself as the exec command.\n\n```\n$ proto exec node pnpm -- bash\n```\n\n### Arguments\n\n- `` - List of tool identifiers with optional version.\n\n- `` - Command to execute within the environment. Must be passed after a `--` separator.\n\n### Options\n\n- `--tools-from-config` - Inherit tools to initialize from `.prototools` configs, instead of passing an explicit list.\n\n- `--raw` - Execute the command as-is without quoting or escaping when using `--shell`.\n\n- `--shell` - Shell to execute the command with (e.g. `bash` or `pwsh`).\n\n## /docs/proto/commands/install\n\nSource: https://moonrepo.dev/docs/proto/commands/install\n\n# install\n\nThe `proto install` (or `proto i`) command can be used to install one or many tools.\n\n### Installing all toolsv0.39.0\n\nThe `proto install` command (without arguments) will download and install all tools and plugins\nfrom all parent [`.prototools`](/docs/proto/config) configuration files, and any\n[versions detected](/docs/proto/detection) in the current working directory (if not defined in\n`.prototools`).\n\n```\n$ proto install\n```\n\nBy default, this command does not install tools for versions pinned in the global\n`~/.proto/.prototools` file. Pass `--config-mode all` to include them.\n\n### Installing one tool\n\nThe `proto install  [version]` command will download and install a single tool by unpacking\ntheir archive to `~/.proto/tools/`. If the tool has already been installed, the command will\nexit early.\n\nThe command is also smart enough to resolve partial versions, so 1, 1.2, and 1.2.3 are all\nacceptable. It even supports aliases when applicable, like `latest`, `next`, `beta`, etc. To install\na canary release, use `canary`.\n\n```\n$ proto install deno$ proto install deno 1.31$ proto install deno canary\n```\n\n#### Pinning the version\n\nBy default this command will only install the tool into `~/.proto/tools` but will not make the\nbinary available. If you would like to also pin the resolved version to a `.prototools` file, use\nthe `--pin` option.\n\n```\n# ./.prototools$ proto install bun --pin$ proto install bun --pin local# ~/.proto/.prototools$ proto install bun --pin global# ~/.prototools$ proto install bun --pin user\n```\n\n### Handling plugin hooks\n\nSome tools run [post-install hooks](/docs/proto/tools) that support arbitrary arguments that can be passed\nafter `--`.\n\n```\n$ proto install go -- --no-gobin\n```\n\n### Arguments\n\n- One tool `[tool]` - Type of tool.\n\n- `[version]` - Version of tool. Defaults to a pinned version in `.prototools` or \"latest\".\n\n- `[-- ]` - Additional arguments to pass to post-install hooks.\n\n### Options\n\n- `--force` - Force install, even if already installed.\n\n- `--update-lockfile` - Don't inherit a version from the lockfile and update the existing record. v0.51.0\n\n- One tool `--build` - Build from source if available. v0.45.0\n\n- `--no-build` - Download a pre-built if available. v0.45.0\n\n- `--pin` - Pin the resolved version and create a symlink in `~/.proto/bin`. Accepts a boolean (pins locally by default), or the string \"global\", or the string \"local\".\n\n## /docs/proto/commands/list\n\nSource: https://moonrepo.dev/docs/proto/commands/list\n\n# list\n\ndanger\n\nThis command was removed in v0.44, use [`proto versions`](/docs/proto/commands/versions) instead!\n\nThe `proto list ` (or `proto ls`) command will list installed versions by scanning the\nmanifest at `~/.proto/tools//manifest.json` for possible versions.\n\n```\n$ proto list node16.16.018.2.019.4.0\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--aliases` - Include aliases in the list.\n\n## /docs/proto/commands/list-remote\n\nSource: https://moonrepo.dev/docs/proto/commands/list-remote\n\n# list-remote\n\ndanger\n\nThis command was removed in v0.44, use [`proto versions`](/docs/proto/commands/versions) instead!\n\nThe `proto list-remote ` (or `proto lsr`) command will list available versions by resolving\nversions from the tool's remote release manifest.\n\n```\n$ proto list-remote node...18.10.018.11.018.12.018.12.118.13.018.14.018.14.118.14.219.0.019.0.119.1.019.2.019.3.019.4.019.5.019.6.019.6.119.7.0\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--aliases` - Include aliases in the list.\n\n## /docs/proto/commands/outdated\n\nSource: https://moonrepo.dev/docs/proto/commands/outdated\n\n# outdated\n\nv0.19.0\n\nThe `proto outdated` command will load all [`.prototools`](/docs/proto/config) files and check for newer\n(matching configured range) and latest versions of each configured tool. Will also include the\nconfiguration file in which the version has been configured.\n\n```\n$ proto outdated Tool      Current Newest  Latest  Config                               bun       1.1.42  1.1.42  1.1.42  /Users/name/.proto/.prototools       node      23.5.0  23.5.0  23.5.0  /Users/name/.proto/.prototools       npm       10.7.0  10.7.0  11.0.0  /Users/name/.proto/.prototools       rust      1.83.0  1.83.0  1.83.0  /Users/name/.proto/.prototools       yarn      3.6.3   3.8.7   4.5.1   /Users/name/.proto/.prototools      \n```\n\nBy default, this command does not check tools for versions pinned in the global\n`~/.proto/.prototools` file. Pass `--config-mode all` to include them.\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n- `--latest` - When updating versions with `--update`, use the latest version instead of newest.\n\n- `--update` - Update and write newest/latest versions to their respective configuration.\n\n- `--yes` - Avoid and confirm all prompts. v0.44.0\n\n## /docs/proto/commands/pin\n\nSource: https://moonrepo.dev/docs/proto/commands/pin\n\n# pin\n\nv0.19.0\n\nThe `proto pin  ` command will pin a version (or alias) of a tool. This version will\nbe used when attempting to [detect a version](/docs/proto/detection).\n\n```\n$ proto pin go 1.20$ proto pin python 3.14 --to=global$ proto pin node lts --resolve$ proto pin npm latest --resolve --tool-native\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--to` to customize\nthe location, or use the `--tool-native` option to use a location unique to the tool.\n\n### Arguments\n\n- `` - Type of tool.\n\n- `` - Version of tool.\n\n### Options\n\n- `--resolve` - Resolve the version to a fully-qualified semantic version before pinning.\n\n- `--to` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n- `--tool-native` - Pins the version in a tool specific location. Examples: JavaScript tooling (Node, Bun, Deno, npm, pnpm, Yarn, etc) Pins version in the `devEngines` field in the `package.json` file.\n\n- v0.55.0\n\n## /docs/proto/commands/plugin\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin\n\n- [Home](/)\n- Commands\n- [plugin](/docs/proto/commands/plugin)\n\nwarning\n\nDocumentation is currently for [moon v2](/blog/moon-v2-alpha) and latest proto. Documentation for moon v1 has been frozen and can be [found here](https://moonrepo.github.io/website-v1/).\n\n# plugin\n\nOperations for managing tools and plugins.\n\n[ addThe proto plugin add command will add the provided ID and plugin locator string to](/docs/proto/commands/plugin/add)\n\n[ infoThe proto plugin info command will display information about a tool and its plugin.](/docs/proto/commands/plugin/info)\n\n[ listThe proto plugin list [...id] command will list all available and configured plugins, for both](/docs/proto/commands/plugin/list)\n\n[ removeThe proto plugin remove command will remove the provided tool ID from the [plugins] section](/docs/proto/commands/plugin/remove)\n\n[ searchThe proto plugin search command will search for plugins provided by the community, based](/docs/proto/commands/plugin/search)\n\n[pin](/docs/proto/commands/pin)\n\n[add](/docs/proto/commands/plugin/add)\n\n## /docs/proto/commands/plugin/add\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/add\n\n# plugin add\n\nv0.23.0\n\nThe `proto plugin add\n` command will add the provided ID and plugin locator string to\nthe `[plugins]` section of a chosen `.prototools`.\n\n```\n$ proto plugin add node \"https://github.com/moonrepo/node-plugin/releases/latest/download/node_plugin.wasm\"\n```\n\nLearn more about [plugin locator strings](/docs/proto/plugins#enabling-plugins).\n\n### Arguments\n\n- `` - ID of the tool.\n\n- `` - How to locate the plugin.\n\n### Options\n\n- `--to` - [Location of `.prototools`](/docs/proto/config#locations) to update. v0.41.0\n\n- `--type` - Type of plugin to add, either `tool` (default) or `backend`. v0.52.0\n\n## /docs/proto/commands/plugin/info\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/info\n\n# plugin info\n\nv0.23.0\n\nThe `proto plugin info ` command will display information about a tool and its plugin.\n\n```\n$ proto plugin info nodePlugin   ID: node  Name: Node.js  Type: Language  Version: 0.13.0  Source URL: https://github.com/moonrepo/plugins/releases/download/node_tool-v0.13.0/node_tool.wasmInventory   Detected version: 23.5.0  Fallback version: 23.5.0  Store directory: /Users/name/.proto/tools/node  Executable file: /Users/name/.proto/tools/node/23.5.0/bin/node  Executables directory: /Users/name/.proto/tools/node/23.5.0/bin  Global packages directory: /Users/name/.proto/tools/node/globals/bin  Shims:    - /Users/name/.proto/shims/node  Binaries:    - /Users/name/.proto/bin/node    - /Users/name/.proto/bin/node-20    - /Users/name/.proto/bin/node-20.15    - /Users/name/.proto/bin/node-20.8    - /Users/name/.proto/bin/node-23    - /Users/name/.proto/bin/node-23.4    - /Users/name/.proto/bin/node-23.5  Installed versions:    20.8.0 - installed 12/19/24, last used 12/19/24    20.15.0 - installed 12/25/24, last used 12/25/24    23.4.0 - installed 12/19/24, last used 12/19/24    23.5.0 - installed 12/25/24, last used 12/25/24, fallback version  Remote aliases:    argon = 4.9.1    boron = 6.17.1    carbon = 8.17.0    dubnium = 10.24.1    erbium = 12.22.12    fermium = 14.21.3    gallium = 16.20.2    hydrogen = 18.20.5    iron = 20.18.1    jod = 22.12.0    latest = 23.5.0    stable = 22.12.0Configuration   Local aliases:    example = 19.0.0  Environment variables:   Settings: \n```\n\n### Arguments\n\n- `` - ID of tool.\n\n### Options\n\n- `--json` - Print the info in JSON format.\n\n## /docs/proto/commands/plugin/list\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/list\n\n# plugin list\n\nv0.23.0\n\nThe `proto plugin list [...id]` command will list all available and configured plugins, for both\nthird-party and built-in tools. Will load all `./.prototools` traversing upwards, and the\n`~/.proto/.prototools` file.\n\nFurthermore, it can list tool information, along with their installed versions, relevant timestamps,\navailable aliases, and store location.\n\n```\n$ proto plugin list --versionsBun   ID: bun  Source URL: https://github.com/moonrepo/plugins/releases/download/bun_tool-v0.14.0/bun_tool.wasm  Store directory: /Users/miles/.proto/tools/bun  Versions:    1.1.42 - installed 12/25/24, fallback versionDeno   ID: deno  Source URL: https://github.com/moonrepo/plugins/releases/download/deno_tool-v0.13.0/deno_tool.wasm  Store directory: /Users/miles/.proto/tools/deno  Versions:    1.30.0 - installed 02/01/24, last used 11/28/24    1.40.0 - installed 02/01/24, last used 12/09/24    1.43.1 - installed 12/25/24, fallback versionGo   ID: go  Source URL: https://github.com/moonrepo/plugins/releases/download/go_tool-v0.14.0/go_tool.wasm  Store directory: /Users/miles/.proto/tools/go  Versions:    1.18.0 - installed 12/25/24, fallback version    1.19.0 - installed 12/22/24    1.20.12 - installed 12/09/23    1.23.4 - installed 12/24/24\n```\n\nA list of tool IDs can be provided to filter the output list.\n\n```\n$ proto plugin list node npm\n```\n\n### Arguments\n\n- `[id...]` - IDs of tools.\n\n### Options\n\n- `--aliases` - Print the list with resolved aliases.\n\n- `--versions` - Print the list with installed versions.\n\n- `--json` - Print the list in JSON format.\n\n## /docs/proto/commands/plugin/remove\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/remove\n\n# plugin remove\n\nv0.23.0\n\nThe `proto plugin remove ` command will remove the provided tool ID from the `[plugins]` section\nof the chosen (`.prototools`).\n\n```\n$ proto plugin remove node\n```\n\nBuilt-in plugins cannot be removed!\n\n### Arguments\n\n- `` - ID of the tool.\n\n### Options\n\n- `--from` - [Location of `.prototools`](/docs/proto/config#locations) to update. v0.41.0\n\n- `--type` - Type of plugin to remove, either `tool` (default) or `backend`. v0.52.0\n\n## /docs/proto/commands/plugin/search\n\nSource: https://moonrepo.dev/docs/proto/commands/plugin/search\n\n# plugin search\n\nv0.36.0\n\nThe `proto plugin search ` command will search for plugins provided by the community, based\non the provided query string. Built-in plugins are not searchable.\n\n```\n$ proto plugin search moonSearch results for: moonLearn more about plugins: https://moonrepo.dev/docs/proto/plugins Plugin      Author    Format Description             Locator                                                              moon        moonrepo  TOML   moon is a multi-        https://raw.githubusercontent.com/moonrepo/moon/master/proto-                                     language build system   plugin.toml                                                                                       and codebase management                                                                                                   tool.                                                                                       \n```\n\n### Arguments\n\n- `` - Query string to match against.\n\n### Options\n\n- `--json` - Print the results in JSON format.\n\n## /docs/proto/commands/regen\n\nSource: https://moonrepo.dev/docs/proto/commands/regen\n\n# regen\n\nv0.27.0\n\nThe `proto regen` command can be used to regenerate all shims in the `~/.proto/shims` directory.\nThis command will also clean the shims directory before regenerating, in an effort to remove\nunexpected or broken shims.\n\n```\n$ proto regen\n```\n\nBy default this will only regenerate shims. If you want to regenerate bins in `~/.proto/bin` as\nwell, pass the `--bin` flag. This will also clean the bins directory before regenerating.\n\n```\n$ proto regen --bin\n```\n\nOnly versions pinned in `~/.proto/.prototools` will be linked as bins.\n\n## Options\n\n- `--bin` - Also recreate `~/.proto/bin` symlinks.\n\n## /docs/proto/commands/run\n\nSource: https://moonrepo.dev/docs/proto/commands/run\n\n# run\n\nThe `proto run  [version]` (or `proto r`) command will run a tool after\n[detecting a version](/docs/proto/detection) from the environment.\n\n```\n# Run and detect version from environment$ proto run bun# Run with explicit version$ proto run bun 0.5.3# Run with version from environment variable$ PROTO_BUN_VERSION=0.5.3 proto run bun\n```\n\nArguments can be passed to the underlying tool binary by providing additional arguments after `--`.\n\n```\n$ proto run bun -- run ./script.ts# When using the binary on PATH$ bun run ./script.ts\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n- `[version]` - Version of tool. If not provided, will attempt to detect the version from the environment.\n\n## /docs/proto/commands/setup\n\nSource: https://moonrepo.dev/docs/proto/commands/setup\n\n# setup\n\nThe `proto setup` command will setup proto in your current shell by modifying an applicable profile\nfile and appending proto's bin directory to `PATH`. If a shell could not be detected, you'll be\nprompted to select one.\n\n```\n$ proto setup\n```\n\nDuring setup, the following profiles will be searched or prompted for.\n\n- Bash `~/.bash_profile`\n\n- `~/.bashrc`\n\n- `~/.profile`\n\n- Elvish `~/.elvish/rc.elv`\n\n- `~/.config/elvish/rc.elv`\n\n- Fish `~/.config/fish/config.fish`\n\n- Ion `~/.config/ion/initrc`\n\n- Murex `~/.murex_preload`\n\n- `~/.murex_profile`\n\n- Nu `~/.config/nushell/env.nu`\n\n- `~/.config/nushell/config.nu`\n\n- PowerShell Windows `~\\Documents\\PowerShell\\Microsoft.PowerShell_profile.ps1`\n\n- `~\\Documents\\PowerShell\\Profile.ps1`\n\n- Unix `~/.config/powershell/Microsoft.PowerShell_profile.ps1`\n\n- `~/.config/powershell/profile.ps1`\n\n- Xonsh `~/.config/xonsh/rc.xsh`\n\n- `~/.xonshrc`\n\n- Zsh `~/.zprofile`\n\n- `~/.zshenv`\n\n- `~/.zshrc`\n\n### Windows support\n\nIn addition to updating a shell profile file (most likely PowerShell), we'll also modify the `PATH`\n(or `Path`) system environment variable, by prepending the `~/.proto/shims` and `~/.proto/bin`\npaths.\n\nIf you would like to opt-out of this behavior, pass the `--no-modify-path` flag.\n\n### Options\n\n- `--shell` - Shell to explicitly setup for.\n\n- `--no-modify-profile` / `PROTO_NO_MODIFY_PROFILE` - Don't update a shell profile file.\n\n- `--no-modify-path` / `PROTO_NO_MODIFY_PATH` - Don't update the system `PATH` environment variable (Windows only).\n\n- `--yes` - Avoid interactive prompts and use defaults.\n\n## /docs/proto/commands/status\n\nSource: https://moonrepo.dev/docs/proto/commands/status\n\n# status\n\nv0.34.0\n\nThe `proto status` command will list all tools that are currently active for a target directory,\nwhat versions of those tools are resolved to, and the configuration file in which they are defined.\n\n```\n$ proto status Tool      Configured Resolved  Installed                           Config                              bun       1.1.42     1.1.42    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      bun/1.1.42                                                              deno      1.43.1     1.43.1    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      deno/1.43.1                                                             node      23.5.0     23.5.0    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      node/23.5.0                                                             npm       ~10.7      10.7.0    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      npm/10.7.0                                                              python    3.12.0     3.12.0    /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      python/3.12.0                                                           yarn      3.6.3      3.6.3     /Users/name/.proto/tools/          /Users/name/.proto/.prototools                                      yarn/3.6.3                                                             \n```\n\nBy default, this command does not check tools for versions pinned in the global\n`~/.proto/.prototools` file. Pass `--config-mode all` to include them.\n\n### Options\n\n- `--json` - Print the list in JSON format.\n\n## /docs/proto/commands/unalias\n\nSource: https://moonrepo.dev/docs/proto/commands/unalias\n\n# unalias\n\nThe `proto unalias  ` (or `proto ua`) command will remove a custom alias for the\nprovided tool.\n\n```\n$ proto unalias node work\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--from` to customize\nthe location.\n\n### Arguments\n\n- `` - Type of tool.\n\n- `` - Name of the alias. Supports alphanumeric chars.\n\n## Options\n\n- `--from` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n## /docs/proto/commands/uninstall\n\nSource: https://moonrepo.dev/docs/proto/commands/uninstall\n\n# uninstall\n\nThe `proto uninstall  [version]` (or `proto ui`) command will uninstall and remove a tool from\n`~/.proto/tools/`. If the tool has not been installed, the command will exit early.\n\n```\n# Remove a specific version$ proto uninstall deno 1.31# Remove all versions$ proto uninstall deno\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n- `[version]` - Version of tool.\n\n## /docs/proto/commands/unpin\n\nSource: https://moonrepo.dev/docs/proto/commands/unpin\n\n# unpin\n\nv0.36.0\n\nThe `proto unpin ` command will unpin a version of a tool.\n\n```\n$ proto unpin go$ proto unpin node --tool-native\n```\n\nBy default this will update the local [`./.prototools`](/docs/proto/config) file. Pass `--from` to customize\nthe location.\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--from` - [Location of `.prototools`](/docs/proto/config#locations) to update. Supports `global`, `local`, and `user`. v0.41.0\n\n- `--tool-native` - Use a tool specific location, like the `devEngines` field in the `package.json` for JavaScript tools. v0.55.0\n\n## /docs/proto/commands/upgrade\n\nSource: https://moonrepo.dev/docs/proto/commands/upgrade\n\n# upgrade\n\nThe `proto upgrade` (or `proto up`) command can be used to upgrade your current proto binary to the\nlatest version, or check if you're currently outdated.\n\n```\n$ proto upgrade# Up/downgrade to a specific version$ proto upgrade 0.39.0\n```\n\ninfo\n\nThe previous binary will be moved to `~/.proto/tools/proto/`, while the new binary will be\ninstalled to `~/.proto/bin`.\n\n### Arguments\n\n- `` - The version of proto to explicitly upgrade or downgrade to. v0.39.3\n\n### Options\n\n- `--check` - Check if there's a new version without executing the upgrade.\n\n- `--json` - Print the upgrade information as JSON.\n\n## /docs/proto/commands/use\n\nSource: https://moonrepo.dev/docs/proto/commands/use\n\n# use\n\ndanger\n\nThis command has been deprecated and its functionality was merged into [`proto install`](/docs/proto/commands/install)\nin v0.39. Use that command instead!\n\nThe `proto use` (or `proto u`) command will download and install all tools and plugins from all\nparent [`.prototools`](/docs/proto/config) configuration files, and any [versions detected](/docs/proto/detection) in\nthe current working directory (if not defined in `.prototools`).\n\n```\n$ proto use\n```\n\nThis command does not install tools for versions pinned in the global `~/.proto/.prototools`\nfile.\n\n## /docs/proto/commands/versions\n\nSource: https://moonrepo.dev/docs/proto/commands/versions\n\n# versions\n\nv0.44.0\n\nThe `proto versions ` command will list available versions by resolving versions from the\ntool's remote release manifest. Furthermore, if a version has been installed locally, it will be\ndenoted with a timestamp.\n\n```\n$ proto versions node...22.0.022.1.022.2.022.3.022.4.022.4.122.5.0 - installed 12/25/2422.5.122.6.022.7.022.8.022.9.022.10.022.11.022.12.023.0.023.1.023.2.023.3.023.4.0 - installed 12/19/2423.5.0 - installed 12/25/24\n```\n\n### Arguments\n\n- `` - Type of tool.\n\n### Options\n\n- `--aliases` - Include aliases in the list.\n\n- `--installed` - Only display installed versions.\n\n- `--json` - Print the versions and aliases in JSON format.\n\n## /docs/proto/config\n\nSource: https://moonrepo.dev/docs/proto/config\n\n# Configuration\n\nWe support configuration at both the project-level and user-level using a\n[TOML](https://toml.io/en/) based `.prototools` file. This file can be used to pin versions of\ntools, provide tool specific configuration, enable new tools via plugins, define proto settings, and\nmore.\n\n## Locationsv0.41.0\n\nproto supports 3 locations in which a `.prototools` file can exist. These locations are used\nthroughout the command line and proto's own settings.\n\n- `local` -> `./.prototools`, `.\\.prototools` (current directory)\n\n- `global` -> `~/.proto/.prototools`, `%USERPROFILE%\\.proto\\.prototools`\n\n- `user` -> `~/.prototools`, `%USERPROFILE%\\.prototools`\n\nLocal is a bit of a misnomer as a `.prototools` file can theoretically exist in any directory, but\nwhen reading/writing to a file, `local` refers to the current working directory.\n\n### Where to configure?\n\nWith so many locations to store proto configuration, the question of where to store certain\nconfigurations become blurred, especially when [resolution](#resolution-mode) comes into play. We\nsuggest the following locations:\n\n- Default/fallback [versions](#pinning-versions) of tools -> `global`\n\n- Project specific [versions](#pinning-versions) of tools -> `local`\n\n- Project specific [settings](#settings) -> `local`\n\n- Shared/developer [settings](#settings) -> `user`\n\n- Non-project related -> `user`\n\n## Resolution modev0.40.0\n\nWhen a `proto` command or shim is ran, we must find and load all applicable `.prototools` files. We\nthen deeply merge all of these configuration files into a final configuration object, with the\ncurrent directory taking highest precedence.\n\nThe order in which to resolve configuration can be defined using the `--config-mode` (`-c`) command\nline option, or the `PROTO_CONFIG_MODE` environment variable. The following 4 modes are supported:\n\n### `global`\n\nIn this mode, proto will only load the `~/.proto/.prototools` file. This \"global\" file acts as\nconfiguration at the user-level and allows for fallback settings.\n\n```\n~/.proto/.prototools\n```\n\n### `local`\n\nIn this mode, proto will only load the `.prototools` file in the current directory.\n\n```\n./.prototools\n```\n\n### `upwards`\n\nIn this mode, proto will traverse upwards starting from the current directory, and load\n`.prototools` within each directory, until we reach the system root or the user directory (`~`),\nwhichever comes first.\n\n```\n~/Projects/app/.prototools (cwd)~/Projects/.prototools~/.prototools\n```\n\nThis is the default mode for the [`activate`](/docs/proto/commands/activate),\n[`install`](/docs/proto/commands/install), [`outdated`](/docs/proto/commands/outdated), and\n[`status`](/docs/proto/commands/status) commands.\n\n### `upwards-global` / `all`\n\nThis mode works exactly like [`upwards`](#upwards) but with the functionality of [`global`](#global)\nas well. The global `~/.proto/.prototools` file is appended as the final entry.\n\n```\n~/Projects/app/.prototools (cwd)~/Projects/.prototools~/.prototools~/.proto/.prototools\n```\n\nThis is the default mode for all other commands not listed above in `upwards`.\n\n## Environment modev0.29.0\n\nWe also support environment specific configuration, such as `.prototools.production` or\n`.prototools.development`, when the `PROTO_ENV` environment variable is set. This is useful for\ndefining environment specific aliases, or tool specific configuration.\n\nThese environment aware settings take precedence over the default `.prototools` file, for the\ndirectory it's located in, and are merged in the same way as the default configuration. For example,\nthe lookup order would be the following when `PROTO_ENV=production`:\n\n```\n~/Projects/.prototools.production~/Projects/.prototools~/.prototools.production~/.prototools~/.proto/.prototools\n```\n\nThe global `~/.proto/.prototools` file does not support environment modes.\n\n## Pinning versions\n\nproto supports pinning versions of tools on a per-directory basis through our `.prototools`\nconfiguration file. This file takes precedence during [version detection](/docs/proto/detection) and can be\ncreated/updated with [`proto pin`](/docs/proto/commands/pin).\n\nAt its most basic level, you can map tools to specific versions, for the directory the file is\nlocated in. A [version](/docs/proto/tool-spec) can either be a fully-qualified version, a partial version, a\nrange or requirement, or an alias.\n\n.prototools\n\n```\nnode = \"16.16.0\"npm = \"9\"go = \"~1.20\"rust = \"stable\"\n```\n\n### Lock `proto` versionv0.39.0\n\nYou can also pin the version of proto that you want all tools to execute with by adding a `proto`\nversion entry. This approach uses shims and dynamic version detection like other tools.\n\n.prototools\n\n```\nproto = \"0.38.0\"\n```\n\n## Available settings\n\n### `[env]`v0.29.0\n\nThis setting is a map of environment variables that will be applied to all tools when they are\nexecuted, or when [`proto activate`](/docs/proto/commands/activate) is ran in a shell profile. Variables\ndefined here will not override existing environment variables (either passed on the command line,\nor inherited from the shell).\n\n.prototools\n\n```\n[env]DEBUG = \"*\"\n```\n\nAdditionally, `false` can be provided as a value, which will remove the environment variable. This\nis useful for removing inherited shell variables.\n\n.prototools\n\n```\n[env]DEBUG = false\n```\n\nVariables also support substitution using the syntax `${VAR_NAME}`. When using substitution,\nvariables in the current process and merged `[env]` can be referenced. Recursive substitution is not\nsupported!\n\nThis functionality enables per-directory environment variables!\n\n#### `file`v0.43.0\n\nThis is a special field that points to a dotenv file, relative from the current configuration file,\nthat will be loaded into the environment variables mapping. Variables defined in a dotenv file will\nbe loaded before variables manually defined within `[env]`.\n\nThis feature utilizes the [dotenvy](https://github.com/allan2/dotenvy) crate for parsing dotfiles.\n\n.prototools\n\n```\n[env]file = \".env\"\n```\n\n### `[settings]`\n\n#### `auto-install`\n\nWhen enabled, will automatically install a missing version of a tool when\n[`proto run`](/docs/proto/commands/run) is ran, instead of erroring. Defaults to `false` or\n`PROTO_AUTO_INSTALL`.\n\n.prototools\n\n```\n[settings]auto-install = true\n```\n\nwarning\n\nThis functionality requires shims (not activation) and will only work after a tool has been\ninstalled at least once. This is because the shim executable handles the interception and the shim\nis created after a tool is installed.\n\n#### `auto-clean`\n\nWhen enabled, will automatically clean up the proto store in the background, by removing unused\ntools and outdated plugins. Defaults to `false` or `PROTO_AUTO_CLEAN`.\n\n.prototools\n\n```\n[settings]auto-clean = true\n```\n\n#### `builtin-plugins`v0.39.0\n\nCan be used to customize the [built-in plugins](/docs/proto/tools#built-in) within proto. Can disable all\nbuilt-ins by passing `false`, or enabling a select few by name. Defaults to `true`, which enables\nall.\n\n.prototools\n\n```\n[settings]# Disable allbuiltin-plugins = false# Enable somebuiltin-plugins = [\"node\", \"bun\"]\n```\n\n#### `cache-duration`v0.50.1\n\nThe duration in seconds in which to cache downloaded plugins. Defaults to 30 days.\n\n.prototools\n\n```\n[settings]cache-duration = 3600\n```\n\n#### `detect-strategy`\n\nThe strategy to use when [detecting versions](/docs/proto/detection). Defaults to `first-available` or\n`PROTO_DETECT_STRATEGY`.\n\n- `first-available` - Will use the first available version that is found. Either from `.prototools` or a tool specific file (`.nvmrc`, etc).\n\n- `prefer-prototools` - Prefer a `.prototools` version, even if found in a parent directory. If none found, falls back to tool specific file.\n\n- `only-prototools` - Only use a version defined in `.prototools`. v0.34.0\n\n.prototools\n\n```\n[settings]detect-strategy = \"prefer-prototools\"\n```\n\n#### `pin-latest`\n\nWhen defined and a tool is installed with the \"latest\" alias, will automatically pin the resolved\nversion to the configured location. Defaults to disabled or `PROTO_PIN_LATEST`.\n\n- `global` - Pins globally to `~/.proto/.prototools`.\n\n- `local` - Pins locally to `./.prototools` in current directory.\n\n- `user` - Pins to the user's `~/.prototools` in their home directory. v0.41.0\n\n.prototools\n\n```\n[settings]pin-latest = \"local\"\n```\n\n#### `telemetry`\n\nWhen enabled, we collect anonymous usage statistics for tool installs and uninstalls. This helps us\nprioritize which tools to support, what tools or their versions may be broken, the plugins currently\nin use, and more. Defaults to `true`.\n\n.prototools\n\n```\n[settings]telemetry = false\n```\n\nThe data we track is publicly available and\n[can be found here](https://github.com/moonrepo/proto/blob/master/crates/cli/src/telemetry.rs).\n\n#### `unstable-lockfile`v0.51.0\n\nWhen enabled, will create a `.protolock` file relative to this configuration file. The lockfile will\nrecord and lock all tools, their versions, and checksums from the configuration file, ensuring\nconsistency across machines, and reliability.\n\n.prototools\n\n```\n[settings]unstable-lockfile = true\n```\n\n#### `unstable-registries`v0.51.0\n\nA list of OCI registries to query for plugins by\n[reference](https://oras.land/docs/concepts/reference). Registries will be queried in the order they\nare configured. Each registry object supports the following fields:\n\n- `registry` - The registry host, e.g. `ghcr.io`.\n\n- `namespace` - The namespace (or organization) that the plugin belongs to.\n\n.prototools\n\n```\n[settings]unstable-registries = [  { registry: \"ghcr.io\", namespace: \"moonrepo\" }]\n```\n\n#### `url-rewrites`v0.50.0\n\nProvides a mechanism for rewriting most URLs used by proto, such as those used for downloading\ntools. This setting accepts a map of [Rust regular expressions](https://docs.rs/regex/latest/regex/)\nto [replacement strings](https://docs.rs/regex/latest/regex/struct.Regex.html#method.replace). When\na URL is rewritten, all entries in the map are applied in order, and all matches are replaced.\n\n.prototools\n\n```\n[settings.url-rewrites]\"github.com/(\\\\w+)/(\\\\w+)\" = \"gh-mirror.corp.com/$1/$2\"\"mo+n\" = \"lunar\"\n```\n\nThe following types of URLs are rewritten:\n\n- Tool download/checksum URLs (even from third-party plugins)\n\n- Plugin download URLs\n\n- Build script URLs\n\n- Archive URLs\n\nThe following are not rewritten:\n\n- Git repository URLs\n\n- proto version check/telemetry URLs\n\n### `[settings.build]`v0.46.0\n\nCan be used to customize the build from source flow.\n\n#### `exclude-packages`\n\nConfigures a list of packages that should be excluded during installation.\n\n.prototools\n\n```\n[settings.build]exclude-packages = [\"git\", \"python3\", \"libssl-dev\"]\n```\n\n#### `install-system-packages`\n\nWhen enabled, will install packages required for building using the system package manager. Defaults\nto `true`.\n\n.prototools\n\n```\n[settings.build]install-system-packages = false\n```\n\n#### `system-package-manager`\n\nCustomize the system package manager to use when installing system packages and their dependencies.\nBy default we attempt to detect the package manager to use from the environment.\n\nThis setting accepts a map, where the key is the name of the\n[operating system](https://doc.rust-lang.org/std/env/consts/constant.OS.html), and the value is the\n[package manager](https://docs.rs/system_env/latest/system_env/enum.SystemPackageManager.html) to\nuse. Both the key and value are in kebab-case.\n\n.prototools\n\n```\n[settings.build.system-package-manager]windows = \"choco\"\n```\n\n#### `write-log-file`\n\nWhen a build has completed, write a log file to the current directory. This is always `true` when a\nbuild fails, but `false` otherwise.\n\n.prototools\n\n```\n[settings.build]write-log-file = true\n```\n\n### `[settings.http]`\n\nCan be used to customize the HTTP client used by proto, primarily for requesting files to download,\navailable versions, and more.\n\n#### `allow-invalid-certs`\n\nWhen enabled, will allow invalid certificates instead of failing. This is an escape hatch and\nshould only be used if other settings have failed. Be sure you know what you're doing! Defaults to\n`false`.\n\n.prototools\n\n```\n[settings.http]allow-invalid-certs = true\n```\n\n#### `proxies`\n\nA list of proxy URLs to use for requests. As an alternative, the `HTTP_PROXY` and `HTTPS_PROXY`\nenvironment variables can be set. URLs that start with `http://` will be considered insecure, while\n`https://` will be secure.\n\n.prototools\n\n```\n[settings.http]proxies = [\"https://internal.proxy\", \"https://corp.net/proxy\"]\n```\n\n#### `secure-proxies`v0.40.3\n\nA list of proxy URLs that will be considered secure, regardless of the HTTP protocol.\n\n.prototools\n\n```\n[settings.http]secure-proxies = [\"http://internal.proxy\", \"http://corp.net/proxy\"]\n```\n\n#### `root-cert`\n\nThe path to a root certificate to use for requests. This is useful for overriding the native\ncertificate, or for using a self-signed certificate, especially when in a corporate/internal\nenvironment. Supports `pem` and `der` files.\n\n.prototools\n\n```\n[settings.http]root-cert = \"/path/to/root/cert.pem\"\n```\n\n### `[settings.offline]`v0.41.0\n\nCan be used to customize how we detect an internet connection for offline based logic. These\nsettings are useful if you're behind a VPN or corporate proxy.\n\n#### `custom-hosts`\n\nA list of custom hosts to ping. Will be appended to our\n[default list of hosts](#override-default-hosts) and will be ran last.\n\n.prototools\n\n```\n[settings.offline]custom-hosts = [\"proxy.corp.domain.com:80\"]\n```\n\n#### `override-default-hosts`\n\nIf our default hosts are blocked or are too slow, you can disable pinging them by setting this\noption to true. Our default hosts are Google DNS, Cloudflare DNS, and then Google and Mozilla hosts.\n\nThis should be used in parallel with [`custom-hosts`](#custom-hosts).\n\n.prototools\n\n```\n[settings.offline]override-default-hosts = true\n```\n\n#### `timeout`\n\nThe timeout in milliseconds to wait for a ping against a host to resolve. Default timeout is 750ms.\n\n.prototools\n\n```\n[settings.offline]timeout = 500\n```\n\n### `[plugins]`\n\nThis setting was renamed to [`[plugins.tools]`](#pluginstools) in v0.52 but exists for backwards\ncompatibility.\n\n## Backend specific settings\n\n### `[plugins.backends]`v0.52.0\n\nCustom [backend plugins](/docs/proto/plugins) can be configured with the `[plugins.backends]` section.\n[Learn more about this syntax](/docs/proto/plugins#enabling-plugins).\n\n.prototools\n\n```\n[plugins.backends]my-backend = \"https://raw.githubusercontent.com/my/backend/master/proto-plugin.toml\"\n```\n\nOnce configured, you can manage a tool plugin using your custom backend:\n\n```\n$ proto install my-backend:tool-id\n```\n\n### `[backends.*]`v0.53.0\n\nBackends support custom configuration that will be passed to their WASM plugin, which can be used to\ncontrol the behavior for all tools managed by the backend. Please refer to the\n[official documentation](/docs/proto/tool-spec#backends) around backends.\n\n.prototools\n\n```\n[backends.example]setting = true\n```\n\n### `[backends.*.env]`v0.53.0\n\nThis setting is a map of environment variables for a specific backend, and will be applied when that\nbackend is executed through a managed tool, or when [`proto activate`](/docs/proto/commands/activate) is ran\nin a shell profile. These variables will override those defined in `[env]`. Refer to [`[env]`](#env)\nfor usage examples.\n\n.prototools\n\n```\n[backends.example.env]KEY = \"value\"\n```\n\n#### `file`v0.53.0\n\nLike [`[env].file`](#file), this is a path to a dotenv file, relative from the current configuration\nfile, that will be loaded into the environment variables mapping for this specific backend.\n\n.prototools\n\n```\n[backends.example.env]file = \"backend/.env\"\n```\n\n## Tool specific settings\n\n### `[plugins.tools]`v0.52.0\n\nCustom [tool plugins](/docs/proto/plugins) can be configured with the `[plugins.tools]` section.\n[Learn more about this syntax](/docs/proto/plugins#enabling-plugins).\n\n.prototools\n\n```\n[plugins.tools]my-tool = \"https://raw.githubusercontent.com/my/tool/master/proto-plugin.toml\"\n```\n\nOnce configured, you can manage a tool plugin:\n\n```\n$ proto install my-tool\n```\n\n### `[tools.*]`\n\nTools support custom configuration that will be passed to their WASM plugin, which can be used to\ncontrol the business logic within the plugin. Please refer to the [official documentation](/docs/proto/tools)\nof each tool (typically on their repository) for a list of available settings.\n\nAs an example, let's configure [Node.js](https://github.com/moonrepo/node-plugin) (using the `node`\nidentifier).\n\n.prototools\n\n```\nnpm = \"bundled\" # use bundled npm instead of specific version[tools.node]bundled-npm = true[tools.npm]shared-globals-dir = true\n```\n\n### `[tools.*.aliases]`\n\nAliases are custom and unique labels that map to a specific version, and can be configured manually\nwithin `.prototools`, or by calling the [`proto alias`](/docs/proto/commands/alias) command.\n\n.prototools\n\n```\n[tools.node.aliases]work = \"18\"oss = \"20\"\n```\n\n### `[tools.*.env]`v0.29.0\n\nThis setting is a map of environment variables for a specific tool, and will be applied when that\ntool is executed, or when [`proto activate`](/docs/proto/commands/activate) is ran in a shell profile. These\nvariables will override those defined in `[env]`. Refer to [`[env]`](#env) for usage examples.\n\n.prototools\n\n```\n[tools.node.env]NODE_ENV = \"production\"\n```\n\n#### `file`v0.43.0\n\nLike [`[env].file`](#file), this is a path to a dotenv file, relative from the current configuration\nfile, that will be loaded into the environment variables mapping for this specific tool.\n\n.prototools\n\n```\n[tools.node.env]file = \"frontend/.env\"\n```\n\n## GitHub Action\n\nTo streamline GitHub CI workflows, we provide the\n[`moonrepo/setup-toolchain`](https://github.com/moonrepo/setup-toolchain) action, which can be used\nto install `proto` globally, and cache the toolchain found at `~/.proto`.\n\n.github/workflows/ci.yml\n\n```\n# ...jobs:  ci:    name: 'CI'    runs-on: 'ubuntu-latest'    steps:      - uses: 'actions/checkout@v4'      - uses: 'moonrepo/setup-toolchain@v0'        with:          auto-install: true\n```\n\n## /docs/proto/detection\n\nSource: https://moonrepo.dev/docs/proto/detection\n\n# Version detection\n\n2 min\n\nThe most powerful feature in proto is its contextual version detection, that is triggered with\n[`proto run`](/docs/proto/commands/run), [`proto bin`](/docs/proto/commands/bin), or when a shim is executed. So what\ndoes this mean exactly? Before a tool in proto's toolchain can be executed, we need to determine the\nversion of the tool to execute with. If a detected version exists locally, we proceed using that\nbinary, otherwise we fail with a missing installation error.\n\nWhen detecting a version, the following steps are checked, in the order as listed:\n\n#### 1. Version is explicitly passed as a command line argument\n\n```\n$ proto run node 24.0.0\n```\n\n#### 2. Version is provided with the `PROTO_*_VERSION` environment variable\n\n```\n$ PROTO_NODE_VERSION=24.0.0 proto run node\n```\n\n#### 3. Version is located by traversing the file system\n\nThis step will attempt to find a configuration or manifest file in the current working directory,\nand traverse upwards through parent directories (stops at the user's home directory) until a file is\nfound.\n\n##### 3.1. Version is defined locally in `.prototools`\n\nA `.prototools` file was found and a version entry exists for the current tool. This is also known\nas a \"local version\" and can be created with [`proto pin`](/docs/proto/commands/pin).\n\n.prototools\n\n```\nnode = \"24.0.0\"\n```\n\n##### 3.2. Version is defined in the tool's ecosystem\n\nDepending on the tool, a version is extracted from a found file unique to that tool's ecosystem.\nThis includes version manager configs (`.nvmrc`, etc), manifest files (`package.json`, etc), and\nmore.\n\n.nvmrc\n\n```\n24.0.0\n```\n\npackage.json\n\n```\n{  \"devEngines\": {    \"runtime\": {      \"name\": \"node\",      \"version\": \"24.0.0\"    },    \"packageManager\": {      \"name\": \"npm\",      \"version\": \"11.0.0\"    }  }}\n```\n\n#### 4. Version is defined globally\n\nAs the last check, we look for a \"global version\" that was pinned with\n[`proto pin --global`](/docs/proto/commands/pin) or [`proto install --pin`](/docs/proto/commands/install). This version\nis stored at `~/.proto/.prototools` (`%USERPROFILE%\\.proto\\.prototools` on Windows).\n\n#### 5. Version could not be detected\n\nIf all the previous steps have failed, then we could not detect an applicable version, and the\nprocess will fail.\n\n## /docs/proto/faq\n\nSource: https://moonrepo.dev/docs/proto/faq\n\n# FAQ\n\n## General\n\n### Where did the name \"proto\" come from?\n\nWe wanted to keep with the space theme, and spent quite some time digging through Wikipedia and\nultimately landed on the page for [protostar](https://en.wikipedia.org/wiki/Protostar) (this is why\nour logo's a star). We really liked the definition of protostar, as it basically means \"the\nbeginning phase of a star\". Even the the prefix proto means \"first\" or \"earliest form of\".\n\nThis was great as that's the impression we had in mind for our tool. proto is the first piece\nrequired for setting up your developer environment. The toolchain is the first layer in the\nfoundation.\n\nFrom an aesthetic standpoint, proto's typography works well with moon, as most of the letters are\ncircle shaped. Double points for proto having two o's like the other products!\n\n### Are you worried about confusion with other tools like protobufs?\n\nNah.\n\n### What is a tool?\n\nA tool in the context of proto is either a language, dependency/package manager (typically for a\nlanguage), or third-party CLI. The tool is something that can be downloaded and installed by\nversion onto a machine.\n\nFurthermore, a tool should have a primary executable file that can be executed with `proto run` or\nthrough proto's shims. Additionally, a tool can also provide secondary executable files. For\nexample, `npm` (the primary) also provides `npx` and `node-gyp` (secondaries).\n\n### What is a backend?\n\nA backend is a special type of tool that provides additional integration with 3rd-party plugins,\ngreatly expanding what can be installed and managed with proto.\n\n### What is a plugin?\n\nA plugin is a WASM (or JSON, TOML, YAML) file for a tool or backend.\n\nThe terms tool and plugin are often used interchangeably, but plugin primarily refers to the WASM\nportion of a tool, while tool refers to the entire package: metadata, business logic, branding, so\non an so forth.\n\n### Will you support more languages?\n\nYes! We'd love to support as many as possible, and if you'd like to help, join our Discord\ncommunity! Feel free to create a [plugin](/docs/proto/plugins) in the mean time.\n\n### Will you support other kinds of tools?\n\nNo, we will only support languages, dependency managers, and CLIs, which should be enough. However,\nyou can create a [plugin](/docs/proto/plugins) to support other kinds of tools.\n\n### Do you support \"build from source\"?\n\nAs of version 0.45, we do! Simple pass `--build` to `proto install`. However, building from source\nis a complicated process and is unique per tool, so not all tools support it.\n\n### How to run a canary release after installing it?\n\nOnce a tool has been installed with `canary`, the canary version can be explicitly referenced using\nour [version detection rules](/docs/proto/detection). The easiest approach is to prefix the shim with an\nenvironment variable:\n\n```\n$ PROTO_BUN_VERSION=canary bun ./index.ts\n```\n\nOr to explicitly configure the version in [`.prototools`](/docs/proto/config):\n\n```\nbun = \"canary\"\n```\n\n### What kind of features are supported for HTTP requests?\n\nproto makes a lot of HTTP requests, for information such as available versions/releases, and for\ndownloading the blobs/archives themselves. Because of this, we do our best to support all kinds of\ninternet connections, proxy and intranet usage, and more, through the following:\n\n- All GET and HEAD requests are cached to `~/.proto/cache/requests` based on the [HTTP cache semantics](https://github.com/kornelski/rusty-http-cache-semantics) and relevant RFCs.\n\n- We support the [netrc file format](https://www.gnu.org/software/inetutils/manual/html_node/The-_002enetrc-file.html) and will automatically load `~/.netrc` if it exists.\n\n- We support an offline mode that will short-circuit certain workflows if there's no internet connection. We check for a connection by pinging DNS endpoints, but this can be configured with [`[settings.offline]`](/docs/proto/config#settingsoffline).\n\n- We attempt to automatically load root and system certifications so that secure connections work correctly. This can be configured with [`[settings.http]`](/docs/proto/config#settingshttp).\n\n## Troubleshooting\n\n### Network requests keep failing, how can I bypass?\n\nWhen a tool is executed, we validate the version to ensure it's correct. We achieve this by making\nnetwork requests to a remote service to gather the list of valid versions. If you're having network\nissues, or the request is timing out, you can bypass these checks with the following:\n\n- Pass a fully-qualified version as an environment variable. The version must be installed for this to work. ``` PROTO_NODE_VERSION=20.0.0 node --version ``` If executing a Node.js package manager, you'll need to set versions for both Node.js and the manager. This is required since manager's execute `node` processes under the hood. ``` PROTO_NODE_VERSION=20.0.0 PROTO_NPM_VERSION=10.0.0 npm --version ```\n\n- Pass the `PROTO_BYPASS_VERSION_CHECK` environment variable. This will bypass the network request to load versions, but does not bypass other requests. However, this is typically enough. ``` PROTO_BYPASS_VERSION_CHECK=1 node --version ```\n\n## /docs/proto/install\n\nSource: https://moonrepo.dev/docs/proto/install\n\n# Install proto\n\n1 min\n\nThe following guide can be used to install proto into your environment.\n\n## Requirements\n\n- Git - for fetching available versions/tags\n\n- tar, unzip, gz, xz - for unpacking archives\n\n```\n# macOSbrew install git unzip gzip xz# Ubuntu / Debianapt-get install git unzip gzip xz-utils# RHEL-based / Fedoradnf install git unzip gzip xz\n```\n\n## Installing\n\nThe entirety of proto is packaged and shipped as 2 binaries. It works on most operating systems,\nand does not require any external dependencies. For convenience, we provide the following scripts to\ndownload and install proto.\n\ninfo\n\nThe install location can be customized with the `PROTO_HOME` environment variable. If not provided,\nthe default location is `~/.proto`.\n\n### Linux, macOS, WSL\n\nIn a terminal that supports Bash, run the following command. This will download and install proto,\nthen open an interactive prompt to complete the installation.\n\n```\nbash administrator Powershell or Windows Terminal, run the following command. This will download\nand install proto, then open an interactive prompt to complete the installation.\n\n```\nirm https://moonrepo.dev/install/proto.ps1 | iex\n```\n\nYou may also need to run the following command for shims to be executable:\n\n```\nSet-ExecutionPolicy RemoteSigned# Without admin privilegesSet-ExecutionPolicy -Scope CurrentUser RemoteSigned\n```\n\n### Other\n\nproto can also be downloaded and installed manually, by downloading an asset from\n[https://github.com/moonrepo/proto/releases](https://github.com/moonrepo/proto/releases). Be sure to\nrename the file after downloading, and apply the executable bit (`chmod +x`) on macOS and Linux.\n\n## Upgrading\n\nTo upgrade proto, run the [`proto upgrade`](/docs/proto/commands/upgrade) command, or re-run the install\nscripts above.\n\n## Uninstalling\n\nTo uninstall proto, delete the `~/.proto` directory, and remove any `PROTO_HOME` references from\nyour shell profile.\n\n## Canary releases\n\nproto supports canary releases, which are built and published for every commit to our development\nbranches. These releases will include features and functionality that have not yet landed on master.\nCanary releases are available as a\n[GitHub prerelease](https://github.com/moonrepo/proto/releases/tag/canary) using the `canary` tag.\n\n## Nightly releases\n\nproto supports nightly releases, which are built and published once a day from the latest commit on\nmaster. Nightly releases are available as a\n[GitHub prerelease](https://github.com/moonrepo/proto/releases/tag/nightly) using the `nightly` tag.\n\n## Next steps\n\n[Choose a workflow](/docs/proto/workflows)[Learn about `.prototools`](/docs/proto/config)\n\n## /docs/proto/non-wasm-plugin\n\nSource: https://moonrepo.dev/docs/proto/non-wasm-plugin\n\n# Non-WASM plugin\n\nThe non-WASM plugin is by design, very simple. It's a JSON, TOML, or YAML file that describes a\nschema for the tool, how it should be installed, and how it should be invoked. Since this is a\nstatic configuration file, it does not support any logic or complex behavior, and is merely for\nsimple and common use cases, like CLIs.\n\ninfo\n\nJSON and YAML support was added in proto v0.42.\n\n## Create a plugin\n\nLet's start by creating a new plugin, and defining the `name` and `type` fields. The type can either\nbe `language`, `dependency-manager`, `package-manager`, or `cli`. For this example, we'll create a\nplugin for our fake product called Protostar, a CLI tool.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"name\": \"Protostar\",  \"type\": \"cli\"}\n```\n\nprotostar.toml\n\n```\nname = \"Protostar\"type = \"cli\"\n```\n\nprotostar.yaml\n\n```\nname: 'Protostar'type: 'cli'\n```\n\n### Platform variations\n\nNative tools are often platform specific, and proto supports this by allowing you to define\nvariations based on operating system using the `[platform]` section. For non-native tools, this\nsection can typically be skipped.\n\nThis section requires a mapping of Rust\n[`OS` strings](https://doc.rust-lang.org/std/env/consts/constant.OS.html) to platform settings. The\nfollowing settings are available:\n\n- `archs` - A list of architectures supported for this platform. If not provided, supports all archs.\n\n- `archive-prefix` - If the tool is distributed as an archive (zip, tar, etc), this is the name of the direct folder within the archive that contains the tool, and will be removed when unpacking the archive. If there is no prefix folder within the archive, this setting can be omitted.\n\n- `exes-dir` - A relative path to a directory that contains pre-installed executables.\n\n- `exe-path` - The path to the main executable binary within the archive (without the prefix). If the tool is distributed as a single binary, this setting can be typically omitted.\n\n- `checksum-file` - Name of the checksum file to verify the downloaded file with. If the tool does not support checksum verification, this setting can be omitted.\n\n- `download-file` (required) - Name of the file to download. [Learn more about downloading](#downloading-and-installing).\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"platform\": {    \"linux\": {      \"archivePrefix\": \"protostar-linux\",      \"exePath\": \"bin/protostar\",      \"checksumFile\": \"protostar-{arch}-unknown-linux-{libc}.sha256\",      \"downloadFile\": \"protostar-{arch}-unknown-linux-{libc}.tar.gz\"    },    \"macos\": {      \"archivePrefix\": \"protostar-macos\",      \"exePath\": \"bin/protostar\",      \"checksumFile\": \"protostar-{arch}-apple-darwin.sha256\",      \"downloadFile\": \"protostar-{arch}-apple-darwin.tar.xz\"    },    \"windows\": {      \"archivePrefix\": \"protostar-windows\",      \"exePath\": \"bin/protostar.exe\",      \"checksumFile\": \"protostar-{arch}-pc-windows-msvc.sha256\",      \"downloadFile\": \"protostar-{arch}-pc-windows-msvc.zip\"    }  }}\n```\n\nprotostar.toml\n\n```\n[platform][platform.linux]archive-prefix = \"protostar-linux\"exe-path = \"bin/protostar\"checksum-file = \"protostar-{arch}-unknown-linux-{libc}.sha256\"download-file = \"protostar-{arch}-unknown-linux-{libc}.tar.gz\"[platform.macos]archive-prefix = \"protostar-macos\"exe-path = \"bin/protostar\"checksum-file = \"protostar-{arch}-apple-darwin.sha256\"download-file = \"protostar-{arch}-apple-darwin.tar.xz\"[platform.windows]archive-prefix = \"protostar-windows\"exe-path = \"bin/protostar.exe\"checksum-file = \"protostar-{arch}-pc-windows-msvc.sha256\"download-file = \"protostar-{arch}-pc-windows-msvc.zip\"\n```\n\nprotostar.yaml\n\n```\nplatform:  linux:    archivePrefix: 'protostar-linux'    exePath: 'bin/protostar'    checksumFile: 'protostar-{arch}-unknown-linux-{libc}.sha256'    downloadFile: 'protostar-{arch}-unknown-linux-{libc}.tar.gz'  macos:    archivePrefix: 'protostar-macos'    exePath: 'bin/protostar'    checksumFile: 'protostar-{arch}-apple-darwin.sha256'    downloadFile: 'protostar-{arch}-apple-darwin.tar.xz'  windows:    archivePrefix: 'protostar-windows'    exePath: 'bin/protostar.exe'    checksumFile: 'protostar-{arch}-pc-windows-msvc.sha256'    downloadFile: 'protostar-{arch}-pc-windows-msvc.zip'\n```\n\nYou may have noticed tokens above, like `{arch}`. These are special tokens that are replaced with a\ndynamic value at runtime, based on the current host machine executing the code. The following tokens\nare available:\n\n- `{version}` - The currently resolved version, as a fully-qualified semantic or calendar version.\n\n- `{versionMajor}` / `{versionYear}` - Only the major version. v0.41.4\n\n- `{versionMinor}` / `{versionMonth}` - Only the minor version. v0.45.2\n\n- `{versionPatch}` / `{versionDay}` - Only the patch version. v0.45.2\n\n- `{versionPrerelease}` - The prerelease identifier, if applicable. Returns an empty string otherwise. v0.41.4\n\n- `{versionBuild}` - The build identifier, if applicable. Returns an empty string otherwise. v0.41.4\n\n- `{arch}` - The architecture of the host machine, like `x86_64`. These values map to Rust's [`ARCH` constant](https://doc.rust-lang.org/std/env/consts/constant.ARCH.html), but can be customized with [`install.arch`](#downloading-and-installing).\n\n- `{os}` - The operating system of the host machine, like `windows`. These values map to Rust's [`OS` constant](https://doc.rust-lang.org/std/env/consts/constant.OS.html).\n\n- `{libc}` - For Linux machines, this is the current libc implementation, either `gnu` or `musl`. v0.31.2\n\n### Downloading and installing\n\nA non-WASM plugin only supports downloading pre-built tools, typically as an archive, and does\nnot support building from source. The `[install]` section can be used to configure how the tool\nshould be downloaded and installed into the toolchain. The following settings are available:\n\n- `arch` - A mapping of Rust [`ARCH` strings](https://doc.rust-lang.org/std/env/consts/constant.ARCH.html) to custom values for the `{arch}` token. This is useful if the tool has different terminology.\n\n- `libc` - A mapping of custom values for the `{libc}` token.\n\n- `checksum-url` - A secure URL to download the checksum file for verification. If the tool does not support checksum verification, this setting can be omitted.\n\n- `checksum-url-canary` - A URL for canary releases.\n\n- `checksum-public-key` - Public key used for verifying checksums. Only used for `.minisig` files.\n\n- `download-url` (required) - A secure URL to download the tool/archive.\n\n- `download-url-canary` - A URL for canary releases.\n\n- `primary` - Configures the primary executable.\n\n- `secondary` - Configures secondary executables.\n\nThe URL settings support `{checksum_file}` and `{download_file}` tokens, which will be replaced with\nthe values from the `[platform]` section.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"install\": {    \"checksumUrl\": \"https://github.com/moonrepo/protostar/releases/download/v{version}/{checksum_file}\",    \"downloadUrl\": \"https://github.com/moonrepo/protostar/releases/download/v{version}/{download_file}\",    \"arch\": {      \"aarch64\": \"arm64\",      \"x86_64\": \"x64\"    }  }}\n```\n\nprotostar.toml\n\n```\n[install]checksum-url = \"https://github.com/moonrepo/protostar/releases/download/v{version}/{checksum_file}\"download-url = \"https://github.com/moonrepo/protostar/releases/download/v{version}/{download_file}\"[install.arch]aarch64 = \"arm64\"x86_64 = \"x64\"\n```\n\nprotostar.yaml\n\n```\ninstall:  checksumUrl: 'https://github.com/moonrepo/protostar/releases/download/v{version}/{checksum_file}'  downloadUrl: 'https://github.com/moonrepo/protostar/releases/download/v{version}/{download_file}'  arch:    aarch64: 'arm64'    x86_64: 'x64'\n```\n\n#### Executables\n\nThe available executables (bins and shims) can be customized with the `[install.exes]` section,\nwhich is required. This setting requires a map, where the key is the executable file name, and the\nvalue is an object of the following options:\n\n- `exe-path` - The file to execute, relative from the tool directory. On Windows, the `.exe` extension will automatically be appended. If you need more control over platform variance, use `[platform.*.exe-path]` instead.\n\n- `no-bin` - Do not symlink a binary in `~/.proto/bin`.\n\n- `no-shim`- Do not generate a shim in `~/.proto/shims`.\n\n- `parent-exe-name` - Name of a parent executable required to execute the executable path. For example, `node` is required for `.js` files.\n\n- `primary` - Is the main executable in the tool. There can only be 1 primary! v0.42.0\n\n- `shim-before-args` - Custom args to prepend to user-provided args within the generated shim.\n\n- `shim-after-args` - Custom args to append to user-provided args within the generated shim.\n\n- `shim-env-vars` - Custom environment variables to set when executing the shim.\n\nThis field supports both the required primary executable, and optional secondary executables. The\nprimary executable must be marked with `primary = true`.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"install\": {    \"exes\": {      \"protostar\": {        \"exePath\": \"bins/protostar\",        \"primary\": true,        \"shimBeforeArgs\": [          \"--verbose\"        ]      },      \"protostar-debug\": {        \"exePath\": \"bins/protostar-debug\",        \"noShim\": true      }    }  }}\n```\n\nprotostar.toml\n\n```\n[install][install.exes][install.exes.protostar]exe-path = \"bins/protostar\"primary = trueshim-before-args = [ \"--verbose\" ][install.exes.protostar-debug]exe-path = \"bins/protostar-debug\"no-shim = true\n```\n\nprotostar.yaml\n\n```\ninstall:  exes:    protostar:      exePath: 'bins/protostar'      primary: true      shimBeforeArgs:        - '--verbose'    protostar-debug:      exePath: 'bins/protostar-debug'      noShim: true\n```\n\n#### Global packages\n\nThe `[packages]` sections can be configured that provides information about where global packages\nare stored.\n\n- `globals-lookup-dirs` - A list of directories where global binaries are stored. This setting supports interpolating environment variables via the syntax `$ENV_VAR`.\n\n- `globals-prefix` - A string that all package names are prefixed with. For example, Cargo/Rust binaries are prefixed with `cargo-`.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"packages\": {    \"globalsLookupDirs\": [      \"$PROTOSTAR_HOME/bin\",      \"$HOME/.protostar/bin\"    ]  }}\n```\n\nprotostar.toml\n\n```\n[packages]globals-lookup-dirs = [ \"$PROTOSTAR_HOME/bin\", \"$HOME/.protostar/bin\" ]\n```\n\nprotostar.yaml\n\n```\npackages:  globalsLookupDirs:    - '$PROTOSTAR_HOME/bin'    - '$HOME/.protostar/bin'\n```\n\n### Resolving versions\n\nNow that the tool can be downloaded and installed, we must configure how to resolve available\nversions. Resolving is configured through the `[resolve]` section, which supports 2 patterns to\nresolve with: Git tags or a JSON manifest.\n\n#### Git tags\n\nTo resolve a list of available versions using Git tags, the following settings are available:\n\n- `git-url` (required) - The remote URL to fetch tags from.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"gitUrl\": \"https://github.com/moonrepo/protostar\"  }}\n```\n\nprotostar.toml\n\n```\n[resolve]git-url = \"https://github.com/moonrepo/protostar\"\n```\n\nprotostar.yaml\n\n```\nresolve:  gitUrl: 'https://github.com/moonrepo/protostar'\n```\n\n#### JSON manifest\n\nTo resolve a list of available versions using a JSON manifest, the following settings are available:\n\n- `manifest-url` (required) - A URL that returns a JSON response of all versions. This response must be an array of strings, or an array of objects.\n\n- `manifest-version-key` - If the response is an array of objects, this is the key to extract the version from. If the response is an array of strings, this setting can be omitted. Defaults to `version`.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"manifestUrl\": \"https://someregistry.com/protostar/versions.json\",    \"manifestVersionKey\": \"latest_version\"  }}\n```\n\nprotostar.toml\n\n```\n[resolve]manifest-url = \"https://someregistry.com/protostar/versions.json\"manifest-version-key = \"latest_version\"\n```\n\nprotostar.yaml\n\n```\nresolve:  manifestUrl: 'https://someregistry.com/protostar/versions.json'  manifestVersionKey: 'latest_version'\n```\n\n#### Versions and aliasesv0.36.0\n\nAs an alternative, we also support a static configuration of explicit versions and aliases. This is\nuseful if you have an internal tool that is relatively stable, or does not provide a means in which\nto extract version information.\n\n- `versions` - A list of versions.\n\n- `aliases` - A mapping of alias names to versions.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"versions\": [      \"1.2.3\",      \"1.2.4\",      \"1.2.5\"    ],    \"aliases\": {      \"stable\": \"1.2.4\"    }  }}\n```\n\nprotostar.toml\n\n```\n[resolve]versions = [ \"1.2.3\", \"1.2.4\", \"1.2.5\" ][resolve.aliases]stable = \"1.2.4\"\n```\n\nprotostar.yaml\n\n```\nresolve:  versions:    - '1.2.3'    - '1.2.4'    - '1.2.5'  aliases:    stable: '1.2.4'\n```\n\n#### Version patterns\n\nWhen a version is found, either from a git tag or manifest key, we attempt to parse it into a\n[valid version](/docs/proto/tool-spec) using a Rust based regex pattern and the `version-pattern` setting.\n\nThis pattern uses named regex capture groups (`(?...)`) to build the version, and to support\nfound versions that are not fully-qualified (they may be missing patch or minor versions). The\nfollowing groups are supported:\n\n- `major` / `year` - The major version number. Defaults to `0` if missing.\n\n- `minor` / `month` - The minor version number. Defaults to `0` if missing.\n\n- `patch` / `day` - The patch version number. Defaults to `0` if missing.\n\n- `pre` - The pre-release identifier, like \"rc.0\" or \"alpha.0\". Supports an optional leading `-`. Does nothing if missing.\n\n- `build` - The build metadata, like a timestamp. Supports an optional leading `+`. Does nothing if missing.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"resolve\": {    \"versionPattern\": \"^@protostar/cli@((?\\\\d+)\\\\.(?\\\\d+)\\\\.(?\n\\\\d+))\"  }}\n```\n\nprotostar.toml\n\n```\n[resolve]version-pattern = \"^@protostar/cli@((?\\\\d+)\\\\.(?\\\\d+)\\\\.(?\n\\\\d+))\"\n```\n\nprotostar.yaml\n\n```\nresolve:  versionPattern: '^@protostar/cli@((?\\d+)\\.(?\\d+)\\.(?\n\\d+))'\n```\n\nIf no named capture groups are found, the match at index `1` is used as the version.\n\n### Detecting versions\n\nAnd lastly, we can configure how to [detect a version](/docs/proto/detection) contextually at runtime, using\nthe `[detect]` setting. At this time, we only support 1 setting:\n\n- `version-files` - A list of version files to extract from. The contents of these files can only be the version string itself.\n\n- JSON\n- TOML\n- YAML\n\nprotostar.json\n\n```\n{  \"detect\": {    \"versionFiles\": [      \".protostar-version\",      \".protostarrc\"    ]  }}\n```\n\nprotostar.toml\n\n```\n[detect]version-files = [ \".protostar-version\", \".protostarrc\" ]\n```\n\nprotostar.yaml\n\n```\ndetect:  versionFiles:    - '.protostar-version'    - '.protostarrc'\n```\n\n## /docs/proto/plugins\n\nSource: https://moonrepo.dev/docs/proto/plugins\n\n# Plugins\n\nproto supports a pluggable architecture as a means for consumers to integrate and manage custom\ntools (languages, CLIs, etc) within proto's toolchain. It's not possible for proto to support\neverything in core directly, so plugins are a way for the community to extend the toolchain to\ntheir needs.\n\n## Enabling plugins\n\nPlugins can be enabled by configuring them in [`.prototools`](/docs/proto/config#plugins) files, within the\n`[plugins]` section. The map key is the plugin name in kebab-case, which is used as the\nbinary/tool name in proto, and also the name for configuration and cache purposes. The map value is\na [plugin locator string](/docs/guides/wasm-plugins#configuring-plugin-locations) that defines a\nprotocol and source location.\n\n.prototools\n\n```\n[plugins.tools] = \"\n://\"\n```\n\n## Creating plugins\n\nTo ease the plugin development process, proto supports 2 types of plugins, a\n[non-WASM configuration based plugin](/docs/proto/non-wasm-plugin) for basic use cases, and a\n[WASM based plugin](/docs/proto/wasm-plugin) for advanced use cases.\n\n## Publish a plugin\n\nproto's registry is currently powered by static JSON files located in our official\n[proto repository](https://github.com/moonrepo/proto/tree/master/registry). View that link for\ninformation on how to publish a plugin.\n\n## /docs/proto/tool-spec\n\nSource: https://moonrepo.dev/docs/proto/tool-spec\n\n# Tool specification\n\n3 min\n\nSince proto is a toolchain for multiple tools, each with differing version formats, we must align\nthem on a standard specification that can resolve and store safely. To handle this, we've\nimplemented our own solution called the tool and version specification. This specification currently\nsupports semantic and calendar based versions, each with their own guidelines and caveats.\n\ninfo\n\nIf you're implementing a plugin for a specific tool that has a different version format, you'll need\nto re-format it into one of the specifications below.\n\n## Backendsv0.47.0\n\nA backend is an internal system that allows proto to use plugins from 3rd-party package/version\nmanagers within proto, greatly expanding the amount of tools that proto can install and support.\nThis functionality is achieved through special WASM plugins under the hood.\n\nTo make use of a backend, prefix the tool identifier in `.prototools` with the backend's unique\nidentifier. For example, we can install Zig via asdf.\n\n.prototools\n\n```\n# >= v0.52\"asdf:zig\" = \"0.13.0\"# does\nnot use the `asdf` binary itself, and instead emulates the environment as best we can. Because of\nthis, some tools may not be usable through proto.\n\n.prototools\n\n```\n\"asdf:\" = \"20\"\n```\n\nBy default, the ID pinned in `.prototools` is the\n[asdf shortname](https://asdf-vm.com/plugins/create.html#plugin-shortname-index) used when cloning a\nrepository. If the ID is different than the shortname (`node` vs `nodejs`), you can configure the\n`asdf-shortname` setting.\n\n.prototools\n\n```\n\"asdf:node\" = \"20\"[tools.\"asdf.node\"]asdf-shortname = \"nodejs\"\n```\n\nThe following settings are supported:\n\n- `asdf-shortname` (string) - The name of the [asdf plugin](https://github.com/asdf-vm/asdf-plugins) if different than the configured ID.\n\n- `asdf-repository` (string) - The Git repository URL in which to locate [scripts](https://asdf-vm.com/plugins/create.html#scripts-overview). If not defined, is extracted from the shortname plugin index.\n\n- `exes` (string[]) - List of executable file names (relative from `bin`) to be linked as a shim/bin. If not defined, we'll automatically scan the `bin` directory.\n\n## Semantic versions\n\nThe most common format is [semver](https://semver.org/), also known as a semantic version. This\nformat requires major, minor, and patch numbers, with optional pre-release and build metadata.\n\n.prototools\n\n```\ntool = \"1.2.3\"\n```\n\n### Syntax\n\n- `..` - 1.2.3\n\n- `..-` - 1.2.3-alpha.0\n\n- `..-+` - 1.2.3-alpha.0+nightly456\n\n- `..+` - 1.2.3+nightly456\n\n### Guidelines\n\n- major, minor, patch - `0-9` of any length\n\n- pre, build - `a-z`, `0-9`, `-`, `.`\n\n[Learn more about this format!](https://semver.org/#backusnaur-form-grammar-for-valid-semver-versions)\n\n## Calendar versionsv0.37.0\n\nAnother popular format is [calver](https://calver.org/), also known as a calendar version, which\nuses the calendar year, month, and day as version numbers. This format also supports pre-release and\nbuild metadata, but with different syntax than semver.\n\n.prototools\n\n```\ntool = \"2025-02-26\"\n```\n\n### Syntax\n\n- `-` - 2024-02\n\n- `--` - 2024-02-26\n\n- `--.` - 2024-02-26.123\n\n- `--_` - 2024-02-26_123\n\n- `--.-` - 2024-02-26.123-alpha.0\n\n- `--_-` - 2024-02-26_123-alpha.0\n\n- `---` - 2024-02-26-alpha.0\n\n### Guidelines\n\n- year - `0-9` of 1-4 length If the year is not YYYY format, it will use the year 2000 as the base. For example, `24` becomes `2024`, and `124` becomes `2124`.\n\n- month - `0-9` of 1-2 length Supports with and without a leading zero (`02` vs `2`).\n\n- Does not support invalid months (`0` or `13`).\n\n- day - `0-9` of 1-2 length Can be omitted, even with build/pre.\n\n- Supports with and without a leading zero (`02` vs `2`).\n\n- Does not support invalid days (`0` or `32`).\n\n- build - `0-9` of any length Also known as a \"micro\" number.\n\n- The leading dot `.` format is preferred.\n\n- pre - `a-z`, `0-9`, `-`, `.`\n\n[Learn more about this format!](https://calver.org/#scheme)\n\n## Requirements and ranges\n\nBesides an explicit version, we also support partial versions known as version requirements or\nversion ranges. These are quite complex as we need to support both semver and calver in unison, as\nwell as support partial/incomplete numbers (missing patch/day, missing minor/month, etc). We do our\nbest to support as many combinations as possible.\n\n.prototools\n\n```\ntool-a = \"^1\"tool-b = \"~2.1\"tool-c = \">=2000-10\"\n```\n\n### Syntax\n\n- Requirement - `[]` - `1.2.3`, `>4.5`, `~3`, `^2000-10`, etc\n\n- AND range - `[,] ...` - `>=1, `, `>=`, ` If omitted, defaults to `~` when a partial version is provided (i.e. allow the minimum specified version component to increase)\n\n- If a full version is provided, defaults to `^` (i.e. allow any newer version that is nominally compatible)\n\n- To specify an exact version, use the `=` operator explicitly.\n\n- pattern Dot-separated semver, with optional major and patch numbers.\n\n- Dash-separated calver, with optional month and day numbers.\n\n- Pre-release and build metadata are only supported when suffixed to full versions.\n\nFor example, if you want to use `npm` 11.6.2 but 11.6.3 has an issue, use:\n`npm = \"^11.6.4 || =11.6.2\"`\n\n## /docs/proto/tools\n\nSource: https://moonrepo.dev/docs/proto/tools\n\n# Supported tools\n\n## Built-in\n\nThe following tools are supported natively in proto's toolchain.\n\n## Third-party\n\n[Add tool](https://github.com/moonrepo/proto/tree/master/registry)\n\nAdditional tools can be supported through [plugins](/docs/proto/plugins).\n\n## /docs/proto/wasm-plugin\n\nSource: https://moonrepo.dev/docs/proto/wasm-plugin\n\n# WASM plugin\n\nIf you want more control over how your tool works, a WASM plugin is the way to go.\n\nsuccess\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins) for more information on how our WASM\nplugins work, critical concepts to know, and more. Once you have a good understanding, you may\ncontinue this proto specific guide.\n\n## Concepts\n\nThe following concepts are unique to proto, but be sure to also read about the general concepts in\nour [WASM plugins guide](/docs/guides/wasm-plugins#concepts).\n\n### Tool context\n\nFor plugin functions, we provide what we call the tool context, which is information that is\nconstantly changing depending on the current step or state of proto's execution. The context cannot\nbe accessed with a stand-alone function, and is instead passed as a `context` field in the input of\nmany plugin functions.\n\n```\n#[plugin_fn]pub fn download_prebuilt(Json(input): Json) -> FnResult> {    let version = input.context.version;    // ...}\n```\n\nThe following fields are available on the\n[context object](https://docs.rs/proto_pdk/latest/proto_pdk/struct.ToolContext.html):\n\n- `proto_version` - The version of proto executing the plugin. Note that this version may be for the [`proto_core` crate](https://crates.io/crates/proto_core), and not the CLI. Patch numbers will drift, but major and minor numbers should be in sync.\n\n- `temp_dir` - A virtual path to a temporary directory unique to this tool. v0.45.0\n\n- `tool_dir` - A virtual path to the tool's directory for the current version.\n\n- `version` - The current version or alias. If not resolved, will be \"latest\".\n\ncaution\n\nThe `version` field is either a fully-qualified version (1.2.3), an alias (\"latest\", \"stable\"), or\ncanary (\"canary\"). Be sure to account for all these variations when implementing plugin functions!\n\n### Tool configuration\n\nUsers can configure tools through the [`[tools.*]`](/docs/proto/config#tools) section of their `.prototools`,\nwhich can then be accessed within the WASM plugin using the\n[`get_tool_config`](https://docs.rs/proto_pdk/latest/proto_pdk/fn.get_tool_config.html) function.\n\nThis function requires a struct to deserialize into. It should implement `Default`, enable serde\ndefaults, and map keys from `kebab-case`. If you want to error on unknown settings, also enable\n`deny_unknown_fields`.\n\n```\n#[derive(Debug, Default, serde::Deserialize)]#[serde(default, deny_unknown_fields, rename_all = \"kebab-case\")]struct NodeToolConfig {    pub bundled_npm: bool,}let config = get_tool_config::()?;config.bundled_npm;\n```\n\n### Backend configurationv0.53.0\n\nLike tool configuration, users can configure backends through the\n[`[backends.*]`](/docs/proto/config#backends) section of their `.prototools`, which can then be accessed\nwithin the WASM plugin using the\n[`get_backend_config`](https://docs.rs/proto_pdk/latest/proto_pdk/fn.get_backend_config.html)\nfunction.\n\n```\n#[derive(Debug, Default, serde::Deserialize)]#[serde(default, deny_unknown_fields, rename_all = \"kebab-case\")]struct ExampleBackendConfig {    pub setting: bool,}let config = get_backend_config::()?;\n```\n\n## Creating a plugin\n\nsuccess\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins#creating-a-plugin) for steps on how to\ncreate a Rust based plugin.\n\n## Implementing tool functions\n\nPlugins are powered by a set of functions that are called from the host, and are annotated with\n`#[plugin_fn]`. These are known as plugin functions, or guest functions.\n\n### Registering the tool\n\nThe first step in a plugin's life-cycle is to register metadata about the plugin with the\n`register_tool` function. This function is called immediately after a plugin is loaded at runtime,\nand must return a human-readable name and plugin type.\n\n```\n#[plugin_fn]pub fn register_tool(_: ()) -> FnResult> {    Ok(Json(RegisterToolOutput {        name: \"Node.js\".into(),        type_of: PluginType::Language,        minimum_proto_version: Some(Version::new(0, 42, 0)),        plugin_version: Version::parse(env!(\"CARGO_PKG_VERSION\")).ok(),        ..RegisterToolOutput::default()    }))}\n```\n\nThis function also receives the plugin ID as input, allowing for conditional logic based on the ID.\nThe ID is the [key the plugin was configured with](/docs/proto/plugins#enabling-plugins), and what is passed\nto `proto` commands (e.g. `proto install `).\n\n```\n#[plugin_fn]pub fn register_tool(Json(input): Json) -> FnResult> {  input.id  // ...}\n```\n\n### Configuration schemav0.53.0\n\nIf you are using [tool configuration](#tool-configuration), you can register the shape of the\nconfiguration using the [`schematic`](https://crates.io/crates/schematic) crate and the\n`define_tool_config` function. This shape will be used to generate outputs such as JSON schemas, or\nTypeScript types.\n\n```\n#[plugin_fn]pub fn define_tool_config(_: ()) -> FnResult> {    Ok(Json(DefineToolConfigOutput {        schema: Some(schematic::SchemaBuilder::generate::()),    }))}\n```\n\nSchematic is a heavy library, so we suggest adding the dependency like so:\n\n```\n[dependencies]schematic = { version = \"\", default-features = false, features = [\"schema\"] }\n```\n\n### Installation strategy\n\n#### Downloading pre-builts\n\nOur plugin layer only supports downloading pre-built tools, typically as an archive, and does\nnot support building from source. The `download_prebuilt` function must be defined, whichs\nconfigures how the tool should be downloaded and installed.\n\nThe following fields are available:\n\n- `archive_prefix` - If the tool is distributed as an archive (zip, tar, etc), this is the name of the direct folder within the archive that contains the tool, and will be removed when unpacking the archive. If there is no prefix folder within the archive, this setting can be omitted.\n\n- `download_url` (required) - A secure URL to download the tool/archive.\n\n- `download_name` - File name of the archive to download. If not provided, will attempt to extract it from the URL.\n\n- `checksum` - The checksum hash itself. Will be used if no other option was provided. v0.47.0\n\n- `checksum_url` - A secure URL to download the checksum file for verification. If the tool does not support checksum verification, this setting can be omitted.\n\n- `checksum_public_key` - Public key used for verifying checksums. Only used for `.minisig` files.\n\n```\n#[plugin_fn]pub fn download_prebuilt(Json(input): Json) -> FnResult> {     let env = get_host_environment()?;    check_supported_os_and_arch(        NAME,        &env,        permutations! [            HostOS::Linux => [HostArch::X64, HostArch::Arm64, HostArch::Arm, HostArch::Powerpc64, HostArch::S390x],            HostOS::MacOS => [HostArch::X64, HostArch::Arm64],            HostOS::Windows => [HostArch::X64, HostArch::X86, HostArch::Arm64],        ],    )?;    let version = input.context.version;    let arch = env.arch;    let os = env.os;    let prefix = match os {        HostOS::Linux => format!(\"node-v{version}-linux-{arch}\"),        HostOS::MacOS => format!(\"node-v{version}-darwin-{arch}\"),        HostOS::Windows => format!(\"node-v{version}-win-{arch}\"),        other => {            return Err(PluginError::UnsupportedPlatform(\"Node.js\".into(), other.into()))?;        }    };    let filename = if os == HostOS::Windows {        format!(\"{prefix}.zip\")    } else {        format!(\"{prefix}.tar.xz\")    };    Ok(Json(DownloadPrebuiltOutput {        archive_prefix: Some(prefix),        download_url: format!(\"https://nodejs.org/dist/v{version}/{filename}\"),        download_name: Some(filename),        checksum_url: Some(format!(\"https://nodejs.org/dist/v{version}/SHASUMS256.txt\")),        ..DownloadPrebuiltOutput::default()    }))}\n```\n\n##### Unpacking an archive\n\nOur plugin layer will do its best to detect file extensions, unpack the downloaded file (if an\narchive), and install the tool to the correct directory. However, we're unable to account for all\nedge cases, so for situations where the install params above are not sufficient, you may define an\n`unpack_archive` function.\n\nThis function receives an input with the following fields:\n\n- `input_file` - Virtual path to the downloaded file. Maps to `~/.proto/temp//`.\n\n- `output_dir` - Virtual directory to unpack the archive into, or copy the binary to. Maps to `~/.proto/tools//`.\n\n```\n#[plugin_fn]pub fn unpack_archive(Json(input): Json) -> FnResult {    untar(input.input_file, input.output_dir)?;    Ok(())}\n```\n\n#### Build from source\n\nComing soon!\n\n#### Native installation\n\nFor tools that can't be installed through downloading pre-builts or building from source, and\nrequire a more unique/native approach (say running a script), you may define the `native_install`\nfunction.\n\nThis function allows you to execute host commands, make HTTP requests, and more, to install the\ntool. All that's required to return whether the installation was successful or not, and an optional\nerror message.\n\n```\n#[plugin_fn]pub fn native_install(Json(input): Json) -> FnResult> {    let result = exec_captured(\"command\", [\"args\"])?;    Ok(Json(NativeInstallOutput {        installed: result.exit_code == 0,        error: if result.stderr.is_empty() {            None        } else {            Some(result.stderr)        },        ..Default::default()    }))}\n```\n\n### Locating executables\n\nEven though a tool has been installed, we must inform proto of where to find executables. This can\nbe achieved with the required `locate_executables` function. The `exes` field defines the location\nof the executables, relative from the installation directory.\n\n```\n#[plugin_fn]pub fn locate_executables(    Json(_): Json,) -> FnResult> {    let env = get_host_environment()?;    Ok(Json(LocateExecutablesOutput {        exes: HashMap::from_iter([            // Primary            (                \"node\".into(),                ExecutableConfig::new_primary(                    // Helper that chooses between distinct Unix or Windows values                    env.os.for_native(\"bin/node\", \"node.exe\"),                    // Or the same value with optional Windows extension                    // env.os.get_file_name(\"node\", \"exe\")                )            ),            // Secondary            (                \"corepack\".into(),                ExecutableConfig::new(env.os.for_native(\"bin/corepack\", \"corepack.exe\"))            ),        ]),        ..LocateExecutablesOutput::default()    }))}\n```\n\nThe main executable of the tool must be marked as primary, either with\n`ExecutableConfig::new_primary`, or setting the `ExecutableConfig.primary` field to true.\n\nFurthermore, the `locate_executables` function can define a list of lookups for the globals\ninstallation directory. proto will loop through each lookup, and return the first directory that\nexists on the current file system. proto will also expand environment variables in the format of\n`$VAR_NAME`. If a variable is not defined, or has an empty value, the lookup will be skipped. To\ndemonstrate this, we'll use [Deno](https://deno.land/manual@v1.35.0/tools/script_installer).\n\n```\n#[plugin_fn]pub fn locate_executables(    Json(_): Json,) -> FnResult> {    let env = get_host_environment()?;    Ok(Json(LocateExecutablesOutput {        globals_lookup_dirs: vec![\"$DENO_INSTALL_ROOT/bin\".into(), \"$HOME/.deno/bin\".into()],        // ...        ..LocateExecutablesOutput::default()    }))}\n```\n\n### Loading and resolving versions\n\nNow that the tool can be downloaded and installed, we must configure how to resolve available\nversions to actually be installed. To provide a list of versions and language specific aliases, the\n`load_versions` function must be defined.\n\n```\n#[plugin_fn]pub fn load_versions(Json(_): Json) -> FnResult> {    let mut output = LoadVersionsOutput::default();    let response: Vec = fetch_json(\"https://nodejs.org/dist/index.json\")?;    for (index, item) in response.iter().enumerate() {        let version = VersionSpec::parse(&item.version[1..])?; // Starts with v        if index == 0 {            output.latest = Some(version.clone());        }        output.versions.push(version);    }    Ok(Json(output))}\n```\n\nFurthermore, we support an optional function named `resolve_version`, that can be defined to\nintercept the version resolution process. This function receives an input with an initial candidate,\neither an alias or version, and can replace it with a new candidate. The candidate must be a valid\nalias or version as defined in `load_versions`.\n\n```\n#[plugin_fn]pub fn resolve_version(    Json(input): Json,) -> FnResult> {    let mut output = ResolveVersionOutput::default();    if let UnresolvedVersionSpec::Alias(alias) = input.initial {        let candidate = if alias == \"node\" {            \"latest\"        } else if alias == \"lts-*\" || alias == \"lts/*\" {            \"stable\"        } else if alias.starts_with(\"lts-\") || alias.starts_with(\"lts/\") {            &alias[4..]        } else {            return Ok(Json(output));        };        output.candidate = Some(UnresolvedVersionSpec::Alias(candidate.to_owned()));    }    Ok(Json(output))}\n```\n\n### Detecting versions\n\nAnd lastly, we can configure how to [detect a version](/docs/proto/detection) contextually at runtime, using\nthe `detect_version_files` function and optional `parse_version_file` function. The\n`detect_version_files` function can return a list of files to locate within a directory.\n\n```\n#[plugin_fn]pub fn detect_version_files(input: Json) -> FnResult> {    Ok(Json(DetectVersionOutput {        files: vec![            \".nvmrc\".into(),            \".node-version\".into(),            \"package.json\".into(),        ],        ignore: vec![\"node_modules\".into()],    }))}\n```\n\nBy default our plugin layer will assume the version file's contents contain the literal version, and\nnothing else, like \"1.2.3\". If any of the files in the `detect_version_files` list require custom\nparsing (for example, `package.json` above), you can define the `parse_version_file` function.\n\nThis function receives the file name and contents as input, and must return the parsed version (if\napplicable).\n\n```\n#[plugin_fn]pub fn parse_version_file(Json(input): Json\n) -> FnResult {    let mut version = None;    if input.file == \"package.json\" {        let json: PackageJson = serde_json::from_str(&input.content)?;        if let Some(engines) = json.engines {            if let Some(constraint) = engines.get(\"node\") {                version = Some(UnresolvedVersionSpec::parse(constraint)?);            }        }    } else {        version = Some(UnresolvedVersionSpec::parse(input.content.trim())?);    }    Ok(Json(ParseVersionFileOutput { version }))}\n```\n\n## Implementing backend functions\n\nPlugins are powered by a set of functions that are called from the host, and are annotated with\n`#[plugin_fn]`. These are known as plugin functions, or guest functions.\n\n### Registering the backendv0.52.0\n\nBackends will also need to implement [`register_tool`](#registering-the-tool) for the managed tool\nwithin the backend.\n\nThe first step in a plugin's life-cycle is to register metadata about the plugin with the\n`register_backend` function. This function requires a unique backend identifier, which is typically\nthe identifier of the current tool being managed.\n\n```\n#[plugin_fn]pub fn register_backend(    Json(input): Json,) -> FnResult> {    Ok(Json(RegisterBackendOutput {        backend_id: get_plugin_id()?,        ..Default::default()    }))}\n```\n\n#### Referencing install scripts\n\nSome tools rely on command line scripts for installation, like `asdf`. To make these scripts\navailable (at `~/.proto/backends`), you can define the `source` field in the\n`RegisterBackendOutput`, which accepts a Git repository URL, or an HTTP URL to an archive to unpack.\nAdditionally, the `exes` field must be defined with a list of scripts that will be executed within\nthe backend.\n\nAs an example, here's how the `asdf` backend is implemented:\n\n```\n#[plugin_fn]pub fn register_backend(    Json(input): Json,) -> FnResult> {    Ok(Json(RegisterBackendOutput {        backend_id: get_plugin_id()?,        exes: vec![            \"bin/download\".into(),            \"bin/exec-env\".into(),            \"bin/install\".into(),            \"bin/latest-stable\".into(),            \"bin/list-all\".into(),            \"bin/list-bin-paths\".into(),            \"bin/list-legacy-filenames\".into(),            \"bin/parse-legacy-file\".into(),            \"bin/uninstall\".into(),        ],        source: Some(SourceLocation::Git(GitSource {            url: \"https://github.com/asdf-vm/asdf-nodejs.git\".into(),            ..Default::default()        })),    }))}\n```\n\nThese scripts can then be accessed on the file system using the following virtual path.\n\n```\nPathBuf::from(\"/proto/backends///bin/install\")\n```\n\n### Configuration schemav0.53.0\n\nIf you are using [backend configuration](#backend-configuration), you can register the shape of the\nconfiguration using the [`schematic`](https://crates.io/crates/schematic) crate and the\n`define_backend_config` function. This shape will be used to generate outputs such as JSON schemas,\nor TypeScript types.\n\n```\n#[plugin_fn]pub fn define_backend_config(_: ()) -> FnResult> {    Ok(Json(DefineBackendConfigOutput {        schema: Some(schematic::SchemaBuilder::generate::()),    }))}\n```\n\nSchematic is a heavy library, so we suggest adding the dependency like so:\n\n```\n[dependencies]schematic = { version = \"\", default-features = false, features = [\"schema\"] }\n```\n\n## Testing\n\nThe best way to test the plugin is to execute it through `proto` directly. To do this, you'll need\nto configure a `.prototools` file at the root of your plugin's repository that maps the plugin to a\ndebug build:\n\n```\n[plugins.tools] = \"file://./target/wasm32-wasip1/debug/.wasm\"\n```\n\nAnd everytime you make a change to the plugin, you'll need to rebuild it with:\n\n```\ncargo build --target wasm32-wasip1\n```\n\nWith these 2 pieces in place, you can now execute `proto` commands. Be sure you're running them from\nthe directory with the `.prototools` file, and that you're passing `--log trace`. Logs are extremely\nhelpful for figuring out what's going on.\n\n```\nproto --log trace install proto --log trace list-remote ...\n```\n\n### Unit tests\n\nTesting WASM plugins is a bit tricky, but we've taken it upon ourselves to streamline this process\nas much as possible with built-in test utilities, and Rust macros for generating common test cases.\nTo begin, install all necessary development dependencies:\n\n```\ncargo add --dev proto_pdk_test_utils starbase_sandbox tokio\n```\n\nAnd as mentioned above, everytime you make a change to the plugin, you'll need to rebuild it with:\n\n```\ncargo build --target wasm32-wasip1\n```\n\n#### Testing plugin functions\n\nThe common test case is simply calling plugin functions with a provided input and asserting the\noutput is correct. This can be achieved by creating a plugin instance with `create_plugin` and\ncalling the appropriate method.\n\n```\nuse proto_pdk_test_utils::*;use starbase_sandbox::create_empty_sandbox;#[tokio::test(flavor = \"multi_thread\")]async fn registers_metadata() {    let sandbox = create_empty_proto_sandbox();    let plugin = sandbox.create_plugin(\"id\").await;    assert_eq!(        plugin.register_tool(RegisterToolInput::default()).await,        RegisterToolOutput {            name: \"Name\".into(),            ..RegisterToolOutput::default()        }    );}\n```\n\ninfo\n\nWe suggest using this pattern for static functions that return a deterministic output from a\nprovided input, and not for dynamic functions that make HTTP requests or execute host commands.\n\n#### Generating cases from macros\n\nTo reduce the burden of writing custom tests for common flows, like downloading a pre-built,\nresolving versions, and generating shims, we provide a set of Rust decl macros that will generate\nthe tests for you.\n\nTo test downloading and installing, use `generate_download_install_tests!`. This macro requires a\nplugin ID and a real version to test with.\n\n```\nuse proto_pdk_test_utils::*;generate_download_install_tests!(\"id\", \"1.2.3\");\n```\n\nTo test version resolving, use `generate_resolve_versions_tests!`. This macro requires a plugin ID,\nand a mapping of version/aliases assertions to expectations.\n\n```\ngenerate_resolve_versions_tests!(\"id\", {    \"0.4\" => \"0.4.12\",    \"0.5.1\" => \"0.5.1\",    \"stable\" => \"1.0.0\",});\n```\n\nTo test installing and uninstalling globals, use `generate_globals_test!`. This macro requires a\nplugin ID, the dependency to install, and an optional environment variable to the globals directory.\n\n```\n// Doesn't support all use cases! If this doesn't work, implement a test case manually.generate_globals_test!(\"id\", \"dependency\", \"GLOBAL_INSTALL_ROOT\");\n```\n\nAnd lastly, to test shims, use `generate_shims_test!`. This requires a plugin ID and a list of shim\nfile names. This macro generates snapshots using [Insta](https://insta.rs/).\n\n```\ngenerate_shims_test!(\"id\", [\"primary\", \"secondary\"]);\n```\n\n## Building and publishing\n\nsuccess\n\nRefer to our [official WASM guide](/docs/guides/wasm-plugins#building-and-publishing) for steps on how\nto build and publish your plugin.\n\n## Resources\n\nSome helpful resources for learning about and building plugins.\n\n- [Official proto WASM plugins](https://github.com/moonrepo/plugins)\n\n- Plugin development kit [`proto_pdk` docs](https://docs.rs/proto_pdk/)\n\n- [`proto_pdk_test_utils` docs](https://docs.rs/proto_pdk_test_utils/)\n\n## /docs/proto/workflows\n\nSource: https://moonrepo.dev/docs/proto/workflows\n\n# Workflows\n\nWith proto, we provide multiple workflows for everyday use for you to choose from. They can be used\nindividually, or together, it's up to you!\n\n## Shims\n\nproto is primarily powered by the industry standard concept of shims. For each tool installed in\nproto, a shim file will exist at `~/.proto/shims` for the primary executable, and some secondary\nexecutables. Shims are not symlinks to the tool's binary, but are thin wrappers around\n[`proto run`](/docs/proto/commands/run), enabling [runtime version detection](/docs/proto/detection) on every\ninvocation! For example, these are equivalent:\n\n```\n$ proto run node -- --version20.0.0$ node --version20.0.0$ which node~/.proto/shims/node\n```\n\n### Setup\n\nTo make use of shims, prepend the `~/.proto/shims` directory to `PATH` in your shell profile. This\nmust come before the [bin directory](#binary-linking) if using both.\n\nIf you're using or plan to use [shell activation](#shell-activation), the `PATH` configuration\nhappens automatically, but shell activation will only work if the `proto` command is accessible,\nwhich requires `~/.proto/bin` to be in your `PATH`.\n\n## Binary linking\n\nAlternatively, we also support a non-shim based approach, which creates symlinks to a versioned\ntool's primary and secondary executables. For each tool installed in proto, a symlink will exist at\n`~/.proto/bin`.\n\n```\n$ node --version23.1.0$ which node~/.proto/bin/node -> ~/.proto/tools/node/23.1.0/bin/node\n```\n\nWhen a tool is installed into proto, we symlink many binaries based on all the versions that are\ninstalled in the toolchain. The primary binary will always point to the highest installed version,\nwhile we also create binaries for the highest major, and highest major + minor combinations. For\nexample:\n\n- `~/.proto/bin/node` - Points to the highest version.\n\n- `~/.proto/bin/node-` - Points to the highest version within that major range (`~major`). Is created for each separate major version, for example: `node-20`, `node-22`.\n\n- `~/.proto/bin/node-.` - Points to the highest version within that major + minor range (`~major.minor`). Is created for each separate major + minor version, for example: `node-20.1`, `node-22.4`.\n\n- `~/.proto/bin/node-canary` - Points to a canary install, if it exists.\n\n```\n$ node-22 --version22.5.1$ which node-22~/.proto/bin/node-22 -> ~/.proto/tools/node/22.5.1/bin/node\n```\n\ninfo\n\nNot all tools support symlinking a binary, as not all files are executable. For example, most\nNode.js package managers currently do not support this, as JavaScript files are not executable\n(especially on Windows). Shims are required for these tools.\n\n### Setup\n\nTo make use of bins, prepend the `~/.proto/bin` directory to `PATH` in your shell profile. This\nmust come after the [shim directory](#shims) if using shims.\n\nIf you're using or plan to use [shell activation](#shell-activation), the `PATH` configuration\nhappens automatically, but shell activation will only work if the `proto` command is accessible,\nwhich requires `~/.proto/bin` to be in your `PATH`.\n\nwarning\n\nThis directory must always exist in `PATH`, as the official proto binaries `~/.proto/bin/proto` and\n`~/.proto/bin/proto-shim` are located here. If you move those binaries to another location, you can\nomit `~/.proto/bin` from `PATH` if you like.\n\n## Shell activationv0.38.0\n\nOur last workflow is what we call shell activation (or shell hooks), and it's where the proto\nenvironment is setup/reset every time you change directories. If you're coming from another version\nmanager, you may be familiar with this kind of workflow.\n\nSo how does this work exactly? In your shell profile, you'll evaluate a call to\n[`proto activate `](/docs/proto/commands/activate), which generates a bunch of shell specific syntax\nthat registers a hook for \"run this code when the current directory or prompt line changes\". Once\nthis hook is registered and you run `cd` (for example), proto will...\n\n- Load all `.prototools` files\n\n- Extract tools with a [configured version](/docs/proto/config#pinning-versions)\n\n- For each tool: Load associated WASM plugin\n\n- Export environment variables based on [`[env]`](/docs/proto/config#env) and [`[tools.*.env]`](/docs/proto/config#toolsenv)\n\n- Prepend `PATH` with tool-specific directories (like local and global executables) for the detected version\n\n```\n$ cd /some/path && node --version20.0.0$ cd /another/path && node --version18.0.0\n```\n\n### Setup\n\nView the [`proto activate`](/docs/proto/commands/activate#setup) documentation for information on how to setup\nyour shell profile for this workflow.\n\n## Comparison\n\nThe workflows above may come across as information overload, so we've provided the following\ncomparison table outlining the features each workflow supports.\n\nShims Bins Activate\n\nRuntime version detection    only when the hook triggers\n\nSupports multiple versions   \n\nFixed to a single version  with arg or env var   if not using shims\n\nIncludes all tool executables   \n\nIncludes tool globals/packages   \n\nExports environment variables   \n\nPrepends `PATH`   \n\nCan pin proto's version   \n\n## /docs/run-task\n\nSource: https://moonrepo.dev/docs/run-task\n\n# Run a task\n\n2 min\n\nEven though we've [created a task](/docs/create-task), it's not useful unless we run it, which is done\nwith the [`moon run `](/docs/commands/run) command. This command requires a single argument, a\n[primary target](/docs/concepts/target), which is the pairing of a scope and task name. In the example\nbelow, our project is `app`, the task is `build`, and the target is `app:build`.\n\n```\n$ moon run app:build\n```\n\nWhen this command is ran, it will do the following:\n\n- Generate a directed acyclic graph, known as the action (dependency) graph.\n\n- Insert [`deps`](/docs/config/project#deps) as targets into the graph.\n\n- Insert the primary target into the graph.\n\n- Run all tasks in the graph in parallel and in topological order (the dependency chain).\n\n- For each task, calculate [hashes](/docs/concepts/cache) and either: On cache hit, exit early and return the last run.\n\n- On cache miss, run the task and generate a new cache.\n\n## Running dependents\n\nmoon will always run upstream dependencies ([`deps`](/docs/config/project#deps)) before running the\nprimary target, as their outputs may be required for the primary target to function correctly.\n\nHowever, if you're working on a project that is shared and consumed by other projects, you may want\nto verify that downstream dependents have not been indirectly broken by any changes. This can be\nachieved by passing the `--dependents` option, which will run dependent targets after the primary\ntarget.\n\n```\n$ moon run app:build --dependents\n```\n\n## Running based on affected files only\n\nBy default [`moon run`](/docs/commands/run) will always run the target, regardless if files have\nactually changed. However, this is typically fine because of our\n[smart hashing & cache layer](/docs/concepts/cache). With that being said, if you'd like to only run a\ntarget if files have changed, pass the `--affected` flag.\n\n```\n$ moon run app:build --affected\n```\n\nUnder the hood, we extract locally touched (created, modified, staged, etc) files from your\nconfigured [VCS](/docs/config/workspace#vcs), and exit early if no files intersect with the task's\n[inputs](/docs/config/project#inputs).\n\n### Using remote changes\n\nIf you'd like to determine affected files based on remote changes instead of local changes, pass the\n`--remote` flag. This will extract touched files by comparing the current `HEAD` against the\n[`vcs.defaultBranch`](/docs/config/workspace#defaultbranch).\n\n```\n$ moon run app:build --affected --remote\n```\n\n### Filtering based on change status\n\nWe can take this a step further by filtering down affected files based on a change status, using the\n`--status` option. This option accepts the following values: `added`, `deleted`, `modified`,\n`staged`, `unstaged`, `untracked`. If not provided, the option defaults to all.\n\n```\n$ moon run app:build --affected --status deleted\n```\n\nMultiple status can be provided by passing the `--status` option multiple times.\n\n```\n$ moon run app:build --affected --status deleted --status modified\n```\n\n## Passing arguments to the underlying command\n\nIf you'd like to pass arbitrary arguments to the underlying task command, in addition to the already\ndefined [`args`](/docs/config/project#args), you can pass them after `--`. These arguments are appended\nas-is.\n\n```\n$ moon run app:build -- --force\n```\n\nThe `--` delimiter and any arguments must be defined last on the command line.\n\n## Advanced run targeting\n\nBy this point you should have a basic understanding of how to run tasks, but with moon, we want to\nprovide support for advanced workflows and development scenarios. For example, running a target in\nall projects:\n\n```\n$ moon run :build\n```\n\nOr perhaps running a target based on a query:\n\n```\n$ moon run :build --query \"language=[javascript, typescript]\"\n```\n\nJump to the official [`moon run` documentation](/docs/commands/run) for more examples!\n\n## Next steps\n\n[Migrate to moon](/docs/migrate-to-moon)[Learn about tasks](/docs/concepts/task)[Learn about `moon run`](/docs/commands/run)\n\n## /docs/setup-toolchain\n\nSource: https://moonrepo.dev/docs/setup-toolchain\n\n# Setup toolchain\n\n5 min\n\nOne of moon's most powerful features is the [toolchain](/docs/concepts/toolchain), which automatically\nmanages, downloads, and installs Node.js and other languages behind the scenes using\n[proto](/proto). It also enables [advanced functionality](/docs/how-it-works/languages#tier-2--platform)\nfor task running based on the platform (language and environment combination) it runs in.\n\nThe toolchain is configured with [`.moon/toolchains.yml`](/docs/config/toolchain).\n\ntip\n\nChange the language dropdown at the top right to switch the examples!\n\n## How it works\n\nFor more information on the toolchain, our tier based support, and how languages integrate into\nmoon, refer to the official [\"how it works\" language guide](/docs/how-it-works/languages) and the\n[toolchain concept](/docs/concepts/toolchain) documentation!\n\ninfo\n\nThe toolchain is optional but helps to solve an array of issues that developers face in their\nday-to-day.\n\n## Enabling a toolchain\n\nBy default all tasks run through the\n[system toolchain](/docs/how-it-works/languages#system-language-and-toolchain) and inherit no special\nfunctionality. If you want to take advantage of this functionality, like dependency hashing, package\nshorthand execution, and lockfile management, you'll need to enable the toolchain in\n[`.moon/toolchains.yml`](/docs/config/toolchain). Otherwise, you can skip to the\n[create a task](/docs/create-task) guide.\n\nBegin by declaring the necessary configuration block, even if an empty object! This configuration\ncan also be injected using the [`moon toolchain add `](/docs/commands/toolchain/add) command\n(doesn't support all languages).\n\n.moon/toolchains.yml\n\n```\njavascript:  packageManager: 'yarn'node: {}yarn: {}\n```\n\nAlthough we've enabled the toolchain, language binaries must exist on `PATH` for task execution to\nfunction correctly. Continue reading to learn how to automate this flow using tier 3 support.\n\n## Automatically installing a tool\n\nOne of the best features of moon is its integrated toolchain and automatic download and installation\nof programming languages (when supported), for all developers and machines that moon runs on. This\nfeature solves the following pain points:\n\n- Developers running tasks using different versions of languages.\n\n- Version drift of languages between machines.\n\n- Languages being installed through different version managers or install scripts.\n\n- Language binaries not existing on `PATH`.\n\n- How shell profiles should be configured.\n\nIf you have dealt with any of these pain points before and would like to eliminate them for you and\nall your developers, you can try enabling moon's tier 3 support for supported tools. This is easily\ndone by defining the `version` field for each toolchain.\n\n.moon/toolchains.yml\n\n```\njavascript:  packageManager: 'yarn'node:  version: '20.0.0'yarn:  version: '4.0.0'\n```\n\nWhen the `version` field is configured, moon will download and install the tool when a related task\nis executed for the first time! It will also set the correct `PATH` lookups and environment\nvariables automatically. Amazing right?\n\n## Next steps\n\n[Create a task](/docs/create-task)[Configure `.moon/toolchains.yml` further](/docs/config/toolchain)[Learn about the toolchain](/docs/concepts/toolchain)\n\n## /docs/setup-workspace\n\nSource: https://moonrepo.dev/docs/setup-workspace\n\n# Setup workspace\n\n2 min\n\nOnce moon has been [installed](/docs/install), we must setup the [workspace](/docs/concepts/workspace),\nwhich is denoted by the `.moon` folder  this is known as the workspace root. The workspace is in\ncharge of:\n\n- Integrating with a version control system.\n\n- Defining configuration that applies to its entire tree.\n\n- Housing [projects](/docs/concepts/project) to build a [project graph](/docs/how-it-works/project-graph).\n\n- Running tasks with the [action graph](/docs/how-it-works/action-graph).\n\n## Initializing the repository\n\nLet's scaffold and initialize moon in a repository with the [`moon init`](/docs/commands/init) command.\nThis should typically be ran at the root, but can be nested within a directory.\n\n```\n$ moon init\n```\n\nWhen executed, the following operations will be applied.\n\n- Creates a `.moon` folder with a [`.moon/workspace.yml`](/docs/config/workspace) configuration file.\n\n- Appends necessary ignore patterns to the relative `.gitignore`.\n\n- Infers the version control system from the environment.\n\ninfo\n\nIf you're investigating moon, or merely want to prototype, you can use `moon init --minimal` to\nquickly initialize and create minimal configuration files.\n\n## Migrate from an existing build system\n\nLooking to migrate from Nx or Turborepo to moon? Use our\n[`moon ext migrate-nx`](/docs/guides/extensions#migrate-nx) or\n[`moon ext migrate-turborepo`](/docs/guides/extensions#migrate-turborepo) commands for a (somewhat)\nseamless migration!\n\nThese extensions will convert your existing configuration files to moon's format as best as\npossible, but is not a requirement.\n\n## Configuring a version control system\n\nmoon requires a version control system (VCS) to be present for functionality like file diffing,\nhashing, and revision comparison. The VCS and its default branch can be configured through the\n[`vcs`](/docs/config/workspace#vcs) setting.\n\n.moon/workspace.yml\n\n```\nvcs:  manager: 'git'  defaultBranch: 'master'\n```\n\nmoon defaults to `git` and the settings above, so feel free to skip this.\n\n## Next steps\n\n[Create a project](/docs/create-project)[Configure `.moon/workspace.yml` further](/docs/config/workspace)[Learn about the workspace](/docs/concepts/workspace)\n\n## /docs/terminology\n\nSource: https://moonrepo.dev/docs/terminology\n\n# Terminology\n\nTerm Description\n\nAction A node within the dependency graph that gets executed by the action pipeline.\n\nAction pipeline Executes actions from our dependency graph in topological order using a thread pool.\n\nAffected Touched by an explicit set of inputs or sources.\n\nCache Files and outputs that are stored on the file system to provide incremental builds and increased performance.\n\nCI Continuous integration. An environment where tests, builds, lints, etc, are continuously ran on every pull/merge request.\n\nDependency graph A directed acyclic graph (DAG) of targets to run and their dependencies.\n\nDownstream Dependents or consumers of the item in question.\n\n[Generator](/docs/guides/codegen) Generates code from pre-defined templates.\n\nHash A unique SHA256 identifier that represents the result of a ran task.\n\nHashing The mechanism of generating a hash based on multiple sources: inputs, dependencies, configs, etc.\n\nLTS Long-term support.\n\nDependency manager Installs and manages dependencies for a specific tool (`npm`), using a manifest file (`package.json`).\n\nPlatform An internal concept representing the integration of a programming language (tool) within moon, and also the environment + language that a task runs in.\n\nPrimary target The target that was explicitly ran, and is the dependee of transitive targets.\n\n[Project](/docs/concepts/project) An collection of source and test files, configurations, a manifest and dependencies, and much more. Exists within a [workspace](/docs/concepts/workspace)\n\nRevision In the context of a VCS: a branch, revision, commit, hash, or point in history.\n\nRuntime An internal concept representing the platform + version of a tool.\n\n[Target](/docs/concepts/target) A label and reference to a task within the project, in the format of `project:task`.\n\n[Task](/docs/concepts/task) A command to run within the context of and configured in a [project](/docs/concepts/project).\n\nTemplate A collection of files that get scaffolded by a generator.\n\nTemplate file An individual file within a template.\n\nTemplate variable A value that is interpolated within a template file and its file system path.\n\n[Token](/docs/concepts/token) A value within task configuration that is substituted at runtime.\n\nTool A programming language or dependency manager within the [toolchain](/docs/concepts/toolchain).\n\n[Toolchain](/docs/concepts/toolchain) Installs and manages tools within the [workspace](/docs/concepts/workspace).\n\nTransitive target A target that is the dependency of the primary target, and must be ran before the primary.\n\nTouched A file that has been created, modified, deleted, or changed in any way.\n\nUpstream Dependencies or producers of the item in question.\n\nVCS Version control system (like Git or SVN).\n\n[Workspace](/docs/concepts/workspace) Root of the moon installation, and houses one or many [projects](/docs/concepts/project). Also refers to package manager workspaces (like Yarn).\n\n\n----\n## Notes / Comments / Lessons\n\n- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\n- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\n- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\n- Capture results: success=171, failed=0.\n----\n",
              "after": "",
              "additions": 0,
              "deletions": 19948,
              "status": "deleted"
            },
            {
              "file": "scripts/scrape_moon_docs.sh.ts",
              "before": "#!/usr/bin/env bun\n\nimport { mkdirSync } from \"node:fs\";\nimport { dirname, resolve } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n\ntype ScrapeResult = {\n  url: string;\n  ok: boolean;\n  markdown?: string;\n  error?: string;\n};\n\nconst SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\nconst DOCS_ROOT = \"https://moonrepo.dev/docs\";\nconst DEFAULT_OUTPUT_RELATIVE =\n  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\nconst CONCURRENCY = 4;\n\nfunction decodeEntities(value: string): string {\n  return value\n    .replaceAll(\"&amp;\", \"&\")\n    .replaceAll(\"&quot;\", '\"')\n    .replaceAll(\"&apos;\", \"'\")\n    .replaceAll(\"&#x27;\", \"'\")\n    .replaceAll(\"&#39;\", \"'\")\n    .replaceAll(\"&nbsp;\", \" \")\n    .replaceAll(\"&lt;\", \"<\")\n    .replaceAll(\"&gt;\", \">\");\n}\n\nfunction stripJinaEnvelope(markdown: string): string {\n  return markdown\n    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n    .trim();\n}\n\nfunction stripTags(value: string): string {\n  return value.replace(/<[^>]+>/g, \"\");\n}\n\nfunction plainTextFromHtml(value: string): string {\n  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n}\n\nfunction extractMainHtml(html: string): string {\n  const markdownBlockMatch = html.match(\n    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n  );\n\n  if (markdownBlockMatch?.[1]) {\n    return markdownBlockMatch[1];\n  }\n\n  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n  if (articleMatch?.[1]) {\n    return articleMatch[1];\n  }\n\n  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n  return mainMatch?.[1] ?? html;\n}\n\nfunction htmlToMarkdown(html: string): string {\n  let content = extractMainHtml(html);\n\n  content = content\n    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n\n  content = content.replace(\n    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n    (_match, code) => {\n      const normalizedCode = decodeEntities(\n        stripTags(code)\n          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n          .replace(/\\n{3,}/g, \"\\n\\n\")\n          .trim(),\n      );\n\n      if (!normalizedCode) {\n        return \"\";\n      }\n\n      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n    },\n  );\n\n  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n    const normalizedCode = decodeEntities(stripTags(code)).trim();\n    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n  });\n\n  content = content.replace(/<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi, (_m, href, label) => {\n    const text = plainTextFromHtml(label);\n    if (!text) {\n      return \"\";\n    }\n\n    return `[${text}](${decodeEntities(href)})`;\n  });\n\n  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n    const heading = plainTextFromHtml(inner);\n    if (!heading) {\n      return \"\";\n    }\n\n    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n  });\n\n  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n    const line = plainTextFromHtml(inner);\n    return line ? `- ${line}\\n` : \"\";\n  });\n\n  content = content\n    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n      const cell = plainTextFromHtml(inner);\n      return cell ? `${cell} ` : \"\";\n    });\n\n  content = decodeEntities(content)\n    .replace(/<[^>]+>/g, \"\")\n    .replace(/[ \\t]+\\n/g, \"\\n\")\n    .replace(/\\n{3,}/g, \"\\n\\n\")\n    .trim();\n\n  return content;\n}\n\nfunction extractDocsUrls(sitemapXml: string): string[] {\n  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n    decodeEntities(match[1]?.trim() ?? \"\"),\n  )\n    .filter((url) => url.startsWith(DOCS_ROOT))\n    .filter((url) => !url.includes(\"/docs/tags\"))\n    .filter((url) => !url.includes(\"#\"));\n\n  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n}\n\nasync function fetchText(url: string): Promise<string> {\n  const response = await fetch(url, {\n    headers: {\n      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Request failed (${response.status}) for ${url}`);\n  }\n\n  return await response.text();\n}\n\nasync function mapConcurrent<T, R>(\n  values: T[],\n  limit: number,\n  map: (value: T, index: number) => Promise<R>,\n): Promise<R[]> {\n  const results = new Array<R>(values.length);\n  let index = 0;\n\n  async function worker(): Promise<void> {\n    while (true) {\n      const currentIndex = index;\n      index += 1;\n\n      if (currentIndex >= values.length) {\n        return;\n      }\n\n      results[currentIndex] = await map(values[currentIndex], currentIndex);\n    }\n  }\n\n  const workerCount = Math.min(limit, values.length);\n  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n  return results;\n}\n\nasync function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n\n  try {\n    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n    try {\n      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n\n      if (markdown) {\n        return {\n          url,\n          ok: true,\n          markdown,\n        };\n      }\n    } catch {\n      // Fall through to direct HTML scrape.\n    }\n\n    const html = await fetchText(url);\n    const markdown = htmlToMarkdown(html);\n\n    if (!markdown) {\n      return {\n        url,\n        ok: false,\n        error: \"No markdown content returned from HTML fallback\",\n      };\n    }\n\n    return {\n      url,\n      ok: true,\n      markdown,\n    };\n  } catch (error) {\n    return {\n      url,\n      ok: false,\n      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n    };\n  }\n}\n\nfunction buildHeader(urlCount: number, capturedAt: string): string {\n  return [\n    \"----\",\n    \"## External Docs Snapshot // moonrepo\",\n    \"\",\n    `- Captured: ${capturedAt}`,\n    `- Source root: ${DOCS_ROOT}`,\n    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)`,\n    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildFooter(successCount: number, failureCount: number): string {\n  return [\n    \"\",\n    \"----\",\n    \"## Notes / Comments / Lessons\",\n    \"\",\n    \"- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\",\n    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildPageSection(result: ScrapeResult): string {\n  if (!result.ok) {\n    return [\n      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n      \"\",\n      `Source: ${result.url}`,\n      \"\",\n      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n      \"\",\n    ].join(\"\\n\");\n  }\n\n  return [\n    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n    \"\",\n    `Source: ${result.url}`,\n    \"\",\n    result.markdown?.trim() ?? \"\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nconst repoRoot = findRepoRoot(import.meta.dir);\nconst outputArg = Bun.argv[2];\nconst outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n\nconst sitemapXml = await fetchText(SITEMAP_URL);\nconst docsUrls = extractDocsUrls(sitemapXml);\n\nif (docsUrls.length === 0) {\n  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n}\n\nconst results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n  scrapeDocsPage(url, index + 1, docsUrls.length),\n);\n\nconst successCount = results.filter((result) => result.ok).length;\nconst failureCount = results.length - successCount;\nconst capturedAt = new Date().toISOString();\n\nconst content = [\n  buildHeader(docsUrls.length, capturedAt),\n  ...results.map(buildPageSection),\n  buildFooter(successCount, failureCount),\n].join(\"\\n\");\n\nmkdirSync(dirname(outputPath), { recursive: true });\nawait Bun.write(outputPath, content);\n\nconsole.log(\n  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n);\n",
              "after": "#!/usr/bin/env bun\n\nimport { existsSync, mkdirSync, readdirSync, rmSync } from \"node:fs\";\nimport { dirname, resolve } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n\ntype ScrapeMode = \"jina\" | \"html\";\n\ntype ScrapeResult = {\n  url: string;\n  ok: boolean;\n  markdown?: string;\n  error?: string;\n  mode?: ScrapeMode;\n};\n\ntype PageArtifact = ScrapeResult & {\n  fileName: string;\n  sourcePath: string;\n};\n\nconst SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\nconst DOCS_ROOT = \"https://moonrepo.dev/docs\";\nconst DEFAULT_OUTPUT_DIR_RELATIVE = \"docs/external/moonrepo\";\nconst CONCURRENCY = 4;\nconst SUMMARY_MAX_CHARS = 240;\n\nfunction decodeEntities(value: string): string {\n  return value\n    .replaceAll(\"&amp;\", \"&\")\n    .replaceAll(\"&quot;\", '\"')\n    .replaceAll(\"&apos;\", \"'\")\n    .replaceAll(\"&#x27;\", \"'\")\n    .replaceAll(\"&#39;\", \"'\")\n    .replaceAll(\"&nbsp;\", \" \")\n    .replaceAll(\"&lt;\", \"<\")\n    .replaceAll(\"&gt;\", \">\");\n}\n\nfunction stripJinaEnvelope(markdown: string): string {\n  return markdown\n    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n    .trim();\n}\n\nfunction stripTags(value: string): string {\n  return value.replace(/<[^>]+>/g, \"\");\n}\n\nfunction plainTextFromHtml(value: string): string {\n  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n}\n\nfunction extractMainHtml(html: string): string {\n  const markdownBlockMatch = html.match(\n    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n  );\n\n  if (markdownBlockMatch?.[1]) {\n    return markdownBlockMatch[1];\n  }\n\n  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n  if (articleMatch?.[1]) {\n    return articleMatch[1];\n  }\n\n  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n  return mainMatch?.[1] ?? html;\n}\n\nfunction htmlToMarkdown(html: string): string {\n  let content = extractMainHtml(html);\n\n  content = content\n    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n\n  content = content.replace(\n    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n    (_match, code) => {\n      const normalizedCode = decodeEntities(\n        stripTags(code)\n          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n          .replace(/\\n{3,}/g, \"\\n\\n\")\n          .trim(),\n      );\n\n      if (!normalizedCode) {\n        return \"\";\n      }\n\n      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n    },\n  );\n\n  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n    const normalizedCode = decodeEntities(stripTags(code)).trim();\n    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n  });\n\n  content = content.replace(\n    /<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi,\n    (_match, href, label) => {\n      const text = plainTextFromHtml(label);\n      if (!text) {\n        return \"\";\n      }\n\n      return `[${text}](${decodeEntities(href)})`;\n    },\n  );\n\n  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n    const heading = plainTextFromHtml(inner);\n    if (!heading) {\n      return \"\";\n    }\n\n    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n  });\n\n  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n    const line = plainTextFromHtml(inner);\n    return line ? `- ${line}\\n` : \"\";\n  });\n\n  content = content\n    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n      const cell = plainTextFromHtml(inner);\n      return cell ? `${cell} ` : \"\";\n    });\n\n  content = decodeEntities(content)\n    .replace(/<[^>]+>/g, \"\")\n    .replace(/[ \\t]+\\n/g, \"\\n\")\n    .replace(/\\n{3,}/g, \"\\n\\n\")\n    .trim();\n\n  return content;\n}\n\nfunction extractDocsUrls(sitemapXml: string): string[] {\n  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n    decodeEntities(match[1]?.trim() ?? \"\"),\n  )\n    .filter((url) => url.startsWith(DOCS_ROOT))\n    .filter((url) => !url.includes(\"/docs/tags\"))\n    .filter((url) => !url.includes(\"#\"));\n\n  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n}\n\nfunction sanitizeSegment(value: string): string {\n  const clean = decodeURIComponent(value)\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/^-+|-+$/g, \"\");\n\n  return clean || \"page\";\n}\n\nfunction sourcePathFromUrl(url: string): string {\n  const pathname = new URL(url).pathname.replace(/\\/+$/, \"\") || \"/docs\";\n  return pathname;\n}\n\nfunction fileStemFromUrl(url: string): string {\n  const sourcePath = sourcePathFromUrl(url);\n\n  if (sourcePath === \"/docs\") {\n    return \"docs\";\n  }\n\n  const relative = sourcePath.replace(/^\\/docs\\/?/, \"\");\n  const segments = relative\n    .split(\"/\")\n    .filter(Boolean)\n    .map(sanitizeSegment);\n\n  if (segments.length === 0) {\n    return \"docs\";\n  }\n\n  return [\"docs\", ...segments].join(\"__\");\n}\n\nfunction extractSummary(markdown: string): string {\n  const lines = markdown.split(\"\\n\");\n  let inCodeBlock = false;\n\n  for (const rawLine of lines) {\n    const line = rawLine.trim();\n\n    if (line.startsWith(\"```\") || line.startsWith(\"~~~\")) {\n      inCodeBlock = !inCodeBlock;\n      continue;\n    }\n\n    if (inCodeBlock) {\n      continue;\n    }\n\n    if (!line || line.startsWith(\"#\") || line.startsWith(\"- [\") || line.startsWith(\"```\")) {\n      continue;\n    }\n\n    if (line.length <= 25) {\n      continue;\n    }\n\n    if (line.length > SUMMARY_MAX_CHARS) {\n      return `${line.slice(0, SUMMARY_MAX_CHARS - 3)}...`;\n    }\n\n    return line;\n  }\n\n  return \"moonrepo documentation page snapshot.\";\n}\n\nfunction keywordsForPath(sourcePath: string): string {\n  const dynamic = sourcePath\n    .split(\"/\")\n    .filter(Boolean)\n    .slice(1)\n    .map((part) => part.replace(/[^a-zA-Z0-9]+/g, \" \"))\n    .filter(Boolean)\n    .join(\", \");\n\n  const base = \"moon, moonrepo, docs, monorepo, build\";\n  return dynamic ? `${base}, ${dynamic}` : base;\n}\n\nfunction buildPageMarkdown(result: PageArtifact, capturedAt: string): string {\n  const pageSummary = result.ok\n    ? extractSummary(result.markdown ?? \"\")\n    : `Scrape failed: ${result.error ?? \"unknown error\"}`;\n\n  const pageBody = result.ok\n    ? result.markdown?.trim() ?? \"\"\n    : `> Scrape failed: ${result.error ?? \"unknown error\"}`;\n\n  return [\n    \"----\",\n    \"## External Docs Snapshot // moonrepo\",\n    \"\",\n    `- Captured: ${capturedAt}`,\n    `- Source root: ${DOCS_ROOT}`,\n    `- Source page: ${result.sourcePath}`,\n    `- Keywords: ${keywordsForPath(result.sourcePath)}`,\n    `- Summary: ${pageSummary}`,\n    \"----\",\n    \"\",\n    `Source: ${result.url}`,\n    \"\",\n    pageBody,\n    \"\",\n    \"----\",\n    \"## Notes / Comments / Lessons\",\n    \"\",\n    \"- Collection method: sitemap discovery + markdown conversion.\",\n    `- Conversion path: ${result.mode === \"html\" ? \"direct HTML fallback parser\" : \"r.jina.ai markdown proxy\"}.`,\n    \"- This file is one page-level external snapshot in markdown `.ext.md` format.\",\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildIndexMarkdown(\n  artifacts: PageArtifact[],\n  capturedAt: string,\n  outputDirRelative: string,\n): string {\n  const successCount = artifacts.filter((artifact) => artifact.ok).length;\n  const failureCount = artifacts.length - successCount;\n\n  const pageList = artifacts\n    .map((artifact) => {\n      const status = artifact.ok ? \"ok\" : \"failed\";\n      const mode = artifact.mode ?? \"unknown\";\n      return `- [${artifact.fileName}](./${artifact.fileName}) - ${artifact.sourcePath} (${status},mode=${mode})`;\n    })\n    .join(\"\\n\");\n\n  return [\n    \"----\",\n    \"## External Docs Index // moonrepo\",\n    \"\",\n    `- Captured: ${capturedAt}`,\n    `- Source root: ${DOCS_ROOT}`,\n    `- Output directory: ${outputDirRelative}`,\n    `- Scope: ${artifacts.length} pages under /docs (excluding /docs/tags)`,\n    \"- Keywords: moon, moonrepo, docs index, monorepo, build system, toolchain, proto\",\n    \"- Summary: This index links one `.ext.md` file per docs page snapshot for moonrepo.\",\n    \"----\",\n    \"\",\n    \"## Pages\",\n    \"\",\n    pageList,\n    \"\",\n    \"----\",\n    \"## Notes / Comments / Lessons\",\n    \"\",\n    \"- Per-page files are flattened in this directory and prefixed with `docs` in the filename stem.\",\n    \"- Regenerate by re-running the scraper script; old `.ext.md` files in this directory are replaced.\",\n    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nasync function fetchText(url: string): Promise<string> {\n  const response = await fetch(url, {\n    headers: {\n      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Request failed (${response.status}) for ${url}`);\n  }\n\n  return await response.text();\n}\n\nasync function mapConcurrent<T, R>(\n  values: T[],\n  limit: number,\n  map: (value: T, index: number) => Promise<R>,\n): Promise<R[]> {\n  const results = new Array<R>(values.length);\n  let index = 0;\n\n  async function worker(): Promise<void> {\n    while (true) {\n      const currentIndex = index;\n      index += 1;\n\n      if (currentIndex >= values.length) {\n        return;\n      }\n\n      results[currentIndex] = await map(values[currentIndex], currentIndex);\n    }\n  }\n\n  const workerCount = Math.min(limit, values.length);\n  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n  return results;\n}\n\nasync function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n\n  try {\n    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n\n    try {\n      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n      if (markdown) {\n        return {\n          url,\n          ok: true,\n          markdown,\n          mode: \"jina\",\n        };\n      }\n    } catch {\n      // Fall through to direct HTML scrape.\n    }\n\n    const html = await fetchText(url);\n    const markdown = htmlToMarkdown(html);\n\n    if (!markdown) {\n      return {\n        url,\n        ok: false,\n        error: \"No markdown content returned from HTML fallback\",\n      };\n    }\n\n    return {\n      url,\n      ok: true,\n      markdown,\n      mode: \"html\",\n    };\n  } catch (error) {\n    return {\n      url,\n      ok: false,\n      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n    };\n  }\n}\n\nfunction resolveOutputDirectory(repoRoot: string, outputArg?: string): string {\n  if (!outputArg) {\n    return resolve(repoRoot, DEFAULT_OUTPUT_DIR_RELATIVE);\n  }\n\n  const resolved = resolve(repoRoot, outputArg);\n  if (resolved.endsWith(\".md\")) {\n    return dirname(resolved);\n  }\n\n  return resolved;\n}\n\nfunction clearExistingExtFiles(outputDir: string): void {\n  if (!existsSync(outputDir)) {\n    return;\n  }\n\n  for (const entry of readdirSync(outputDir, { withFileTypes: true })) {\n    if (!entry.isFile()) {\n      continue;\n    }\n\n    if (!entry.name.endsWith(\".ext.md\")) {\n      continue;\n    }\n\n    rmSync(resolve(outputDir, entry.name));\n  }\n}\n\nconst repoRoot = findRepoRoot(import.meta.dir);\nconst outputArg = Bun.argv[2];\nconst outputDir = resolveOutputDirectory(repoRoot, outputArg);\nconst outputDirRelative = outputDir.startsWith(repoRoot)\n  ? outputDir.slice(repoRoot.length + 1)\n  : outputDir;\n\nmkdirSync(outputDir, { recursive: true });\nclearExistingExtFiles(outputDir);\n\nconst sitemapXml = await fetchText(SITEMAP_URL);\nconst docsUrls = extractDocsUrls(sitemapXml);\n\nif (docsUrls.length === 0) {\n  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n}\n\nconst scrapeResults = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n  scrapeDocsPage(url, index + 1, docsUrls.length),\n);\n\nconst usedNames = new Map<string, number>();\nconst artifacts: PageArtifact[] = scrapeResults.map((result) => {\n  const stem = fileStemFromUrl(result.url);\n  const seen = usedNames.get(stem) ?? 0;\n  usedNames.set(stem, seen + 1);\n\n  const suffix = seen === 0 ? \"\" : `__${seen + 1}`;\n  const fileName = `${stem}${suffix}.ext.md`;\n\n  return {\n    ...result,\n    fileName,\n    sourcePath: sourcePathFromUrl(result.url),\n  };\n});\n\nconst capturedAt = new Date().toISOString();\n\nfor (const artifact of artifacts) {\n  const pagePath = resolve(outputDir, artifact.fileName);\n  const pageContent = buildPageMarkdown(artifact, capturedAt);\n  await Bun.write(pagePath, pageContent);\n}\n\nconst indexContent = buildIndexMarkdown(artifacts, capturedAt, outputDirRelative);\nawait Bun.write(resolve(outputDir, \"index.ext.md\"), indexContent);\n\nconst successCount = artifacts.filter((artifact) => artifact.ok).length;\nconst failureCount = artifacts.length - successCount;\n\nconsole.log(\n  `Docs // Scrape // Wrote split external docs (pages=${artifacts.length},ok=${successCount},failed=${failureCount},dir=${outputDir})`,\n);\n",
              "additions": 242,
              "deletions": 68,
              "status": "modified"
            }
          ]
        },
        "agent": "build",
        "model": {
          "providerID": "openai",
          "modelID": "gpt-5.3-codex"
        },
        "variant": "high",
        "id": "msg_c648cc2570015sHEQpEkzR355z",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "text",
          "text": "Include index as well",
          "id": "prt_c648cc257002sglH1wiiFezi8x",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cc2570015sHEQpEkzR355z"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213487302,
          "completed": 1771213514145
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 74338,
          "input": 8404,
          "output": 1550,
          "reasoning": 1392,
          "cache": {
            "read": 64384,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648cfcc6001gvyZp0wZFjkOqV",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "6fb77aae5b3312bd8dda6d40d22b34a2aaf81514",
          "id": "prt_c648d05ba001VoFd4qC4G3Kka7",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cfcc6001gvyZp0wZFjkOqV"
        },
        {
          "type": "reasoning",
          "text": "**Planning per-page split with index**",
          "metadata": {
            "openai": {
              "itemId": "rs_004f3c4dbbff2b0101699292b1f7dc819586ba35c9180d3e00",
              "reasoningEncryptedContent": "gAAAAABpkpLJOlfniVxueawt9g6PfQFnr1WBommWEfmpEnoCuANrTaGNEi20bq1XZeWsUCZNmpBhG5HNoh2eY5qXktbjJrKeK-Am7axFP73vVyUZifSLg0T92WWLmUjISG6oRvXYYCj5fxcmpkK0UbP6lidw69d-QfH-ILV65MX_9VozHNQ56zMi2XAp_u2QkHN7LdidnCtFFgs9JlR4ql8nw5jTikdRXB3nikosIHPPXpr_hro5MT9Y_0R9M6OIf4vP9rCO0W-2rLbTJfbE1inK8NcBSl4nMPZYSU4l1Hv1qdslnLReq3G2IdRFo6ges4nySe9jJP2zvy_--Wxep1gpr8J_5yUUjsNQJMm1qrO43723B8kTYEETHHJFeb_QSq3OYjlRASfnUtxJ8Frs9s5_xVJ-7Z00ht4SPMBxhxwwe7qoRWFozOSX5pTAjQ5wuWLPmhDyTpPerOnWUg6NOXVqsMG2fEohJigW1GwLbfbujATF5sSA7MXz8ApcqjMv5EZcCuhTGQH6O97Dekrxrnx0OBq8eynyELXV_ObMoQ_H37F4-woVn43DB8pUvi0XOU8m_REz4E9XmePNpi_Uf7lJHGtkOVsbIqPpgtqEvHkLdroopvAW5BlLBHkkB5cIThyHssYOrXvZp_ZBOSr8rSKNuOV8dLCi0JLEOT8P61ta4B-o02BJLqN-UH5bQufmCqZEPoatdcJ_014Sz5J2jaAL8IjLhNh8NDihnKN_YettPzF3iCw2q1eALBq3hAI-bnr_FJUqoKfqJTsuvK6JN84J-zPSH0giO5lGkQMWpznGRYbNAS7hh-Ldz3tgN1TGrOXX1-HCYoTBvkarexX_lc-33nqlal2FpRRmhPCxGmVQxiBOGPje0-kJ8hgM2YMb5xDh67sft-iQ3lHUGcviNK_aEZmCtQlQhxpOSqUgpdkqaBLIZekgqnxvquotWYMWeHbso-CdUxAo_I9DZAr9yzwgngs17MhHUfJ3jZJxhDH1XPlWmiUjevMkEtReRTFOZUpxOq3BLM2zK8EiXXSQvD8g6A85Ja09T_91JnbpxCNDig3ptVEQzsjxkTHda03mdKGDH2iIkGRitB9eAwvi0UwHYOc4nOreAja84CKceLNg9B8qWtvJ66AYNjsGuTN7OZrguKy7CQ8BfTiw9mZYcJkrF3kwcx7VG5XGyh1bVuJ0cTG4mDAI1SjY6xnQk4rapwHaGjBGZG6KnFeSptx1jHEgC5n_J8rEtbeecR-8ULZXc_zWHkMjwQfd6YFqe9ZV4tftI2WkPPYYyMONYICp9ZRUqnLmqKK_-RMF1Z4gNaUvNhKetZSgjECzHdfdxSF_9x3dNDOgdzdeqZa_vkrQwso7Az5KB_b_uKog6IuyWFw8tJC9BsLXLSR9mAlB9EBsTxQK1uEEllGCMMImfm_aVHkkBYvGKGxIJg0WvP7aPQuuv-vWe9qOVUAjNGj_o1ulLQNQqx9MdJ60SQNKV6Qfr8Ir_yVflBkeBJr_er8PG_BJoSpEz0kolve4HwDdoAM3QKw7an2nEsnv7eOrTPwTV1C0RSqiYURb8Po9osEvLJDoe-ko7P2453ZqcICd8hu_jeJuVO3J4Y4UwzlTy-fzTDTi64zA7oOwXCUuW84eR8Dzftm8W-fMSg6AJYq_HivVGd-ElqzLledg2GCZqJkiB8pYZhHDZjS9l9FRZr46IYn_t7epDYzrpeZAxsMjtoe2gg90pURwfz59omokzFVaDEI6RxyaevF08Bo0v3p71jnTHuhaE71GkRmEAG4yXPs-NaxuvHwd2xpugWrX1lz7joylNuGshLK6G7Yk0k20LwYywP5ZC4aEeTsoCpFK27BOgNZNERzJUUzuI8zSzI52rVatGNdMbHNtGdUytgvFdwIcbjKSbG9eC7J8YFlDgK35hfRymWxIsduwFL1JfQGLEQ23jvn5Tde4XEHadwAbshIgz4IO3F5GSUlVG-lorHWeJvI7toPOQ6oomMIeKTw3ZSy-rNOjMrPByk_MpgIsu8XGmT8_pYPVwsjE5VdPNSv5Hmwtl3aREwZA9S_33gNz1LOpIbt8KZoQYF0BsHSiNT4zIxkWM-_jxtWZHVxJ5b2mv6HhQ22Y84RQEZ-yUnG2iv9b-shAW9tF1y4BmIvoOeKYjVedLaaFnsnecKQaUXqHUDY1b3UjqVbI4FfAHB3OAdtYJs3VGQHejV1NUIlOq3Qw8Lj82T9VLrOJ4ysMJGmNBAe6sNgWgAz7oNIaIa8NLh5n-vXnHujaJNaWMeOGM1oSNZHOPCc9LkgOIrbS6LSk36p1N0KjoOmLQR5LKbQcMza-wbPS0tV6QqOsbG6_c24BKv55Dsj9G0_Z9geDsCs5TI44JU4N53_3bguvMnqXI_pozsPqeOgO0DHCp7aI29TDqpAsbp4XJwGMNDIjfPFH_NMF8NZu5ocXYOWuHKyYuei0MWYXJEnXNH-dmolhLaoOB3cwFVRwsmM70wQW6gV9QoD4gWa1c3R2-4P5mYH9Ws6QcUyTc5amNAKFylJPmjK1bSWPhsiLLxh3iHiUvKjDlQnz10q_s2eU_jh0IMOUrpg0Efqqe3hQB9O9HEQCRmfJcOq7V0mBkG7BYnBr4x8uRMtxn85FHey8fDzYnE2Vg29dAiKZje2l4fTHTeQIFrW2Chg8J3NjjR5aUQU60NJsKdpJjOqGCK1TDmgJwNby0ZlfJYs3c_kVsuGeyOqGholjfHXQwFFzaiEZQ4Dgo6nKtWT8hramcamN0zCnnnKTvSULdLmNEZM6U9yO1suSGg3CWBi-huCSchUraupK5DuVS2OZTib_m4ktCPgxzSUuhDZOjkdmsyXRJfKJa6RFGBGdmVM36aZJf5YeXOS5L2EcYDtLJH-0fdzLCncevRRLV1E8tJrIRAAHWJ9bhixhp40XRBHWn6wX0KmhXa7RAmdFjGnlPCn_BUYw45kru9aL3a6FMnBurE5wB-NgN444bLmRMljCOegbHo6S0mFPFTwDu81DMJaL6ozCe-QN5andwWDrXUmlppS1mrgJckye_Uw6I7FQK7YvyIgPlQLsriianqaBiVWnnzUhvgTdSLR11OxdsDlBTop4MZENq2tkUMpeZCuRgqxdjLychirD1saFmB2Rf5vM4QHyusOEqUdL0F5L4ZruoYBnqYqBour5T2OkaZoKSB-CIODUI1x3CDRg2c0X11jd-_KYAKF0HKi5r3dmVd_ef3f24NsmIQsEeuN41OzBcRfS-9HWUfMTbe_QjJealjXCdvzJDWqQpZqiLxUgXlF_5L5ZDCmuSFc5GI1FNjBEuP4dpjgtNO7QEOWAzWWXIdpkjUlAJ59_xYv7V-a4Y0nNRBDmZ6u99UV3FkqqTaxNLBn-A5bIrcVMI0nLcsoinyuuWrWrHwEMtx3mLPsSfRbi88QqlNE2FYCOjlvEcVQqBhpPKEJuoOnKS1towht1dGfM_xjCI6u7NdV6NijwrdEKl5yFkTjfOUTMPOCbIQx_93bgBhUFwlMJzNimZgIM25b_uQyibSlzsNpCb2-JexU6vLq_XDiNTtSYJVJPyWOmlFg-UnMJ-hmLZZ7DwcIIEYT_r9eQO5sNIzXaqFNA-aMTmwX9B8eoaw-bwfjwlG_7GDCFxcBNj9TJ4GxbAWkAGOYP7__flbrkekoB7Pa8v4UatdmaeoPUR9IQi-Ik5qnKTlXtt3mmPBlHjOrrQ-yl5hBAuF2FxWaUNsp2DabGxGHOPpzVc0-oHZu9xKsWHzVC_IfIM7btZq1a5N2bRvWrCtmfR1joiLhEZcLcC0Y2PMwQYLfUEsiJGzYfLngNgYH1hprRwNvAzr6TFSFJOmTvUBFoiurrGpFZkVWluwdOEzQUIgwXgCPCOSuvBzo7tPZ-Nl3sz8oFvsBDbkgbkV-ESJwwo634tyZ1zQTIDUP1lcOQpTGmfbzTdk2s0ZUdbz4tQIWQDj85P2TxoGXUa5SrpJY3A1GXTA17LNxVCgH5-wv_NaHm38HuaOPeSXsIa8QoudfvzJoOVPBa-LrAOVSONxcYLCkib25XdrkLQJAIP2HFkHAb_qP9hHqsrnpRX37oZjY2KjQ3uDmMEmmZZsygxYMaZbOd1CC_5MjFCdOoSudnniylXhhefBtGssVcOL587Ra9Xnbc6mjRtg9lCFEyZ1bChr25knzQACtOq01MxJZ8QT10QvtDse4K92mM9EtmsOyczo2BYqsbC6MJ0RIDSai0OccspBixEoi3j4-wLj3fcVyv07pYyQiAQxSW2fkEJ73y6l7BOpg2vgKvfNzL10JzmAV0Zh_37hLRIzvXhmqVK0-aAJFpSJudTHW2BWbl2bso4CjVDmj95cWQOkW-lyPueYQr03MofhP5Vf79V9BQzBXJX2anZcMeZ7xD3ttslRT4qE6tKdOW3Yp-NKU1XhdaohGxTSlMUSSD4iri3rYJZ8lB89H6YmAM6yNvoOTQtlyDnMiHVX-iyrA9S9y1AUWa6NvGwbu07mZAe-1-zVyNFeIAB5CuApI1PwrXvOp1TkdWyajKrnQGL3kunr80tlNowOG4DbVsKmjTpbgvCHilIrx0mEtBPg_YMO1HeI-9WwkEfa2AfM8_lz55JCtdGhgIfeIdHwGj2oOxRmQ3--Nvt38FRJdJRNwCXY0HCkdM7S41bTepyoSuZ82c3OLK4tY1wOEBAWGkUXtL7PLzcTpHF7fNEr21l-n0PwzhSuYdC1kldqVXgq5HAz2_bFrc1MWmIqIF_NUL3ha7d9Fw1c5Y6xfbR5VcoSwzU-4LoI47Vu9iwBLTVv-f4793aD2GPam5n-7RlgEiYFVC3FB_yRZi7-y3AuKJOzFcwBQt3rI5lXAfblTiouN3qu1hgH0VAi2PJUg3VTs2sCmdapKQIIZp04a_L0_RYXZXSeoMD7tLrRG1YYp8eAMPmBkY0s9wcUrRJ1xp9ZeiEi34IFsZkjafuk5Gr2QxQQm-rTrrOoJrKvA-9bU1F0ouAtXiw7KLxx4VE1LI2v9rLKnd5EWEqnYwpLSTVL7DiveU7eK2lrTpLqnZYuACw1c1P-Y2_Niv26K5wvD2_nSn-vYSaD8x798S7Vowg4K1VYgePjkIzjOyq_z13GV2ZXKmorhPraNQ8pLtUX8Lpf5QDK2zVxyCqk9ZvhQPK-p2n8TAUaD22D6Tv50LTV9m-I4BB5zgwLJed6PVA-6xJVxjY-DuiIVuTE-WBXbGwq5tcEioWEI6Z5Rxbf-6v2T6z1tGXOMX7f3JC9s5bxbZki7wJGaxgJJq6cLebaEqiQb0LZZSHFOFpSMtS45OSXmtsW6xtffQyuTkX2j53Y0dxyL69VZ71-9uQXRziD35ULyfnC4sw4Up5OrAsAfkX-_JvgNtzTvfdUEl6ZP4rAnkd8qhfBqx3lBh6mrcQ9v_dWic7nGoyRIu-fnjfkN00e_kha4SC595PJ6aNt8AR9ZsbVvAeaOII8CzypzToaNfcDF9bYBsK_D-yRs24eNpPvGmyU3M69UwwS-gt0Nz9IXDYhBlosShk2IeIDTAGMk8qKjC1IycPWg1iAwh-zKQgigcNoER3gj2jUlvNQTmPNWidFzSLS5hWcYQ4mtorTG5CoElcuZfCwc7lbI4AG8QML1cPwtZppquyWi0yqozgIStyRF5Psdl5X8AtsIjR4my4RfmD70gQhV-I2Nj2-ZlQUZZuJyPoCmvLrosEdE2SfFGUNYUjfuL8kE4SdKgsEoDS0w5cregsFUhJiIT1uxHF4g12DB710lSivMX-fO7OMZp0gnkLv5t7c53Ha7wQEdUhDqjRz7WJZyl8o0FItonJ5hyTlQ_ffr5vx5DMuwHd4maXm9dX_4RZRN2x8Oi0Jm5lBXQtL5MBHN_HWyAWsj59hWxwqAF3geq4Eckhl6k_Xl-C5FYImvxucdSzPumQDIWwVOx4oeFKZz49wLCUIjpT5tfmYeOOi1aHy16yFCQ4XGAzrkVTZBezO8i81MMHA7kVqr5e2eI4vex4pwdgUlh0kzXknrIcYNviw3dseI2Y8jOV4IocF0lSj3wjq6su4BZDmWkrWnfGM790vaYqDu2Vpx7V8mQROXFEkJsC2DczdEY2LhULzyp4whzrjCrka5CBlXkJkXdRe-Z5ED3F-1bf-Sjx5KbdJSZ6Et6UjOlhUznORlmuiCR3DAFjQug6pTBXdWhYwdJEZm0AyaAkLKULgGC1T8ljoY7rgmLlHVVyPZa91X1kG9LUtDH4hr0Q7vCYPkiR-xONGHvVF7QsUTNWFDHjUSjZjRfxWOz27U0w5nZdeIl27h-pAOZ7tOzrw2v2FZBDTiZGYKMwP1W6Cyl7PwvPDMSihVpgFDhXa-EZlPWmT0i18p4JrszRVtzitptlD3w8aUktLli2jzxM1oax8rS6EF70mqOpRCZjdE5pJ_dCl0M-gtXaONcOLU1XMYJqTHWPxLofm0VF7xuIXRIAiY-ph9atKjzM8qJlX6iX_Un-il0rkOPDonx0QSYaw4XJS-fGfdmWgB7UPbwrWQhPBbjKPDMyuoqFJ_2qWiaYam3HEx-21_JwCvXSiVWcdxvaEdmmxCDc1E1MBYTYvklScBAAUyimFUWblm_ghKQspbAnYb7wr6pwjpPJ29_IBMJH2jzG4u3QPS2mAhE1odRJ82lzQ-7_FH_UiU6qWpoyKS0zuZ9RNOkL2zjtR7KwX9NPCVuQTdyPpP4Xd8sIkGORwfoA3wEKrvythPNHSRcM7_K3ECrk37BG-Gvm5_SqeN7FdUbPaPt056hNbca3jJ0brLJ-cN_RR6NdF91yttJwUifa3Ww61khwBgxcwmN5ZOgRWT7vStRxwWqKxyYtE-UlVfVHySW2TsF0rYevPT__998V54RUbL2GAcWqrEi-J6AlIPGsmJ46xpON2De_kCT0jQFe5B2EppqSRphkJx5LS17uJCzDv-5xPsXe4lJtOYX5rEoEzIOxa9imRpS9qUad2Q5KCf3OZEjy53e2gmxMZwIWcAuru9swGRagV-xbrkNiY2H9TxtUzGe2HPJVbgsAY_QPA-B5iE1TgeGwUm9ChbhjAGweb4c2kulFTGNbC5O3voG-DpsdSVgtE2mtjFXIuAWQHX5sbdBN52nY9X_tb7A_JGngEmGsi3tRt8u46qXc_C2czZTZgFYqFaCTkuccmNL_H1e7mfrm-RU8l4ZJxjtrQom9K97-3PKKbR3oxZJ0LHwmVzbX-2olOmPYMS0QL0vXa63V63gNhBSzPzu-Yo7ruKHIlvSMz3h1Yu1tOn8YtMSIay517yxnY7uS5gGexpnXrnelk_hvxRaS-cIYDnN-kaYA49LGuez7oLHbj86Q6OtQNvssiLvjl-cu-fC4yoRAHaZC8wHmKiRCrNk6V2VGhCemag3kNbPLQFcb1YiElENUekcFhnixTpGTS7s1Vz13AieVoZFD7lnM0tF7HOAAmdAqvu6kN-iMI4-NOrE7J3LMdcdGAzjXqrXCql8F30rWHarLTmyhg7sBV6GrXVT3Pp6-6zDoZfu6_HGD1okhqD70hduDtR_GRlhRc9Zc9IGAMgXHU5iK3V9FbF3LGivg0TxP6AkKXU7_m9SWPQxqs_91nO6HoBGnagbXCcrgysxH9HiaqiXkmhQ8XBtcmxL4-QMqEMHp01dILNyb_-QlzQcjT36UsuyMHFEOPodsceOCXifnTP7uHstR1jwfgeSllpTKsVHSRrXY-e8vunC9UDfWToucJUVkflXcKPtUoEgsq66iyVeEJw0eF81JTCVIx4dsJ30nqCWJufT97Ri0GWouldoqOmU0atbIPd776qGXm7_5CWEXKNcqZIMgnEwTnlrxFWiWsyxXIoKXsN8uF2KMUM881C-6v2OPFROiHKoXgXgUw42ivlwdKMUghAhbU1t5LAh__u2l9GTncpw4dMexp8xoRIVLt9_JDDUa0kWrLq-QJanwvsYF3uBDppwa-12AUuBVEyIVc6s5HZGNcGN-VeSANlvpdn7yBdN4tFtqsGiLZEeruZKB9Oe6Jaz-A9FK0qZ3QOi7DgISwv_NV1A53w_0DhNcaiqFB5vtkzhLDU0EeuOoicrKvpJ-wbe5hO1T9bW52Y-9eoPg7Fl6FQ-g41cr9UHCLG5tM_m5ssDBNfocnbejDszxYd51hpPD2dipunJFz2MDorb8TdTc6xix9y9PohBD2Epn8sqk6IqcefW4Fc-CfS5zdJVXf3blg3R9-avHAld3jq5e68_yLUysRrUFL1g0MIY-W3blhebJTPS2WPipdqODLP3AkFndQg7HyfvMNRm3pnlsItaliiTyzySVQRAnpLjzzz0USqsqNzToBBbgr4JsoF0AhdpfQpzeS_kHkzGB3VadL8x_za08cOOMCPDbOpCdzrm5xJHKhCuPBDpdXgIKge7k4XtQuOwtM_X-IlZD2bwlKR2oXVfDiB0nRVR8aS7RvR3F-lEXcqiojOJjhrbW8dd9EarVZs-NOmtOjrECZu3G-B_hoBR_OUy0mh6S3vMWJF2XwVXGtu4bzH5uNxpDTIMEqpC-DghuZpTEWFhAA6GkGDHBp2IBmYNE5DLL7YiOAlO--mWpN7zfr5b7T1iQx8zsyfB8LFg4IOxnEGB-nPmnCMXs-4YecpK5ZPLArI_XxXHGOHHuGjQM6QX_auZP3rKxeJeyFspz_Ys_Cl-8DUcfjBUBYt8QzfMhPApqYuWvRvGimSxzYD4UwBxsT58vr2-wR8PTqGtn3uUjU3yU5GynWcGJWDpxc-RTBbUKhZyyaf_q7Dr0SPLa3hDHpSqdGAuAKzRYEAEckPmsSEGdNDw40EiTYsDxJotxOHLw-QIo0ksGRyiqrUUvgGEoZyj7ut5Oh7aeluf93lxigGyUqlCdMg3BUL_JiCbsTueF6awQLi-US1C4GDimmxXPc2kzAp3AA4RejAg3yCP7PPJgYlACbR8IgDNK8lkU12LZ9jws2AYn2hdAsqevnhPxHSONjqpv2-wu479dBo7KfPsMz65LHym3reRBESt-DthnMvE2V6lRgewY7k2iLODd9KC4Y-yus0H1EEPZLB3J6wV76WivlvBD2xfLW2f5JaERRDgv2cXMcbUzT7Qgf9MRe4OibDTZxxzRenRnFKfEDg3qAS3UukpxKfjbs-nfTI-awq9wGlUa8w0zd0Uwg7jyJfXZRgOuZel-KaLJuffWaDrk9x6dxv7cOdPZRW2M0WwMpTZkLFsVJoB_sUt6e1wLfqa5yuyzQrhQt350VufFJcFT2Gm0F7ZLEZRAzfkPGPJWWle9atj4zZEeRruNWE-KhiyAFh1JEoPr7sw6-ymVWyAK2SSk8cUcwPHvAmGYM6iMCQDM_4Asw1nPgphGlq8S_iqqLm9BgoKFijM0aLejC63x9v0eYsU5tjRGPxspCYVXKjkZxg-4zb3M71f-v5QlddhF32Z9jI7CSV2lFDA49KsLRQGa11erEFZsgmkeoQ-3ohNaNJIH-GchCt_qq28c2802caWddgrEh_mSjQukoT6jYh26U8mNcsE6DSJ6vZwqr_0IynQZgQC6Fm3rtrRNQe13TTn_KPa0Di2lzhFZ1yQuc8DAafiKYDBsBgAfszLYiUudlnUTRzStxU72c7tBYUFY767ggfMBlm9zvegAgFrVTqxpwuW8AEr4j46Mlf5VTqf5XHhPyzpjuRyT8rx2W9vdNzEfduTnEL6TXreRCSEQ3IwiUmjMujzOfbpJqCQwvgg6RXiWUk="
            }
          },
          "time": {
            "start": 1771213490097,
            "end": 1771213513929
          },
          "id": "prt_c648d07b1001hW9oMJzAzXATTs",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cfcc6001gvyZp0wZFjkOqV"
        },
        {
          "type": "tool",
          "callID": "call_EM0Hqha90Bc55h0maPN032Yj",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md</path>\n<type>file</type>\n<content>1: ---\n2: name: script-authoring\n3: description: Create Bun shebang scripts from prompts, examples, bash snippets, or conversation context.\n4: ---\n5: \n6: ## What I do\n7: \n8: - Turn requested workflows into reusable scripts under `scripts/`.\n9: - Normalize script implementation to project conventions (`*.sh.ts` + shebang + helpers).\n10: - Capture successful ad-hoc command sequences as reusable script entrypoints.\n11: \n12: ## Accepted inputs\n13: \n14: Use this skill when script requirements come from any of these sources:\n15: \n16: - User prompt only (goal and constraints)\n17: - Provided example script\n18: - Provided bash script or shell command sequence\n19: - Agent-summarized conversation context (for example, previously successful setup steps)\n20: \n21: ## Output conventions\n22: \n23: - Primary scripts go in `scripts/` and use `*.sh.ts` naming.\n24: - Include shebang: `#!/usr/bin/env bun`.\n25: - Prefer shared helpers from `scripts/helpers/` instead of duplicating utility logic.\n26: - Default to explicit, readable command flow and fail fast on command errors.\n27: \n28: ## Implementation workflow\n29: \n30: 1. Identify script intent, inputs, and expected outputs from provided context.\n31: 2. If input comes from troubleshooting history, separate successful steps from failed or diagnostic attempts.\n32: 3. Exclude failed retries, dead-end commands, and one-off debugging probes from final reusable script logic.\n33: 4. Choose script name and location under `scripts/`.\n34: 5. Reuse or add helper utilities in `scripts/helpers/` when needed.\n35: 6. Implement Bun-based script and run it once when safe to verify behavior.\n36: 7. Update docs (`README.md` or `AGENTS.md`) when conventions or entrypoints change.\n37: \n38: ## Context capture rules\n39: \n40: - When converting conversation history into a script, include only the final successful sequence.\n41: - Keep troubleshooting commands as optional notes in output, not in executable script flow.\n42: - If multiple working paths exist, prefer the shortest deterministic path.\n43: \n44: ## Notes\n45: \n46: - Keep scripts idempotent where practical.\n47: - Avoid embedding secrets or environment-specific absolute paths.\n48: - If verification cannot be run safely, state exactly what should be executed by the user.\n49: \n\n(End of file - total 49 lines)\n</content>",
            "title": ".opencode/skills/script-authoring/SKILL.md",
            "metadata": {
              "preview": "---\nname: script-authoring\ndescription: Create Bun shebang scripts from prompts, examples, bash snippets, or conversation context.\n---\n\n## What I do\n\n- Turn requested workflows into reusable scripts under `scripts/`.\n- Normalize script implementation to project conventions (`*.sh.ts` + shebang + helpers).\n- Capture successful ad-hoc command sequences as reusable script entrypoints.\n\n## Accepted inputs\n\nUse this skill when script requirements come from any of these sources:\n\n- User prompt only (goal and constraints)\n- Provided example script\n- Provided bash script or shell command sequence\n- Agent-summarized conversation context (for example, previously successful setup steps)\n",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771213513975,
              "end": 1771213513990
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_004f3c4dbbff2b0101699292c9e2d481958b139bd3d60cf8bb"
            }
          },
          "id": "prt_c648d64ca001zHHjKZw1untW7D",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cfcc6001gvyZp0wZFjkOqV"
        },
        {
          "type": "tool",
          "callID": "call_s4bvLuTAYAJSPup9t2QFVSEL",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md</path>\n<type>file</type>\n<content>1: ---\n2: description: Create a new Bun shebang script from prompt/example/bash/context\n3: agent: build\n4: ---\n5: \n6: Use the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n7: \n8: Goal:\n9: \n10: - Create a reusable script under `scripts/` based on one of these input types:\n11:   - user prompt\n12:   - provided example script\n13:   - provided bash script/command sequence\n14:   - agent-summarized successful context from the current conversation\n15: \n16: Process:\n17: \n18: 1. Identify the source input type and extract required behavior.\n19: 2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n20: 3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.\n21: 4. If input includes troubleshooting history, filter out failed/diagnostic steps and keep only confirmed working steps.\n22: 5. Keep scripts explicit, readable, and safe (no embedded secrets).\n23: 6. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n24: \n25: Return:\n26: \n27: - New/updated script paths\n28: - Helper paths (if any)\n29: - What source input was used (prompt/example/bash/context)\n30: - Any excluded failed/diagnostic steps (if applicable)\n31: - Verification command(s) run or exact manual verify steps\n32: \n\n(End of file - total 32 lines)\n</content>",
            "title": ".opencode/commands/make_script.md",
            "metadata": {
              "preview": "---\ndescription: Create a new Bun shebang script from prompt/example/bash/context\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Create a reusable script under `scripts/` based on one of these input types:\n  - user prompt\n  - provided example script\n  - provided bash script/command sequence\n  - agent-summarized successful context from the current conversation\n\nProcess:\n\n1. Identify the source input type and extract required behavior.\n2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771213513976,
              "end": 1771213513990
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_004f3c4dbbff2b0101699292c9e2f081958ff3854d02edc597"
            }
          },
          "id": "prt_c648d64f8001RzM65EXb5AQPUl",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cfcc6001gvyZp0wZFjkOqV"
        },
        {
          "type": "tool",
          "callID": "call_KPLDZYkblmjwB7ufFa0DXyAj",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md</path>\n<type>file</type>\n<content>1: ---\n2: description: Convert successful conversation steps into a reusable script\n3: agent: build\n4: ---\n5: \n6: Use the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n7: \n8: Goal:\n9: \n10: - Turn a successful sequence from this conversation into a reusable Bun script in `scripts/`.\n11: - Include only the final working flow; do not include troubleshooting attempts.\n12: \n13: Process:\n14: \n15: 1. Summarize candidate steps from conversation history.\n16: 2. Mark each as one of: `successful`, `failed`, `diagnostic`, or `optional`.\n17: 3. Build the script using only `successful` steps required for deterministic execution.\n18: 4. Keep `failed` and `diagnostic` steps out of executable script logic.\n19: 5. Reuse helpers from `scripts/helpers/` and follow `*.sh.ts` + shebang conventions.\n20: 6. Add short usage notes and explicit verification steps in the response.\n21: \n22: Return:\n23: \n24: - Script and helper paths added/updated\n25: - Included successful steps\n26: - Excluded failed/diagnostic steps and why\n27: - Verification command(s) run (or manual verification instructions)\n28: \n\n(End of file - total 28 lines)\n</content>",
            "title": ".opencode/commands/capture_script_from_context.md",
            "metadata": {
              "preview": "---\ndescription: Convert successful conversation steps into a reusable script\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Turn a successful sequence from this conversation into a reusable Bun script in `scripts/`.\n- Include only the final working flow; do not include troubleshooting attempts.\n\nProcess:\n\n1. Summarize candidate steps from conversation history.\n2. Mark each as one of: `successful`, `failed`, `diagnostic`, or `optional`.\n3. Build the script using only `successful` steps required for deterministic execution.\n4. Keep `failed` and `diagnostic` steps out of executable script logic.\n5. Reuse helpers from `scripts/helpers/` and follow `*.sh.ts` + shebang conventions.\n6. Add short usage notes and explicit verification steps in the response.",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771213513981,
              "end": 1771213513985
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_004f3c4dbbff2b0101699292c9e2fc8195a33793bf07adf4db"
            }
          },
          "id": "prt_c648d64fa001lXEfO8TKx8Tdxd",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cfcc6001gvyZp0wZFjkOqV"
        },
        {
          "type": "tool",
          "callID": "call_WEYS7YQNuss0nsjFkHDClF6B",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/rule.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/commands/rule.md</path>\n<type>file</type>\n<content>1: ---\n2: description: Add a new rule to AGENTS.md\n3: agent: build\n4: ---\n5: \n6: Based on the user or parent agent request, add a new rule to AGENTS.md that best describes the user's request and the expected behavior of the agent. The rule should be concise, clear, and follow the format of existing rules in AGENTS.md.\n7: \n8: When adding a new rule, consider the following:\n9: \n10: - The specific action or behavior that the rule is addressing.\n11: - Any constraints or conditions that should be included in the rule.\n12: - The expected outcome or result of following the rule\n13: \n\n(End of file - total 13 lines)\n</content>",
            "title": ".opencode/commands/rule.md",
            "metadata": {
              "preview": "---\ndescription: Add a new rule to AGENTS.md\nagent: build\n---\n\nBased on the user or parent agent request, add a new rule to AGENTS.md that best describes the user's request and the expected behavior of the agent. The rule should be concise, clear, and follow the format of existing rules in AGENTS.md.\n\nWhen adding a new rule, consider the following:\n\n- The specific action or behavior that the rule is addressing.\n- Any constraints or conditions that should be included in the rule.\n- The expected outcome or result of following the rule\n",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771213513982,
              "end": 1771213513986
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_004f3c4dbbff2b0101699292c9e3088195a27064461f2a2aaa"
            }
          },
          "id": "prt_c648d64fd001Cdaf3oX6LH3rei",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cfcc6001gvyZp0wZFjkOqV"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "689b71acce0a09b1c69553864f5e86d1fe8cb76f",
          "cost": 0,
          "tokens": {
            "total": 74338,
            "input": 8404,
            "output": 1550,
            "reasoning": 1392,
            "cache": {
              "read": 64384,
              "write": 0
            }
          },
          "id": "prt_c648d654f001ZLrpWr2B7zRbJU",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cfcc6001gvyZp0wZFjkOqV"
        },
        {
          "type": "patch",
          "hash": "6fb77aae5b3312bd8dda6d40d22b34a2aaf81514",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/skills/protobuf-schema-authoring/SKILL.md"
          ],
          "id": "prt_c648d659c001p7wG5iFA5ZtgXy",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648cfcc6001gvyZp0wZFjkOqV"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213514150,
          "completed": 1771213518466
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 75927,
          "input": 3650,
          "output": 85,
          "reasoning": 47,
          "cache": {
            "read": 72192,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648d65a6001xfEz0hiS3zw3u6",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "689b71acce0a09b1c69553864f5e86d1fe8cb76f",
          "id": "prt_c648d6e6f001RwWwp27OpHcHPP",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648d65a6001xfEz0hiS3zw3u6"
        },
        {
          "type": "reasoning",
          "text": "**Inspecting external docs files**",
          "metadata": {
            "openai": {
              "itemId": "rs_0103e85f78a5061401699292ccb52c8193926c66bafa8e835b",
              "reasoningEncryptedContent": "gAAAAABpkpLOcfkZgafDdx7WYfElgrJyUjzDGklZ-DaHVakL36ieaUgVXUa_YIVF6ZdSL3mTXNsn1PUo9dd4OeKgyGfPPnkV2JILVWpfh3_qUBr4lRFbSYcnKfaMgZfHEo5bjEXqxtgeXQk8oxwW4GyAJCFkQkFJxs4LxdH-6lreUqvszYIt-_TOjNU2bJlQo0z7sekB80wuFNo8DXFFb5_iBUdlRENGvcOsNWetM-UyTWEaEoC45G25uLdTi9THegn62Pubzm3s63OAehTmqZxnjbXwHU0sqws40iDND-tbsg5g1Lw7XSlGLMjLBTKCzZi4dz_o2Ti99FqCKzegPUHjnuMqmMCcrnbcER5L2wr8hwCEVbMltew5Hr0kjPZk_G3BjV2Oix6BET_xTsgATF6rdDlsaNhMIXaczsdeG6v4s5Q7qEO3YOAb4ni0D3NsfAJYpcE4qNwdcOsJtTzezB16uU3tSn8xONEDBddWBN0dskoLXxMYNPvdK2GumrliIVR30Mf4Px3LaqTeKFCKx6Z8REActPVJOVXSFzrL_WoTIvZFQxJBePaR9OKnprzEFsJv7DxJI8QTAXtDJjMaE_mt3YRy5q5PgOdg0D8V6YkHMiR5UGgoXsstcxoBESQiWhXdTSKPSP3eh04f6xnjlI2t-5vKV4zhEJy952SGShAGockrrEPQte6LMNM1QDBqcQ4YYpWKg0-Ux-N7-pZKEtv3a2HOvApVm7A7Ysdqdngu2BtUBMrguxiVHyX6n-wjxf96Qnifj9aJXzWEZmVdekhVAiwT5Sb1Q5obT9O_a0fImn_Uz_fvzBJG6ekKy4ska5zB3yMJdS9dkP47zVTwb1X_ToWD-2g0oDipe1Om6uZ945AlO3QeKnaOFk6rRmDyMaXvw9IrdWNMA0KuENqQc8xU6ngg4wRc7Wmrj3KV6wdPWD3vNJAmOTrn2f7yT3b8Ppc7yVTZ2FPkflC4-446Pav34kOwQ4rDwbLUreK0XIQgedYHH17iAq9YEgCmJq673QowrzVemY8qMtzFKrERzUb5Vc0ttGVYAVe12dATqk71W26DsXktwIJE5czSUdKFnytkmG0pFZ-N78ZKPp0z9d4tqa9ynxu05w=="
            }
          },
          "time": {
            "start": 1771213516796,
            "end": 1771213518218
          },
          "id": "prt_c648d6ffc0013QRcOgEVglqqo2",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648d65a6001xfEz0hiS3zw3u6"
        },
        {
          "type": "tool",
          "callID": "call_DQWpx2xqKFZ4xEtaSngBxilQ",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "ls \"docs/external/moonrepo\"",
              "description": "List current moonrepo external docs files"
            },
            "output": "moonrepo_docs.ext.md\n",
            "title": "List current moonrepo external docs files",
            "metadata": {
              "output": "moonrepo_docs.ext.md\n",
              "exit": 0,
              "description": "List current moonrepo external docs files",
              "truncated": false
            },
            "time": {
              "start": 1771213518381,
              "end": 1771213518401
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0103e85f78a5061401699292ce2d08819392e783fe98f0e873"
            }
          },
          "id": "prt_c648d758d001LeicZ2qRMMUqSJ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648d65a6001xfEz0hiS3zw3u6"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "689b71acce0a09b1c69553864f5e86d1fe8cb76f",
          "cost": 0,
          "tokens": {
            "total": 75927,
            "input": 3650,
            "output": 85,
            "reasoning": 47,
            "cache": {
              "read": 72192,
              "write": 0
            }
          },
          "id": "prt_c648d7653001bD3xRgaQhKmDW1",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648d65a6001xfEz0hiS3zw3u6"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213518471,
          "completed": 1771213563186
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 78456,
          "input": 168,
          "output": 2512,
          "reasoning": 2460,
          "cache": {
            "read": 75776,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648d768700180We10oeCilNc3",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "689b71acce0a09b1c69553864f5e86d1fe8cb76f",
          "id": "prt_c648d7f9b001BcDW85e7aUaf9P",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648d768700180We10oeCilNc3"
        },
        {
          "type": "reasoning",
          "text": "**Planning comprehensive script rewrite**",
          "metadata": {
            "openai": {
              "itemId": "rs_0b0497800a83149001699292d24ca88196bb5e6d22aa0eeff2",
              "reasoningEncryptedContent": "gAAAAABpkpL6WK9cKMrc-SjTEkqxXzaYc02UWgeHh2t6XV3q8x7mRWGNKGKJ04l49M9lBfv3GHEvbw8Qbgn41NHw077FJ2yrewSMaaTBNfenfRYWnE5rMXUtQRwKnJMq-u52N14r6EtAB4JRbjpJJHCHMMG_F_UCIiObChrorTkLXOROXbSGU1FJWr-7whrgW7PMlxFr49xuTpAxzYiSngxfJBN0UySGFke3YBZ9yVd4XczCDRTeCTeTP5F4silMZ9Lg7wJkPW7IYagc3gtjsnTFxJO4Rhzg8T0HhsdK79xZCuQoMgtRY_gretzVTsylc9SZuSgP7Gw6yEpSZWywRjNSgxdqE9_jwnqx5pFm1g1Yb-XEohNccXRmaMEgtUqg8NJFCHYbmH3BAQm4LdLbo68pqfV9dw1bR_nAESY7zEH8KgTc8vWhYBjK5MYJ--rtsk8IfqeLpCD_hQaf10aOijAOMgN2rHistK1xRoLeatSvftBhB5RAiE1LGPmDb0IMySLviAqi_s7w5DMIAuxE5P2peLnKgd73TmnJhrS3P9jndongo1afvNVtoXHq1fls9nWJbjQzVJ12_tbxKpOXT-Cy4is0NldVLg7U8mnGu_RBP1XbYF3Hvxiqx95jA-X90EqqIhmtck08cpkyHHlFDh39jxZR5KYWx4JM4N9vTCKIac_sJvgMyaMMVGA2qkv6MCux12wVWQ0QFlvS7Fc-6MVrS7FaR6POUT45Gdi2A5ILCZhkgS9tdVDY21B4-Z7J-9A5lqdNK4bVWFUpuRfvcAKRGRa2ovr4vjAxpMZmn_jgKLx1vXVg2Gf7-8SZHTjwNa3dXTeA0UyVZ8ertKcG-zX0IOL7xQXijvHOM-_Q6jSGrC8Fk7-aL4bv47Wi0qrUZ4HEGubh5HUUAtoYN9axK2BM1KVg6PHFfLyKxQJYN-CNynhLQGenJ8oTO8Igt2W141ewoJjSs3mp7oV4aiJxnPW0bggKHLcol7G0ZE4GFzJ6lUBStTZpc2gyWvg2U8swvb_LRapIZ87kLSxigI12RaEirFFBGI_ImKRDf_g8GUNzTgeFLEgd80SNjS5yupK3GYCDNKaUletviq_a42TtyDKn84YBcrPtxjvjg4nUdwdEY_JmCbnHhimTBH1vvo-vwExnY5DiGUtdXjTKP7VdaOQv8tGvispbXO8CRXE31FAkCCMm-090b7kRzoDBr9easFkWqLuj4y-zGsl4NQXpVWea2IFG5GebqY-uwYyuk-usYdtE2eKqN1TBRV942Olcq5AzUpU1P-Uhpidi9SEr60Zlqv20MwKMk9k2NIiRpC1aTCfFBcVEIcZnvglUQ4rUSwG-_8v_BUv4AkfmdrtGSf6PV-rLdUDJWRb8I4lCXS-8zU2TcR_6vLiMzrzgtkJubSXvMYLq1iYUeWdiUlcEUk3PlCP2tEuxSY9Pds-xxoyd1g_ZCWPbssWFlnp1TS-KCDyeoQDL713jibZMXb-V4vip-5zXzkhqha7DIi8MZMbHEtNyPXcCYFH02nRVDzKdCWqm_OM1QEVsQUW_U-c7bwlqX6x2AmSv80uUg-WYlCuQYy95b05qKYKNv0SaTm9tOV-_GlbheruXslk1926p-1mAk1qIhTg-I6Lvv5sd1OQBTcZjce5nJ5phd8ekFklsubnnWFKRzvw7JUUIovfvgYVQyTQ6EV31yrl0kNb6tJY1gfqpB_ChvykuO_hcZJnYZnQb-b3ZtNMv9JRTddHLWZXVhWdujfCjhgx7hSWqWxwwCbq_FA96Fba-gqz67E5WUbolcCczXaU2rH78yHP_xRq36SBYoUk9qEmGLJPui24N8V2c0A4LNBs5d-XCfgJBS46lalZxNa1R806erCTysd7CrHXrxAMFJUBGqT_xf8glXyAzJmCQE-xlLz85UiqgRM0tl2AAZ7nW2XYQVBUuQmDweuu_PT0Ry_MoXq3fQ5HBiXgwDxMv_HSCHrCCl5YoIZ9I8PmOHGhyNs3JGOGzm9LpJEQAJQ4Xafm-kitHs2V6OdxeGZqrZNU768PH5ZppTeopMz52ddMKpM5fzMVyrruNkUQlAcBT26EVwin08ypgONHc9s9R8Na9VR9cH9KNE4mhJG3m3libNhUaTULu909BtxE8RyJ63BeVRA8LIagqzaHGaaqMEu0oyCKtTyQxQwhleUkf7EHDCUXIhDA7JZ3lSeX9LmClH61uci_k2ZbiCOaPXD2D2TDuDhuQ-hPrL-vODcUD3KsY9fnAnUkv-YCcpgtddEFCf0nYkxOG5rmTm-BmyoCxl2Chahv0Y16_hCRbNyVIx8v4Nh0py-fGpAwsx27ZwZ6se0W5usp57fXTIGcG1vtG2-MbjqaCMk-xAcpoGbEst9aO3zfIw9Pt8Ttr80Q87HkL0t2ls5Pa2EhM4qv8yAEq1rWc9cBsJSySUj7QzDZPdJlL4HvBzPXJtjQGQx711YGH6x61fuLAAj8GtVMYKEfdQHN95mAARQccQxjcdwc20L6IOduWf_YQN85Pz1ycwZlq9yceSC92OFqUCatO4ugsLLMSby7_YykYECf89Ph4BGo-HweAc0gEg1B0o3QYMxpBfrLGu1DZMG8rqr3KB8b9TAdYm3BlK-WpzaK-CRAu7pMIJGXm8NfQ3U0R98-Np5fkjR9B_BPZY0lYbggvxnkT6sg1SntzkB79SJmMEPkoGjbBd5m5-TTd3mZQbdscqJllgwC1ALLRhqxSF9V-kI6eCGyFP6Mabj5rRnRS5MqsNCY1sYekTl3HqQdeQZtJ7btlGeYxkh37a5hdA1Xo2hbISVV-QAr77e6hShgw_rQfPyADxuoMzWAMosmcuYPw4-nSOVrwmOFaUTUnlWAGit4Cqu2ejRRTnx7F5SGvMgizLDFXmjEzWuVwrzVuVSQ4TM38Uv4wzUaIBsNdPPcmtWFwSN225uLK4FRXwCw5KO2L9EUlS2QfXcHxCt4EnoMgM5UIy-ehBDTuLMW-nu7FNtK1WDzp3eWrzkJSm9oMonP1FXQcb0zYE3YId3b3vxzkdcpjewlNDqq1OkYXw5Dfo10dSN9jPXkC1lVIWhOORoIK-V68K2hTQw-Oc_npfhCglpPHFmpLU-kP1QVMBHe6GWiBszpO94sms5s6S_MITiA6VVtA7jHZdodswZt2qRB12qPYb4W_z37ON0v4tGqp5SjggAfbV8SFdjQgHkG3KiN6LoPVXDOQuYLt659jlubz-CzQXQSjAw8L7lJR5QhYv2c-NJ7Kw6fIPmNTUJNw2WCZ7VmecVz5z4YYZbSOI_BXYQ8yYeZjvLReUGuOSUvxYoP4NQ06pB99pctN_oC6qmi0RG-Tc9zzpCEquQyLAUrfHGdn1sM_aTvNq0iKJo2wbw-LhFymFxSay70JunqauUWHOHEdbn-za2h-sOXuvcGYA6WoiKjZOylzDg7dbMK3xSdQ4VAZ7a3n-g9bjMhffqA3dK_JTgW1fq4t0anm0LZe9ieissQgT8tKPsu94gGwlTyshXE6OtvLMEOHHoZ1C6YQZLmsmBwPT1XF4oPgPXmKztvOkzStzZLyyLYENBpeL6hx-iJraf8ZdBMjudGqjSP2w1_uRK8Efik5p6sPfzrF6GFr_VJb6rz2ddbl1P_iqsaR6jsaEhRRjnA3gIEXDJcSUEk_FPCHF6kX8MHNm0drZH6W-QOzSMvs5WAPZlHKOpjHn9_nDZ2Wrf73q6oPUw_sNkEo94oAgn5OGtHbwJrVKCSmuFULPLVyzh3llTpCH7XKQvN-SPgVZDjVGtnuzN9M675-kNVBGINvw3sDOIXi82RN6yKjftkXu2ezo2fIzSQ7P5drBHsMyBKJDlYGrWc0u_z_-7kWxNjkkYHNX28PB8gTb3NvAAzkFovHsnKZ8gSzYh24ifHp_caQtEiAVZev9AaB8KObEudYD1CToHOTn8qTmsXZx-d5NmKUAAZf49KOxLI4mYHIC-BIUyovOGtDyXoIk-IVGL4aII0ACYWMjt2WfY_uHur5aU7ShTM8v5IvojpSmCNtAI6LQjDoqmwuNqiGADlh-D0Ucy_ziEPHlYNjSCdj1S-PsZzQSmR6i8FgBl772KT6-ea4zyTXeNodixM4AIent0km7DHasGGGmzN9tvZ7WNYMk2fMWK0efs32_spwn_bj5QnQmwdSYTyRJQV09IefoJBri6MYa_cpR_H8Y44YBUWyHqavoSM1VQJ9UKlDcKIW58TDGE4tVTsmdvJGIlUOi9mIXkiBKBiBm1ha_jr4-YQstMxl25lZ35DKzjFKbzn30hJ4_ul_-8Vfz6IzeMBaf5fkH1N6HgfLolUoJmi0CI3x-vkd5_f0Dvn6Uj5pAuHH73u0piCLgicrNrFYfQawjLPqLszQ45EaavlknEhEZ_ypMnuBnYKbzyPEeXC0cPlsbM32zEzFJPqhy7g6WZBe068JeboT5yp-hh4ppZ3KHWkB-JeT1IydPt6DrAEWRRWRHbjElnj8dFKq5aiHWGsBzP5xgXNrYNmDUzrV2l0XeVgvNlSQMJSubswCX41-RNQfgTIinVVFQqyRYAA0usLmZHmF6kSVIu4M4gD2JuzJjx0WE3FxdS10Q2q59ru-vCuBLpK4ExUk38PUqM0NB-EIrOGwJjdfV320_EqsMaJtVDPTIHaO2dBoODAviiwarAqHPW-4UgHBjTAVC0mWp5Cj1GqJfQDxUjelyn_a8dzpmJU3OIODe2uFjMm_AKnuzxGwMzGtaf-E4rKmERH93QJ3ZA7XKoxXoC30o7RRY5LZLAJaeQA623nEUUKzdZbuMlD-9EXR8_SsmYNXYlNsR8nhLnAa8xnJwSzYJ4OdI4BblJtJqT66Nm-_0JUTSLiPZlq2bBLlAmKfHGkFQyihmS8lEBatmzFDdzTyfejbCKMd5DJWszf6Lm5KOWvc43nwZmdvVrLp_VrWC_QCoH7ArsLOINbWr9K10IPa5Ym_pYRiqa56Su2Oh00fxQ5o5R3Aas7SZWN4IEsxb0eAavPodZVbk5JkDU5_8qEDcxQNl02urZXNgWiG1Z59uxri0gVPwCYKcVuYAZQI_dS62Is43-sMthw5a-GgEeeQs-_j0iJUMvGyO_sP-lS3Q7JjMq5n7d3LZ_duU3ldyq5xQcK8Fwnmz5vYYi00aZU_C1iXGt4v_ELcd_5mAU7d-3vuAoMFiI_TEAdn1s8qytUNemJoInQ0WAAfdET9GA_ZRFFJQiGElhMY4Gcz75weAoyQp0Ysj06jnlzbUXB5yrZGqGJZ4R2OogFR_1rHx2pd6XBz0yZOIRFkTbcqTxlkbSv28nEH0xVkgWfZ2pTZ3qpj9UrNGywNFLDSONhYtTJU46AjKSRmy3tt2UCekB10wXbkN_DUwXpyboGZQnewzDpk5YA2xqgOXppbvmeNrEM4qapGMcMns5vTDfO7oyYzy8oEs_ub3xuentuyz-todj-Q48_IjjMJGSQkQdkp21N1qMSmXHTkCcIHTJzL10EmUxKmguwvVCTzM6cm6R1f1e0wKIKy017qtT-Y8Wd0m1r7gjBZ_NZcsH_znDtF5GgJlZ8cyfe8XVdu3VnoSYDOoR9lnUasGH9EJAHCk3jGEm46wDpf-OKOpFvs9lwik4J35eGqYwJX4C9MbWS2Tbyw_Tk-XBnhGc7O7xOAS7v03m0AH9ALnK6QciphovfFuxqX7lWbUANSfewPDVCb86H1gIgN6BQXX_Lkoc6Ztx2vpZyQvfetQe9CJgvEMKa5P0pyE9X_rXxh2-qD_GYIUX1fsK1taRsweAOjenzjJW5YXGdl3l29nIdC4o37pPq3FWHOulXoB9MqflpTSv7DpuhKUnVd4-wff9_B-kAhljdxZsQB6REebKeID-5uzcd9emb0d4sE4BcHzl2XdOrmbq5tfVmEV-vWAmfkr3_PtaWIUsG2N5L75oJbhE18muY6h4rMyI8D3BjRP-TiiiE-5injF0uHZWyAHA0N9VNIeDHuhOXU4CwJwNcFj-UygKSIBITcqEB1WV7_skQdEaZIKZvFB1aI0mQ5h4JN2vSU6TkOgGvhbcTKnTr0VpZjKEEjaQiNNjIr4Ge4QH7Hn2WZzb9MT4rAeGrkYZ43X2atLYOUVk69WjGOYk4zUsYQR5XqL9cGEMkzZqDUcHuNYo-B7Eod7eB5ofqGwVyDblT_5o3TvVSf9lbBcigAPcJP8FQMwpmQ4OV3lIXWO5FhzflAF1PDvV_dFaEyH0cdwcgNaCUhIv60eydQ2qF8NI2v6xEXIE5np8CoH_iUCtGDZ1HHst32fi45OAWYZb0EQqoAU_qKlu7EQfM5957Gp0Wah2Hm9lyGIuSnS1a8fb_3kwZqmOUDBCPJDuoCDb2TrsNDiJgv7_vfvz7laWnAgP3U6lq2M4tqCu3wmzY5UhzDAW1GjcRtrOHkfhi0lBUZZMdKGO11vRf62QXQ4AXlkQTkOrYkdUKTwy30xCvvUUQDwv-ImOnAFUGGFg343p1POB6kHNxz8FGTrHLrexadnlbzwpM9-8DWJ4rUOjmJpvcYorTMo60xtmHXdl78DV0lnO_97G_bVP0crMtPiNA2I_gqJ2EuoTLXc3uqOE58pGRqzPFfTZI8sMnHcvFuVQOINS9--M8z4wYd5t0tTJSHK8hXyvQS-Zk39UJ14bHxz-Hv6GzSyKVYBfDZ-H7ZtcXrnn5qFpL9KwD2jCt-cqMlMi_bAhQTpYWb7u8kFrQK2brcNDhh6kutFQtPzgJs1aThQfQ0bnVsMriVkg59jM4QWusEe0gINDXOtyzUt2m7ts-Hk2djhM3EJSJQ37NkyzQYzcozdX2JN3Fo1iU3Hlk5FroVcNE61Z7f1jXP0frQbkNE8wQx2Bz2rrOkMPt02F3gz0NSygj7SthXB3Jkt1zVMoBDA-k-j1HTQlHc92xthA5qD83vcEHo1Op7R1dF5_uH9M-WhCADsTyZC3mGEoHEaGLu2I7B2MyDw5DLhBVBMYQ7p3ppxnOmV2vFGq7OFsfj7urm4crmxhZ9KU3aXbkESSlln1IPjpHu4r3qk2SsMBcTWRoedXD7ob0VC8hCKtt5WEd6gH53yaCBMzFLdBcxJuRF4qHtOTEaj485T2-P6qPW4XypTCCG3jRx1sL4kfWLTKe-DKCgUCzf3L6YrdIjUi62RdayRI_J4gyCGcgsIVcRMZ9xP5VOHzkPOJdVuzl1uBZ6t8imkxU_shWWca9VGMxH3ZoHb7gcGXqpo8_QO0TTaLFbRfmzj_y8khAYDDcF0q099ziKGesNFKYvqEgBgjSaw_c53wJ0Ni5CFfDO_n9To56MipeLc0Wx6zTYP4_ZhCoidrTjx0OtaV8ENtfCoCjggKOnA26msUu_HBYmdg-vJLDmPEAGxDqxxNVy_eQywPWm7xokHQmrlBdQB8bqEAmYYSbXU_7ghOJuE0zKTCRTyjKBNu8H2DBuSS-1yuYbIBYdSqYIHO0g-6n2MLybAH6_hGaAJ8rPHh1PQW-7mhdnnd1GGCd4i2Z0a4Jh_518ApebmqdnSF2wLkeUyt-HLjk20MkPD2Bazbqz3_GPILODY1NXM0m9EQG9VVxbZckUonvUXEqxnCufYSfJhXGG92NWBJCqNuNIeDNjzN9twK2diRZKeswSJsFj19QSxG6B_ubkyjsIxyfFGkw2R1I14r3ebUaJAWxz2n03DihT8kCxRiuvows52WEGH_nLCTBgfKZSNDyNu5JD8Cq_hhUkYyGy_c3sKtfnT6d8RENhWmOr3XjojWFA9MEl-89w3QjCI49foYJ9mQlMQOOw1SdsQqw2UKUuJC0Mj_C5GBtyeqRQsj3aQvaxXJcMOmKLPfP7Sy4F_Zh0fv8Ueaz8lw_YXPX9GEom6zxhmZiRGpMueQcjIEy7XkXp_BF6WWHanBI0RhCUNlwu0kYMExS6bD5q9EAk5MS0AShPcaUHq4PnbquqjzBaNB_QHSebwaJ5im7W_-gqz9tUXp3iKbphfj9X-kvoQdJZ5RG1mR2jGxWp3yefKdQAXRSnCyrAfK46gqYDV9Qh1uoW0basPEWXtgiGNA77UmsEOSO15Y3FIVS16ikYH94BrjSTS5s4CkiuI5DHU-kxaeNqSp94947yA_zQSQG17X5_E1LyIGeycYAYD0kuCGNHsUlnAJWB_2HFJQ_6-IXMZj01X30maH5ymjpGnp_Gk6ucn-_iFLH3DBRLvQ3Bx5TLG1_IE2XR9Uf2ZXA_yhdVlAQL-IhjtaN28mVI0YVA27KQVNJVvsGNCKwkvx6tVw2cEKfAtjBy3D5Qj6LPno0iaNsEf7gbQQsyzdSZmmvSwduMLx_lmCsdTFuftOSExsjWHmneOkn4FkD2SoQ8pzao94CQS8PcDcZB46fjjAHzGV0MtLLi99fGwSqXOI993fF952qGnpLiy-GZlfWTB_X1beFb-m8ihD-tqFVHmIn3qQWAeuP_sdDpVRnZDK_xj2M4h_xQs82veuL3KStbhQc9wuFO_trhmg1J4DSJB4ZTkjmOXXRFe6uNk90qDGstWFxVdjXCG46bwNehr8o8x88CLMA979EslJwzxBXou-5uZjjGHhPKSbKRn6GYCRJ-rlQE-zb4XC025PtlBhL4KIGmj0TBUycTzjo3QGLiX5vrMADFaAmr7_m19pnpnzLEKJ6Wn1vXCCZ0jX067nYal6axJui8S7Y9bUEikAAr1nwS0rlY-lJns_07FxaGWn5X2shRUAoUL0z2vXLMnZoBx3a1Mw62TrTMVu4hc7ed2ArrMKnSOJb2P45Kg3-T5vtHpLDZNcrhRKu28qi57n3HUkfwzLd6RlF2Nh_zHm2ki8uRhPyl6OKzqMATUomwb7LuETPrUqJvYy7XA2DM7HPOVm3ytpu2xcPc0pKCVljDjdmbKOO1x3k-UFaE8mUr9SYMPSFAJMowFsJ2Rck8whiSaaqOwrHf_PNU6z-BJMdYWFaCKpD0CG8VJT286kxaqkdcfxYs6OE8vmnZ-nq9rGfe_r7aNR5thqgAa0Q2Yt4Og-2OZcgpl03rzNYbeR_-IBlrC5wrFBEui7xlYAS4AhZ17G5yb5eZQsLB5MrjulFXYMihWRCNIT5GJuynWcBDcTIHj1pN1AWuD6Gk2tuDjV4Kr1TUmqwK75pgQ8R7XdyGag-z7ezy2mFo9hSKPq0ssPBOM4fDNDzxwjmwkctkYZDC9CdFZcdRoEERbG44YqI7uHB7KoCcX2G1NsNLF76EGZGnlYBEAkrf0ArdnCgkqwRtCXjcZkNylhPhLCDTBFQNU5aKEmOKLujy2e3qYiheyPH9_IhoiGHrqPWQZoU91p4xAnSQgLyyE4Zxz7D1GGmmit_NBPN96bytFwpSpMhLTDT81IviJvrvR7GREo6AQlQRjzOpLNVsurmXOSqAASeogQ4586wUhNe-mPBDC6kGxYaMBa71WZu0eIa-p2Y8mW399sMJjTXjOONGDdMRIuDMOSZy0qghe0Ml0LnNFl3R0sVvpOq0imF74kzatRGVIY-5d2-QGJySsv2aHmR3UcZr1O7c4MYx-281Pa175QV_mWbaWyQuNqhJzF8QPkzO7Cq7yzAR4kmHgymNQJx3Y_90G7Rz-ckHKDmbL7nUBkFnH_tf78C2ebtYPDOIBV1etMFkm6NWeBX9p30FY6UJu2roGNYkzPrEuWguu4YKpbi-EdKoKQ_sdCcVkLNOgqOiZk-Z9pCoXJGbThsBMC-jnCPPk20sTeCzDJ9y88P51SNb9GkbMaXUuD9nk9jDbd282SEA7-ZtqZG3AjuikIprYsgeZ8vKFivtvg4bEypPcL-2bcdEArXxYsv2PuflqS5oNQSvs98yponSbyZlXZb4uRn9LZ20XUYogvHHeMUTFSmwn3tOdJPgHOq81e07UGjQ58M8tkIEOudF0gE9NNv0DAau--4xZggkLBbVWjC2fKSScnZ26pp4ijoYKZLDi9XOZu2X5_u1R4jTCPPK0ofRxvL0rpAX5gVKnIDgAV46sPWdCz75wG_A_sPV4cXOCGAyyxGUgxeNDzNCW7LPys4gotOz_PgxnPzMCWIivu-IMPclj5H8YgU4KT7qOaT2RRNGe-NIU0EEBQ0eIagXtE380rzbBstqap0TunJITRz2CFdAe5q0cnRlL0iUiHhGZsddqPy4N6G62Jq6Y7y9c6Lj2a0Mxg47dsYQbsu_IHJlSlF4Phi9xiE4M_6tUZ3fXTTpyc9Gyvc76Z0QRbLDA4d6ajCslhLBPZoXrewhWJZypwhF62_Jl8euXeXf1-uWB0qwitE50_6fBLxl2RH9-B2gtv17YyXa2rm5wzn3fBNlTzInM9wjP2WvPBhlBbWPciZGvZJSbFfRu-MLZEaqDRTIcMZXndyQqer45EXBqyMe5FmFF63uEbFqzrq-S9bZ094VCYHTarWWaAjZhVvfD03AQNSNV6wmjfxz7KJ_W-HRkg1WmihmpEPdjrm2b5SUlwt-y8NZ_waSvQPmTBk5T8dld7hhJAFaolWS-foX18pCvvQNsCbQSCmBISV8BHVweUy4KE06cik0ekKTOD6Fubs9bph9xw8qnanJ76nH30RPrjsEDkugmLJp1EFHP39lgwvAlXEAY_QMB31m9TUiuN_mIPkH4qKkRDpFak_7SEyPfzy8M235YPBXYreGDUZdP4BIA-k6ahfFBNx1H7lRoVaxtHOMz0YileufPybUwDTzZmA6XkCz0oPgrAXmj6dKWgj_Y8JT88Cjl1vTNKZNMDvhWuTjACbh75gyK8tN6kUwpx9FZPTSqI83JI1ZYPr0Sumv551rSaNjv9L6w1wmOFojVk7-wqbpVyBJSUXysEaBGsjFG-RHO5MQFR64fDmP5bMfm-sRGwKI2M2TCnm9dcVushPf8wIS8J4brxXUdXI9LV5PK9hYy2jjELYZnRPT6uLc5o_5BlkubdfNDhZex1UtNuvd48mXdulgIpLbPXfwGPi-zrrVt88MRq0uiih1-lxpEcwIYkHlrKEsbg7aGlhL23IrZXHWxYLK72BrUSE9zeY1aErP-kmJpD1G2l5Y5DQqv8rXWJ2t2HkhKpJ5D1cN37RXTTM2xeprlSzGjxZWfn7aivK9guVUsY6vQdafL-Uqrb6OOA-H-S6Sl1Xk5uiaubMMOS3_GlaNVpcl4YUEHM6lz-x0Pp4IXxamCrGZfsYgVz6joaAr7jehza6J8tI4I4zeWnGesrsglOwE9jiSmh9Q4p9VRBUnkET9lhWHNK3EaOtra11mzj-X3Z6uPbxWeqaNJz2tUta0ZKC3NOp2RBvGwOMk9IT6MvuosTIz4smGnuIkCSkbs6Y1sW1La2X2aY2aKU5k7U7QLIJeJzEBGKNl-RptL3cWe9a-0TeSCO2TfmIYGAtRQ9Zbgx9tNRCWaaGNWHbhF6syNZlWQqlbgwMtUQMLISdSfwh8YJbispZOM9ROkIcNZtoWO0lDfqygKgU-lyI-fWEDYNKAE3SaRRZaNkcFg0FH_Gj1KV7uoPys7u2h9abaSMec7X2LCojT9zMqq65wWr78wpRwh5lxXHeq4Zvbwg9WBd8UC7Kn1kY9_Nn6p8heL3j56p_GUBg_EJVd7GyuQxXImlpOLLT2fly3u44_UGne5ZoM1Ys79pIIbJMgyBApTcPZ2io-CWm3vkss_Z5Ay2eQJnylrGC8WV6O52oQs3VU0c2shfYvcmncVf7jyAt5DMB-oYK0wRJyU3Y5ozjw1t4TegtkWY4v_AaQWABGFUuhc2wZWHj_bl2CyCATqx7fQ4MbOLJ7OuOBWlwlDcbH2Y70Feyxedfns8kQUW3S08BDaxbUkyC9dFhx0V413osvRPrrt6Bt-LRxjuoCNjH1Okfm9IGnYw9eNw0EGyxNf1HsxUp0DqRltE-RON4yh57gRyjQbSTk9ZKsZtrsfaYpv7avVF_yaCtv17btvuiWbGpwmvRy5lHNYN5VBKu4teoh0CW7cSJQAB2tLVkVas9ZotpVRkRqU5da0X-taGMuPNxZA3rg4Q2HTFRwe_WfvXrXKMuJzCARJH_SLQ9a2FEhbtgcdd98wvNx-Bxf_5GNs2azPav4lByTQ6QHIX0BkZplS8pLdmwGcZGAASf9gP78nc9HzKpZPrU6aJwQIfXBlvwOg342D3PDJ0oWlPBGqmeqhEBQPtu8eMyBeLNV22DgEdupiKidjsMDcKBiJhg3WC1sRG-c-k3JUlmhp46gmudz1e9Q7gLP8yy6sqGyXi7dbdaxinz55UQl6tbKbRBt9sMJhNP3SGTNyScSTIwhknSrWTwWBteqgTWEE0Tngc94EcXlMAnKogcHbAvav7udLk085fGFzFY8TE6ZbzY-VGLeLDYAfYZrfdkz2t5l6NNzdivaBp1HR8lREx9nfkwSLOu--h9TBoPWInkD5uhQe7YsLraBzBLVZjHgYXtOlbVfhuGa_eFURLOCy5-SMmdS7l1FEbGPpj0ybnOIEicoHoyDrGYqMrna5jS2SKkz4Pv-mTDQC6373AbAo8_Eo_nDh2em5PpV1L3QggbwEehy2LWdKCkBjVGgOXZrYYDC7uq41PPC03R634_AQCciEis9yE_iORAP3ialfZc_DwISss7DYlCOK86nSqXB9baLb3L0kCBeC9m7YSAQourIOLaqn9hWqZOGHjKTiJwMdtaU_44DrGOTzL6MUhkjBY4pC6XP3r8gyMSNdrToovCkfJVwd2iMQVVoyPGkhX9yZPvIDQ6Dibx3IvoV0NR1uAgJxLQohs067exaDeBvB8cHRAkkGxUG1Hlko0YDG2DngExTZ6jeOvy8Pgi_PsrsS_Fw6D4jGB0xM_B8Sq27WVz35weMn0urQKplLOUofiMiYxRVYwPqASSc4dEi0OlCnym5C31T3rgQWGnkdp6McIudeD_jbLuyTLHoGJQQ2cpjwjpjBV6Kg2ibtMZeqFepIhZisYzL6jFj0M8Ic2hVRExUxZlNWSF3e6As62IDQZDRk0wetA59T_QMhnBmWYAHMqSMJ_Ubugo9r-XJSm3WQxCkHjx7X0x0Hb20LLWYcxf0UgLt84u9JCGvynoGdH66eVd3VVNWh8xTbNf6-8-gJbWncunvK13OxyaLjEEe7Qe_N6CWV9fWCallZ02JrmfJ6H1D0RJUnTCNERexsmtIQ4MBP3bEGRjDoOAAeX2y9Fic2LdZWNYVMlueMGcThx2cm3SQ4GQtrpAkpZ9t3BBKw1aKn7vYK4BZVjgM_EazW8mxzXv3sSMm3iSnS0rDMujOlqG8w3I4jnGIf6KpWkDyB-LGnlIn8P1g7jvzBwXtttIwffXD4vDS8Eito01Ebh31DxMRd_LCK9d4lXxNi0GJEF_P8dFkPB2WTmWzDenVyeGQPY60wNvqOLNR_1slpbx-Oy3HKqpzgXBWDo-kFs9dXM2qOb0cQTpa-hxlIoyCFNro_6yerStsM4pkxOa6NX4coyKojVg07Bv1fZoqHFCGPe1QvAoam0tnrMr4c6siKMAqGOywKV8bVQngGx6FUX8r1Hd1njxTLqS2mkHRi2GztWkczjfNB9BAY5tkrjhL3p4rF-Ylqcj74edwV0mhZoovrruTtL5k8Y7V_aEwl-PvEkIVw0NAtl2oJEOKH1VtrTpu67ZbnIGdwaCyitj-438lPZMMsa6UzmNe67MDg-eghdCIpgfZcbhFJrGBaifR2NnnV3P_IErRE_6DOXZbskNw7hU3CRCFGwY7snHMj7O_FaC7qduhJR1dnT-0nzcd_RwpiuSBm-CCt900SMzGiIBo_uzLKBiL0QQOeyBEO5BqQUksBRAEGqIQHJHbQjI61QKqXhU7tOAa2VCOeVatPaO9mF6w9qRu87UUZExMTgXHR_TQADlTaPOL4yFiJKPXgQRgoALGGEt5RS4fHy1BfizataNAyVra8pSvhBNt4Y7yByUAImEB-nbOQBXIyaJtJr4R1iYElTSvCiLQdxCf2Q9m75nDEzHWhk3wNc2yrPdQr0Xo9g0J7P1yk2_Y6XJH2Su2J2-FU_ywUhXQpXEF-N16VDh_lOP9Cab00XIRHv11OyQOINuQbKry0RxhrOMcSA8ZbJb3etyQ1O0g27ucu99sdwgwoPVo68bhtY6h1lBJ7bIDBUN-jp8oSbBAXfH0KW-UWW_Zz5jOMwBh8FH4S75jOsDkYpVIAWo_ZMHfoTIwPZMVWDPmnoDvoIlP-ZYBpWDzgJ2C4GwhjxohBztFjVHy7ODKOFO_yiK6uy8UC2dNda31Oq_v_HAQHxypNmg7YAYrkGsb5eqQKEmm2eRe3zywiPMV9kx-iJ8IIsCod2H6JJBeKLaNaGXOG55_EJkpl6Cia3bJBiS45-v9tpi5wRlP39xiCMFtPnqP_t2j74DCWRyTgL9kMxX3RFcNSf7pZkg9BaTQwhfDgC1Qao305VsVawOZQvsdQAB4eyEelxL27y6LDWVY382reBxxvFPSRjQKMIwxb0kdH50M0Vwn5AK5fADzfPzZ6SsgE56UQqp40UrUHLevv5iybKo5CsSst6s2xcbR2HdPKr09-KvTUvNauXrKmXDgGnVHoA5diVd9W6HOKpFS46Uy7BpBQG63qWBiUJCvu7P0UYa_uy1P-0OkWJ7nkE1Uq92l5vLt91ycOxGUoyrHjckwbdN7imdSkdqJvpc6KCp3Ii_5t53Y9Z_nShJ1PHGQwF35hp5HqMEotcrwau5DjV5xouhHOc5LCx_zKTNOFl7NheARrOTVws_aC_yuwgBnfEGkn1I79GCo8yT_AMeZFrQnit1KVkJpJ91g9NIOlzlwTKXtVHCsJQ6pZ8YHJPlSV3oj7l0JJtE-qGHuke4SGYJ5zMBcRQVnzP2jz3WYKsSOruV--_BLg6fB0kciMm1CUpoMMm0osO0Z8GdvtyIYix9F3HZH_tHmGfrvMnGhbmducCrsndzjmEHVdbQuI5nLOYQwVxhue22gLlofhezXjAgLSoYuW-VP9XvTLNeMqypVIyjIwan0EFcqpQmWdsJ7qM7yM9ebC9uqTwLjJIU0ijYlRJsT4PHzHIWAJCXooqgyeSiPa3Sp6jD5ALRUtjTuc1FsvXBmQ4myRP4XC3jT4QtATUZixDSvxCmob9wYaXCAlXB_P0NrWLeFMfj6jQRPkDEFUxBRQ23cQImBaC1CLjBwauXdVZGYaiY3ldZsBIN1hvv_kSDJOhCJFGJLxv6WJOu7vkEyB_2UP9H1WsvmVRgLkeAbjLj3D14p08_fTcSeX8yr1NosDuKx5kB0mbBAdxLAO537s1_1dW5fht2rfajOIX4R1BL-3swZBuHg7O8w4HtPow16zYe3WHY8IHg_0IjjCbOzpFeQqUcS8ZlgnGJYfKlOI28JGpvCknmDSdff0ShW-4qn_-4Ohqx9EnNFaNs6hb272oNvIYHRbiY9h2Hp3FSXlFM7QkQuGtmoFHV1AZFio_dwAloaP8a_iWx-i3YaF5SIIEaoDhuhtyqcHXym-21y6C9Pxu98Iy5ZiqYYVygYSc06qdZzysU1SRqOT5gUwqtD6ZpfHW5HOAmJb0MIrPvGKtjFwXPnocjGoZ36eBjVlgGo3y9bi_VdVkfyTeFP5gXBi5HouRU7BnI2q1PvClOKZuC44DWAWVp7pAGo3fw6gN4s24gSkkGG4cb7mmu8ILQTfEDNdTXE2lopSEADJ0cDg5Kr2g6rhEPac5bYcWikoTlf5nzxLLJ5Qp6LmgQPvSaYWgm94PvkGVfDPCFLQ7fwojFOqBJOCqcR7TVhAN_QoT8nhSIBUy3po8XSZkuAAEUBkYIws8nx9yCkmq2PXbTJVOMsJ3RvlZo6EL-LGC1LuYKvfCY13pnPCq4tRBZRncZb8-QWd3To2Kus5lHkqbmul8BtXr90U98XHxW1vY3u8Ny86LapKO5GY_i9fs2TPeZmN2-B55qx0MotOxRqKCcce2cikngEX3p8mWQuGWHqglc0nFWo9Pj-HK3cUnTel_o0IF9uuwnDOMoSAZLAnBDnafWgf8ljrZTaNJ5TAI4DdJniVK0H-8SlYXtDgarzvuV8eXTrm4JaQ3PKr5qMQe1lJaj6DxUKTkrFl1VkIUEEbhcsVFBcoBdeNFEeNBvh4oPYzsac5kYryYHi7yZg_y8-y5_oSZ186WEDJ6Sh7IrHbhlBeEIud10hn9bVoYCIKzelj4PfVV87lzhIwAoES247I8bCdoQEs5k8d9CugDFdOqhZKe6wesBvFyqEThzbEMuJ5Cu_U0CgyVQ6tEQMUnM83XTRpkU6Q_otpLT0xQsqUTTJk34kehdB74xyn13BK5S5vvJAn69PxlhPQOGw85z4sCTv_0VmMaQSvYchAEXBWFZdYGW60g=="
            }
          },
          "time": {
            "start": 1771213522352,
            "end": 1771213562930
          },
          "id": "prt_c648d85af00188xxIK8Pvj45X2",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648d768700180We10oeCilNc3"
        },
        {
          "type": "tool",
          "callID": "call_ovEODLeFINJa3wp76g51XJiy",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Delete File: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nD scripts/scrape_moon_docs.sh.ts",
            "title": "Success. Updated the following files:\nD scripts/scrape_moon_docs.sh.ts",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n@@ -1,314 +0,0 @@\n-#!/usr/bin/env bun\n-\n-import { mkdirSync } from \"node:fs\";\n-import { dirname, resolve } from \"node:path\";\n-import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n-\n-type ScrapeResult = {\n-  url: string;\n-  ok: boolean;\n-  markdown?: string;\n-  error?: string;\n-};\n-\n-const SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\n-const DOCS_ROOT = \"https://moonrepo.dev/docs\";\n-const DEFAULT_OUTPUT_RELATIVE =\n-  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\n-const CONCURRENCY = 4;\n-\n-function decodeEntities(value: string): string {\n-  return value\n-    .replaceAll(\"&amp;\", \"&\")\n-    .replaceAll(\"&quot;\", '\"')\n-    .replaceAll(\"&apos;\", \"'\")\n-    .replaceAll(\"&#x27;\", \"'\")\n-    .replaceAll(\"&#39;\", \"'\")\n-    .replaceAll(\"&nbsp;\", \" \")\n-    .replaceAll(\"&lt;\", \"<\")\n-    .replaceAll(\"&gt;\", \">\");\n-}\n-\n-function stripJinaEnvelope(markdown: string): string {\n-  return markdown\n-    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n-    .trim();\n-}\n-\n-function stripTags(value: string): string {\n-  return value.replace(/<[^>]+>/g, \"\");\n-}\n-\n-function plainTextFromHtml(value: string): string {\n-  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n-}\n-\n-function extractMainHtml(html: string): string {\n-  const markdownBlockMatch = html.match(\n-    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n-  );\n-\n-  if (markdownBlockMatch?.[1]) {\n-    return markdownBlockMatch[1];\n-  }\n-\n-  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n-  if (articleMatch?.[1]) {\n-    return articleMatch[1];\n-  }\n-\n-  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n-  return mainMatch?.[1] ?? html;\n-}\n-\n-function htmlToMarkdown(html: string): string {\n-  let content = extractMainHtml(html);\n-\n-  content = content\n-    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n-    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n-    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n-    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n-\n-  content = content.replace(\n-    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n-    (_match, code) => {\n-      const normalizedCode = decodeEntities(\n-        stripTags(code)\n-          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n-          .replace(/\\n{3,}/g, \"\\n\\n\")\n-          .trim(),\n-      );\n-\n-      if (!normalizedCode) {\n-        return \"\";\n-      }\n-\n-      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n-    },\n-  );\n-\n-  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n-    const normalizedCode = decodeEntities(stripTags(code)).trim();\n-    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n-  });\n-\n-  content = content.replace(/<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi, (_m, href, label) => {\n-    const text = plainTextFromHtml(label);\n-    if (!text) {\n-      return \"\";\n-    }\n-\n-    return `[${text}](${decodeEntities(href)})`;\n-  });\n-\n-  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n-    const heading = plainTextFromHtml(inner);\n-    if (!heading) {\n-      return \"\";\n-    }\n-\n-    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n-  });\n-\n-  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n-    const line = plainTextFromHtml(inner);\n-    return line ? `- ${line}\\n` : \"\";\n-  });\n-\n-  content = content\n-    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n-    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n-    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n-    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n-      const cell = plainTextFromHtml(inner);\n-      return cell ? `${cell} ` : \"\";\n-    });\n-\n-  content = decodeEntities(content)\n-    .replace(/<[^>]+>/g, \"\")\n-    .replace(/[ \\t]+\\n/g, \"\\n\")\n-    .replace(/\\n{3,}/g, \"\\n\\n\")\n-    .trim();\n-\n-  return content;\n-}\n-\n-function extractDocsUrls(sitemapXml: string): string[] {\n-  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n-    decodeEntities(match[1]?.trim() ?? \"\"),\n-  )\n-    .filter((url) => url.startsWith(DOCS_ROOT))\n-    .filter((url) => !url.includes(\"/docs/tags\"))\n-    .filter((url) => !url.includes(\"#\"));\n-\n-  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n-}\n-\n-async function fetchText(url: string): Promise<string> {\n-  const response = await fetch(url, {\n-    headers: {\n-      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n-    },\n-  });\n-\n-  if (!response.ok) {\n-    throw new Error(`Request failed (${response.status}) for ${url}`);\n-  }\n-\n-  return await response.text();\n-}\n-\n-async function mapConcurrent<T, R>(\n-  values: T[],\n-  limit: number,\n-  map: (value: T, index: number) => Promise<R>,\n-): Promise<R[]> {\n-  const results = new Array<R>(values.length);\n-  let index = 0;\n-\n-  async function worker(): Promise<void> {\n-    while (true) {\n-      const currentIndex = index;\n-      index += 1;\n-\n-      if (currentIndex >= values.length) {\n-        return;\n-      }\n-\n-      results[currentIndex] = await map(values[currentIndex], currentIndex);\n-    }\n-  }\n-\n-  const workerCount = Math.min(limit, values.length);\n-  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n-  return results;\n-}\n-\n-async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n-  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n-\n-  try {\n-    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n-    try {\n-      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n-\n-      if (markdown) {\n-        return {\n-          url,\n-          ok: true,\n-          markdown,\n-        };\n-      }\n-    } catch {\n-      // Fall through to direct HTML scrape.\n-    }\n-\n-    const html = await fetchText(url);\n-    const markdown = htmlToMarkdown(html);\n-\n-    if (!markdown) {\n-      return {\n-        url,\n-        ok: false,\n-        error: \"No markdown content returned from HTML fallback\",\n-      };\n-    }\n-\n-    return {\n-      url,\n-      ok: true,\n-      markdown,\n-    };\n-  } catch (error) {\n-    return {\n-      url,\n-      ok: false,\n-      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n-    };\n-  }\n-}\n-\n-function buildHeader(urlCount: number, capturedAt: string): string {\n-  return [\n-    \"----\",\n-    \"## External Docs Snapshot // moonrepo\",\n-    \"\",\n-    `- Captured: ${capturedAt}`,\n-    `- Source root: ${DOCS_ROOT}`,\n-    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)`,\n-    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n-    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n-    \"----\",\n-    \"\",\n-  ].join(\"\\n\");\n-}\n-\n-function buildFooter(successCount: number, failureCount: number): string {\n-  return [\n-    \"\",\n-    \"----\",\n-    \"## Notes / Comments / Lessons\",\n-    \"\",\n-    \"- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\",\n-    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n-    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n-    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n-    \"----\",\n-    \"\",\n-  ].join(\"\\n\");\n-}\n-\n-function buildPageSection(result: ScrapeResult): string {\n-  if (!result.ok) {\n-    return [\n-      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n-      \"\",\n-      `Source: ${result.url}`,\n-      \"\",\n-      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n-      \"\",\n-    ].join(\"\\n\");\n-  }\n-\n-  return [\n-    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n-    \"\",\n-    `Source: ${result.url}`,\n-    \"\",\n-    result.markdown?.trim() ?? \"\",\n-    \"\",\n-  ].join(\"\\n\");\n-}\n-\n-const repoRoot = findRepoRoot(import.meta.dir);\n-const outputArg = Bun.argv[2];\n-const outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n-\n-const sitemapXml = await fetchText(SITEMAP_URL);\n-const docsUrls = extractDocsUrls(sitemapXml);\n-\n-if (docsUrls.length === 0) {\n-  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n-}\n-\n-const results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n-  scrapeDocsPage(url, index + 1, docsUrls.length),\n-);\n-\n-const successCount = results.filter((result) => result.ok).length;\n-const failureCount = results.length - successCount;\n-const capturedAt = new Date().toISOString();\n-\n-const content = [\n-  buildHeader(docsUrls.length, capturedAt),\n-  ...results.map(buildPageSection),\n-  buildFooter(successCount, failureCount),\n-].join(\"\\n\");\n-\n-mkdirSync(dirname(outputPath), { recursive: true });\n-await Bun.write(outputPath, content);\n-\n-console.log(\n-  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n-);\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts",
                  "relativePath": "scripts/scrape_moon_docs.sh.ts",
                  "type": "delete",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n@@ -1,314 +0,0 @@\n-#!/usr/bin/env bun\n-\n-import { mkdirSync } from \"node:fs\";\n-import { dirname, resolve } from \"node:path\";\n-import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n-\n-type ScrapeResult = {\n-  url: string;\n-  ok: boolean;\n-  markdown?: string;\n-  error?: string;\n-};\n-\n-const SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\n-const DOCS_ROOT = \"https://moonrepo.dev/docs\";\n-const DEFAULT_OUTPUT_RELATIVE =\n-  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\n-const CONCURRENCY = 4;\n-\n-function decodeEntities(value: string): string {\n-  return value\n-    .replaceAll(\"&amp;\", \"&\")\n-    .replaceAll(\"&quot;\", '\"')\n-    .replaceAll(\"&apos;\", \"'\")\n-    .replaceAll(\"&#x27;\", \"'\")\n-    .replaceAll(\"&#39;\", \"'\")\n-    .replaceAll(\"&nbsp;\", \" \")\n-    .replaceAll(\"&lt;\", \"<\")\n-    .replaceAll(\"&gt;\", \">\");\n-}\n-\n-function stripJinaEnvelope(markdown: string): string {\n-  return markdown\n-    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n-    .trim();\n-}\n-\n-function stripTags(value: string): string {\n-  return value.replace(/<[^>]+>/g, \"\");\n-}\n-\n-function plainTextFromHtml(value: string): string {\n-  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n-}\n-\n-function extractMainHtml(html: string): string {\n-  const markdownBlockMatch = html.match(\n-    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n-  );\n-\n-  if (markdownBlockMatch?.[1]) {\n-    return markdownBlockMatch[1];\n-  }\n-\n-  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n-  if (articleMatch?.[1]) {\n-    return articleMatch[1];\n-  }\n-\n-  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n-  return mainMatch?.[1] ?? html;\n-}\n-\n-function htmlToMarkdown(html: string): string {\n-  let content = extractMainHtml(html);\n-\n-  content = content\n-    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n-    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n-    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n-    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n-\n-  content = content.replace(\n-    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n-    (_match, code) => {\n-      const normalizedCode = decodeEntities(\n-        stripTags(code)\n-          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n-          .replace(/\\n{3,}/g, \"\\n\\n\")\n-          .trim(),\n-      );\n-\n-      if (!normalizedCode) {\n-        return \"\";\n-      }\n-\n-      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n-    },\n-  );\n-\n-  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n-    const normalizedCode = decodeEntities(stripTags(code)).trim();\n-    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n-  });\n-\n-  content = content.replace(/<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi, (_m, href, label) => {\n-    const text = plainTextFromHtml(label);\n-    if (!text) {\n-      return \"\";\n-    }\n-\n-    return `[${text}](${decodeEntities(href)})`;\n-  });\n-\n-  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n-    const heading = plainTextFromHtml(inner);\n-    if (!heading) {\n-      return \"\";\n-    }\n-\n-    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n-  });\n-\n-  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n-    const line = plainTextFromHtml(inner);\n-    return line ? `- ${line}\\n` : \"\";\n-  });\n-\n-  content = content\n-    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n-    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n-    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n-    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n-      const cell = plainTextFromHtml(inner);\n-      return cell ? `${cell} ` : \"\";\n-    });\n-\n-  content = decodeEntities(content)\n-    .replace(/<[^>]+>/g, \"\")\n-    .replace(/[ \\t]+\\n/g, \"\\n\")\n-    .replace(/\\n{3,}/g, \"\\n\\n\")\n-    .trim();\n-\n-  return content;\n-}\n-\n-function extractDocsUrls(sitemapXml: string): string[] {\n-  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n-    decodeEntities(match[1]?.trim() ?? \"\"),\n-  )\n-    .filter((url) => url.startsWith(DOCS_ROOT))\n-    .filter((url) => !url.includes(\"/docs/tags\"))\n-    .filter((url) => !url.includes(\"#\"));\n-\n-  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n-}\n-\n-async function fetchText(url: string): Promise<string> {\n-  const response = await fetch(url, {\n-    headers: {\n-      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n-    },\n-  });\n-\n-  if (!response.ok) {\n-    throw new Error(`Request failed (${response.status}) for ${url}`);\n-  }\n-\n-  return await response.text();\n-}\n-\n-async function mapConcurrent<T, R>(\n-  values: T[],\n-  limit: number,\n-  map: (value: T, index: number) => Promise<R>,\n-): Promise<R[]> {\n-  const results = new Array<R>(values.length);\n-  let index = 0;\n-\n-  async function worker(): Promise<void> {\n-    while (true) {\n-      const currentIndex = index;\n-      index += 1;\n-\n-      if (currentIndex >= values.length) {\n-        return;\n-      }\n-\n-      results[currentIndex] = await map(values[currentIndex], currentIndex);\n-    }\n-  }\n-\n-  const workerCount = Math.min(limit, values.length);\n-  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n-  return results;\n-}\n-\n-async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n-  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n-\n-  try {\n-    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n-    try {\n-      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n-\n-      if (markdown) {\n-        return {\n-          url,\n-          ok: true,\n-          markdown,\n-        };\n-      }\n-    } catch {\n-      // Fall through to direct HTML scrape.\n-    }\n-\n-    const html = await fetchText(url);\n-    const markdown = htmlToMarkdown(html);\n-\n-    if (!markdown) {\n-      return {\n-        url,\n-        ok: false,\n-        error: \"No markdown content returned from HTML fallback\",\n-      };\n-    }\n-\n-    return {\n-      url,\n-      ok: true,\n-      markdown,\n-    };\n-  } catch (error) {\n-    return {\n-      url,\n-      ok: false,\n-      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n-    };\n-  }\n-}\n-\n-function buildHeader(urlCount: number, capturedAt: string): string {\n-  return [\n-    \"----\",\n-    \"## External Docs Snapshot // moonrepo\",\n-    \"\",\n-    `- Captured: ${capturedAt}`,\n-    `- Source root: ${DOCS_ROOT}`,\n-    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)`,\n-    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n-    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n-    \"----\",\n-    \"\",\n-  ].join(\"\\n\");\n-}\n-\n-function buildFooter(successCount: number, failureCount: number): string {\n-  return [\n-    \"\",\n-    \"----\",\n-    \"## Notes / Comments / Lessons\",\n-    \"\",\n-    \"- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\",\n-    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n-    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n-    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n-    \"----\",\n-    \"\",\n-  ].join(\"\\n\");\n-}\n-\n-function buildPageSection(result: ScrapeResult): string {\n-  if (!result.ok) {\n-    return [\n-      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n-      \"\",\n-      `Source: ${result.url}`,\n-      \"\",\n-      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n-      \"\",\n-    ].join(\"\\n\");\n-  }\n-\n-  return [\n-    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n-    \"\",\n-    `Source: ${result.url}`,\n-    \"\",\n-    result.markdown?.trim() ?? \"\",\n-    \"\",\n-  ].join(\"\\n\");\n-}\n-\n-const repoRoot = findRepoRoot(import.meta.dir);\n-const outputArg = Bun.argv[2];\n-const outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n-\n-const sitemapXml = await fetchText(SITEMAP_URL);\n-const docsUrls = extractDocsUrls(sitemapXml);\n-\n-if (docsUrls.length === 0) {\n-  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n-}\n-\n-const results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n-  scrapeDocsPage(url, index + 1, docsUrls.length),\n-);\n-\n-const successCount = results.filter((result) => result.ok).length;\n-const failureCount = results.length - successCount;\n-const capturedAt = new Date().toISOString();\n-\n-const content = [\n-  buildHeader(docsUrls.length, capturedAt),\n-  ...results.map(buildPageSection),\n-  buildFooter(successCount, failureCount),\n-].join(\"\\n\");\n-\n-mkdirSync(dirname(outputPath), { recursive: true });\n-await Bun.write(outputPath, content);\n-\n-console.log(\n-  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n-);\n",
                  "before": "#!/usr/bin/env bun\n\nimport { mkdirSync } from \"node:fs\";\nimport { dirname, resolve } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n\ntype ScrapeResult = {\n  url: string;\n  ok: boolean;\n  markdown?: string;\n  error?: string;\n};\n\nconst SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\nconst DOCS_ROOT = \"https://moonrepo.dev/docs\";\nconst DEFAULT_OUTPUT_RELATIVE =\n  \"docs/external/moonrepo/moonrepo_docs.ext.md\";\nconst CONCURRENCY = 4;\n\nfunction decodeEntities(value: string): string {\n  return value\n    .replaceAll(\"&amp;\", \"&\")\n    .replaceAll(\"&quot;\", '\"')\n    .replaceAll(\"&apos;\", \"'\")\n    .replaceAll(\"&#x27;\", \"'\")\n    .replaceAll(\"&#39;\", \"'\")\n    .replaceAll(\"&nbsp;\", \" \")\n    .replaceAll(\"&lt;\", \"<\")\n    .replaceAll(\"&gt;\", \">\");\n}\n\nfunction stripJinaEnvelope(markdown: string): string {\n  return markdown\n    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n    .trim();\n}\n\nfunction stripTags(value: string): string {\n  return value.replace(/<[^>]+>/g, \"\");\n}\n\nfunction plainTextFromHtml(value: string): string {\n  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n}\n\nfunction extractMainHtml(html: string): string {\n  const markdownBlockMatch = html.match(\n    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n  );\n\n  if (markdownBlockMatch?.[1]) {\n    return markdownBlockMatch[1];\n  }\n\n  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n  if (articleMatch?.[1]) {\n    return articleMatch[1];\n  }\n\n  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n  return mainMatch?.[1] ?? html;\n}\n\nfunction htmlToMarkdown(html: string): string {\n  let content = extractMainHtml(html);\n\n  content = content\n    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n\n  content = content.replace(\n    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n    (_match, code) => {\n      const normalizedCode = decodeEntities(\n        stripTags(code)\n          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n          .replace(/\\n{3,}/g, \"\\n\\n\")\n          .trim(),\n      );\n\n      if (!normalizedCode) {\n        return \"\";\n      }\n\n      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n    },\n  );\n\n  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n    const normalizedCode = decodeEntities(stripTags(code)).trim();\n    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n  });\n\n  content = content.replace(/<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi, (_m, href, label) => {\n    const text = plainTextFromHtml(label);\n    if (!text) {\n      return \"\";\n    }\n\n    return `[${text}](${decodeEntities(href)})`;\n  });\n\n  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n    const heading = plainTextFromHtml(inner);\n    if (!heading) {\n      return \"\";\n    }\n\n    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n  });\n\n  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n    const line = plainTextFromHtml(inner);\n    return line ? `- ${line}\\n` : \"\";\n  });\n\n  content = content\n    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n      const cell = plainTextFromHtml(inner);\n      return cell ? `${cell} ` : \"\";\n    });\n\n  content = decodeEntities(content)\n    .replace(/<[^>]+>/g, \"\")\n    .replace(/[ \\t]+\\n/g, \"\\n\")\n    .replace(/\\n{3,}/g, \"\\n\\n\")\n    .trim();\n\n  return content;\n}\n\nfunction extractDocsUrls(sitemapXml: string): string[] {\n  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n    decodeEntities(match[1]?.trim() ?? \"\"),\n  )\n    .filter((url) => url.startsWith(DOCS_ROOT))\n    .filter((url) => !url.includes(\"/docs/tags\"))\n    .filter((url) => !url.includes(\"#\"));\n\n  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n}\n\nasync function fetchText(url: string): Promise<string> {\n  const response = await fetch(url, {\n    headers: {\n      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Request failed (${response.status}) for ${url}`);\n  }\n\n  return await response.text();\n}\n\nasync function mapConcurrent<T, R>(\n  values: T[],\n  limit: number,\n  map: (value: T, index: number) => Promise<R>,\n): Promise<R[]> {\n  const results = new Array<R>(values.length);\n  let index = 0;\n\n  async function worker(): Promise<void> {\n    while (true) {\n      const currentIndex = index;\n      index += 1;\n\n      if (currentIndex >= values.length) {\n        return;\n      }\n\n      results[currentIndex] = await map(values[currentIndex], currentIndex);\n    }\n  }\n\n  const workerCount = Math.min(limit, values.length);\n  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n  return results;\n}\n\nasync function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n\n  try {\n    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n    try {\n      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n\n      if (markdown) {\n        return {\n          url,\n          ok: true,\n          markdown,\n        };\n      }\n    } catch {\n      // Fall through to direct HTML scrape.\n    }\n\n    const html = await fetchText(url);\n    const markdown = htmlToMarkdown(html);\n\n    if (!markdown) {\n      return {\n        url,\n        ok: false,\n        error: \"No markdown content returned from HTML fallback\",\n      };\n    }\n\n    return {\n      url,\n      ok: true,\n      markdown,\n    };\n  } catch (error) {\n    return {\n      url,\n      ok: false,\n      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n    };\n  }\n}\n\nfunction buildHeader(urlCount: number, capturedAt: string): string {\n  return [\n    \"----\",\n    \"## External Docs Snapshot // moonrepo\",\n    \"\",\n    `- Captured: ${capturedAt}`,\n    `- Source root: ${DOCS_ROOT}`,\n    `- Scope: ${urlCount} pages under /docs (excluding /docs/tags)`,\n    \"- Keywords: moon, monorepo, task graph, hashing, cache, toolchain, proto, workspace, codegen, query, migration, CI\",\n    \"- Summary: moonrepo documentation centers on deterministic task orchestration, project/dependency graphs, and reproducible toolchains with proto-backed version pinning.\",\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildFooter(successCount: number, failureCount: number): string {\n  return [\n    \"\",\n    \"----\",\n    \"## Notes / Comments / Lessons\",\n    \"\",\n    \"- Collection method: sitemap URL discovery + markdown conversion (r.jina.ai primary, direct HTML fallback parser secondary).\",\n    \"- Most docs pages are content-rich and command-oriented; command reference and config schemas are the highest-density sections.\",\n    \"- For ongoing updates, re-run this script to refresh snapshots and compare diffs over time.\",\n    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildPageSection(result: ScrapeResult): string {\n  if (!result.ok) {\n    return [\n      `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n      \"\",\n      `Source: ${result.url}`,\n      \"\",\n      `> Scrape failed: ${result.error ?? \"unknown error\"}`,\n      \"\",\n    ].join(\"\\n\");\n  }\n\n  return [\n    `## ${result.url.replace(\"https://moonrepo.dev\", \"\")}`,\n    \"\",\n    `Source: ${result.url}`,\n    \"\",\n    result.markdown?.trim() ?? \"\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nconst repoRoot = findRepoRoot(import.meta.dir);\nconst outputArg = Bun.argv[2];\nconst outputPath = resolve(repoRoot, outputArg ?? DEFAULT_OUTPUT_RELATIVE);\n\nconst sitemapXml = await fetchText(SITEMAP_URL);\nconst docsUrls = extractDocsUrls(sitemapXml);\n\nif (docsUrls.length === 0) {\n  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n}\n\nconst results = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n  scrapeDocsPage(url, index + 1, docsUrls.length),\n);\n\nconst successCount = results.filter((result) => result.ok).length;\nconst failureCount = results.length - successCount;\nconst capturedAt = new Date().toISOString();\n\nconst content = [\n  buildHeader(docsUrls.length, capturedAt),\n  ...results.map(buildPageSection),\n  buildFooter(successCount, failureCount),\n].join(\"\\n\");\n\nmkdirSync(dirname(outputPath), { recursive: true });\nawait Bun.write(outputPath, content);\n\nconsole.log(\n  `Docs // Scrape // Wrote external docs snapshot (pages=${docsUrls.length},ok=${successCount},failed=${failureCount},path=${outputPath})`,\n);\n",
                  "after": "",
                  "additions": 0,
                  "deletions": 315
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771213563087,
              "end": 1771213563098
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0b0497800a83149001699292face2c81968bb4757c6c46a9e4"
            }
          },
          "id": "prt_c648e24330012jstGk6ziIwEXC",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648d768700180We10oeCilNc3"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "7c546ac04417b7ff35b3d29909841f670e9a513d",
          "cost": 0,
          "tokens": {
            "total": 78456,
            "input": 168,
            "output": 2512,
            "reasoning": 2460,
            "cache": {
              "read": 75776,
              "write": 0
            }
          },
          "id": "prt_c648e2503001q1D3cu8I94Ncmg",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648d768700180We10oeCilNc3"
        },
        {
          "type": "patch",
          "hash": "689b71acce0a09b1c69553864f5e86d1fe8cb76f",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/skills/protobuf-schema-authoring/SKILL.md",
            "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts"
          ],
          "id": "prt_c648e252c001I5AFt0hIS0AOlT",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648d768700180We10oeCilNc3"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213563222,
          "completed": 1771213633855
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 83346,
          "input": 148,
          "output": 4862,
          "reasoning": 10,
          "cache": {
            "read": 78336,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648e2556001mYayr68hHg6BT6",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "7c546ac04417b7ff35b3d29909841f670e9a513d",
          "id": "prt_c648e2d20001g7Sq90fHN4btrc",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648e2556001mYayr68hHg6BT6"
        },
        {
          "type": "reasoning",
          "text": "",
          "metadata": {
            "openai": {
              "itemId": "rs_030b453f9a99276d01699292fd7fa08196b3b4f14250ecc859",
              "reasoningEncryptedContent": "gAAAAABpkpL9dZMXymEUve5Msb1hBImJSsAw5onckDFQicxaKC9WtXQOJeRk30x90mI3YUsjGNPfby0Ll2ggLeHu_6CNw1Nx36i2wYvG87WaXcGcd23pkpAvRT0h7noo3wOQMpTqFdYRaP3L2JkYVInqySkgDNLc8YMquE6_IXRAtMo_PswoijbciOJNN922SOTLrnIKD747YE_IMTrHDbsHTL-S3ItFaGegDY6cQ5GLEDE1-4saIhADj9YdjtSjAkN4FkDVqEyJK68uICW1cGuXZ3pyeh2xlZT_0E1nhmke2nCNbA4BbaIkFfLcVhDAGA_WN9bxjbRz2dXFs7U5XrW7ZZHvV4roA1FJ4CoHLpm35EXV3msH-5HeR4S9DtfYO__BW3HK-hJZWn8b-kx0frsIBYmtlQsHsLRAlxfJ2Jnpm7fn-SozkZtH7vDGWBoxAgvxjyz6-Wq7TPtgXn7ICL-hekpG4z44lpmU3hqW3mbXWcKuJUeBn2_s4FcsTBP3HV6kuayxj9ns5LpEOdAJo-n4HCY6Bq6yBPMV8BUquzfmzleadeR5VfNR60ovd9v-Yfhfy6O5a4ZVxWIdjfJ_O9V2Ld1jOq8TYLrwXBngDRpsZlkwX24Sj2vp6fcOvuPibDM-GktPeaFUH-cc01Q1AqKDtPmNHTVtPsiKnFaUTWHYMAaI3pXFntMdfSQb7fVa_CROSKr_KflyoLMEuy5Xd2K_UTCyw6qkP3vxy4i5pgSeBLBRm-pE1OdTwHEVIyDsll1XJx87qB25T0caazQTVxmGVpU6NR9zzz3zRqY2Wg_9cA7GlK62P3EgUZV2EMUS-ghqWc4jSjxnsBhjtUgZHgRT76GB2oe61whCpuNd864exQlNrhaeCXc="
            }
          },
          "time": {
            "start": 1771213565552,
            "end": 1771213566076
          },
          "id": "prt_c648e2e70001gOQmvn4ZYzm4Xh",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648e2556001mYayr68hHg6BT6"
        },
        {
          "type": "tool",
          "callID": "call_Fn7Za9rPPnbblq088UUuOg38",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Add File: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n+#!/usr/bin/env bun\n+\n+import { existsSync, mkdirSync, readdirSync, rmSync } from \"node:fs\";\n+import { dirname, resolve } from \"node:path\";\n+import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n+\n+type ScrapeMode = \"jina\" | \"html\";\n+\n+type ScrapeResult = {\n+  url: string;\n+  ok: boolean;\n+  markdown?: string;\n+  error?: string;\n+  mode?: ScrapeMode;\n+};\n+\n+type PageArtifact = ScrapeResult & {\n+  fileName: string;\n+  sourcePath: string;\n+};\n+\n+const SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\n+const DOCS_ROOT = \"https://moonrepo.dev/docs\";\n+const DEFAULT_OUTPUT_DIR_RELATIVE = \"docs/external/moonrepo\";\n+const CONCURRENCY = 4;\n+const SUMMARY_MAX_CHARS = 240;\n+\n+function decodeEntities(value: string): string {\n+  return value\n+    .replaceAll(\"&amp;\", \"&\")\n+    .replaceAll(\"&quot;\", '\"')\n+    .replaceAll(\"&apos;\", \"'\")\n+    .replaceAll(\"&#x27;\", \"'\")\n+    .replaceAll(\"&#39;\", \"'\")\n+    .replaceAll(\"&nbsp;\", \" \")\n+    .replaceAll(\"&lt;\", \"<\")\n+    .replaceAll(\"&gt;\", \">\");\n+}\n+\n+function stripJinaEnvelope(markdown: string): string {\n+  return markdown\n+    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n+    .trim();\n+}\n+\n+function stripTags(value: string): string {\n+  return value.replace(/<[^>]+>/g, \"\");\n+}\n+\n+function plainTextFromHtml(value: string): string {\n+  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n+}\n+\n+function extractMainHtml(html: string): string {\n+  const markdownBlockMatch = html.match(\n+    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n+  );\n+\n+  if (markdownBlockMatch?.[1]) {\n+    return markdownBlockMatch[1];\n+  }\n+\n+  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n+  if (articleMatch?.[1]) {\n+    return articleMatch[1];\n+  }\n+\n+  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n+  return mainMatch?.[1] ?? html;\n+}\n+\n+function htmlToMarkdown(html: string): string {\n+  let content = extractMainHtml(html);\n+\n+  content = content\n+    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n+    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n+    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n+    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n+\n+  content = content.replace(\n+    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n+    (_match, code) => {\n+      const normalizedCode = decodeEntities(\n+        stripTags(code)\n+          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+          .replace(/\\n{3,}/g, \"\\n\\n\")\n+          .trim(),\n+      );\n+\n+      if (!normalizedCode) {\n+        return \"\";\n+      }\n+\n+      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n+    },\n+  );\n+\n+  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n+    const normalizedCode = decodeEntities(stripTags(code)).trim();\n+    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n+  });\n+\n+  content = content.replace(\n+    /<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi,\n+    (_match, href, label) => {\n+      const text = plainTextFromHtml(label);\n+      if (!text) {\n+        return \"\";\n+      }\n+\n+      return `[${text}](${decodeEntities(href)})`;\n+    },\n+  );\n+\n+  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n+    const heading = plainTextFromHtml(inner);\n+    if (!heading) {\n+      return \"\";\n+    }\n+\n+    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n+  });\n+\n+  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n+    const line = plainTextFromHtml(inner);\n+    return line ? `- ${line}\\n` : \"\";\n+  });\n+\n+  content = content\n+    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n+    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n+    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n+      const cell = plainTextFromHtml(inner);\n+      return cell ? `${cell} ` : \"\";\n+    });\n+\n+  content = decodeEntities(content)\n+    .replace(/<[^>]+>/g, \"\")\n+    .replace(/[ \\t]+\\n/g, \"\\n\")\n+    .replace(/\\n{3,}/g, \"\\n\\n\")\n+    .trim();\n+\n+  return content;\n+}\n+\n+function extractDocsUrls(sitemapXml: string): string[] {\n+  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n+    decodeEntities(match[1]?.trim() ?? \"\"),\n+  )\n+    .filter((url) => url.startsWith(DOCS_ROOT))\n+    .filter((url) => !url.includes(\"/docs/tags\"))\n+    .filter((url) => !url.includes(\"#\"));\n+\n+  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n+}\n+\n+function sanitizeSegment(value: string): string {\n+  const clean = decodeURIComponent(value)\n+    .toLowerCase()\n+    .replace(/[^a-z0-9]+/g, \"-\")\n+    .replace(/^-+|-+$/g, \"\");\n+\n+  return clean || \"page\";\n+}\n+\n+function sourcePathFromUrl(url: string): string {\n+  const pathname = new URL(url).pathname.replace(/\\/+$/, \"\") || \"/docs\";\n+  return pathname;\n+}\n+\n+function fileStemFromUrl(url: string): string {\n+  const sourcePath = sourcePathFromUrl(url);\n+\n+  if (sourcePath === \"/docs\") {\n+    return \"docs\";\n+  }\n+\n+  const relative = sourcePath.replace(/^\\/docs\\/?/, \"\");\n+  const segments = relative\n+    .split(\"/\")\n+    .filter(Boolean)\n+    .map(sanitizeSegment);\n+\n+  if (segments.length === 0) {\n+    return \"docs\";\n+  }\n+\n+  return [\"docs\", ...segments].join(\"__\");\n+}\n+\n+function extractSummary(markdown: string): string {\n+  const lines = markdown.split(\"\\n\");\n+  let inCodeBlock = false;\n+\n+  for (const rawLine of lines) {\n+    const line = rawLine.trim();\n+\n+    if (line.startsWith(\"```\") || line.startsWith(\"~~~\")) {\n+      inCodeBlock = !inCodeBlock;\n+      continue;\n+    }\n+\n+    if (inCodeBlock) {\n+      continue;\n+    }\n+\n+    if (!line || line.startsWith(\"#\") || line.startsWith(\"- [\") || line.startsWith(\"```\")) {\n+      continue;\n+    }\n+\n+    if (line.length <= 25) {\n+      continue;\n+    }\n+\n+    if (line.length > SUMMARY_MAX_CHARS) {\n+      return `${line.slice(0, SUMMARY_MAX_CHARS - 3)}...`;\n+    }\n+\n+    return line;\n+  }\n+\n+  return \"moonrepo documentation page snapshot.\";\n+}\n+\n+function keywordsForPath(sourcePath: string): string {\n+  const dynamic = sourcePath\n+    .split(\"/\")\n+    .filter(Boolean)\n+    .slice(1)\n+    .map((part) => part.replace(/[^a-zA-Z0-9]+/g, \" \"))\n+    .filter(Boolean)\n+    .join(\", \");\n+\n+  const base = \"moon, moonrepo, docs, monorepo, build\";\n+  return dynamic ? `${base}, ${dynamic}` : base;\n+}\n+\n+function buildPageMarkdown(result: PageArtifact, capturedAt: string): string {\n+  const pageSummary = result.ok\n+    ? extractSummary(result.markdown ?? \"\")\n+    : `Scrape failed: ${result.error ?? \"unknown error\"}`;\n+\n+  const pageBody = result.ok\n+    ? result.markdown?.trim() ?? \"\"\n+    : `> Scrape failed: ${result.error ?? \"unknown error\"}`;\n+\n+  return [\n+    \"----\",\n+    \"## External Docs Snapshot // moonrepo\",\n+    \"\",\n+    `- Captured: ${capturedAt}`,\n+    `- Source root: ${DOCS_ROOT}`,\n+    `- Source page: ${result.sourcePath}`,\n+    `- Keywords: ${keywordsForPath(result.sourcePath)}`,\n+    `- Summary: ${pageSummary}`,\n+    \"----\",\n+    \"\",\n+    `Source: ${result.url}`,\n+    \"\",\n+    pageBody,\n+    \"\",\n+    \"----\",\n+    \"## Notes / Comments / Lessons\",\n+    \"\",\n+    \"- Collection method: sitemap discovery + markdown conversion.\",\n+    `- Conversion path: ${result.mode === \"html\" ? \"direct HTML fallback parser\" : \"r.jina.ai markdown proxy\"}.`,\n+    \"- This file is one page-level external snapshot in markdown `.ext.md` format.\",\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+function buildIndexMarkdown(\n+  artifacts: PageArtifact[],\n+  capturedAt: string,\n+  outputDirRelative: string,\n+): string {\n+  const successCount = artifacts.filter((artifact) => artifact.ok).length;\n+  const failureCount = artifacts.length - successCount;\n+\n+  const pageList = artifacts\n+    .map((artifact) => {\n+      const status = artifact.ok ? \"ok\" : \"failed\";\n+      const mode = artifact.mode ?? \"unknown\";\n+      return `- [${artifact.fileName}](./${artifact.fileName}) - ${artifact.sourcePath} (${status},mode=${mode})`;\n+    })\n+    .join(\"\\n\");\n+\n+  return [\n+    \"----\",\n+    \"## External Docs Index // moonrepo\",\n+    \"\",\n+    `- Captured: ${capturedAt}`,\n+    `- Source root: ${DOCS_ROOT}`,\n+    `- Output directory: ${outputDirRelative}`,\n+    `- Scope: ${artifacts.length} pages under /docs (excluding /docs/tags)`,\n+    \"- Keywords: moon, moonrepo, docs index, monorepo, build system, toolchain, proto\",\n+    \"- Summary: This index links one `.ext.md` file per docs page snapshot for moonrepo.\",\n+    \"----\",\n+    \"\",\n+    \"## Pages\",\n+    \"\",\n+    pageList,\n+    \"\",\n+    \"----\",\n+    \"## Notes / Comments / Lessons\",\n+    \"\",\n+    \"- Per-page files are flattened in this directory and prefixed with `docs` in the filename stem.\",\n+    \"- Regenerate by re-running the scraper script; old `.ext.md` files in this directory are replaced.\",\n+    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+async function fetchText(url: string): Promise<string> {\n+  const response = await fetch(url, {\n+    headers: {\n+      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n+    },\n+  });\n+\n+  if (!response.ok) {\n+    throw new Error(`Request failed (${response.status}) for ${url}`);\n+  }\n+\n+  return await response.text();\n+}\n+\n+async function mapConcurrent<T, R>(\n+  values: T[],\n+  limit: number,\n+  map: (value: T, index: number) => Promise<R>,\n+): Promise<R[]> {\n+  const results = new Array<R>(values.length);\n+  let index = 0;\n+\n+  async function worker(): Promise<void> {\n+    while (true) {\n+      const currentIndex = index;\n+      index += 1;\n+\n+      if (currentIndex >= values.length) {\n+        return;\n+      }\n+\n+      results[currentIndex] = await map(values[currentIndex], currentIndex);\n+    }\n+  }\n+\n+  const workerCount = Math.min(limit, values.length);\n+  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n+  return results;\n+}\n+\n+async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n+  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n+\n+  try {\n+    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n+\n+    try {\n+      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n+      if (markdown) {\n+        return {\n+          url,\n+          ok: true,\n+          markdown,\n+          mode: \"jina\",\n+        };\n+      }\n+    } catch {\n+      // Fall through to direct HTML scrape.\n+    }\n+\n+    const html = await fetchText(url);\n+    const markdown = htmlToMarkdown(html);\n+\n+    if (!markdown) {\n+      return {\n+        url,\n+        ok: false,\n+        error: \"No markdown content returned from HTML fallback\",\n+      };\n+    }\n+\n+    return {\n+      url,\n+      ok: true,\n+      markdown,\n+      mode: \"html\",\n+    };\n+  } catch (error) {\n+    return {\n+      url,\n+      ok: false,\n+      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n+    };\n+  }\n+}\n+\n+function resolveOutputDirectory(repoRoot: string, outputArg?: string): string {\n+  if (!outputArg) {\n+    return resolve(repoRoot, DEFAULT_OUTPUT_DIR_RELATIVE);\n+  }\n+\n+  const resolved = resolve(repoRoot, outputArg);\n+  if (resolved.endsWith(\".md\")) {\n+    return dirname(resolved);\n+  }\n+\n+  return resolved;\n+}\n+\n+function clearExistingExtFiles(outputDir: string): void {\n+  if (!existsSync(outputDir)) {\n+    return;\n+  }\n+\n+  for (const entry of readdirSync(outputDir, { withFileTypes: true })) {\n+    if (!entry.isFile()) {\n+      continue;\n+    }\n+\n+    if (!entry.name.endsWith(\".ext.md\")) {\n+      continue;\n+    }\n+\n+    rmSync(resolve(outputDir, entry.name));\n+  }\n+}\n+\n+const repoRoot = findRepoRoot(import.meta.dir);\n+const outputArg = Bun.argv[2];\n+const outputDir = resolveOutputDirectory(repoRoot, outputArg);\n+const outputDirRelative = outputDir.startsWith(repoRoot)\n+  ? outputDir.slice(repoRoot.length + 1)\n+  : outputDir;\n+\n+mkdirSync(outputDir, { recursive: true });\n+clearExistingExtFiles(outputDir);\n+\n+const sitemapXml = await fetchText(SITEMAP_URL);\n+const docsUrls = extractDocsUrls(sitemapXml);\n+\n+if (docsUrls.length === 0) {\n+  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n+}\n+\n+const scrapeResults = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n+  scrapeDocsPage(url, index + 1, docsUrls.length),\n+);\n+\n+const usedNames = new Map<string, number>();\n+const artifacts: PageArtifact[] = scrapeResults.map((result) => {\n+  const stem = fileStemFromUrl(result.url);\n+  const seen = usedNames.get(stem) ?? 0;\n+  usedNames.set(stem, seen + 1);\n+\n+  const suffix = seen === 0 ? \"\" : `__${seen + 1}`;\n+  const fileName = `${stem}${suffix}.ext.md`;\n+\n+  return {\n+    ...result,\n+    fileName,\n+    sourcePath: sourcePathFromUrl(result.url),\n+  };\n+});\n+\n+const capturedAt = new Date().toISOString();\n+\n+for (const artifact of artifacts) {\n+  const pagePath = resolve(outputDir, artifact.fileName);\n+  const pageContent = buildPageMarkdown(artifact, capturedAt);\n+  await Bun.write(pagePath, pageContent);\n+}\n+\n+const indexContent = buildIndexMarkdown(artifacts, capturedAt, outputDirRelative);\n+await Bun.write(resolve(outputDir, \"index.ext.md\"), indexContent);\n+\n+const successCount = artifacts.filter((artifact) => artifact.ok).length;\n+const failureCount = artifacts.length - successCount;\n+\n+console.log(\n+  `Docs // Scrape // Wrote split external docs (pages=${artifacts.length},ok=${successCount},failed=${failureCount},dir=${outputDir})`,\n+);\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nA scripts/scrape_moon_docs.sh.ts",
            "title": "Success. Updated the following files:\nA scripts/scrape_moon_docs.sh.ts",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n@@ -0,0 +1,488 @@\n+#!/usr/bin/env bun\n+\n+import { existsSync, mkdirSync, readdirSync, rmSync } from \"node:fs\";\n+import { dirname, resolve } from \"node:path\";\n+import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n+\n+type ScrapeMode = \"jina\" | \"html\";\n+\n+type ScrapeResult = {\n+  url: string;\n+  ok: boolean;\n+  markdown?: string;\n+  error?: string;\n+  mode?: ScrapeMode;\n+};\n+\n+type PageArtifact = ScrapeResult & {\n+  fileName: string;\n+  sourcePath: string;\n+};\n+\n+const SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\n+const DOCS_ROOT = \"https://moonrepo.dev/docs\";\n+const DEFAULT_OUTPUT_DIR_RELATIVE = \"docs/external/moonrepo\";\n+const CONCURRENCY = 4;\n+const SUMMARY_MAX_CHARS = 240;\n+\n+function decodeEntities(value: string): string {\n+  return value\n+    .replaceAll(\"&amp;\", \"&\")\n+    .replaceAll(\"&quot;\", '\"')\n+    .replaceAll(\"&apos;\", \"'\")\n+    .replaceAll(\"&#x27;\", \"'\")\n+    .replaceAll(\"&#39;\", \"'\")\n+    .replaceAll(\"&nbsp;\", \" \")\n+    .replaceAll(\"&lt;\", \"<\")\n+    .replaceAll(\"&gt;\", \">\");\n+}\n+\n+function stripJinaEnvelope(markdown: string): string {\n+  return markdown\n+    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n+    .trim();\n+}\n+\n+function stripTags(value: string): string {\n+  return value.replace(/<[^>]+>/g, \"\");\n+}\n+\n+function plainTextFromHtml(value: string): string {\n+  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n+}\n+\n+function extractMainHtml(html: string): string {\n+  const markdownBlockMatch = html.match(\n+    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n+  );\n+\n+  if (markdownBlockMatch?.[1]) {\n+    return markdownBlockMatch[1];\n+  }\n+\n+  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n+  if (articleMatch?.[1]) {\n+    return articleMatch[1];\n+  }\n+\n+  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n+  return mainMatch?.[1] ?? html;\n+}\n+\n+function htmlToMarkdown(html: string): string {\n+  let content = extractMainHtml(html);\n+\n+  content = content\n+    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n+    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n+    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n+    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n+\n+  content = content.replace(\n+    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n+    (_match, code) => {\n+      const normalizedCode = decodeEntities(\n+        stripTags(code)\n+          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+          .replace(/\\n{3,}/g, \"\\n\\n\")\n+          .trim(),\n+      );\n+\n+      if (!normalizedCode) {\n+        return \"\";\n+      }\n+\n+      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n+    },\n+  );\n+\n+  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n+    const normalizedCode = decodeEntities(stripTags(code)).trim();\n+    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n+  });\n+\n+  content = content.replace(\n+    /<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi,\n+    (_match, href, label) => {\n+      const text = plainTextFromHtml(label);\n+      if (!text) {\n+        return \"\";\n+      }\n+\n+      return `[${text}](${decodeEntities(href)})`;\n+    },\n+  );\n+\n+  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n+    const heading = plainTextFromHtml(inner);\n+    if (!heading) {\n+      return \"\";\n+    }\n+\n+    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n+  });\n+\n+  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n+    const line = plainTextFromHtml(inner);\n+    return line ? `- ${line}\\n` : \"\";\n+  });\n+\n+  content = content\n+    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n+    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n+    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n+      const cell = plainTextFromHtml(inner);\n+      return cell ? `${cell} ` : \"\";\n+    });\n+\n+  content = decodeEntities(content)\n+    .replace(/<[^>]+>/g, \"\")\n+    .replace(/[ \\t]+\\n/g, \"\\n\")\n+    .replace(/\\n{3,}/g, \"\\n\\n\")\n+    .trim();\n+\n+  return content;\n+}\n+\n+function extractDocsUrls(sitemapXml: string): string[] {\n+  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n+    decodeEntities(match[1]?.trim() ?? \"\"),\n+  )\n+    .filter((url) => url.startsWith(DOCS_ROOT))\n+    .filter((url) => !url.includes(\"/docs/tags\"))\n+    .filter((url) => !url.includes(\"#\"));\n+\n+  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n+}\n+\n+function sanitizeSegment(value: string): string {\n+  const clean = decodeURIComponent(value)\n+    .toLowerCase()\n+    .replace(/[^a-z0-9]+/g, \"-\")\n+    .replace(/^-+|-+$/g, \"\");\n+\n+  return clean || \"page\";\n+}\n+\n+function sourcePathFromUrl(url: string): string {\n+  const pathname = new URL(url).pathname.replace(/\\/+$/, \"\") || \"/docs\";\n+  return pathname;\n+}\n+\n+function fileStemFromUrl(url: string): string {\n+  const sourcePath = sourcePathFromUrl(url);\n+\n+  if (sourcePath === \"/docs\") {\n+    return \"docs\";\n+  }\n+\n+  const relative = sourcePath.replace(/^\\/docs\\/?/, \"\");\n+  const segments = relative\n+    .split(\"/\")\n+    .filter(Boolean)\n+    .map(sanitizeSegment);\n+\n+  if (segments.length === 0) {\n+    return \"docs\";\n+  }\n+\n+  return [\"docs\", ...segments].join(\"__\");\n+}\n+\n+function extractSummary(markdown: string): string {\n+  const lines = markdown.split(\"\\n\");\n+  let inCodeBlock = false;\n+\n+  for (const rawLine of lines) {\n+    const line = rawLine.trim();\n+\n+    if (line.startsWith(\"```\") || line.startsWith(\"~~~\")) {\n+      inCodeBlock = !inCodeBlock;\n+      continue;\n+    }\n+\n+    if (inCodeBlock) {\n+      continue;\n+    }\n+\n+    if (!line || line.startsWith(\"#\") || line.startsWith(\"- [\") || line.startsWith(\"```\")) {\n+      continue;\n+    }\n+\n+    if (line.length <= 25) {\n+      continue;\n+    }\n+\n+    if (line.length > SUMMARY_MAX_CHARS) {\n+      return `${line.slice(0, SUMMARY_MAX_CHARS - 3)}...`;\n+    }\n+\n+    return line;\n+  }\n+\n+  return \"moonrepo documentation page snapshot.\";\n+}\n+\n+function keywordsForPath(sourcePath: string): string {\n+  const dynamic = sourcePath\n+    .split(\"/\")\n+    .filter(Boolean)\n+    .slice(1)\n+    .map((part) => part.replace(/[^a-zA-Z0-9]+/g, \" \"))\n+    .filter(Boolean)\n+    .join(\", \");\n+\n+  const base = \"moon, moonrepo, docs, monorepo, build\";\n+  return dynamic ? `${base}, ${dynamic}` : base;\n+}\n+\n+function buildPageMarkdown(result: PageArtifact, capturedAt: string): string {\n+  const pageSummary = result.ok\n+    ? extractSummary(result.markdown ?? \"\")\n+    : `Scrape failed: ${result.error ?? \"unknown error\"}`;\n+\n+  const pageBody = result.ok\n+    ? result.markdown?.trim() ?? \"\"\n+    : `> Scrape failed: ${result.error ?? \"unknown error\"}`;\n+\n+  return [\n+    \"----\",\n+    \"## External Docs Snapshot // moonrepo\",\n+    \"\",\n+    `- Captured: ${capturedAt}`,\n+    `- Source root: ${DOCS_ROOT}`,\n+    `- Source page: ${result.sourcePath}`,\n+    `- Keywords: ${keywordsForPath(result.sourcePath)}`,\n+    `- Summary: ${pageSummary}`,\n+    \"----\",\n+    \"\",\n+    `Source: ${result.url}`,\n+    \"\",\n+    pageBody,\n+    \"\",\n+    \"----\",\n+    \"## Notes / Comments / Lessons\",\n+    \"\",\n+    \"- Collection method: sitemap discovery + markdown conversion.\",\n+    `- Conversion path: ${result.mode === \"html\" ? \"direct HTML fallback parser\" : \"r.jina.ai markdown proxy\"}.`,\n+    \"- This file is one page-level external snapshot in markdown `.ext.md` format.\",\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+function buildIndexMarkdown(\n+  artifacts: PageArtifact[],\n+  capturedAt: string,\n+  outputDirRelative: string,\n+): string {\n+  const successCount = artifacts.filter((artifact) => artifact.ok).length;\n+  const failureCount = artifacts.length - successCount;\n+\n+  const pageList = artifacts\n+    .map((artifact) => {\n+      const status = artifact.ok ? \"ok\" : \"failed\";\n+      const mode = artifact.mode ?? \"unknown\";\n+      return `- [${artifact.fileName}](./${artifact.fileName}) - ${artifact.sourcePath} (${status},mode=${mode})`;\n+    })\n+    .join(\"\\n\");\n+\n+  return [\n+    \"----\",\n+    \"## External Docs Index // moonrepo\",\n+    \"\",\n+    `- Captured: ${capturedAt}`,\n+    `- Source root: ${DOCS_ROOT}`,\n+    `- Output directory: ${outputDirRelative}`,\n+    `- Scope: ${artifacts.length} pages under /docs (excluding /docs/tags)`,\n+    \"- Keywords: moon, moonrepo, docs index, monorepo, build system, toolchain, proto\",\n+    \"- Summary: This index links one `.ext.md` file per docs page snapshot for moonrepo.\",\n+    \"----\",\n+    \"\",\n+    \"## Pages\",\n+    \"\",\n+    pageList,\n+    \"\",\n+    \"----\",\n+    \"## Notes / Comments / Lessons\",\n+    \"\",\n+    \"- Per-page files are flattened in this directory and prefixed with `docs` in the filename stem.\",\n+    \"- Regenerate by re-running the scraper script; old `.ext.md` files in this directory are replaced.\",\n+    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+async function fetchText(url: string): Promise<string> {\n+  const response = await fetch(url, {\n+    headers: {\n+      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n+    },\n+  });\n+\n+  if (!response.ok) {\n+    throw new Error(`Request failed (${response.status}) for ${url}`);\n+  }\n+\n+  return await response.text();\n+}\n+\n+async function mapConcurrent<T, R>(\n+  values: T[],\n+  limit: number,\n+  map: (value: T, index: number) => Promise<R>,\n+): Promise<R[]> {\n+  const results = new Array<R>(values.length);\n+  let index = 0;\n+\n+  async function worker(): Promise<void> {\n+    while (true) {\n+      const currentIndex = index;\n+      index += 1;\n+\n+      if (currentIndex >= values.length) {\n+        return;\n+      }\n+\n+      results[currentIndex] = await map(values[currentIndex], currentIndex);\n+    }\n+  }\n+\n+  const workerCount = Math.min(limit, values.length);\n+  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n+  return results;\n+}\n+\n+async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n+  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n+\n+  try {\n+    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n+\n+    try {\n+      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n+      if (markdown) {\n+        return {\n+          url,\n+          ok: true,\n+          markdown,\n+          mode: \"jina\",\n+        };\n+      }\n+    } catch {\n+      // Fall through to direct HTML scrape.\n+    }\n+\n+    const html = await fetchText(url);\n+    const markdown = htmlToMarkdown(html);\n+\n+    if (!markdown) {\n+      return {\n+        url,\n+        ok: false,\n+        error: \"No markdown content returned from HTML fallback\",\n+      };\n+    }\n+\n+    return {\n+      url,\n+      ok: true,\n+      markdown,\n+      mode: \"html\",\n+    };\n+  } catch (error) {\n+    return {\n+      url,\n+      ok: false,\n+      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n+    };\n+  }\n+}\n+\n+function resolveOutputDirectory(repoRoot: string, outputArg?: string): string {\n+  if (!outputArg) {\n+    return resolve(repoRoot, DEFAULT_OUTPUT_DIR_RELATIVE);\n+  }\n+\n+  const resolved = resolve(repoRoot, outputArg);\n+  if (resolved.endsWith(\".md\")) {\n+    return dirname(resolved);\n+  }\n+\n+  return resolved;\n+}\n+\n+function clearExistingExtFiles(outputDir: string): void {\n+  if (!existsSync(outputDir)) {\n+    return;\n+  }\n+\n+  for (const entry of readdirSync(outputDir, { withFileTypes: true })) {\n+    if (!entry.isFile()) {\n+      continue;\n+    }\n+\n+    if (!entry.name.endsWith(\".ext.md\")) {\n+      continue;\n+    }\n+\n+    rmSync(resolve(outputDir, entry.name));\n+  }\n+}\n+\n+const repoRoot = findRepoRoot(import.meta.dir);\n+const outputArg = Bun.argv[2];\n+const outputDir = resolveOutputDirectory(repoRoot, outputArg);\n+const outputDirRelative = outputDir.startsWith(repoRoot)\n+  ? outputDir.slice(repoRoot.length + 1)\n+  : outputDir;\n+\n+mkdirSync(outputDir, { recursive: true });\n+clearExistingExtFiles(outputDir);\n+\n+const sitemapXml = await fetchText(SITEMAP_URL);\n+const docsUrls = extractDocsUrls(sitemapXml);\n+\n+if (docsUrls.length === 0) {\n+  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n+}\n+\n+const scrapeResults = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n+  scrapeDocsPage(url, index + 1, docsUrls.length),\n+);\n+\n+const usedNames = new Map<string, number>();\n+const artifacts: PageArtifact[] = scrapeResults.map((result) => {\n+  const stem = fileStemFromUrl(result.url);\n+  const seen = usedNames.get(stem) ?? 0;\n+  usedNames.set(stem, seen + 1);\n+\n+  const suffix = seen === 0 ? \"\" : `__${seen + 1}`;\n+  const fileName = `${stem}${suffix}.ext.md`;\n+\n+  return {\n+    ...result,\n+    fileName,\n+    sourcePath: sourcePathFromUrl(result.url),\n+  };\n+});\n+\n+const capturedAt = new Date().toISOString();\n+\n+for (const artifact of artifacts) {\n+  const pagePath = resolve(outputDir, artifact.fileName);\n+  const pageContent = buildPageMarkdown(artifact, capturedAt);\n+  await Bun.write(pagePath, pageContent);\n+}\n+\n+const indexContent = buildIndexMarkdown(artifacts, capturedAt, outputDirRelative);\n+await Bun.write(resolve(outputDir, \"index.ext.md\"), indexContent);\n+\n+const successCount = artifacts.filter((artifact) => artifact.ok).length;\n+const failureCount = artifacts.length - successCount;\n+\n+console.log(\n+  `Docs // Scrape // Wrote split external docs (pages=${artifacts.length},ok=${successCount},failed=${failureCount},dir=${outputDir})`,\n+);\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts",
                  "relativePath": "scripts/scrape_moon_docs.sh.ts",
                  "type": "add",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n+++ /Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts\n@@ -0,0 +1,488 @@\n+#!/usr/bin/env bun\n+\n+import { existsSync, mkdirSync, readdirSync, rmSync } from \"node:fs\";\n+import { dirname, resolve } from \"node:path\";\n+import { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n+\n+type ScrapeMode = \"jina\" | \"html\";\n+\n+type ScrapeResult = {\n+  url: string;\n+  ok: boolean;\n+  markdown?: string;\n+  error?: string;\n+  mode?: ScrapeMode;\n+};\n+\n+type PageArtifact = ScrapeResult & {\n+  fileName: string;\n+  sourcePath: string;\n+};\n+\n+const SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\n+const DOCS_ROOT = \"https://moonrepo.dev/docs\";\n+const DEFAULT_OUTPUT_DIR_RELATIVE = \"docs/external/moonrepo\";\n+const CONCURRENCY = 4;\n+const SUMMARY_MAX_CHARS = 240;\n+\n+function decodeEntities(value: string): string {\n+  return value\n+    .replaceAll(\"&amp;\", \"&\")\n+    .replaceAll(\"&quot;\", '\"')\n+    .replaceAll(\"&apos;\", \"'\")\n+    .replaceAll(\"&#x27;\", \"'\")\n+    .replaceAll(\"&#39;\", \"'\")\n+    .replaceAll(\"&nbsp;\", \" \")\n+    .replaceAll(\"&lt;\", \"<\")\n+    .replaceAll(\"&gt;\", \">\");\n+}\n+\n+function stripJinaEnvelope(markdown: string): string {\n+  return markdown\n+    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n+    .trim();\n+}\n+\n+function stripTags(value: string): string {\n+  return value.replace(/<[^>]+>/g, \"\");\n+}\n+\n+function plainTextFromHtml(value: string): string {\n+  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n+}\n+\n+function extractMainHtml(html: string): string {\n+  const markdownBlockMatch = html.match(\n+    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n+  );\n+\n+  if (markdownBlockMatch?.[1]) {\n+    return markdownBlockMatch[1];\n+  }\n+\n+  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n+  if (articleMatch?.[1]) {\n+    return articleMatch[1];\n+  }\n+\n+  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n+  return mainMatch?.[1] ?? html;\n+}\n+\n+function htmlToMarkdown(html: string): string {\n+  let content = extractMainHtml(html);\n+\n+  content = content\n+    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n+    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n+    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n+    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n+\n+  content = content.replace(\n+    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n+    (_match, code) => {\n+      const normalizedCode = decodeEntities(\n+        stripTags(code)\n+          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+          .replace(/\\n{3,}/g, \"\\n\\n\")\n+          .trim(),\n+      );\n+\n+      if (!normalizedCode) {\n+        return \"\";\n+      }\n+\n+      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n+    },\n+  );\n+\n+  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n+    const normalizedCode = decodeEntities(stripTags(code)).trim();\n+    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n+  });\n+\n+  content = content.replace(\n+    /<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi,\n+    (_match, href, label) => {\n+      const text = plainTextFromHtml(label);\n+      if (!text) {\n+        return \"\";\n+      }\n+\n+      return `[${text}](${decodeEntities(href)})`;\n+    },\n+  );\n+\n+  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n+    const heading = plainTextFromHtml(inner);\n+    if (!heading) {\n+      return \"\";\n+    }\n+\n+    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n+  });\n+\n+  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n+    const line = plainTextFromHtml(inner);\n+    return line ? `- ${line}\\n` : \"\";\n+  });\n+\n+  content = content\n+    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n+    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n+    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n+    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n+      const cell = plainTextFromHtml(inner);\n+      return cell ? `${cell} ` : \"\";\n+    });\n+\n+  content = decodeEntities(content)\n+    .replace(/<[^>]+>/g, \"\")\n+    .replace(/[ \\t]+\\n/g, \"\\n\")\n+    .replace(/\\n{3,}/g, \"\\n\\n\")\n+    .trim();\n+\n+  return content;\n+}\n+\n+function extractDocsUrls(sitemapXml: string): string[] {\n+  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n+    decodeEntities(match[1]?.trim() ?? \"\"),\n+  )\n+    .filter((url) => url.startsWith(DOCS_ROOT))\n+    .filter((url) => !url.includes(\"/docs/tags\"))\n+    .filter((url) => !url.includes(\"#\"));\n+\n+  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n+}\n+\n+function sanitizeSegment(value: string): string {\n+  const clean = decodeURIComponent(value)\n+    .toLowerCase()\n+    .replace(/[^a-z0-9]+/g, \"-\")\n+    .replace(/^-+|-+$/g, \"\");\n+\n+  return clean || \"page\";\n+}\n+\n+function sourcePathFromUrl(url: string): string {\n+  const pathname = new URL(url).pathname.replace(/\\/+$/, \"\") || \"/docs\";\n+  return pathname;\n+}\n+\n+function fileStemFromUrl(url: string): string {\n+  const sourcePath = sourcePathFromUrl(url);\n+\n+  if (sourcePath === \"/docs\") {\n+    return \"docs\";\n+  }\n+\n+  const relative = sourcePath.replace(/^\\/docs\\/?/, \"\");\n+  const segments = relative\n+    .split(\"/\")\n+    .filter(Boolean)\n+    .map(sanitizeSegment);\n+\n+  if (segments.length === 0) {\n+    return \"docs\";\n+  }\n+\n+  return [\"docs\", ...segments].join(\"__\");\n+}\n+\n+function extractSummary(markdown: string): string {\n+  const lines = markdown.split(\"\\n\");\n+  let inCodeBlock = false;\n+\n+  for (const rawLine of lines) {\n+    const line = rawLine.trim();\n+\n+    if (line.startsWith(\"```\") || line.startsWith(\"~~~\")) {\n+      inCodeBlock = !inCodeBlock;\n+      continue;\n+    }\n+\n+    if (inCodeBlock) {\n+      continue;\n+    }\n+\n+    if (!line || line.startsWith(\"#\") || line.startsWith(\"- [\") || line.startsWith(\"```\")) {\n+      continue;\n+    }\n+\n+    if (line.length <= 25) {\n+      continue;\n+    }\n+\n+    if (line.length > SUMMARY_MAX_CHARS) {\n+      return `${line.slice(0, SUMMARY_MAX_CHARS - 3)}...`;\n+    }\n+\n+    return line;\n+  }\n+\n+  return \"moonrepo documentation page snapshot.\";\n+}\n+\n+function keywordsForPath(sourcePath: string): string {\n+  const dynamic = sourcePath\n+    .split(\"/\")\n+    .filter(Boolean)\n+    .slice(1)\n+    .map((part) => part.replace(/[^a-zA-Z0-9]+/g, \" \"))\n+    .filter(Boolean)\n+    .join(\", \");\n+\n+  const base = \"moon, moonrepo, docs, monorepo, build\";\n+  return dynamic ? `${base}, ${dynamic}` : base;\n+}\n+\n+function buildPageMarkdown(result: PageArtifact, capturedAt: string): string {\n+  const pageSummary = result.ok\n+    ? extractSummary(result.markdown ?? \"\")\n+    : `Scrape failed: ${result.error ?? \"unknown error\"}`;\n+\n+  const pageBody = result.ok\n+    ? result.markdown?.trim() ?? \"\"\n+    : `> Scrape failed: ${result.error ?? \"unknown error\"}`;\n+\n+  return [\n+    \"----\",\n+    \"## External Docs Snapshot // moonrepo\",\n+    \"\",\n+    `- Captured: ${capturedAt}`,\n+    `- Source root: ${DOCS_ROOT}`,\n+    `- Source page: ${result.sourcePath}`,\n+    `- Keywords: ${keywordsForPath(result.sourcePath)}`,\n+    `- Summary: ${pageSummary}`,\n+    \"----\",\n+    \"\",\n+    `Source: ${result.url}`,\n+    \"\",\n+    pageBody,\n+    \"\",\n+    \"----\",\n+    \"## Notes / Comments / Lessons\",\n+    \"\",\n+    \"- Collection method: sitemap discovery + markdown conversion.\",\n+    `- Conversion path: ${result.mode === \"html\" ? \"direct HTML fallback parser\" : \"r.jina.ai markdown proxy\"}.`,\n+    \"- This file is one page-level external snapshot in markdown `.ext.md` format.\",\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+function buildIndexMarkdown(\n+  artifacts: PageArtifact[],\n+  capturedAt: string,\n+  outputDirRelative: string,\n+): string {\n+  const successCount = artifacts.filter((artifact) => artifact.ok).length;\n+  const failureCount = artifacts.length - successCount;\n+\n+  const pageList = artifacts\n+    .map((artifact) => {\n+      const status = artifact.ok ? \"ok\" : \"failed\";\n+      const mode = artifact.mode ?? \"unknown\";\n+      return `- [${artifact.fileName}](./${artifact.fileName}) - ${artifact.sourcePath} (${status},mode=${mode})`;\n+    })\n+    .join(\"\\n\");\n+\n+  return [\n+    \"----\",\n+    \"## External Docs Index // moonrepo\",\n+    \"\",\n+    `- Captured: ${capturedAt}`,\n+    `- Source root: ${DOCS_ROOT}`,\n+    `- Output directory: ${outputDirRelative}`,\n+    `- Scope: ${artifacts.length} pages under /docs (excluding /docs/tags)`,\n+    \"- Keywords: moon, moonrepo, docs index, monorepo, build system, toolchain, proto\",\n+    \"- Summary: This index links one `.ext.md` file per docs page snapshot for moonrepo.\",\n+    \"----\",\n+    \"\",\n+    \"## Pages\",\n+    \"\",\n+    pageList,\n+    \"\",\n+    \"----\",\n+    \"## Notes / Comments / Lessons\",\n+    \"\",\n+    \"- Per-page files are flattened in this directory and prefixed with `docs` in the filename stem.\",\n+    \"- Regenerate by re-running the scraper script; old `.ext.md` files in this directory are replaced.\",\n+    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n+    \"----\",\n+    \"\",\n+  ].join(\"\\n\");\n+}\n+\n+async function fetchText(url: string): Promise<string> {\n+  const response = await fetch(url, {\n+    headers: {\n+      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n+    },\n+  });\n+\n+  if (!response.ok) {\n+    throw new Error(`Request failed (${response.status}) for ${url}`);\n+  }\n+\n+  return await response.text();\n+}\n+\n+async function mapConcurrent<T, R>(\n+  values: T[],\n+  limit: number,\n+  map: (value: T, index: number) => Promise<R>,\n+): Promise<R[]> {\n+  const results = new Array<R>(values.length);\n+  let index = 0;\n+\n+  async function worker(): Promise<void> {\n+    while (true) {\n+      const currentIndex = index;\n+      index += 1;\n+\n+      if (currentIndex >= values.length) {\n+        return;\n+      }\n+\n+      results[currentIndex] = await map(values[currentIndex], currentIndex);\n+    }\n+  }\n+\n+  const workerCount = Math.min(limit, values.length);\n+  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n+  return results;\n+}\n+\n+async function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n+  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n+\n+  try {\n+    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n+\n+    try {\n+      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n+      if (markdown) {\n+        return {\n+          url,\n+          ok: true,\n+          markdown,\n+          mode: \"jina\",\n+        };\n+      }\n+    } catch {\n+      // Fall through to direct HTML scrape.\n+    }\n+\n+    const html = await fetchText(url);\n+    const markdown = htmlToMarkdown(html);\n+\n+    if (!markdown) {\n+      return {\n+        url,\n+        ok: false,\n+        error: \"No markdown content returned from HTML fallback\",\n+      };\n+    }\n+\n+    return {\n+      url,\n+      ok: true,\n+      markdown,\n+      mode: \"html\",\n+    };\n+  } catch (error) {\n+    return {\n+      url,\n+      ok: false,\n+      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n+    };\n+  }\n+}\n+\n+function resolveOutputDirectory(repoRoot: string, outputArg?: string): string {\n+  if (!outputArg) {\n+    return resolve(repoRoot, DEFAULT_OUTPUT_DIR_RELATIVE);\n+  }\n+\n+  const resolved = resolve(repoRoot, outputArg);\n+  if (resolved.endsWith(\".md\")) {\n+    return dirname(resolved);\n+  }\n+\n+  return resolved;\n+}\n+\n+function clearExistingExtFiles(outputDir: string): void {\n+  if (!existsSync(outputDir)) {\n+    return;\n+  }\n+\n+  for (const entry of readdirSync(outputDir, { withFileTypes: true })) {\n+    if (!entry.isFile()) {\n+      continue;\n+    }\n+\n+    if (!entry.name.endsWith(\".ext.md\")) {\n+      continue;\n+    }\n+\n+    rmSync(resolve(outputDir, entry.name));\n+  }\n+}\n+\n+const repoRoot = findRepoRoot(import.meta.dir);\n+const outputArg = Bun.argv[2];\n+const outputDir = resolveOutputDirectory(repoRoot, outputArg);\n+const outputDirRelative = outputDir.startsWith(repoRoot)\n+  ? outputDir.slice(repoRoot.length + 1)\n+  : outputDir;\n+\n+mkdirSync(outputDir, { recursive: true });\n+clearExistingExtFiles(outputDir);\n+\n+const sitemapXml = await fetchText(SITEMAP_URL);\n+const docsUrls = extractDocsUrls(sitemapXml);\n+\n+if (docsUrls.length === 0) {\n+  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n+}\n+\n+const scrapeResults = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n+  scrapeDocsPage(url, index + 1, docsUrls.length),\n+);\n+\n+const usedNames = new Map<string, number>();\n+const artifacts: PageArtifact[] = scrapeResults.map((result) => {\n+  const stem = fileStemFromUrl(result.url);\n+  const seen = usedNames.get(stem) ?? 0;\n+  usedNames.set(stem, seen + 1);\n+\n+  const suffix = seen === 0 ? \"\" : `__${seen + 1}`;\n+  const fileName = `${stem}${suffix}.ext.md`;\n+\n+  return {\n+    ...result,\n+    fileName,\n+    sourcePath: sourcePathFromUrl(result.url),\n+  };\n+});\n+\n+const capturedAt = new Date().toISOString();\n+\n+for (const artifact of artifacts) {\n+  const pagePath = resolve(outputDir, artifact.fileName);\n+  const pageContent = buildPageMarkdown(artifact, capturedAt);\n+  await Bun.write(pagePath, pageContent);\n+}\n+\n+const indexContent = buildIndexMarkdown(artifacts, capturedAt, outputDirRelative);\n+await Bun.write(resolve(outputDir, \"index.ext.md\"), indexContent);\n+\n+const successCount = artifacts.filter((artifact) => artifact.ok).length;\n+const failureCount = artifacts.length - successCount;\n+\n+console.log(\n+  `Docs // Scrape // Wrote split external docs (pages=${artifacts.length},ok=${successCount},failed=${failureCount},dir=${outputDir})`,\n+);\n",
                  "before": "",
                  "after": "#!/usr/bin/env bun\n\nimport { existsSync, mkdirSync, readdirSync, rmSync } from \"node:fs\";\nimport { dirname, resolve } from \"node:path\";\nimport { findRepoRoot } from \"./helpers/run_root.sh.ts\";\n\ntype ScrapeMode = \"jina\" | \"html\";\n\ntype ScrapeResult = {\n  url: string;\n  ok: boolean;\n  markdown?: string;\n  error?: string;\n  mode?: ScrapeMode;\n};\n\ntype PageArtifact = ScrapeResult & {\n  fileName: string;\n  sourcePath: string;\n};\n\nconst SITEMAP_URL = \"https://moonrepo.dev/sitemap.xml\";\nconst DOCS_ROOT = \"https://moonrepo.dev/docs\";\nconst DEFAULT_OUTPUT_DIR_RELATIVE = \"docs/external/moonrepo\";\nconst CONCURRENCY = 4;\nconst SUMMARY_MAX_CHARS = 240;\n\nfunction decodeEntities(value: string): string {\n  return value\n    .replaceAll(\"&amp;\", \"&\")\n    .replaceAll(\"&quot;\", '\"')\n    .replaceAll(\"&apos;\", \"'\")\n    .replaceAll(\"&#x27;\", \"'\")\n    .replaceAll(\"&#39;\", \"'\")\n    .replaceAll(\"&nbsp;\", \" \")\n    .replaceAll(\"&lt;\", \"<\")\n    .replaceAll(\"&gt;\", \">\");\n}\n\nfunction stripJinaEnvelope(markdown: string): string {\n  return markdown\n    .replace(/^Title:.*?\\nURL Source:.*?\\nMarkdown Content:\\n/s, \"\")\n    .trim();\n}\n\nfunction stripTags(value: string): string {\n  return value.replace(/<[^>]+>/g, \"\");\n}\n\nfunction plainTextFromHtml(value: string): string {\n  return decodeEntities(stripTags(value).replace(/\\s+/g, \" \")).trim();\n}\n\nfunction extractMainHtml(html: string): string {\n  const markdownBlockMatch = html.match(\n    /<div class=\"theme-doc-markdown markdown\">([\\s\\S]*?)<footer class=\"theme-doc-footer/s,\n  );\n\n  if (markdownBlockMatch?.[1]) {\n    return markdownBlockMatch[1];\n  }\n\n  const articleMatch = html.match(/<article>([\\s\\S]*?)<\\/article>/s);\n  if (articleMatch?.[1]) {\n    return articleMatch[1];\n  }\n\n  const mainMatch = html.match(/<main[^>]*>([\\s\\S]*?)<\\/main>/s);\n  return mainMatch?.[1] ?? html;\n}\n\nfunction htmlToMarkdown(html: string): string {\n  let content = extractMainHtml(html);\n\n  content = content\n    .replace(/<script[\\s\\S]*?<\\/script>/gi, \"\")\n    .replace(/<style[\\s\\S]*?<\\/style>/gi, \"\")\n    .replace(/<a[^>]*class=\"hash-link\"[^>]*>[\\s\\S]*?<\\/a>/gi, \"\")\n    .replace(/<span[^>]*aria-hidden=\"true\"[^>]*>[\\s\\S]*?<\\/span>/gi, \"\");\n\n  content = content.replace(\n    /<pre[^>]*><code[^>]*>([\\s\\S]*?)<\\/code><\\/pre>/gi,\n    (_match, code) => {\n      const normalizedCode = decodeEntities(\n        stripTags(code)\n          .replace(/<br\\s*\\/?>/gi, \"\\n\")\n          .replace(/\\n{3,}/g, \"\\n\\n\")\n          .trim(),\n      );\n\n      if (!normalizedCode) {\n        return \"\";\n      }\n\n      return `\\n\\n\\`\\`\\`\\n${normalizedCode}\\n\\`\\`\\`\\n\\n`;\n    },\n  );\n\n  content = content.replace(/<code[^>]*>([\\s\\S]*?)<\\/code>/gi, (_match, code) => {\n    const normalizedCode = decodeEntities(stripTags(code)).trim();\n    return normalizedCode ? `\\`${normalizedCode}\\`` : \"\";\n  });\n\n  content = content.replace(\n    /<a[^>]*href=\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi,\n    (_match, href, label) => {\n      const text = plainTextFromHtml(label);\n      if (!text) {\n        return \"\";\n      }\n\n      return `[${text}](${decodeEntities(href)})`;\n    },\n  );\n\n  content = content.replace(/<h([1-6])[^>]*>([\\s\\S]*?)<\\/h\\1>/gi, (_match, level, inner) => {\n    const heading = plainTextFromHtml(inner);\n    if (!heading) {\n      return \"\";\n    }\n\n    return `\\n\\n${\"#\".repeat(Number(level))} ${heading}\\n\\n`;\n  });\n\n  content = content.replace(/<li[^>]*>([\\s\\S]*?)<\\/li>/gi, (_match, inner) => {\n    const line = plainTextFromHtml(inner);\n    return line ? `- ${line}\\n` : \"\";\n  });\n\n  content = content\n    .replace(/<br\\s*\\/?>/gi, \"\\n\")\n    .replace(/<\\/(p|div|section|article|header|ul|ol|table|tr)>/gi, \"\\n\\n\")\n    .replace(/<(p|div|section|article|header|ul|ol|table|tr)[^>]*>/gi, \"\\n\")\n    .replace(/<t[hd][^>]*>([\\s\\S]*?)<\\/t[hd]>/gi, (_match, inner) => {\n      const cell = plainTextFromHtml(inner);\n      return cell ? `${cell} ` : \"\";\n    });\n\n  content = decodeEntities(content)\n    .replace(/<[^>]+>/g, \"\")\n    .replace(/[ \\t]+\\n/g, \"\\n\")\n    .replace(/\\n{3,}/g, \"\\n\\n\")\n    .trim();\n\n  return content;\n}\n\nfunction extractDocsUrls(sitemapXml: string): string[] {\n  const urls = Array.from(sitemapXml.matchAll(/<loc>(.*?)<\\/loc>/g), (match) =>\n    decodeEntities(match[1]?.trim() ?? \"\"),\n  )\n    .filter((url) => url.startsWith(DOCS_ROOT))\n    .filter((url) => !url.includes(\"/docs/tags\"))\n    .filter((url) => !url.includes(\"#\"));\n\n  return Array.from(new Set(urls)).sort((a, b) => a.localeCompare(b));\n}\n\nfunction sanitizeSegment(value: string): string {\n  const clean = decodeURIComponent(value)\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/^-+|-+$/g, \"\");\n\n  return clean || \"page\";\n}\n\nfunction sourcePathFromUrl(url: string): string {\n  const pathname = new URL(url).pathname.replace(/\\/+$/, \"\") || \"/docs\";\n  return pathname;\n}\n\nfunction fileStemFromUrl(url: string): string {\n  const sourcePath = sourcePathFromUrl(url);\n\n  if (sourcePath === \"/docs\") {\n    return \"docs\";\n  }\n\n  const relative = sourcePath.replace(/^\\/docs\\/?/, \"\");\n  const segments = relative\n    .split(\"/\")\n    .filter(Boolean)\n    .map(sanitizeSegment);\n\n  if (segments.length === 0) {\n    return \"docs\";\n  }\n\n  return [\"docs\", ...segments].join(\"__\");\n}\n\nfunction extractSummary(markdown: string): string {\n  const lines = markdown.split(\"\\n\");\n  let inCodeBlock = false;\n\n  for (const rawLine of lines) {\n    const line = rawLine.trim();\n\n    if (line.startsWith(\"```\") || line.startsWith(\"~~~\")) {\n      inCodeBlock = !inCodeBlock;\n      continue;\n    }\n\n    if (inCodeBlock) {\n      continue;\n    }\n\n    if (!line || line.startsWith(\"#\") || line.startsWith(\"- [\") || line.startsWith(\"```\")) {\n      continue;\n    }\n\n    if (line.length <= 25) {\n      continue;\n    }\n\n    if (line.length > SUMMARY_MAX_CHARS) {\n      return `${line.slice(0, SUMMARY_MAX_CHARS - 3)}...`;\n    }\n\n    return line;\n  }\n\n  return \"moonrepo documentation page snapshot.\";\n}\n\nfunction keywordsForPath(sourcePath: string): string {\n  const dynamic = sourcePath\n    .split(\"/\")\n    .filter(Boolean)\n    .slice(1)\n    .map((part) => part.replace(/[^a-zA-Z0-9]+/g, \" \"))\n    .filter(Boolean)\n    .join(\", \");\n\n  const base = \"moon, moonrepo, docs, monorepo, build\";\n  return dynamic ? `${base}, ${dynamic}` : base;\n}\n\nfunction buildPageMarkdown(result: PageArtifact, capturedAt: string): string {\n  const pageSummary = result.ok\n    ? extractSummary(result.markdown ?? \"\")\n    : `Scrape failed: ${result.error ?? \"unknown error\"}`;\n\n  const pageBody = result.ok\n    ? result.markdown?.trim() ?? \"\"\n    : `> Scrape failed: ${result.error ?? \"unknown error\"}`;\n\n  return [\n    \"----\",\n    \"## External Docs Snapshot // moonrepo\",\n    \"\",\n    `- Captured: ${capturedAt}`,\n    `- Source root: ${DOCS_ROOT}`,\n    `- Source page: ${result.sourcePath}`,\n    `- Keywords: ${keywordsForPath(result.sourcePath)}`,\n    `- Summary: ${pageSummary}`,\n    \"----\",\n    \"\",\n    `Source: ${result.url}`,\n    \"\",\n    pageBody,\n    \"\",\n    \"----\",\n    \"## Notes / Comments / Lessons\",\n    \"\",\n    \"- Collection method: sitemap discovery + markdown conversion.\",\n    `- Conversion path: ${result.mode === \"html\" ? \"direct HTML fallback parser\" : \"r.jina.ai markdown proxy\"}.`,\n    \"- This file is one page-level external snapshot in markdown `.ext.md` format.\",\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nfunction buildIndexMarkdown(\n  artifacts: PageArtifact[],\n  capturedAt: string,\n  outputDirRelative: string,\n): string {\n  const successCount = artifacts.filter((artifact) => artifact.ok).length;\n  const failureCount = artifacts.length - successCount;\n\n  const pageList = artifacts\n    .map((artifact) => {\n      const status = artifact.ok ? \"ok\" : \"failed\";\n      const mode = artifact.mode ?? \"unknown\";\n      return `- [${artifact.fileName}](./${artifact.fileName}) - ${artifact.sourcePath} (${status},mode=${mode})`;\n    })\n    .join(\"\\n\");\n\n  return [\n    \"----\",\n    \"## External Docs Index // moonrepo\",\n    \"\",\n    `- Captured: ${capturedAt}`,\n    `- Source root: ${DOCS_ROOT}`,\n    `- Output directory: ${outputDirRelative}`,\n    `- Scope: ${artifacts.length} pages under /docs (excluding /docs/tags)`,\n    \"- Keywords: moon, moonrepo, docs index, monorepo, build system, toolchain, proto\",\n    \"- Summary: This index links one `.ext.md` file per docs page snapshot for moonrepo.\",\n    \"----\",\n    \"\",\n    \"## Pages\",\n    \"\",\n    pageList,\n    \"\",\n    \"----\",\n    \"## Notes / Comments / Lessons\",\n    \"\",\n    \"- Per-page files are flattened in this directory and prefixed with `docs` in the filename stem.\",\n    \"- Regenerate by re-running the scraper script; old `.ext.md` files in this directory are replaced.\",\n    `- Capture results: success=${successCount}, failed=${failureCount}.`,\n    \"----\",\n    \"\",\n  ].join(\"\\n\");\n}\n\nasync function fetchText(url: string): Promise<string> {\n  const response = await fetch(url, {\n    headers: {\n      \"user-agent\": \"dark-factory-doc-scraper/1.0\",\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Request failed (${response.status}) for ${url}`);\n  }\n\n  return await response.text();\n}\n\nasync function mapConcurrent<T, R>(\n  values: T[],\n  limit: number,\n  map: (value: T, index: number) => Promise<R>,\n): Promise<R[]> {\n  const results = new Array<R>(values.length);\n  let index = 0;\n\n  async function worker(): Promise<void> {\n    while (true) {\n      const currentIndex = index;\n      index += 1;\n\n      if (currentIndex >= values.length) {\n        return;\n      }\n\n      results[currentIndex] = await map(values[currentIndex], currentIndex);\n    }\n  }\n\n  const workerCount = Math.min(limit, values.length);\n  await Promise.all(Array.from({ length: workerCount }, () => worker()));\n  return results;\n}\n\nasync function scrapeDocsPage(url: string, count: number, total: number): Promise<ScrapeResult> {\n  const jinaUrl = `https://r.jina.ai/http://${url.replace(/^https?:\\/\\//, \"\")}`;\n\n  try {\n    console.log(`Docs // Scrape // ${count}/${total} ${url}`);\n\n    try {\n      const markdown = stripJinaEnvelope(await fetchText(jinaUrl));\n      if (markdown) {\n        return {\n          url,\n          ok: true,\n          markdown,\n          mode: \"jina\",\n        };\n      }\n    } catch {\n      // Fall through to direct HTML scrape.\n    }\n\n    const html = await fetchText(url);\n    const markdown = htmlToMarkdown(html);\n\n    if (!markdown) {\n      return {\n        url,\n        ok: false,\n        error: \"No markdown content returned from HTML fallback\",\n      };\n    }\n\n    return {\n      url,\n      ok: true,\n      markdown,\n      mode: \"html\",\n    };\n  } catch (error) {\n    return {\n      url,\n      ok: false,\n      error: error instanceof Error ? error.message : \"Unknown scrape error\",\n    };\n  }\n}\n\nfunction resolveOutputDirectory(repoRoot: string, outputArg?: string): string {\n  if (!outputArg) {\n    return resolve(repoRoot, DEFAULT_OUTPUT_DIR_RELATIVE);\n  }\n\n  const resolved = resolve(repoRoot, outputArg);\n  if (resolved.endsWith(\".md\")) {\n    return dirname(resolved);\n  }\n\n  return resolved;\n}\n\nfunction clearExistingExtFiles(outputDir: string): void {\n  if (!existsSync(outputDir)) {\n    return;\n  }\n\n  for (const entry of readdirSync(outputDir, { withFileTypes: true })) {\n    if (!entry.isFile()) {\n      continue;\n    }\n\n    if (!entry.name.endsWith(\".ext.md\")) {\n      continue;\n    }\n\n    rmSync(resolve(outputDir, entry.name));\n  }\n}\n\nconst repoRoot = findRepoRoot(import.meta.dir);\nconst outputArg = Bun.argv[2];\nconst outputDir = resolveOutputDirectory(repoRoot, outputArg);\nconst outputDirRelative = outputDir.startsWith(repoRoot)\n  ? outputDir.slice(repoRoot.length + 1)\n  : outputDir;\n\nmkdirSync(outputDir, { recursive: true });\nclearExistingExtFiles(outputDir);\n\nconst sitemapXml = await fetchText(SITEMAP_URL);\nconst docsUrls = extractDocsUrls(sitemapXml);\n\nif (docsUrls.length === 0) {\n  throw new Error(\"No docs URLs found in moonrepo sitemap\");\n}\n\nconst scrapeResults = await mapConcurrent(docsUrls, CONCURRENCY, (url, index) =>\n  scrapeDocsPage(url, index + 1, docsUrls.length),\n);\n\nconst usedNames = new Map<string, number>();\nconst artifacts: PageArtifact[] = scrapeResults.map((result) => {\n  const stem = fileStemFromUrl(result.url);\n  const seen = usedNames.get(stem) ?? 0;\n  usedNames.set(stem, seen + 1);\n\n  const suffix = seen === 0 ? \"\" : `__${seen + 1}`;\n  const fileName = `${stem}${suffix}.ext.md`;\n\n  return {\n    ...result,\n    fileName,\n    sourcePath: sourcePathFromUrl(result.url),\n  };\n});\n\nconst capturedAt = new Date().toISOString();\n\nfor (const artifact of artifacts) {\n  const pagePath = resolve(outputDir, artifact.fileName);\n  const pageContent = buildPageMarkdown(artifact, capturedAt);\n  await Bun.write(pagePath, pageContent);\n}\n\nconst indexContent = buildIndexMarkdown(artifacts, capturedAt, outputDirRelative);\nawait Bun.write(resolve(outputDir, \"index.ext.md\"), indexContent);\n\nconst successCount = artifacts.filter((artifact) => artifact.ok).length;\nconst failureCount = artifacts.length - successCount;\n\nconsole.log(\n  `Docs // Scrape // Wrote split external docs (pages=${artifacts.length},ok=${successCount},failed=${failureCount},dir=${outputDir})`,\n);\n",
                  "additions": 488,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771213633714,
              "end": 1771213633730
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_030b453f9a99276d01699292fdfd9c819689994d7a018bb439"
            }
          },
          "id": "prt_c648e307d001pEXj7DxRPCOdiG",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648e2556001mYayr68hHg6BT6"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "fc61f0a76c01b794290326434bf47ddc49568138",
          "cost": 0,
          "tokens": {
            "total": 83346,
            "input": 148,
            "output": 4862,
            "reasoning": 10,
            "cache": {
              "read": 78336,
              "write": 0
            }
          },
          "id": "prt_c648f38dd001F8C3kgQFxuJNPx",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648e2556001mYayr68hHg6BT6"
        },
        {
          "type": "patch",
          "hash": "7c546ac04417b7ff35b3d29909841f670e9a513d",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts"
          ],
          "id": "prt_c648f3936001UlLkcX8nJo2dH3",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648e2556001mYayr68hHg6BT6"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213633866,
          "completed": 1771213639166
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 83510,
          "input": 174,
          "output": 136,
          "reasoning": 11,
          "cache": {
            "read": 83200,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648f394a001ew9UuUxl6oABnY",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "fc61f0a76c01b794290326434bf47ddc49568138",
          "id": "prt_c648f439b001svhf76bKQvmOZS",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f394a001ew9UuUxl6oABnY"
        },
        {
          "type": "reasoning",
          "text": "**Updating README agent bullets**",
          "metadata": {
            "openai": {
              "itemId": "rs_0d2dff376b169c9c0169929344c49081968c2acfb7613c77ac",
              "reasoningEncryptedContent": "gAAAAABpkpNFngkbO0ol4aH17avN_3E9xxlRSq8XM2PAe6AViubCp8O1UF94KFQOWhvLrZrPmMdoLt-dZVnKrZxKtlmXha60q2N00IkRpKxI3Rl1lf2N3PoxQg3bR2UiiqRJixZLOnkHNb5_Yy4fTLGX3Jicqt-AT2QzuE8fi70k17rz943ZgLQtleIXzwxhUuEfcwszCcIazeiJxDLDASoB9Gnd77dZp_FrSV6lLIRPmBtKqSKrvqgudrl9GJ3D12QztJOhzuGDdy2X_EQLjs25P_9vtJpPC1pIsCRrJzL_QBYOwJTTrV6dZpdBOIDiIJk5bFknTMFG37clFrqAfHKwwTbYGvlGKjanB50633WiR9r8NtyIOLQGRkHHH4o9gIC4XtC0U053G8tHlrBqerFf9PA_AQ0DJKKQNflkt1LlkT4q6caJuS8ZIKP7EF9VL42UH9y_a0flh0Aos5vFYYjo5K4Eabh3G36DzGrWehF4jYriVcqcSHURsLivllVsBqQDqGgAqd1LmjKYxXjuKDFrg2yXWknQbQRlPDSZeN6TKJNYHcdoBK3CU0AkZi0U5sxqMdAZPuOXC1pHBULGhWhXQ9CYl7KA3D-g9-z7jUtyHsqFOvsRKyNBHKUVYmI3DyxFtASvSLBxUn6so7up7v4XB5oHUI1Wj3AA4ADLSJMLvf5WU2d-WdQnbRzkJ3NtUYMw43wa7hU_GSht_rJBwfzSaacfr4qam2JUyI4mA-9YiViqt1Z782Ee_wMC3lzGlNYJUoICZ8YgFlLubZ3UfatCQM8g2VkoiAMn-V5vmcK_CtUkiD8t7djCxLDcu2ExXa2QLZUOtvJrLFBpzU19_CQkHnqIh8czQaGjlWA7NZdBFbu89gKSdUFbYk_WQWFQ7dZMDdpgqMRc"
            }
          },
          "time": {
            "start": 1771213636857,
            "end": 1771213637452
          },
          "id": "prt_c648f44f9001fTP9wA0jv2BsqX",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f394a001ew9UuUxl6oABnY"
        },
        {
          "type": "tool",
          "callID": "call_I64VwuAUyLaZ9CggOwtSQslz",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/README.md\n@@\n-- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n+- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM README.md",
            "title": "Success. Updated the following files:\nM README.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/README.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/README.md\n+++ /Users/alex/repos/vfp/dark-factory/README.md\n@@ -37,9 +37,9 @@\n - Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n - Shared helpers live in `scripts/helpers/`.\n - `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n-- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n+- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n \n # Components\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/README.md",
                  "relativePath": "README.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/README.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/README.md\n+++ /Users/alex/repos/vfp/dark-factory/README.md\n@@ -37,9 +37,9 @@\n - Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n - Shared helpers live in `scripts/helpers/`.\n - `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n-- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n+- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n \n # Components\n",
                  "before": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
                  "after": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `worlds`\n- A `world` is an `env` + `actor`(s)\n- `env` is like a project and represents where an `actor` is spawned.\n  - Similar to `projets` in OpenCode or other agent orchestrators\n  - `env` may be a directory on host (simplest and most common) or later expanded to:\n    - Remote directory on a SSH-connected machine\n    - Dockershell w/ virutal FS\n    - Git Worktree\n- `world` can link multiple `envs` - which assume to all be multiple versions of the same root project\n  - we call this concept `dimensions`\n  - Examples:\n    - Multiple cloned directories of the same root project\n    - Git worktree supportds\n    - Instanced Docker shells\n- When an agent is spawned - it is linked to a given env\n  - Linking can just be spawning the agent at the directory (IE: `opencode .`)\n  - Link in the future can be custom tools/mcps to overwrite default shell and FS tools to ones that understand multi-verses\n- `actor` is a spawned agent that operates on an env.\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent) - but first iteration is JUST opencode\n  - Currently is 1-1 agent to env but future work will allow multiple agents per world or even env if operations allow.\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typscript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Defintion: `prisma`\n  - [ ] TODO: Investigate use of protobuff\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all worlds/envs/settigns etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (Rest even) we can query from frontends\n- Currently looking lile will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
                  "additions": 1,
                  "deletions": 1
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771213638954,
              "end": 1771213638972
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0d2dff376b169c9c01699293454d788196a53586485948fa58"
            }
          },
          "id": "prt_c648f474d001DJFEq0ZI1ixFYg",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f394a001ew9UuUxl6oABnY"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "39f61852b47bb44d2a6d30f33585d8cbbda3f1cf",
          "cost": 0,
          "tokens": {
            "total": 83510,
            "input": 174,
            "output": 136,
            "reasoning": 11,
            "cache": {
              "read": 83200,
              "write": 0
            }
          },
          "id": "prt_c648f4d3d001HhTN0amSt9w4RD",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f394a001ew9UuUxl6oABnY"
        },
        {
          "type": "patch",
          "hash": "fc61f0a76c01b794290326434bf47ddc49568138",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/README.md"
          ],
          "id": "prt_c648f4df60017aF8lma1XrOjKr",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f394a001ew9UuUxl6oABnY"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213639216,
          "completed": 1771213645022
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 83677,
          "input": 203,
          "output": 146,
          "reasoning": 17,
          "cache": {
            "read": 83328,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648f4e30001zNEBQYGHJ5EUHB",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "39f61852b47bb44d2a6d30f33585d8cbbda3f1cf",
          "id": "prt_c648f57db001filDZlGDVY13na",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f4e30001zNEBQYGHJ5EUHB"
        },
        {
          "type": "reasoning",
          "text": "**Updating agent documentation**",
          "metadata": {
            "openai": {
              "itemId": "rs_028e189761488e1f016992934ac4188194acdeea156c36cfdf",
              "reasoningEncryptedContent": "gAAAAABpkpNL0XW9F7xweoW26gzH5VU6qMaEbcfushFBTtsauCEeweixD_yKmTYSIJqWpaVVgPydpkHpylajB4AxwUxZCzlVGr7a3jG_IZ-pCrXJjTnbiifOcVyjOJbPquFR4K9wcuSHIfzZVoTP1XopcWEL72xe_Cwq5B7rQ9YRZvwpLOVezV9JsXrEPHD9hGwueSXrV2_KxsYyaSJ-vSjtHDevGEMkZvsce84x7g_5psajgm5eE79bIH1IQ8yda4tqOdnrWfpaHOeVgjzUK_JW0oKTwo_WrjCCjlTQjxy3Ag6KXbFculFg2WKP8jaZOLYdC-eR3bwifCMN09uO2DXEIBxC6D3oJuxQYiUMWfpyhLc58iCtRItwX-DElvs0jWBeCnJzlt1z2o7DovfsqBEsTa0XcuYGKMUpLr-bZhz3uA86c7XfoL2BMHWKPFdZkM598j3W9u_demrqMI8gknTVvrTD40Oh_eyUXdwTAvZ6Q-_KR2NeDNJUDsLpv9o7sEyIS4REFZ--aDCXNgbdNcFF-OgCpZo8GeXrfNJcnNdorO0JnTZBBJ-VaBWw-WAuMLy-MKlr-FKs9EuLnM7zhCBNk2s0WEa6RDaZkTK6qcM66glgKVrvJOBxHwIvEb1iPSsIBlLiWWSCjCggLMJJy4C0VvU8weLiLvLJyQ1TmcaGOTs3cXCg_hUDJGQKjneO7JC6VAK_7cUMvFkILfXaoIW3exVSUSkBykIxTSd87vO9El8htd5Z8kKj7WQErJAaMG1-zld_DjroXPeYjmgSfV9GkkzUwoq5beDZXcV17174aZcLurIK13FAsRsOlXdbnSBbL2WZB_vN8Sl49t9CPvKxkr8695msmYz7LIG8hE1OQG5OCy_28YbhTD2VFBuDtaGZ-eSaDor99UgjuZJVcwl419j2jRyld3a5kPuCZy2gLnOYvjygyEM="
            }
          },
          "time": {
            "start": 1771213642877,
            "end": 1771213643370
          },
          "id": "prt_c648f5c7d001EDLiwwHBWbANTv",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f4e30001zNEBQYGHJ5EUHB"
        },
        {
          "type": "tool",
          "callID": "call_RCeOxl4mld9ynwwa5KumqxpF",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@\n-- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n+- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into split per-page `docs/external/moonrepo/*.ext.md` files and writes `docs/external/moonrepo/index.ext.md`.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM AGENTS.md",
            "title": "Success. Updated the following files:\nM AGENTS.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/AGENTS.md\n+++ /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@ -75,9 +75,9 @@\n - Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n - Shared script helpers live under `scripts/helpers/`.\n - `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n-- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n+- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into split per-page `docs/external/moonrepo/*.ext.md` files and writes `docs/external/moonrepo/index.ext.md`.\n - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n \n ## 9) Keep This File Updated\n \n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/AGENTS.md",
                  "relativePath": "AGENTS.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/AGENTS.md\n+++ /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@ -75,9 +75,9 @@\n - Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n - Shared script helpers live under `scripts/helpers/`.\n - `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n-- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n+- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into split per-page `docs/external/moonrepo/*.ext.md` files and writes `docs/external/moonrepo/index.ext.md`.\n - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n \n ## 9) Keep This File Updated\n \n",
                  "before": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into `docs/external/moonrepo/*.ext.md`.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
                  "after": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into split per-page `docs/external/moonrepo/*.ext.md` files and writes `docs/external/moonrepo/index.ext.md`.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
                  "additions": 1,
                  "deletions": 1
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771213644915,
              "end": 1771213644931
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_028e189761488e1f016992934b53188194b11bb43965416626"
            }
          },
          "id": "prt_c648f5e6d001rn1Vv1GRpjCcNy",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f4e30001zNEBQYGHJ5EUHB"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "64e5e8a1c27775cb731eda44342c3520ea98d4d9",
          "cost": 0,
          "tokens": {
            "total": 83677,
            "input": 203,
            "output": 146,
            "reasoning": 17,
            "cache": {
              "read": 83328,
              "write": 0
            }
          },
          "id": "prt_c648f64ab0013FQuql0K2plahR",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f4e30001zNEBQYGHJ5EUHB"
        },
        {
          "type": "patch",
          "hash": "39f61852b47bb44d2a6d30f33585d8cbbda3f1cf",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/AGENTS.md"
          ],
          "id": "prt_c648f64d70018zntNmviM9n57d",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f4e30001zNEBQYGHJ5EUHB"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213645032,
          "completed": 1771213653270
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 84004,
          "input": 68868,
          "output": 288,
          "reasoning": 131,
          "cache": {
            "read": 14848,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648f64e80015av8KUx0py3E3I",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "64e5e8a1c27775cb731eda44342c3520ea98d4d9",
          "id": "prt_c648f6e13001Cd2rFJ2PD0CAfo",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f64e80015av8KUx0py3E3I"
        },
        {
          "type": "reasoning",
          "text": "**Updating script-authoring skill and commands**",
          "metadata": {
            "openai": {
              "itemId": "rs_01ed53c7b565c90e0169929350ded8819394d9134b392e517e",
              "reasoningEncryptedContent": "gAAAAABpkpNTDvzYeJH1Wqe0380Y4lAdzQj3aFFCNECExWYzINBbrSjB5T3wmqyAw8O3XTdiq5PYGZ_37ecmMrPs13RYXfeRQCl1AiS2JmtyMnUxPRR0_leFUpbNOPZOLPdgfcSOsOXvPAHTNFVqQn-2KT8ChOxHKRLzyS39337GMMpLzGqOcR9hbGpVhVTR8eLMpZHiSSTLDkoyohp3E4x1awIfm4w2Y5vUXkpJY_yo6_QDEi5KhFD65_bwcYIANlzL0KLcpPBcB086IUyS2Mpg7nHL9kjvi0gtAWdszoz5_gGixy5SUgNp2f52tPbIX_ORkQPIV1entix7pC9tWvK76nNE_d2aEM8lp6kfEu8GWRlerESfZqFlArikTIaLHHVGTKeVGXE2YaDqzfzchxP7hs4z5ZvXzGBidUt78gXj2NlnE4b8_X2dddetc7eRXdW64oNCu07IB6H3rX2z9fBuyluyUp7O1QiJcNOukVAtbUi8o4wQDRpSRRm9g-DBaZV8YIqHSHz9iMiU4eDMxzI_pXo3g3phuuaexwY2iGGytRr8ibxOU-wvocMnzcsvW0gF1cg2Q7tUqbg7mY_oepYOtA4__PzWD9J51CgRE5LL5BwcluA-Bw8Yvo9p5lUzvrIMoFnj7dGnKtaTNZKgoeRgUkJhnWj3QFB42jmbcFJSrqBy7WHVEPJwV0QZVsL4isteoQugtgoQIoOOHPA_2_aMAtKdla8KUaYmsTW2hmApz8EDd95h2BTLg3E7GFbjhWapkJkd57P8QVlI8jxwqF57pI-JZuqdIdgIDEDO_Sg1W-mBHB7tKKNBcE_LeYY4N6bdPBxo5dnCr0Ppmof2s1k8XtDOJU9-fQYzy1__YB39rQXJqYhADv8Kz8Dc9BEuPpk1QZkAKiIWMXRBhXBpXeaDwxx03LuppG4ITO2TG5Kb6koQV2XpjuDQTFj_kf6Hpdzk7ee_cmZQPNfnck_ueBoiKbnz1AurFUJUGC3sYUV-dsxhK8jLTQb0FfFdzKNdvyCJX8KFjcj_otoB-XinlI_iON0AKuMpbv5sv2VPjaNWxWR4OtQNUDufa3aWNwdkKGyZKVkaaj9mZVqXOxXP3ODEWwT-ZLOnG_bDcYpVZpLojJb-WEn8sL2JmkCi9BPyrDVfPuu5c94cg6DOTEFELBg9VmLrfO8iSd7O8lYZkBwBXkdky3XZ_V417mEVSAjmDJHDdgsfczrO7NYTzZ98mgm648qEq7Kp8cNHA4ur76PilPdXkXHtuOJ0PHZm35V9jp6SyTjy0K--Jd7O2o7EAYsUOV73w-8yLWe04ioVIdLgSF5uGd0Vn0LsK6ASmbQY1EKgEpvpsuUd9J7_ib01_4cpt1OmPY5oypa85AZbB5LnXnVWrBABBHh2MkaiKoZLPRjo7OF78yYCSJ-wk3c_nmFf-v5cmtqSyuH0WBkntADSvfMDPrJ1mW98AzIfjv3av7-4ofLDimZyTZjRFHjKqdfBRNBaMT8QmrEwKUi7WmbbKGpOq3GcwbTbUtLMfByhja9YbwvznA8nv6H4v1nakXW5hywq78cBcWky3jAffbgW9I1WgvwomgocEYq77XaBvMJAI7c0Q8C5XTjJK7TieYJoo79RKliJNAyUFgOPJ81KJXZZ11qg28o="
            }
          },
          "time": {
            "start": 1771213649027,
            "end": 1771213651796
          },
          "id": "prt_c648f74830015r3P4EIUAEGcpm",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f64e80015av8KUx0py3E3I"
        },
        {
          "type": "tool",
          "callID": "call_mKCVzO7RSSgeVuDtz2sZH7ww",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md\n@@\n - Primary scripts go in `scripts/` and use `*.sh.ts` naming.\n - Include shebang: `#!/usr/bin/env bun`.\n - Prefer shared helpers from `scripts/helpers/` instead of duplicating utility logic.\n - Default to explicit, readable command flow and fail fast on command errors.\n+- For external docs scraping workflows, default output to split per-page `.ext.md` files and include an `index.ext.md` in the target directory.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM .opencode/skills/script-authoring/SKILL.md",
            "title": "Success. Updated the following files:\nM .opencode/skills/script-authoring/SKILL.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md\n@@ -23,8 +23,9 @@\n - Primary scripts go in `scripts/` and use `*.sh.ts` naming.\n - Include shebang: `#!/usr/bin/env bun`.\n - Prefer shared helpers from `scripts/helpers/` instead of duplicating utility logic.\n - Default to explicit, readable command flow and fail fast on command errors.\n+- For external docs scraping workflows, default output to split per-page `.ext.md` files and include an `index.ext.md` in the target directory.\n \n ## Implementation workflow\n \n 1. Identify script intent, inputs, and expected outputs from provided context.\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md",
                  "relativePath": ".opencode/skills/script-authoring/SKILL.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md\n@@ -23,8 +23,9 @@\n - Primary scripts go in `scripts/` and use `*.sh.ts` naming.\n - Include shebang: `#!/usr/bin/env bun`.\n - Prefer shared helpers from `scripts/helpers/` instead of duplicating utility logic.\n - Default to explicit, readable command flow and fail fast on command errors.\n+- For external docs scraping workflows, default output to split per-page `.ext.md` files and include an `index.ext.md` in the target directory.\n \n ## Implementation workflow\n \n 1. Identify script intent, inputs, and expected outputs from provided context.\n",
                  "before": "---\nname: script-authoring\ndescription: Create Bun shebang scripts from prompts, examples, bash snippets, or conversation context.\n---\n\n## What I do\n\n- Turn requested workflows into reusable scripts under `scripts/`.\n- Normalize script implementation to project conventions (`*.sh.ts` + shebang + helpers).\n- Capture successful ad-hoc command sequences as reusable script entrypoints.\n\n## Accepted inputs\n\nUse this skill when script requirements come from any of these sources:\n\n- User prompt only (goal and constraints)\n- Provided example script\n- Provided bash script or shell command sequence\n- Agent-summarized conversation context (for example, previously successful setup steps)\n\n## Output conventions\n\n- Primary scripts go in `scripts/` and use `*.sh.ts` naming.\n- Include shebang: `#!/usr/bin/env bun`.\n- Prefer shared helpers from `scripts/helpers/` instead of duplicating utility logic.\n- Default to explicit, readable command flow and fail fast on command errors.\n\n## Implementation workflow\n\n1. Identify script intent, inputs, and expected outputs from provided context.\n2. If input comes from troubleshooting history, separate successful steps from failed or diagnostic attempts.\n3. Exclude failed retries, dead-end commands, and one-off debugging probes from final reusable script logic.\n4. Choose script name and location under `scripts/`.\n5. Reuse or add helper utilities in `scripts/helpers/` when needed.\n6. Implement Bun-based script and run it once when safe to verify behavior.\n7. Update docs (`README.md` or `AGENTS.md`) when conventions or entrypoints change.\n\n## Context capture rules\n\n- When converting conversation history into a script, include only the final successful sequence.\n- Keep troubleshooting commands as optional notes in output, not in executable script flow.\n- If multiple working paths exist, prefer the shortest deterministic path.\n\n## Notes\n\n- Keep scripts idempotent where practical.\n- Avoid embedding secrets or environment-specific absolute paths.\n- If verification cannot be run safely, state exactly what should be executed by the user.\n",
                  "after": "---\nname: script-authoring\ndescription: Create Bun shebang scripts from prompts, examples, bash snippets, or conversation context.\n---\n\n## What I do\n\n- Turn requested workflows into reusable scripts under `scripts/`.\n- Normalize script implementation to project conventions (`*.sh.ts` + shebang + helpers).\n- Capture successful ad-hoc command sequences as reusable script entrypoints.\n\n## Accepted inputs\n\nUse this skill when script requirements come from any of these sources:\n\n- User prompt only (goal and constraints)\n- Provided example script\n- Provided bash script or shell command sequence\n- Agent-summarized conversation context (for example, previously successful setup steps)\n\n## Output conventions\n\n- Primary scripts go in `scripts/` and use `*.sh.ts` naming.\n- Include shebang: `#!/usr/bin/env bun`.\n- Prefer shared helpers from `scripts/helpers/` instead of duplicating utility logic.\n- Default to explicit, readable command flow and fail fast on command errors.\n- For external docs scraping workflows, default output to split per-page `.ext.md` files and include an `index.ext.md` in the target directory.\n\n## Implementation workflow\n\n1. Identify script intent, inputs, and expected outputs from provided context.\n2. If input comes from troubleshooting history, separate successful steps from failed or diagnostic attempts.\n3. Exclude failed retries, dead-end commands, and one-off debugging probes from final reusable script logic.\n4. Choose script name and location under `scripts/`.\n5. Reuse or add helper utilities in `scripts/helpers/` when needed.\n6. Implement Bun-based script and run it once when safe to verify behavior.\n7. Update docs (`README.md` or `AGENTS.md`) when conventions or entrypoints change.\n\n## Context capture rules\n\n- When converting conversation history into a script, include only the final successful sequence.\n- Keep troubleshooting commands as optional notes in output, not in executable script flow.\n- If multiple working paths exist, prefer the shortest deterministic path.\n\n## Notes\n\n- Keep scripts idempotent where practical.\n- Avoid embedding secrets or environment-specific absolute paths.\n- If verification cannot be run safely, state exactly what should be executed by the user.\n",
                  "additions": 1,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771213653184,
              "end": 1771213653197
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_01ed53c7b565c90e0169929353c0688193b59240026d2a9edd"
            }
          },
          "id": "prt_c648f7f55001l8EHl5EOw2M63a",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f64e80015av8KUx0py3E3I"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "01f8645ac77206cd4c8e0eaf8f7b0785b84b356c",
          "cost": 0,
          "tokens": {
            "total": 84004,
            "input": 68868,
            "output": 288,
            "reasoning": 131,
            "cache": {
              "read": 14848,
              "write": 0
            }
          },
          "id": "prt_c648f84e3001576fItp5rNVjkA",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f64e80015av8KUx0py3E3I"
        },
        {
          "type": "patch",
          "hash": "64e5e8a1c27775cb731eda44342c3520ea98d4d9",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/skills/script-authoring/SKILL.md"
          ],
          "id": "prt_c648f8510001b7t44u14SnDOGD",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f64e80015av8KUx0py3E3I"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213653279,
          "completed": 1771213658734
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 84217,
          "input": 195,
          "output": 182,
          "reasoning": 10,
          "cache": {
            "read": 83840,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648f851f001FGJa6YakzXitIQ",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "01f8645ac77206cd4c8e0eaf8f7b0785b84b356c",
          "id": "prt_c648f8e35001WSI4pQ0vL6cICX",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f851f001FGJa6YakzXitIQ"
        },
        {
          "type": "reasoning",
          "text": "**Patching script creation command**",
          "metadata": {
            "openai": {
              "itemId": "rs_063812cb3b24d1d10169929357ee508195a7cb22903bd9f16d",
              "reasoningEncryptedContent": "gAAAAABpkpNYVdvTcRH9k2355DCG-hmy3LCv3ojJdUlx9FeUdXbRDCILq9-Q_u1M7ifDh7jp9tv1MNWagCGEMzn___H4nrYXWJ2aTInrJ_gk-odUTc_UaRyKyuckBh5x-LIVtYWj_wAjP7M2dbpF8YQ8SA73hsZKWwD1g9i5GRYvMkKdnHi_L-5mjrfwLiT29H9k-aZx2l4DCWGSNcgr8xbx4QSEGkqsJfyniXfVlaRxZj0W7Yl29OECSlr9o1VUDq388CgBIDkdHgY63c3ZiNqbA7Oae5KY6JXwWEQxYhE0CC9OurveJgyTiCDDSVAwey-tO_jtE8asHn87Q7R40mKR-Rm14fLLN_1_ddvDNtpho1sl1p4TtYPhACzmtiv58E74B5DLa9cCRs0rhy2Kdu-ckhHMZ2ykP4cyln6W8NlPV905flM5_PUWXVv54yWLyXWk4YhTaPcXhUtdPvbIxKu56BhvLez3xqaGMJ7d7X5g0SOAU_jQfh5NnqitjmmJ23RL8PMzffEPROUuJoSin-dOjQg6L3QA6LUBvx8DDSQ2XW2ECqhArzbZ-ubkeR1CVWAduEkLW3Sq-hclurEULHcaQd1M49We5HcMKm5ZPRqMJ0f8HqfSWs70yLE_yfsSaVRijJFbaa4McZkvrX5_2aVQY9hx0RNvtatrNB3My4mUGQSuD0itutTKYZ28zoZRwBeLIeKQVaOUaQb6OIzzlBUzhkoTlOWqhx3fED2UV0ua9YRKk8UVu0VBtDxKhmoYkL1fLk43pi1VMZWlJmmLPakTum2UNgYIubpGLd74g6V7RBc6M9JwOJ2pJp9MccVLExop0t4DK59CVB8u0c7GIVtZE7f1C_EdpKGyZcwXZic-65PzyGANWsI="
            }
          },
          "time": {
            "start": 1771213655984,
            "end": 1771213656551
          },
          "id": "prt_c648f8fb0001jfwrME92l86dTP",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f851f001FGJa6YakzXitIQ"
        },
        {
          "type": "tool",
          "callID": "call_X9U3tq4ECJBuSaN7Au0qWDem",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md\n@@\n 4. If input includes troubleshooting history, filter out failed/diagnostic steps and keep only confirmed working steps.\n 5. Keep scripts explicit, readable, and safe (no embedded secrets).\n+6. For external docs scraping workflows, output split per-page `.ext.md` files and an `index.ext.md` manifest.\n-6. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n+7. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM .opencode/commands/make_script.md",
            "title": "Success. Updated the following files:\nM .opencode/commands/make_script.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md\n@@ -19,9 +19,10 @@\n 2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n 3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.\n 4. If input includes troubleshooting history, filter out failed/diagnostic steps and keep only confirmed working steps.\n 5. Keep scripts explicit, readable, and safe (no embedded secrets).\n-6. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n+6. For external docs scraping workflows, output split per-page `.ext.md` files and an `index.ext.md` manifest.\n+7. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n \n Return:\n \n - New/updated script paths\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md",
                  "relativePath": ".opencode/commands/make_script.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md\n@@ -19,9 +19,10 @@\n 2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n 3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.\n 4. If input includes troubleshooting history, filter out failed/diagnostic steps and keep only confirmed working steps.\n 5. Keep scripts explicit, readable, and safe (no embedded secrets).\n-6. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n+6. For external docs scraping workflows, output split per-page `.ext.md` files and an `index.ext.md` manifest.\n+7. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n \n Return:\n \n - New/updated script paths\n",
                  "before": "---\ndescription: Create a new Bun shebang script from prompt/example/bash/context\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Create a reusable script under `scripts/` based on one of these input types:\n  - user prompt\n  - provided example script\n  - provided bash script/command sequence\n  - agent-summarized successful context from the current conversation\n\nProcess:\n\n1. Identify the source input type and extract required behavior.\n2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.\n4. If input includes troubleshooting history, filter out failed/diagnostic steps and keep only confirmed working steps.\n5. Keep scripts explicit, readable, and safe (no embedded secrets).\n6. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n\nReturn:\n\n- New/updated script paths\n- Helper paths (if any)\n- What source input was used (prompt/example/bash/context)\n- Any excluded failed/diagnostic steps (if applicable)\n- Verification command(s) run or exact manual verify steps\n",
                  "after": "---\ndescription: Create a new Bun shebang script from prompt/example/bash/context\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Create a reusable script under `scripts/` based on one of these input types:\n  - user prompt\n  - provided example script\n  - provided bash script/command sequence\n  - agent-summarized successful context from the current conversation\n\nProcess:\n\n1. Identify the source input type and extract required behavior.\n2. Implement a Bun shebang script in `scripts/` using `*.sh.ts` naming.\n3. Reuse or add helpers in `scripts/helpers/` when utility logic is needed.\n4. If input includes troubleshooting history, filter out failed/diagnostic steps and keep only confirmed working steps.\n5. Keep scripts explicit, readable, and safe (no embedded secrets).\n6. For external docs scraping workflows, output split per-page `.ext.md` files and an `index.ext.md` manifest.\n7. If conventions or entrypoints change, update `README.md` and/or `AGENTS.md`.\n\nReturn:\n\n- New/updated script paths\n- Helper paths (if any)\n- What source input was used (prompt/example/bash/context)\n- Any excluded failed/diagnostic steps (if applicable)\n- Verification command(s) run or exact manual verify steps\n",
                  "additions": 2,
                  "deletions": 1
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771213658631,
              "end": 1771213658647
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_063812cb3b24d1d1016992935882a88195b88f71b332fc6a95"
            }
          },
          "id": "prt_c648f91e9001BuIsP23dZw7OuK",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f851f001FGJa6YakzXitIQ"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "884c5d847b0f42bf3ae2baa116ba505664f03f34",
          "cost": 0,
          "tokens": {
            "total": 84217,
            "input": 195,
            "output": 182,
            "reasoning": 10,
            "cache": {
              "read": 83840,
              "write": 0
            }
          },
          "id": "prt_c648f9a3c001oFLrptuHn1iaZV",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f851f001FGJa6YakzXitIQ"
        },
        {
          "type": "patch",
          "hash": "01f8645ac77206cd4c8e0eaf8f7b0785b84b356c",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/commands/make_script.md"
          ],
          "id": "prt_c648f9a69001Oci2iSaIsKPoMj",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f851f001FGJa6YakzXitIQ"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213658741,
          "completed": 1771213663511
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 84383,
          "input": 149,
          "output": 138,
          "reasoning": 11,
          "cache": {
            "read": 84096,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648f9a74001dk06nOlgB5kgJT",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "884c5d847b0f42bf3ae2baa116ba505664f03f34",
          "id": "prt_c648fa3bd001cZJDAn4BIY8KSd",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f9a74001dk06nOlgB5kgJT"
        },
        {
          "type": "reasoning",
          "text": "**Considering patch for capture script**",
          "metadata": {
            "openai": {
              "itemId": "rs_0722082e921c7b21016992935d677c8195a762ed5607822c11",
              "reasoningEncryptedContent": "gAAAAABpkpNd8GqgxfLyNrBQfuxCQcEfoYmQhkK2Mr5z5LGVe5ET1oDX1IWkDVQ-8bdpSDjjPq0d1OD9QOmxkBwIa69p-IFiVCzo7OD2YmyJQZJz1Q7wPuUsnmZ7O8RanDs3iN__NqnIvyZjQ0ODIaqkuP68W-Rh4Cr5rsW7xKSodpgjU8Bs9Goq5s9UkSKIIZC-Ivazd4fLBkFCl2GVlcPMJ2vY-U1Cwuv-eoemvSEqfJYTQ1jhAZYEvOFberiUuMAtxiBcOdu4zTuXvImW7uCBJQjP8NimN02kW9W2UYetXhw9Quof-9n4H1LTPkUtpyiPlbM6-yW4xLq6s-5YNMzNqBkwqTvnN4-0Blh4o8TeOgwcVL888t0MhnL_os4_tZZTesUNv7C4g2l1xN7u84rlafGK-Zuk4L74iVo5E5ZeJF0Drn7cONXkAm6fdS2RO0M_GyQ6FQ7RouM0Oe5q_5UE7uzxwdkFkwVpP_-bq02whQGbIaXUMgSqv6tz7lb-8Sjhh4fBDynMWVsykcaw76DOGYvm2d3Qk4cuZfRBGnCTau-7v_rpP0jz0nJOd_G8kB13VD6pFCXwP4rLKYRvZQVutcZnAI3kbJKec6VpoFEGvU561JmuXAGNWRxUKJip-7B9c7SOkDL7Kch9OGqaU-Gy39XlenYzfPF5Is1GvRwBQtPhqLpCriIGDXrZ12T7KG5nPI_du1Pfh4jO1KDFN5j9w5uBHMhx80QUORSlmjX_fesKozdGqSKtLefNX7w2BBMI-_MmPL6YNrFpRn8jcD8FtPyD4Htb_uxy7H4lOqhqA4PJJdreAG5a9KdpLzqHuGK8KbLYaHIaAz60d9Arub75IG4IYaoP_IKeQVFu5OFa2yaqz8IxWiNYMHXreB61ujH77RRG0Ndq"
            }
          },
          "time": {
            "start": 1771213661496,
            "end": 1771213661928
          },
          "id": "prt_c648fa538001B5VTYYiWKkkSUF",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f9a74001dk06nOlgB5kgJT"
        },
        {
          "type": "tool",
          "callID": "call_58z8k9DF9r70gaTmTZJpAnJz",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md\n@@\n 5. Reuse helpers from `scripts/helpers/` and follow `*.sh.ts` + shebang conventions.\n 6. Add short usage notes and explicit verification steps in the response.\n+7. For external docs scraping workflows, emit split per-page `.ext.md` files and include an `index.ext.md` file.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM .opencode/commands/capture_script_from_context.md",
            "title": "Success. Updated the following files:\nM .opencode/commands/capture_script_from_context.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md\n@@ -17,8 +17,9 @@\n 3. Build the script using only `successful` steps required for deterministic execution.\n 4. Keep `failed` and `diagnostic` steps out of executable script logic.\n 5. Reuse helpers from `scripts/helpers/` and follow `*.sh.ts` + shebang conventions.\n 6. Add short usage notes and explicit verification steps in the response.\n+7. For external docs scraping workflows, emit split per-page `.ext.md` files and include an `index.ext.md` file.\n \n Return:\n \n - Script and helper paths added/updated\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md",
                  "relativePath": ".opencode/commands/capture_script_from_context.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md\n@@ -17,8 +17,9 @@\n 3. Build the script using only `successful` steps required for deterministic execution.\n 4. Keep `failed` and `diagnostic` steps out of executable script logic.\n 5. Reuse helpers from `scripts/helpers/` and follow `*.sh.ts` + shebang conventions.\n 6. Add short usage notes and explicit verification steps in the response.\n+7. For external docs scraping workflows, emit split per-page `.ext.md` files and include an `index.ext.md` file.\n \n Return:\n \n - Script and helper paths added/updated\n",
                  "before": "---\ndescription: Convert successful conversation steps into a reusable script\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Turn a successful sequence from this conversation into a reusable Bun script in `scripts/`.\n- Include only the final working flow; do not include troubleshooting attempts.\n\nProcess:\n\n1. Summarize candidate steps from conversation history.\n2. Mark each as one of: `successful`, `failed`, `diagnostic`, or `optional`.\n3. Build the script using only `successful` steps required for deterministic execution.\n4. Keep `failed` and `diagnostic` steps out of executable script logic.\n5. Reuse helpers from `scripts/helpers/` and follow `*.sh.ts` + shebang conventions.\n6. Add short usage notes and explicit verification steps in the response.\n\nReturn:\n\n- Script and helper paths added/updated\n- Included successful steps\n- Excluded failed/diagnostic steps and why\n- Verification command(s) run (or manual verification instructions)\n",
                  "after": "---\ndescription: Convert successful conversation steps into a reusable script\nagent: build\n---\n\nUse the `script-authoring` skill from `.opencode/skills/script-authoring/SKILL.md`.\n\nGoal:\n\n- Turn a successful sequence from this conversation into a reusable Bun script in `scripts/`.\n- Include only the final working flow; do not include troubleshooting attempts.\n\nProcess:\n\n1. Summarize candidate steps from conversation history.\n2. Mark each as one of: `successful`, `failed`, `diagnostic`, or `optional`.\n3. Build the script using only `successful` steps required for deterministic execution.\n4. Keep `failed` and `diagnostic` steps out of executable script logic.\n5. Reuse helpers from `scripts/helpers/` and follow `*.sh.ts` + shebang conventions.\n6. Add short usage notes and explicit verification steps in the response.\n7. For external docs scraping workflows, emit split per-page `.ext.md` files and include an `index.ext.md` file.\n\nReturn:\n\n- Script and helper paths added/updated\n- Included successful steps\n- Excluded failed/diagnostic steps and why\n- Verification command(s) run (or manual verification instructions)\n",
                  "additions": 1,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771213663409,
              "end": 1771213663427
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0722082e921c7b21016992935de1a88195aea5ec36c59dbceb"
            }
          },
          "id": "prt_c648fa6e90016kpYS6BhK96LnP",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f9a74001dk06nOlgB5kgJT"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "175627511420aa4fc0c4f0b819fd175d2d5b5ed9",
          "cost": 0,
          "tokens": {
            "total": 84383,
            "input": 149,
            "output": 138,
            "reasoning": 11,
            "cache": {
              "read": 84096,
              "write": 0
            }
          },
          "id": "prt_c648face4001RFhm7qfigubsjx",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f9a74001dk06nOlgB5kgJT"
        },
        {
          "type": "patch",
          "hash": "884c5d847b0f42bf3ae2baa116ba505664f03f34",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/commands/capture_script_from_context.md"
          ],
          "id": "prt_c648fad120018v3A1mRReKYzD7",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648f9a74001dk06nOlgB5kgJT"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213663518,
          "completed": 1771213667953
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 84497,
          "input": 189,
          "output": 84,
          "reasoning": 51,
          "cache": {
            "read": 84224,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648fad1e001cfPNYy59OeiiWc",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "175627511420aa4fc0c4f0b819fd175d2d5b5ed9",
          "id": "prt_c648fb6c6001wTz20chltRuiIs",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648fad1e001cfPNYy59OeiiWc"
        },
        {
          "type": "reasoning",
          "text": "**Verifying script executability**",
          "metadata": {
            "openai": {
              "itemId": "rs_01d6e9e88ff9e47901699293623de88190a8b6389bfff9ba5c",
              "reasoningEncryptedContent": "gAAAAABpkpNjybNO-w3lep7dNbOK2HHmZ6RAFwH6Eq-ywRBgLCV_0Y8yKV68j0buE95HdzcRgw4AuqRZ33NRFCDTt8hWfHarXHtlo3P6hHNZBc3ROf9Q6x0deYmuhnPTo9LUF8csIEXVk9jh5KwI0z4KtDu2vyQYA0DpldqWlq1SXZSR96UKCHjFTtieJGluU6Pex82WOFHbJrTcjqs1NVLZ4xigXsWlC9VNBekNMcP7xtiQ4cHnabs1G6PboruetI3giIIIluGCivsHWUcdz5Hs5j6dP4xedNScgGqFiZsfL9tNpdmcssdO2T_iLeC6AhMr40-34m_hfLGKkotJVnu7gvrVIty2JfhnNU9jnOuslBhAvatkY72G10diQIZQmH_HQOrf2Fw8bILp2Tr3bFoC_3tLjfLVmyw-76JgbXo6tp1npVKclMguRqbpgAIbO5tyuu4eFQs_lQrZFThr5iJU8hDtqDaQOkcql74k42ALScUx7wokaspmRXJYEL0kQHNnAXzVRjbh2D9yN_A6jqGjQaX6QFeqEbdwgxD8Hn5PZK8IHAdNwc4fEAcNNIEnUyEsmtIpCtAhFBmb-Ub5m6qGEVLhUsyMhuP0sM6ZYBvUQIg8gGA8X8A50C51LQUxe3IJtpgKITONESDGUKsWhMAEfU17Nq0Iqj0gCJLYXORYD8rYvHOhBoaDvnzTSS3fnCW5SIQz1yDZMVFL8AisNbXFxdQ3X-9S6kDbeUvWtHXlrGrQr-meHLJPzQ9JVM9SuudiXC2lQpDN8qHedWAwEktDE3ACfuQ0AduoiTh4pCGGMNVmglcxIfIVHSXA2UYytNu-kB7F3H13wpoJ0ILPdvfj7GN05cTHXERmjGSU938yG4hRYpoPVQsZD8jeWYN_CCZ2YIYskCxnu0ncF5IYgJhsHUAM9BAPfdV3HlQiFYbnFJY-lQdxmw4PW6i9Qm3k1m0kQs0zdi_Pi4MW53ecj1R7NQLcqhlQLTYykxeoxhx9KAo6StJFoj01csqh4ujsG1Kn1i2zEQ9rA9q3y47hEHRWKK1X9-vZsx7yNhu59VKRzGNkPssTkbwHbcKlsQ02-1kDNrYrp1tJgfucw4MaKFGA9oJlM1sSid8COJtF41UykdOXCflyAM4TLQ4NRL4UVg0K5F-qCXp8IG2s3HGkxxKSzIRGSnGTJQ=="
            }
          },
          "time": {
            "start": 1771213666279,
            "end": 1771213667794
          },
          "id": "prt_c648fb7e7001mjSJpGnEjLhTRi",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648fad1e001cfPNYy59OeiiWc"
        },
        {
          "type": "tool",
          "callID": "call_UEWeUFsscB99LoSweuW1zNHk",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "ls \"scripts\"",
              "description": "Verify scripts directory before chmod and run"
            },
            "output": "helpers\ninstall.sh.ts\nproto_install.sh.ts\nscrape_moon_docs.sh.ts\n",
            "title": "Verify scripts directory before chmod and run",
            "metadata": {
              "output": "helpers\ninstall.sh.ts\nproto_install.sh.ts\nscrape_moon_docs.sh.ts\n",
              "exit": 0,
              "description": "Verify scripts directory before chmod and run",
              "truncated": false
            },
            "time": {
              "start": 1771213667853,
              "end": 1771213667869
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_01d6e9e88ff9e4790169929363a7c081909fda546f51a66c27"
            }
          },
          "id": "prt_c648fbdd3001mnDPk5GNIDS0VS",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648fad1e001cfPNYy59OeiiWc"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "175627511420aa4fc0c4f0b819fd175d2d5b5ed9",
          "cost": 0,
          "tokens": {
            "total": 84497,
            "input": 189,
            "output": 84,
            "reasoning": 51,
            "cache": {
              "read": 84224,
              "write": 0
            }
          },
          "id": "prt_c648fbe44001QERhFm7mLocyVF",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648fad1e001cfPNYy59OeiiWc"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213667961,
          "completed": 1771213682641
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 84606,
          "input": 175,
          "output": 79,
          "reasoning": 17,
          "cache": {
            "read": 84352,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648fbe79001VMF2XgU6ohXv1E",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "175627511420aa4fc0c4f0b819fd175d2d5b5ed9",
          "id": "prt_c648fc737001TOvIrsPZvf11tR",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648fbe79001VMF2XgU6ohXv1E"
        },
        {
          "type": "reasoning",
          "text": "**Running script with chmod**",
          "metadata": {
            "openai": {
              "itemId": "rs_0fbf78a91b1338e101699293667b888190b24803458125d3b5",
              "reasoningEncryptedContent": "gAAAAABpkpNnGkQlzRnofguvckEjL88FRtbM-mQmpahVI4ljKKuedMVaASbjP40Sh1UdSy8nsdHRC-MszNGrdzSxwLyWUyd6IZeRbe09XOnZT4XXzsO81atVwENAxtUTTTAvMXh_LacFcFNvh2TlxonWQdJwsIJJm-irPteWu4S6_sc6-k3L_7tkzxB6k9aIkjOs8zFHcehzLs5c3Ppi4aRqCs3SGgLuGQcOVgd8wSU5Zt2KvajhcYReG8KO0XjBujfOFpBHuTX7gBk7smqAPLdoO8Bg8_vNahryti4jta2yD4Fu3rYJMjAY2bJaI22VNP-kIYLXYttZQ9QfY0uqGwEypabu0QmtJHY9N7NBrI1JS3g2Ah_lU3Cf5nv6XxG3J2RPSM-22PDOZdv9ojaVhbaiP52M13mT2vinT0RyDc9iMn6Pj6INvrn2Dvu8Pkk0bhjo1nqrtp0xTRhoHA317yr1H7lE-orfxN25dl5vP7_NDCNDyaiij-nr4Q8ZV_R561_FMteucEfs61ZMcLW2QJf_clgEZamMKAhTn9V7WMUcmH89Imh0LeFNpRIaW_CAm6MTMg3dPQGL3zlBp90HIpFipGzWRp3NbQPbyEZ4TpbrjsoV-YKMPqTE5etQh2LACq7BQ8R0bxhFJ8lveNt78fw30b20mq-OPhFKRTB_VrvipZVjSMDnCPiMvbxPt0-il5tdHEUtrGjVAN5rE4GYSHiNKtCZAH_3lWXrFUPKw5hEMbAQzpcuBqGr1Rx5DckRmRjcMGe5VOwKI9O1PTLeFFE0rb1b8dJGUDh8KMGC7TAPdNyN2mjbSsh2AUcIuqXUnAAJfOMD6JULyme9YKyO1KmVFI1R5tLV-jjkeHN9C6JC6QHnsEp71RIe6pg8vrB3pHggJaEmVqNGa2AV96Jq0wzpsVMHAXjqKg=="
            }
          },
          "time": {
            "start": 1771213670629,
            "end": 1771213671132
          },
          "id": "prt_c648fc8e5001Qa9DJHyFT2zWmq",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648fbe79001VMF2XgU6ohXv1E"
        },
        {
          "type": "tool",
          "callID": "call_ZnQwyLqA6agNmP3vJkmCswUO",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "chmod +x \"scripts/scrape_moon_docs.sh.ts\" && bun \"scripts/scrape_moon_docs.sh.ts\"",
              "description": "Regenerate moon docs as split page files",
              "timeout": 600000
            },
            "output": "Docs // Scrape // 1/171 https://moonrepo.dev/docs\nDocs // Scrape // 2/171 https://moonrepo.dev/docs/cheat-sheet\nDocs // Scrape // 3/171 https://moonrepo.dev/docs/commands\nDocs // Scrape // 4/171 https://moonrepo.dev/docs/commands/action-graph\nDocs // Scrape // 5/171 https://moonrepo.dev/docs/commands/bin\nDocs // Scrape // 6/171 https://moonrepo.dev/docs/commands/check\nDocs // Scrape // 7/171 https://moonrepo.dev/docs/commands/ci\nDocs // Scrape // 8/171 https://moonrepo.dev/docs/commands/clean\nDocs // Scrape // 9/171 https://moonrepo.dev/docs/commands/completions\nDocs // Scrape // 10/171 https://moonrepo.dev/docs/commands/docker\nDocs // Scrape // 11/171 https://moonrepo.dev/docs/commands/docker/file\nDocs // Scrape // 12/171 https://moonrepo.dev/docs/commands/docker/prune\nDocs // Scrape // 13/171 https://moonrepo.dev/docs/commands/docker/scaffold\nDocs // Scrape // 14/171 https://moonrepo.dev/docs/commands/docker/setup\nDocs // Scrape // 15/171 https://moonrepo.dev/docs/commands/exec\nDocs // Scrape // 16/171 https://moonrepo.dev/docs/commands/ext\nDocs // Scrape // 17/171 https://moonrepo.dev/docs/commands/extension\nDocs // Scrape // 18/171 https://moonrepo.dev/docs/commands/extension/add\nDocs // Scrape // 19/171 https://moonrepo.dev/docs/commands/extension/info\nDocs // Scrape // 20/171 https://moonrepo.dev/docs/commands/generate\nDocs // Scrape // 21/171 https://moonrepo.dev/docs/commands/hash\nDocs // Scrape // 22/171 https://moonrepo.dev/docs/commands/init\nDocs // Scrape // 23/171 https://moonrepo.dev/docs/commands/mcp\nDocs // Scrape // 24/171 https://moonrepo.dev/docs/commands/overview\nDocs // Scrape // 25/171 https://moonrepo.dev/docs/commands/project\nDocs // Scrape // 26/171 https://moonrepo.dev/docs/commands/project-graph\nDocs // Scrape // 27/171 https://moonrepo.dev/docs/commands/projects\nDocs // Scrape // 28/171 https://moonrepo.dev/docs/commands/query\nDocs // Scrape // 29/171 https://moonrepo.dev/docs/commands/query/affected\nDocs // Scrape // 30/171 https://moonrepo.dev/docs/commands/query/changed-files\nDocs // Scrape // 31/171 https://moonrepo.dev/docs/commands/query/projects\nDocs // Scrape // 32/171 https://moonrepo.dev/docs/commands/query/tasks\nDocs // Scrape // 33/171 https://moonrepo.dev/docs/commands/run\nDocs // Scrape // 34/171 https://moonrepo.dev/docs/commands/setup\nDocs // Scrape // 35/171 https://moonrepo.dev/docs/commands/sync\nDocs // Scrape // 36/171 https://moonrepo.dev/docs/commands/sync/code-owners\nDocs // Scrape // 37/171 https://moonrepo.dev/docs/commands/sync/config-schemas\nDocs // Scrape // 38/171 https://moonrepo.dev/docs/commands/sync/projects\nDocs // Scrape // 39/171 https://moonrepo.dev/docs/commands/sync/vcs-hooks\nDocs // Scrape // 40/171 https://moonrepo.dev/docs/commands/task\nDocs // Scrape // 41/171 https://moonrepo.dev/docs/commands/task-graph\nDocs // Scrape // 42/171 https://moonrepo.dev/docs/commands/tasks\nDocs // Scrape // 43/171 https://moonrepo.dev/docs/commands/teardown\nDocs // Scrape // 44/171 https://moonrepo.dev/docs/commands/template\nDocs // Scrape // 45/171 https://moonrepo.dev/docs/commands/templates\nDocs // Scrape // 46/171 https://moonrepo.dev/docs/commands/toolchain\nDocs // Scrape // 47/171 https://moonrepo.dev/docs/commands/toolchain/add\nDocs // Scrape // 48/171 https://moonrepo.dev/docs/commands/toolchain/info\nDocs // Scrape // 49/171 https://moonrepo.dev/docs/commands/upgrade\nDocs // Scrape // 50/171 https://moonrepo.dev/docs/comparison\nDocs // Scrape // 51/171 https://moonrepo.dev/docs/concepts\nDocs // Scrape // 52/171 https://moonrepo.dev/docs/concepts/cache\nDocs // Scrape // 53/171 https://moonrepo.dev/docs/concepts/file-group\nDocs // Scrape // 54/171 https://moonrepo.dev/docs/concepts/file-pattern\nDocs // Scrape // 55/171 https://moonrepo.dev/docs/concepts/project\nDocs // Scrape // 56/171 https://moonrepo.dev/docs/concepts/query-lang\nDocs // Scrape // 57/171 https://moonrepo.dev/docs/concepts/target\nDocs // Scrape // 58/171 https://moonrepo.dev/docs/concepts/task\nDocs // Scrape // 59/171 https://moonrepo.dev/docs/concepts/task-inheritance\nDocs // Scrape // 60/171 https://moonrepo.dev/docs/concepts/token\nDocs // Scrape // 61/171 https://moonrepo.dev/docs/concepts/toolchain\nDocs // Scrape // 62/171 https://moonrepo.dev/docs/concepts/workspace\nDocs // Scrape // 63/171 https://moonrepo.dev/docs/config\nDocs // Scrape // 64/171 https://moonrepo.dev/docs/config/extensions\nDocs // Scrape // 65/171 https://moonrepo.dev/docs/config/overview\nDocs // Scrape // 66/171 https://moonrepo.dev/docs/config/project\nDocs // Scrape // 67/171 https://moonrepo.dev/docs/config/tasks\nDocs // Scrape // 68/171 https://moonrepo.dev/docs/config/template\nDocs // Scrape // 69/171 https://moonrepo.dev/docs/config/toolchain\nDocs // Scrape // 70/171 https://moonrepo.dev/docs/config/workspace\nDocs // Scrape // 71/171 https://moonrepo.dev/docs/create-project\nDocs // Scrape // 72/171 https://moonrepo.dev/docs/create-task\nDocs // Scrape // 73/171 https://moonrepo.dev/docs/editors\nDocs // Scrape // 74/171 https://moonrepo.dev/docs/editors/vscode\nDocs // Scrape // 75/171 https://moonrepo.dev/docs/faq\nDocs // Scrape // 76/171 https://moonrepo.dev/docs/guides/ci\nDocs // Scrape // 77/171 https://moonrepo.dev/docs/guides/codegen\nDocs // Scrape // 78/171 https://moonrepo.dev/docs/guides/codeowners\nDocs // Scrape // 79/171 https://moonrepo.dev/docs/guides/debug-task\nDocs // Scrape // 80/171 https://moonrepo.dev/docs/guides/docker\nDocs // Scrape // 81/171 https://moonrepo.dev/docs/guides/examples/angular\nDocs // Scrape // 82/171 https://moonrepo.dev/docs/guides/examples/astro\nDocs // Scrape // 83/171 https://moonrepo.dev/docs/guides/examples/eslint\nDocs // Scrape // 84/171 https://moonrepo.dev/docs/guides/examples/jest\nDocs // Scrape // 85/171 https://moonrepo.dev/docs/guides/examples/nest\nDocs // Scrape // 86/171 https://moonrepo.dev/docs/guides/examples/next\nDocs // Scrape // 87/171 https://moonrepo.dev/docs/guides/examples/nuxt\nDocs // Scrape // 88/171 https://moonrepo.dev/docs/guides/examples/packemon\nDocs // Scrape // 89/171 https://moonrepo.dev/docs/guides/examples/prettier\nDocs // Scrape // 90/171 https://moonrepo.dev/docs/guides/examples/react\nDocs // Scrape // 91/171 https://moonrepo.dev/docs/guides/examples/remix\nDocs // Scrape // 92/171 https://moonrepo.dev/docs/guides/examples/solid\nDocs // Scrape // 93/171 https://moonrepo.dev/docs/guides/examples/storybook\nDocs // Scrape // 94/171 https://moonrepo.dev/docs/guides/examples/sveltekit\nDocs // Scrape // 95/171 https://moonrepo.dev/docs/guides/examples/typescript\nDocs // Scrape // 96/171 https://moonrepo.dev/docs/guides/examples/vite\nDocs // Scrape // 97/171 https://moonrepo.dev/docs/guides/examples/vue\nDocs // Scrape // 98/171 https://moonrepo.dev/docs/guides/extensions\nDocs // Scrape // 99/171 https://moonrepo.dev/docs/guides/javascript/bun-handbook\nDocs // Scrape // 100/171 https://moonrepo.dev/docs/guides/javascript/deno-handbook\nDocs // Scrape // 101/171 https://moonrepo.dev/docs/guides/javascript/node-handbook\nDocs // Scrape // 102/171 https://moonrepo.dev/docs/guides/javascript/typescript-eslint\nDocs // Scrape // 103/171 https://moonrepo.dev/docs/guides/javascript/typescript-project-refs\nDocs // Scrape // 104/171 https://moonrepo.dev/docs/guides/mcp\nDocs // Scrape // 105/171 https://moonrepo.dev/docs/guides/node/examples\nDocs // Scrape // 106/171 https://moonrepo.dev/docs/guides/notifications\nDocs // Scrape // 107/171 https://moonrepo.dev/docs/guides/offline-mode\nDocs // Scrape // 108/171 https://moonrepo.dev/docs/guides/open-source\nDocs // Scrape // 109/171 https://moonrepo.dev/docs/guides/pkl-config\nDocs // Scrape // 110/171 https://moonrepo.dev/docs/guides/profile\nDocs // Scrape // 111/171 https://moonrepo.dev/docs/guides/remote-cache\nDocs // Scrape // 112/171 https://moonrepo.dev/docs/guides/root-project\nDocs // Scrape // 113/171 https://moonrepo.dev/docs/guides/rust/handbook\nDocs // Scrape // 114/171 https://moonrepo.dev/docs/guides/sharing-config\nDocs // Scrape // 115/171 https://moonrepo.dev/docs/guides/vcs-hooks\nDocs // Scrape // 116/171 https://moonrepo.dev/docs/guides/wasm-plugins\nDocs // Scrape // 117/171 https://moonrepo.dev/docs/guides/webhooks\nDocs // Scrape // 118/171 https://moonrepo.dev/docs/how-it-works\nDocs // Scrape // 119/171 https://moonrepo.dev/docs/how-it-works/action-graph\nDocs // Scrape // 120/171 https://moonrepo.dev/docs/how-it-works/languages\nDocs // Scrape // 121/171 https://moonrepo.dev/docs/how-it-works/project-graph\nDocs // Scrape // 122/171 https://moonrepo.dev/docs/how-it-works/task-graph\nDocs // Scrape // 123/171 https://moonrepo.dev/docs/install\nDocs // Scrape // 124/171 https://moonrepo.dev/docs/migrate-to-moon\nDocs // Scrape // 125/171 https://moonrepo.dev/docs/migrate/2.0\nDocs // Scrape // 126/171 https://moonrepo.dev/docs/proto\nDocs // Scrape // 127/171 https://moonrepo.dev/docs/proto/commands/activate\nDocs // Scrape // 128/171 https://moonrepo.dev/docs/proto/commands/alias\nDocs // Scrape // 129/171 https://moonrepo.dev/docs/proto/commands/bin\nDocs // Scrape // 130/171 https://moonrepo.dev/docs/proto/commands/clean\nDocs // Scrape // 131/171 https://moonrepo.dev/docs/proto/commands/completions\nDocs // Scrape // 132/171 https://moonrepo.dev/docs/proto/commands/debug\nDocs // Scrape // 133/171 https://moonrepo.dev/docs/proto/commands/debug/config\nDocs // Scrape // 134/171 https://moonrepo.dev/docs/proto/commands/debug/env\nDocs // Scrape // 135/171 https://moonrepo.dev/docs/proto/commands/diagnose\nDocs // Scrape // 136/171 https://moonrepo.dev/docs/proto/commands/exec\nDocs // Scrape // 137/171 https://moonrepo.dev/docs/proto/commands/install\nDocs // Scrape // 138/171 https://moonrepo.dev/docs/proto/commands/list\nDocs // Scrape // 139/171 https://moonrepo.dev/docs/proto/commands/list-remote\nDocs // Scrape // 140/171 https://moonrepo.dev/docs/proto/commands/outdated\nDocs // Scrape // 141/171 https://moonrepo.dev/docs/proto/commands/pin\nDocs // Scrape // 142/171 https://moonrepo.dev/docs/proto/commands/plugin\nDocs // Scrape // 143/171 https://moonrepo.dev/docs/proto/commands/plugin/add\nDocs // Scrape // 144/171 https://moonrepo.dev/docs/proto/commands/plugin/info\nDocs // Scrape // 145/171 https://moonrepo.dev/docs/proto/commands/plugin/list\nDocs // Scrape // 146/171 https://moonrepo.dev/docs/proto/commands/plugin/remove\nDocs // Scrape // 147/171 https://moonrepo.dev/docs/proto/commands/plugin/search\nDocs // Scrape // 148/171 https://moonrepo.dev/docs/proto/commands/regen\nDocs // Scrape // 149/171 https://moonrepo.dev/docs/proto/commands/run\nDocs // Scrape // 150/171 https://moonrepo.dev/docs/proto/commands/setup\nDocs // Scrape // 151/171 https://moonrepo.dev/docs/proto/commands/status\nDocs // Scrape // 152/171 https://moonrepo.dev/docs/proto/commands/unalias\nDocs // Scrape // 153/171 https://moonrepo.dev/docs/proto/commands/uninstall\nDocs // Scrape // 154/171 https://moonrepo.dev/docs/proto/commands/unpin\nDocs // Scrape // 155/171 https://moonrepo.dev/docs/proto/commands/upgrade\nDocs // Scrape // 156/171 https://moonrepo.dev/docs/proto/commands/use\nDocs // Scrape // 157/171 https://moonrepo.dev/docs/proto/commands/versions\nDocs // Scrape // 158/171 https://moonrepo.dev/docs/proto/config\nDocs // Scrape // 159/171 https://moonrepo.dev/docs/proto/detection\nDocs // Scrape // 160/171 https://moonrepo.dev/docs/proto/faq\nDocs // Scrape // 161/171 https://moonrepo.dev/docs/proto/install\nDocs // Scrape // 162/171 https://moonrepo.dev/docs/proto/non-wasm-plugin\nDocs // Scrape // 163/171 https://moonrepo.dev/docs/proto/plugins\nDocs // Scrape // 164/171 https://moonrepo.dev/docs/proto/tool-spec\nDocs // Scrape // 165/171 https://moonrepo.dev/docs/proto/tools\nDocs // Scrape // 166/171 https://moonrepo.dev/docs/proto/wasm-plugin\nDocs // Scrape // 167/171 https://moonrepo.dev/docs/proto/workflows\nDocs // Scrape // 168/171 https://moonrepo.dev/docs/run-task\nDocs // Scrape // 169/171 https://moonrepo.dev/docs/setup-toolchain\nDocs // Scrape // 170/171 https://moonrepo.dev/docs/setup-workspace\nDocs // Scrape // 171/171 https://moonrepo.dev/docs/terminology\nDocs // Scrape // Wrote split external docs (pages=171,ok=171,failed=0,dir=/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo)\n",
            "title": "Regenerate moon docs as split page files",
            "metadata": {
              "output": "Docs // Scrape // 1/171 https://moonrepo.dev/docs\nDocs // Scrape // 2/171 https://moonrepo.dev/docs/cheat-sheet\nDocs // Scrape // 3/171 https://moonrepo.dev/docs/commands\nDocs // Scrape // 4/171 https://moonrepo.dev/docs/commands/action-graph\nDocs // Scrape // 5/171 https://moonrepo.dev/docs/commands/bin\nDocs // Scrape // 6/171 https://moonrepo.dev/docs/commands/check\nDocs // Scrape // 7/171 https://moonrepo.dev/docs/commands/ci\nDocs // Scrape // 8/171 https://moonrepo.dev/docs/commands/clean\nDocs // Scrape // 9/171 https://moonrepo.dev/docs/commands/completions\nDocs // Scrape // 10/171 https://moonrepo.dev/docs/commands/docker\nDocs // Scrape // 11/171 https://moonrepo.dev/docs/commands/docker/file\nDocs // Scrape // 12/171 https://moonrepo.dev/docs/commands/docker/prune\nDocs // Scrape // 13/171 https://moonrepo.dev/docs/commands/docker/scaffold\nDocs // Scrape // 14/171 https://moonrepo.dev/docs/commands/docker/setup\nDocs // Scrape // 15/171 https://moonrepo.dev/docs/commands/exec\nDocs // Scrape // 16/171 https://moonrepo.dev/docs/commands/ext\nDocs // Scrape // 17/171 https://moonrepo.dev/docs/commands/extension\nDocs // Scrape // 18/171 https://moonrepo.dev/docs/commands/extension/add\nDocs // Scrape // 19/171 https://moonrepo.dev/docs/commands/extension/info\nDocs // Scrape // 20/171 https://moonrepo.dev/docs/commands/generate\nDocs // Scrape // 21/171 https://moonrepo.dev/docs/commands/hash\nDocs // Scrape // 22/171 https://moonrepo.dev/docs/commands/init\nDocs // Scrape // 23/171 https://moonrepo.dev/docs/commands/mcp\nDocs // Scrape // 24/171 https://moonrepo.dev/docs/commands/overview\nDocs // Scrape // 25/171 https://moonrepo.dev/docs/commands/project\nDocs // Scrape // 26/171 https://moonrepo.dev/docs/commands/project-graph\nDocs // Scrape // 27/171 https://moonrepo.dev/docs/commands/projects\nDocs // Scrape // 28/171 https://moonrepo.dev/docs/commands/query\nDocs // Scrape // 29/171 https://moonrepo.dev/docs/commands/query/affected\nDocs // Scrape // 30/171 https://moonrepo.dev/docs/commands/query/changed-files\nDocs // Scrape // 31/171 https://moonrepo.dev/docs/commands/query/projects\nDocs // Scrape // 32/171 https://moonrepo.dev/docs/commands/query/tasks\nDocs // Scrape // 33/171 https://moonrepo.dev/docs/commands/run\nDocs // Scrape // 34/171 https://moonrepo.dev/docs/commands/setup\nDocs // Scrape // 35/171 https://moonrepo.dev/docs/commands/sync\nDocs // Scrape // 36/171 https://moonrepo.dev/docs/commands/sync/code-owners\nDocs // Scrape // 37/171 https://moonrepo.dev/docs/commands/sync/config-schemas\nDocs // Scrape // 38/171 https://moonrepo.dev/docs/commands/sync/projects\nDocs // Scrape // 39/171 https://moonrepo.dev/docs/commands/sync/vcs-hooks\nDocs // Scrape // 40/171 https://moonrepo.dev/docs/commands/task\nDocs // Scrape // 41/171 https://moonrepo.dev/docs/commands/task-graph\nDocs // Scrape // 42/171 https://moonrepo.dev/docs/commands/tasks\nDocs // Scrape // 43/171 https://moonrepo.dev/docs/commands/teardown\nDocs // Scrape // 44/171 https://moonrepo.dev/docs/commands/template\nDocs // Scrape // 45/171 https://moonrepo.dev/docs/commands/templates\nDocs // Scrape // 46/171 https://moonrepo.dev/docs/commands/toolchain\nDocs // Scrape // 47/171 https://moonrepo.dev/docs/commands/toolchain/add\nDocs // Scrape // 48/171 https://moonrepo.dev/docs/commands/toolchain/info\nDocs // Scrape // 49/171 https://moonrepo.dev/docs/commands/upgrade\nDocs // Scrape // 50/171 https://moonrepo.dev/docs/comparison\nDocs // Scrape // 51/171 https://moonrepo.dev/docs/concepts\nDocs // Scrape // 52/171 https://moonrepo.dev/docs/concepts/cache\nDocs // Scrape // 53/171 https://moonrepo.dev/docs/concepts/file-group\nDocs // Scrape // 54/171 https://moonrepo.dev/docs/concepts/file-pattern\nDocs // Scrape // 55/171 https://moonrepo.dev/docs/concepts/project\nDocs // Scrape // 56/171 https://moonrepo.dev/docs/concepts/query-lang\nDocs // Scrape // 57/171 https://moonrepo.dev/docs/concepts/target\nDocs // Scrape // 58/171 https://moonrepo.dev/docs/concepts/task\nDocs // Scrape // 59/171 https://moonrepo.dev/docs/concepts/task-inheritance\nDocs // Scrape // 60/171 https://moonrepo.dev/docs/concepts/token\nDocs // Scrape // 61/171 https://moonrepo.dev/docs/concepts/toolchain\nDocs // Scrape // 62/171 https://moonrepo.dev/docs/concepts/workspace\nDocs // Scrape // 63/171 https://moonrepo.dev/docs/config\nDocs // Scrape // 64/171 https://moonrepo.dev/docs/config/extensions\nDocs // Scrape // 65/171 https://moonrepo.dev/docs/config/overview\nDocs // Scrape // 66/171 https://moonrepo.dev/docs/config/project\nDocs // Scrape // 67/171 https://moonrepo.dev/docs/config/tasks\nDocs // Scrape // 68/171 https://moonrepo.dev/docs/config/template\nDocs // Scrape // 69/171 https://moonrepo.dev/docs/config/toolchain\nDocs // Scrape // 70/171 https://moonrepo.dev/docs/config/workspace\nDocs // Scrape // 71/171 https://moonrepo.dev/docs/create-project\nDocs // Scrape // 72/171 https://moonrepo.dev/docs/create-task\nDocs // Scrape // 73/171 https://moonrepo.dev/docs/editors\nDocs // Scrape // 74/171 https://moonrepo.dev/docs/editors/vscode\nDocs // Scrape // 75/171 https://moonrepo.dev/docs/faq\nDocs // Scrape // 76/171 https://moonrepo.dev/docs/guides/ci\nDocs // Scrape // 77/171 https://moonrepo.dev/docs/guides/codegen\nDocs // Scrape // 78/171 https://moonrepo.dev/docs/guides/codeowners\nDocs // Scrape // 79/171 https://moonrepo.dev/docs/guides/debug-task\nDocs // Scrape // 80/171 https://moonrepo.dev/docs/guides/docker\nDocs // Scrape // 81/171 https://moonrepo.dev/docs/guides/examples/angular\nDocs // Scrape // 82/171 https://moonrepo.dev/docs/guides/examples/astro\nDocs // Scrape // 83/171 https://moonrepo.dev/docs/guides/examples/eslint\nDocs // Scrape // 84/171 https://moonrepo.dev/docs/guides/examples/jest\nDocs // Scrape // 85/171 https://moonrepo.dev/docs/guides/examples/nest\nDocs // Scrape // 86/171 https://moonrepo.dev/docs/guides/examples/next\nDocs // Scrape // 87/171 https://moonrepo.dev/docs/guides/examples/nuxt\nDocs // Scrape // 88/171 https://moonrepo.dev/docs/guides/examples/packemon\nDocs // Scrape // 89/171 https://moonrepo.dev/docs/guides/examples/prettier\nDocs // Scrape // 90/171 https://moonrepo.dev/docs/guides/examples/react\nDocs // Scrape // 91/171 https://moonrepo.dev/docs/guides/examples/remix\nDocs // Scrape // 92/171 https://moonrepo.dev/docs/guides/examples/solid\nDocs // Scrape // 93/171 https://moonrepo.dev/docs/guides/examples/storybook\nDocs // Scrape // 94/171 https://moonrepo.dev/docs/guides/examples/sveltekit\nDocs // Scrape // 95/171 https://moonrepo.dev/docs/guides/examples/typescript\nDocs // Scrape // 96/171 https://moonrepo.dev/docs/guides/examples/vite\nDocs // Scrape // 97/171 https://moonrepo.dev/docs/guides/examples/vue\nDocs // Scrape // 98/171 https://moonrepo.dev/docs/guides/extensions\nDocs // Scrape // 99/171 https://moonrepo.dev/docs/guides/javascript/bun-handbook\nDocs // Scrape // 100/171 https://moonrepo.dev/docs/guides/javascript/deno-handbook\nDocs // Scrape // 101/171 https://moonrepo.dev/docs/guides/javascript/node-handbook\nDocs // Scrape // 102/171 https://moonrepo.dev/docs/guides/javascript/typescript-eslint\nDocs // Scrape // 103/171 https://moonrepo.dev/docs/guides/javascript/typescript-project-refs\nDocs // Scrape // 104/171 https://moonrepo.dev/docs/guides/mcp\nDocs // Scrape // 105/171 https://moonrepo.dev/docs/guides/node/examples\nDocs // Scrape // 106/171 https://moonrepo.dev/docs/guides/notifications\nDocs // Scrape // 107/171 https://moonrepo.dev/docs/guides/offline-mode\nDocs // Scrape // 108/171 https://moonrepo.dev/docs/guides/open-source\nDocs // Scrape // 109/171 https://moonrepo.dev/docs/guides/pkl-config\nDocs // Scrape // 110/171 https://moonrepo.dev/docs/guides/profile\nDocs // Scrape // 111/171 https://moonrepo.dev/docs/guides/remote-cache\nDocs // Scrape // 112/171 https://moonrepo.dev/docs/guides/root-project\nDocs // Scrape // 113/171 https://moonrepo.dev/docs/guides/rust/handbook\nDocs // Scrape // 114/171 https://moonrepo.dev/docs/guides/sharing-config\nDocs // Scrape // 115/171 https://moonrepo.dev/docs/guides/vcs-hooks\nDocs // Scrape // 116/171 https://moonrepo.dev/docs/guides/wasm-plugins\nDocs // Scrape // 117/171 https://moonrepo.dev/docs/guides/webhooks\nDocs // Scrape // 118/171 https://moonrepo.dev/docs/how-it-works\nDocs // Scrape // 119/171 https://moonrepo.dev/docs/how-it-works/action-graph\nDocs // Scrape // 120/171 https://moonrepo.dev/docs/how-it-works/languages\nDocs // Scrape // 121/171 https://moonrepo.dev/docs/how-it-works/project-graph\nDocs // Scrape // 122/171 https://moonrepo.dev/docs/how-it-works/task-graph\nDocs // Scrape // 123/171 https://moonrepo.dev/docs/install\nDocs // Scrape // 124/171 https://moonrepo.dev/docs/migrate-to-moon\nDocs // Scrape // 125/171 https://moonrepo.dev/docs/migrate/2.0\nDocs // Scrape // 126/171 https://moonrepo.dev/docs/proto\nDocs // Scrape // 127/171 https://moonrepo.dev/docs/proto/commands/activate\nDocs // Scrape // 128/171 https://moonrepo.dev/docs/proto/commands/alias\nDocs // Scrape // 129/171 https://moonrepo.dev/docs/proto/commands/bin\nDocs // Scrape // 130/171 https://moonrepo.dev/docs/proto/commands/clean\nDocs // Scrape // 131/171 https://moonrepo.dev/docs/proto/commands/completions\nDocs // Scrape // 132/171 https://moonrepo.dev/docs/proto/commands/debug\nDocs // Scrape // 133/171 https://moonrepo.dev/docs/proto/commands/debug/config\nDocs // Scrape // 134/171 https://moonrepo.dev/docs/proto/commands/debug/env\nDocs // Scrape // 135/171 https://moonrepo.dev/docs/proto/commands/diagnose\nDocs // Scrape // 136/171 https://moonrepo.dev/docs/proto/commands/exec\nDocs // Scrape // 137/171 https://moonrepo.dev/docs/proto/commands/install\nDocs // Scrape // 138/171 https://moonrepo.dev/docs/proto/commands/list\nDocs // Scrape // 139/171 https://moonrepo.dev/docs/proto/commands/list-remote\nDocs // Scrape // 140/171 https://moonrepo.dev/docs/proto/commands/outdated\nDocs // Scrape // 141/171 https://moonrepo.dev/docs/proto/commands/pin\nDocs // Scrape // 142/171 https://moonrepo.dev/docs/proto/commands/plugin\nDocs // Scrape // 143/171 https://moonrepo.dev/docs/proto/commands/plugin/add\nDocs // Scrape // 144/171 https://moonrepo.dev/docs/proto/commands/plugin/info\nDocs // Scrape // 145/171 https://moonrepo.dev/docs/proto/commands/plugin/list\nDocs // Scrape // 146/171 https://moonrepo.dev/docs/proto/commands/plugin/remove\nDocs // Scrape // 147/171 https://moonrepo.dev/docs/proto/commands/plugin/search\nDocs // Scrape // 148/171 https://moonrepo.dev/docs/proto/commands/regen\nDocs // Scrape // 149/171 https://moonrepo.dev/docs/proto/commands/run\nDocs // Scrape // 150/171 https://moonrepo.dev/docs/proto/commands/setup\nDocs // Scrape // 151/171 https://moonrepo.dev/docs/proto/commands/status\nDocs // Scrape // 152/171 https://moonrepo.dev/docs/proto/commands/unalias\nDocs // Scrape // 153/171 https://moonrepo.dev/docs/proto/commands/uninstall\nDocs // Scrape // 154/171 https://moonrepo.dev/docs/proto/commands/unpin\nDocs // Scrape // 155/171 https://moonrepo.dev/docs/proto/commands/upgrade\nDocs // Scrape // 156/171 https://moonrepo.dev/docs/proto/commands/use\nDocs // Scrape // 157/171 https://moonrepo.dev/docs/proto/commands/versions\nDocs // Scrape // 158/171 https://moonrepo.dev/docs/proto/config\nDocs // Scrape // 159/171 https://moonrepo.dev/docs/proto/detection\nDocs // Scrape // 160/171 https://moonrepo.dev/docs/proto/faq\nDocs // Scrape // 161/171 https://moonrepo.dev/docs/proto/install\nDocs // Scrape // 162/171 https://moonrepo.dev/docs/proto/non-wasm-plugin\nDocs // Scrape // 163/171 https://moonrepo.dev/docs/proto/plugins\nDocs // Scrape // 164/171 https://moonrepo.dev/docs/proto/tool-spec\nDocs // Scrape // 165/171 https://moonrepo.dev/docs/proto/tools\nDocs // Scrape // 166/171 https://moonrepo.dev/docs/proto/wasm-plugin\nDocs // Scrape // 167/171 https://moonrepo.dev/docs/proto/workflows\nDocs // Scrape // 168/171 https://moonrepo.dev/docs/run-task\nDocs // Scrape // 169/171 https://moonrepo.dev/docs/setup-toolchain\nDocs // Scrape // 170/171 https://moonrepo.dev/docs/setup-workspace\nDocs // Scrape // 171/171 https://moonrepo.dev/docs/terminology\nDocs // Scrape // Wrote split external docs (pages=171,ok=171,failed=0,dir=/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo)\n",
              "exit": 0,
              "description": "Regenerate moon docs as split page files",
              "truncated": false
            },
            "time": {
              "start": 1771213671626,
              "end": 1771213682497
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0fbf78a91b1338e1016992936714308190a1d7d59b9930f1a1"
            }
          },
          "id": "prt_c648fcadd0017RrNK3kqNEnvB6",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648fbe79001VMF2XgU6ohXv1E"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "cost": 0,
          "tokens": {
            "total": 84606,
            "input": 175,
            "output": 79,
            "reasoning": 17,
            "cache": {
              "read": 84352,
              "write": 0
            }
          },
          "id": "prt_c648ff742001GxApbw0HN1Y0ma",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648fbe79001VMF2XgU6ohXv1E"
        },
        {
          "type": "patch",
          "hash": "175627511420aa4fc0c4f0b819fd175d2d5b5ed9",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__cheat-sheet.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__action-graph.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__bin.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__check.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__ci.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__clean.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__completions.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__docker.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__docker__file.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__docker__prune.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__docker__scaffold.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__docker__setup.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__exec.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__ext.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__extension.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__extension__add.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__extension__info.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__generate.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__hash.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__init.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__mcp.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__overview.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__project-graph.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__project.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__projects.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__query.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__query__affected.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__query__changed-files.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__query__projects.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__query__tasks.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__run.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__setup.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__sync.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__sync__code-owners.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__sync__config-schemas.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__sync__projects.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__sync__vcs-hooks.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__task-graph.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__task.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__tasks.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__teardown.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__template.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__templates.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__toolchain.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__toolchain__add.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__toolchain__info.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__commands__upgrade.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__comparison.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__cache.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__file-group.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__file-pattern.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__project.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__query-lang.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__target.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__task-inheritance.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__task.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__token.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__toolchain.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__concepts__workspace.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__config.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__config__extensions.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__config__overview.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__config__project.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__config__tasks.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__config__template.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__config__toolchain.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__config__workspace.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__create-project.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__create-task.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__editors.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__editors__vscode.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__faq.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__ci.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__codegen.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__codeowners.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__debug-task.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__docker.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__angular.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__astro.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__eslint.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__jest.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__nest.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__next.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__nuxt.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__packemon.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__prettier.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__react.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__remix.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__solid.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__storybook.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__sveltekit.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__typescript.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__vite.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__examples__vue.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__extensions.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__javascript__bun-handbook.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__javascript__deno-handbook.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__javascript__node-handbook.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__javascript__typescript-eslint.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__javascript__typescript-project-refs.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__mcp.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__node__examples.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__notifications.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__offline-mode.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__open-source.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__pkl-config.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__profile.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__remote-cache.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__root-project.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__rust__handbook.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__sharing-config.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__vcs-hooks.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__wasm-plugins.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__guides__webhooks.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__how-it-works.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__how-it-works__action-graph.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__how-it-works__languages.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__how-it-works__project-graph.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__how-it-works__task-graph.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__install.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__migrate-to-moon.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__migrate__2-0.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__activate.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__alias.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__bin.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__clean.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__completions.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__debug.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__debug__config.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__debug__env.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__diagnose.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__exec.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__install.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__list-remote.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__list.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__outdated.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__pin.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__plugin.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__plugin__add.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__plugin__info.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__plugin__list.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__plugin__remove.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__plugin__search.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__regen.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__run.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__setup.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__status.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__unalias.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__uninstall.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__unpin.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__upgrade.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__use.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__commands__versions.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__config.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__detection.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__faq.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__install.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__non-wasm-plugin.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__plugins.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__tool-spec.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__tools.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__wasm-plugin.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__proto__workflows.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__run-task.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__setup-toolchain.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__setup-workspace.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__terminology.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/index.ext.md",
            "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/moonrepo_docs.ext.md",
            "/Users/alex/repos/vfp/dark-factory/scripts/scrape_moon_docs.sh.ts"
          ],
          "id": "prt_c648ff7cb0012CkVJ9ifzuGCtS",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648fbe79001VMF2XgU6ohXv1E"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213682649,
          "completed": 1771213690910
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 88451,
          "input": 4741,
          "output": 254,
          "reasoning": 109,
          "cache": {
            "read": 83456,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c648ff7d9001WIRyne48A5Q1xG",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "id": "prt_c649001f5001iiD4aUO66paFBz",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648ff7d9001WIRyne48A5Q1xG"
        },
        {
          "type": "reasoning",
          "text": "**Planning file presence verification**",
          "metadata": {
            "openai": {
              "itemId": "rs_0aa83a07b6a044cf01699293770f4c8193a9cd4c726e6b5b04",
              "reasoningEncryptedContent": "gAAAAABpkpN5zJz3CqK7zXaDm8QPMJTZLltUuMPARQHzAL8U1_JO7MHciSb0jQf7h9N2TF_1Q3Vrt2cIvlRKStql912XDyfD0iKA78YfiZ91JjI-JxPyugEtB_C1AAN9EyrHUA-eTIijcvHCxQwz3t4W1DvkY8LThQDLWOr0v9XFCem-g9G_NYrpbLegP_QP4WhvF5GqowAivbrsZ5H8yHBhXB_cqrRydi4ss2vw-NxYg0jsVldhGXCksNw3z_0_5xoaLiNToI5ujpaJKDohR5osKSe54S4DkvPbjLQyKNxrKZmIn5E8Scdqqn382ZqjeYbhcOAz03RzqaWW4u8Fp6myTjps809NZNR2aPFaMKEJpoOoi2eyJjl-fViB5T-B1-RdYxBDqbcp2Y2CjPn8vXvNtl2LNGig4GvIRe9JYQPgLD3s99pF6PKR2sHDVSCcFSuBYP0yR9Cu1PnK-CHbP0W2_SGJM_OZmO__CZmfdQ0aaAUEJpIRSVOngkU3ckZwBBLl_WBK-pNe5B7kvC9zeC1-m0lUWaeNRlFclBlEGvU3arNBk4JBqtk7wuMH1LBdn-xdVbTruuww0Qozv-D-1O75n0qE_To61soqJ-Dmy42UQLtHDBdOkByJ-rCT8opVDPZ2FWM68XclhH2BSlO0O88jkg0zJlmVWWV3YsbBZR2ASyxZ_5rkiWt2kJawZgG0hVsGYyY-D4NbhtDr4W9WZiOm6Kgs-KZDQWnrC5S_FCAA3l1hpvgTacZjL7Fg8_Jii3PAm7S4lAwWh7sdn-s-aUAQRoSNqeTvCCHw24yoJsQxt3FqhL9Ex3LG4HkT2pK9PHwrce1Z4yDuWz1JLyqa-k00-jYrpF1r-XBZtouhJK0smB-DFWTL4g3RulSudCDqEnNpVrm5g-bpSRzPdF6AC4JlR3ksO60J8EjbPCHWUb19AxsHcA_LqtzNGkuZEkdSWWnhuyUfIC-5bmI82KMgI-lK3SdHl8ASKbmIUpycYv5plnpiAztwz5lXJ45qQV9rHEkc6YA3AoYeSuQheVloSTCVSQF6YQsPKZx9ecklUZjQvqAc_79Ck88lRB7qNH7hxS9UtLWXhWZcme0opPhz9_Nnso-hCD5w0ZmkNjWHvPzseXOl51cjcEdUktcgk7xx_gg1hXKkJRTl60mzj5RU55WtVPGUjKaq5Sfk_cpjpCbqTwVG1qyISWxRzL7XUqDSoYTGTy7_U0rmmZQVUr--LorxyMio6ChFGMpl7a3Ook-E0rmECVAkCbpO4X5woRkV1_HUVIMDTWftUI9Iea9dq_wJoXTfpPkwvFh7mtaI5KnkLS4mVnRvAp-ZwZB1WCxoPM5opXdNgyBZChetds1DN0d7fqCjoPG6wRHdR9S2m_n7LjJCERtwGlDVN858WxwxcxUVVfVz8w0f6s35EywqiNnH8cg0tzJ-mdXkDdLezyYr4sO8z5OWqj8="
            }
          },
          "time": {
            "start": 1771213687089,
            "end": 1771213689278
          },
          "id": "prt_c64900931001E1Ww18TQYu8Jjr",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648ff7d9001WIRyne48A5Q1xG"
        },
        {
          "type": "tool",
          "callID": "call_3BCXjb8MuCnQgBdOlMUp02rp",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "python3 - <<'PY'\nfrom pathlib import Path\np=Path('docs/external/moonrepo')\nfiles=sorted([f.name for f in p.iterdir() if f.is_file()])\nprint('file_count', len(files))\nprint('has_index', 'index.ext.md' in files)\nprint('has_legacy_monolith', 'moonrepo_docs.ext.md' in files)\nprint('sample_first5', files[:5])\nprint('sample_last5', files[-5:])\nPY",
              "description": "Validate split docs files and index presence"
            },
            "output": "file_count 172\nhas_index True\nhas_legacy_monolith False\nsample_first5 ['docs.ext.md', 'docs__cheat-sheet.ext.md', 'docs__commands.ext.md', 'docs__commands__action-graph.ext.md', 'docs__commands__bin.ext.md']\nsample_last5 ['docs__run-task.ext.md', 'docs__setup-toolchain.ext.md', 'docs__setup-workspace.ext.md', 'docs__terminology.ext.md', 'index.ext.md']\n",
            "title": "Validate split docs files and index presence",
            "metadata": {
              "output": "file_count 172\nhas_index True\nhas_legacy_monolith False\nsample_first5 ['docs.ext.md', 'docs__cheat-sheet.ext.md', 'docs__commands.ext.md', 'docs__commands__action-graph.ext.md', 'docs__commands__bin.ext.md']\nsample_last5 ['docs__run-task.ext.md', 'docs__setup-toolchain.ext.md', 'docs__setup-workspace.ext.md', 'docs__terminology.ext.md', 'index.ext.md']\n",
              "exit": 0,
              "description": "Validate split docs files and index presence",
              "truncated": false
            },
            "time": {
              "start": 1771213690739,
              "end": 1771213690792
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0aa83a07b6a044cf016992937928d0819382c8fdb01ee12a5a"
            }
          },
          "id": "prt_c649011be001Zs58pJIW8Swq6x",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648ff7d9001WIRyne48A5Q1xG"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "cost": 0,
          "tokens": {
            "total": 88451,
            "input": 4741,
            "output": 254,
            "reasoning": 109,
            "cache": {
              "read": 83456,
              "write": 0
            }
          },
          "id": "prt_c649017ec0014cQpb5p3LMs57n",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c648ff7d9001WIRyne48A5Q1xG"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213690923,
          "completed": 1771213695746
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 88672,
          "input": 244,
          "output": 108,
          "reasoning": 51,
          "cache": {
            "read": 88320,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6490182b001EcdvNdR10cfdAW",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "id": "prt_c64902356001cBGtG7VUgwRWyl",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6490182b001EcdvNdR10cfdAW"
        },
        {
          "type": "reasoning",
          "text": "**Planning file line count retrieval**",
          "metadata": {
            "openai": {
              "itemId": "rs_063ee1e9887b6c61016992937e06048196908e8b82f25ff1d0",
              "reasoningEncryptedContent": "gAAAAABpkpN_chdSB8dIFNqtpjt4kQjj-05r8heY-0nEhN8YwRgRHilSY3uo3pReIvDFMzDT59PAzkm0yPuytPOwpiEEegbrkJFDqpUFp_fmdoWfu8S_CEuvRqYOTIcJHfPkPT0PSLHFhidbFtPj-ao_FN3AUnVbnNG5JKBszSetxati39D-5QxX1vY6JmEZMSk6gNMZ4irn6fM8IS9rtBmcnmjufTOqxyc5oAlQlsB4IF6uTpWy_9dii-DNOzGSSVbUhgeu_soVBu9W6clNzkXdGjhTbh-9i-DUR5v-uudn2UbzfpAW9Yk4oBqnsskWG0p0sbdxngz1pC7f5ZttSjTdnBKJqrPY9DyyLLMrnBROhyKZJr_QpFlX2ql1lBETbM9kn0G9a-i4mqQlR_YQ_Toost4NE-qsre9wt4GCb-QNf_zxHRHWr9tVcDXnMQUr-H4AdyZvJsBMLo66w9Wv2keLt8wZje8qU69yL5gQW--OD2wZeeyTzPaOTEUTjr0Juk-pxpZELUVbPSW7HfmUF-OaaN99_P0C1DYBT6kMpOcvHGu_CFD9lVWL46fb1xBvBWWniEHTW_pSM6Hm7bwgQzAycxaVBu2yzl_4YfddeK7CHxv5yUYDWHySbdX3LxXZ43KD-bk5YD1nA2Ylc_H9Fc3Qumn0q9Y3dkVREUNxx82tbpuPOIxCbr62wrv4j5iK8GtPOiOF450Q0vzUhdrdg0BBiiplezzUkzFHXxkQzDw8XPxYSUqtvyhI6VGEDXw7S3phViXAZpGI6mLOqE0dPSlhOFFt8rqjQ6reFJ8Fah9cxMVRGuiwYj-25YsexWCTAF1ldzPSmogy01Qo5rB0aW7vRaa0lbpMBYiYfbM451gKemJg69SFJFhcG8CKCtavir4JEnJdovauRl0R8uJAH9lMAIc3ViKweumF6Fe_6GDNE3FV-twlrmJ2MD5p9CO8UyHTHa9EZ_QSq0OwvUL9L4PGLBMs6SWbX840qwnscM_LTY6qJUulMMbwAGhSQCH-uIumbGnecIJtccDDs2AI0vCk1vsTK0lQvKQsoeCW3G5wQLLUMI-8vjO4njdCBv1N2xI9PMEJkw2X3i1DHkhY2x-lirIjv4hxioIyxW0aATdb0HALRo8GzPs="
            }
          },
          "time": {
            "start": 1771213694127,
            "end": 1771213695218
          },
          "id": "prt_c649024af001CNPmnqY5czG10L",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6490182b001EcdvNdR10cfdAW"
        },
        {
          "type": "tool",
          "callID": "call_CdrT14ocYkWZVDjGENKKDv1w",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "wc -l \"docs/external/moonrepo/index.ext.md\" \"docs/external/moonrepo/docs__install.ext.md\"",
              "description": "Get line counts for index and sample page"
            },
            "output": "     192 docs/external/moonrepo/index.ext.md\n     154 docs/external/moonrepo/docs__install.ext.md\n     346 total\n",
            "title": "Get line counts for index and sample page",
            "metadata": {
              "output": "     192 docs/external/moonrepo/index.ext.md\n     154 docs/external/moonrepo/docs__install.ext.md\n     346 total\n",
              "exit": 0,
              "description": "Get line counts for index and sample page",
              "truncated": false
            },
            "time": {
              "start": 1771213695642,
              "end": 1771213695664
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_063ee1e9887b6c61016992937f2c70819695e54683f13629f3"
            }
          },
          "id": "prt_c649028f5001IvFqojbTrihNla",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6490182b001EcdvNdR10cfdAW"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "cost": 0,
          "tokens": {
            "total": 88672,
            "input": 244,
            "output": 108,
            "reasoning": 51,
            "cache": {
              "read": 88320,
              "write": 0
            }
          },
          "id": "prt_c64902ad0001AY06PywP04Qhq0",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6490182b001EcdvNdR10cfdAW"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213695759,
          "completed": 1771213700692
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 88834,
          "input": 140,
          "output": 118,
          "reasoning": 12,
          "cache": {
            "read": 88576,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64902b0f00120vZtYPPzpr3Ma",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "id": "prt_c649035da001KL4bnek7gFG509",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64902b0f00120vZtYPPzpr3Ma"
        },
        {
          "type": "reasoning",
          "text": "",
          "metadata": {
            "openai": {
              "itemId": "rs_0f209c4f950b99130169929382d76c81978d445c47b0fb8f64",
              "reasoningEncryptedContent": "gAAAAABpkpOEOYJ42J_OMzLU8NLMro1chVh62TKoKHQvAWS1GIZpKfsoTINVpBeKG7Xt1SoUn6zixRpYVR9W7gt8fXHx3k3sfcnKjJq3zM779Dr0kV8MUIx47k2Ca5fpoHiJ-8j15BkzjAsSnWR0sjF9Rp-fXtVBNagV3VZwf8d8Ze8zIqWy7_mWNf2kUPguVl8gkKDo1soONRhFMzWdtoQnxB56mZ6uO8G37byQL_2Dvy37drNTG1S_zasczJ3NAg7iPpAh4_1TV9HEOXmEo6soc0aPUsCEwIAtOhBB8r7V9qEVxtKzWO87qyk6fKabvprPJqpyVefe2djh8E2HaDnsxvYm563y94BwieFfbu342wXg0DcTuPwr8tnLKRPBMhmFeKmKwlD1RgUcNPXMkGennRopUf5KKiE_1jJ7iKRoxR4v15YcePBQXuZGmf2cUmdqWRvc0kiUEbMyZC9ewg7ZpiZhKqcHAS0XIN5THewwv5eoiGi_uZn7DWTKnE5iP7BaJoPwTpKqgM_uaT2X-bi1ItlHjt4nDkMyMH5DOsPdP-c_SDwo-o-UmrOL5veDaZqHNnOe1I4pUmHG3q5x-NgrIokj50M8Lm09Y4K1nPXyNVmW2X3lINhqYDYaIjNCkI5n7shV628yiAhwS2PPiZnOu2j73pvJkt18ShT88-xLuSzKq8K9bqTQFHx4MIG--0VNAN4tI-SRMpOWYCnaHSaN6fetwW4l8OdIBN1oCoNHRc8WTH2r3Z2tPZ_smJGbVjh-8h_LlIyDBxLTrx5LrkwHzfzSJyHCyYCwaPJF2zVGsOkJg_-X2pB4epbVIA83VbuDufbKEKmVtqwUL1-JgFFBxM3ZHKst7_VfWP12FupigHzko0oBRTujpZGe3-hNsiQtPLm7Lsqv"
            }
          },
          "time": {
            "start": 1771213698941,
            "end": 1771213700512
          },
          "id": "prt_c6490377d0018yU1l4ieOcNmUh",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64902b0f00120vZtYPPzpr3Ma"
        },
        {
          "type": "tool",
          "callID": "call_ieAsWx4lJa2MfkfXp6CfYjnI",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/index.ext.md",
              "offset": 1,
              "limit": 40
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/index.ext.md</path>\n<type>file</type>\n<content>1: ----\n2: ## External Docs Index // moonrepo\n3: \n4: - Captured: 2026-02-16T03:48:02.472Z\n5: - Source root: https://moonrepo.dev/docs\n6: - Output directory: docs/external/moonrepo\n7: - Scope: 171 pages under /docs (excluding /docs/tags)\n8: - Keywords: moon, moonrepo, docs index, monorepo, build system, toolchain, proto\n9: - Summary: This index links one `.ext.md` file per docs page snapshot for moonrepo.\n10: ----\n11: \n12: ## Pages\n13: \n14: - [docs.ext.md](./docs.ext.md) - /docs (ok,mode=jina)\n15: - [docs__cheat-sheet.ext.md](./docs__cheat-sheet.ext.md) - /docs/cheat-sheet (ok,mode=jina)\n16: - [docs__commands.ext.md](./docs__commands.ext.md) - /docs/commands (ok,mode=jina)\n17: - [docs__commands__action-graph.ext.md](./docs__commands__action-graph.ext.md) - /docs/commands/action-graph (ok,mode=jina)\n18: - [docs__commands__bin.ext.md](./docs__commands__bin.ext.md) - /docs/commands/bin (ok,mode=jina)\n19: - [docs__commands__check.ext.md](./docs__commands__check.ext.md) - /docs/commands/check (ok,mode=jina)\n20: - [docs__commands__ci.ext.md](./docs__commands__ci.ext.md) - /docs/commands/ci (ok,mode=jina)\n21: - [docs__commands__clean.ext.md](./docs__commands__clean.ext.md) - /docs/commands/clean (ok,mode=jina)\n22: - [docs__commands__completions.ext.md](./docs__commands__completions.ext.md) - /docs/commands/completions (ok,mode=jina)\n23: - [docs__commands__docker.ext.md](./docs__commands__docker.ext.md) - /docs/commands/docker (ok,mode=jina)\n24: - [docs__commands__docker__file.ext.md](./docs__commands__docker__file.ext.md) - /docs/commands/docker/file (ok,mode=jina)\n25: - [docs__commands__docker__prune.ext.md](./docs__commands__docker__prune.ext.md) - /docs/commands/docker/prune (ok,mode=jina)\n26: - [docs__commands__docker__scaffold.ext.md](./docs__commands__docker__scaffold.ext.md) - /docs/commands/docker/scaffold (ok,mode=jina)\n27: - [docs__commands__docker__setup.ext.md](./docs__commands__docker__setup.ext.md) - /docs/commands/docker/setup (ok,mode=jina)\n28: - [docs__commands__exec.ext.md](./docs__commands__exec.ext.md) - /docs/commands/exec (ok,mode=jina)\n29: - [docs__commands__ext.ext.md](./docs__commands__ext.ext.md) - /docs/commands/ext (ok,mode=jina)\n30: - [docs__commands__extension.ext.md](./docs__commands__extension.ext.md) - /docs/commands/extension (ok,mode=jina)\n31: - [docs__commands__extension__add.ext.md](./docs__commands__extension__add.ext.md) - /docs/commands/extension/add (ok,mode=jina)\n32: - [docs__commands__extension__info.ext.md](./docs__commands__extension__info.ext.md) - /docs/commands/extension/info (ok,mode=jina)\n33: - [docs__commands__generate.ext.md](./docs__commands__generate.ext.md) - /docs/commands/generate (ok,mode=jina)\n34: - [docs__commands__hash.ext.md](./docs__commands__hash.ext.md) - /docs/commands/hash (ok,mode=jina)\n35: - [docs__commands__init.ext.md](./docs__commands__init.ext.md) - /docs/commands/init (ok,mode=html)\n36: - [docs__commands__mcp.ext.md](./docs__commands__mcp.ext.md) - /docs/commands/mcp (ok,mode=html)\n37: - [docs__commands__overview.ext.md](./docs__commands__overview.ext.md) - /docs/commands/overview (ok,mode=html)\n38: - [docs__commands__project.ext.md](./docs__commands__project.ext.md) - /docs/commands/project (ok,mode=html)\n39: - [docs__commands__project-graph.ext.md](./docs__commands__project-graph.ext.md) - /docs/commands/project-graph (ok,mode=html)\n40: - [docs__commands__projects.ext.md](./docs__commands__projects.ext.md) - /docs/commands/projects (ok,mode=html)\n\n(File has more lines. Use 'offset' parameter to read beyond line 40)\n</content>",
            "title": "docs/external/moonrepo/index.ext.md",
            "metadata": {
              "preview": "----\n## External Docs Index // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Output directory: docs/external/moonrepo\n- Scope: 171 pages under /docs (excluding /docs/tags)\n- Keywords: moon, moonrepo, docs index, monorepo, build system, toolchain, proto\n- Summary: This index links one `.ext.md` file per docs page snapshot for moonrepo.\n----\n\n## Pages\n\n- [docs.ext.md](./docs.ext.md) - /docs (ok,mode=jina)\n- [docs__cheat-sheet.ext.md](./docs__cheat-sheet.ext.md) - /docs/cheat-sheet (ok,mode=jina)\n- [docs__commands.ext.md](./docs__commands.ext.md) - /docs/commands (ok,mode=jina)\n- [docs__commands__action-graph.ext.md](./docs__commands__action-graph.ext.md) - /docs/commands/action-graph (ok,mode=jina)\n- [docs__commands__bin.ext.md](./docs__commands__bin.ext.md) - /docs/commands/bin (ok,mode=jina)\n- [docs__commands__check.ext.md](./docs__commands__check.ext.md) - /docs/commands/check (ok,mode=jina)\n- [docs__commands__ci.ext.md](./docs__commands__ci.ext.md) - /docs/commands/ci (ok,mode=jina)",
              "truncated": true,
              "loaded": []
            },
            "time": {
              "start": 1771213700515,
              "end": 1771213700516
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0f209c4f950b991301699293847a648197ae628592c97f46c3"
            }
          },
          "id": "prt_c64903da0001aJbA6jZEV4smSV",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64902b0f00120vZtYPPzpr3Ma"
        },
        {
          "type": "tool",
          "callID": "call_QIU32oWtiFlr0OpuI51bcj1u",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__install.ext.md",
              "offset": 1,
              "limit": 40
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__install.ext.md</path>\n<type>file</type>\n<content>1: ----\n2: ## External Docs Snapshot // moonrepo\n3: \n4: - Captured: 2026-02-16T03:48:02.472Z\n5: - Source root: https://moonrepo.dev/docs\n6: - Source page: /docs/install\n7: - Keywords: moon, moonrepo, docs, monorepo, build, install\n8: - Summary: The following guide can be used to install moon and integrate it into an existing repository (with\n9: ----\n10: \n11: Source: https://moonrepo.dev/docs/install\n12: \n13: # Install moon\n14: \n15: 2 min\n16: \n17: The following guide can be used to install moon and integrate it into an existing repository (with\n18: or without incremental adoption), or to a fresh repository.\n19: \n20: ## Installing\n21: \n22: The entirety of moon is packaged and shipped as a single binary. It works on all major operating\n23: systems, and does not require any external dependencies. For convenience, we provide the following\n24: scripts to download and install moon.\n25: \n26: ### proto\n27: \n28: moon can be installed and managed in [proto's toolchain](/proto). This will install moon to\n29: `~/.proto/tools/moon` and make the binary available at `~/.proto/bin`.\n30: \n31: ```\n32: proto install moon\n33: ```\n34: \n35: Furthermore, the version of moon can be pinned on a per-project basis using the\n36: [`.prototools` config file](/docs/proto/config).\n37: \n38: .prototools\n39: \n40: ```\n\n(File has more lines. Use 'offset' parameter to read beyond line 40)\n</content>",
            "title": "docs/external/moonrepo/docs__install.ext.md",
            "metadata": {
              "preview": "----\n## External Docs Snapshot // moonrepo\n\n- Captured: 2026-02-16T03:48:02.472Z\n- Source root: https://moonrepo.dev/docs\n- Source page: /docs/install\n- Keywords: moon, moonrepo, docs, monorepo, build, install\n- Summary: The following guide can be used to install moon and integrate it into an existing repository (with\n----\n\nSource: https://moonrepo.dev/docs/install\n\n# Install moon\n\n2 min\n\nThe following guide can be used to install moon and integrate it into an existing repository (with\nor without incremental adoption), or to a fresh repository.\n\n## Installing",
              "truncated": true,
              "loaded": []
            },
            "time": {
              "start": 1771213700545,
              "end": 1771213700547
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0f209c4f950b991301699293847a788197a151033d40db3d3a"
            }
          },
          "id": "prt_c64903dbc001b1WiFlufrfOlse",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64902b0f00120vZtYPPzpr3Ma"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "cost": 0,
          "tokens": {
            "total": 88834,
            "input": 140,
            "output": 118,
            "reasoning": 12,
            "cache": {
              "read": 88576,
              "write": 0
            }
          },
          "id": "prt_c64903e200018to9EP2nPCdTkK",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64902b0f00120vZtYPPzpr3Ma"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213700705,
          "completed": 1771213705864
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 90576,
          "input": 1745,
          "output": 127,
          "reasoning": 21,
          "cache": {
            "read": 88704,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64903e61001O2zK8q0BPSTeIm",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "id": "prt_c64904851001lgO9SkVJxP5bT2",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64903e61001O2zK8q0BPSTeIm"
        },
        {
          "type": "reasoning",
          "text": "**Planning file footer detection**",
          "metadata": {
            "openai": {
              "itemId": "rs_0af053a04ca262a50169929387c0e48195a302bae8d96dadd0",
              "reasoningEncryptedContent": "gAAAAABpkpOJZQ3rpCcoSzac9lUHqUlB5oJM369eogyH-Jiggmn_OY7bXdDMRk-_WWvjhT3vgJ4arytWukY20k6qqNlwQhSWbqyDJF17tLctVMo6aBMosPR_lYU0KWefh1H0H1p6Z-VifTC1C6Nm_LwUuLVvwpB4te-WJw6pQtETEg83G86rfv2d0VrOpxbY6QiQbzUnfFnfEHfdS-t4HvNBVYZ1-bXiWGmngnZijRCfkW_si4Oiirnp5Yy4QpbPobb0Wzdok2DSD7MdD15cDrrXOwfLB4WHQBHl7X6m8Ws_qoXF0YuPJIDBySF_fZf1IjjJQ6rfm8mVB71rDrvhodLaKWV1iYqI4TcSgJdBTO5hKcnsjTC4MaBffchke3nccd329WhbT2Vw7kviCT_wC3zJjtg0bj42F1EgScyTZuVyGiDkcsbCEX-w-jzQALuIgSsOPpJJT-DputuaDS19Gx_FHfQgT8VtE87XoYnKZTsGTBRsROoeJZAn8sNCgfmiqpnkp1Vqr6iUF2Vl0644tFpuybTA7O-Cukus_W_v55qkYfWjaVIUKbCaV4aVz0tqGL5PzWhjbX26cO4lIB9IuplXdvcfAGJqHNHnqblP7Qrd8jDXCukq8EvFdwy0tBrH1Q8NdVO4s-I8M3M9xHVzbYjiKC_1dlZ0PyuVitcu3sFfbaUlZVytZqRpyBWt78iPOuVDRYTZyk_JszOYOCCy0_dgBfQs8AZXgb5zYihZy-R-5NQw-LPYgRpOff0XyJ177hoUCWUoqB4rftY3uiuCdNLwmrdgvS_6BjIphjVUjcJ-hPORMpYlwChpTc4pFQXOu-MFLOVp3NoXYPpSpOqNFUn00qIklRMPHZfc-8quB9QRxDt_3UfRbAmiRy93wKBQNlfFOWsRARJNYZk-6vJGfR3wAnssLJaJpfPdx3NbdbbiuVQkeaFGOms="
            }
          },
          "time": {
            "start": 1771213703796,
            "end": 1771213705753
          },
          "id": "prt_c64904a740014sWc6foHwxxKbg",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64903e61001O2zK8q0BPSTeIm"
        },
        {
          "type": "tool",
          "callID": "call_oEBMWek4nMn4upMz0AKpPvk9",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/index.ext.md",
              "offset": 170,
              "limit": 40
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/index.ext.md</path>\n<type>file</type>\n<content>170: - [docs__proto__commands__versions.ext.md](./docs__proto__commands__versions.ext.md) - /docs/proto/commands/versions (ok,mode=html)\n171: - [docs__proto__config.ext.md](./docs__proto__config.ext.md) - /docs/proto/config (ok,mode=html)\n172: - [docs__proto__detection.ext.md](./docs__proto__detection.ext.md) - /docs/proto/detection (ok,mode=html)\n173: - [docs__proto__faq.ext.md](./docs__proto__faq.ext.md) - /docs/proto/faq (ok,mode=html)\n174: - [docs__proto__install.ext.md](./docs__proto__install.ext.md) - /docs/proto/install (ok,mode=html)\n175: - [docs__proto__non-wasm-plugin.ext.md](./docs__proto__non-wasm-plugin.ext.md) - /docs/proto/non-wasm-plugin (ok,mode=html)\n176: - [docs__proto__plugins.ext.md](./docs__proto__plugins.ext.md) - /docs/proto/plugins (ok,mode=html)\n177: - [docs__proto__tool-spec.ext.md](./docs__proto__tool-spec.ext.md) - /docs/proto/tool-spec (ok,mode=html)\n178: - [docs__proto__tools.ext.md](./docs__proto__tools.ext.md) - /docs/proto/tools (ok,mode=html)\n179: - [docs__proto__wasm-plugin.ext.md](./docs__proto__wasm-plugin.ext.md) - /docs/proto/wasm-plugin (ok,mode=html)\n180: - [docs__proto__workflows.ext.md](./docs__proto__workflows.ext.md) - /docs/proto/workflows (ok,mode=html)\n181: - [docs__run-task.ext.md](./docs__run-task.ext.md) - /docs/run-task (ok,mode=html)\n182: - [docs__setup-toolchain.ext.md](./docs__setup-toolchain.ext.md) - /docs/setup-toolchain (ok,mode=html)\n183: - [docs__setup-workspace.ext.md](./docs__setup-workspace.ext.md) - /docs/setup-workspace (ok,mode=html)\n184: - [docs__terminology.ext.md](./docs__terminology.ext.md) - /docs/terminology (ok,mode=html)\n185: \n186: ----\n187: ## Notes / Comments / Lessons\n188: \n189: - Per-page files are flattened in this directory and prefixed with `docs` in the filename stem.\n190: - Regenerate by re-running the scraper script; old `.ext.md` files in this directory are replaced.\n191: - Capture results: success=171, failed=0.\n192: ----\n193: \n\n(End of file - total 193 lines)\n</content>",
            "title": "docs/external/moonrepo/index.ext.md",
            "metadata": {
              "preview": "- [docs__proto__commands__versions.ext.md](./docs__proto__commands__versions.ext.md) - /docs/proto/commands/versions (ok,mode=html)\n- [docs__proto__config.ext.md](./docs__proto__config.ext.md) - /docs/proto/config (ok,mode=html)\n- [docs__proto__detection.ext.md](./docs__proto__detection.ext.md) - /docs/proto/detection (ok,mode=html)\n- [docs__proto__faq.ext.md](./docs__proto__faq.ext.md) - /docs/proto/faq (ok,mode=html)\n- [docs__proto__install.ext.md](./docs__proto__install.ext.md) - /docs/proto/install (ok,mode=html)\n- [docs__proto__non-wasm-plugin.ext.md](./docs__proto__non-wasm-plugin.ext.md) - /docs/proto/non-wasm-plugin (ok,mode=html)\n- [docs__proto__plugins.ext.md](./docs__proto__plugins.ext.md) - /docs/proto/plugins (ok,mode=html)\n- [docs__proto__tool-spec.ext.md](./docs__proto__tool-spec.ext.md) - /docs/proto/tool-spec (ok,mode=html)\n- [docs__proto__tools.ext.md](./docs__proto__tools.ext.md) - /docs/proto/tools (ok,mode=html)\n- [docs__proto__wasm-plugin.ext.md](./docs__proto__wasm-plugin.ext.md) - /docs/proto/wasm-plugin (ok,mode=html)\n- [docs__proto__workflows.ext.md](./docs__proto__workflows.ext.md) - /docs/proto/workflows (ok,mode=html)\n- [docs__run-task.ext.md](./docs__run-task.ext.md) - /docs/run-task (ok,mode=html)\n- [docs__setup-toolchain.ext.md](./docs__setup-toolchain.ext.md) - /docs/setup-toolchain (ok,mode=html)\n- [docs__setup-workspace.ext.md](./docs__setup-workspace.ext.md) - /docs/setup-workspace (ok,mode=html)\n- [docs__terminology.ext.md](./docs__terminology.ext.md) - /docs/terminology (ok,mode=html)\n\n----\n## Notes / Comments / Lessons\n\n- Per-page files are flattened in this directory and prefixed with `docs` in the filename stem.",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771213705755,
              "end": 1771213705758
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0af053a04ca262a501699293899c908195b2576380c60ca272"
            }
          },
          "id": "prt_c6490521a001FVilDtgssbxFJU",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64903e61001O2zK8q0BPSTeIm"
        },
        {
          "type": "tool",
          "callID": "call_d9rgHehXWKF2rxjapziEcTUP",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__install.ext.md",
              "offset": 130,
              "limit": 40
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/docs/external/moonrepo/docs__install.ext.md</path>\n<type>file</type>\n<content>130: \n131: - Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `canary` tag. Releases are versioned by date.\n132: \n133: - From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/canary) using the `canary` tag. This tag always represents the latest development release.\n134: \n135: ## Nightly releases\n136: \n137: moon supports nightly releases, which are built and published once a day from the latest commit on\n138: master. When using a nightly release, you'll need to download and execute the binaries manually.\n139: \n140: - Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `nightly` tag. Releases are versioned by date.\n141: \n142: - From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/nightly) using the `nightly` tag. This tag always represents the latest stable release.\n143: \n144: ## Next steps\n145: \n146: [Setup workspace](/docs/setup-workspace)\n147: \n148: ----\n149: ## Notes / Comments / Lessons\n150: \n151: - Collection method: sitemap discovery + markdown conversion.\n152: - Conversion path: direct HTML fallback parser.\n153: - This file is one page-level external snapshot in markdown `.ext.md` format.\n154: ----\n155: \n\n(End of file - total 155 lines)\n</content>",
            "title": "docs/external/moonrepo/docs__install.ext.md",
            "metadata": {
              "preview": "\n- Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `canary` tag. Releases are versioned by date.\n\n- From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/canary) using the `canary` tag. This tag always represents the latest development release.\n\n## Nightly releases\n\nmoon supports nightly releases, which are built and published once a day from the latest commit on\nmaster. When using a nightly release, you'll need to download and execute the binaries manually.\n\n- Using our npm package [`@moonrepo/cli`](https://www.npmjs.com/package/@moonrepo/cli?activeTab=versions) under the `nightly` tag. Releases are versioned by date.\n\n- From a [GitHub prerelease](https://github.com/moonrepo/moon/releases/tag/nightly) using the `nightly` tag. This tag always represents the latest stable release.\n\n## Next steps\n\n[Setup workspace](/docs/setup-workspace)\n\n----\n## Notes / Comments / Lessons",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771213705756,
              "end": 1771213705759
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0af053a04ca262a501699293899c9c8195be2098e3ae4ee4e3"
            }
          },
          "id": "prt_c6490521b0010rO9o4lP8LpRcS",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64903e61001O2zK8q0BPSTeIm"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "cost": 0,
          "tokens": {
            "total": 90576,
            "input": 1745,
            "output": 127,
            "reasoning": 21,
            "cache": {
              "read": 88704,
              "write": 0
            }
          },
          "id": "prt_c64905252001dRBpz8ecZm6kqt",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64903e61001O2zK8q0BPSTeIm"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213705877,
          "completed": 1771213712159
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 91807,
          "input": 1160,
          "output": 151,
          "reasoning": 118,
          "cache": {
            "read": 90496,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64905295001PPMty2tjiznl83",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "id": "prt_c64905c3b0017cH26RwfHof2eS",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64905295001PPMty2tjiznl83"
        },
        {
          "type": "reasoning",
          "text": "**Checking repository changes**",
          "metadata": {
            "openai": {
              "itemId": "rs_0449d1a8145be8df016992938ca44c8190b98f337d3a5622ea",
              "reasoningEncryptedContent": "gAAAAABpkpOPnQKX5tUbQ8379HyVjrNDpFv9F6xd6KEasBd9FCX8pOmb7Qfgjkhtnla4QZ736ukymng0Y-NHDNPkJYOB8_cooPtBfy9GtrSeMqFzR3fIPjRlcmcjpwdeuq8NRyBYSt7Rl3fzix0t1aC6GuaBcbV0XGY1WPrrUjSaRSX1vI35fE-8F2yam1TpoC9XQ4UH9g4wgdEh71x_IKNJZ8ubKEW_7PqvJJJpv6UzIWvBuRgc2hwWtbPH7ofrI61EBTBMUuBurjAzLO78J3_3yCT7b6Q-86ZXaFOZ7kewpJ9CQBzbUqrhrB1QPN1J84wBTq-MHCJlSY12JIuvZgL4K2_ajEylf7f_BOksajfyy4u3K7XAi06vnhynTwptvqvgBQ0F7CzeW5KMOBx9vH2S7vQ2Mn8DAH4BkYk_9iJLq2qrMqa-DOLZrMZOckUCt_aYhi4OQE7lDLvWP5WY-QW0DaWtR6y--5AC1xyhWoOj02tpnvmoQYl6skxZJDrSPeJ7gL6NTTv3E5kDkXF5xbqX86wAcTTZUE4p8DlpgoAgA-FkiGq6bwNSvvGQMl7-MbaCdpoJfpKu5vVUHOLLdwAHQGOQqDYVHg_BDh-KBlxnUGchMyP8N4uXh5X6AUwpMJ95ycOcRukEqHZHi7Q1UaryF7n_aJwhP9jFJMo84GYxl6jNeGoLlYPkP4TRN7sm-Lu9cqzecJM4Mu0wjI7RHEIARF40uv8UOpXBd_DS2cSaK72QD9LluRIqcXl80BrOyWKPnaVEhfzMda0CIqQEHlnZhB1shwCSTo-0DtVNIIB2pB-VyA15rQTVViw0O33nqigdhB_SCpZ3PR9c4E3yoWjJYX3AT3jwhAtjZjhFL5ppxQ0WQYmD42zK2VqyppetSBNRDIeY-CAvAsHadwVsG3rjE0Lpc_q_5ujwGhlbm71QkfhaxLNPjdZ83EioklOpIS8ARmzUnLCIkLE65XjZUgVKbvD-Ew7blKfuTL98VMDesD8uRj6iHvl1WL1Eh7jZGy9JFEqQzgfqlCSm6D-X9XAWWqiZdzbI7fdA5qnrJwtreV7dzF4_i9ANj6PxQlvef2r1MiAkaddaIRRTsqoCommMCK3mm1hSrpNbqUhDAPYxHw7PDgY5jvnDWBVz3SuMPFhVTl9gYPQA8HyPbyLPoe6MRMWMrsbJk3rrUaGyyuD90wrxGVo-mRgdhYHkqtLNGBCTz8PGntFsDKGrEbnnTv5_2DWFynA7je3c03db5QuDXXfoGPbvcZuwnA7R_A9Yqpgf8Z2nMrnLIkF3MQW5nVL8k4CTXDU2tozhJKmFBbBXlp5lzJGZ0nRSdJpJBXbW-IncCIhNzpbWUefywnoq0er4bs3IhRd45vYMmFrtJYfs5njyxhtKW0w6UtEozdXfbjSkIgs3Ffu22fIJ9Eq92xqdCdsBdBNSkOsd2w3Eh9ui8lwls_69JqyoZJRDq5TtBTQi8oZlEmTdtcITxI2U8iBJ_BhrmMW1SBjvE-aivQ3CyWKHwyr9lCjEYlOdiPiHzQkHtfTyzOOAGopVFFsyVH4GNTCvHMxKuxkCpKuu_khz4lIBVa-7H2Mk1nmFkCJK7oyVW94PWbdG"
            }
          },
          "time": {
            "start": 1771213708711,
            "end": 1771213711900
          },
          "id": "prt_c64905da7001IS5ef7uJoLLd76",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64905295001PPMty2tjiznl83"
        },
        {
          "type": "tool",
          "callID": "call_1FVDJQlGDacY3NtDCc8NNTpN",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "git status --short",
              "description": "Inspect working tree changes after split update"
            },
            "output": " M .opencode/commands/capture_script_from_context.md\n M .opencode/commands/make_script.md\n M .opencode/skills/script-authoring/SKILL.md\n M AGENTS.md\n M README.md\n D docs/external/moonrepo/moonrepo_docs.ext.md\n M scripts/scrape_moon_docs.sh.ts\n?? docs/external/moonrepo/docs.ext.md\n?? docs/external/moonrepo/docs__cheat-sheet.ext.md\n?? docs/external/moonrepo/docs__commands.ext.md\n?? docs/external/moonrepo/docs__commands__action-graph.ext.md\n?? docs/external/moonrepo/docs__commands__bin.ext.md\n?? docs/external/moonrepo/docs__commands__check.ext.md\n?? docs/external/moonrepo/docs__commands__ci.ext.md\n?? docs/external/moonrepo/docs__commands__clean.ext.md\n?? docs/external/moonrepo/docs__commands__completions.ext.md\n?? docs/external/moonrepo/docs__commands__docker.ext.md\n?? docs/external/moonrepo/docs__commands__docker__file.ext.md\n?? docs/external/moonrepo/docs__commands__docker__prune.ext.md\n?? docs/external/moonrepo/docs__commands__docker__scaffold.ext.md\n?? docs/external/moonrepo/docs__commands__docker__setup.ext.md\n?? docs/external/moonrepo/docs__commands__exec.ext.md\n?? docs/external/moonrepo/docs__commands__ext.ext.md\n?? docs/external/moonrepo/docs__commands__extension.ext.md\n?? docs/external/moonrepo/docs__commands__extension__add.ext.md\n?? docs/external/moonrepo/docs__commands__extension__info.ext.md\n?? docs/external/moonrepo/docs__commands__generate.ext.md\n?? docs/external/moonrepo/docs__commands__hash.ext.md\n?? docs/external/moonrepo/docs__commands__init.ext.md\n?? docs/external/moonrepo/docs__commands__mcp.ext.md\n?? docs/external/moonrepo/docs__commands__overview.ext.md\n?? docs/external/moonrepo/docs__commands__project-graph.ext.md\n?? docs/external/moonrepo/docs__commands__project.ext.md\n?? docs/external/moonrepo/docs__commands__projects.ext.md\n?? docs/external/moonrepo/docs__commands__query.ext.md\n?? docs/external/moonrepo/docs__commands__query__affected.ext.md\n?? docs/external/moonrepo/docs__commands__query__changed-files.ext.md\n?? docs/external/moonrepo/docs__commands__query__projects.ext.md\n?? docs/external/moonrepo/docs__commands__query__tasks.ext.md\n?? docs/external/moonrepo/docs__commands__run.ext.md\n?? docs/external/moonrepo/docs__commands__setup.ext.md\n?? docs/external/moonrepo/docs__commands__sync.ext.md\n?? docs/external/moonrepo/docs__commands__sync__code-owners.ext.md\n?? docs/external/moonrepo/docs__commands__sync__config-schemas.ext.md\n?? docs/external/moonrepo/docs__commands__sync__projects.ext.md\n?? docs/external/moonrepo/docs__commands__sync__vcs-hooks.ext.md\n?? docs/external/moonrepo/docs__commands__task-graph.ext.md\n?? docs/external/moonrepo/docs__commands__task.ext.md\n?? docs/external/moonrepo/docs__commands__tasks.ext.md\n?? docs/external/moonrepo/docs__commands__teardown.ext.md\n?? docs/external/moonrepo/docs__commands__template.ext.md\n?? docs/external/moonrepo/docs__commands__templates.ext.md\n?? docs/external/moonrepo/docs__commands__toolchain.ext.md\n?? docs/external/moonrepo/docs__commands__toolchain__add.ext.md\n?? docs/external/moonrepo/docs__commands__toolchain__info.ext.md\n?? docs/external/moonrepo/docs__commands__upgrade.ext.md\n?? docs/external/moonrepo/docs__comparison.ext.md\n?? docs/external/moonrepo/docs__concepts.ext.md\n?? docs/external/moonrepo/docs__concepts__cache.ext.md\n?? docs/external/moonrepo/docs__concepts__file-group.ext.md\n?? docs/external/moonrepo/docs__concepts__file-pattern.ext.md\n?? docs/external/moonrepo/docs__concepts__project.ext.md\n?? docs/external/moonrepo/docs__concepts__query-lang.ext.md\n?? docs/external/moonrepo/docs__concepts__target.ext.md\n?? docs/external/moonrepo/docs__concepts__task-inheritance.ext.md\n?? docs/external/moonrepo/docs__concepts__task.ext.md\n?? docs/external/moonrepo/docs__concepts__token.ext.md\n?? docs/external/moonrepo/docs__concepts__toolchain.ext.md\n?? docs/external/moonrepo/docs__concepts__workspace.ext.md\n?? docs/external/moonrepo/docs__config.ext.md\n?? docs/external/moonrepo/docs__config__extensions.ext.md\n?? docs/external/moonrepo/docs__config__overview.ext.md\n?? docs/external/moonrepo/docs__config__project.ext.md\n?? docs/external/moonrepo/docs__config__tasks.ext.md\n?? docs/external/moonrepo/docs__config__template.ext.md\n?? docs/external/moonrepo/docs__config__toolchain.ext.md\n?? docs/external/moonrepo/docs__config__workspace.ext.md\n?? docs/external/moonrepo/docs__create-project.ext.md\n?? docs/external/moonrepo/docs__create-task.ext.md\n?? docs/external/moonrepo/docs__editors.ext.md\n?? docs/external/moonrepo/docs__editors__vscode.ext.md\n?? docs/external/moonrepo/docs__faq.ext.md\n?? docs/external/moonrepo/docs__guides__ci.ext.md\n?? docs/external/moonrepo/docs__guides__codegen.ext.md\n?? docs/external/moonrepo/docs__guides__codeowners.ext.md\n?? docs/external/moonrepo/docs__guides__debug-task.ext.md\n?? docs/external/moonrepo/docs__guides__docker.ext.md\n?? docs/external/moonrepo/docs__guides__examples__angular.ext.md\n?? docs/external/moonrepo/docs__guides__examples__astro.ext.md\n?? docs/external/moonrepo/docs__guides__examples__eslint.ext.md\n?? docs/external/moonrepo/docs__guides__examples__jest.ext.md\n?? docs/external/moonrepo/docs__guides__examples__nest.ext.md\n?? docs/external/moonrepo/docs__guides__examples__next.ext.md\n?? docs/external/moonrepo/docs__guides__examples__nuxt.ext.md\n?? docs/external/moonrepo/docs__guides__examples__packemon.ext.md\n?? docs/external/moonrepo/docs__guides__examples__prettier.ext.md\n?? docs/external/moonrepo/docs__guides__examples__react.ext.md\n?? docs/external/moonrepo/docs__guides__examples__remix.ext.md\n?? docs/external/moonrepo/docs__guides__examples__solid.ext.md\n?? docs/external/moonrepo/docs__guides__examples__storybook.ext.md\n?? docs/external/moonrepo/docs__guides__examples__sveltekit.ext.md\n?? docs/external/moonrepo/docs__guides__examples__typescript.ext.md\n?? docs/external/moonrepo/docs__guides__examples__vite.ext.md\n?? docs/external/moonrepo/docs__guides__examples__vue.ext.md\n?? docs/external/moonrepo/docs__guides__extensions.ext.md\n?? docs/external/moonrepo/docs__guides__javascript__bun-handbook.ext.md\n?? docs/external/moonrepo/docs__guides__javascript__deno-handbook.ext.md\n?? docs/external/moonrepo/docs__guides__javascript__node-handbook.ext.md\n?? docs/external/moonrepo/docs__guides__javascript__typescript-eslint.ext.md\n?? docs/external/moonrepo/docs__guides__javascript__typescript-project-refs.ext.md\n?? docs/external/moonrepo/docs__guides__mcp.ext.md\n?? docs/external/moonrepo/docs__guides__node__examples.ext.md\n?? docs/external/moonrepo/docs__guides__notifications.ext.md\n?? docs/external/moonrepo/docs__guides__offline-mode.ext.md\n?? docs/external/moonrepo/docs__guides__open-source.ext.md\n?? docs/external/moonrepo/docs__guides__pkl-config.ext.md\n?? docs/external/moonrepo/docs__guides__profile.ext.md\n?? docs/external/moonrepo/docs__guides__remote-cache.ext.md\n?? docs/external/moonrepo/docs__guides__root-project.ext.md\n?? docs/external/moonrepo/docs__guides__rust__handbook.ext.md\n?? docs/external/moonrepo/docs__guides__sharing-config.ext.md\n?? docs/external/moonrepo/docs__guides__vcs-hooks.ext.md\n?? docs/external/moonrepo/docs__guides__wasm-plugins.ext.md\n?? docs/external/moonrepo/docs__guides__webhooks.ext.md\n?? docs/external/moonrepo/docs__how-it-works.ext.md\n?? docs/external/moonrepo/docs__how-it-works__action-graph.ext.md\n?? docs/external/moonrepo/docs__how-it-works__languages.ext.md\n?? docs/external/moonrepo/docs__how-it-works__project-graph.ext.md\n?? docs/external/moonrepo/docs__how-it-works__task-graph.ext.md\n?? docs/external/moonrepo/docs__install.ext.md\n?? docs/external/moonrepo/docs__migrate-to-moon.ext.md\n?? docs/external/moonrepo/docs__migrate__2-0.ext.md\n?? docs/external/moonrepo/docs__proto.ext.md\n?? docs/external/moonrepo/docs__proto__commands__activate.ext.md\n?? docs/external/moonrepo/docs__proto__commands__alias.ext.md\n?? docs/external/moonrepo/docs__proto__commands__bin.ext.md\n?? docs/external/moonrepo/docs__proto__commands__clean.ext.md\n?? docs/external/moonrepo/docs__proto__commands__completions.ext.md\n?? docs/external/moonrepo/docs__proto__commands__debug.ext.md\n?? docs/external/moonrepo/docs__proto__commands__debug__config.ext.md\n?? docs/external/moonrepo/docs__proto__commands__debug__env.ext.md\n?? docs/external/moonrepo/docs__proto__commands__diagnose.ext.md\n?? docs/external/moonrepo/docs__proto__commands__exec.ext.md\n?? docs/external/moonrepo/docs__proto__commands__install.ext.md\n?? docs/external/moonrepo/docs__proto__commands__list-remote.ext.md\n?? docs/external/moonrepo/docs__proto__commands__list.ext.md\n?? docs/external/moonrepo/docs__proto__commands__outdated.ext.md\n?? docs/external/moonrepo/docs__proto__commands__pin.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin__add.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin__info.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin__list.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin__remove.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin__search.ext.md\n?? docs/external/moonrepo/docs__proto__commands__regen.ext.md\n?? docs/external/moonrepo/docs__proto__commands__run.ext.md\n?? docs/external/moonrepo/docs__proto__commands__setup.ext.md\n?? docs/external/moonrepo/docs__proto__commands__status.ext.md\n?? docs/external/moonrepo/docs__proto__commands__unalias.ext.md\n?? docs/external/moonrepo/docs__proto__commands__uninstall.ext.md\n?? docs/external/moonrepo/docs__proto__commands__unpin.ext.md\n?? docs/external/moonrepo/docs__proto__commands__upgrade.ext.md\n?? docs/external/moonrepo/docs__proto__commands__use.ext.md\n?? docs/external/moonrepo/docs__proto__commands__versions.ext.md\n?? docs/external/moonrepo/docs__proto__config.ext.md\n?? docs/external/moonrepo/docs__proto__detection.ext.md\n?? docs/external/moonrepo/docs__proto__faq.ext.md\n?? docs/external/moonrepo/docs__proto__install.ext.md\n?? docs/external/moonrepo/docs__proto__non-wasm-plugin.ext.md\n?? docs/external/moonrepo/docs__proto__plugins.ext.md\n?? docs/external/moonrepo/docs__proto__tool-spec.ext.md\n?? docs/external/moonrepo/docs__proto__tools.ext.md\n?? docs/external/moonrepo/docs__proto__wasm-plugin.ext.md\n?? docs/external/moonrepo/docs__proto__workflows.ext.md\n?? docs/external/moonrepo/docs__run-task.ext.md\n?? docs/external/moonrepo/docs__setup-toolchain.ext.md\n?? docs/external/moonrepo/docs__setup-workspace.ext.md\n?? docs/external/moonrepo/docs__terminology.ext.md\n?? docs/external/moonrepo/index.ext.md\n",
            "title": "Inspect working tree changes after split update",
            "metadata": {
              "output": " M .opencode/commands/capture_script_from_context.md\n M .opencode/commands/make_script.md\n M .opencode/skills/script-authoring/SKILL.md\n M AGENTS.md\n M README.md\n D docs/external/moonrepo/moonrepo_docs.ext.md\n M scripts/scrape_moon_docs.sh.ts\n?? docs/external/moonrepo/docs.ext.md\n?? docs/external/moonrepo/docs__cheat-sheet.ext.md\n?? docs/external/moonrepo/docs__commands.ext.md\n?? docs/external/moonrepo/docs__commands__action-graph.ext.md\n?? docs/external/moonrepo/docs__commands__bin.ext.md\n?? docs/external/moonrepo/docs__commands__check.ext.md\n?? docs/external/moonrepo/docs__commands__ci.ext.md\n?? docs/external/moonrepo/docs__commands__clean.ext.md\n?? docs/external/moonrepo/docs__commands__completions.ext.md\n?? docs/external/moonrepo/docs__commands__docker.ext.md\n?? docs/external/moonrepo/docs__commands__docker__file.ext.md\n?? docs/external/moonrepo/docs__commands__docker__prune.ext.md\n?? docs/external/moonrepo/docs__commands__docker__scaffold.ext.md\n?? docs/external/moonrepo/docs__commands__docker__setup.ext.md\n?? docs/external/moonrepo/docs__commands__exec.ext.md\n?? docs/external/moonrepo/docs__commands__ext.ext.md\n?? docs/external/moonrepo/docs__commands__extension.ext.md\n?? docs/external/moonrepo/docs__commands__extension__add.ext.md\n?? docs/external/moonrepo/docs__commands__extension__info.ext.md\n?? docs/external/moonrepo/docs__commands__generate.ext.md\n?? docs/external/moonrepo/docs__commands__hash.ext.md\n?? docs/external/moonrepo/docs__commands__init.ext.md\n?? docs/external/moonrepo/docs__commands__mcp.ext.md\n?? docs/external/moonrepo/docs__commands__overview.ext.md\n?? docs/external/moonrepo/docs__commands__project-graph.ext.md\n?? docs/external/moonrepo/docs__commands__project.ext.md\n?? docs/external/moonrepo/docs__commands__projects.ext.md\n?? docs/external/moonrepo/docs__commands__query.ext.md\n?? docs/external/moonrepo/docs__commands__query__affected.ext.md\n?? docs/external/moonrepo/docs__commands__query__changed-files.ext.md\n?? docs/external/moonrepo/docs__commands__query__projects.ext.md\n?? docs/external/moonrepo/docs__commands__query__tasks.ext.md\n?? docs/external/moonrepo/docs__commands__run.ext.md\n?? docs/external/moonrepo/docs__commands__setup.ext.md\n?? docs/external/moonrepo/docs__commands__sync.ext.md\n?? docs/external/moonrepo/docs__commands__sync__code-owners.ext.md\n?? docs/external/moonrepo/docs__commands__sync__config-schemas.ext.md\n?? docs/external/moonrepo/docs__commands__sync__projects.ext.md\n?? docs/external/moonrepo/docs__commands__sync__vcs-hooks.ext.md\n?? docs/external/moonrepo/docs__commands__task-graph.ext.md\n?? docs/external/moonrepo/docs__commands__task.ext.md\n?? docs/external/moonrepo/docs__commands__tasks.ext.md\n?? docs/external/moonrepo/docs__commands__teardown.ext.md\n?? docs/external/moonrepo/docs__commands__template.ext.md\n?? docs/external/moonrepo/docs__commands__templates.ext.md\n?? docs/external/moonrepo/docs__commands__toolchain.ext.md\n?? docs/external/moonrepo/docs__commands__toolchain__add.ext.md\n?? docs/external/moonrepo/docs__commands__toolchain__info.ext.md\n?? docs/external/moonrepo/docs__commands__upgrade.ext.md\n?? docs/external/moonrepo/docs__comparison.ext.md\n?? docs/external/moonrepo/docs__concepts.ext.md\n?? docs/external/moonrepo/docs__concepts__cache.ext.md\n?? docs/external/moonrepo/docs__concepts__file-group.ext.md\n?? docs/external/moonrepo/docs__concepts__file-pattern.ext.md\n?? docs/external/moonrepo/docs__concepts__project.ext.md\n?? docs/external/moonrepo/docs__concepts__query-lang.ext.md\n?? docs/external/moonrepo/docs__concepts__target.ext.md\n?? docs/external/moonrepo/docs__concepts__task-inheritance.ext.md\n?? docs/external/moonrepo/docs__concepts__task.ext.md\n?? docs/external/moonrepo/docs__concepts__token.ext.md\n?? docs/external/moonrepo/docs__concepts__toolchain.ext.md\n?? docs/external/moonrepo/docs__concepts__workspace.ext.md\n?? docs/external/moonrepo/docs__config.ext.md\n?? docs/external/moonrepo/docs__config__extensions.ext.md\n?? docs/external/moonrepo/docs__config__overview.ext.md\n?? docs/external/moonrepo/docs__config__project.ext.md\n?? docs/external/moonrepo/docs__config__tasks.ext.md\n?? docs/external/moonrepo/docs__config__template.ext.md\n?? docs/external/moonrepo/docs__config__toolchain.ext.md\n?? docs/external/moonrepo/docs__config__workspace.ext.md\n?? docs/external/moonrepo/docs__create-project.ext.md\n?? docs/external/moonrepo/docs__create-task.ext.md\n?? docs/external/moonrepo/docs__editors.ext.md\n?? docs/external/moonrepo/docs__editors__vscode.ext.md\n?? docs/external/moonrepo/docs__faq.ext.md\n?? docs/external/moonrepo/docs__guides__ci.ext.md\n?? docs/external/moonrepo/docs__guides__codegen.ext.md\n?? docs/external/moonrepo/docs__guides__codeowners.ext.md\n?? docs/external/moonrepo/docs__guides__debug-task.ext.md\n?? docs/external/moonrepo/docs__guides__docker.ext.md\n?? docs/external/moonrepo/docs__guides__examples__angular.ext.md\n?? docs/external/moonrepo/docs__guides__examples__astro.ext.md\n?? docs/external/moonrepo/docs__guides__examples__eslint.ext.md\n?? docs/external/moonrepo/docs__guides__examples__jest.ext.md\n?? docs/external/moonrepo/docs__guides__examples__nest.ext.md\n?? docs/external/moonrepo/docs__guides__examples__next.ext.md\n?? docs/external/moonrepo/docs__guides__examples__nuxt.ext.md\n?? docs/external/moonrepo/docs__guides__examples__packemon.ext.md\n?? docs/external/moonrepo/docs__guides__examples__prettier.ext.md\n?? docs/external/moonrepo/docs__guides__examples__react.ext.md\n?? docs/external/moonrepo/docs__guides__examples__remix.ext.md\n?? docs/external/moonrepo/docs__guides__examples__solid.ext.md\n?? docs/external/moonrepo/docs__guides__examples__storybook.ext.md\n?? docs/external/moonrepo/docs__guides__examples__sveltekit.ext.md\n?? docs/external/moonrepo/docs__guides__examples__typescript.ext.md\n?? docs/external/moonrepo/docs__guides__examples__vite.ext.md\n?? docs/external/moonrepo/docs__guides__examples__vue.ext.md\n?? docs/external/moonrepo/docs__guides__extensions.ext.md\n?? docs/external/moonrepo/docs__guides__javascript__bun-handbook.ext.md\n?? docs/external/moonrepo/docs__guides__javascript__deno-handbook.ext.md\n?? docs/external/moonrepo/docs__guides__javascript__node-handbook.ext.md\n?? docs/external/moonrepo/docs__guides__javascript__typescript-eslint.ext.md\n?? docs/external/moonrepo/docs__guides__javascript__typescript-project-refs.ext.md\n?? docs/external/moonrepo/docs__guides__mcp.ext.md\n?? docs/external/moonrepo/docs__guides__node__examples.ext.md\n?? docs/external/moonrepo/docs__guides__notifications.ext.md\n?? docs/external/moonrepo/docs__guides__offline-mode.ext.md\n?? docs/external/moonrepo/docs__guides__open-source.ext.md\n?? docs/external/moonrepo/docs__guides__pkl-config.ext.md\n?? docs/external/moonrepo/docs__guides__profile.ext.md\n?? docs/external/moonrepo/docs__guides__remote-cache.ext.md\n?? docs/external/moonrepo/docs__guides__root-project.ext.md\n?? docs/external/moonrepo/docs__guides__rust__handbook.ext.md\n?? docs/external/moonrepo/docs__guides__sharing-config.ext.md\n?? docs/external/moonrepo/docs__guides__vcs-hooks.ext.md\n?? docs/external/moonrepo/docs__guides__wasm-plugins.ext.md\n?? docs/external/moonrepo/docs__guides__webhooks.ext.md\n?? docs/external/moonrepo/docs__how-it-works.ext.md\n?? docs/external/moonrepo/docs__how-it-works__action-graph.ext.md\n?? docs/external/moonrepo/docs__how-it-works__languages.ext.md\n?? docs/external/moonrepo/docs__how-it-works__project-graph.ext.md\n?? docs/external/moonrepo/docs__how-it-works__task-graph.ext.md\n?? docs/external/moonrepo/docs__install.ext.md\n?? docs/external/moonrepo/docs__migrate-to-moon.ext.md\n?? docs/external/moonrepo/docs__migrate__2-0.ext.md\n?? docs/external/moonrepo/docs__proto.ext.md\n?? docs/external/moonrepo/docs__proto__commands__activate.ext.md\n?? docs/external/moonrepo/docs__proto__commands__alias.ext.md\n?? docs/external/moonrepo/docs__proto__commands__bin.ext.md\n?? docs/external/moonrepo/docs__proto__commands__clean.ext.md\n?? docs/external/moonrepo/docs__proto__commands__completions.ext.md\n?? docs/external/moonrepo/docs__proto__commands__debug.ext.md\n?? docs/external/moonrepo/docs__proto__commands__debug__config.ext.md\n?? docs/external/moonrepo/docs__proto__commands__debug__env.ext.md\n?? docs/external/moonrepo/docs__proto__commands__diagnose.ext.md\n?? docs/external/moonrepo/docs__proto__commands__exec.ext.md\n?? docs/external/moonrepo/docs__proto__commands__install.ext.md\n?? docs/external/moonrepo/docs__proto__commands__list-remote.ext.md\n?? docs/external/moonrepo/docs__proto__commands__list.ext.md\n?? docs/external/moonrepo/docs__proto__commands__outdated.ext.md\n?? docs/external/moonrepo/docs__proto__commands__pin.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin__add.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin__info.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin__list.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin__remove.ext.md\n?? docs/external/moonrepo/docs__proto__commands__plugin__search.ext.md\n?? docs/external/moonrepo/docs__proto__commands__regen.ext.md\n?? docs/external/moonrepo/docs__proto__commands__run.ext.md\n?? docs/external/moonrepo/docs__proto__commands__setup.ext.md\n?? docs/external/moonrepo/docs__proto__commands__status.ext.md\n?? docs/external/moonrepo/docs__proto__commands__unalias.ext.md\n?? docs/external/moonrepo/docs__proto__commands__uninstall.ext.md\n?? docs/external/moonrepo/docs__proto__commands__unpin.ext.md\n?? docs/external/moonrepo/docs__proto__commands__upgrade.ext.md\n?? docs/external/moonrepo/docs__proto__commands__use.ext.md\n?? docs/external/moonrepo/docs__proto__commands__versions.ext.md\n?? docs/external/moonrepo/docs__proto__config.ext.md\n?? docs/external/moonrepo/docs__proto__detection.ext.md\n?? docs/external/moonrepo/docs__proto__faq.ext.md\n?? docs/external/moonrepo/docs__proto__install.ext.md\n?? docs/external/moonrepo/docs__proto__non-wasm-plugin.ext.md\n?? docs/external/moonrepo/docs__proto__plugins.ext.md\n?? docs/external/moonrepo/docs__proto__tool-spec.ext.md\n?? docs/external/moonrepo/docs__proto__tools.ext.md\n?? docs/external/moonrepo/docs__proto__wasm-plugin.ext.md\n?? docs/external/moonrepo/docs__proto__workflows.ext.md\n?? docs/external/moonrepo/docs__run-task.ext.md\n?? docs/external/moonrepo/docs__setup-toolchain.ext.md\n?? docs/external/moonrepo/docs__setup-workspace.ext.md\n?? docs/external/moonrepo/docs__terminology.ext.md\n?? docs/external/moonrepo/index.ext.md\n",
              "exit": 0,
              "description": "Inspect working tree changes after split update",
              "truncated": false
            },
            "time": {
              "start": 1771213712054,
              "end": 1771213712077
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0449d1a8145be8df016992938fd5e88190bbb525be631f4e3b"
            }
          },
          "id": "prt_c64906a1e001bwEYKlbfXHVOEM",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64905295001PPMty2tjiznl83"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "cost": 0,
          "tokens": {
            "total": 91807,
            "input": 1160,
            "output": 151,
            "reasoning": 118,
            "cache": {
              "read": 90496,
              "write": 0
            }
          },
          "id": "prt_c64906aed001WtNwZaB0tHOxfW",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64905295001PPMty2tjiznl83"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213712172,
          "completed": 1771213724147
        },
        "parentID": "msg_c648cc2570015sHEQpEkzR355z",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 95361,
          "input": 3113,
          "output": 600,
          "reasoning": 255,
          "cache": {
            "read": 91648,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "stop",
        "id": "msg_c64906b2c0013MTVkFDwxtB7s4",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "id": "prt_c64907578001QmgqL8LqRkNpnB",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64906b2c0013MTVkFDwxtB7s4"
        },
        {
          "type": "reasoning",
          "text": "**Summarizing script and docs updates**",
          "metadata": {
            "openai": {
              "itemId": "rs_0ad1849d180f43870169929393142c81948615b9df5564537c",
              "reasoningEncryptedContent": "gAAAAABpkpOXa4GD0vOjovvZFj4_B1_FsrlKbF0-zyrNv-JTzSJ0c9rfTQtx4iHbfN3DtcxLvumr91BaoLj6d9zDCPN9ky4X99nyccG345zcJxFFDIO7hVHAeh57Y4nvmOEoJ9wfpMWHZMPF3dmSowgG_SEXbD-zG2jNEwmZS-SNeGczzzQOY5m14ISo_AEQHrmC9UxJyedBi_kOFHCPcM_Vr64bWSPCAX--JBp3K9xuMDKTGbTsn5U4-IuEADx0hJB2X8qKqK1GBe2LbT5mLg4bTzfhwZ0umBmfWEPTmAbLqran_JcLdhVjal1h0y_mJuTvVIHovrJg74o8EfZvwcsGv5vqzYhV82wsLoMEYSCzbShxpt-SaXbRM3HJIjKvSd8fMN4JvMB0w4EDAbDUx6OA11BVQMGimroWe7s60-JyJLRUYn6hrmbZ47RtfZG7dYS3Ajb2JGT3GuOo8IsU726o00uT2xQdfKeSFxkVaa5Ka6ol-hOCFCoLdQ1WC7GHBfk-U-OILNR18n1ODZMup06Mw2hu-eOAssylnYBS3oXX6a4rUs8rfd4miT0vL2ab9-0Xve-DJq7ag86VqZcjpH-3CBYXPHUYJRyOcKYn42xVhTAH5rynihs8UnY1XKTL0vmeta6shqBbFBUtG-wNQo60lHVHmqL1x56ZsdH75imNZplanLoO6zWicMMn1czfuh9iNpGjFLf934NtDIkiLXDTbl_ArZxMsj37I_T9NK6QFMHarDU2EQkYa-9mlazFXpMuO5Mtk6fFT4arNB466vP0WBS0-yOkRxzjFd_pBB_c8aFprgYSjHm5t9kcpDzCSyDSZT4hilQt5Qho_ZrZArHA9DCjnOKLZCFORZy-piLGKC5F1h6VYa4QpqzA86odvPEWQy9WajRnFCub0_xva42r12yVy9JYT8dE3HSVhAQP79sDsSwKLsgTC3KsfzwoyfNxkzaupr4vO-yacIMAh_oymvhPhyKkrANib0DdeigHJ2exOIGNFmiADzRK6TjjWjyBrfuzBe_3lJSeGqG6KkPbwuIe8qhgGOjH7MVZDb4pSY9MfYMv9V6OltFZz1pmjmjK_2EzMYOEXo36in0zwYQKloiQYJe3zdtkPKslGhGOofhDS5JtnrYXdCuCesKDHO_ryskMbtmz23krchwhNpMRu9ImwWFGdasY1luMF3MuOW1VuqOFU7wiOvAA-xAOAnHXsdZeqRt7sz3Re3Q13F4HPfSnaTLc2korZLSjJHE6FOI9Zhxj35m1bz3cZ6ajfICzcatcNLzflEV1t5h4uPWi0frIHsdFxDsSVNvDmjD1kueF4o5kuFIjfwC3ZonE2fC5JlTe9xt8yBjGDYkP30YnKbUFE_2aob40foS10KmNTiZFu4qSvpwpZ6nVGCU5hdzrsN4rqY3t6NX5ovzuXNh0L878IXaLC_naRNCsoen8vIjGmNACcygAYyZ_Z05fxDF3n17UmefAdjr5mVQdwd42_fdLX6epXB-bAPtFAvFEE-U0wyrKKbAYZEmwxpokSrOg-IkZVUSuRMoq8keP-TGPHhxic0FANruh0Qcf4uqNT7Qmezg7P2YX6dkzNBig06HZnltWCQ70MKl1sSMvZw3HMTu_lNZ7T2u1mJD4A-8lLsbWC5mswkJdy3PlUvQi0NwCz2OaHPcPUBhWSry7IYUzVC-vb2lyH0_4ytGtqyklw1jf8jXEoOYlfA3biaLLWeZt9kfcP_lVGa0HxiJVcTB_arRGKtlwBOn9N19OWAJmmZziXhtIcsNUeFlYuX5r1VF5NVPyI7pUD2zhGOOIAItX3Fs4P8cWdCYFRIhnqxghwclZc1mb0p-VZkT7PMhhaGlvHclk1eZlOf9zJLDgeSYmrThv-I8ZjzOn_BybuzmHR-c8qLYDDgT45ASEyA-p3oVPbA66OteTiLxhMAzDzZtZb5wvOKpHRLlUYNBteZ9ccAgWQaramN5mUHWy5TnWxtjfItD9lN9hp9p1olSfZ01C6Fk_0eUsI5iV7dmosBnTokA8HSHTI0fKhb6-9SSBcxfnZsahIHczDesz_0A1zf0-PC39xEGeDW8lBICf4BIw4fwbymBrc1wkd_2xbeJ588jRAtMRNNrdr_AthZ6h8Cg7BhkvK0mhw6fc6SIZgb7KzZYDHYzmRrxdnp5wBvgJn9fzmAOkFpJZv2Tj8K6tZ8_Kp4i7XDy6iOfgkCntXm6xWbHr-hvakv1xhSAagq66Qt6MTlsVkQ3f2ut4rB6IDLKV_F9bPYGsL4crF4w4FlAN9WCEvAZ7lgqlAx5cs0e_VE5kMaSDXvwf6HBz7hmyBYMUiT4HLDzK5d0TuiJ4vQD0GDJYxP1AC-B2Mtt7v6tApofTQEQzGs6DmHv9Thl37Rnygd47GbAogyksq_uLBc45J5_Z40ZhTb1fU5zVVLc9c7PFfaidEImUSWAeyvp604U57XO_z5fASiuFj4t6Ii6ZQorZD8DS0_21ppC77q9M2MP3l1TTiCKj2Fz9i-kLz7IWLj19M2GRUZ6kzOLO0Ub_QMOv8h8PKLcbcM2rGEevwS_zSPju16Bh"
            }
          },
          "time": {
            "start": 1771213715177,
            "end": 1771213719356
          },
          "id": "prt_c649076e9001zR5FojS40rODJq",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64906b2c0013MTVkFDwxtB7s4"
        },
        {
          "type": "text",
          "text": "Updated  it now writes split per-page docs **and** an index file.\n\n- Scraper updated: `scripts/scrape_moon_docs.sh.ts`\n- Output format now:\n  - Per-page files: `docs/external/moonrepo/*.ext.md` (171 pages)\n  - Index file: `docs/external/moonrepo/index.ext.md`\n- Legacy monolith removed: `docs/external/moonrepo/moonrepo_docs.ext.md` (deleted)\n- Each page file includes your requested `----` header + summary/keywords and `----` footer notes section.\n- `index.ext.md` also includes `----` header/footer and links to every per-page `.ext.md`.\n\nI also adjusted the related skill/rules/commands/docs notes:\n\n- `README.md` (script behavior updated to split pages + index)\n- `AGENTS.md` (script conventions updated to split pages + index)\n- `.opencode/skills/script-authoring/SKILL.md` (docs-scrape output convention note)\n- `.opencode/commands/make_script.md` (process note for split `.ext.md` + `index.ext.md`)\n- `.opencode/commands/capture_script_from_context.md` (same note)\n\nVerification run:\n\n- `chmod +x \"scripts/scrape_moon_docs.sh.ts\" && bun \"scripts/scrape_moon_docs.sh.ts\"`\n- Confirmed output count and index:\n  - 172 files total in `docs/external/moonrepo` (171 pages + `index.ext.md`)\n  - `index.ext.md` present\n  - `moonrepo_docs.ext.md` absent (removed)",
          "time": {
            "start": 1771213723975,
            "end": 1771213723975
          },
          "metadata": {
            "openai": {
              "itemId": "msg_0ad1849d180f438701699293974fb48194882f7709a0524030"
            }
          },
          "id": "prt_c64908740001eEMItxYpk3zMrz",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64906b2c0013MTVkFDwxtB7s4"
        },
        {
          "type": "step-finish",
          "reason": "stop",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "cost": 0,
          "tokens": {
            "total": 95361,
            "input": 3113,
            "output": 600,
            "reasoning": 255,
            "cache": {
              "read": 91648,
              "write": 0
            }
          },
          "id": "prt_c6490997e001G27P2i6yCIiQGA",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64906b2c0013MTVkFDwxtB7s4"
        }
      ]
    },
    {
      "info": {
        "role": "user",
        "time": {
          "created": 1771213935743
        },
        "summary": {
          "title": "Gitter-commit workflow: commit hygiene and status check",
          "diffs": []
        },
        "agent": "build",
        "model": {
          "providerID": "openai",
          "modelID": "gpt-5.3-codex"
        },
        "variant": "high",
        "id": "msg_c6493d47b001s2M41d7JbExGT7",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "text",
          "text": "Use the `gitter-commit` skill from `.opencode/skills/gitter-commit/SKILL.md` and route commit execution through `@gitter`.\n\nGoal:\n\n- Turn the current working tree into a clean set of meaningful commits (not a single `git add -A` dump)\n- End with a clean `git status`\n\nProcess:\n\n1. Inspect the repository state (`git status`, staged/unstaged diffs, and recent commit titles for style).\n2. Group changes into logical commit units (by feature, fix, docs, config, refactor, etc.).\n3. For each commit unit:\n   - Stage only the relevant files.\n   - Write a commit title using this repo format:\n     - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n   - Add a short commit body rationale and signature when possible.\n4. Repeat until all intended tracked changes are committed.\n5. Confirm final `git status` is clean.\n\nRules:\n\n- Prefer multiple small meaningful commits over one large mixed commit.\n- Do not commit likely secret files (`.env`, credentials, private keys).\n- Do not push.\n- If no commit-worthy changes exist, report that clearly.\n\nReturn:\n\n- Commit list in order (hash + title + files)\n- Any skipped files and why\n- Final `git status` summary",
          "id": "prt_c6493d47f001B8RJlVGBUQTxXl",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6493d47b001s2M41d7JbExGT7"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213935759,
          "completed": 1771213943743
        },
        "parentID": "msg_c6493d47b001s2M41d7JbExGT7",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 91150,
          "input": 18311,
          "output": 263,
          "reasoning": 241,
          "cache": {
            "read": 72576,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c6493d48f001aC1gdsOBB56nUJ",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "id": "prt_c6493dd36001rw1z0WMSuQdt1O",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6493d48f001aC1gdsOBB56nUJ"
        },
        {
          "type": "reasoning",
          "text": "**Preparing gitter commit delegation**",
          "metadata": {
            "openai": {
              "itemId": "rs_0ea97e09dd93a24701699294737fdc8190b036347fd9ba23da",
              "reasoningEncryptedContent": "gAAAAABpkpR3cp-kKsc7Q8cjfvQE5BiCEVyyxk_rxxOlqMtU_-EJvxZIWlL076PDLu4L14hNd0s1shl-VavbEXIhfKosZVsOg2in1stiz46kPRStNXW0VIH0w1mKzUPucrMP-s5v-sCaflYkhp0qdzLahpTY8KDJSAsJgXGXKkRphXIjAXE9UcpGS2zAZPY-gSHtR6gHlleyii4vP58OfKsRAqyY3RtNd-YGdziRXXSeIUTUvQ-vLAOJSG5B36wgzH9Du_a4vGPXy9Spf5hdfDr2672Scx0vs7ZoxYP7l9zizy9SJ0sjkb2y8Z26SitqaaI8CZzrDjflKBAesHLcPPGip3p5UgAnYHlw3EiiNJcSHrO6mN4E_H-TBll4xQ5EoAB10R0qhAdCUTtBREbkHAV8wZvHYFp30EIScT4RUwl3VTg8QPpY0SYSoFXKPlhW3tJwE1IitOniHoRP6aIVobRI32PB8ZdSAqCeyO-vXo-zMUtjmbxinAC-_khQnWRTeyXaAXTA77oQeuSLUOfIM0R-l_C_gaXIkQIshN9_9PfPYOOaO3g54_Wdlspn5iuxlD090lJbq2ZqcZxcuYbNd-viBjofZPO1lLjrJf9Qrsp5mXlKC8LP00iKox5fWHKaJy-mSgHpcgnsiWygg3RNAQKRP61F6PVLbai0v06uvWDkTIgee5476i6GPNeBeEs8H7iAqLI0boc1mDpltGxtTBZOFpwMoCIikgSjP9MeoECO3CBLlkHWg0L2PnZGMMFOm2ehMdjzCSgV3CdLikxgh96ggV-80Z7VuIf4qLCMQoJnGN81pR0YhLkUGJ2RTmzQRvEEDNexNFCxGvBf_MxGD0cLoKL3pY90cDAFWUqPjVQX4quZpBDpn3N0a7ba3DRO8ckJadn3pCIkAHNjT51ZKgfjSWi3TpLZcub4j9JiBIN8n68S1HUFIb0cllEMGZ3zL65aoKaoOWXRhFHiDpQJX6YJe8KAD28PX0mforo6tqD-i6lLZZS53X8kHqGANB7StZU5fwleuOOfJiRJuCWbl7-oZTK31hew1_MND_htC01pYGSCO8twpAK4YZrZJUjcg5egyfoBG8oHACTgKevX9sW3qI0AJFJAAZ_J6N4SUr70mmj3LAL_YOiGFOO7H2TmQbkK1NfHtnxDUecfiOiDjTuxss2K-CCFnPOnA6qIE0obIDBIEAcLhXDp-HJ0lVJ2nCeX9P8HvF1b8Vc7TIiAZa35tfSLa3RKcLbcnPGqDehnT8BFY6llCEXGTe6SKPfWXXcu6lwY_9z52_GHwhvmqCmKjYk2iyhuplBjHZ4pFIRenPmYu-YBnKK4NjruCPJS4dup7R-2M1BAR4iw4gz0UjEEn6YFQEff1JeD8gMTelcSxo_Z9B78iPkhNIGBXP2cuZJWvh1oKG73qw_LzyAjCLfwdz_kOnqgYn5-M-knNXpvl3A2HXy-tzCscqchDdgcF69EtOPiQCQeZJ3haCmGgDic8xtiGdHiQxh9QWeYau33wZ52zzDBNGGuVK7maFRz0ziD1hLF6tNdzb5f8dIbt6mChAEdCEIQDBLebjlyb73TMyipm3wflSpE2iOlEV-an6nXE1zFsFkeNx580tl97-943vfXMC4RQ3nCU08gdljG2KLfthQhdBoT3rwY1Tr78VrXxPM4q0j63aR_FeJno7OT21BxsLgZN89h3u1cipzNGGkxf_hoYtzzJ1Ykr-SiK1tZr0CWHgjtdTsn_K5mbO8ZkEkrLy8WTMEVRCFeYjT6lb1fhCkaAVkOqJ4_-gSmkDL2LXf3njbyIu4SmMfOAF-qjcRAb7ZNadfya176aIIIWnp4rQB9Ri6qnt-Y74k8aKO8E1S6WYnG1FpmvFNe6a6r6lrQb-rAVavv_KVKaiaCdh8VIWxhjjOYHCNyQZNxxUZO4ZURb_lWl12e3lz0_XVbN-QYQOxaS2gYxAXgpkw5OL8BHDGwkzyRzAxd9aY6cKc4jIOgcN99wOSUJgZIHq3W-Uh1kEmzogUdU0_BuZl9ybMoNDMMEQNwjCNthfZz4ecnR1Ik2hy3_XspFCfVn5zEAsPJJrP7QibXOWWkDaFFC6zmmrNWqcN_XscErDY0G63_IKQbaVjKV2v41cGEDGlHthSDjKqbM1SqfyRAeRvH54pT9FF0kPE7yCXWBvqPPIzFOqVu8UHwk-jvt6L4Bsg-BAAOBuxFd17BjGUhlvYGjLJCoQ42SmqJ9-FpszhJi4TpX48tt6eM6IYVr_ozr5KVzKKhsvvN2oSFsHgmCbVkJwxzZsC6S9vIQBNUP_orsHyUu2PUBoNixoeVbHSw69vb83VdQILN4RO4lXLc2mgxbcVNDAnWI7W_axzCRSHpfmvmU3cEmc9OYPKkDR3LxWQLKZwBZaCz19yATtRXysPQjftj7ejLqVM="
            }
          },
          "time": {
            "start": 1771213939527,
            "end": 1771213943566
          },
          "id": "prt_c6493e347001FXOFgeGxisAg2v",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6493d48f001aC1gdsOBB56nUJ"
        },
        {
          "type": "tool",
          "callID": "call_OrJN15Yu4cZeg5IXLKnlVXgj",
          "tool": "skill",
          "state": {
            "status": "completed",
            "input": {
              "name": "gitter-commit"
            },
            "output": "<skill_content name=\"gitter-commit\">\n# Skill: gitter-commit\n\n## What I do\n\n- Remind parent agents to invoke `@gitter` when commits are requested or changes should be captured.\n- Provide a short template for the handoff context (scope, intent, and any constraints).\n\n## When to use me\n\nUse this whenever the user asks for commits, when a task introduces meaningful changes, or when the working tree should be cleaned up into commits.\n\n## Handoff template\n\nSend `@gitter` a short summary like:\n\n- Goal: <what the user asked for>\n- Scope: <files or areas touched>\n- Notes: <any constraints, tests run, or commit grouping preferences>\n\nBase directory for this skill: file:///Users/alex/repos/vfp/dark-factory/.opencode/skills/gitter-commit\nRelative paths in this skill (e.g., scripts/, reference/) are relative to this base directory.\nNote: file list is sampled.\n\n<skill_files>\n\n</skill_files>\n</skill_content>",
            "title": "Loaded skill: gitter-commit",
            "metadata": {
              "name": "gitter-commit",
              "dir": "/Users/alex/repos/vfp/dark-factory/.opencode/skills/gitter-commit",
              "truncated": false
            },
            "time": {
              "start": 1771213943626,
              "end": 1771213943637
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0ea97e09dd93a247016992947770f481908aeece90f6c4aa40"
            }
          },
          "id": "prt_c6493f310001AoATLKkjzPucB3",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6493d48f001aC1gdsOBB56nUJ"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "cost": 0,
          "tokens": {
            "total": 91150,
            "input": 18311,
            "output": 263,
            "reasoning": 241,
            "cache": {
              "read": 72576,
              "write": 0
            }
          },
          "id": "prt_c6493f388001JESfcHX42uoTyS",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6493d48f001aC1gdsOBB56nUJ"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771213943760,
          "completed": 1771214025712
        },
        "error": {
          "name": "MessageAbortedError",
          "data": {
            "message": "The operation was aborted."
          }
        },
        "parentID": "msg_c6493d47b001s2M41d7JbExGT7",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "input": 0,
          "output": 0,
          "reasoning": 0,
          "cache": {
            "read": 0,
            "write": 0
          }
        },
        "variant": "high",
        "id": "msg_c6493f3d0001Lzh2tSfOLjwpMT",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "id": "prt_c6493fd5e001q1zLVjb5i5tEQC",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6493f3d0001Lzh2tSfOLjwpMT"
        },
        {
          "type": "reasoning",
          "text": "**Planning commit via subagent**",
          "metadata": {
            "openai": {
              "itemId": "rs_08a640195070eff5016992947a6e10819083003fb03a8d432c",
              "reasoningEncryptedContent": "gAAAAABpkpSCyvVZpbcYjoJvx3eTyToYFCyhHocFRDlXQS_APCALMwBkVsVBv6rlz2ygA8R-kwzIEoxMXlZYY2SthvxzLPxT3-ST5CJcLIWoAOZj_f5ub6x2GePLW0iO3QK8167dYDuNpU16o1alvBcuCJFX-o-npTWasXhASYsccqK5IvggiTZCbakvJym0-bRsHh-FfrrkllAmjknV0Z_z_OAIl1J-h8adH1Evv7fVirUSenKuQebQN1KO5oDfq_pH47cnikc-m3__wwMF1meJBxA_HCrSWRBo5BQi2OnhosvqNFaQL6fv1xE1TtXoniGBOgDQ92hnJkxx0zlK8m9aJ_KaH4NQsoyIRWddAOv3pIIeWSkySCyMdeDax4RYriXfABXyGTVQDPs9VvECJPdE6Dl7NBLPv2JBAB1ISjmCXIVCZEtpO2VJoSFZOb9BMPevPN2ux8hTyUSRMo2tupwm2xRLB7sztE3EyS5T0wviDx5A2ezdDnPPu2MjZiHN0QnQ79k47N9YtWS56g2cyPZ826wlZNIG0vX6eYUVAdFbJ07d6DwnqvlzJthFqMs9eN6f8xnFvZE260bTK9ZpNGF1SZT41QN6omOgKxm_MdFPT2xKaNwsPWNEa7mmR_LXgryvAj8m5BpxFG_S1l7ZmCNfO_HJyVmNS2wOgIMjvsAe0jyyCnlg5XWoqsRkLJKupeR5x3dhriiamWW_B6FJJo9c7W0hLur3DbnUtfAYQ1gAgBkPDHu7ejQ75i2_t4gdx9-jM2MUr9kAI2EvbxEI3ZA6G9Uq46c1AP4O0FTfO7YVJSXSKFBfKtGStM4tnYexm8_2dpogzWKKtnqmDmUwVrAAjBTmeDiyTg3-aGs-5PTM-wYM_VTL-hBhuEUESCbq6SD6U-6ZYZ7OlToKitmPosd9gZAaVBAAS6Ii-f6pT6GvtHyT996tPhB1nVo0J46OOm72z-0AX3yMcYsxlZSmI6yG8fa0dCdcAoh5Ac010IeCYLCjgRRKevJNt-C0mhAikUR0OgDrStxHLCfhFKTDrCH7GT0Npsf3aqo_8w6O4YnaBX_y6U9fVEbrvAaLCbt4JkEUaQrv1wpW_5KFkc85TPQKAGbxh53kESPcCGVKke9rDTr1WnHVHKVfLE69CevP1sP-anISy9SeQJ_ZchNgKyGam3Kyc55VNZCjD5bfD3-6lMjYU59AY-8RuFMUw0PyVUNzR5i8ZcDneV7t8OwFQpJo4Q6Xf5x0mhh8UBZPoa_SMj7dJ96cB_PcXWU65-QAsHst4NtPe0CyRcJEIKBBgVowxmGK1Ds_5vCIYrXMkQR_m1MWDeIOpxuDtxW_-_fTus3TFUpFxc5L6JS_8rMgyLtQN_OZD3qmgCi3ovVrqZuUp_70tWZFR83IcROQBECIRwuNjNJgwX2H4GtAPWvs4kyrp8jUO_01oGx1GMgZyrfgMJtcFmGd6vUkGd-Fg5RFS6NNbiyzc_-fNeZvUCwY1OMgELS7fy_Eu7y9N9MO1B3kBZErwSZ4e3xubEK6Gb1F-BDlSt3sUrXMmVwwFhEKURqL2h-zARK7BKUYtkYA00Ov8IxQoVQW0Qgp6BERlfQPULQXB5XwckZ8FVw4KuIYdHeZZnIMUNaWj_UaOdp2c6y0NpFbpc3Vw3V8m9b5sPmHTtmDXolapmvFvRNz_jyZkF3ayPKAPbMFywNy8U4Z4LeqsAOeUvQUS_cDFwYp1DfSWcrFYLN3QFH9YZVFeuHgt5aw_KYGGYW-WcwnkRG00GCOWfYSfLx7AWtKdCrwZCKcbMGAdTdu9bPRq4wUL6rWc2u4tmnNb9IVbPXK1sLV6cNk2XZiZp-_igGIadZgFUsJm2Hg3V-Phjd_cAm4KtxdnfuG8vNEolVLBBlaX3-t__C6dQrwWiSatakzjAcq_QxanG02yrDJaPXOvM0gpsqE3_5BH2xOjfit3h6JyqDUnJteBaQT3CklEFL-Jhxyfnli5jPsnxXgT1YjSjusxAhGgNs8n6f8XWinQDcWGFwhQ6poV_hmk1ZvXD61aV8q0N0EYpXE955scIxJ8Wb9xvMXDIGP_pyxPrtecJ4tg0WEVuhaIbt1C6hNGwdkixu08b7X5GgaBJ1up1rGHfGPMerhG6QVQ56Hvse46RUB2gumbamvIgWNb_hmtn5nOYbFXmCLVR1T4lug8pijkTf7vX83D3bvVzKhvhJl_TsqemnqdPpcO2nDmeRQ_mGNKBGFqQHT2J03yF2xC8h-_rkcy5RTwmRozCJcJiqIh-d60Dmgd07yAvUnnYnAG02Rp8ukpKoTyFwAjusg1xQqTHDv-HCD3O56uo4jLTe1RzjbcdXAx8g0yDweTStDoe3I3khTJd2KlKXnKk5APtLOH_jRsghFRh_Nbd4_QYPcM4fjvqu29T4HAEIQaFCjilCILpJ473kpt4Ztkz6k4TY8U8D0hiwMOTyoe3WBbdKTFN5gAgE61HZR7dq3XGyu1qnd1CZhtoeyynuiomBTbPKj3V3PArNa7IhNPFu8Hs-MXwk_ymwqzhuqk7ObGrGvPTSKljZJkjixiSBbOoNCa28_xgtRiu_hJLDuMggIK8u6q79-IwAXIeuSrisxciX0DYhMaGcnUJgO6W34eaV3cftxfUjNTSvB5eHvz5IB3kcZvY8jIQJm9UwXG_V33FLVEyzOq3ya8ppc17PlI0g3Emj_1OHIXqBAlIN0yuZQQ7eNMWkkPvyBoBfRXHYpGwPtAM3L3fJ4erQK1hXVGvzzFK5hHx_BiIFo1L9LVi2ft1kOIw43-Fp5r4x7dTldTb_22pY1ugdyslDLA9UsCIeBXImQ5_u0P0LGNhDI1RfUHX19aUugfRERic1eJrvarEjVUxe6SpMNbnJy0QwYdZuJ7jCHEBLJsZD51MVyOC-PE_bSbMZ0IU9LA-Ag3cuMxtHaPVZ16kIUFk4AzLNV9tGqNv8giy1tN6dAtfTVAibVO9T5D-IfNwIRNPJlrhy2LQvqlATRbQ-eRh2UhFEEFjhnhuluvrz80ggXOvKsRRtEJrlWzxwDgfpK6lzg8VwcJWNAODCe70fKf0vRiAFtReIAEY5oXPuD5hpnZY_h_sZSuH1c62VBMLVHcEGUz1-vcThSZjmskygkCgOPcWQcaLRmL3KT1rJSgYvhqHvZNpYpPhVN_xxperF4zNux84QkLuy5v2PmNV1_IqKr8X0WFAuMC9GJFj1W1vRc9ntlxeb7o5aJGZaLBbjzuDz-kCqLQRoZBZ_MUjhswMAgtw1lpr7T9TNeRK6gy-rTF2LFdGUKJMrci0ZI5un_4OD9zi4Oruv7DAY3lKe-uvXxpT6GYZtRxolnhQFXyhuEsunw2KZauwuwx27okxCbmEb6bi1ZB5PrmVgCjz2O08Z5V3rXtag_qzBeokjrvBCG2XJ9yqBY8Lb_TTTmWfsBj1ApKm-Sn4cFmSIVMsu1tmEYdi_4fUXg9Fxwqcbda-fBxQgdeOeK2SfF_Wbmx-hw8EBspDF6lFdMorYp5-jSUlkFPEs5jWMu4n3fVniR4SU2u4mikAFHVIIFISFZ9WtntnMLFmezUr8ZYtuJ4aWhC9JkoRPBqDaL2b2rY8t2OqoZfna_noj_Hb9F0Lq97LzsX91ZNsrEtDMdPJaS9_DqUYCxOm-J020fl8xtNrAb7bNUtyPD6aadmwYVzX29Tg8EyUrGgbjzdXVQOLY="
            }
          },
          "time": {
            "start": 1771213946510,
            "end": 1771213954070
          },
          "id": "prt_c6493fe8e001aaAPo3hvynsx6a",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6493f3d0001Lzh2tSfOLjwpMT"
        },
        {
          "type": "tool",
          "callID": "call_qfrbgKnAUBtTqh1LX5lpeyDs",
          "tool": "task",
          "state": {
            "status": "error",
            "input": {
              "description": "Commit working tree logically",
              "subagent_type": "gitter",
              "prompt": "Goal: Turn the current working tree into a clean set of meaningful commits (not one dump), then leave git status clean.\n\nScope: Entire current repo working tree in /Users/alex/repos/vfp/dark-factory.\n\nConstraints:\n- Use multiple small logical commits grouped by concern.\n- Use commit title format: {Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)\n- Include short commit body rationale and signature when possible: // Chappie/Model (gpt-5.3-codex)\n- Do not push.\n- Do not commit likely secret files (.env, credentials, private keys).\n- End with clean git status.\n\nPlease do this workflow:\n1) Run git status, git diff (staged+unstaged), and recent commit titles to infer style.\n2) Propose logical commit grouping and then execute it.\n3) Stage only relevant files for each commit.\n4) Commit each unit with proper title + concise body rationale/signature.\n5) Report back with:\n   - Commit list in order (hash + title + files)\n   - Any skipped files and why\n   - Final git status summary.\n\nImportant: Respect existing unrelated edits if present; include them only if they are commit-worthy and fit a logical unit."
            },
            "error": "Tool execution aborted",
            "metadata": {
              "sessionId": "ses_39b6bd422ffeAz67rIsanPDwMd",
              "model": {
                "modelID": "gpt-5.3-codex",
                "providerID": "openai"
              }
            },
            "time": {
              "start": 1771214025712,
              "end": 1771214025712
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_08a640195070eff5016992948205d081908f9c12b0fcca57c8"
            }
          },
          "id": "prt_c64941c17001gOw7qd3PVqkuNi",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6493f3d0001Lzh2tSfOLjwpMT"
        },
        {
          "type": "patch",
          "hash": "374b80766b85a444d01cb2f7159d26acdfeb8604",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/TODO.md"
          ],
          "id": "prt_c649533ef001mm5xVN8EAGMZi8",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c6493f3d0001Lzh2tSfOLjwpMT"
        }
      ]
    },
    {
      "info": {
        "role": "user",
        "time": {
          "created": 1771214713704
        },
        "summary": {
          "title": "Scraping docs: add generic opencode skills/commands\n",
          "diffs": [
            {
              "file": ".opencode/commands/scrape_doc.md",
              "before": "---\ndescription: Add or run an external docs scraper into docs/external/<source>\nagent: build\n---\n\nUse the `external-docs-scraping` skill from `.opencode/skills/external-docs-scraping/SKILL.md`.\n\nGoal:\n\n- Add a new external docs scraping workflow (or refresh an existing one) using project script conventions.\n- Produce split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n\nProcess:\n\n1. Determine source metadata from user input:\n   - source key (for `<source>` folder and script name)\n   - docs root URL\n   - discovery strategy (`sitemap.xml` preferred)\n2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse shared helpers (`scripts/helpers/`) and follow Bun shebang script conventions.\n4. Implement resilient scrape flow:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML fetch + conversion\n5. Regenerate `docs/external/<source>/*.ext.md` and `docs/external/<source>/index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and call out any blocked pages.\n7. If a new scraper entrypoint was added, update `README.md` and `AGENTS.md` references.\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture result totals and notable failures\n- Exact rerun command (for example `bun scripts/scrape_<source>_docs.sh.ts`)\n",
              "after": "---\ndescription: Add or run an external docs scraper from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nNote: This command is kept as a singular-name alias; prefer `.opencode/commands/scrape_docs.md` for new usage.\n\nGoal:\n\n- Convert a user scraping request into a reusable external docs workflow.\n- Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n\nProcess:\n\n1. Parse source metadata from the user request:\n   - source key (for `<source>` folder and script name)\n   - docs root URL\n   - discovery strategy (`sitemap.xml` preferred)\n2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse shared helpers (`scripts/helpers/`) and follow Bun shebang script conventions.\n4. Implement resilient scrape flow:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML fetch + conversion\n5. Regenerate `docs/external/<source>/*.ext.md` and `docs/external/<source>/index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and call out any blocked pages.\n7. If a new scraper entrypoint was added, update `README.md` and `AGENTS.md` references.\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture result totals and notable failures\n- Exact rerun command (for example `bun scripts/scrape_<source>_docs.sh.ts`)\n",
              "additions": 7,
              "deletions": 5,
              "status": "modified"
            },
            {
              "file": ".opencode/commands/scrape_docs.md",
              "before": "",
              "after": "---\ndescription: Add or refresh external docs snapshots from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nGoal:\n\n- Implement or refresh a reusable scraper script for the requested docs source.\n- Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n\nProcess:\n\n1. Extract request metadata:\n   - source key (for folder and script naming)\n   - docs root URL\n   - page discovery strategy (`sitemap.xml` preferred)\n2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).\n4. Implement resilient scraping:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML conversion to markdown\n5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture totals and notable failures\n- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n",
              "additions": 34,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": ".opencode/skills/docs-scraping/SKILL.md",
              "before": "",
              "after": "---\nname: docs-scraping\ndescription: Add or refresh external documentation snapshots from user requests into split `.ext.md` pages and `index.ext.md`.\n---\n\n## What I do\n\n- Turn a user docs scraping request into a reusable script and generated docs snapshot output.\n- Standardize output under `docs/external/<source>/` with one page-level `.ext.md` file per discovered page.\n- Ensure each generated page has a metadata header and notes footer, and create an `index.ext.md` manifest.\n\n## Accepted request patterns\n\nUse this skill when the request includes one or more of:\n\n- A docs root URL (for example `https://example.dev/docs`)\n- A source/domain name (for example `moonrepo`, `astro`, `pnpm`)\n- A request to \"scrape\", \"snapshot\", \"mirror\", or \"refresh\" external docs\n\n## Output contract\n\n- Script: `scripts/scrape_<source>_docs.sh.ts`\n- Output directory: `docs/external/<source>/`\n- Output files:\n  - Per-page files: `<stable-page-stem>.ext.md`\n  - Index file: `index.ext.md`\n\n## Behavior requirements\n\n1. Resolve source metadata from the user request:\n   - `source` key (safe folder/script slug)\n   - docs root URL\n   - discovery method (`sitemap.xml` preferred)\n2. Reuse project script conventions:\n   - Bun shebang (`#!/usr/bin/env bun`)\n   - `*.sh.ts` naming\n   - helpers under `scripts/helpers/`\n3. Use resilient scraping strategy:\n   - Primary: `r.jina.ai` markdown proxy\n   - Fallback: direct HTML fetch + conversion to markdown\n4. Normalize filenames from docs paths:\n   - deterministic flattening (for example `docs__guides__intro.ext.md`)\n5. Regenerate output cleanly:\n   - remove old `*.ext.md` in target source directory\n   - write fresh per-page files and `index.ext.md`\n\n## Generated page format\n\n- Top `----` section with summary metadata:\n  - captured timestamp\n  - source root\n  - source page URL/path\n  - keywords\n  - concise summary\n- Middle body with markdown content snapshot\n- Bottom `----` notes/comments/lessons section\n\n## Index format\n\n- Top `----` section with source/capture metadata and summary totals\n- Full page inventory with links to local page files and capture status\n- Bottom `----` notes/comments/lessons section\n\n## Implementation workflow\n\n1. Inspect existing scraper scripts for reuse patterns (`scripts/scrape_*.sh.ts`).\n2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n3. Run the script once to generate docs output.\n4. Report totals (`pages`, `ok`, `failed`) and notable blocked pages.\n5. If a new script entrypoint was introduced, update `README.md` and `AGENTS.md`.\n\n## Safety constraints\n\n- Never embed secrets, auth headers, or private tokens in script or output files.\n- Skip private/authenticated docs pages unless explicit credentials handling is requested and safe.\n- Keep scripts idempotent and deterministic where practical.\n\n## Return checklist\n\n- Script path(s) added/updated\n- Output directory generated/refreshed\n- Discovery strategy used\n- Capture totals and notable failures\n- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n",
              "additions": 84,
              "deletions": 0,
              "status": "added"
            },
            {
              "file": ".opencode/skills/external-docs-scraping/SKILL.md",
              "before": "---\nname: external-docs-scraping\ndescription: Create and run Bun scraper scripts that snapshot external docs into split `.ext.md` files under `docs/external/<source>/`.\n---\n\n## What I do\n\n- Standardize how we add a new external docs snapshot source.\n- Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n- Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n\n## When to use me\n\nUse this when the task is to add a new external docs source like the existing moonrepo snapshot flow.\n\n## Output contract\n\n- Script file: `scripts/scrape_<source>_docs.sh.ts`\n- Output directory: `docs/external/<source>/`\n- Output files:\n  - One page-level `*.ext.md` file per source docs page\n  - `index.ext.md` linking all generated page files\n\n## Script conventions\n\n- Use Bun shebang script format: `#!/usr/bin/env bun`.\n- Reuse shared helpers from `scripts/helpers/` (for example `findRepoRoot`).\n- Keep script deterministic and idempotent where practical.\n- Default to sitemap or deterministic page discovery over fragile crawling.\n- Clear prior `*.ext.md` files in the target output directory before regenerating.\n\n## Page/index format conventions\n\n- Keep each page file in `.ext.md` format with:\n  - metadata block (captured timestamp, source URL/path, keywords, summary)\n  - normalized markdown body\n  - notes section describing capture/conversion method\n- Keep `index.ext.md` as a full page inventory with status summary (`ok`/`failed`).\n\n## Implementation workflow\n\n1. Identify docs root and discovery method (`sitemap.xml` preferred).\n2. Create script in `scripts/` following `scrape_moon_docs.sh.ts` structure.\n3. Map URLs to stable flattened filenames (for example `docs__guides__intro.ext.md`).\n4. Scrape each page with a resilient strategy:\n   - Primary: `r.jina.ai` markdown proxy\n   - Fallback: direct HTML fetch and conversion\n5. Write all page snapshots and `index.ext.md` to `docs/external/<source>/`.\n6. Run the script once and report page count + success/failure totals.\n7. Update `README.md` and `AGENTS.md` when a new scraper entrypoint is added.\n\n## Notes\n\n- Prefer explicit logs using project format: `Docs // Scrape // Message (...)`.\n- Do not include secrets, auth tokens, or private pages in snapshots.\n- If scraping is partially blocked, still produce index entries marking failed pages.\n",
              "after": "---\nname: external-docs-scraping\ndescription: Create and run Bun scraper scripts that snapshot external docs into split `.ext.md` files under `docs/external/<source>/`.\n---\n\n## What I do\n\n- Standardize how we add a new external docs snapshot source.\n- Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n- Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n- This skill remains compatible, but prefer `.opencode/skills/docs-scraping/SKILL.md` for generic user-request driven scraping workflows.\n\n## When to use me\n\nUse this when the task is to add a new external docs source like the existing moonrepo snapshot flow.\n\n## Output contract\n\n- Script file: `scripts/scrape_<source>_docs.sh.ts`\n- Output directory: `docs/external/<source>/`\n- Output files:\n  - One page-level `*.ext.md` file per source docs page\n  - `index.ext.md` linking all generated page files\n\n## Script conventions\n\n- Use Bun shebang script format: `#!/usr/bin/env bun`.\n- Reuse shared helpers from `scripts/helpers/` (for example `findRepoRoot`).\n- Keep script deterministic and idempotent where practical.\n- Default to sitemap or deterministic page discovery over fragile crawling.\n- Clear prior `*.ext.md` files in the target output directory before regenerating.\n\n## Page/index format conventions\n\n- Keep each page file in `.ext.md` format with:\n  - metadata block (captured timestamp, source URL/path, keywords, summary)\n  - normalized markdown body\n  - notes section describing capture/conversion method\n- Keep `index.ext.md` as a full page inventory with status summary (`ok`/`failed`).\n\n## Implementation workflow\n\n1. Identify docs root and discovery method (`sitemap.xml` preferred).\n2. Create script in `scripts/` following `scrape_moon_docs.sh.ts` structure.\n3. Map URLs to stable flattened filenames (for example `docs__guides__intro.ext.md`).\n4. Scrape each page with a resilient strategy:\n   - Primary: `r.jina.ai` markdown proxy\n   - Fallback: direct HTML fetch and conversion\n5. Write all page snapshots and `index.ext.md` to `docs/external/<source>/`.\n6. Run the script once and report page count + success/failure totals.\n7. Update `README.md` and `AGENTS.md` when a new scraper entrypoint is added.\n\n## Notes\n\n- Prefer explicit logs using project format: `Docs // Scrape // Message (...)`.\n- Do not include secrets, auth tokens, or private pages in snapshots.\n- If scraping is partially blocked, still produce index entries marking failed pages.\n",
              "additions": 1,
              "deletions": 0,
              "status": "modified"
            },
            {
              "file": "AGENTS.md",
              "before": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into split per-page `docs/external/moonrepo/*.ext.md` files and writes `docs/external/moonrepo/index.ext.md`.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
              "after": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- `.opencode/skills/docs-scraping/SKILL.md` documents generic user-request driven external docs scraping workflows.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into split per-page `docs/external/moonrepo/*.ext.md` files and writes `docs/external/moonrepo/index.ext.md`.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
              "additions": 1,
              "deletions": 0,
              "status": "modified"
            },
            {
              "file": "README.md",
              "before": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `products`\n- A `product` is the canonical definition of a code product we want to work on\n  - In Stage 0 this is identified by a local path-based locator key\n  - Locators are path/url-like identifiers, currently using `@local://{abs_path}`\n  - `product` may optionally include a `display_name` for human-friendly rendering\n- A `variant` is a spawned instance of a `product` where work actually runs\n  - In Stage 0 a product immediately gets one default variant on creation\n  - Variant identity follows the same locator pattern with a fragment suffix:\n    - `@local://{abs_path}#default`\n  - Future variants can use other suffixes (example: `#wt-main`) when we support parallel instances\n- Stage 0 topology is intentionally strict and simple:\n  - One product locator\n  - One default variant locator\n  - One actor bound to that variant\n- `actor` is a spawned agent that operates on a variant\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent), but first iteration is JUST OpenCode\n  - Future work will allow multiple variants per product and multiple actors where operations allow\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typescript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Definition: `prisma`\n  - [ ] TODO: Investigate use of protobuf\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all products/variants/actors/settings, etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (REST even) we can query from frontends\n- Currently looks like it will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
              "after": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `products`\n- A `product` is the canonical definition of a code product we want to work on\n  - In Stage 0 this is identified by a local path-based locator key\n  - Locators are path/url-like identifiers, currently using `@local://{abs_path}`\n  - `product` may optionally include a `display_name` for human-friendly rendering\n- A `variant` is a spawned instance of a `product` where work actually runs\n  - In Stage 0 a product immediately gets one default variant on creation\n  - Variant identity follows the same locator pattern with a fragment suffix:\n    - `@local://{abs_path}#default`\n  - Future variants can use other suffixes (example: `#wt-main`) when we support parallel instances\n- Stage 0 topology is intentionally strict and simple:\n  - One product locator\n  - One default variant locator\n  - One actor bound to that variant\n- `actor` is a spawned agent that operates on a variant\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent), but first iteration is JUST OpenCode\n  - Future work will allow multiple variants per product and multiple actors where operations allow\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typescript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Definition: `prisma`\n  - [ ] TODO: Investigate use of protobuf\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/docs-scraping/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all products/variants/actors/settings, etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (REST even) we can query from frontends\n- Currently looks like it will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
              "additions": 1,
              "deletions": 0,
              "status": "modified"
            }
          ]
        },
        "agent": "build",
        "model": {
          "providerID": "openai",
          "modelID": "gpt-5.3-codex"
        },
        "variant": "high",
        "id": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "text",
          "text": "Add a generic @.opencode/skills/ + @.opencode/commands/ for scraping docs based on a user request - feel free to redo the work see in @.opencode/commands/scrape_doc.md ",
          "id": "prt_c649fb35d001ThWcSzdSnkzi8P",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb35c001iNpN4gW0MoBwO6"
        },
        {
          "type": "file",
          "mime": "application/x-directory",
          "filename": ".opencode/skills/",
          "url": "file:///Users/alex/repos/vfp/dark-factory/.opencode/skills/",
          "source": {
            "text": {
              "value": "@.opencode/skills/",
              "start": 14,
              "end": 32
            },
            "type": "file",
            "path": ".opencode/skills/"
          },
          "id": "prt_c649fb35d002FAB39Oj2szwQh3",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb35c001iNpN4gW0MoBwO6"
        },
        {
          "type": "file",
          "mime": "application/x-directory",
          "filename": ".opencode/commands/",
          "url": "file:///Users/alex/repos/vfp/dark-factory/.opencode/commands/",
          "source": {
            "text": {
              "value": "@.opencode/commands/",
              "start": 35,
              "end": 55
            },
            "type": "file",
            "path": ".opencode/commands/"
          },
          "id": "prt_c649fb35d003bpmyiXCqyMcSmh",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb35c001iNpN4gW0MoBwO6"
        },
        {
          "type": "file",
          "mime": "text/plain",
          "filename": ".opencode/commands/scrape_doc.md",
          "url": "file:///Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md",
          "source": {
            "text": {
              "value": "@.opencode/commands/scrape_doc.md",
              "start": 134,
              "end": 167
            },
            "type": "file",
            "path": ".opencode/commands/scrape_doc.md"
          },
          "id": "prt_c649fb35d0049kK5F93C1SxfHN",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb35c001iNpN4gW0MoBwO6"
        },
        {
          "type": "text",
          "text": "Called the Read tool with the following input: {\"filePath\":\"/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\"}",
          "synthetic": true,
          "id": "prt_c649fb36a001f80NPOlkjSPu3n",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb35c001iNpN4gW0MoBwO6"
        },
        {
          "type": "text",
          "text": "Called the Read tool with the following input: {\"filePath\":\"/Users/alex/repos/vfp/dark-factory/.opencode/commands/\"}",
          "synthetic": true,
          "id": "prt_c649fb36c001dwSKhRRQX7qirc",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb35c001iNpN4gW0MoBwO6"
        },
        {
          "type": "text",
          "text": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/commands/</path>\n<type>directory</type>\n<entries>\ncapture_script_from_context.md\ncommit_all.md\nmake_script.md\nrule.md\nscrape_doc.md\n\n(5 entries)\n</entries>",
          "synthetic": true,
          "id": "prt_c649fb36c002CidoZAbyJ8ByJd",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb35c001iNpN4gW0MoBwO6"
        },
        {
          "type": "text",
          "text": "Called the Read tool with the following input: {\"filePath\":\"/Users/alex/repos/vfp/dark-factory/.opencode/skills/\"}",
          "synthetic": true,
          "id": "prt_c649fb36c003PGe4Ss1yYQm25x",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb35c001iNpN4gW0MoBwO6"
        },
        {
          "type": "text",
          "text": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/skills/</path>\n<type>directory</type>\n<entries>\nexternal-docs-scraping/\ngitter-commit/\nproto-install/\nprotobuf-schema-authoring/\nscript-authoring/\n\n(5 entries)\n</entries>",
          "synthetic": true,
          "id": "prt_c649fb36c004Y88hgY4I11sdj2",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb35c001iNpN4gW0MoBwO6"
        },
        {
          "type": "text",
          "text": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md</path>\n<type>file</type>\n<content>1: ---\n2: description: Add or run an external docs scraper into docs/external/<source>\n3: agent: build\n4: ---\n5: \n6: Use the `external-docs-scraping` skill from `.opencode/skills/external-docs-scraping/SKILL.md`.\n7: \n8: Goal:\n9: \n10: - Add a new external docs scraping workflow (or refresh an existing one) using project script conventions.\n11: - Produce split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n12: \n13: Process:\n14: \n15: 1. Determine source metadata from user input:\n16:    - source key (for `<source>` folder and script name)\n17:    - docs root URL\n18:    - discovery strategy (`sitemap.xml` preferred)\n19: 2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n20: 3. Reuse shared helpers (`scripts/helpers/`) and follow Bun shebang script conventions.\n21: 4. Implement resilient scrape flow:\n22:    - primary: `r.jina.ai` markdown proxy\n23:    - fallback: direct HTML fetch + conversion\n24: 5. Regenerate `docs/external/<source>/*.ext.md` and `docs/external/<source>/index.ext.md`.\n25: 6. Report capture totals (`pages`, `ok`, `failed`) and call out any blocked pages.\n26: 7. If a new scraper entrypoint was added, update `README.md` and `AGENTS.md` references.\n27: \n28: Return:\n29: \n30: - Script path(s) added/updated\n31: - Output directory generated\n32: - Discovery strategy used\n33: - Capture result totals and notable failures\n34: - Exact rerun command (for example `bun scripts/scrape_<source>_docs.sh.ts`)\n35: \n\n(End of file - total 35 lines)\n</content>",
          "synthetic": true,
          "id": "prt_c649fb36d001Opf5NnE2l64OSd",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb35c001iNpN4gW0MoBwO6"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214713735,
          "completed": 1771214723328
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 92662,
          "input": 92347,
          "output": 315,
          "reasoning": 269,
          "cache": {
            "read": 0,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c649fb387001kpJN2Xb51Hugdq",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "e1339077ff9e6ec55e1a8e06a04b9b168e5169fb",
          "id": "prt_c649fbe7b0016InWRdDZTVNaml",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb387001kpJN2Xb51Hugdq"
        },
        {
          "type": "reasoning",
          "text": "**Reviewing existing doc-scraping skill**",
          "metadata": {
            "openai": {
              "itemId": "rs_0890006b941e2be2016992977e75b48194b5a62a963a290d4f",
              "reasoningEncryptedContent": "gAAAAABpkpeCaV58R02pb1YN45OlBYazLTUc6Ybgx7eCkMnIjtypBILKOz5djFTu4qat2lpQEi9vu0leTJgSLul0dzfpWcD7FWDh4QD-n7o9x3mxgdYB9plHomMZcmDmWVpCaliaHoYFYAHcpedLOO_6g0JDOZ30wJ_SdhWqWjW6_LRRELS2IK19VSWV5WirmdD7NnQ_etR7vLDWBkjRqJjMEXzMLYMNFWxrctGhw5C2mhqIt8LZJC6tPJdHoaHpcD_w80aBBP32fhIaG6L0LB-chD0X6SfMCJLICKzE80WpWuJLwyEXQ8CJI3HBAB3QS1TTSIKvRyvfOXrj8zFk-ltM4vtmCUbFW0o8msbITxEWBkKLTYbMufJQJePEGr6UDEDoJCPBxTmpe7hrusohK1kV6cxkHREI1HNtfIONXkA0AyDvM0tPAAssZADi8VJESYHIxlmSeBdj9kRFt8bUHsk52A_Wlmu273aU9MXsi2zApb6_bV8PGTHccbw2htqVGFiW7YXwBWbcsDkRfDtuPbk-X9iEkiq0V9vsrUMGd-KfNwKJd_zYi8NQr9s0q4jEdmGZS9inupFoXlKxSTt0KKoT7ux9ZW6WxQUE-vUNl2_pP7Xyc2fl0_CqF0TWEXw3BQEtCMc3Eo68__fqbuSLzqFpDKFYjSFxiciFJzeirwC5tsb2EkIjZg7U3UX81k00p0uFbsso5SajwcT7n7TDFpbfWBYnnsxbKsyr6EZNuMslymNIfryyHvH8YXSc0YI4MX9R1VDrNJHl60ZChk-fEosueGvkkRX9udzb2pAUO7RR7q8q8fhNe7Spad8qmXcJZ2zedTbjSZh3thYcl7Xhqtpcd7drViKxVTOKAWyAg5nYQ5HtWpcPrqK2pup7zJ3qZ4E_7pi8jhYqfJ_YRGe9q2GDfQhBR7jFcRrQCqKLmp0elIIJqR6ZBQc0fG5SWAE8VTTPk-8kh7oQCHdMkz8J-9lsJ8S_nNliRtFd-J-wvNonxEEar5vEhkim3wEeyTZ4OGXDID9f5U3XxqYlStUa8i_PW3VT6lSbpHBRfZsWSmK5jLck47KyPevnZup5hMZt0He2pQErBvHtoLLSvhgKtXuP6M2Jkdn7YXv_ybCnzRiGDVqu4tEoeAOk6qLuyehmAF33jdb58wOCxldpHKazdUS-mibPMXGti-zCdV8Wnu3oSPB33zHV63FioprsErb3iznqObgJNaate-tRoF84jRJXVebwsxAwM1SlTxF-OMRQ3OsqP-Nk_QeXhTeVfWG9H2_SRJLwOQq4aF3CGuDy7cKezQRF61gfSTDbXEi9jtfThM79cyGdon55XjVSP7zzKeJaHanwvaB66zkJhgbfEFS7uioyQGrDCdY9ckd1x-bAX1LDlUikTjSsq_LStKr2XOMJvzaztXeAvhw0ISsctfZFHS975ILeJlDW5g7jV6zgQBMQoHEurftjl6SmOgzDBzzEc2oTQY-ks-uRRV3SXQxW-eyuh8D_Uc3Uh_hlEKzN9Tp2_tSW_ALYzqFKbuRwKcYqDBAKy1wvOJEVoKc2VA4o7_Yjuu-sCvXBSwzolKqA7-USLIdZYjQ557zWHSKUtrAMN2T8_zYzqCgXXRMVDzzS_XX4ensUcOwyAfgqQwgez0nOlUss3xHGi3PVaBDVJxhChTtLW1QtAf6T0DST7MjJT56Mx5O9q5hrxg3-3A6kENw3hd-xwvSqoigM-JkonUJLwFiO_3HXZeXz_SB3uU-qHmJWdbNfJ1WDt37p02ko-FwJWiJfQIN8iFG9BuM3Ta9erhBsVGy5gD0w6YI2dVyMQQdnOogjdUOl9nBjz-0AE4ouW7dIrS5cECcPbF3U5CVfj5k17ln8fGO46K16K08KkpSduZ4T4L15mZsNVFarz247MscQyBNRoO9rohPoEQKKbp5Zh4Zi1Zi8fjskljb9GHUTVbAIJcIynKaIgDv59MSqSsPlytWPjKQ9anWsjplmitKS5ouToLwvWWpoxnqhQPZmkOUB5a1W5jvcPYrzITlYW4PmjW46Q4IxZpf_MkaiPvcIV28sGKJ-Nq8HMp83PjzygI4RjyBL--CpvH_ZF6DTQWqtwb58-Y6sm1ohpoyvjXg22k5XZFrrmkA58R9-6mEWg1zpDRcaVKYWSC9X1wR5nhHH2TpQYEWBsqWEprsnqm_G76iKvfJCrZoRhHTP-1mRyqdp6bYKC-k9it3prwrvNBTmLRCT9IAjCgwWzM05biwOryjcjVRrzW8rFG5rnbcmHtSedF7cPKgL-Q0L8bd8AQIKc127Uegl6QGnbS3PaqtfJTt5gaZEoI5c7WWCuaLXwvdNauaQy2k5vX09u7rtK3y3NMvYVJzzrf3-wbRUhhLhAywF4H9bsukZPB975CLQL-64qfXM7JlSl3gDAUzUJPQ20Gw6Cr7ou4GnCAoy2boXhT_Znjfi2ggz28tQFWSSfIb4OBsXakdkLO9s_weDFaeZo-qwEQ79RnvBK1xUt3beOrw5khdP3EBZ6Gok1RmJjpRsn_FEbYuRv_JHo48AK9XqJziZcIALYfjztL6E_zD8lXv_ttiBf7ycaATzBuES56v7eQ=="
            }
          },
          "time": {
            "start": 1771214718496,
            "end": 1771214722856
          },
          "id": "prt_c649fc62000154nDkzKTjdeOYW",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb387001kpJN2Xb51Hugdq"
        },
        {
          "type": "tool",
          "callID": "call_MuwFYy20dKbH6V0KbxGl24Vq",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md</path>\n<type>file</type>\n<content>1: ---\n2: name: external-docs-scraping\n3: description: Create and run Bun scraper scripts that snapshot external docs into split `.ext.md` files under `docs/external/<source>/`.\n4: ---\n5: \n6: ## What I do\n7: \n8: - Standardize how we add a new external docs snapshot source.\n9: - Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n10: - Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n11: \n12: ## When to use me\n13: \n14: Use this when the task is to add a new external docs source like the existing moonrepo snapshot flow.\n15: \n16: ## Output contract\n17: \n18: - Script file: `scripts/scrape_<source>_docs.sh.ts`\n19: - Output directory: `docs/external/<source>/`\n20: - Output files:\n21:   - One page-level `*.ext.md` file per source docs page\n22:   - `index.ext.md` linking all generated page files\n23: \n24: ## Script conventions\n25: \n26: - Use Bun shebang script format: `#!/usr/bin/env bun`.\n27: - Reuse shared helpers from `scripts/helpers/` (for example `findRepoRoot`).\n28: - Keep script deterministic and idempotent where practical.\n29: - Default to sitemap or deterministic page discovery over fragile crawling.\n30: - Clear prior `*.ext.md` files in the target output directory before regenerating.\n31: \n32: ## Page/index format conventions\n33: \n34: - Keep each page file in `.ext.md` format with:\n35:   - metadata block (captured timestamp, source URL/path, keywords, summary)\n36:   - normalized markdown body\n37:   - notes section describing capture/conversion method\n38: - Keep `index.ext.md` as a full page inventory with status summary (`ok`/`failed`).\n39: \n40: ## Implementation workflow\n41: \n42: 1. Identify docs root and discovery method (`sitemap.xml` preferred).\n43: 2. Create script in `scripts/` following `scrape_moon_docs.sh.ts` structure.\n44: 3. Map URLs to stable flattened filenames (for example `docs__guides__intro.ext.md`).\n45: 4. Scrape each page with a resilient strategy:\n46:    - Primary: `r.jina.ai` markdown proxy\n47:    - Fallback: direct HTML fetch and conversion\n48: 5. Write all page snapshots and `index.ext.md` to `docs/external/<source>/`.\n49: 6. Run the script once and report page count + success/failure totals.\n50: 7. Update `README.md` and `AGENTS.md` when a new scraper entrypoint is added.\n51: \n52: ## Notes\n53: \n54: - Prefer explicit logs using project format: `Docs // Scrape // Message (...)`.\n55: - Do not include secrets, auth tokens, or private pages in snapshots.\n56: - If scraping is partially blocked, still produce index entries marking failed pages.\n57: \n\n(End of file - total 57 lines)\n</content>",
            "title": ".opencode/skills/external-docs-scraping/SKILL.md",
            "metadata": {
              "preview": "---\nname: external-docs-scraping\ndescription: Create and run Bun scraper scripts that snapshot external docs into split `.ext.md` files under `docs/external/<source>/`.\n---\n\n## What I do\n\n- Standardize how we add a new external docs snapshot source.\n- Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n- Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n\n## When to use me\n\nUse this when the task is to add a new external docs source like the existing moonrepo snapshot flow.\n\n## Output contract\n\n- Script file: `scripts/scrape_<source>_docs.sh.ts`\n- Output directory: `docs/external/<source>/`\n- Output files:",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771214723215,
              "end": 1771214723220
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0890006b941e2be20169929782cf4c8194ba6013cd28bfbb99"
            }
          },
          "id": "prt_c649fd72900109WbG8RnYlye1o",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb387001kpJN2Xb51Hugdq"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "e1339077ff9e6ec55e1a8e06a04b9b168e5169fb",
          "cost": 0,
          "tokens": {
            "total": 92662,
            "input": 92347,
            "output": 315,
            "reasoning": 269,
            "cache": {
              "read": 0,
              "write": 0
            }
          },
          "id": "prt_c649fd8c2001SjFu2Qg0QJSimq",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fb387001kpJN2Xb51Hugdq"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214723345,
          "completed": 1771214740827
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 94385,
          "input": 874,
          "output": 967,
          "reasoning": 928,
          "cache": {
            "read": 92544,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c649fd9110017Y375UuurauF0m",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "e1339077ff9e6ec55e1a8e06a04b9b168e5169fb",
          "id": "prt_c649fe1820010MfxcJPisLA1fG",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fd9110017Y375UuurauF0m"
        },
        {
          "type": "reasoning",
          "text": "**Planning generic doc-scraping upgrade**",
          "metadata": {
            "openai": {
              "itemId": "rs_09920f00c64775580169929785f2ac8195bb688295dbe0ddd6",
              "reasoningEncryptedContent": "gAAAAABpkpeULIOVUove_tzWjFzQAfdfNdfQiurLC1PFLv8KV5qIWkg359profFj2yXnFv6fCZm-6d2hLYorVYeFciR_YYZ5tk8mY34V96Y6DsaQDRygDX1zZ6d0cVrFlU6nNlJzEyqiIwvu9cGuwkIqsbw99fyHnTCM8EhPuXYJDh36Ld1RYErUiUq-aBb6cUofQK11yeR4uDvulmGwA9iGzRlCaogajHTWBBF2nY46X_o_haeNuAn4q2ohQbwWouKh1GSyNq7Gh1HrAv5cikQ-tRlDp5LRds9Pu0YJd71oI2OJcIjYrescd9gsRdRqn4qulPY6m20DJQYVIiHBdkxUpGBnImRnV7py7Ufl-9Ox9IP4K_jeVtlLOdbyns9topGqK3JxbxfIlTzNKbrNO_mz5PcuFy10abtva9Ub-PFwwAZOGhNMs-mTtqvGahiiJ7Hc55BGqn_jowaPCc2TlwupqWW8EBHs3iNYGRxNgSzjE9Aq-CJarX975ArpkAM4qzWrdjmP7t_F8fUfQkNh4xi9S6dRCn8KcnEXm8-2HHcefLl6WTAjjS0Ohfsu9MSKAP6eRVqH0uWvDVPQNj43zGhuZqfnIdKwtkuUAMxXNrJSFY8iVOHLh7SnSYne5VwoJyx87bhgdhL-FaUVbt92DzbbfwAQPU5LDt8E-Ag-Cxh7khSh1nMgS_DauoSv36ObrpKys8jGItBK0WV5wiekLxZPLXDxjnJISj__qAtuB_x09I2YHo_QZxucIDgZeeaIWpd5hXKGAcOMoM1M3bQfi9XHD1xDkm2BwZV4881yjLeOGjV2jmw1b2srxRk_UPOlJPoeSTHTFrM6gcjFg5LVUt9vL0tv4Uqy-YllGodSI3J9XkRJdOEjY3HC-F3t4SpamdceqBCSLfMN8ymEefZ3meNdgo099B5PqT6CS2m8JAa1aGTOswcCzWAgZiLVLrcd9JnLRQkFxBKA_eDxJGbHcnWe_uwdPDTALI9ebAH0cziK8_ZqNuz2I5jtM8-NilLdebZaYESXax-IxIFUQbr3omHwhl1IPcW_GqCkdYrVoW9SnqMO0abbHLO5uBeQjNaCTMOBF1lxh54u5JrBWdjaTHWaywifk7o3tCesRLRcxqAUTVODCyU6MqzeDEp9uLE2P2soutxi-7q40-eXt0kMqhIC3TaQLXqm1IX5oQm21jgN9DGzwhu-5qnh5MfTOVqkHFlVgOhdEqe3jI3j3jpnTMXUSMJkLOQegWK_jc3BQkJ9ex30QHlOjvMu7XJaOcIldcWl9n1B42c9LWU8GEZS9lR1KC8uHIp5aZxmreVc9dMWfg8ckVnHzZC_4c5EEhv2c0R2SvXywJYSx14sx7glF2LdVRjI7-kXDrIa5yBDMpYUQrt5tpOonG4h95PmkjLenHy7Wq31ttTztxGlf4Lrv-6C2IBSl7PJWzcRBuZ-n4Tnpccu1unj0oFyJTVF7unRWW5zwC6728L_MP1aeRWb4Gn6xV6uz3R2MCP3vi7pmk3Of-VLixVwkQm54z54WiSA6THuwFMqXpnan0QIe_WBPtABMXyKRI3tPgDmYUVemmPu9ok66VUfmY5t0vouH5RXrwtZkCtTxDeoYBQhiWlzlDFgD0BiahivMCtlVjp_G_MNROQNnHfO45v3jioeIgUW3Q2yt4Dvnjb9F4rxb_0JqR1S-2eFVe2Q8fH8pFLR0lFtO2sAkX5L8QbPvsQ8OvNNZyB-vHF2g_Uv1R3imZJQkIGd8L-5HIFJMN02dJzIVcq5MEUi2ftwqB9R17DkK82gUq3qDJuOX8HxL3bJ4LwhgnMNFs9tgj4QgCwFpxA-mA-ekyUsoOJRyl1VinBKs_P0Vdq_H6XFKrtosX-ZHb1vwS4RbhVHcXLtzazGDha0le_TfwBUugvqbMOJ0Sv5pdcLbRhb7kojTivXqYW2gBylt4L5fdZDe5G2briFThRdyBZ2jxIHJIjLPEMH9gnRVt9-3HFFmS936rKD0K0b13aLJoNXCx3xikYmSP3Z2vc_oGfkheVXzqKBkRugtNZCawOvgaQyo4x8VslG_J7-COO8aHnVZSnmAHLGgnCir245M5_iWxa1vFKNAJQoGPBfR-U_THdMcBcPIWt0LXcKEkfiM364EXX4Rwx6rWeYmzmAfyIgmHpYV5EkDvPlYl8a7JkEQhUKa4512uPaCQXAjT1xRnLaW5pfk_AuUic0T1mfVSpNG6t-y4Pyr0cZAKfd-A06PcgKtGBmrDrbCfxgvmO-h80LWyPcaYCTGJjTNEowuZz8n2ztOlZc58TDeNqTw7_us34T3FzJXuaDGkDJcSAASz9RkO6rqawH_eidpnS-flatrzsmg4qCV9f1RpuxXSf7MggTfmdkLhCZjVx2LDmCQqhTO18jqXQqes92l7uXxnEs3BTJXW39Kxh1q4o6Q5PycXlCZlmarsKh4WnDx8K-CkLfTkwVgRAfHAdf0q0ssd9F9J2wVZKCdOH_Rt6qIpRayZ35ogc_PtOOEIQOK0SwzQrokszfdZ6_qQPnSq4TIukXpOA_eB2iq0cs-0XaoHEHdjgFB4t_a8scRdxV6S_bwckOov9Y2Eb7VOG59OCGx6U3IB0qAh3SBNuqSvYmPF4CiOFhKjAM4dow-V7ooVg4fRNpPk4JNthWv7Q8FUwvnfPMvlu2uGxlhLqagd_NGEaqmJLZm8ALNVzV74mN9wa4-4ns7LVXXeC_Ohq5ZxLoyRvjqvtEYaSGhJt0or33L3rIJojCiP1lS2WdqDE7kRnES1vTN0TWBLmbUqOcPv8Kx07U6A83ypJJjGjJ7S322IM_x13pOEa_AhwDNfGIbyzavyY5GdhHLHZz8sXXILFPjxr_AqkT_taDkVYVHfa942MhCQbJem5lyd5-aV-H7Fqnby0jgj04Dmezq48xo-ly97RabwyduRSmzK6o35V-9lNG-y9bDa1Yuu78bLukWo7iwXzkxqOgjS2QyEnRBzXrLl8gL6Dc1YuHz_-nVZ_A-nUp3UpLPNA7c1yY5kvNN1s9mzPCbKzEoHuFXLRLp882uceGqhg80Lcqey_SrtwQWyLqgPtak1ft-dZ5SqKRrmscoJXF5Lu72FrQ70eifxlaruY6vS-UmP7RXMzzV9MTm9U6fkljLpgF--QZhxSfqhxvKofVtzha0co-W7ls8Lt17VdH8tFJx8ulkmTsUtBzM8IXNCk7syr9eM5pXpuxXKGmJ4jd40i8qAoQ2hrDLFS5ReUutJ3pnlo9iDqy86puT9DkIoKil_9DhVgjwAUNv2td1sv75Pp_M1k96FWgKtcM07SNGja_tK-C-g9DViwsermnlKCcv9MdguT-UYEL1w-m75nNJcAhdt3uU5h3R517P_XxCb823BfhDqteHbFZbQQtVFfOaDrG-DA83cloZce2FK38pxeo3e4IfGfQDro7tgVOAd8RWU-f-lkNjWf233vRO_v6rLHLhmEYQ3QxWgWGQKeAOwukr8NSFhbnd-FCrUFs9Z32f4W02InjdSo7cN16ti64tM_mSXRMJcWsDhlebKTDZZXQlPx61o5kM95mDOYWbE0sX2HA6Xk-SyTS_NsiaBZ_Qy4BByhyPpqsT6hTWnWRAudYCcShu7Z-_rkX4bmCODf0AugYIWZEo9Zm3vBf733Uq8HEgU3ta2TBZh2U1xdgaBOVH916-dCii15d3T0ZjubcXv4u_5Iwa12hsg2N7L8J6jhP6nbpXQIof9Ki01UN-1YPwetHYGjTwVjEwUtNn64fnB74PhQilSsV7rDNZRRMVzTF_a7WlueFfrkn23nr41Knaxeq4duXHeiFmuaj0EI54w8Wxff6pLbSJ-d-THm3JWgsG8kjDxz-AGD8j_pb12SxkfHHuxvsdrU-AYd__9z7E94cJUDiufEvdHVu0vAjSaJSG5H2nMqEvqnrQFbMhfO-pPEAgNjr1jUO6qO7Inxh0qtAxVPHsJpaZlCHZ5wLCH0H7lStp21fOmRAwCjVhbqNclwjaTrDjyNF3XYDMTYs9uGtMFKDQfC6DZLiyGfbebxD37xO4r3LxE_-VPSwg9UlEzsaORWXQ47-6x3Q5qSawH8PoqImU9p0UnflvZzr32_J88Kcs2BOLDWpgYv8PITPQ6qlquW1XBgfhRPqCEOFSyPVvzUBomdruWQTAiFLGwNuaLksKzXQ6HHiGtOJoTHTufBSSxPi5z0_xa8BWUG3bWJ9oUisB6N6OidjuLBIlwzeU2614jOYx9kEu8Mp9WzYGKaBOmwdI6PCm4borRZN3u7uWaTU35t1zgutdH460LkJH3J55dDGyEC5m_GifLF4DpBxvwjdFdBaiVx_TQ5uj00VoB_h6SGKBB_kJ997L24f7VQtWf9tzAnA_2cY8NVUjo-j3UJXKRtuDwGjD7MKHYu1-7T--CGKt0UpxgvdiubWcCiyCum7CuBnztN9zo-Gz8vTbEmRhtEGs-Ly_y9DgvH6Z0BMsBsBo5E7qE0N2D6oHgF0j_sIyCp4QDeuzcDdUd75p1nAi9w7rx95rlKpG5MtrWJQLf_eribi81FxIKmiTaKJ7eS3PNrGsf759t_PN-y3Uho1EWQHbLXjndyWM2wepRdAe-PGJKsr2o8Kd9G2WIQWWft4Ea-8YvHTT9TS4Y6UkshyXXo0w-39sOlPsDJu2YWlUFhiYk0c6Ld2BkM7mrpkVCazjyw1SwtwwTElCGeX5AL8P9AY47D6kwT11nMVcdX88SR4LgRRICRfeZVBPkR_4Cp4JqhFnkKD9Y_XWuTgjatzTfk-Vz0nYsZVt9Mxxh0w9fgK9ZyZ4XqO4Tu25T5IDK4OFVA_pdVg5hPpbY0Gl4jf3jxYqm-hhqqilGYhC2J6tVOlNRJExbA5zcm8dIKUWGmv8uyvsXJzZgcbM_MQ4k1nwQVCzThdDJ7CC2R0qsMp6XZ4HpDInmtYZkSfPEmUo0X2ZbPuLEQzgyQaWACGoQTUkJ1mpCQ3fIXnykU6iYW4ZbPs3Ny0Zm1SzOgBJEbxlbP0VXriNZp5JVFUYZFpe7J-p6iLYt8mtryVcc6vitXx_FWKJck29na6udhpDAh6z50j1cqghzDNThe3REmIwc6mGQy6KnfhM89noN3cS-CgrHrnRnXWgQ9iJ5u7ywrRSzq2apf4htf4WVjjjZ_BE23V24syDIL3oo-2EZgYmJ5h-wra6a8xz9W9g6BEOfmbUi4YEkFrbLPC7mUBKXYTAoLDdTK6MGhePBA1bE1Zy5xf7jEOXRGrxcq1VJKIZ1q4BEJIE76ofwOT_ocBsLi_7WZD9Trycb7zZHS5FlAcNwS3rNkzITnECtsydlBl1G-sUfo8nKSs_maz2NM8zUUx_SA5WbeMvsY9N2FUPaxkEjBdDMNnMTnAJPRgn4l6OfoIJEkimzpLWptZN3S5EmYyHXhGJM84yp9hdsQGE3_zrO9aeh1W5pxjzqPGZtdNI8OP6oz9sFa2lKK2qX6ZpXj4jHhr4XtMue-or0q3LOKdXhiSgiDT3kgrKL3Qgmnorp75FLRB5FuBZ4j30D91g8yDbcT1a_UfRl97btaRrTI9rW3sdRgHZXH0zK_TZeVLXi3qncQq-Q1__2aBT7eJJD83HO6tooXwoP0WEY_oETmBr1rjp0R_XCUYY2fQ52C7Ln3khrMhV5XJ8kDavl9rQuOi2SgqAwXJqpp8IxhfvXkGRsKhB3q0Vnauao-vUrw6eXwmzNJ6jdN9G_qnOsXs7ezEwkxtiTjAmpxgzZj88kmRrQoWHgwTmcW5WwNkWY1XWbiE8xnlnKZ1dqyEZIBRXl2QIVdELmvMfgrUp4gS2CyxLsSm7kFJECwcEBBkOnRRv9L4tpP6O5WnU2DsVLqLnJAF_lHF3xQIHYMs0UzRNw8sTZjgcpQNNhbNHuGNgT6hMsrhxBYh2JwXiXUTKbIeSzisEYz1IyP-jo2Zhxgk0ZzMqX8ljcmK8YcJWXR_g8K4IoUg2YaxBVvLrGQ-sCBQM1zXnhYk5uz-2agmzYhQnXmz-nHVdHeRSG1ssBBTGaEy8t89H-ngSzLtIKdcsQmALDNzgf1Ez5bZ3OyejM2ybdGRZeVlQSG6DdK7WpCLYBcUiysSKXBNo1A4L5YPsBEULcFs6QZt6JZEyEqSMRMci0Ox5G8NQ6O-h03-0RuQVkx12fr_9eAuFd-I-BtqM7daGX0Jijt99Ld0DRJeNbQc-OAQ5vVWRWt7Y81rmA42zO4DYkocjnek-KWCIYE8mZPFeieUcLtO9pgRsGh6yVRH3ycsviClgkTrLjRYDmWyjHWpwdtPHsfEoTRhHmqC0KXAv0ZXv_QesM5n7ugjBD7CMD3_WaqoxFsRv5S5CRufsKGsTBRdJTqVPW_dX_0_WKquexBDNqI9oDb_oBSMoina-8MatyoGNg1N0eM1FiSYAwxNpA0SKK7S94ossWX2kqqrk7CzBlABTg2MxGAp6YazDTOLgNkH59W6RxyFysqh5_zCFqNXdN151lc86OTHOYFH9GJJNRiP87Jts50Zpdqewqe495vlowYWTmZ9vewNu2yccoeG4w-BtahIHzmtvMEK3VzLr5DbLp_N8qf5PBE6nyLyQDSXd47GgYUBPTzEqf-xgjIaG97Fhw4If0yWAsWd_0HPMp9jOzzglKIqn7iVxZFj1v4xxjCf6IKLIQ_pxofIyGz9IpNyOLtIf_qzj4Qx4WiqGeUovdXe86l1lEkzB-CVvmR8aoITtpa5wZDs9Zf3bIh76V5364-3JogOSnJXvDGcyXg2RLsE1HeEy7_BoirUll9_-IVuThdEJeKwrWjjkGriTnh4mTAyRl_qAwgiI4_LyIGjPmhQ-RlcZOfT-5nptec="
            }
          },
          "time": {
            "start": 1771214726070,
            "end": 1771214740611
          },
          "id": "prt_c649fe3b6001IGc3X8GvCrHG8t",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fd9110017Y375UuurauF0m"
        },
        {
          "type": "tool",
          "callID": "call_1Uq2PIB4WbTbhnU8EblvQx3U",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/commit_all.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/commands/commit_all.md</path>\n<type>file</type>\n<content>1: ---\n2: description: Create clean, grouped commits for all current changes\n3: agent: build\n4: ---\n5: \n6: Use the `gitter-commit` skill from `.opencode/skills/gitter-commit/SKILL.md` and route commit execution through `@gitter`.\n7: \n8: Goal:\n9: \n10: - Turn the current working tree into a clean set of meaningful commits (not a single `git add -A` dump)\n11: - End with a clean `git status`\n12: \n13: Process:\n14: \n15: 1. Inspect the repository state (`git status`, staged/unstaged diffs, and recent commit titles for style).\n16: 2. Group changes into logical commit units (by feature, fix, docs, config, refactor, etc.).\n17: 3. For each commit unit:\n18:    - Stage only the relevant files.\n19:    - Write a commit title using this repo format:\n20:      - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n21:    - Add a short commit body rationale and signature when possible.\n22: 4. Repeat until all intended tracked changes are committed.\n23: 5. Confirm final `git status` is clean.\n24: \n25: Rules:\n26: \n27: - Prefer multiple small meaningful commits over one large mixed commit.\n28: - Do not commit likely secret files (`.env`, credentials, private keys).\n29: - Do not push.\n30: - If no commit-worthy changes exist, report that clearly.\n31: \n32: Return:\n33: \n34: - Commit list in order (hash + title + files)\n35: - Any skipped files and why\n36: - Final `git status` summary\n37: \n\n(End of file - total 37 lines)\n</content>",
            "title": ".opencode/commands/commit_all.md",
            "metadata": {
              "preview": "---\ndescription: Create clean, grouped commits for all current changes\nagent: build\n---\n\nUse the `gitter-commit` skill from `.opencode/skills/gitter-commit/SKILL.md` and route commit execution through `@gitter`.\n\nGoal:\n\n- Turn the current working tree into a clean set of meaningful commits (not a single `git add -A` dump)\n- End with a clean `git status`\n\nProcess:\n\n1. Inspect the repository state (`git status`, staged/unstaged diffs, and recent commit titles for style).\n2. Group changes into logical commit units (by feature, fix, docs, config, refactor, etc.).\n3. For each commit unit:\n   - Stage only the relevant files.\n   - Write a commit title using this repo format:\n     - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771214740732,
              "end": 1771214740734
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_09920f00c647755801699297947d288195830f0395929f7da1"
            }
          },
          "id": "prt_c64a01c84001vzlNU0SzQViUuX",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fd9110017Y375UuurauF0m"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "e1339077ff9e6ec55e1a8e06a04b9b168e5169fb",
          "cost": 0,
          "tokens": {
            "total": 94385,
            "input": 874,
            "output": 967,
            "reasoning": 928,
            "cache": {
              "read": 92544,
              "write": 0
            }
          },
          "id": "prt_c64a01d2b001KBW38Gdv44vetG",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c649fd9110017Y375UuurauF0m"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214740844,
          "completed": 1771214770141
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 96613,
          "input": 620,
          "output": 1785,
          "reasoning": 893,
          "cache": {
            "read": 94208,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64a01d6c001LNPf21loWtr0at",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "e1339077ff9e6ec55e1a8e06a04b9b168e5169fb",
          "id": "prt_c64a0265f001T7bcP18IY5L94s",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a01d6c001LNPf21loWtr0at"
        },
        {
          "type": "reasoning",
          "text": "**Planning generic skill addition**",
          "metadata": {
            "openai": {
              "itemId": "rs_0368545f0aa0461c01699297976df0819697e86a1740bf8a89",
              "reasoningEncryptedContent": "gAAAAABpkpelElwFaQLzTYdtUcl0JPqaN5VjJ7gYOAxXqoMBgxlJ-ubbqMnLNB6aqnwpOdCK09cbY2YF5AgoVVxOQF1j1G_T9XbgB0bu7Q_ubMzl_gOIYrSjc9KVEpgIB9Xv1zzRKSzftjSGfjdY4a-MWWTr8z_E-wNmE2ff9gIwi4M7aXzP4C6c7CW9x3IWhdn5Z04HRzQkZMvViwLFR95NQ52b4cItz5kSFRn1X7VSMtEGexkSc4jeXP5ZrTcSUxccqxOCvktMypexMWss_GLGbPZyWC8jzK4EaP-BG5lrgFHqkrC4nA3QfdkY_dIgqBIFryWvVIBxA5RK4i4e628bwZmUZIvaZZrB6bIu-Wz2UMXYdhI_JYvCBmjEDDqbfvBnLqJW4z78C_xJjccUh-PJVwd9BXzl61qpAGPNMPx_7zpdnLSp6njPLTEnNaHlExrVJ7YZGXNZSMdf98cHZc7Ijw8_M-gl5j_QnyWa2TIL6DzhTQddSpuqGRh2c-gucDyhQdZvYxycONZn7Nk0H3BReG9rWa2vcdOwdTBJbBaJ1DRfo_l81oXBkm1CxX7VQePvxUmFIIcfPXxj5oZHWa8gWBJK2P5jNo--sgCLslt4VAOHkzUt-tILtPt2OlD8WAK8TmQlqsBKd0gBAkoh84ch1UFMjTUPVTOdH6IP9Ds3MIsPk-N-5l-DLNanpUlBBis0pCcUU4h21MISREOYLhC1kUbeiVX56YwrhlMl2lCKGiYefBrOLmDxf0B6aV8GzU-jM8ZCaAhZDRqYdccRw_sli52bIwlQorREcUIh0ZW-jiID3L4cy43M4oo9o3AxKrxMTDDlT2Hycfhz7mha2b3jpFEbfFKP_5AOCL60s-EAuGQwPBbzjuADmKETywE77E1zun6EsIiefWPZV7NlFs9esiA_sUk29wayVZ0uRok6bBWobXVAJyTtIzGMdYIbkXFL6Q_XJtvyB-Q74FO1OE1G5CA593uJu9yWq9M1SwxKB_1vKRHxGcUnJeoXN-mWexmPq508pEgWcDybbamp1oomsjMFe4IlaHBXJowTQ8nw4nPT6COk4JWmsLMIJNJL8fzZdfq5jzIfZ_yxohK1igJlxP8aovkdyXXgU7AEzkcSawzWAmbWSZ0BVHq2a7qJumV3q69ugaPd4Y7YvuqvJ75AVLE7T-nv_8bUQ2BR_-vRytnaS1Pue8ILMzHHT5Qb2bwsNw3QDAZJAnYM2ilZcfg0G0sX_yZh577tTwryeZYvJzdjmjOgiddlzt-3EGHz1kgM2_ZZrIsr53LN59XJh0AvH1OWnr64yTbVlEFqxo3GGi8STX6TqkYCl9rGCODkWH1S1HGOWUEhq2th_Uc1AgsxFZDPCbNiwftwok-lbInM8SXg3ntkrIz6XV200jOG6lRICZVkPMZOwckL9X7fCJxTNGrbKxZLMi0WcOiHQrHbpDsPzulUIh6L1qILQ7kC_fHpLVu2IrIto-ssvh4RwnEcpx5H2GDG9PnxZmzK3fQ9jsJ-Al_w0xzqSMUkz1DVnoLCg4vmzyhZxnJUQWqqCtkIPD5-xrTD7StuP4IW3Znzjhn2MEwmwAnL8mWb00jsiWOsk2ciKUEQWKNm5wJjo035J6L2P4QZkEoRYWa93FObD6g7RyQywVkyXDSFAbdheGVal5OVEXhXXsKjNOrgo3GlzAyUl3_nT1NgIZLdGbOVkCywYlRlpeetndAq1LZ0xz9cU68MmyspsGIwHEM55e2qHJHkK4ZLxutFupbpVJZKTs6INpbQsGSJTAfg7l5FdhJkSxGE5d-uA0oa-Mo8T2N2LL5ZSL7d1pVJwEZaaOlBO_zPhX52dsR4sLskl9fs1B6oRq6T2G-6q2RwmUc05O1B9FjT_kZu3mg1NOwC4wwCwkjUOTbx31GP6xGxXp7MLBp7C1y8NzDiA1jGlgC5YfK__-cv0FgX8mbKT2LC8hWKliYSiIteEzTBsQvHNsxlS8eToiNr1_cUKrBVCqpn5_12tRBLrD70VdaS0w8j4l5rUNQN3f4et-g8DEGveywAqEMdSmeAGTAUkR0s_e1dSKmrE2wgZqmOoRN0q2Emd20j4ziSo3JALUzQ6bQYmo_djFYmeWO9cHLZhk9iV2RH5lmXpn3TGGzQODCVpNS77QP93vb9VbOglKMXbMNxCtYHvqo3bNRjafWDIUTHdDJ9D88RT5CjLNUhHHoB_5_pVz2PpdarVUAbxSRVWYrRI7lXLIxsV8FRg0CSwXC8Eo5whSGkhPNJvlHl78H3LwMK6JK450pOgwCQnxrxrpUbtxU-QQV24wZ75E1axAby-11gSU4r98kGDIXUTKg8K2fcN7ICxq3_-vgEhj4QqAqWbsULrk1NOiROzxUmFD5MDpHTezFvuyWzitZGOB0M73d55bLyY0e5MyF6T_iXvNqWc76CaF1g8Gd86z7I4uqBYXKZJbjRWxRBykoRvZ41mK_ON7PZVzS4yNT6js5YvzKl_tVOX73d9l5a1_pEgJxJaLlk1fHxiGopJJNNdy-jl5W53PA1971lUfKCX73AADcZxAxMLviGVbced6tXgN061U-y0vtJnARaMvCBB4EXnFNRuZPXI72XZN8_MCLLwMh_eeju1vsFaEPitQXAgIhBb5OlzvDIUr1plrO97dYzyIZm-llP8IibCFuc3nbAX4dRW8vatAOZDolKp6hwYS4ptBLuxK2GP6aqJ_oJ6WyMVa-1P59udW_XHsPg08vanCuMJLC5axeg7SK_1RX-X0Rcm-HVQdsvGCTrrMW78zjn7G09Zyns21AYDu-l7mirQT39SHbVtfkr_1Td-sQRubSfLHw20d9B34nBDjVuGC_2_doCEhNyEX3luBL_nVvicv0RgnzGStvrtalGxRzrAM0OcI2Dkj-EyZ4HIaetK3jyFiXNQdqemJK-tiP29YdkMuc_j9FQNK-9zUb6MgovVR7XAoA1fwoL0myqmUf8NJ2fF2Mk3jGRhJ-UVNrsEyhPLanm9hvFq-wFMgsaGaOdJC79Ie2i7LnMLNUuhs1cdnQ3O6XM3s3G-X1G-CMUzqUDbi5YWfbdgZcmwBEDaOj-lPnPPKttU-aTq3w8Ye1EWcRGZrVK3nKBGTL2GxM7bOlEROm5XgYXPRwF_ueLFesiSflu4E_00OXQTwrBlcCz-l0Ilp6PoBTDA416N13TTJvIWJyLt8kJJ7EOYzoGcJiC8jzjVhQl3M7H0fJs5VXLAgzcM_tOy16sW3cEQkb7b-Jyihat0iCUxny5Qylgk_G-IKose16zVEAOtCBwQ5BZnbOx8oeAaWnWBgEBaS-aEejQkNTgkD3cqv74R6filVT7E6yH86IV-RRs-xYKpvyT4p83ARII2zoSEbokNVcvmiK7oQlQSKHQtJhdkea_cD8YZiVP4LgnSmuLjN2V5bvnyAW-xY-0DoolTH9UZJ5nf6_Kqqk1zJfTeWIowh-pt2o6kRK5DUWSfgBJAToFEbPhT-uPXCJa0Mvp3VqDWIY7nn2AnR3__eVb-4nrNw8ETdYQG6UNfAJ678pIsFlR8ZpNbQz8KjU31stpnZDu7kQg1tOW_V705zAlu_OmxpONBSOIYy_JypHxPeJd10gzZLMWHlzC6OWqtxhrAnwVawTkkGdDcaO8jSR_6y8lifWLhiBWVFwlkvASUvx2mwN70O0xl6gJUGwX3O3MoUjVEbBcCRu_k8pzdFpjlrRKZdp0QtFebWDACuJmvUYxghLrWlhoHjXkRZmCv2oRP25zUuexB8VHGG0xgI-cK80RQExx4UbKh34m8KTd7Zuea5yxxbj7Wv_C-nJu1D_W3YJstU6W81VtSZWD1_VGHKI7LBxhcheJI_Z7QKHEi0_KTlHRGZAs569zFPI946nRgymX8BtY5rZ44m8RBhjBP44kWObYje5D4HPY78nyYxy1hmIzk7ZdUwOuU_Glj1hHIyrUeg7b4MeUKCwyW_XMhr0EvLEXgg880i4H_4sxyrHT1dentNEh7jV2GYBpC8cmpVLdxbGpqGb7XCOcGteLcYP_uLDaZ68AZ7ODhy-CVgu3_j0Pvqrscb50Z_DcsRInS6C2bTmRSbK1mhtEGlT9ghmeVkKg5J82OsBqaGCScQXSiLQOQI72gD7tVjfkwxHLK_3YfmQRtod_RdWL5HZtlfJLj4ZqqHSWv5ZSxV8XtUqWt5KsP85RQTZAd5FFbACqUCMgFdr2w9jkKY0Fn9jOPFIJA9v4-kY9SdYExSRtDMY3vu5pQIeIZCncHqti637BHGKcCxBNcpfv5FHncgZDwYC5Uw9h7HQpZdTFXfntxQA4Ia9zLnL1GJkGUn97WQG6NEp71RJjAAXZIlflu1RsWAecMN8BpdIJPUZi14dYGec6Kpoxg19RLWUuGoCBxWfgY7gWKusZcWl9o79KTM0_TSSI6MalPUDmsgJ4qz8eWbiMjnKP2QtirksA2Ah7L1qabIXAthQczYZc1ZyQ9UL3x2l-5_K0xl2IgU2--VzVVw9coT66ibqveT3cg5-rSgDkc4Cef3zntM_yYB7gsefK2s-tY-ks34uJ781iXg-iya4lvFxXddYUH4XWzQxNYCR0JSn55pIi1AS9a-H7b-bfqd6VQ3QO88P6gByTCWTtPVYbG9ixEBRDeEgIANS6TNjDl3VeOu8eQ0qPHOdFIDHCfqzr-BBw_YANcJzQlQl5QyzYSOtT03PiKYS8dqWyfV6IJ8AHqh7CRHr_y9WmbEemVjPoQ7QXmaJUHwGPTux_wUxB2uOmn_6NkR_wibjRhiX8qszKJPWjeAVqHtQDeBMLc4wLtTROucbdSPPWoZBpwQ4UwOL58c4ZDdCbH93SfIjGag_ptJLF2Vw_V9IjI94PMcV3v7iMhA3U-LI_HtEd_nzBXoztorm_1YbErXBIaIzsma0RBcpdgu8tEUcpsqAKm9ulttNPS028EUMcvh9yyQ5OpBVVpFljJyQbPkTHaZEcR5cxbQoLjV_d-kEJLnsxDK70n8tD5P_QDNOhLSywE9ZXxPdIwaF0gpC4ja54YkiIDTZ2AUhe_iRBybUUUX53a66y2GRZFBgzssbaXd9tnHUksePMraQE_y4TLqsvzL16Slf3aU_TN8TIMZzjlE-hkYrTF53zG9mdpsUIHe07vIxrzUSlB574uzdFKb1kxE2gtHz7rom3A35wmG30IMhAKcom0Al3Dx4Ou5nLSd0hNP_FA3ECyJSSSZIt7Xn6lwa-5iorZyTeche9LR7xGUMj5xLoca5_5BtjpPT98s1nNYKGG3ctYRoSVngx5wRXZt16Cb22lCV98LpdRHqfQlNf2Xuh-s20qP0SnOCab2wVLb4vFg_NiIYm-HylNfkkmpq-wnPRf1g9jeILmyYXpJZ4R4Dmj2iCVhrQ3cwMEnpejsmbPZBJHxhhGN07TxPzok_PAn87yutb_wSaiNkRTYuiFn6nBDTTiMk8VEmcpwWr6KKu0V0-AxmwNpyMhTNScOvqS-5uZNHHqGHZ-6dz5j-VxsmwrWNLBszHZ0NmfNL8UKln4n5N9WfxL912xtwT_DAtyOrNJDjleMSiNI5uqWeFWxYW-0ryV2BDJd60qEetVu6AcDoXeo5lBQnNdMpFGu8IBt0-BkInXq-s_HTIFM9rSLIV4TT9Y-uiW8EgBhoVUCUxsgu4I2NJVe14rsQljHP-r9L5Rb-AvVjQAr2PbHyOiOgFr5XRVD2PKMymDZhdTKGpjPKT8gGCyztmY_lRpzz0szq6CvbcH_ukb2Dbv_UuNvFIwIN1aPciOX5ss3qUeSPLXRVF8BRLsqwnE7QIb5ArdpRvu9tsoikhxbzJk99hKJwL8SDe1-7Aro58La6ZqjuDUhipx01EgtrNYgRMYxhrSzKQLsyKPwX2K7oXFmf-3aBn9ZDVE0RnnusWEeE2I6qO9U11rbTvQZhww1J9zh0JqoGcT_DAC1ibuiOf1bprOP32ZLupGiOjm3xBqE_9FRGV6ODcrp8zWIBWKA2kwnykDGDynl0PbbNX9H1Dry9Qv4kgf5_rJnOjbglafSSFbBZGS7v5hpZQCaj2v6m9hy8pEXYk0GcHnCaFp0DzOC_U5aaDJmNTaeTir4s-t_P6QTi92qj_LWJB03my9uk7LDMCsu3IEr3MO4HKidRv023Gsivm8t5eyAL-EndX4IRgtTVcHrJ-S7dnLvoMgcCRygx2ckrPr57lx1y91BqY2l1x8lD_wEAxdVGzQLt0eHCMVqMknFVAvynI8Ngy21a_u6zX-J3_MXk7BzTEvAPeoGG9jUEldYgagkahAykPYjJ0MSeY8WWree4mOpPZWxezR_RHind1j2tjOKKkhNm44ZCiiFV5enMdGfPXXBbqY6fI2dTBHqhpBSKQC-6KOK0T5IEhCYny2p2GKyfwYs72QfvPfqnQvk-vVav9TOL6-QMZTrH8rlNZGRXFNFPEAU46FKI-d6EXiMbWduFDrqZ2iGjjMiQgqQewRk1qyGn1vUTt1jj-_7lYVUC6R1B9052L03-T0IXykAiBm-8XG0-by4LRhPmkmuEUbtQubLWaNVlYvc-gCyPQbuzjIdbn56KDbP1nkJ8ZQAljQ8FGuRhrPT4yS9d21v4kwvvp"
            }
          },
          "time": {
            "start": 1771214743476,
            "end": 1771214757302
          },
          "id": "prt_c64a027b400192w7Did2K29K18",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a01d6c001LNPf21loWtr0at"
        },
        {
          "type": "tool",
          "callID": "call_i58zkXSb27YZ3tdCWt88FfwJ",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Add File: /Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md\n+---\n+name: docs-scraping\n+description: Add or refresh external documentation snapshots from user requests into split `.ext.md` pages and `index.ext.md`.\n+---\n+\n+## What I do\n+\n+- Turn a user docs scraping request into a reusable script and generated docs snapshot output.\n+- Standardize output under `docs/external/<source>/` with one page-level `.ext.md` file per discovered page.\n+- Ensure each generated page has a metadata header and notes footer, and create an `index.ext.md` manifest.\n+\n+## Accepted request patterns\n+\n+Use this skill when the request includes one or more of:\n+\n+- A docs root URL (for example `https://example.dev/docs`)\n+- A source/domain name (for example `moonrepo`, `astro`, `pnpm`)\n+- A request to \"scrape\", \"snapshot\", \"mirror\", or \"refresh\" external docs\n+\n+## Output contract\n+\n+- Script: `scripts/scrape_<source>_docs.sh.ts`\n+- Output directory: `docs/external/<source>/`\n+- Output files:\n+  - Per-page files: `<stable-page-stem>.ext.md`\n+  - Index file: `index.ext.md`\n+\n+## Behavior requirements\n+\n+1. Resolve source metadata from the user request:\n+   - `source` key (safe folder/script slug)\n+   - docs root URL\n+   - discovery method (`sitemap.xml` preferred)\n+2. Reuse project script conventions:\n+   - Bun shebang (`#!/usr/bin/env bun`)\n+   - `*.sh.ts` naming\n+   - helpers under `scripts/helpers/`\n+3. Use resilient scraping strategy:\n+   - Primary: `r.jina.ai` markdown proxy\n+   - Fallback: direct HTML fetch + conversion to markdown\n+4. Normalize filenames from docs paths:\n+   - deterministic flattening (for example `docs__guides__intro.ext.md`)\n+5. Regenerate output cleanly:\n+   - remove old `*.ext.md` in target source directory\n+   - write fresh per-page files and `index.ext.md`\n+\n+## Generated page format\n+\n+- Top `----` section with summary metadata:\n+  - captured timestamp\n+  - source root\n+  - source page URL/path\n+  - keywords\n+  - concise summary\n+- Middle body with markdown content snapshot\n+- Bottom `----` notes/comments/lessons section\n+\n+## Index format\n+\n+- Top `----` section with source/capture metadata and summary totals\n+- Full page inventory with links to local page files and capture status\n+- Bottom `----` notes/comments/lessons section\n+\n+## Implementation workflow\n+\n+1. Inspect existing scraper scripts for reuse patterns (`scripts/scrape_*.sh.ts`).\n+2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n+3. Run the script once to generate docs output.\n+4. Report totals (`pages`, `ok`, `failed`) and notable blocked pages.\n+5. If a new script entrypoint was introduced, update `README.md` and `AGENTS.md`.\n+\n+## Safety constraints\n+\n+- Never embed secrets, auth headers, or private tokens in script or output files.\n+- Skip private/authenticated docs pages unless explicit credentials handling is requested and safe.\n+- Keep scripts idempotent and deterministic where practical.\n+\n+## Return checklist\n+\n+- Script path(s) added/updated\n+- Output directory generated/refreshed\n+- Discovery strategy used\n+- Capture totals and notable failures\n+- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nA .opencode/skills/docs-scraping/SKILL.md",
            "title": "Success. Updated the following files:\nA .opencode/skills/docs-scraping/SKILL.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md\n@@ -0,0 +1,84 @@\n+---\n+name: docs-scraping\n+description: Add or refresh external documentation snapshots from user requests into split `.ext.md` pages and `index.ext.md`.\n+---\n+\n+## What I do\n+\n+- Turn a user docs scraping request into a reusable script and generated docs snapshot output.\n+- Standardize output under `docs/external/<source>/` with one page-level `.ext.md` file per discovered page.\n+- Ensure each generated page has a metadata header and notes footer, and create an `index.ext.md` manifest.\n+\n+## Accepted request patterns\n+\n+Use this skill when the request includes one or more of:\n+\n+- A docs root URL (for example `https://example.dev/docs`)\n+- A source/domain name (for example `moonrepo`, `astro`, `pnpm`)\n+- A request to \"scrape\", \"snapshot\", \"mirror\", or \"refresh\" external docs\n+\n+## Output contract\n+\n+- Script: `scripts/scrape_<source>_docs.sh.ts`\n+- Output directory: `docs/external/<source>/`\n+- Output files:\n+  - Per-page files: `<stable-page-stem>.ext.md`\n+  - Index file: `index.ext.md`\n+\n+## Behavior requirements\n+\n+1. Resolve source metadata from the user request:\n+   - `source` key (safe folder/script slug)\n+   - docs root URL\n+   - discovery method (`sitemap.xml` preferred)\n+2. Reuse project script conventions:\n+   - Bun shebang (`#!/usr/bin/env bun`)\n+   - `*.sh.ts` naming\n+   - helpers under `scripts/helpers/`\n+3. Use resilient scraping strategy:\n+   - Primary: `r.jina.ai` markdown proxy\n+   - Fallback: direct HTML fetch + conversion to markdown\n+4. Normalize filenames from docs paths:\n+   - deterministic flattening (for example `docs__guides__intro.ext.md`)\n+5. Regenerate output cleanly:\n+   - remove old `*.ext.md` in target source directory\n+   - write fresh per-page files and `index.ext.md`\n+\n+## Generated page format\n+\n+- Top `----` section with summary metadata:\n+  - captured timestamp\n+  - source root\n+  - source page URL/path\n+  - keywords\n+  - concise summary\n+- Middle body with markdown content snapshot\n+- Bottom `----` notes/comments/lessons section\n+\n+## Index format\n+\n+- Top `----` section with source/capture metadata and summary totals\n+- Full page inventory with links to local page files and capture status\n+- Bottom `----` notes/comments/lessons section\n+\n+## Implementation workflow\n+\n+1. Inspect existing scraper scripts for reuse patterns (`scripts/scrape_*.sh.ts`).\n+2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n+3. Run the script once to generate docs output.\n+4. Report totals (`pages`, `ok`, `failed`) and notable blocked pages.\n+5. If a new script entrypoint was introduced, update `README.md` and `AGENTS.md`.\n+\n+## Safety constraints\n+\n+- Never embed secrets, auth headers, or private tokens in script or output files.\n+- Skip private/authenticated docs pages unless explicit credentials handling is requested and safe.\n+- Keep scripts idempotent and deterministic where practical.\n+\n+## Return checklist\n+\n+- Script path(s) added/updated\n+- Output directory generated/refreshed\n+- Discovery strategy used\n+- Capture totals and notable failures\n+- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md",
                  "relativePath": ".opencode/skills/docs-scraping/SKILL.md",
                  "type": "add",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md\n@@ -0,0 +1,84 @@\n+---\n+name: docs-scraping\n+description: Add or refresh external documentation snapshots from user requests into split `.ext.md` pages and `index.ext.md`.\n+---\n+\n+## What I do\n+\n+- Turn a user docs scraping request into a reusable script and generated docs snapshot output.\n+- Standardize output under `docs/external/<source>/` with one page-level `.ext.md` file per discovered page.\n+- Ensure each generated page has a metadata header and notes footer, and create an `index.ext.md` manifest.\n+\n+## Accepted request patterns\n+\n+Use this skill when the request includes one or more of:\n+\n+- A docs root URL (for example `https://example.dev/docs`)\n+- A source/domain name (for example `moonrepo`, `astro`, `pnpm`)\n+- A request to \"scrape\", \"snapshot\", \"mirror\", or \"refresh\" external docs\n+\n+## Output contract\n+\n+- Script: `scripts/scrape_<source>_docs.sh.ts`\n+- Output directory: `docs/external/<source>/`\n+- Output files:\n+  - Per-page files: `<stable-page-stem>.ext.md`\n+  - Index file: `index.ext.md`\n+\n+## Behavior requirements\n+\n+1. Resolve source metadata from the user request:\n+   - `source` key (safe folder/script slug)\n+   - docs root URL\n+   - discovery method (`sitemap.xml` preferred)\n+2. Reuse project script conventions:\n+   - Bun shebang (`#!/usr/bin/env bun`)\n+   - `*.sh.ts` naming\n+   - helpers under `scripts/helpers/`\n+3. Use resilient scraping strategy:\n+   - Primary: `r.jina.ai` markdown proxy\n+   - Fallback: direct HTML fetch + conversion to markdown\n+4. Normalize filenames from docs paths:\n+   - deterministic flattening (for example `docs__guides__intro.ext.md`)\n+5. Regenerate output cleanly:\n+   - remove old `*.ext.md` in target source directory\n+   - write fresh per-page files and `index.ext.md`\n+\n+## Generated page format\n+\n+- Top `----` section with summary metadata:\n+  - captured timestamp\n+  - source root\n+  - source page URL/path\n+  - keywords\n+  - concise summary\n+- Middle body with markdown content snapshot\n+- Bottom `----` notes/comments/lessons section\n+\n+## Index format\n+\n+- Top `----` section with source/capture metadata and summary totals\n+- Full page inventory with links to local page files and capture status\n+- Bottom `----` notes/comments/lessons section\n+\n+## Implementation workflow\n+\n+1. Inspect existing scraper scripts for reuse patterns (`scripts/scrape_*.sh.ts`).\n+2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n+3. Run the script once to generate docs output.\n+4. Report totals (`pages`, `ok`, `failed`) and notable blocked pages.\n+5. If a new script entrypoint was introduced, update `README.md` and `AGENTS.md`.\n+\n+## Safety constraints\n+\n+- Never embed secrets, auth headers, or private tokens in script or output files.\n+- Skip private/authenticated docs pages unless explicit credentials handling is requested and safe.\n+- Keep scripts idempotent and deterministic where practical.\n+\n+## Return checklist\n+\n+- Script path(s) added/updated\n+- Output directory generated/refreshed\n+- Discovery strategy used\n+- Capture totals and notable failures\n+- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n",
                  "before": "",
                  "after": "---\nname: docs-scraping\ndescription: Add or refresh external documentation snapshots from user requests into split `.ext.md` pages and `index.ext.md`.\n---\n\n## What I do\n\n- Turn a user docs scraping request into a reusable script and generated docs snapshot output.\n- Standardize output under `docs/external/<source>/` with one page-level `.ext.md` file per discovered page.\n- Ensure each generated page has a metadata header and notes footer, and create an `index.ext.md` manifest.\n\n## Accepted request patterns\n\nUse this skill when the request includes one or more of:\n\n- A docs root URL (for example `https://example.dev/docs`)\n- A source/domain name (for example `moonrepo`, `astro`, `pnpm`)\n- A request to \"scrape\", \"snapshot\", \"mirror\", or \"refresh\" external docs\n\n## Output contract\n\n- Script: `scripts/scrape_<source>_docs.sh.ts`\n- Output directory: `docs/external/<source>/`\n- Output files:\n  - Per-page files: `<stable-page-stem>.ext.md`\n  - Index file: `index.ext.md`\n\n## Behavior requirements\n\n1. Resolve source metadata from the user request:\n   - `source` key (safe folder/script slug)\n   - docs root URL\n   - discovery method (`sitemap.xml` preferred)\n2. Reuse project script conventions:\n   - Bun shebang (`#!/usr/bin/env bun`)\n   - `*.sh.ts` naming\n   - helpers under `scripts/helpers/`\n3. Use resilient scraping strategy:\n   - Primary: `r.jina.ai` markdown proxy\n   - Fallback: direct HTML fetch + conversion to markdown\n4. Normalize filenames from docs paths:\n   - deterministic flattening (for example `docs__guides__intro.ext.md`)\n5. Regenerate output cleanly:\n   - remove old `*.ext.md` in target source directory\n   - write fresh per-page files and `index.ext.md`\n\n## Generated page format\n\n- Top `----` section with summary metadata:\n  - captured timestamp\n  - source root\n  - source page URL/path\n  - keywords\n  - concise summary\n- Middle body with markdown content snapshot\n- Bottom `----` notes/comments/lessons section\n\n## Index format\n\n- Top `----` section with source/capture metadata and summary totals\n- Full page inventory with links to local page files and capture status\n- Bottom `----` notes/comments/lessons section\n\n## Implementation workflow\n\n1. Inspect existing scraper scripts for reuse patterns (`scripts/scrape_*.sh.ts`).\n2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n3. Run the script once to generate docs output.\n4. Report totals (`pages`, `ok`, `failed`) and notable blocked pages.\n5. If a new script entrypoint was introduced, update `README.md` and `AGENTS.md`.\n\n## Safety constraints\n\n- Never embed secrets, auth headers, or private tokens in script or output files.\n- Skip private/authenticated docs pages unless explicit credentials handling is requested and safe.\n- Keep scripts idempotent and deterministic where practical.\n\n## Return checklist\n\n- Script path(s) added/updated\n- Output directory generated/refreshed\n- Discovery strategy used\n- Capture totals and notable failures\n- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n",
                  "additions": 84,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771214770018,
              "end": 1771214770030
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0368545f0aa0461c01699297a52064819692a18a3b2c2f235d"
            }
          },
          "id": "prt_c64a05db7001fBvosLQ7IIkoFn",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a01d6c001LNPf21loWtr0at"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "8ed6d0dbf59b09025ab04a3441cfdc74b1e2b4e8",
          "cost": 0,
          "tokens": {
            "total": 96613,
            "input": 620,
            "output": 1785,
            "reasoning": 893,
            "cache": {
              "read": 94208,
              "write": 0
            }
          },
          "id": "prt_c64a08f92001TH3henklhj494j",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a01d6c001LNPf21loWtr0at"
        },
        {
          "type": "patch",
          "hash": "e1339077ff9e6ec55e1a8e06a04b9b168e5169fb",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md"
          ],
          "id": "prt_c64a08fcc001D0E0F88o05UlAs",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a01d6c001LNPf21loWtr0at"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214770171,
          "completed": 1771214780698
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 97141,
          "input": 1925,
          "output": 496,
          "reasoning": 34,
          "cache": {
            "read": 94720,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64a08ffb001yNxm3q0tdviLFt",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "8ed6d0dbf59b09025ab04a3441cfdc74b1e2b4e8",
          "id": "prt_c64a09c12001a4sCCI4OrKcOUW",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a08ffb001yNxm3q0tdviLFt"
        },
        {
          "type": "reasoning",
          "text": "**Updating scraping commands**",
          "metadata": {
            "openai": {
              "itemId": "rs_064d2cf6a084305601699297b59bc48194b318fbea8c912a15",
              "reasoningEncryptedContent": "gAAAAABpkpe24kkDNIcKgH9MU7UXKASMkT0Gt0o3LAa-eQef_npM8NFfR96Pnb_WwC0qHorK6pgjjS5jc68m_F8NpKjOoe9AsVPApMHy8cUHpkk18972HUy_MjFN_EyyE6yLaUUwHMMPXWwVEofqQjPPZqnhsoglODnmpqAQnC-oqtIaRF5iNNwylD-vLJFADv1XuzlYVld4s1ywt2MlSabRvCUXgIOY_J0lG5PzsJIOMwsCUGWqvPG96NXD1qiPeaNrPfZ9Dzw_bw4z2LDERtxpG8b1lQw5ueQME_MiaLJqk2ntBEJ5rT1q-9_KChP6B32_wp_DiN-a9oMS7KoiTBmQXZFYvn9tjawZPRvRrtZbs0LJCji1KeqLLFviU8iLx9yIiB-k3wlbrVQucaJ1LBc9qM7CxranH3XLtm0sRS4AjxpUwbWiSeLxZzLX6X2YXrq4KJtPBfynpSZHPOuMoByT0sMzyCDbi2_Ka5sdo7cREqcX3-3AGcuoigk_LmqSBmoeexuLmmxdud2BgP6HXopIbNEtu6ojqHzA3T0jBJvPkRvDvm114JRs20sY_ND8GLK8jcW3p726An-Kz1MumfcQWh_tF7fAnvc4gyl1ao5x8X3YgOVy6zonTcd1-OTpGcQ9qQDn82DoIj5-KoRvapnuxsgJg1_8rNZMc5_NlFSMGNBuqz1ROSFzDq1TKB4_CCvOY7mg-3wMsuVDHE1-V66WLbCtxKohtXXhKwmOZVXT5do5nqjBvSlQkf1Mf6NGWuHutdESRLT7fhOurhqcBbwsXQmquc3PBOdV9OybSPJEMBCr9EAHHdufIlQpfX_QszB8d7p5XLmPavE-UJ_7j8-5K5chb3C-8V5gSvKjtxj7mDpcAiZ91q7wTMMi9IhFsTxHmCQPj-rrDsMbbfJnMYsS3yhARNQ_cZsg2ZGKO2-6FbVK2Emm1BURrxTICzBuecKtueRl4WFuuYevltsP1pNRs-v0oX3TPY8I4QzbDEdPaqn_qD7uu-i-9rk4Tnyb3qPp1uyF6BT6DAlQ8SBV9pp6ueUAJG0jSvFxEYSwiPxgk7SOcrndCkw="
            }
          },
          "time": {
            "start": 1771214773737,
            "end": 1771214774359
          },
          "id": "prt_c64a09de9001k3ajSvlJDvJk8T",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a08ffb001yNxm3q0tdviLFt"
        },
        {
          "type": "tool",
          "callID": "call_ki1Vt3PBrMokWPTl16trjQar",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n@@\n ---\n-description: Add or run an external docs scraper into docs/external/<source>\n+description: Add or run an external docs scraper from a user request\n agent: build\n ---\n \n-Use the `external-docs-scraping` skill from `.opencode/skills/external-docs-scraping/SKILL.md`.\n+Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n \n Goal:\n \n-- Add a new external docs scraping workflow (or refresh an existing one) using project script conventions.\n-- Produce split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n+- Convert a user scraping request into a reusable external docs workflow.\n+- Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n \n Process:\n \n-1. Determine source metadata from user input:\n+1. Parse source metadata from the user request:\n    - source key (for `<source>` folder and script name)\n    - docs root URL\n    - discovery strategy (`sitemap.xml` preferred)\n 2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n 3. Reuse shared helpers (`scripts/helpers/`) and follow Bun shebang script conventions.\n 4. Implement resilient scrape flow:\n@@\n 7. If a new scraper entrypoint was added, update `README.md` and `AGENTS.md` references.\n \n Return:\n \n - Script path(s) added/updated\n - Output directory generated\n - Discovery strategy used\n - Capture result totals and notable failures\n - Exact rerun command (for example `bun scripts/scrape_<source>_docs.sh.ts`)\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM .opencode/commands/scrape_doc.md",
            "title": "Success. Updated the following files:\nM .opencode/commands/scrape_doc.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n@@ -1,19 +1,19 @@\n ---\n-description: Add or run an external docs scraper into docs/external/<source>\n+description: Add or run an external docs scraper from a user request\n agent: build\n ---\n \n-Use the `external-docs-scraping` skill from `.opencode/skills/external-docs-scraping/SKILL.md`.\n+Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n \n Goal:\n \n-- Add a new external docs scraping workflow (or refresh an existing one) using project script conventions.\n-- Produce split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n+- Convert a user scraping request into a reusable external docs workflow.\n+- Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n \n Process:\n \n-1. Determine source metadata from user input:\n+1. Parse source metadata from the user request:\n    - source key (for `<source>` folder and script name)\n    - docs root URL\n    - discovery strategy (`sitemap.xml` preferred)\n 2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md",
                  "relativePath": ".opencode/commands/scrape_doc.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n@@ -1,19 +1,19 @@\n ---\n-description: Add or run an external docs scraper into docs/external/<source>\n+description: Add or run an external docs scraper from a user request\n agent: build\n ---\n \n-Use the `external-docs-scraping` skill from `.opencode/skills/external-docs-scraping/SKILL.md`.\n+Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n \n Goal:\n \n-- Add a new external docs scraping workflow (or refresh an existing one) using project script conventions.\n-- Produce split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n+- Convert a user scraping request into a reusable external docs workflow.\n+- Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n \n Process:\n \n-1. Determine source metadata from user input:\n+1. Parse source metadata from the user request:\n    - source key (for `<source>` folder and script name)\n    - docs root URL\n    - discovery strategy (`sitemap.xml` preferred)\n 2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n",
                  "before": "---\ndescription: Add or run an external docs scraper into docs/external/<source>\nagent: build\n---\n\nUse the `external-docs-scraping` skill from `.opencode/skills/external-docs-scraping/SKILL.md`.\n\nGoal:\n\n- Add a new external docs scraping workflow (or refresh an existing one) using project script conventions.\n- Produce split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n\nProcess:\n\n1. Determine source metadata from user input:\n   - source key (for `<source>` folder and script name)\n   - docs root URL\n   - discovery strategy (`sitemap.xml` preferred)\n2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse shared helpers (`scripts/helpers/`) and follow Bun shebang script conventions.\n4. Implement resilient scrape flow:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML fetch + conversion\n5. Regenerate `docs/external/<source>/*.ext.md` and `docs/external/<source>/index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and call out any blocked pages.\n7. If a new scraper entrypoint was added, update `README.md` and `AGENTS.md` references.\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture result totals and notable failures\n- Exact rerun command (for example `bun scripts/scrape_<source>_docs.sh.ts`)\n",
                  "after": "---\ndescription: Add or run an external docs scraper from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nGoal:\n\n- Convert a user scraping request into a reusable external docs workflow.\n- Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n\nProcess:\n\n1. Parse source metadata from the user request:\n   - source key (for `<source>` folder and script name)\n   - docs root URL\n   - discovery strategy (`sitemap.xml` preferred)\n2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse shared helpers (`scripts/helpers/`) and follow Bun shebang script conventions.\n4. Implement resilient scrape flow:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML fetch + conversion\n5. Regenerate `docs/external/<source>/*.ext.md` and `docs/external/<source>/index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and call out any blocked pages.\n7. If a new scraper entrypoint was added, update `README.md` and `AGENTS.md` references.\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture result totals and notable failures\n- Exact rerun command (for example `bun scripts/scrape_<source>_docs.sh.ts`)\n",
                  "additions": 5,
                  "deletions": 5
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771214780597,
              "end": 1771214780610
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_064d2cf6a084305601699297b650c08194931985c8a46a63d9"
            }
          },
          "id": "prt_c64a0a05d001x5MMTRCyrk4mrV",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a08ffb001yNxm3q0tdviLFt"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "c294a35716ce9992f03d1312fe5787dbca677a1f",
          "cost": 0,
          "tokens": {
            "total": 97141,
            "input": 1925,
            "output": 496,
            "reasoning": 34,
            "cache": {
              "read": 94720,
              "write": 0
            }
          },
          "id": "prt_c64a0b8e50010PD1I0I3Ot6HhN",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a08ffb001yNxm3q0tdviLFt"
        },
        {
          "type": "patch",
          "hash": "8ed6d0dbf59b09025ab04a3441cfdc74b1e2b4e8",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md"
          ],
          "id": "prt_c64a0b910001pDUsHsBaQf2EAg",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a08ffb001yNxm3q0tdviLFt"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214780716,
          "completed": 1771214789937
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 97605,
          "input": 146,
          "output": 435,
          "reasoning": 16,
          "cache": {
            "read": 97024,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64a0b92c001N66Twx5D21tylG",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "c294a35716ce9992f03d1312fe5787dbca677a1f",
          "id": "prt_c64a0c181001qA5rX76adwWL1P",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0b92c001N66Twx5D21tylG"
        },
        {
          "type": "reasoning",
          "text": "**Adding new command alias**",
          "metadata": {
            "openai": {
              "itemId": "rs_0f5ab1019bcb75ff01699297bf2648819381c1c64ae8b3f67c",
              "reasoningEncryptedContent": "gAAAAABpkpe_vuGGYvhF1h0XufF3TdXGHs9T3Qfcsf4T9Gt-ognD5zgh4F__lf-elEnPSM4orRC_nLlnxohTuto7t5KJws8g2e93hJvl4iBG0bDTOspgNSg40Ivw1c7Ad-bBRqQZfa92FTXFgLqaMCzBL-5utPd7jl_1MMzQyTQp-km17Ef83qJubpWFIEtU_6M1mLBMxiimv7_t4V---x-IzA-SSwgM5BgVH0LkpuTqvT3nsWIwB4a0hf3Q1BBPYr_PLK6oOh9SZcmx6Pcn97BAUfQHwH41n4rwpYEB9Tt26A50rlagbyEDxCeFNJpl4sqDJ01En0dBR2YzKkUfII3u3bIsiY1lOgsA60KlbKOc0rCaO_hIDWbB_yt0mZp1NXdfkprqSJ-npiluNr27SN4JAMFojB5jQ-oPTJeFNTYKoLcXb4AzM4n5POGqwhPlbTYFikxg3eCdXSOwEuzXE27dUWWoj6ZIvi-w3N9_bupK3M32JfYHA9ApNUIBIRn1EUElH93_G4NIexq5KdIK1YMbavIMFKetzWNBxMf45Et3IBjEJBFU2raxi2PwAst7pp0GQIzZlCe7yyFW2z9Tx-zTtU0T6qplpzQoA53i99Iz8VE-GCLSoDiMeaYEXtk-3ht0Nsi6LZsJBFa38E4eRWLrMF3iXnJ9KHHxAp0C30Q_QkQA_rxGxhBs2Vqwht83kOk_Ww9X428p1HVTJh8Nnn3wBEhlDceL0gnfTkyE4l3NzUd0FG0BNhgApXPnxW55AFtHxFRg8EYLtKzOMPEgKLpahzo1apcKNcDWuYBOyLY8dFaXpwCGPikFgM1tfi-P0Kiv5cRM39Ov5k-h9j0iwrS9WVo0hsuWyFK6SVdWfC6LBS1KxecO1RIV96k7jg-ouzWR7IQCGSVY9PgvPbUui6thnAh2Djb9xFgtKE7GiuuoqA3dJmvUd2o="
            }
          },
          "time": {
            "start": 1771214783207,
            "end": 1771214783731
          },
          "id": "prt_c64a0c2e7001X0GOU2CUvuXghQ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0b92c001N66Twx5D21tylG"
        },
        {
          "type": "tool",
          "callID": "call_fDluSlTBm1tSYR914iZJtrLH",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Add File: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n+---\n+description: Add or refresh external docs snapshots from a user request\n+agent: build\n+---\n+\n+Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n+\n+Goal:\n+\n+- Implement or refresh a reusable scraper script for the requested docs source.\n+- Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n+\n+Process:\n+\n+1. Extract request metadata:\n+   - source key (for folder and script naming)\n+   - docs root URL\n+   - page discovery strategy (`sitemap.xml` preferred)\n+2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n+3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).\n+4. Implement resilient scraping:\n+   - primary: `r.jina.ai` markdown proxy\n+   - fallback: direct HTML conversion to markdown\n+5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n+6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n+7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n+\n+Return:\n+\n+- Script path(s) added/updated\n+- Output directory generated\n+- Discovery strategy used\n+- Capture totals and notable failures\n+- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nA .opencode/commands/scrape_docs.md",
            "title": "Success. Updated the following files:\nA .opencode/commands/scrape_docs.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n@@ -0,0 +1,34 @@\n+---\n+description: Add or refresh external docs snapshots from a user request\n+agent: build\n+---\n+\n+Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n+\n+Goal:\n+\n+- Implement or refresh a reusable scraper script for the requested docs source.\n+- Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n+\n+Process:\n+\n+1. Extract request metadata:\n+   - source key (for folder and script naming)\n+   - docs root URL\n+   - page discovery strategy (`sitemap.xml` preferred)\n+2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n+3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).\n+4. Implement resilient scraping:\n+   - primary: `r.jina.ai` markdown proxy\n+   - fallback: direct HTML conversion to markdown\n+5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n+6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n+7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n+\n+Return:\n+\n+- Script path(s) added/updated\n+- Output directory generated\n+- Discovery strategy used\n+- Capture totals and notable failures\n+- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md",
                  "relativePath": ".opencode/commands/scrape_docs.md",
                  "type": "add",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n@@ -0,0 +1,34 @@\n+---\n+description: Add or refresh external docs snapshots from a user request\n+agent: build\n+---\n+\n+Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n+\n+Goal:\n+\n+- Implement or refresh a reusable scraper script for the requested docs source.\n+- Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n+\n+Process:\n+\n+1. Extract request metadata:\n+   - source key (for folder and script naming)\n+   - docs root URL\n+   - page discovery strategy (`sitemap.xml` preferred)\n+2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n+3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).\n+4. Implement resilient scraping:\n+   - primary: `r.jina.ai` markdown proxy\n+   - fallback: direct HTML conversion to markdown\n+5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n+6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n+7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n+\n+Return:\n+\n+- Script path(s) added/updated\n+- Output directory generated\n+- Discovery strategy used\n+- Capture totals and notable failures\n+- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n",
                  "before": "",
                  "after": "---\ndescription: Add or refresh external docs snapshots from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nGoal:\n\n- Implement or refresh a reusable scraper script for the requested docs source.\n- Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n\nProcess:\n\n1. Extract request metadata:\n   - source key (for folder and script naming)\n   - docs root URL\n   - page discovery strategy (`sitemap.xml` preferred)\n2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).\n4. Implement resilient scraping:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML conversion to markdown\n5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture totals and notable failures\n- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n",
                  "additions": 34,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771214789869,
              "end": 1771214789882
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0f5ab1019bcb75ff01699297bfb140819384141dae9419b241"
            }
          },
          "id": "prt_c64a0c4f4001wqDncbF3DJaUzj",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0b92c001N66Twx5D21tylG"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "4815b4ffb4c7ed3aca0f57cfb6ec7cc258f87332",
          "cost": 0,
          "tokens": {
            "total": 97605,
            "input": 146,
            "output": 435,
            "reasoning": 16,
            "cache": {
              "read": 97024,
              "write": 0
            }
          },
          "id": "prt_c64a0dcfb001t9OJUspQkM50Ty",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0b92c001N66Twx5D21tylG"
        },
        {
          "type": "patch",
          "hash": "c294a35716ce9992f03d1312fe5787dbca677a1f",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md"
          ],
          "id": "prt_c64a0dd29001Bv2EZ5EghRGP3e",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0b92c001N66Twx5D21tylG"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214789955,
          "completed": 1771214795701
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 97874,
          "input": 226,
          "output": 240,
          "reasoning": 79,
          "cache": {
            "read": 97408,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64a0dd430016P3yGus7y8yH5q",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "4815b4ffb4c7ed3aca0f57cfb6ec7cc258f87332",
          "id": "prt_c64a0e4ca001FjK06KPvjTKy9Q",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0dd430016P3yGus7y8yH5q"
        },
        {
          "type": "reasoning",
          "text": "**Refining external skill alignment**",
          "metadata": {
            "openai": {
              "itemId": "rs_0a88e667a7b644a401699297c82f808196811aec4130882be0",
              "reasoningEncryptedContent": "gAAAAABpkpfJOfG0XNdeyMPsTrbpIYTSFsHNb3IVYdMKFbgADcivFIeWqlvQ34rqGAQ13Fbuwc4nHNuVpm102Lk704CPXZA9KNoJoONSr6PhmUyLoo3WxQoDXxKSs1n90v8m06rGWFaj3KVS6c2QsxcCRuJCH1UVI-AOHeaPL4rktaXIRtGecWOP79s7I04Zu88B8vOdMNumSsYkOkG54j-zIjjGJuFf4xJxuWxJFHGQqmmN8v4fenCUT4kWD9b6vzjoxyKJBPRI7i6qIsE6XjBMheCGoperRXu9kFnvlTbtjGWYfM6Mqb1UCEoN4edfNU9cQWLGt2Hk5yJJCXy3cqAzf8eu4IE2lasYaH4Y1So-sCds6J7K_-jygdIdnwfUCv5JjVL5ZI-A6ZdoZe9M86GqqKlXjsIoY_D1LulvLH4iqNDp7i1ZdCeVqmzoG4VhbsIB1JUDBhzBc5Nw7WoS9fCcCcbteujSg1bs-2pskCEJWAc3-9mPyuQlSKy0ZCXk14N1DRRRvsEmOiJxJ7by5Sbf0lMWO4VwHLMRQ002yosVLc0jp37d1MvUlG0UZq-K682r3JaNPuvPw4NgyVnoy6oADygIZIR28Gixl9tujG_1hWnNFP5z8NbGEDFiGqSVzK3-N8hMOwGK1Llfk80nCocKNEONYpDiven2V1fy3r-zSrqTVankRaJeJl694CK7fCQdE73m1tbfpKg2gDkdZvKSBqM1h8cVX9zH9ZDPTQ__WcB87gvTIpvuOX-8A0J-mkHLh8XuyngF_i5CJVC28N4VFRxfs4kK6OPemBZDfJdNITPUO2mYc9oe7EuH3H49oXTPw_0EOLtXt1alkYW7xwANgVv48zw5PpIusxG2A0ktmVWA9MLd3RPsRy7Lz7Hn9zlauJim0C6zNTa0CSbiqa3ojEXSJXYNoC9eVDB95gEy9dKv0zxNZpdOsu9sEcM0lIPb2rduZxSZ51Rn34P-sgR1FU2vYooQ0WZrsxQp0mU9irC2JMgCs8mrLk-W1pYrWTlX0TA_cDChxwiR7TGw3ajdTwc5UO47t3n5hRQJRa5yoP2LY55A5FQ5ediI19orhgyem3iM5mS-cpA3ScLHIT3SE9U_E4N9ZbcmKNjIMak9jl595sijZPAcjInh6EcXgy3x8NBDtqWRb5Bjj8FeepaDkiurk2WwnrWlaQta1mJo6Vw27n3FAb0VK7pyDOjnI8ApeTdFE-mcpvoQkCzugycFDL2ILDxjlZep5IruODOjNcGpyrtH8TvP0LnjcgIPP9YwWoaIrYtNTAoXUXxZYNis-btVace-jgwoj6flIISYVce49OaYdhHEfEhOx4XjuwfqOcW9DbXHM0iiS-a6LHIbT9em-GFcdA=="
            }
          },
          "time": {
            "start": 1771214792272,
            "end": 1771214793661
          },
          "id": "prt_c64a0e65000185FmxUg0XxvyWQ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0dd430016P3yGus7y8yH5q"
        },
        {
          "type": "tool",
          "callID": "call_qStGuLFwzol1asicJJCwPKBF",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md\n@@\n ## What I do\n \n - Standardize how we add a new external docs snapshot source.\n - Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n - Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n+- This skill remains compatible, but prefer `.opencode/skills/docs-scraping/SKILL.md` for generic user-request driven scraping workflows.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM .opencode/skills/external-docs-scraping/SKILL.md",
            "title": "Success. Updated the following files:\nM .opencode/skills/external-docs-scraping/SKILL.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md\n@@ -7,8 +7,9 @@\n \n - Standardize how we add a new external docs snapshot source.\n - Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n - Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n+- This skill remains compatible, but prefer `.opencode/skills/docs-scraping/SKILL.md` for generic user-request driven scraping workflows.\n \n ## When to use me\n \n Use this when the task is to add a new external docs source like the existing moonrepo snapshot flow.\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md",
                  "relativePath": ".opencode/skills/external-docs-scraping/SKILL.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md\n@@ -7,8 +7,9 @@\n \n - Standardize how we add a new external docs snapshot source.\n - Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n - Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n+- This skill remains compatible, but prefer `.opencode/skills/docs-scraping/SKILL.md` for generic user-request driven scraping workflows.\n \n ## When to use me\n \n Use this when the task is to add a new external docs source like the existing moonrepo snapshot flow.\n",
                  "before": "---\nname: external-docs-scraping\ndescription: Create and run Bun scraper scripts that snapshot external docs into split `.ext.md` files under `docs/external/<source>/`.\n---\n\n## What I do\n\n- Standardize how we add a new external docs snapshot source.\n- Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n- Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n\n## When to use me\n\nUse this when the task is to add a new external docs source like the existing moonrepo snapshot flow.\n\n## Output contract\n\n- Script file: `scripts/scrape_<source>_docs.sh.ts`\n- Output directory: `docs/external/<source>/`\n- Output files:\n  - One page-level `*.ext.md` file per source docs page\n  - `index.ext.md` linking all generated page files\n\n## Script conventions\n\n- Use Bun shebang script format: `#!/usr/bin/env bun`.\n- Reuse shared helpers from `scripts/helpers/` (for example `findRepoRoot`).\n- Keep script deterministic and idempotent where practical.\n- Default to sitemap or deterministic page discovery over fragile crawling.\n- Clear prior `*.ext.md` files in the target output directory before regenerating.\n\n## Page/index format conventions\n\n- Keep each page file in `.ext.md` format with:\n  - metadata block (captured timestamp, source URL/path, keywords, summary)\n  - normalized markdown body\n  - notes section describing capture/conversion method\n- Keep `index.ext.md` as a full page inventory with status summary (`ok`/`failed`).\n\n## Implementation workflow\n\n1. Identify docs root and discovery method (`sitemap.xml` preferred).\n2. Create script in `scripts/` following `scrape_moon_docs.sh.ts` structure.\n3. Map URLs to stable flattened filenames (for example `docs__guides__intro.ext.md`).\n4. Scrape each page with a resilient strategy:\n   - Primary: `r.jina.ai` markdown proxy\n   - Fallback: direct HTML fetch and conversion\n5. Write all page snapshots and `index.ext.md` to `docs/external/<source>/`.\n6. Run the script once and report page count + success/failure totals.\n7. Update `README.md` and `AGENTS.md` when a new scraper entrypoint is added.\n\n## Notes\n\n- Prefer explicit logs using project format: `Docs // Scrape // Message (...)`.\n- Do not include secrets, auth tokens, or private pages in snapshots.\n- If scraping is partially blocked, still produce index entries marking failed pages.\n",
                  "after": "---\nname: external-docs-scraping\ndescription: Create and run Bun scraper scripts that snapshot external docs into split `.ext.md` files under `docs/external/<source>/`.\n---\n\n## What I do\n\n- Standardize how we add a new external docs snapshot source.\n- Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n- Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n- This skill remains compatible, but prefer `.opencode/skills/docs-scraping/SKILL.md` for generic user-request driven scraping workflows.\n\n## When to use me\n\nUse this when the task is to add a new external docs source like the existing moonrepo snapshot flow.\n\n## Output contract\n\n- Script file: `scripts/scrape_<source>_docs.sh.ts`\n- Output directory: `docs/external/<source>/`\n- Output files:\n  - One page-level `*.ext.md` file per source docs page\n  - `index.ext.md` linking all generated page files\n\n## Script conventions\n\n- Use Bun shebang script format: `#!/usr/bin/env bun`.\n- Reuse shared helpers from `scripts/helpers/` (for example `findRepoRoot`).\n- Keep script deterministic and idempotent where practical.\n- Default to sitemap or deterministic page discovery over fragile crawling.\n- Clear prior `*.ext.md` files in the target output directory before regenerating.\n\n## Page/index format conventions\n\n- Keep each page file in `.ext.md` format with:\n  - metadata block (captured timestamp, source URL/path, keywords, summary)\n  - normalized markdown body\n  - notes section describing capture/conversion method\n- Keep `index.ext.md` as a full page inventory with status summary (`ok`/`failed`).\n\n## Implementation workflow\n\n1. Identify docs root and discovery method (`sitemap.xml` preferred).\n2. Create script in `scripts/` following `scrape_moon_docs.sh.ts` structure.\n3. Map URLs to stable flattened filenames (for example `docs__guides__intro.ext.md`).\n4. Scrape each page with a resilient strategy:\n   - Primary: `r.jina.ai` markdown proxy\n   - Fallback: direct HTML fetch and conversion\n5. Write all page snapshots and `index.ext.md` to `docs/external/<source>/`.\n6. Run the script once and report page count + success/failure totals.\n7. Update `README.md` and `AGENTS.md` when a new scraper entrypoint is added.\n\n## Notes\n\n- Prefer explicit logs using project format: `Docs // Scrape // Message (...)`.\n- Do not include secrets, auth tokens, or private pages in snapshots.\n- If scraping is partially blocked, still produce index entries marking failed pages.\n",
                  "additions": 1,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771214795598,
              "end": 1771214795609
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0a88e667a7b644a401699297c9a07c81969a56cc687417312c"
            }
          },
          "id": "prt_c64a0ebbe0013O376ZSimaPEpn",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0dd430016P3yGus7y8yH5q"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "518f514de40c0a4a866484b08cf9a89de4e7ef5a",
          "cost": 0,
          "tokens": {
            "total": 97874,
            "input": 226,
            "output": 240,
            "reasoning": 79,
            "cache": {
              "read": 97408,
              "write": 0
            }
          },
          "id": "prt_c64a0f37f001lzdpxvw6liTEx5",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0dd430016P3yGus7y8yH5q"
        },
        {
          "type": "patch",
          "hash": "4815b4ffb4c7ed3aca0f57cfb6ec7cc258f87332",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md"
          ],
          "id": "prt_c64a0f3ac001RyDIcrR6uB021U",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0dd430016P3yGus7y8yH5q"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214795719,
          "completed": 1771214802417
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 98175,
          "input": 117,
          "output": 266,
          "reasoning": 82,
          "cache": {
            "read": 97792,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64a0f3c7001VoyWMtqZoqXYah",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "518f514de40c0a4a866484b08cf9a89de4e7ef5a",
          "id": "prt_c64a0fca50015p4FAbpFUzckq0",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0f3c7001VoyWMtqZoqXYah"
        },
        {
          "type": "reasoning",
          "text": "**Updating agent skills documentation**",
          "metadata": {
            "openai": {
              "itemId": "rs_00084900c59d3e7801699297ce6c8c819390c700ce7701968a",
              "reasoningEncryptedContent": "gAAAAABpkpfPul-B9g3Zn_9nV5ij1YxEzmF_RBfsJFa5QYjZpUZGSUIk4PZFpXz8HaZAvhaYI0GlqwGSJ3aMn6C_K_O_Kdw3-O-6X5YEjK20tU3Ek3xGHs2jlrYotsTD4AnPhlZo7tbeVZ9DC1Cym1twEk6ZEip_4i2iwkOL3bJL0SMSvnaiLFfGAZgK9USnPpgnfC8ips8eqTDiW_djHNcZhJ9v1sI9CSzKfBOqFJ0OZkSDOaPLMDC0_f-idq3GRKSD49CSGvPL1NpLp5bd-bD0M9MoNMCKy31u7x4puqH19cxPMZBqf_gx8n0aIq2zQCbI0rvjEU-Ifwx4fYaJCS0SC-lpJwYFbvWXJDLc1pJA7fb0q_vApu43RrWrvLthfcvo-Mt7BNqfn6ukUYbF8XLsRWbgxspPb0LzunS7U2ZnLHCAuDm5GV14JzQMt_b9-QihCciQkaGEXeYZx3uqGMm-tJKioJN2tVXGF0t7r_MtFwTzTuo0k3jiE85yp7_LotXS45APTjvqoyX-Kxp4QJSROPszhMHmybUpyXLKaCk_hLdPe_RnyiDKCr1ijSiRByyUBzaFq4ar6USueewMukqgogMC7c5PyHhGJqEnL9-U7sT2akJmZKWYKGWaP-HAd5yUSL55Zo1JaDzbb4XAwKvpgDjv40oDY2XcNRVjedvLVrjnp6RBdS_g9EVgNaCLD-0Ir3JVVwjkmctg8qt9kOgkSzENuZCwLcLVKhF8X810LFLmrtC5c1h6NolcJ4UbUVuzPmYM0-XVK6GpOLrHm4FVxXb0TcW9n-719UuDAawqSvcTe8yyn58LLBduRgzTgwYmmWLkZHAekBvS_TtttK5JaIZfgR7IRrZOeUWWnKiGJeQEzJSCrmUaEGKujnKcuDnvEetvETrZGhxFap4t4U0ogWlB72bEucocsKsQ1h0ZXKjuixMzz4tNavhDaEo5kBuKxXzN47DlDcRdWGGJvIMZWF1Jwv12Kpof_duPewcRauJGq6OxA3WR9H2CSSw4NRpJngQ7DJ27nuFn66FPD-a3AcRhVgjoX18zjHu1iBb-QKHXd6vN8GF__d34XbU8TQ0laqw8_btXkGSTNp6DuVjMuj2CcJg9NDYtQ0TfH1pWC9A3Zi-juMIc8fz4i9i25HayGyBZy_pcYXUapEDKodYPoFtDiX-QbF_zUC4dvgETVv0lD_CNttKFCA3zwJOCMNJPwrvUeXJad1yJt7J86GM3evBr35AGpeBYBxEWEoq3TEgfF3LcuSuaRZ4fUUupLG01h4h0Zt00L-BZU2Bp9e-ZyjKRhY9BJhDejY1Ho3eb-8zEbT15jPDPR12qsZLdTfH_TbSF7dkh"
            }
          },
          "time": {
            "start": 1771214798569,
            "end": 1771214800006
          },
          "id": "prt_c64a0fee9001Ag0fbTclW1bu82",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0f3c7001VoyWMtqZoqXYah"
        },
        {
          "type": "tool",
          "callID": "call_DFxP9tfnUKxQglPzsL1mmv5G",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@\n - `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n - `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n - `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n+- `.opencode/skills/docs-scraping/SKILL.md` documents generic user-request driven external docs scraping workflows.\n - Use `@gitter` when the user asks for commit support or cleanup.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM AGENTS.md",
            "title": "Success. Updated the following files:\nM AGENTS.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/AGENTS.md\n+++ /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@ -60,8 +60,9 @@\n - `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n - `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n - `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n - `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n+- `.opencode/skills/docs-scraping/SKILL.md` documents generic user-request driven external docs scraping workflows.\n - Use `@gitter` when the user asks for commit support or cleanup.\n \n ## 7) Local Fork Workflow (`elysia-protobuf`)\n \n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/AGENTS.md",
                  "relativePath": "AGENTS.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/AGENTS.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/AGENTS.md\n+++ /Users/alex/repos/vfp/dark-factory/AGENTS.md\n@@ -60,8 +60,9 @@\n - `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n - `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n - `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n - `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n+- `.opencode/skills/docs-scraping/SKILL.md` documents generic user-request driven external docs scraping workflows.\n - Use `@gitter` when the user asks for commit support or cleanup.\n \n ## 7) Local Fork Workflow (`elysia-protobuf`)\n \n",
                  "before": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into split per-page `docs/external/moonrepo/*.ext.md` files and writes `docs/external/moonrepo/index.ext.md`.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
                  "after": "# Dark Factory - Agent Operating Guide\n\nThis file is for coding agents working in `dark-factory`.\nIt reflects only what is currently true in this repository.\n\n## 1) Current Repository Context\n\n- The repo is early-stage and mostly docs/config right now.\n- Tracked project files currently include:\n  - `README.md`\n  - `TODO.md`\n  - `AGENTS.md`\n  - `opencode.jsonc`\n  - `.opencode/agents/gitter.md`\n  - `.opencode/skills/gitter-commit/SKILL.md`\n- No application code tree is committed yet (`src/`, `apps/`, `crates/`, etc.).\n\n## 2) Build/Lint/Test Status (Current Truth)\n\n- There are no validated build, lint, typecheck, or test commands yet.\n- Do not invent or assume project commands in commits or PR notes.\n- If new tooling is added, document only commands that are verified in this repo.\n\n## 3) Cursor and Copilot Rules\n\n- Checked and currently absent:\n  - `.cursor/rules/`\n  - `.cursorrules`\n  - `.github/copilot-instructions.md`\n- If any of these files appear later, treat them as authoritative and update this guide.\n\n## 4) Coding Style (Minimal Baseline)\n\nUntil language/tool-specific configs exist, follow pragmatic defaults:\n\n- Favor readable, explicit code over clever shortcuts.\n- Keep functions focused and avoid hidden side effects.\n- Avoid dead code, unused imports, and speculative abstractions.\n- Keep naming consistent (`PascalCase` types, `camelCase` values/functions, `UPPER_SNAKE_CASE` constants).\n- Handle errors with context; do not swallow exceptions silently.\n- Never log secrets or credentials.\n- Log messages should follow: `System // Optional Sub system // Message (Metadata)`.\n  - Example: `Core // HTTP // Listening (env=development,host=127.0.0.1,port=4150)`.\n\n## 5) Git Workflow\n\n- Commit meaningful units of work; avoid giant mixed commits.\n- Do not push unless the user explicitly requests it.\n- Commit message format:\n  - `{Component/Meta} // {Optional Addition} // {Short Description} (Optional,Tags)`\n- Examples:\n  - `Docs // Added converted PDF docs`\n  - `Pipelines // ODM // Added initial ODM pipeline (WIP)`\n- In commit body, add a short rationale and signature when possible:\n  - `// Chappie/Model (your model if known)`\n\n## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- `.opencode/skills/docs-scraping/SKILL.md` documents generic user-request driven external docs scraping workflows.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n- Shared script helpers live under `scripts/helpers/`.\n- `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into split per-page `docs/external/moonrepo/*.ext.md` files and writes `docs/external/moonrepo/index.ext.md`.\n- After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n\n## 9) Keep This File Updated\n\n- Update this file when real code, tooling, or CI is added.\n- Keep instructions tied to verified repository behavior.\n- Prefer short, accurate guidance over aspirational process docs.\n",
                  "additions": 1,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771214802349,
              "end": 1771214802364
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_00084900c59d3e7801699297cff05c8193b2d6019b588fff80"
            }
          },
          "id": "prt_c64a10488001CCcjuqg6Cfol12",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0f3c7001VoyWMtqZoqXYah"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "e20eb242cb55304a7b486675e08e184acf05c65b",
          "cost": 0,
          "tokens": {
            "total": 98175,
            "input": 117,
            "output": 266,
            "reasoning": 82,
            "cache": {
              "read": 97792,
              "write": 0
            }
          },
          "id": "prt_c64a10dbd001B64cksmn97nkP3",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0f3c7001VoyWMtqZoqXYah"
        },
        {
          "type": "patch",
          "hash": "518f514de40c0a4a866484b08cf9a89de4e7ef5a",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/AGENTS.md"
          ],
          "id": "prt_c64a10de900137LunpQp0CJ6pz",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a0f3c7001VoyWMtqZoqXYah"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214802435,
          "completed": 1771214809336
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 98404,
          "input": 98222,
          "output": 182,
          "reasoning": 23,
          "cache": {
            "read": 0,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64a10e030011XF1PHsBV0nR3H",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "e20eb242cb55304a7b486675e08e184acf05c65b",
          "id": "prt_c64a11800001IQeKVVe9KeCjUg",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a10e030011XF1PHsBV0nR3H"
        },
        {
          "type": "reasoning",
          "text": "**Updating README references**",
          "metadata": {
            "openai": {
              "itemId": "rs_03fda0e19eb6999901699297d708808190947e17dc5762c195",
              "reasoningEncryptedContent": "gAAAAABpkpfXmCB2_aC6eMCB9-rAIJ0WQleK9GYw_LWK5o4Wa7l_U3LVFF2Ezu1exkPxu-yuQO5FNW0NjTxXBL7L-QyhIlo6lPT6KLsrrhhFiHqCx0N4wMFLbjAijgdqMu8BiVA9BfMyPQ3oP2EWCUphQ8AgzidHA3pUNEIipSnXKt2fP1V1HViujo-M664i6KLkGExYiIIkzd_D9pkM2jW_BjU2D5sAX2jN2PtszQv8wEnTdKwiFHE0baYKF6h24x6-62xQAud4CuqBXLZ3fGU3qKWujdxwRoS1ZdI4OHnCOzpziFBL_OlKT6AeFJb7eYtqLSrW644UhhbBBPKkiP-Tqhl4zXvTjEKogJL3E289uI1I8hlxqNmnc85j3WbVxybeWYnUDcAu08BjetTai88eYUHidjZxFGs7ogPnitL1RkRdoYc6UGHgC9XKS-I_zbqMf7pOLRCXlNot9RVxY3bwdoF0xEQ0_3sGasmE64mg_sSfYXmfD6O94z5AGZTVsrxC9Oq-m4NJcDxWEhOZ65XLNASoBYpFSML1z44q6n7RtP2jkWGiokPFpqkPfppo04kWxceVNWyB8cHehkPMwU8whO56iTJBO1TggWyRbHNkLE-YpP2pkaTd8Dcu_FCw0LdjaQgs1Bso0tzWqBcdijeBZtATGh2tWfHakWWdTp4rMDob-NpCzS1l1rqnC4-7BmkkZuX9-VIErC5aNf8T2nKEcKTpCHb4WsfdpyzRsjUbilbXfUXZ1YxofdidV2hTJyOxn5rvBCsP5yG5VSaz-BqW4j6DliO3_cRBC3VXDtHcAiw7qq83_t4dj78J_V0ccGCBHldJwhvZOLXr7cJoz4dRfQGeaj8yDS4FmQ3bwXO_e8RaMsKBGU123ITUEfnG5R6wcNU4tVDmIy_IevuF0hmAzmFeRnEOZqtDE7xIsqPXGCQN9pZ6wGVRgg_e9o9IPpEtVW1VsCA2-DdyRdtCI-kYXfMhQ2wkDw=="
            }
          },
          "time": {
            "start": 1771214807172,
            "end": 1771214807674
          },
          "id": "prt_c64a12084001OuXjYfTo2LPBaY",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a10e030011XF1PHsBV0nR3H"
        },
        {
          "type": "tool",
          "callID": "call_zFOpV9cqsbjjo7NnccEBqhYB",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/README.md\n@@\n - `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n+- OpenCode skill reference: `.opencode/skills/docs-scraping/SKILL.md`.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM README.md",
            "title": "Success. Updated the following files:\nM README.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/README.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/README.md\n+++ /Users/alex/repos/vfp/dark-factory/README.md\n@@ -37,8 +37,9 @@\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n - `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n+- OpenCode skill reference: `.opencode/skills/docs-scraping/SKILL.md`.\n \n # Components\n \n ## Core\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/README.md",
                  "relativePath": "README.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/README.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/README.md\n+++ /Users/alex/repos/vfp/dark-factory/README.md\n@@ -37,8 +37,9 @@\n - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n - `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n+- OpenCode skill reference: `.opencode/skills/docs-scraping/SKILL.md`.\n \n # Components\n \n ## Core\n",
                  "before": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `products`\n- A `product` is the canonical definition of a code product we want to work on\n  - In Stage 0 this is identified by a local path-based locator key\n  - Locators are path/url-like identifiers, currently using `@local://{abs_path}`\n  - `product` may optionally include a `display_name` for human-friendly rendering\n- A `variant` is a spawned instance of a `product` where work actually runs\n  - In Stage 0 a product immediately gets one default variant on creation\n  - Variant identity follows the same locator pattern with a fragment suffix:\n    - `@local://{abs_path}#default`\n  - Future variants can use other suffixes (example: `#wt-main`) when we support parallel instances\n- Stage 0 topology is intentionally strict and simple:\n  - One product locator\n  - One default variant locator\n  - One actor bound to that variant\n- `actor` is a spawned agent that operates on a variant\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent), but first iteration is JUST OpenCode\n  - Future work will allow multiple variants per product and multiple actors where operations allow\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typescript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Definition: `prisma`\n  - [ ] TODO: Investigate use of protobuf\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all products/variants/actors/settings, etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (REST even) we can query from frontends\n- Currently looks like it will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
                  "after": "# Dark Factory - Autonomous Agentic Development At Scale\n\n# Concept\n\n- A central `dark-factory` \"core\" is used to track `products`\n- A `product` is the canonical definition of a code product we want to work on\n  - In Stage 0 this is identified by a local path-based locator key\n  - Locators are path/url-like identifiers, currently using `@local://{abs_path}`\n  - `product` may optionally include a `display_name` for human-friendly rendering\n- A `variant` is a spawned instance of a `product` where work actually runs\n  - In Stage 0 a product immediately gets one default variant on creation\n  - Variant identity follows the same locator pattern with a fragment suffix:\n    - `@local://{abs_path}#default`\n  - Future variants can use other suffixes (example: `#wt-main`) when we support parallel instances\n- Stage 0 topology is intentionally strict and simple:\n  - One product locator\n  - One default variant locator\n  - One actor bound to that variant\n- `actor` is a spawned agent that operates on a variant\n  - Can be various agent backends (currently scoped in OpenCode, Codex and a custom agent), but first iteration is JUST OpenCode\n  - Future work will allow multiple variants per product and multiple actors where operations allow\n\n# Stack + Tools\n\n- Agentic Coding: `opencode`\n- Main languages: `rust` and `bun` / `typescript`\n- Scripting: shebanged Bun TypeScript scripts under `scripts/` (`*.sh.ts`)\n- Optional build system: `moon` / `proto`\n- Common Schema Definition: `prisma`\n  - [ ] TODO: Investigate use of protobuf\n\n# Scripts\n\n- Project shell-style scripts are Bun TypeScript files with shebangs: `#!/usr/bin/env bun`.\n- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/docs-scraping/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all products/variants/actors/settings, etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (REST even) we can query from frontends\n- Currently looks like it will be Bun + Elysia JS\n\n## Frontends\n\n- Various frontends that invoke / connect to Core\n- Main way of iterating with the system\n- Uses the Core API to communicate (REST / WS or GRPC in the future)\n- Some Frontends:\n  - Rust TUI (Ratatui.rs) - First One\n  - Web Client (Bun + Vite + Shadcn + React)\n  - Pure CLI (Rust)\n\n## Agents\n\n- Abstracted communication with actual agents doing work\n- First is OpenCode\n",
                  "additions": 1,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771214809188,
              "end": 1771214809218
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_03fda0e19eb6999901699297d79ca08190bafb5ca89a417149"
            }
          },
          "id": "prt_c64a1227d001b3gq740Fnkf4Hw",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a10e030011XF1PHsBV0nR3H"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "1823a8036e51a65adbe8fe6b0ddb55a16f487ea9",
          "cost": 0,
          "tokens": {
            "total": 98404,
            "input": 98222,
            "output": 182,
            "reasoning": 23,
            "cache": {
              "read": 0,
              "write": 0
            }
          },
          "id": "prt_c64a128a40010XSRyeFQue0sUb",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a10e030011XF1PHsBV0nR3H"
        },
        {
          "type": "patch",
          "hash": "e20eb242cb55304a7b486675e08e184acf05c65b",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/README.md"
          ],
          "id": "prt_c64a128ec0013s7EYLWMEggtA4",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a10e030011XF1PHsBV0nR3H"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214809362,
          "completed": 1771214816690
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 98723,
          "input": 121,
          "output": 298,
          "reasoning": 60,
          "cache": {
            "read": 98304,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64a12912001TkR06qTYtwHFzU",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "1823a8036e51a65adbe8fe6b0ddb55a16f487ea9",
          "id": "prt_c64a132ca0010CTdLTAovm6Rtb",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a12912001TkR06qTYtwHFzU"
        },
        {
          "type": "reasoning",
          "text": "**Verifying updated command and skill files**",
          "metadata": {
            "openai": {
              "itemId": "rs_03b82b77d586083901699297dc374081938d470c14a783968f",
              "reasoningEncryptedContent": "gAAAAABpkpfg834l-XUEj4PWzaZelZTPl8YbSceS-2uS8MZTsb4H5tRMY5ChSIkhUT-DS_cz__ID2OprTYb_QOn8_3hIqd_96vp8qFMdVfYjX_WidebPRU8b8I0J_bytXg2TcH3oLvWz8JuP36xYBhTay1yxnVXQQ9AiVXG-Q7HdtOuTZ5oN-UHVZ46MpEzqAXW5dvIlAFr3fOGQ7wbeXtpa_ANTCaqe5PnBHHhfDr9ZBP2eXtkt4wTeEyT5wXOImVxAeClDZxwBUY9YEogqEiELsAiVvsTQu0oORmdWjjWOpPquA61eH8MZN_sTS2cI_0Yt43PhxhJWpxRUzmwaOjPV92YgI0gsKS1-iwqtZId-z1bbGuQc3GTjVQzP3spH-hoRFnRCbEk1XbxNDZHYl3-SZcDYeIsSIcuBEpbEWV7bD7mVmamd-SGaAdCd02VPjj8QDvzP3pZGVyLHONvpo8mPX6IAtMaTi37z6R89EcsOjM2-qE8XFg2NUn5biixn53lrfrM-EwlHuC047twvzdH0Y0AcOO3_AbQ_ATszD-Nu8nuGtQZDUQulqKw35RAT_oVosEN_Qk-qZzGoypMbc4qZxVAVamdIGTUb2nBJxoIVHzPWMZkPrBOU6-mWS2CJBM183I8lZ7g7_y6Oi4NXIg6CR6Uh8RIFYB5AbSVYeBYiIPZcE_5y61NH5Auob-VFx-FeXmMjQICdkVtHeFHwC2taAkyH1yh98vkXBh8S4RUQxkO0RAxW9eADuZT73rWYrxEdExpOK2Q5owPfyLS5Z8qICzIoTZ1WzEUF4fyi-pOs8nDbK6b3_TrMkFnSqoKz4KTzNk6VjK5eqiUgHzuN4BTXZMGF0BjLSjdu0iCos-bg4_m4bE2h4OTHUnnmfad6D79OJ2Zp7F_TLuyneTpoWUxmiF_on_GJUQ-4rHKtLxQWBk_oQd58ky15M1A5RcVdfzc5dfLSKtAKLyel_uDTQt7udCzuB1i5_rIowi-ETvz1sV4a3obSsIIetq-MI1rckp2qARTZU0uNG30B9c7OLv3RuUodnWS1IXHRFIYC5YNFxdse83w8_VVQUF0c6HQA3dblEWUTA2RpGnlIDnSp1MJg458jUn6ntH_ysTjrhcsX2u4d6xarxQitRHIdpqMgK7mwhlePR7vL58H04vEpyq5kTQFFKmv3qk_klaOShQ95IdMTu9sL4HXXyIfGiqpUiXaGei-WDy_azVBTQXaksykNrNh_T7EEU9bAOcHMfkcDph6J5Ef9wSc="
            }
          },
          "time": {
            "start": 1771214812393,
            "end": 1771214816568
          },
          "id": "prt_c64a134e90013PUQZSZ3ZQmWY3",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a12912001TkR06qTYtwHFzU"
        },
        {
          "type": "tool",
          "callID": "call_ot6OIvPlUdOk8SfMbuNHCau5",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/skills/docs-scraping/SKILL.md</path>\n<type>file</type>\n<content>1: ---\n2: name: docs-scraping\n3: description: Add or refresh external documentation snapshots from user requests into split `.ext.md` pages and `index.ext.md`.\n4: ---\n5: \n6: ## What I do\n7: \n8: - Turn a user docs scraping request into a reusable script and generated docs snapshot output.\n9: - Standardize output under `docs/external/<source>/` with one page-level `.ext.md` file per discovered page.\n10: - Ensure each generated page has a metadata header and notes footer, and create an `index.ext.md` manifest.\n11: \n12: ## Accepted request patterns\n13: \n14: Use this skill when the request includes one or more of:\n15: \n16: - A docs root URL (for example `https://example.dev/docs`)\n17: - A source/domain name (for example `moonrepo`, `astro`, `pnpm`)\n18: - A request to \"scrape\", \"snapshot\", \"mirror\", or \"refresh\" external docs\n19: \n20: ## Output contract\n21: \n22: - Script: `scripts/scrape_<source>_docs.sh.ts`\n23: - Output directory: `docs/external/<source>/`\n24: - Output files:\n25:   - Per-page files: `<stable-page-stem>.ext.md`\n26:   - Index file: `index.ext.md`\n27: \n28: ## Behavior requirements\n29: \n30: 1. Resolve source metadata from the user request:\n31:    - `source` key (safe folder/script slug)\n32:    - docs root URL\n33:    - discovery method (`sitemap.xml` preferred)\n34: 2. Reuse project script conventions:\n35:    - Bun shebang (`#!/usr/bin/env bun`)\n36:    - `*.sh.ts` naming\n37:    - helpers under `scripts/helpers/`\n38: 3. Use resilient scraping strategy:\n39:    - Primary: `r.jina.ai` markdown proxy\n40:    - Fallback: direct HTML fetch + conversion to markdown\n41: 4. Normalize filenames from docs paths:\n42:    - deterministic flattening (for example `docs__guides__intro.ext.md`)\n43: 5. Regenerate output cleanly:\n44:    - remove old `*.ext.md` in target source directory\n45:    - write fresh per-page files and `index.ext.md`\n46: \n47: ## Generated page format\n48: \n49: - Top `----` section with summary metadata:\n50:   - captured timestamp\n51:   - source root\n52:   - source page URL/path\n53:   - keywords\n54:   - concise summary\n55: - Middle body with markdown content snapshot\n56: - Bottom `----` notes/comments/lessons section\n57: \n58: ## Index format\n59: \n60: - Top `----` section with source/capture metadata and summary totals\n61: - Full page inventory with links to local page files and capture status\n62: - Bottom `----` notes/comments/lessons section\n63: \n64: ## Implementation workflow\n65: \n66: 1. Inspect existing scraper scripts for reuse patterns (`scripts/scrape_*.sh.ts`).\n67: 2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n68: 3. Run the script once to generate docs output.\n69: 4. Report totals (`pages`, `ok`, `failed`) and notable blocked pages.\n70: 5. If a new script entrypoint was introduced, update `README.md` and `AGENTS.md`.\n71: \n72: ## Safety constraints\n73: \n74: - Never embed secrets, auth headers, or private tokens in script or output files.\n75: - Skip private/authenticated docs pages unless explicit credentials handling is requested and safe.\n76: - Keep scripts idempotent and deterministic where practical.\n77: \n78: ## Return checklist\n79: \n80: - Script path(s) added/updated\n81: - Output directory generated/refreshed\n82: - Discovery strategy used\n83: - Capture totals and notable failures\n84: - Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n85: \n\n(End of file - total 85 lines)\n</content>",
            "title": ".opencode/skills/docs-scraping/SKILL.md",
            "metadata": {
              "preview": "---\nname: docs-scraping\ndescription: Add or refresh external documentation snapshots from user requests into split `.ext.md` pages and `index.ext.md`.\n---\n\n## What I do\n\n- Turn a user docs scraping request into a reusable script and generated docs snapshot output.\n- Standardize output under `docs/external/<source>/` with one page-level `.ext.md` file per discovered page.\n- Ensure each generated page has a metadata header and notes footer, and create an `index.ext.md` manifest.\n\n## Accepted request patterns\n\nUse this skill when the request includes one or more of:\n\n- A docs root URL (for example `https://example.dev/docs`)\n- A source/domain name (for example `moonrepo`, `astro`, `pnpm`)\n- A request to \"scrape\", \"snapshot\", \"mirror\", or \"refresh\" external docs\n\n## Output contract",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771214816571,
              "end": 1771214816583
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_03b82b77d586083901699297e077d8819390b5c61966a5488c"
            }
          },
          "id": "prt_c64a1453a001oQf7wnfYw425Pk",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a12912001TkR06qTYtwHFzU"
        },
        {
          "type": "tool",
          "callID": "call_HrkCMlGXZ7vSyCjQKf1JYTgx",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md</path>\n<type>file</type>\n<content>1: ---\n2: description: Add or refresh external docs snapshots from a user request\n3: agent: build\n4: ---\n5: \n6: Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n7: \n8: Goal:\n9: \n10: - Implement or refresh a reusable scraper script for the requested docs source.\n11: - Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n12: \n13: Process:\n14: \n15: 1. Extract request metadata:\n16:    - source key (for folder and script naming)\n17:    - docs root URL\n18:    - page discovery strategy (`sitemap.xml` preferred)\n19: 2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n20: 3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).\n21: 4. Implement resilient scraping:\n22:    - primary: `r.jina.ai` markdown proxy\n23:    - fallback: direct HTML conversion to markdown\n24: 5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n25: 6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n26: 7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n27: \n28: Return:\n29: \n30: - Script path(s) added/updated\n31: - Output directory generated\n32: - Discovery strategy used\n33: - Capture totals and notable failures\n34: - Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n35: \n\n(End of file - total 35 lines)\n</content>",
            "title": ".opencode/commands/scrape_docs.md",
            "metadata": {
              "preview": "---\ndescription: Add or refresh external docs snapshots from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nGoal:\n\n- Implement or refresh a reusable scraper script for the requested docs source.\n- Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n\nProcess:\n\n1. Extract request metadata:\n   - source key (for folder and script naming)\n   - docs root URL\n   - page discovery strategy (`sitemap.xml` preferred)\n2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771214816573,
              "end": 1771214816582
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_03b82b77d586083901699297e077e48193a4f48ecc44ac002e"
            }
          },
          "id": "prt_c64a1453c001ccY3obaHqTZgwl",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a12912001TkR06qTYtwHFzU"
        },
        {
          "type": "tool",
          "callID": "call_EqFCBnqZ9fevDbOYcKp5CyeG",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md</path>\n<type>file</type>\n<content>1: ---\n2: description: Add or run an external docs scraper from a user request\n3: agent: build\n4: ---\n5: \n6: Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n7: \n8: Goal:\n9: \n10: - Convert a user scraping request into a reusable external docs workflow.\n11: - Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n12: \n13: Process:\n14: \n15: 1. Parse source metadata from the user request:\n16:    - source key (for `<source>` folder and script name)\n17:    - docs root URL\n18:    - discovery strategy (`sitemap.xml` preferred)\n19: 2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n20: 3. Reuse shared helpers (`scripts/helpers/`) and follow Bun shebang script conventions.\n21: 4. Implement resilient scrape flow:\n22:    - primary: `r.jina.ai` markdown proxy\n23:    - fallback: direct HTML fetch + conversion\n24: 5. Regenerate `docs/external/<source>/*.ext.md` and `docs/external/<source>/index.ext.md`.\n25: 6. Report capture totals (`pages`, `ok`, `failed`) and call out any blocked pages.\n26: 7. If a new scraper entrypoint was added, update `README.md` and `AGENTS.md` references.\n27: \n28: Return:\n29: \n30: - Script path(s) added/updated\n31: - Output directory generated\n32: - Discovery strategy used\n33: - Capture result totals and notable failures\n34: - Exact rerun command (for example `bun scripts/scrape_<source>_docs.sh.ts`)\n35: \n\n(End of file - total 35 lines)\n</content>",
            "title": ".opencode/commands/scrape_doc.md",
            "metadata": {
              "preview": "---\ndescription: Add or run an external docs scraper from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nGoal:\n\n- Convert a user scraping request into a reusable external docs workflow.\n- Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n\nProcess:\n\n1. Parse source metadata from the user request:\n   - source key (for `<source>` folder and script name)\n   - docs root URL\n   - discovery strategy (`sitemap.xml` preferred)\n2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse shared helpers (`scripts/helpers/`) and follow Bun shebang script conventions.",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771214816574,
              "end": 1771214816582
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_03b82b77d586083901699297e077ec8193ba70d02ec49a15de"
            }
          },
          "id": "prt_c64a1453e001ArOJr1B6E6WiBn",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a12912001TkR06qTYtwHFzU"
        },
        {
          "type": "tool",
          "callID": "call_0jtDyEVio7y3iIh5bQzc3MNM",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md"
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/.opencode/skills/external-docs-scraping/SKILL.md</path>\n<type>file</type>\n<content>1: ---\n2: name: external-docs-scraping\n3: description: Create and run Bun scraper scripts that snapshot external docs into split `.ext.md` files under `docs/external/<source>/`.\n4: ---\n5: \n6: ## What I do\n7: \n8: - Standardize how we add a new external docs snapshot source.\n9: - Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n10: - Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n11: - This skill remains compatible, but prefer `.opencode/skills/docs-scraping/SKILL.md` for generic user-request driven scraping workflows.\n12: \n13: ## When to use me\n14: \n15: Use this when the task is to add a new external docs source like the existing moonrepo snapshot flow.\n16: \n17: ## Output contract\n18: \n19: - Script file: `scripts/scrape_<source>_docs.sh.ts`\n20: - Output directory: `docs/external/<source>/`\n21: - Output files:\n22:   - One page-level `*.ext.md` file per source docs page\n23:   - `index.ext.md` linking all generated page files\n24: \n25: ## Script conventions\n26: \n27: - Use Bun shebang script format: `#!/usr/bin/env bun`.\n28: - Reuse shared helpers from `scripts/helpers/` (for example `findRepoRoot`).\n29: - Keep script deterministic and idempotent where practical.\n30: - Default to sitemap or deterministic page discovery over fragile crawling.\n31: - Clear prior `*.ext.md` files in the target output directory before regenerating.\n32: \n33: ## Page/index format conventions\n34: \n35: - Keep each page file in `.ext.md` format with:\n36:   - metadata block (captured timestamp, source URL/path, keywords, summary)\n37:   - normalized markdown body\n38:   - notes section describing capture/conversion method\n39: - Keep `index.ext.md` as a full page inventory with status summary (`ok`/`failed`).\n40: \n41: ## Implementation workflow\n42: \n43: 1. Identify docs root and discovery method (`sitemap.xml` preferred).\n44: 2. Create script in `scripts/` following `scrape_moon_docs.sh.ts` structure.\n45: 3. Map URLs to stable flattened filenames (for example `docs__guides__intro.ext.md`).\n46: 4. Scrape each page with a resilient strategy:\n47:    - Primary: `r.jina.ai` markdown proxy\n48:    - Fallback: direct HTML fetch and conversion\n49: 5. Write all page snapshots and `index.ext.md` to `docs/external/<source>/`.\n50: 6. Run the script once and report page count + success/failure totals.\n51: 7. Update `README.md` and `AGENTS.md` when a new scraper entrypoint is added.\n52: \n53: ## Notes\n54: \n55: - Prefer explicit logs using project format: `Docs // Scrape // Message (...)`.\n56: - Do not include secrets, auth tokens, or private pages in snapshots.\n57: - If scraping is partially blocked, still produce index entries marking failed pages.\n58: \n\n(End of file - total 58 lines)\n</content>",
            "title": ".opencode/skills/external-docs-scraping/SKILL.md",
            "metadata": {
              "preview": "---\nname: external-docs-scraping\ndescription: Create and run Bun scraper scripts that snapshot external docs into split `.ext.md` files under `docs/external/<source>/`.\n---\n\n## What I do\n\n- Standardize how we add a new external docs snapshot source.\n- Create or adapt a Bun script in `scripts/` using existing scraper conventions.\n- Produce split per-page `*.ext.md` files plus an `index.ext.md` under `docs/external/<source>/`.\n- This skill remains compatible, but prefer `.opencode/skills/docs-scraping/SKILL.md` for generic user-request driven scraping workflows.\n\n## When to use me\n\nUse this when the task is to add a new external docs source like the existing moonrepo snapshot flow.\n\n## Output contract\n\n- Script file: `scripts/scrape_<source>_docs.sh.ts`\n- Output directory: `docs/external/<source>/`",
              "truncated": false,
              "loaded": []
            },
            "time": {
              "start": 1771214816575,
              "end": 1771214816581
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_03b82b77d586083901699297e077f481938fc117ec1113b144"
            }
          },
          "id": "prt_c64a1453f001t31UKVBg1Tg8ve",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a12912001TkR06qTYtwHFzU"
        },
        {
          "type": "tool",
          "callID": "call_yOauBDddhA9WobjB5N569HB9",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/AGENTS.md",
              "offset": 57,
              "limit": 30
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/AGENTS.md</path>\n<type>file</type>\n<content>57: ## 6) OpenCode Integration\n58: \n59: - `.opencode/agents/gitter.md` is the git-focused subagent.\n60: - `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n61: - `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n62: - `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n63: - `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n64: - `.opencode/skills/docs-scraping/SKILL.md` documents generic user-request driven external docs scraping workflows.\n65: - Use `@gitter` when the user asks for commit support or cleanup.\n66: \n67: ## 7) Local Fork Workflow (`elysia-protobuf`)\n68: \n69: - `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n70: - If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n71: - Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n72: \n73: ## 8) Script Conventions\n74: \n75: - Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n76: - Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.\n77: - Shared script helpers live under `scripts/helpers/`.\n78: - `scripts/install.sh.ts` runs a reusable ordered list of install steps.\n79: - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n80: - `scripts/scrape_moon_docs.sh.ts` scrapes moonrepo docs into split per-page `docs/external/moonrepo/*.ext.md` files and writes `docs/external/moonrepo/index.ext.md`.\n81: - After a new command sequence succeeds in a conversation, suggest capturing it into a reusable script via `.opencode/commands/capture_script_from_context.md`.\n82: \n83: ## 9) Keep This File Updated\n84: \n85: - Update this file when real code, tooling, or CI is added.\n86: - Keep instructions tied to verified repository behavior.\n\n(File has more lines. Use 'offset' parameter to read beyond line 86)\n</content>",
            "title": "AGENTS.md",
            "metadata": {
              "preview": "## 6) OpenCode Integration\n\n- `.opencode/agents/gitter.md` is the git-focused subagent.\n- `.opencode/skills/gitter-commit/SKILL.md` documents when to route commit tasks to `@gitter`.\n- `.opencode/skills/proto-install/SKILL.md` documents standardized script-based `proto install` usage.\n- `.opencode/skills/protobuf-schema-authoring/SKILL.md` documents how to author proto2/proto3 schemas and provide Rust/TypeScript codegen workflows.\n- `.opencode/skills/script-authoring/SKILL.md` documents how to build reusable Bun scripts from prompt/example/bash/context.\n- `.opencode/skills/docs-scraping/SKILL.md` documents generic user-request driven external docs scraping workflows.\n- Use `@gitter` when the user asks for commit support or cleanup.\n\n## 7) Local Fork Workflow (`elysia-protobuf`)\n\n- `elysia-protobuf` is also cloned locally at `~/repos/vfp/elysia-protobuf`.\n- If Core hits a bug in that dependency, patch it in the local fork repo, push the fork, then update the pinned git ref in `core/package.json` and refresh `core/bun.lock`.\n- Core currently tracks `elysia-protobuf` from the fork `master` branch in `core/package.json`; after pushing fork changes, refresh `core/bun.lock` in this repo.\n\n## 8) Script Conventions\n\n- Project scripts use shebanged Bun TypeScript files (`#!/usr/bin/env bun`) under `scripts/`.\n- Script naming uses `*.sh.ts` to indicate executable shell-style Bun scripts.",
              "truncated": true,
              "loaded": []
            },
            "time": {
              "start": 1771214816576,
              "end": 1771214816583
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_03b82b77d586083901699297e077f88193b4b1674b4b6358d1"
            }
          },
          "id": "prt_c64a14540001RC7egCbDkMcS8v",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a12912001TkR06qTYtwHFzU"
        },
        {
          "type": "tool",
          "callID": "call_kCd94tID7bpSdTvxxjCElj8K",
          "tool": "read",
          "state": {
            "status": "completed",
            "input": {
              "filePath": "/Users/alex/repos/vfp/dark-factory/README.md",
              "offset": 35,
              "limit": 15
            },
            "output": "<path>/Users/alex/repos/vfp/dark-factory/README.md</path>\n<type>file</type>\n<content>35: - Shared helpers live in `scripts/helpers/`.\n36: - `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n37: - `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n38: - `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n39: - OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n40: - OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n41: - OpenCode skill reference: `.opencode/skills/docs-scraping/SKILL.md`.\n42: \n43: # Components\n44: \n45: ## Core\n46: \n47: - Central service that manages tracking of all products/variants/actors/settings, etc.\n48:   - TBD: will either be stateless w/ DB and route all commands just to the agents\n49:     - OR: a background API service (REST even) we can query from frontends\n\n(File has more lines. Use 'offset' parameter to read beyond line 49)\n</content>",
            "title": "README.md",
            "metadata": {
              "preview": "- Shared helpers live in `scripts/helpers/`.\n- `scripts/install.sh.ts` runs an ordered array of install steps from repository root.\n- `scripts/proto_install.sh.ts` runs `proto install` from repository root.\n- `scripts/scrape_moon_docs.sh.ts` captures moonrepo docs as split per-page `docs/external/moonrepo/*.ext.md` files plus `docs/external/moonrepo/index.ext.md`.\n- OpenCode skill reference: `.opencode/skills/proto-install/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/script-authoring/SKILL.md`.\n- OpenCode skill reference: `.opencode/skills/docs-scraping/SKILL.md`.\n\n# Components\n\n## Core\n\n- Central service that manages tracking of all products/variants/actors/settings, etc.\n  - TBD: will either be stateless w/ DB and route all commands just to the agents\n    - OR: a background API service (REST even) we can query from frontends",
              "truncated": true,
              "loaded": []
            },
            "time": {
              "start": 1771214816578,
              "end": 1771214816584
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_03b82b77d586083901699297e078008193a9555a7a6bd86e09"
            }
          },
          "id": "prt_c64a14541001dWbhNNxpcaoxlo",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a12912001TkR06qTYtwHFzU"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "1823a8036e51a65adbe8fe6b0ddb55a16f487ea9",
          "cost": 0,
          "tokens": {
            "total": 98723,
            "input": 121,
            "output": 298,
            "reasoning": 60,
            "cache": {
              "read": 98304,
              "write": 0
            }
          },
          "id": "prt_c64a1457c001aVCV2IQMzQDUtC",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a12912001TkR06qTYtwHFzU"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214816708,
          "completed": 1771214823388
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 102529,
          "input": 3762,
          "output": 207,
          "reasoning": 93,
          "cache": {
            "read": 98560,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64a145c4001QHof6pY2SgdkAF",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "1823a8036e51a65adbe8fe6b0ddb55a16f487ea9",
          "id": "prt_c64a14f55001bXg89058lnvHFJ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a145c4001QHof6pY2SgdkAF"
        },
        {
          "type": "reasoning",
          "text": "**Adding alias note to command docs**",
          "metadata": {
            "openai": {
              "itemId": "rs_0f24be295bdc93c501699297e41ae08190af07ce0248955989",
              "reasoningEncryptedContent": "gAAAAABpkpflNu_aYQTDiTyZ92JtYJC6tfQiVqy0bktFMztvxt1jT5nZyVM-MlNXjaQjxbjqg4s3IagQ8c8aYyyzdAmMsiiqXKKpFZf6nQ_XEj_eYisOHGz2uhf8rfX5aftFNoxsoj1deUz8nUoHsZUiNedgfNSWMHV1XbWRnhIsODGimJmAo6ApnmS_WdT9133-MrIhVfk7OgXw8lGxupkJgRfHWwc1ww0MZmOHPtdL8t_R_hMZlP7HywNgh_6ywZ6xQ_qXyQZPogd4SjbEjJF6tr8mC7v5TFoS4CxOP3gEP_QKLVhpY-ejwUkVHSrd6ZpM2mxDGTsGvEXhkuRII7T5N2n48kzat37pFUYI_21d1vpYHOE-R5DiJY48GXPFHA9vy8eQJnC1xFxQLQ8BWqskstecIW488Ef2EdbDx87BcHztWxJQ6QKRe5prjrvZy2ZgB5_-t4L-RE6RmMniXOpps5K-JHByxuAwGfLRdEA_ObHmhD0ipVVzj404uOTNY6KSWxKmyawxNeHccH2wQX4Oujmow3fuEpOu29ri7iJOTLG7UzzjmOcfz0wGe19a31LYPS0cTd95l3FUS0GV2P6NZqihwuunaTBZNtQEft81L0lMQjnio_QheQe4nELxiEyeDvYIf8OsMdk7CCmwVELwyP6jFJPqtgwvpKcRWbX2NZZriAZ6UpDb9vERabA7VNSpASWY65k_0XM1tFmnuC_xDRFQY5J63fCwiGZJxu8PEMjfkQUgjDd573U8a-07eF0s0kiwy1g39rJpEEdfeRz4xRT-icPWTib-eUdez9E9lbYUr93h3udk0QD0-X20wRK-fWV7k3tN-aujlDrhS567fCio-jtu79KYT4f7RSCDjCxRw05Hq3wn0RszLi6LQRANSa-fVM2TGxIOvIYvDMb3c3mjlVhJd_GmF4S_qa9wu6w9uzytJmGDlznl008fmU_PVKUtnMIV7uiPZRiNVppc_ScRJH3IcMTLL7Y05EG6Xb3a0UjjFxY-DrCiaZVuieKxNvznyzD6LW5oqs1XJM_RuYqPM3WmmK0g_3iv1uFF_S7RYAAhY_yZRHtEfagUyEkFBCYl5bC_PLL8bwVKFGQ8xW2ZjxYzmpIAgQmvbTS4NxJJKeY6VpM6ZvzB9kCZptKX0_ZBKESVphqX8PUzJ4HZQpW9hKt3LBPQCxuY7k6o3Rx9p3fhFCzz6Ah3R14CLVrx3gfOlePryXEinspK4Qp2Ec0uUoM_yYbxOfWBBhoYkqSorkbgGH_1u_tC2QlcuezkFAgnWOgAtD53RriXDgeFPHw4kzUNeFD-2OFB-JTMMM_KBvC7shwKj9WECShZjrG3-LKWDWTK7nw7P6Civ5yWuSCNL-8m3RWxCq0U95E3RIBKUh4X51X6RahBRdQyds-5JFIqtUW4"
            }
          },
          "time": {
            "start": 1771214820172,
            "end": 1771214821888
          },
          "id": "prt_c64a1534c001vI2w8cSzl33RGH",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a145c4001QHof6pY2SgdkAF"
        },
        {
          "type": "tool",
          "callID": "call_toYBwYpPz0NrBF1XLj69McpM",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n@@\n Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n+\n+Note: This command is kept as a singular-name alias; prefer `.opencode/commands/scrape_docs.md` for new usage.\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM .opencode/commands/scrape_doc.md",
            "title": "Success. Updated the following files:\nM .opencode/commands/scrape_doc.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n@@ -4,8 +4,10 @@\n ---\n \n Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n \n+Note: This command is kept as a singular-name alias; prefer `.opencode/commands/scrape_docs.md` for new usage.\n+\n Goal:\n \n - Convert a user scraping request into a reusable external docs workflow.\n - Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md",
                  "relativePath": ".opencode/commands/scrape_doc.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md\n@@ -4,8 +4,10 @@\n ---\n \n Use the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n \n+Note: This command is kept as a singular-name alias; prefer `.opencode/commands/scrape_docs.md` for new usage.\n+\n Goal:\n \n - Convert a user scraping request into a reusable external docs workflow.\n - Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n",
                  "before": "---\ndescription: Add or run an external docs scraper from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nGoal:\n\n- Convert a user scraping request into a reusable external docs workflow.\n- Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n\nProcess:\n\n1. Parse source metadata from the user request:\n   - source key (for `<source>` folder and script name)\n   - docs root URL\n   - discovery strategy (`sitemap.xml` preferred)\n2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse shared helpers (`scripts/helpers/`) and follow Bun shebang script conventions.\n4. Implement resilient scrape flow:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML fetch + conversion\n5. Regenerate `docs/external/<source>/*.ext.md` and `docs/external/<source>/index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and call out any blocked pages.\n7. If a new scraper entrypoint was added, update `README.md` and `AGENTS.md` references.\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture result totals and notable failures\n- Exact rerun command (for example `bun scripts/scrape_<source>_docs.sh.ts`)\n",
                  "after": "---\ndescription: Add or run an external docs scraper from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nNote: This command is kept as a singular-name alias; prefer `.opencode/commands/scrape_docs.md` for new usage.\n\nGoal:\n\n- Convert a user scraping request into a reusable external docs workflow.\n- Create or refresh split page snapshots in `docs/external/<source>/` as `*.ext.md` plus `index.ext.md`.\n\nProcess:\n\n1. Parse source metadata from the user request:\n   - source key (for `<source>` folder and script name)\n   - docs root URL\n   - discovery strategy (`sitemap.xml` preferred)\n2. Create or update script: `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse shared helpers (`scripts/helpers/`) and follow Bun shebang script conventions.\n4. Implement resilient scrape flow:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML fetch + conversion\n5. Regenerate `docs/external/<source>/*.ext.md` and `docs/external/<source>/index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and call out any blocked pages.\n7. If a new scraper entrypoint was added, update `README.md` and `AGENTS.md` references.\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture result totals and notable failures\n- Exact rerun command (for example `bun scripts/scrape_<source>_docs.sh.ts`)\n",
                  "additions": 2,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771214823188,
              "end": 1771214823214
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0f24be295bdc93c501699297e5d8dc8190906629fb5bcc4a84"
            }
          },
          "id": "prt_c64a15a03001PjDSGTvlDdycRp",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a145c4001QHof6pY2SgdkAF"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "020bb13873ab6ada22b37a64c30df6ebb0d63489",
          "cost": 0,
          "tokens": {
            "total": 102529,
            "input": 3762,
            "output": 207,
            "reasoning": 93,
            "cache": {
              "read": 98560,
              "write": 0
            }
          },
          "id": "prt_c64a15f9800120dw0YnRGbsUY3",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a145c4001QHof6pY2SgdkAF"
        },
        {
          "type": "patch",
          "hash": "1823a8036e51a65adbe8fe6b0ddb55a16f487ea9",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_doc.md"
          ],
          "id": "prt_c64a15fd4001IwmCBeKVOCNOb1",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a145c4001QHof6pY2SgdkAF"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214823406,
          "completed": 1771214828515
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 102682,
          "input": 158,
          "output": 124,
          "reasoning": 89,
          "cache": {
            "read": 102400,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64a15fee001NneS7wM5RtAQ71",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "020bb13873ab6ada22b37a64c30df6ebb0d63489",
          "id": "prt_c64a169e9001YL32iHkxdGCnw0",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a15fee001NneS7wM5RtAQ71"
        },
        {
          "type": "reasoning",
          "text": "**Verifying changed files with git status**",
          "metadata": {
            "openai": {
              "itemId": "rs_0c15dc1ee727e96b01699297ea5d608194a0ae2d98c0e6bc18",
              "reasoningEncryptedContent": "gAAAAABpkpfsOIewg_eNzehx4D8utGIme3GRkrqEr7SOlVsm9Dpmzn5WV08isX3-mfZXY4LAnxBfD14oXYL_Qi9a3K2LAMsosqimGhUa7s0oVy-HzDOGRBe-SHVuWpDg0I8B8HSrCRlT3cWz0991pPp1G9bNMp-neQRHfN20ofaJEZq2BcLfk83IfvxDdiX_eJzMznk5P7ZQAENRDnDXSdz2cDytP6F6LofMzrAWB_eAOq88YbgXxg-VIQyXye0yLW8YDuKj3SA8La9XFPUQCy8yJHcYp8kT0xqyrGz4xgzkzC6_jmylqbijuec6dRuDQ1o00pSy5tTG9_vYrW1tgmHbnO-3pXS3SYhLiXtyTeatA2p-_1gDYyOGTDDfCZ0WqffBc82aJdTeB2bNf9qE8RDxd42cCG5Pks0TCzlK1YxGysg-F5Ib-CAax8NXAZDemd8ptvwiPTy_Kmhhp91NfcuDH_oIlbCvakYcPhtWFy0P5xD2ipNQKZUQWRb_Ncbh_IHiGKQR7TcB2HXcDS6SAgwXX__w3xh9djugq-GwCmJyugALqc3PO95vhfqAqLpDDdZC6vVgLkL1a8zuyTyllgJH8LGZgw4hV7JhruBs3TTf-xAawNADGJ-OcyaIthA6AmJvYC9DDpu6_uWUQ5_FoQFuzU2NAql7OeGvoekYqOxT5IFh5GNITn2UsQeNotUK3MNO8JzWYdd4zIufDk7Hm0TxvfxxmRnbEzhL1JhSL5I8Lh0FxeHWcnL7L9vJGvelMmxDMqPPWXttvk0hZngfK6bfIxtqYI3TB5yOlALfNAYPIF6Br84RnszS-kWs9-0AKm_Tj_fuZbUK34azZB1ttOHYgNI_mGkzXivC7Ad-RkFushkWxJQHy5L-xPhjUXBX17JF8vMkbnJGAzjyvDEtgMlWjHRM4YaKlCIGMFLD-UTZ-QLjK733s-J4Tr3mJMSvBQEEj1r0hOHI0a4ac4bdTOzvqzUvXINcdfqUG3v-IhHggsIqoNzn-9gfsgtMVlfyVSNcHypYxF1ZJQo1Jau8xhunZGRY3YHRnRCjlHJN2-Xgkk2KVPmCvHjxTPWvc3mDZSs1g-mypPzsKnEivEmUtxMV9810qFDTjJxTODpHk8GTRjkhk6RI7s9GJB8G4AIZ2Z0gmT77e6ERFJIlriKP2luNau3vkB0ngmHP4N2wy9PxmjuCjRvWHBLue15onB92DEzSrtA7Ul4c-9n6PFCCowCvwtMhr8z99FFdF_BcYKozaMagrmq55V3-hMXnjSpXDdn7h_NaFUf-_wSEW_Iq94p8hjkeOAg8DELaycjC8YhRQ6vWXk4mDa-Op6dBdAfDbf2aia-fnIrEdaH07umAuPuBkKct1jD8D5rIFFyxQ1fzwbTT6onXa0B9DL9vrsFr5p01smZ0KLTnuKsPwb6Say5sJJhTpU8HBg=="
            }
          },
          "time": {
            "start": 1771214826466,
            "end": 1771214828246
          },
          "id": "prt_c64a16be2001o5wSvAva4Ehz0H",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a15fee001NneS7wM5RtAQ71"
        },
        {
          "type": "tool",
          "callID": "call_HQik4IQdBinM3zNAexjoyq5B",
          "tool": "bash",
          "state": {
            "status": "completed",
            "input": {
              "command": "git status --short",
              "description": "Show current working tree after command/skill updates"
            },
            "output": " M AGENTS.md\n M README.md\n?? .opencode/commands/scrape_doc.md\n?? .opencode/commands/scrape_docs.md\n?? .opencode/skills/docs-scraping/\n?? .opencode/skills/external-docs-scraping/\n",
            "title": "Show current working tree after command/skill updates",
            "metadata": {
              "output": " M AGENTS.md\n M README.md\n?? .opencode/commands/scrape_doc.md\n?? .opencode/commands/scrape_docs.md\n?? .opencode/skills/docs-scraping/\n?? .opencode/skills/external-docs-scraping/\n",
              "exit": 0,
              "description": "Show current working tree after command/skill updates",
              "truncated": false
            },
            "time": {
              "start": 1771214828412,
              "end": 1771214828454
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_0c15dc1ee727e96b01699297ec34b081949a68f6f6d3310eda"
            }
          },
          "id": "prt_c64a172d8001mQm2Iih8BCht1O",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a15fee001NneS7wM5RtAQ71"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "020bb13873ab6ada22b37a64c30df6ebb0d63489",
          "cost": 0,
          "tokens": {
            "total": 102682,
            "input": 158,
            "output": 124,
            "reasoning": 89,
            "cache": {
              "read": 102400,
              "write": 0
            }
          },
          "id": "prt_c64a173ab0015q3mYw84KOAiqw",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a15fee001NneS7wM5RtAQ71"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214828533,
          "completed": 1771214844944
        },
        "parentID": "msg_c649fb35c001iNpN4gW0MoBwO6",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 103485,
          "input": 223,
          "output": 734,
          "reasoning": 413,
          "cache": {
            "read": 102528,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "stop",
        "id": "msg_c64a173f5001N38YGujv7vrETx",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "020bb13873ab6ada22b37a64c30df6ebb0d63489",
          "id": "prt_c64a17e770013Z44kUOeP4kIap",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a173f5001N38YGujv7vrETx"
        },
        {
          "type": "reasoning",
          "text": "**Reviewing git status and project changes**",
          "metadata": {
            "openai": {
              "itemId": "rs_0e0ec7970236198701699297f25e788190a5146557fa07c401",
              "reasoningEncryptedContent": "gAAAAABpkpf475rDTM3s4SAf9C_oU4il_xNsAoxZJ-DQ-eESRVy5ASUzKddC4sYgCIKnzLtb_eAHkkWzdBEjlUDIXDo9ICXd8JfcpYrVKY_cGSI9kob4oPxkBjhOF7K1jU75hIZteiLAWCqKgxP-qBWvQSr2jg3zAi3hyygv3AEd1utaL9hTXWzQ7N9zWNYl5biQdw0HhEhsynj7N43XuX6vpyhNpG0nwL-GNoZdw2kMDiE4jXsL6n9ZyacVWtr_xkLl_GmdyB0JUaLB4w_l0ROWy2BAfvkzc3Xte5JWcJR-mYm0USCcmQeucQ9B5VUH1cdcohJdd47xwW61EpfEibZY6xbjDSV8qm-W9gZ5AM3VIwWOEjxiw9-TGNsjEgJwffmPbeMCxuKhc-a6jPSo4DuyZ2SPrhFCuMC7LpdNEct0N1c5-nq9mtiLVyEIcJZ41gzGSQl7J0THF_nDCS_wmOexGLPoyySjST2W7bCy3xRh4QZLVWSyzOGjlkdQzLvEybPXctIkBa9-j6drULSQsrQhQ7w1Vb4zB5WEjhQw-cRZ0ONi83Mukb-bcuj4Pd8GGgOMft88PkeIBCYfiwoV5UQukNIJkJFdhOibI57lSDgKgufn7qyaor8CcNMSOprCaAvtr4bWWSgkR_cN-jbwe8_VgN5V9QA8QsYQxhsUiGDZpj-C-ruay8hrwOE_tTJYQUrk6qhfN7CgvE8JE3kttXI6BGk80JzjB1SCtnYZIaSzkGxCqeV1WO0lnjeHdw8p3pvCT-DBivFQxlhnxyV6EWFPqf5VGxwExbfpHrLXIF4G2aH_MS7HSw34aq8k3EHiYdkxrGbyOlMfApvqU4dPjWq8BdEtQhstLktH-dVQnwXE89I9bNQPLIZxKLhGl4YF3c5pGerXakQuTT_kyuqqN0-CWvzf1Dvv-8uaLiZE3d8zsFLGmA4UXKbdgJKsfAEwFd7TvKM9TvykdNpO7fbIS25EjRTV2fVYak0ADHiQAAnFI_que63BXmA9RHanvTMwrM3jXpbUvH3hSw2_nKbwgLbUJz82zgL8Lyn9lsMsEfF9r1P8UizaPPOQAyAk954tGmRMgn2b_kun60RYKjl3c0vDAO84HI392vauKMs6o9Wgz9dJPx4IzrOmauOv-s8Z70T2-afm-scPnT0ie99qKPrVpBtTzdxm2AR30vj2mXgnCgS7UP7ePr1g_IOhHPdUwLSwc8jIYnC75Y13ZPX6LWuExGICijnEGYfjLiztNqNtHEB3CGNP5cyCMJOg8n4qUe6kDfvwBXIfw88pbfis6cjHO2FjoqQUAU8lq_EP7X5H_wnHQVjbpktyANvzg6exvY2F8IfR8Qhw5q3Zl-4vEOmFCfTml3q0qLuHYUtesb0yPT_emO04Pank-IGrYp4-vVfiUiyv_aEG2RMAea8EkrW8h8djR_4InMo20-pn_x2-DleGga8XIkCb56uVMJnxw_e9c7hHMbfYFLeaDioni_xBuc_NPtSv0PYYUBSVIPpZkdwvvKruJ4iQ7GuS1rXjtZNNJBtUVFELGhuwJadbxubGJ_jxm2WeGhdxRE-NRg2kX2lMloKQFvTngIUb1VH0bZQjqpbFdYqB0xvdlMNeap6cMgZ9BqVS9EkvK6rBZxaXGjezMo0_HJFnzBoTkL1JF76GhtDWkf7l9ZBLPPhrFTDGoUd5HyQZPvFdXEAgdWWeaVY6d9PLe0DQV_PakpnNbj9J-jiBfuBzdi4uZ3Y7FOzs5KZSy5J3VAhSLC6tZ2SQHNEILSTaDVRxecPDSGDhpqC9Q5aRJK4LW995IgtUcra4PzQeo9BlINzUjU28apqLxKhjZ1fldUS-QXH_eC4f6iUxypXkBui2XtaTLp0L292XvDQf1PB8OTdJAxZfd1AN1B_zNgtAhCUSDBd9YdSfYN46CVbDamukc-H_eAFhjcm9LW0QCI9CvAkkRJTrFt9f-yEQA1N7l6cBp2QCWp1MogFomuUnmPbnsPPV8nHOTPdzHPkcQHuFx1Fu9b-Pa9oBbrRsfOfcNuUfygKdB9u0evirGpKJ2fN1xCwuHMpD-IApkp54hu3yTzvzLnfnjNosokU4pnDWnvOyrkN2ZHKiVJMOzQKU6Ovhq9THmfT85K_MLe4wt2IZ5MCIG-1F8dwNcH3u9xY_LQK12jQmjjAm60AIe9Ry6hQ3TuLt1OoOTMkLrCfYN2gDWZL2mZJPDVjSNk8FeTpBR_H1aLb1jt4KaSnnFmrtSjDzMpf38iUCVzibSpyVdOlYYr6Vh7X0sTSij7cxv5kNP1yo6yhW1shhurs8sExvm_E9OmXs4zJRmAIZ0PwgQwvLxXqadheqIlF_p-prt7QDewPcRqlTSFU_rOwyWyW96kiE9ZIZJpGjW650mGrUOy5--jDi3KviMV6IAAHHpbmFhCjEpcKmwoCDd17i5-2gJ-VLuZbNG1XfNyelvEnxh3aeAxzHJ2GbTwfYsT21rUj3ezxuAwg15TazKy0imvnho-kHV3D4sHUzCwWP_MDwcgOeJr5UDKiJmfY2WwhH4K_gGUwGr7PIXsKmbrwF0VDng15ABzepN2nCtRagP8LhrbyrJbATSjjlg-4_1apxdHwaTvndLxe-N5yHrLAdVnCjUR4FxDd89CBwN4Gq5maXBd0XBEggT0O2_FXXNwTJvjpc46kB2Y5pu1H8UINXqn6Ap25HGiOEcDBkyiELF6707F-bJhgtAUmlRBBx21ie1pYvr2eG2ODCJDy6qBhebmg3mmxjwhONVATcRE7yzsR22M85wceE4hhoPmq6c8VoM0Hdvryt5ufYjpcVhhhZaIbkzeXUGoPpowb_3ot4bjsk14E3w4QCVq6zBsusLJBRcwcL2OTuqQB3dDIpjuqo7Ailhc6NTpur5hI0b1H0yO2Q63LbAm0JPz2OhlGsWcbuQFp2CLz9IFJB5rZFOXnrWyfbefW1Z0MxICknrBeAVlSJdrZpdG8GKm2c0W3hwH8XPe-y-xT7NF_ldADFeUKwd4wESO8BbdcIVIaSx9UrEqO4JuuZWnqQdg7gJ1P3ppGSeO1oiChacBDWZUxCRj37FjEb13JXg-hHyX2tCvuHTlioSEcEgAw1rBU3iOEkWaFQiFRgb9oMirMf5Yo2Hhyk1EAY1wdo42LmMYQPupagG87zyTehBR9pnqWvL9VwHUsW-hxeyivXio6BPaoxNgdFLx5vQS7g1TMHBUndV_3NOgMxK43uyMffFQstRHfpDxFLOGwSEozvMNXZZqkUPKuANRGnacrIvHXGEHCiIfp_2TDYiiFjVgVS8cTBmAlpxmcv-9thm6ZAd_7VIDNQr1QMr_MZoWjcbrrYKmRL2kjCAvOy-iR4Xc51o-LhUDC-LUqyu9JZOmYG8mtTkGguu2yKn3JFeIQfRst-HmEGGXrr8bGlf-39VG-P-nZIKUkDeLgjBaJRCzyT-wH9Je95O9Ap3ABqxq7B3rQtVn1BTwPCAVQfwATuFXVV-Zhjab65pJz_k-ylF7Fb5khSv_sImO471d16wR9smZzVQTacRIcPXgSH6aChde18uuxwVDjnuriT0Eg2bxiwMC8kpkY5sbeZOzM24h8wVTMto2wn8olQXAZR52jNO4A9MWvfW9lXmUwcJVUUBj7r0jtrXM5LawdNHNrWPxMR7T0HipMEBl1ZNP70pyFmRN86oTepcbUhefejmpWEb4CoZ7l7lMnO1UDtbWugn5i7"
            }
          },
          "time": {
            "start": 1771214834421,
            "end": 1771214840831
          },
          "id": "prt_c64a18af5001304Gpt6J7lTxeQ",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a173f5001N38YGujv7vrETx"
        },
        {
          "type": "text",
          "text": "Implemented  I added a generic docs-scraping skill + command flow and rewired the existing `scrape_doc` command to it.\n\n- Added new generic skill: `.opencode/skills/docs-scraping/SKILL.md`\n- Added new canonical command: `.opencode/commands/scrape_docs.md`\n- Updated existing command as alias + generic behavior: `.opencode/commands/scrape_doc.md`\n- Updated legacy skill note for compatibility: `.opencode/skills/external-docs-scraping/SKILL.md`\n- Updated references/docs:\n  - `AGENTS.md`\n  - `README.md`\n\nWhat this now standardizes:\n- User-request driven scraping\n- Script entrypoint pattern: `scripts/scrape_<source>_docs.sh.ts`\n- Split outputs: `docs/external/<source>/*.ext.md`\n- Required index: `docs/external/<source>/index.ext.md`\n- Required per-file `----` header/footer metadata/notes format\n\nCurrent git status (relevant):\n- Modified: `AGENTS.md`, `README.md`\n- New/untracked: `.opencode/commands/scrape_doc.md`, `.opencode/commands/scrape_docs.md`, `.opencode/skills/docs-scraping/SKILL.md`, `.opencode/skills/external-docs-scraping/SKILL.md`\n\nIf you want, I can do a quick pass next to add a tiny usage example block to `scrape_docs.md` (single realistic prompt + expected output paths).",
          "time": {
            "start": 1771214844844,
            "end": 1771214844844
          },
          "metadata": {
            "openai": {
              "itemId": "msg_0e0ec7970236198701699297f8c5dc81908808d823269bb803"
            }
          },
          "id": "prt_c64a1a400001ooQv3631MfLSvz",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a173f5001N38YGujv7vrETx"
        },
        {
          "type": "step-finish",
          "reason": "stop",
          "snapshot": "020bb13873ab6ada22b37a64c30df6ebb0d63489",
          "cost": 0,
          "tokens": {
            "total": 103485,
            "input": 223,
            "output": 734,
            "reasoning": 413,
            "cache": {
              "read": 102528,
              "write": 0
            }
          },
          "id": "prt_c64a1b3dc001Hl8tLbRyN7iZI4",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a173f5001N38YGujv7vrETx"
        }
      ]
    },
    {
      "info": {
        "role": "user",
        "time": {
          "created": 1771214866158
        },
        "summary": {
          "title": "Quick check-in: Sure",
          "diffs": [
            {
              "file": ".opencode/commands/scrape_docs.md",
              "before": "---\ndescription: Add or refresh external docs snapshots from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nGoal:\n\n- Implement or refresh a reusable scraper script for the requested docs source.\n- Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n\nProcess:\n\n1. Extract request metadata:\n   - source key (for folder and script naming)\n   - docs root URL\n   - page discovery strategy (`sitemap.xml` preferred)\n2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).\n4. Implement resilient scraping:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML conversion to markdown\n5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture totals and notable failures\n- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n",
              "after": "---\ndescription: Add or refresh external docs snapshots from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nGoal:\n\n- Implement or refresh a reusable scraper script for the requested docs source.\n- Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n\nProcess:\n\n1. Extract request metadata:\n   - source key (for folder and script naming)\n   - docs root URL\n   - page discovery strategy (`sitemap.xml` preferred)\n2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).\n4. Implement resilient scraping:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML conversion to markdown\n5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n\nExample usage:\n\n- Request example: \"Scrape https://moonrepo.dev/docs into docs/external/moonrepo as split `.ext.md` pages with index.\"\n- Expected script: `scripts/scrape_moon_docs.sh.ts`\n- Expected outputs:\n  - `docs/external/moonrepo/index.ext.md`\n  - `docs/external/moonrepo/docs.ext.md`\n  - `docs/external/moonrepo/docs__install.ext.md`\n  - additional page-level `*.ext.md` files\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture totals and notable failures\n- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n",
              "additions": 10,
              "deletions": 0,
              "status": "modified"
            }
          ]
        },
        "agent": "build",
        "model": {
          "providerID": "openai",
          "modelID": "gpt-5.3-codex"
        },
        "variant": "high",
        "id": "msg_c64a206e9001ja2cUL1SBkrROK",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "text",
          "text": "Sure",
          "id": "prt_c64a206e9002Is1dMKezSaUkbB",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a206e9001ja2cUL1SBkrROK"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214866183,
          "completed": 1771214875600
        },
        "parentID": "msg_c64a206e9001ja2cUL1SBkrROK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 100942,
          "input": 8201,
          "output": 453,
          "reasoning": 200,
          "cache": {
            "read": 92288,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "tool-calls",
        "id": "msg_c64a20707001uZZaJJJvEouxoD",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "020bb13873ab6ada22b37a64c30df6ebb0d63489",
          "id": "prt_c64a2106900117CQfDBfQnVV0O",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a20707001uZZaJJJvEouxoD"
        },
        {
          "type": "reasoning",
          "text": "**Adding usage example to docs**",
          "metadata": {
            "openai": {
              "itemId": "rs_016b3291d8c97fed0169929815039c81938986ab6f29d2d63d",
              "reasoningEncryptedContent": "gAAAAABpkpgY8baMTz_IqOnwhU7uSV_ksz-czFeehvqTi_A08VJ7dL4AIJkWQIVLHxzp-BxzFtNJbyeqND4Ia7BA0BY0o-_WwvrmDCuYDmrG4OoSkY7Qqv-DxPjvIEsoT3A5zGudE0FzQYOHkzJeyx78KZ5ctnPPthaF4cd_lMTLEDYuqP3BoRatqJqi5iea9eMqZqQuzBRGdSHfKo90LGeLPuBZj_6T9qK8W0MVE3Y-OnAhqdIiTi1ENIWw2bNCpcB4a1La5qM1vN90qQo6F3MYp2m21eZRjqzObHKV1yM95cSJx34ciyHnxVRSaNgduOcQQT2sZ08J3ueggggbjkyP8IKEa_R_GgJF7lRUgRFCi2SfI-LDfbxrSrwAAYLPHa5NivIJGkr_odQtSkmnppars90A0OGq5GtY2Zt1lOUEdVFM3np6VwlngGoFv4Y2ruHW7uyvv5jq7jVLakdLoTpEjm6k6hkU46qGcASCIDFTkkHCQ6Z94hDq3cWmOY0SJke4zYnHpB2uCGUIZosFtiqoZTSBscaVo2u64DacmU4Z-7fuDjSQna9jrJ1c3oQt9TIsJhVmX3ph_jhPuU9R3_WiRaoQ-idvvIuAYOvpvcsPZlncrsldAJ-EHlg5fEbK_AJ2flQQX2Cb2Ron-9XGX-aVTm0bQde24-PobhM5TYrfarcM_F6rU5q5su4nZpNtzO7ROJQw1Q9Enbj8C6hz8XNZr3zA6kcgJvxrHwV1e5T8xO90n2VT6cAhcI1wC9JJCA9tp3qGZkKJY_0dfHlTlQM_1SAOIuaJLiDZOVFgxaNjQ2c3mK4YIaJGxJbXdDdWWTOeebo3CX5AZcu3ZUw_T0BQAceZH-KbLC0C70qLUYn7m_4q-9qJmJZ7gzmtMUHjKpyKsbJifa6aHB-lTwBaO0f7IaIdIoFqqHqaW55B0cG3Z20abGmvJN6VlNJKw9zE8EnE2wHSAAw2SSd8bld-NethphNlr6OqNW7ECUaSw7bG0mBD3NsATmBOZk4IURCEAbpXszMbnpMwbycjFfaErbt0aE7lsxpIazOPs8DEkkCteRn9-nODWdSAArxm-n8m0tEhiwJVVAZf6bUS4YhOJryAjoF3-CMHl0QujOLTGvsrhRbvFv7FTH5BThyyXP70JCz4ahS34BA1DXSFsr9Z1Zrh8fvJD-umFr7Ogae06ukLQk9iQGzjW4E19GGm4kXEW7I_1zZ9hvzz4Yl1rU32qfLsycfU5dBZHphylmpW9xlTqtO12lv4JFdTzbCGDcPIA9_8wgzj9i-r7swP_FMLB-8jsLXm6SSukX3T9NuMuzlG2VzZ4srRDbAFRblYYTpSv08g1iQyUilm7WU77oYKWbTjUtxbchbcs5B3ktOXZk-zz2SU8ROPLpWoMPpXmbncEVaikZ4McaIbqLlPSm5UbBbQmzoYOFFyv3vI9WVbKSOGHJFWt4PQqGjtVQ4EvjU2apWosnygeICcBi2Z_71apzJws1gLUkdCNctmuo060WCLXKvZZ6BPyaoQMiBG5iwgZAOPU0mN4IpW_ye7n52dyToZmV2H1DHoI-wHtvh6CiWJ4WAHMwBE4MxxlHhcUCyW2ZEL4NT1IwSqXkYiUn-oWI4TiO_bWcoMD5pizWVb1R3yfiTQY_hlZT1D_EZlvAR6PxXo2f0ZVu518mU2nIKzXfAhbpGCvsHP3J4Iob7SlqTmPJR1NjOdKRMJ_YmweyC9anPGIY4KIsysZsUb-03DYFpTCSWnreTX_ccOB5kGpGO_tqiM3s0Q6P8000vb29Sy62WmioUTgI0IjGunArdvwrkJ86q1Qh2c-Qk82ay9O6EAMi7rUCY6gxrTDJ2Y5c5M1NOkzJv5kMRNUdNQOUd7_KXXF5BXQff72hv3gMunkZeH_PL1HIYk7qzToB-9xBpIzr-WkUwdaCtcUyZlEzG64oQdv3ogcCWSASFSkaJvDDKPS74sQIh-ZjytcQ7-LU3HJMkZdiEZUUYdXPzsU8trfudLTvbUoIGlXwLQgV3ThHyC-NZS6vbQPWl-Jl_oVNwIsDu14ZEzaI8iQW-HfjSqtzEUaGFrMsu-5Ite6Hodi7KhJ06QBgJs6f-V3ivk-u5CfGz_mQkvaSdOI7F-d4ueRrY8xnnA2duOq5NuH33knjtxTVRWQJagaLk9W3kGYRbrwdM9dvH0Bibf"
            }
          },
          "time": {
            "start": 1771214869045,
            "end": 1771214872435
          },
          "id": "prt_c64a21235001OiWFiZWGqv5mQE",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a20707001uZZaJJJvEouxoD"
        },
        {
          "type": "tool",
          "callID": "call_7fAIMxnFD3S2Vr445OfptfA1",
          "tool": "apply_patch",
          "state": {
            "status": "completed",
            "input": {
              "patchText": "*** Begin Patch\n*** Update File: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n@@\n 5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n 6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n 7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n+\n+Example usage:\n+\n+- Request example: \"Scrape https://moonrepo.dev/docs into docs/external/moonrepo as split `.ext.md` pages with index.\"\n+- Expected script: `scripts/scrape_moon_docs.sh.ts`\n+- Expected outputs:\n+  - `docs/external/moonrepo/index.ext.md`\n+  - `docs/external/moonrepo/docs.ext.md`\n+  - `docs/external/moonrepo/docs__install.ext.md`\n+  - additional page-level `*.ext.md` files\n \n Return:\n*** End Patch"
            },
            "output": "Success. Updated the following files:\nM .opencode/commands/scrape_docs.md",
            "title": "Success. Updated the following files:\nM .opencode/commands/scrape_docs.md",
            "metadata": {
              "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n@@ -24,8 +24,18 @@\n 5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n 6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n 7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n \n+Example usage:\n+\n+- Request example: \"Scrape https://moonrepo.dev/docs into docs/external/moonrepo as split `.ext.md` pages with index.\"\n+- Expected script: `scripts/scrape_moon_docs.sh.ts`\n+- Expected outputs:\n+  - `docs/external/moonrepo/index.ext.md`\n+  - `docs/external/moonrepo/docs.ext.md`\n+  - `docs/external/moonrepo/docs__install.ext.md`\n+  - additional page-level `*.ext.md` files\n+\n Return:\n \n - Script path(s) added/updated\n - Output directory generated\n\n",
              "files": [
                {
                  "filePath": "/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md",
                  "relativePath": ".opencode/commands/scrape_docs.md",
                  "type": "update",
                  "diff": "Index: /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n===================================================================\n--- /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n+++ /Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md\n@@ -24,8 +24,18 @@\n 5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n 6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n 7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n \n+Example usage:\n+\n+- Request example: \"Scrape https://moonrepo.dev/docs into docs/external/moonrepo as split `.ext.md` pages with index.\"\n+- Expected script: `scripts/scrape_moon_docs.sh.ts`\n+- Expected outputs:\n+  - `docs/external/moonrepo/index.ext.md`\n+  - `docs/external/moonrepo/docs.ext.md`\n+  - `docs/external/moonrepo/docs__install.ext.md`\n+  - additional page-level `*.ext.md` files\n+\n Return:\n \n - Script path(s) added/updated\n - Output directory generated\n",
                  "before": "---\ndescription: Add or refresh external docs snapshots from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nGoal:\n\n- Implement or refresh a reusable scraper script for the requested docs source.\n- Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n\nProcess:\n\n1. Extract request metadata:\n   - source key (for folder and script naming)\n   - docs root URL\n   - page discovery strategy (`sitemap.xml` preferred)\n2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).\n4. Implement resilient scraping:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML conversion to markdown\n5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture totals and notable failures\n- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n",
                  "after": "---\ndescription: Add or refresh external docs snapshots from a user request\nagent: build\n---\n\nUse the `docs-scraping` skill from `.opencode/skills/docs-scraping/SKILL.md`.\n\nGoal:\n\n- Implement or refresh a reusable scraper script for the requested docs source.\n- Generate split page snapshots in `docs/external/<source>/` as `.ext.md` files plus `index.ext.md`.\n\nProcess:\n\n1. Extract request metadata:\n   - source key (for folder and script naming)\n   - docs root URL\n   - page discovery strategy (`sitemap.xml` preferred)\n2. Create or update `scripts/scrape_<source>_docs.sh.ts`.\n3. Reuse helpers under `scripts/helpers/` and keep script conventions (`#!/usr/bin/env bun`, `*.sh.ts`).\n4. Implement resilient scraping:\n   - primary: `r.jina.ai` markdown proxy\n   - fallback: direct HTML conversion to markdown\n5. Write split page outputs to `docs/external/<source>/` and include `index.ext.md`.\n6. Report capture totals (`pages`, `ok`, `failed`) and blocked pages.\n7. Update `README.md` and/or `AGENTS.md` if new entrypoints or conventions were added.\n\nExample usage:\n\n- Request example: \"Scrape https://moonrepo.dev/docs into docs/external/moonrepo as split `.ext.md` pages with index.\"\n- Expected script: `scripts/scrape_moon_docs.sh.ts`\n- Expected outputs:\n  - `docs/external/moonrepo/index.ext.md`\n  - `docs/external/moonrepo/docs.ext.md`\n  - `docs/external/moonrepo/docs__install.ext.md`\n  - additional page-level `*.ext.md` files\n\nReturn:\n\n- Script path(s) added/updated\n- Output directory generated\n- Discovery strategy used\n- Capture totals and notable failures\n- Exact rerun command (`bun scripts/scrape_<source>_docs.sh.ts`)\n",
                  "additions": 10,
                  "deletions": 0
                }
              ],
              "diagnostics": {},
              "truncated": false
            },
            "time": {
              "start": 1771214875494,
              "end": 1771214875507
            }
          },
          "metadata": {
            "openai": {
              "itemId": "fc_016b3291d8c97fed016992981864e881939c0d377e49fdfc1a"
            }
          },
          "id": "prt_c64a21f750015VRh6f2EFA1lLV",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a20707001uZZaJJJvEouxoD"
        },
        {
          "type": "step-finish",
          "reason": "tool-calls",
          "snapshot": "fc048a8afcda575cde9221fbaa918e5f21eda0a5",
          "cost": 0,
          "tokens": {
            "total": 100942,
            "input": 8201,
            "output": 453,
            "reasoning": 200,
            "cache": {
              "read": 92288,
              "write": 0
            }
          },
          "id": "prt_c64a22b9b0013tq16sl4KxxNBA",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a20707001uZZaJJJvEouxoD"
        },
        {
          "type": "patch",
          "hash": "020bb13873ab6ada22b37a64c30df6ebb0d63489",
          "files": [
            "/Users/alex/repos/vfp/dark-factory/.opencode/commands/scrape_docs.md"
          ],
          "id": "prt_c64a22bc7001vK1MluaA2F0cRl",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a20707001uZZaJJJvEouxoD"
        }
      ]
    },
    {
      "info": {
        "role": "assistant",
        "time": {
          "created": 1771214875618,
          "completed": 1771214880945
        },
        "parentID": "msg_c64a206e9001ja2cUL1SBkrROK",
        "modelID": "gpt-5.3-codex",
        "providerID": "openai",
        "mode": "build",
        "agent": "build",
        "path": {
          "cwd": "/Users/alex/repos/vfp/dark-factory",
          "root": "/Users/alex/repos/vfp/dark-factory"
        },
        "cost": 0,
        "tokens": {
          "total": 101128,
          "input": 107,
          "output": 157,
          "reasoning": 57,
          "cache": {
            "read": 100864,
            "write": 0
          }
        },
        "variant": "high",
        "finish": "stop",
        "id": "msg_c64a22be2001KmIRMZEkas0gYk",
        "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M"
      },
      "parts": [
        {
          "type": "step-start",
          "snapshot": "fc048a8afcda575cde9221fbaa918e5f21eda0a5",
          "id": "prt_c64a23540001WAd5YnWFC7XM3i",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a22be2001KmIRMZEkas0gYk"
        },
        {
          "type": "reasoning",
          "text": "**Confirming documentation update done**",
          "metadata": {
            "openai": {
              "itemId": "rs_0ca8bab7e2d6ccc2016992981e45c08190ae3951989ae1b841",
              "reasoningEncryptedContent": "gAAAAABpkpggFjXvdf9TYLbadtrlUq67tjqRGr178n97LWpvPfNwgtgjHFOun6BPHezQUD1nncBO05YgyKm2FQ9n6nQeOFnDTUzkeMLaCNtiu5HHQchkigp2EF57xKtxzUpE8WFLkMFcIVJQ7IFWO1ovkxKClJM_cqTfZnys5Aj-CgsER9GcJy13ZbF2yT0sTmSfJGby9eqy9RMhWHHBYSPw86ewqi_QswTEPatKwqLnVFaA4jTi9wJsBMnHnaRbEu3Acla-_oTwivYhkBHdtiVDgb63njRPbWRfh1mfv0jn-xk9R2TF75dMNrIo6Z9H5-2w9jgWNzLIrvdaQFi3dT2HfgNwO952Jcuxi-LacGI4cIsYQP5cKwfCPoGDHCxmugzUGMDEL-2-cw9hfXhbLMuG4CLDdQoVoge5U2ctHwkvDCDxFzTKueOb7RQM1XOQJXEpo-u79skxZgPsADIl5XqL7-RFAw35c3inYx9bIseRhbQBUvfIW24D6cIetJqIJ3LgUXI0_z3aUMHjSt96cjLNyM6drFc1PjQgjgDAdpjy4Y9l9WTbDK6iz2WkoXFiWKh62n5LmRuBC22VV2yQIJ79e--CH9SuRrRKNK9zPQ9yF1-8uzhEcv5f6K0Ty-GMiPrfFqkdMXghSFnnxcTKwZU4nQePSNqXt_-YGMbBDR33_RSw2K7XVkxBboyUIrnW3QUQJ47P_kks_tiw-mCRSCuJVOj9ZS8d2YWZZD21ApPYwm7hC6a0wPES-OgNzKkF8m-Kyf-jObH5kKGUXygqZ1rdp50ZIj5tDuqnHNDpMUgq4L7bdYu42iJr_bgYpgjUPgvdAsR17AulK0Ao8iAIZR28y_C2sEwqcNn03V-nrfFtEvnd7KSZAoAXUQzd2fEHGz8zdtNT6i2UnxqUz0bp5LfjVtgflA-MoUYfh3eOvy-CBok4yK5QUUEXE0jvLW2ZUCItrisM2HxBUDa7Td8wN4AXHvTXw3AYWdr_jFpi1TQ-nrCjM1eLPolkDbbBZt67phgH_rOQ6efv6QDHGkVLQ1HumiR6Yy_Ld037KJT2GZci99as3T0tnJAO7e96HhMWWQlNWdGlp956LXeVefL8pAGYNuTyE8BqhvKx8eQV2AZ0eU4WI39EpWcc54xx5KHdx7ByoZgS0BO0LVoE0YVhqQOD413IcpSBLQXx5W-oYMkIXtm_aTgjlUh6Xr4e5ymnoJCDuj5417T3"
            }
          },
          "time": {
            "start": 1771214878368,
            "end": 1771214880534
          },
          "id": "prt_c64a236a0001pn36mrKWid71vh",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a22be2001KmIRMZEkas0gYk"
        },
        {
          "type": "text",
          "text": "Added a compact usage example block to ` .opencode/commands/scrape_docs.md` so it now includes:\n\n- A realistic request example\n- Expected script path (`scripts/scrape_moon_docs.sh.ts`)\n- Expected output layout including `index.ext.md` and split page `.ext.md` files\n\nIf you want, I can mirror the same example block into the alias command at `.opencode/commands/scrape_doc.md` for consistency.",
          "time": {
            "start": 1771214880874,
            "end": 1771214880874
          },
          "metadata": {
            "openai": {
              "itemId": "msg_0ca8bab7e2d6ccc201699298207dec8190b73d0e0df0c52ab1"
            }
          },
          "id": "prt_c64a23f17001q57PFm3SxNnClu",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a22be2001KmIRMZEkas0gYk"
        },
        {
          "type": "step-finish",
          "reason": "stop",
          "snapshot": "fc048a8afcda575cde9221fbaa918e5f21eda0a5",
          "cost": 0,
          "tokens": {
            "total": 101128,
            "input": 107,
            "output": 157,
            "reasoning": 57,
            "cache": {
              "read": 100864,
              "write": 0
            }
          },
          "id": "prt_c64a2407e001HtIyOX71ZiZC5h",
          "sessionID": "ses_39b807128ffeskZYgLLXdO7p7M",
          "messageID": "msg_c64a22be2001KmIRMZEkas0gYk"
        }
      ]
    }
  ]
}
